{"version":3,"file":"layer.b20bd88e.js","sources":["../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../node_modules/gl-matrix/esm/common.js","../../node_modules/gl-matrix/esm/vec4.js","../../node_modules/@math.gl/web-mercator/dist/esm/math-utils.js","../../node_modules/gl-matrix/esm/mat4.js","../../node_modules/gl-matrix/esm/vec2.js","../../node_modules/gl-matrix/esm/vec3.js","../../node_modules/@math.gl/web-mercator/dist/esm/assert.js","../../node_modules/@math.gl/web-mercator/dist/esm/web-mercator-utils.js","../../node_modules/@math.gl/web-mercator/dist/esm/fit-bounds.js","../../node_modules/@math.gl/web-mercator/dist/esm/get-bounds.js","../../node_modules/@math.gl/web-mercator/dist/esm/normalize-viewport-props.js","../../node_modules/hammerjs/hammer.js","../../node_modules/mjolnir.js/dist/esm/utils/hammer-overrides.js","../../node_modules/mjolnir.js/dist/esm/utils/hammer.browser.js","../../node_modules/mjolnir.js/dist/esm/inputs/input.js","../../node_modules/mjolnir.js/dist/esm/constants.js","../../node_modules/mjolnir.js/dist/esm/utils/globals.js","../../node_modules/mjolnir.js/dist/esm/inputs/wheel-input.js","../../node_modules/mjolnir.js/dist/esm/inputs/move-input.js","../../node_modules/mjolnir.js/dist/esm/inputs/key-input.js","../../node_modules/mjolnir.js/dist/esm/inputs/contextmenu-input.js","../../node_modules/mjolnir.js/dist/esm/utils/event-utils.js","../../node_modules/mjolnir.js/dist/esm/utils/event-registrar.js","../../node_modules/mjolnir.js/dist/esm/event-manager.js","../../node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","../../node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/assert.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/globals.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-job.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/node/worker_threads-browser.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-utils/get-loadable-worker-url.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-utils/get-transfer-list.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-thread.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-pool.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-farm.js","../../node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-loader-utils/parse-with-worker.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-api/get-worker-url.js","../../node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/buffer-utils.js","../../node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/array-buffer-utils.js","../../node_modules/@loaders.gl/loader-utils/dist/esm/lib/iterators/async-iteration.js","../../node_modules/@probe.gl/stats/dist/esm/utils/hi-res-timestamp.js","../../node_modules/@probe.gl/stats/dist/esm/lib/stat.js","../../node_modules/@probe.gl/stats/dist/esm/lib/stats.js","../../node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/file-aliases.js","../../node_modules/@loaders.gl/core/dist/esm/javascript-utils/is-type.js","../../node_modules/@loaders.gl/core/dist/esm/lib/utils/mime-type-utils.js","../../node_modules/@loaders.gl/core/dist/esm/lib/utils/resource-utils.js","../../node_modules/@loaders.gl/core/dist/esm/lib/utils/response-utils.js","../../node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.js","../../node_modules/@probe.gl/env/dist/esm/lib/is-electron.js","../../node_modules/@probe.gl/env/dist/esm/lib/is-browser.js","../../node_modules/@probe.gl/env/dist/esm/lib/globals.js","../../node_modules/@probe.gl/env/dist/esm/utils/globals.js","../../node_modules/@probe.gl/env/dist/esm/lib/get-browser.js","../../node_modules/@probe.gl/log/dist/esm/utils/local-storage.js","../../node_modules/@probe.gl/log/dist/esm/utils/formatters.js","../../node_modules/@probe.gl/log/dist/esm/utils/color.js","../../node_modules/@probe.gl/log/dist/esm/utils/assert.js","../../node_modules/@probe.gl/log/dist/esm/utils/hi-res-timestamp.js","../../node_modules/@probe.gl/log/dist/esm/log.js","../../node_modules/@probe.gl/log/dist/esm/utils/autobind.js","../../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loggers.js","../../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/option-defaults.js","../../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/option-utils.js","../../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/normalize-loader.js","../../node_modules/@loaders.gl/core/dist/esm/lib/api/register-loaders.js","../../node_modules/@loaders.gl/core/dist/esm/lib/utils/log.js","../../node_modules/@loaders.gl/core/dist/esm/lib/api/select-loader.js","../../node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/path.js","../../node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-array-buffer-iterator.js","../../node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-stream-iterator.js","../../node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-iterator.js","../../node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-string-iterator.js","../../node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-blob-iterator.js","../../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-data.js","../../node_modules/@loaders.gl/core/dist/esm/lib/api/parse.js","../../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loader-context.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-api/validate-worker-version.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/version.js","../../node_modules/@loaders.gl/core/dist/esm/lib/api/load.js","../../node_modules/@loaders.gl/images/node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","../../node_modules/@loaders.gl/images/node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","../../node_modules/@loaders.gl/images/dist/esm/lib/category-api/image-type.js","../../node_modules/@loaders.gl/images/dist/esm/lib/category-api/parsed-image-api.js","../../node_modules/@loaders.gl/images/dist/esm/lib/parsers/svg-utils.js","../../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image.js","../../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image-bitmap.js","../../node_modules/@loaders.gl/images/dist/esm/lib/category-api/binary-image-api.js","../../node_modules/@loaders.gl/images/dist/esm/image-loader.js","../../node_modules/@loaders.gl/images/dist/esm/lib/utils/version.js","../../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-image.js","../../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-node-image.js","../../node_modules/@deck.gl/core/dist/esm/utils/log.js","../../node_modules/@deck.gl/core/dist/esm/debug/index.js","../../node_modules/@deck.gl/core/dist/esm/utils/json-loader.js","../../node_modules/@deck.gl/core/dist/esm/lib/init.js","../../node_modules/@luma.gl/gltools/dist/esm/utils/log.js","../../node_modules/@luma.gl/gltools/dist/esm/utils/assert.js","../../node_modules/@luma.gl/gltools/dist/esm/utils/webgl-checks.js","../../node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-vertex-array-object.js","../../node_modules/@luma.gl/gltools/dist/esm/polyfill/get-parameter-polyfill.js","../../node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-table.js","../../node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-context.js","../../node_modules/@luma.gl/gltools/dist/esm/state-tracker/webgl-parameter-tables.js","../../node_modules/@luma.gl/gltools/dist/esm/utils/utils.js","../../node_modules/@luma.gl/gltools/dist/esm/state-tracker/track-context-state.js","../../node_modules/@luma.gl/gltools/dist/esm/state-tracker/unified-parameter-api.js","../../node_modules/@luma.gl/gltools/dist/esm/utils/device-pixels.js","../../node_modules/@luma.gl/gltools/dist/esm/context/context.js","../../node_modules/@luma.gl/webgl/dist/esm/init.js","../../node_modules/@luma.gl/webgl/dist/esm/utils/assert.js","../../node_modules/@luma.gl/webgl/dist/esm/webgl-utils/constants-to-keys.js","../../node_modules/@luma.gl/webgl/dist/esm/utils/utils.js","../../node_modules/@luma.gl/webgl/dist/esm/utils/stub-methods.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/resource.js","../../node_modules/@luma.gl/webgl/dist/esm/webgl-utils/typed-array-utils.js","../../node_modules/@luma.gl/webgl/dist/esm/utils/check-props.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/accessor.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/buffer.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/texture-formats.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/texture.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js","../../node_modules/@luma.gl/webgl/dist/esm/utils/load-file.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/texture-cube.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/texture-3d.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer-formats.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/clear.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/copy-and-blit.js","../../node_modules/@luma.gl/webgl/dist/esm/webgl-utils/format-utils.js","../../node_modules/@luma.gl/webgl/dist/esm/features/webgl-features-table.js","../../node_modules/@luma.gl/webgl/dist/esm/features/features.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js","../../node_modules/@luma.gl/webgl/dist/esm/webgl-utils/texture-utils.js","../../node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-name.js","../../node_modules/@luma.gl/webgl/dist/esm/glsl-utils/format-glsl-error.js","../../node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-type-name.js","../../node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-version.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/shader.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/uniforms.js","../../node_modules/@luma.gl/webgl/dist/esm/webgl-utils/attribute-utils.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/program-configuration.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/program.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/query.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/transform-feedback.js","../../node_modules/@luma.gl/webgl/dist/esm/utils/array-utils-flat.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/vertex-array-object.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/vertex-array.js","../../node_modules/@luma.gl/webgl/dist/esm/utils/format-value.js","../../node_modules/@luma.gl/webgl/dist/esm/debug/debug-uniforms.js","../../node_modules/@luma.gl/webgl/dist/esm/debug/debug-vertex-array.js","../../node_modules/@luma.gl/webgl/dist/esm/debug/debug-program-configuration.js","../../node_modules/@luma.gl/engine/dist/esm/lib/animation-loop.js","../../node_modules/@luma.gl/webgl/dist/esm/webgl-utils/request-animation-frame.js","../../node_modules/@luma.gl/shadertools/dist/esm/utils/assert.js","../../node_modules/@luma.gl/shadertools/dist/esm/lib/filters/prop-types.js","../../node_modules/@luma.gl/shadertools/dist/esm/lib/shader-module.js","../../node_modules/@luma.gl/shadertools/dist/esm/lib/resolve-modules.js","../../node_modules/@luma.gl/shadertools/dist/esm/utils/is-old-ie.js","../../node_modules/@luma.gl/shadertools/dist/esm/utils/webgl-info.js","../../node_modules/@luma.gl/shadertools/dist/esm/modules/module-injectors.js","../../node_modules/@luma.gl/shadertools/dist/esm/lib/inject-shader.js","../../node_modules/@luma.gl/shadertools/dist/esm/lib/constants.js","../../node_modules/@luma.gl/shadertools/dist/esm/lib/transpile-shader.js","../../node_modules/@luma.gl/shadertools/dist/esm/lib/assemble-shaders.js","../../node_modules/@luma.gl/shadertools/dist/esm/lib/platform-defines.js","../../node_modules/@luma.gl/shadertools/dist/esm/utils/shader-utils.js","../../node_modules/@luma.gl/shadertools/dist/esm/modules/fp32/fp32.js","../../node_modules/@math.gl/core/dist/esm/lib/assert.js","../../node_modules/@math.gl/core/dist/esm/lib/common.js","../../node_modules/@math.gl/core/dist/esm/classes/base/math-array.js","../../node_modules/@math.gl/core/dist/esm/lib/validators.js","../../node_modules/@math.gl/core/dist/esm/classes/base/vector.js","../../node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js","../../node_modules/@math.gl/core/dist/esm/classes/vector3.js","../../node_modules/@math.gl/core/dist/esm/classes/base/matrix.js","../../node_modules/@math.gl/core/dist/esm/classes/matrix4.js","../../node_modules/@luma.gl/shadertools/dist/esm/modules/picking/picking.js","../../node_modules/@luma.gl/shadertools/dist/esm/modules/transform/transform.js","../../node_modules/@luma.gl/engine/dist/esm/lib/program-manager.js","../../node_modules/@luma.gl/engine/dist/esm/lib/model-utils.js","../../node_modules/@luma.gl/engine/dist/esm/lib/model.js","../../node_modules/@luma.gl/engine/dist/esm/transform/buffer-transform.js","../../node_modules/@luma.gl/engine/dist/esm/transform/transform-shader-utils.js","../../node_modules/@luma.gl/engine/dist/esm/transform/texture-transform.js","../../node_modules/@luma.gl/engine/dist/esm/transform/transform.js","../../node_modules/@luma.gl/engine/dist/esm/geometry/geometry.js","../../node_modules/@luma.gl/engine/dist/esm/animation/timeline.js","../../node_modules/@deck.gl/core/dist/esm/shaderlib/misc/geometry.js","../../node_modules/@deck.gl/core/dist/esm/lib/constants.js","../../node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.glsl.js","../../node_modules/@deck.gl/core/dist/esm/utils/memoize.js","../../node_modules/@deck.gl/core/dist/esm/shaderlib/project/viewport-uniforms.js","../../node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.js","../../node_modules/@deck.gl/core/dist/esm/shaderlib/project32/project32.js","../../node_modules/@deck.gl/core/dist/esm/shaderlib/shadow/shadow.js","../../node_modules/@deck.gl/core/dist/esm/shaderlib/picking/picking.js","../../node_modules/@deck.gl/core/dist/esm/shaderlib/index.js","../../node_modules/@deck.gl/core/dist/esm/effects/lighting/ambient-light.js","../../node_modules/@deck.gl/core/dist/esm/effects/lighting/directional-light.js","../../node_modules/@deck.gl/core/dist/esm/passes/layers-pass.js","../../node_modules/@deck.gl/core/dist/esm/passes/pass.js","../../node_modules/@deck.gl/core/dist/esm/passes/shadow-pass.js","../../node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js","../../node_modules/@deck.gl/core/dist/esm/utils/typed-array-manager.js","../../node_modules/@deck.gl/core/dist/esm/utils/math-utils.js","../../node_modules/@deck.gl/core/dist/esm/viewports/viewport.js","../../node_modules/@deck.gl/core/dist/esm/viewports/web-mercator-viewport.js","../../node_modules/@deck.gl/core/dist/esm/shaderlib/project/project-functions.js","../../node_modules/@deck.gl/core/dist/esm/lifecycle/constants.js","../../node_modules/@deck.gl/core/dist/esm/utils/flatten.js","../../node_modules/@deck.gl/core/dist/esm/lib/resource/resource.js","../../node_modules/@deck.gl/core/dist/esm/lib/resource/resource-manager.js","../../node_modules/@deck.gl/core/dist/esm/lib/layer-manager.js","../../node_modules/@deck.gl/core/dist/esm/utils/deep-equal.js","../../node_modules/@deck.gl/core/dist/esm/lib/view-manager.js","../../node_modules/@deck.gl/core/dist/esm/utils/positions.js","../../node_modules/@deck.gl/core/dist/esm/utils/assert.js","../../node_modules/@deck.gl/core/dist/esm/views/view.js","../../node_modules/@deck.gl/core/dist/esm/transitions/transition.js","../../node_modules/@deck.gl/core/dist/esm/controllers/transition-manager.js","../../node_modules/@deck.gl/core/dist/esm/transitions/linear-interpolator.js","../../node_modules/@deck.gl/core/dist/esm/transitions/transition-interpolator.js","../../node_modules/@deck.gl/core/dist/esm/controllers/controller.js","../../node_modules/@deck.gl/core/dist/esm/controllers/view-state.js","../../node_modules/@deck.gl/core/dist/esm/controllers/map-controller.js","../../node_modules/@deck.gl/core/dist/esm/views/map-view.js","../../node_modules/@deck.gl/core/dist/esm/passes/mask-pass.js","../../node_modules/@deck.gl/core/dist/esm/viewports/orthographic-viewport.js","../../node_modules/@deck.gl/core/dist/esm/controllers/orbit-controller.js","../../node_modules/@deck.gl/core/dist/esm/controllers/orthographic-controller.js","../../node_modules/@deck.gl/core/dist/esm/views/orthographic-view.js","../../node_modules/@deck.gl/core/dist/esm/effects/mask/mask-effect.js","../../node_modules/@deck.gl/core/dist/esm/effects/mask/utils.js","../../node_modules/@deck.gl/core/dist/esm/lib/effect-manager.js","../../node_modules/@deck.gl/core/dist/esm/passes/draw-layers-pass.js","../../node_modules/@deck.gl/core/dist/esm/passes/pick-layers-pass.js","../../node_modules/@deck.gl/core/dist/esm/lib/deck-renderer.js","../../node_modules/@deck.gl/core/dist/esm/lib/picking/query-object.js","../../node_modules/@deck.gl/core/dist/esm/lib/picking/pick-info.js","../../node_modules/@deck.gl/core/dist/esm/lib/deck-picker.js","../../node_modules/@deck.gl/core/dist/esm/lib/tooltip.js","../../node_modules/@deck.gl/core/dist/esm/lib/deck.js","../../node_modules/@deck.gl/core/dist/esm/lib/attribute/shader-attribute.js","../../node_modules/@deck.gl/core/dist/esm/lib/attribute/data-column.js","../../node_modules/@deck.gl/core/dist/esm/utils/iterable-utils.js","../../node_modules/@deck.gl/core/dist/esm/utils/range.js","../../node_modules/@deck.gl/core/dist/esm/utils/array-utils.js","../../node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-utils.js","../../node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute.js","../../node_modules/@deck.gl/core/dist/esm/lib/attribute/gl-utils.js","../../node_modules/@deck.gl/core/dist/esm/transitions/gpu-interpolation-transition.js","../../node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-manager.js","../../node_modules/@deck.gl/core/dist/esm/transitions/gpu-spring-transition.js","../../node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-manager.js","../../node_modules/@deck.gl/core/dist/esm/transitions/cpu-spring-transition.js","../../node_modules/@deck.gl/core/dist/esm/lib/uniform-transition-manager.js","../../node_modules/@deck.gl/core/dist/esm/transitions/cpu-interpolation-transition.js","../../node_modules/@deck.gl/core/dist/esm/lifecycle/props.js","../../node_modules/@deck.gl/core/dist/esm/utils/count.js","../../node_modules/@deck.gl/core/dist/esm/utils/shader.js","../../node_modules/@deck.gl/core/dist/esm/utils/texture.js","../../node_modules/@deck.gl/core/dist/esm/lifecycle/prop-types.js","../../node_modules/@deck.gl/core/dist/esm/lifecycle/create-props.js","../../node_modules/@deck.gl/core/dist/esm/lifecycle/component.js","../../node_modules/@deck.gl/core/dist/esm/lifecycle/component-state.js","../../node_modules/@deck.gl/core/dist/esm/lib/layer-state.js","../../node_modules/@deck.gl/core/dist/esm/lib/layer.js"],"sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import { transformMat4, scale } from 'gl-matrix/vec4';\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function transformVector(matrix, vector) {\n  const result = transformMat4([], vector, matrix);\n  scale(result, result, 1 / result[3]);\n  return result;\n}\nexport function mod(value, divisor) {\n  const modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function lerp(start, end, step) {\n  return step * end + (1 - step) * start;\n}\nexport function clamp(x, min, max) {\n  return x < min ? min : x > max ? max : x;\n}\n\nfunction ieLog2(x) {\n  return Math.log(x) * Math.LOG2E;\n}\n\nexport const log2 = Math.log2 || ieLog2;\n//# sourceMappingURL=math-utils.js.map","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {ReadonlyVec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the source vector\n * @returns {vec2} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to ceil\n * @returns {vec2} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to floor\n * @returns {vec2} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to round\n * @returns {vec2} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\n * Calculates the length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to negate\n * @returns {vec2} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to invert\n * @returns {vec2} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to normalize\n * @returns {vec2} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {ReadonlyVec2} a The vec2 point to rotate\n * @param {ReadonlyVec2} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec2} out\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\n * Get the angle between two 2D vectors\n * @param {ReadonlyVec2} a The first operand\n * @param {ReadonlyVec2} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec2 to zero\n *\n * @param {vec2} out the receiving vector\n * @returns {vec2} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\n * Alias for {@link vec2.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || '@math.gl/web-mercator: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { createMat4, transformVector, clamp, log2 } from './math-utils';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport assert from './assert';\nconst PI = Math.PI;\nconst PI_4 = PI / 4;\nconst DEGREES_TO_RADIANS = PI / 180;\nconst RADIANS_TO_DEGREES = 180 / PI;\nconst TILE_SIZE = 512;\nconst EARTH_CIRCUMFERENCE = 40.03e6;\nexport const MAX_LATITUDE = 85.051129;\nexport const DEFAULT_ALTITUDE = 1.5;\nexport function zoomToScale(zoom) {\n  return Math.pow(2, zoom);\n}\nexport function scaleToZoom(scale) {\n  return log2(scale);\n}\nexport function lngLatToWorld(lngLat) {\n  const [lng, lat] = lngLat;\n  assert(Number.isFinite(lng));\n  assert(Number.isFinite(lat) && lat >= -90 && lat <= 90, 'invalid latitude');\n  const lambda2 = lng * DEGREES_TO_RADIANS;\n  const phi2 = lat * DEGREES_TO_RADIANS;\n  const x = TILE_SIZE * (lambda2 + PI) / (2 * PI);\n  const y = TILE_SIZE * (PI + Math.log(Math.tan(PI_4 + phi2 * 0.5))) / (2 * PI);\n  return [x, y];\n}\nexport function worldToLngLat(xy) {\n  const [x, y] = xy;\n  const lambda2 = x / TILE_SIZE * (2 * PI) - PI;\n  const phi2 = 2 * (Math.atan(Math.exp(y / TILE_SIZE * (2 * PI) - PI)) - PI_4);\n  return [lambda2 * RADIANS_TO_DEGREES, phi2 * RADIANS_TO_DEGREES];\n}\nexport function getMeterZoom(options) {\n  const {\n    latitude\n  } = options;\n  assert(Number.isFinite(latitude));\n  const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  return scaleToZoom(EARTH_CIRCUMFERENCE * latCosine) - 9;\n}\nexport function unitsPerMeter(latitude) {\n  const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  return TILE_SIZE / EARTH_CIRCUMFERENCE / latCosine;\n}\nexport function getDistanceScales(options) {\n  const {\n    latitude,\n    longitude,\n    highPrecision = false\n  } = options;\n  assert(Number.isFinite(latitude) && Number.isFinite(longitude));\n  const worldSize = TILE_SIZE;\n  const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  const unitsPerDegreeX = worldSize / 360;\n  const unitsPerDegreeY = unitsPerDegreeX / latCosine;\n  const altUnitsPerMeter = worldSize / EARTH_CIRCUMFERENCE / latCosine;\n  const result = {\n    unitsPerMeter: [altUnitsPerMeter, altUnitsPerMeter, altUnitsPerMeter],\n    metersPerUnit: [1 / altUnitsPerMeter, 1 / altUnitsPerMeter, 1 / altUnitsPerMeter],\n    unitsPerDegree: [unitsPerDegreeX, unitsPerDegreeY, altUnitsPerMeter],\n    degreesPerUnit: [1 / unitsPerDegreeX, 1 / unitsPerDegreeY, 1 / altUnitsPerMeter]\n  };\n\n  if (highPrecision) {\n    const latCosine2 = DEGREES_TO_RADIANS * Math.tan(latitude * DEGREES_TO_RADIANS) / latCosine;\n    const unitsPerDegreeY2 = unitsPerDegreeX * latCosine2 / 2;\n    const altUnitsPerDegree2 = worldSize / EARTH_CIRCUMFERENCE * latCosine2;\n    const altUnitsPerMeter2 = altUnitsPerDegree2 / unitsPerDegreeY * altUnitsPerMeter;\n    result.unitsPerDegree2 = [0, unitsPerDegreeY2, altUnitsPerDegree2];\n    result.unitsPerMeter2 = [altUnitsPerMeter2, 0, altUnitsPerMeter2];\n  }\n\n  return result;\n}\nexport function addMetersToLngLat(lngLatZ, xyz) {\n  const [longitude, latitude, z0] = lngLatZ;\n  const [x, y, z] = xyz;\n  const {\n    unitsPerMeter,\n    unitsPerMeter2\n  } = getDistanceScales({\n    longitude,\n    latitude,\n    highPrecision: true\n  });\n  const worldspace = lngLatToWorld(lngLatZ);\n  worldspace[0] += x * (unitsPerMeter[0] + unitsPerMeter2[0] * y);\n  worldspace[1] += y * (unitsPerMeter[1] + unitsPerMeter2[1] * y);\n  const newLngLat = worldToLngLat(worldspace);\n  const newZ = (z0 || 0) + (z || 0);\n  return Number.isFinite(z0) || Number.isFinite(z) ? [newLngLat[0], newLngLat[1], newZ] : newLngLat;\n}\nexport function getViewMatrix(options) {\n  const {\n    height,\n    pitch,\n    bearing,\n    altitude,\n    scale,\n    center\n  } = options;\n  const vm = createMat4();\n  mat4.translate(vm, vm, [0, 0, -altitude]);\n  mat4.rotateX(vm, vm, -pitch * DEGREES_TO_RADIANS);\n  mat4.rotateZ(vm, vm, bearing * DEGREES_TO_RADIANS);\n  const relativeScale = scale / height;\n  mat4.scale(vm, vm, [relativeScale, relativeScale, relativeScale]);\n\n  if (center) {\n    mat4.translate(vm, vm, vec3.negate([], center));\n  }\n\n  return vm;\n}\nexport function getProjectionParameters(options) {\n  const {\n    width,\n    height,\n    altitude,\n    pitch = 0,\n    offset,\n    center,\n    scale,\n    nearZMultiplier = 1,\n    farZMultiplier = 1\n  } = options;\n  let {\n    fovy = altitudeToFovy(DEFAULT_ALTITUDE)\n  } = options;\n\n  if (altitude !== undefined) {\n    fovy = altitudeToFovy(altitude);\n  }\n\n  const fovRadians = fovy * DEGREES_TO_RADIANS;\n  const pitchRadians = pitch * DEGREES_TO_RADIANS;\n  const focalDistance = fovyToAltitude(fovy);\n  let cameraToSeaLevelDistance = focalDistance;\n\n  if (center) {\n    cameraToSeaLevelDistance += center[2] * scale / Math.cos(pitchRadians) / height;\n  }\n\n  const fovAboveCenter = fovRadians * (0.5 + (offset ? offset[1] : 0) / height);\n  const topHalfSurfaceDistance = Math.sin(fovAboveCenter) * cameraToSeaLevelDistance / Math.sin(clamp(Math.PI / 2 - pitchRadians - fovAboveCenter, 0.01, Math.PI - 0.01));\n  const furthestDistance = Math.sin(pitchRadians) * topHalfSurfaceDistance + cameraToSeaLevelDistance;\n  const horizonDistance = cameraToSeaLevelDistance * 10;\n  const farZ = Math.min(furthestDistance * farZMultiplier, horizonDistance);\n  return {\n    fov: fovRadians,\n    aspect: width / height,\n    focalDistance,\n    near: nearZMultiplier,\n    far: farZ\n  };\n}\nexport function getProjectionMatrix(options) {\n  const {\n    fov,\n    aspect,\n    near,\n    far\n  } = getProjectionParameters(options);\n  const projectionMatrix = mat4.perspective([], fov, aspect, near, far);\n  return projectionMatrix;\n}\nexport function altitudeToFovy(altitude) {\n  return 2 * Math.atan(0.5 / altitude) * RADIANS_TO_DEGREES;\n}\nexport function fovyToAltitude(fovy) {\n  return 0.5 / Math.tan(0.5 * fovy * DEGREES_TO_RADIANS);\n}\nexport function worldToPixels(xyz, pixelProjectionMatrix) {\n  const [x, y, z = 0] = xyz;\n  assert(Number.isFinite(x) && Number.isFinite(y) && Number.isFinite(z));\n  return transformVector(pixelProjectionMatrix, [x, y, z, 1]);\n}\nexport function pixelsToWorld(xyz, pixelUnprojectionMatrix, targetZ = 0) {\n  const [x, y, z] = xyz;\n  assert(Number.isFinite(x) && Number.isFinite(y), 'invalid pixel coordinate');\n\n  if (Number.isFinite(z)) {\n    const coord = transformVector(pixelUnprojectionMatrix, [x, y, z, 1]);\n    return coord;\n  }\n\n  const coord0 = transformVector(pixelUnprojectionMatrix, [x, y, 0, 1]);\n  const coord1 = transformVector(pixelUnprojectionMatrix, [x, y, 1, 1]);\n  const z0 = coord0[2];\n  const z1 = coord1[2];\n  const t = z0 === z1 ? 0 : ((targetZ || 0) - z0) / (z1 - z0);\n  return vec2.lerp([], coord0, coord1, t);\n}\n//# sourceMappingURL=web-mercator-utils.js.map","import assert from './assert';\nimport { log2, clamp } from './math-utils';\nimport { MAX_LATITUDE, lngLatToWorld, worldToLngLat } from './web-mercator-utils';\nexport default function fitBounds(options) {\n  const {\n    width,\n    height,\n    bounds,\n    minExtent = 0,\n    maxZoom = 24,\n    offset = [0, 0]\n  } = options;\n  const [[west, south], [east, north]] = bounds;\n  const padding = getPaddingObject(options.padding);\n  const nw = lngLatToWorld([west, clamp(north, -MAX_LATITUDE, MAX_LATITUDE)]);\n  const se = lngLatToWorld([east, clamp(south, -MAX_LATITUDE, MAX_LATITUDE)]);\n  const size = [Math.max(Math.abs(se[0] - nw[0]), minExtent), Math.max(Math.abs(se[1] - nw[1]), minExtent)];\n  const targetSize = [width - padding.left - padding.right - Math.abs(offset[0]) * 2, height - padding.top - padding.bottom - Math.abs(offset[1]) * 2];\n  assert(targetSize[0] > 0 && targetSize[1] > 0);\n  const scaleX = targetSize[0] / size[0];\n  const scaleY = targetSize[1] / size[1];\n  const offsetX = (padding.right - padding.left) / 2 / scaleX;\n  const offsetY = (padding.top - padding.bottom) / 2 / scaleY;\n  const center = [(se[0] + nw[0]) / 2 + offsetX, (se[1] + nw[1]) / 2 + offsetY];\n  const centerLngLat = worldToLngLat(center);\n  const zoom = Math.min(maxZoom, log2(Math.abs(Math.min(scaleX, scaleY))));\n  assert(Number.isFinite(zoom));\n  return {\n    longitude: centerLngLat[0],\n    latitude: centerLngLat[1],\n    zoom\n  };\n}\n\nfunction getPaddingObject(padding = 0) {\n  if (typeof padding === 'number') {\n    return {\n      top: padding,\n      bottom: padding,\n      left: padding,\n      right: padding\n    };\n  }\n\n  assert(Number.isFinite(padding.top) && Number.isFinite(padding.bottom) && Number.isFinite(padding.left) && Number.isFinite(padding.right));\n  return padding;\n}\n//# sourceMappingURL=fit-bounds.js.map","import { worldToLngLat } from './web-mercator-utils';\nimport * as vec2 from 'gl-matrix/vec2';\nimport { transformVector } from './math-utils';\nconst DEGREES_TO_RADIANS = Math.PI / 180;\nexport default function getBounds(viewport, z = 0) {\n  const {\n    width,\n    height,\n    unproject\n  } = viewport;\n  const unprojectOps = {\n    targetZ: z\n  };\n  const bottomLeft = unproject([0, height], unprojectOps);\n  const bottomRight = unproject([width, height], unprojectOps);\n  let topLeft;\n  let topRight;\n  const halfFov = viewport.fovy ? 0.5 * viewport.fovy * DEGREES_TO_RADIANS : Math.atan(0.5 / viewport.altitude);\n  const angleToGround = (90 - viewport.pitch) * DEGREES_TO_RADIANS;\n\n  if (halfFov > angleToGround - 0.01) {\n    topLeft = unprojectOnFarPlane(viewport, 0, z);\n    topRight = unprojectOnFarPlane(viewport, width, z);\n  } else {\n    topLeft = unproject([0, 0], unprojectOps);\n    topRight = unproject([width, 0], unprojectOps);\n  }\n\n  return [bottomLeft, bottomRight, topRight, topLeft];\n}\n\nfunction unprojectOnFarPlane(viewport, x, targetZ) {\n  const {\n    pixelUnprojectionMatrix\n  } = viewport;\n  const coord0 = transformVector(pixelUnprojectionMatrix, [x, 0, 1, 1]);\n  const coord1 = transformVector(pixelUnprojectionMatrix, [x, viewport.height, 1, 1]);\n  const z = targetZ * viewport.distanceScales.unitsPerMeter[2];\n  const t = (z - coord0[2]) / (coord1[2] - coord0[2]);\n  const coord = vec2.lerp([], coord0, coord1, t);\n  const result = worldToLngLat(coord);\n  result.push(targetZ);\n  return result;\n}\n//# sourceMappingURL=get-bounds.js.map","import { worldToLngLat } from './web-mercator-utils';\nimport { mod, log2 } from './math-utils';\nconst TILE_SIZE = 512;\nexport default function normalizeViewportProps(props) {\n  const {\n    width,\n    height,\n    pitch = 0\n  } = props;\n  let {\n    longitude,\n    latitude,\n    zoom,\n    bearing = 0\n  } = props;\n\n  if (longitude < -180 || longitude > 180) {\n    longitude = mod(longitude + 180, 360) - 180;\n  }\n\n  if (bearing < -180 || bearing > 180) {\n    bearing = mod(bearing + 180, 360) - 180;\n  }\n\n  const minZoom = log2(height / TILE_SIZE);\n\n  if (zoom <= minZoom) {\n    zoom = minZoom;\n    latitude = 0;\n  } else {\n    const halfHeightPixels = height / 2 / Math.pow(2, zoom);\n    const minLatitude = worldToLngLat([0, halfHeightPixels])[1];\n\n    if (latitude < minLatitude) {\n      latitude = minLatitude;\n    } else {\n      const maxLatitude = worldToLngLat([0, TILE_SIZE - halfHeightPixels])[1];\n\n      if (latitude > maxLatitude) {\n        latitude = maxLatitude;\n      }\n    }\n  }\n\n  return {\n    width,\n    height,\n    longitude,\n    latitude,\n    zoom,\n    pitch,\n    bearing\n  };\n}\n//# sourceMappingURL=normalize-viewport-props.js.map","/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n","/**\n * This file contains overrides the default\n * hammer.js functions to add our own utility\n */\n/* eslint-disable */\n/* Hammer.js constants */\nconst INPUT_START = 1;\nconst INPUT_MOVE = 2;\nconst INPUT_END = 4;\nconst MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n/**\n * Helper function that returns true if any element in an array meets given criteria.\n * Because older browsers do not support `Array.prototype.some`\n * @params array {Array}\n * @params predict {Function}\n */\nfunction some(array, predict) {\n    for (let i = 0; i < array.length; i++) {\n        if (predict(array[i])) {\n            return true;\n        }\n    }\n    return false;\n}\n/* eslint-disable no-invalid-this */\nexport function enhancePointerEventInput(PointerEventInput) {\n    const oldHandler = PointerEventInput.prototype.handler;\n    // overrides PointerEventInput.handler to accept right mouse button\n    PointerEventInput.prototype.handler = function handler(ev) {\n        const store = this.store;\n        // Allow non-left mouse buttons through\n        if (ev.button > 0 && ev.type === 'pointerdown') {\n            if (!some(store, e => e.pointerId === ev.pointerId)) {\n                store.push(ev);\n            }\n        }\n        oldHandler.call(this, ev);\n    };\n}\n// overrides MouseInput.handler to accept right mouse button\nexport function enhanceMouseInput(MouseInput) {\n    MouseInput.prototype.handler = function handler(ev) {\n        let eventType = MOUSE_INPUT_MAP[ev.type];\n        // on start we want to have the mouse button down\n        if (eventType & INPUT_START && ev.button >= 0) {\n            this.pressed = true;\n        }\n        if (eventType & INPUT_MOVE && ev.which === 0) {\n            eventType = INPUT_END;\n        }\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: 'mouse',\n            srcEvent: ev\n        });\n    };\n}\n//# sourceMappingURL=hammer-overrides.js.map","import * as hammerjs from 'hammerjs';\nimport { enhancePointerEventInput, enhanceMouseInput } from './hammer-overrides';\nenhancePointerEventInput(hammerjs.PointerEventInput);\nenhanceMouseInput(hammerjs.MouseInput);\nexport const Manager = hammerjs.Manager;\nexport default hammerjs;\n//# sourceMappingURL=hammer.browser.js.map","export default class Input {\n    constructor(element, callback, options) {\n        this.element = element;\n        this.callback = callback;\n        this.options = { enable: true, ...options };\n    }\n}\n//# sourceMappingURL=input.js.map","import Hammer from './utils/hammer';\n// This module contains constants that must be conditionally required\n// due to `window`/`document` references downstream.\nexport const RECOGNIZERS = Hammer\n    ? [\n        [Hammer.Pan, { event: 'tripan', pointers: 3, threshold: 0, enable: false }],\n        [Hammer.Rotate, { enable: false }],\n        [Hammer.Pinch, { enable: false }],\n        [Hammer.Swipe, { enable: false }],\n        [Hammer.Pan, { threshold: 0, enable: false }],\n        [Hammer.Press, { enable: false }],\n        [Hammer.Tap, { event: 'doubletap', taps: 2, enable: false }],\n        // TODO - rename to 'tap' and 'singletap' in the next major release\n        [Hammer.Tap, { event: 'anytap', enable: false }],\n        [Hammer.Tap, { enable: false }]\n    ]\n    : null;\n// Recognize the following gestures even if a given recognizer succeeds\nexport const RECOGNIZER_COMPATIBLE_MAP = {\n    tripan: ['rotate', 'pinch', 'pan'],\n    rotate: ['pinch'],\n    pinch: ['pan'],\n    pan: ['press', 'doubletap', 'anytap', 'tap'],\n    doubletap: ['anytap'],\n    anytap: ['tap']\n};\n// Recognize the folling gestures only if a given recognizer fails\nexport const RECOGNIZER_FALLBACK_MAP = {\n    doubletap: ['tap']\n};\n/**\n * Only one set of basic input events will be fired by Hammer.js:\n * either pointer, touch, or mouse, depending on system support.\n * In order to enable an application to be agnostic of system support,\n * alias basic input events into \"classes\" of events: down, move, and up.\n * See `_onBasicInput()` for usage of these aliases.\n */\nexport const BASIC_EVENT_ALIASES = {\n    pointerdown: 'pointerdown',\n    pointermove: 'pointermove',\n    pointerup: 'pointerup',\n    touchstart: 'pointerdown',\n    touchmove: 'pointermove',\n    touchend: 'pointerup',\n    mousedown: 'pointerdown',\n    mousemove: 'pointermove',\n    mouseup: 'pointerup'\n};\nexport const INPUT_EVENT_TYPES = {\n    KEY_EVENTS: ['keydown', 'keyup'],\n    MOUSE_EVENTS: ['mousedown', 'mousemove', 'mouseup', 'mouseover', 'mouseout', 'mouseleave'],\n    WHEEL_EVENTS: [\n        // Chrome, Safari\n        'wheel',\n        // IE\n        'mousewheel'\n    ]\n};\n/**\n * \"Gestural\" events are those that have semantic meaning beyond the basic input event,\n * e.g. a click or tap is a sequence of `down` and `up` events with no `move` event in between.\n * Hammer.js handles these with its Recognizer system;\n * this block maps event names to the Recognizers required to detect the events.\n */\nexport const EVENT_RECOGNIZER_MAP = {\n    tap: 'tap',\n    anytap: 'anytap',\n    doubletap: 'doubletap',\n    press: 'press',\n    pinch: 'pinch',\n    pinchin: 'pinch',\n    pinchout: 'pinch',\n    pinchstart: 'pinch',\n    pinchmove: 'pinch',\n    pinchend: 'pinch',\n    pinchcancel: 'pinch',\n    rotate: 'rotate',\n    rotatestart: 'rotate',\n    rotatemove: 'rotate',\n    rotateend: 'rotate',\n    rotatecancel: 'rotate',\n    tripan: 'tripan',\n    tripanstart: 'tripan',\n    tripanmove: 'tripan',\n    tripanup: 'tripan',\n    tripandown: 'tripan',\n    tripanleft: 'tripan',\n    tripanright: 'tripan',\n    tripanend: 'tripan',\n    tripancancel: 'tripan',\n    pan: 'pan',\n    panstart: 'pan',\n    panmove: 'pan',\n    panup: 'pan',\n    pandown: 'pan',\n    panleft: 'pan',\n    panright: 'pan',\n    panend: 'pan',\n    pancancel: 'pan',\n    swipe: 'swipe',\n    swipeleft: 'swipe',\n    swiperight: 'swipe',\n    swipeup: 'swipe',\n    swipedown: 'swipe'\n};\n/**\n * Map gestural events typically provided by browsers\n * that are not reported in 'hammer.input' events\n * to corresponding Hammer.js gestures.\n */\nexport const GESTURE_EVENT_ALIASES = {\n    click: 'tap',\n    anyclick: 'anytap',\n    dblclick: 'doubletap',\n    mousedown: 'pointerdown',\n    mousemove: 'pointermove',\n    mouseup: 'pointerup',\n    mouseover: 'pointerover',\n    mouseout: 'pointerout',\n    mouseleave: 'pointerleave'\n};\n//# sourceMappingURL=constants.js.map","// Purpose: include this in your module to avoids adding dependencies on\n// micro modules like 'global'\n/* global window, global, document, navigator */\nexport const userAgent = typeof navigator !== 'undefined' && navigator.userAgent ? navigator.userAgent.toLowerCase() : '';\nconst window_ = typeof window !== 'undefined' ? window : global;\nconst global_ = typeof global !== 'undefined' ? global : window;\nconst document_ = typeof document !== 'undefined' ? document : {};\nexport { window_ as window, global_ as global, document_ as document };\n/*\n * Detect whether passive option is supported by the current browser.\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n   #Safely_detecting_option_support\n */\nlet passiveSupported = false;\n/* eslint-disable accessor-pairs, no-empty */\ntry {\n    const options = {\n        // This function will be called when the browser\n        // attempts to access the passive property.\n        get passive() {\n            passiveSupported = true;\n            return true;\n        }\n    };\n    window_.addEventListener('test', null, options);\n    window_.removeEventListener('test', null);\n}\ncatch (err) {\n    passiveSupported = false;\n}\nexport { passiveSupported };\n//# sourceMappingURL=globals.js.map","import Input from './input';\nimport { INPUT_EVENT_TYPES } from '../constants';\nimport { window, userAgent, passiveSupported } from '../utils/globals';\nconst firefox = userAgent.indexOf('firefox') !== -1;\nconst { WHEEL_EVENTS } = INPUT_EVENT_TYPES;\nconst EVENT_TYPE = 'wheel';\n// Constants for normalizing input delta\nconst WHEEL_DELTA_MAGIC_SCALER = 4.000244140625;\nconst WHEEL_DELTA_PER_LINE = 40;\n// Slow down zoom if shift key is held for more precise zooming\nconst SHIFT_MULTIPLIER = 0.25;\nexport default class WheelInput extends Input {\n    constructor(element, callback, options) {\n        super(element, callback, options);\n        /* eslint-disable complexity, max-statements */\n        this.handleEvent = (event) => {\n            if (!this.options.enable) {\n                return;\n            }\n            let value = event.deltaY;\n            if (window.WheelEvent) {\n                // Firefox doubles the values on retina screens...\n                if (firefox && event.deltaMode === window.WheelEvent.DOM_DELTA_PIXEL) {\n                    value /= window.devicePixelRatio;\n                }\n                if (event.deltaMode === window.WheelEvent.DOM_DELTA_LINE) {\n                    value *= WHEEL_DELTA_PER_LINE;\n                }\n            }\n            if (value !== 0 && value % WHEEL_DELTA_MAGIC_SCALER === 0) {\n                // This one is definitely a mouse wheel event.\n                // Normalize this value to match trackpad.\n                value = Math.floor(value / WHEEL_DELTA_MAGIC_SCALER);\n            }\n            if (event.shiftKey && value) {\n                value = value * SHIFT_MULTIPLIER;\n            }\n            this.callback({\n                type: EVENT_TYPE,\n                center: {\n                    x: event.clientX,\n                    y: event.clientY\n                },\n                delta: -value,\n                srcEvent: event,\n                pointerType: 'mouse',\n                target: event.target\n            });\n        };\n        this.events = (this.options.events || []).concat(WHEEL_EVENTS);\n        this.events.forEach(event => element.addEventListener(event, this.handleEvent, passiveSupported ? { passive: false } : false));\n    }\n    destroy() {\n        this.events.forEach(event => this.element.removeEventListener(event, this.handleEvent));\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n    enableEventType(eventType, enabled) {\n        if (eventType === EVENT_TYPE) {\n            this.options.enable = enabled;\n        }\n    }\n}\n//# sourceMappingURL=wheel-input.js.map","import Input from './input';\nimport { INPUT_EVENT_TYPES } from '../constants';\nconst { MOUSE_EVENTS } = INPUT_EVENT_TYPES;\nconst MOVE_EVENT_TYPE = 'pointermove';\nconst OVER_EVENT_TYPE = 'pointerover';\nconst OUT_EVENT_TYPE = 'pointerout';\nconst ENTER_EVENT_TYPE = 'pointerenter';\nconst LEAVE_EVENT_TYPE = 'pointerleave';\n/**\n * Hammer.js swallows 'move' events (for pointer/touch/mouse)\n * when the pointer is not down. This class sets up a handler\n * specifically for these events to work around this limitation.\n * Note that this could be extended to more intelligently handle\n * move events across input types, e.g. storing multiple simultaneous\n * pointer/touch events, calculating speed/direction, etc.\n */\nexport default class MoveInput extends Input {\n    constructor(element, callback, options) {\n        super(element, callback, options);\n        this.handleEvent = (event) => {\n            this.handleOverEvent(event);\n            this.handleOutEvent(event);\n            this.handleEnterEvent(event);\n            this.handleLeaveEvent(event);\n            this.handleMoveEvent(event);\n        };\n        this.pressed = false;\n        const { enable } = this.options;\n        this.enableMoveEvent = enable;\n        this.enableLeaveEvent = enable;\n        this.enableEnterEvent = enable;\n        this.enableOutEvent = enable;\n        this.enableOverEvent = enable;\n        this.events = (this.options.events || []).concat(MOUSE_EVENTS);\n        this.events.forEach(event => element.addEventListener(event, this.handleEvent));\n    }\n    destroy() {\n        this.events.forEach(event => this.element.removeEventListener(event, this.handleEvent));\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n    enableEventType(eventType, enabled) {\n        if (eventType === MOVE_EVENT_TYPE) {\n            this.enableMoveEvent = enabled;\n        }\n        if (eventType === OVER_EVENT_TYPE) {\n            this.enableOverEvent = enabled;\n        }\n        if (eventType === OUT_EVENT_TYPE) {\n            this.enableOutEvent = enabled;\n        }\n        if (eventType === ENTER_EVENT_TYPE) {\n            this.enableEnterEvent = enabled;\n        }\n        if (eventType === LEAVE_EVENT_TYPE) {\n            this.enableLeaveEvent = enabled;\n        }\n    }\n    handleOverEvent(event) {\n        if (this.enableOverEvent) {\n            if (event.type === 'mouseover') {\n                this._emit(OVER_EVENT_TYPE, event);\n            }\n        }\n    }\n    handleOutEvent(event) {\n        if (this.enableOutEvent) {\n            if (event.type === 'mouseout') {\n                this._emit(OUT_EVENT_TYPE, event);\n            }\n        }\n    }\n    handleEnterEvent(event) {\n        if (this.enableEnterEvent) {\n            if (event.type === 'mouseenter') {\n                this._emit(ENTER_EVENT_TYPE, event);\n            }\n        }\n    }\n    handleLeaveEvent(event) {\n        if (this.enableLeaveEvent) {\n            if (event.type === 'mouseleave') {\n                this._emit(LEAVE_EVENT_TYPE, event);\n            }\n        }\n    }\n    handleMoveEvent(event) {\n        if (this.enableMoveEvent) {\n            switch (event.type) {\n                case 'mousedown':\n                    if (event.button >= 0) {\n                        // Button is down\n                        this.pressed = true;\n                    }\n                    break;\n                case 'mousemove':\n                    // Move events use `which` to track the button being pressed\n                    if (event.which === 0) {\n                        // Button is not down\n                        this.pressed = false;\n                    }\n                    if (!this.pressed) {\n                        // Drag events are emitted by hammer already\n                        // we just need to emit the move event on hover\n                        this._emit(MOVE_EVENT_TYPE, event);\n                    }\n                    break;\n                case 'mouseup':\n                    this.pressed = false;\n                    break;\n                default:\n            }\n        }\n    }\n    _emit(type, event) {\n        this.callback({\n            type,\n            center: {\n                x: event.clientX,\n                y: event.clientY\n            },\n            srcEvent: event,\n            pointerType: 'mouse',\n            target: event.target\n        });\n    }\n}\n//# sourceMappingURL=move-input.js.map","import Input from './input';\nimport { INPUT_EVENT_TYPES } from '../constants';\nconst { KEY_EVENTS } = INPUT_EVENT_TYPES;\nconst DOWN_EVENT_TYPE = 'keydown';\nconst UP_EVENT_TYPE = 'keyup';\nexport default class KeyInput extends Input {\n    constructor(element, callback, options) {\n        super(element, callback, options);\n        this.handleEvent = (event) => {\n            // Ignore if focused on text input\n            const targetElement = (event.target || event.srcElement);\n            if ((targetElement.tagName === 'INPUT' && targetElement.type === 'text') ||\n                targetElement.tagName === 'TEXTAREA') {\n                return;\n            }\n            if (this.enableDownEvent && event.type === 'keydown') {\n                this.callback({\n                    type: DOWN_EVENT_TYPE,\n                    srcEvent: event,\n                    key: event.key,\n                    target: event.target\n                });\n            }\n            if (this.enableUpEvent && event.type === 'keyup') {\n                this.callback({\n                    type: UP_EVENT_TYPE,\n                    srcEvent: event,\n                    key: event.key,\n                    target: event.target\n                });\n            }\n        };\n        this.enableDownEvent = this.options.enable;\n        this.enableUpEvent = this.options.enable;\n        this.events = (this.options.events || []).concat(KEY_EVENTS);\n        element.tabIndex = this.options.tabIndex || 0;\n        element.style.outline = 'none';\n        this.events.forEach(event => element.addEventListener(event, this.handleEvent));\n    }\n    destroy() {\n        this.events.forEach(event => this.element.removeEventListener(event, this.handleEvent));\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n    enableEventType(eventType, enabled) {\n        if (eventType === DOWN_EVENT_TYPE) {\n            this.enableDownEvent = enabled;\n        }\n        if (eventType === UP_EVENT_TYPE) {\n            this.enableUpEvent = enabled;\n        }\n    }\n}\n//# sourceMappingURL=key-input.js.map","import Input from './input';\nconst EVENT_TYPE = 'contextmenu';\nexport default class ContextmenuInput extends Input {\n    constructor(element, callback, options) {\n        super(element, callback, options);\n        this.handleEvent = (event) => {\n            if (!this.options.enable) {\n                return;\n            }\n            this.callback({\n                type: EVENT_TYPE,\n                center: {\n                    x: event.clientX,\n                    y: event.clientY\n                },\n                srcEvent: event,\n                pointerType: 'mouse',\n                target: event.target\n            });\n        };\n        element.addEventListener('contextmenu', this.handleEvent);\n    }\n    destroy() {\n        this.element.removeEventListener('contextmenu', this.handleEvent);\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n    enableEventType(eventType, enabled) {\n        if (eventType === EVENT_TYPE) {\n            this.options.enable = enabled;\n        }\n    }\n}\n//# sourceMappingURL=contextmenu-input.js.map","/* Constants */\nconst DOWN_EVENT = 1;\nconst MOVE_EVENT = 2;\nconst UP_EVENT = 4;\nconst MOUSE_EVENTS = {\n    pointerdown: DOWN_EVENT,\n    pointermove: MOVE_EVENT,\n    pointerup: UP_EVENT,\n    mousedown: DOWN_EVENT,\n    mousemove: MOVE_EVENT,\n    mouseup: UP_EVENT\n};\n// MouseEvent.which https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/which\nconst MOUSE_EVENT_WHICH_LEFT = 1;\nconst MOUSE_EVENT_WHICH_MIDDLE = 2;\nconst MOUSE_EVENT_WHICH_RIGHT = 3;\n// MouseEvent.button https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\nconst MOUSE_EVENT_BUTTON_LEFT = 0;\nconst MOUSE_EVENT_BUTTON_MIDDLE = 1;\nconst MOUSE_EVENT_BUTTON_RIGHT = 2;\n// MouseEvent.buttons https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons\nconst MOUSE_EVENT_BUTTONS_LEFT_MASK = 1;\nconst MOUSE_EVENT_BUTTONS_RIGHT_MASK = 2;\nconst MOUSE_EVENT_BUTTONS_MIDDLE_MASK = 4;\n/**\n * Extract the involved mouse button\n */\nexport function whichButtons(event) {\n    const eventType = MOUSE_EVENTS[event.srcEvent.type];\n    if (!eventType) {\n        // Not a mouse evet\n        return null;\n    }\n    const { buttons, button, which } = event.srcEvent;\n    let leftButton = false;\n    let middleButton = false;\n    let rightButton = false;\n    if (\n    // button is up, need to find out which one was pressed before\n    eventType === UP_EVENT ||\n        // moving but does not support `buttons` API\n        (eventType === MOVE_EVENT && !Number.isFinite(buttons))) {\n        leftButton = which === MOUSE_EVENT_WHICH_LEFT;\n        middleButton = which === MOUSE_EVENT_WHICH_MIDDLE;\n        rightButton = which === MOUSE_EVENT_WHICH_RIGHT;\n    }\n    else if (eventType === MOVE_EVENT) {\n        leftButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_LEFT_MASK);\n        middleButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_MIDDLE_MASK);\n        rightButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_RIGHT_MASK);\n    }\n    else if (eventType === DOWN_EVENT) {\n        leftButton = button === MOUSE_EVENT_BUTTON_LEFT;\n        middleButton = button === MOUSE_EVENT_BUTTON_MIDDLE;\n        rightButton = button === MOUSE_EVENT_BUTTON_RIGHT;\n    }\n    return { leftButton, middleButton, rightButton };\n}\n/**\n * Calculate event position relative to the root element\n */\nexport function getOffsetPosition(event, rootElement) {\n    const center = event.center;\n    // `center` is a hammer.js event property\n    if (!center) {\n        // Not a gestural event\n        return null;\n    }\n    const rect = rootElement.getBoundingClientRect();\n    // Fix scale for map affected by a CSS transform.\n    // See https://stackoverflow.com/a/26893663/3528533\n    const scaleX = rect.width / rootElement.offsetWidth || 1;\n    const scaleY = rect.height / rootElement.offsetHeight || 1;\n    // Calculate center relative to the root element\n    const offsetCenter = {\n        x: (center.x - rect.left - rootElement.clientLeft) / scaleX,\n        y: (center.y - rect.top - rootElement.clientTop) / scaleY\n    };\n    return { center, offsetCenter };\n}\n//# sourceMappingURL=event-utils.js.map","import { whichButtons, getOffsetPosition } from './event-utils';\nconst DEFAULT_OPTIONS = {\n    srcElement: 'root',\n    priority: 0\n};\nexport default class EventRegistrar {\n    constructor(eventManager) {\n        /**\n         * Handles hammerjs event\n         */\n        this.handleEvent = (event) => {\n            if (this.isEmpty()) {\n                return;\n            }\n            const mjolnirEvent = this._normalizeEvent(event);\n            let target = event.srcEvent.target;\n            while (target && target !== mjolnirEvent.rootElement) {\n                this._emit(mjolnirEvent, target);\n                if (mjolnirEvent.handled) {\n                    return;\n                }\n                target = target.parentNode;\n            }\n            this._emit(mjolnirEvent, 'root');\n        };\n        this.eventManager = eventManager;\n        this.handlers = [];\n        // Element -> handler map\n        this.handlersByElement = new Map();\n        this._active = false;\n    }\n    // Returns true if there are no non-passive handlers\n    isEmpty() {\n        return !this._active;\n    }\n    add(type, handler, options, once = false, passive = false) {\n        const { handlers, handlersByElement } = this;\n        let opts = DEFAULT_OPTIONS;\n        if (typeof options === 'string' || (options && options.addEventListener)) {\n            // is DOM element, backward compatibility\n            // @ts-ignore\n            opts = { ...DEFAULT_OPTIONS, srcElement: options };\n        }\n        else if (options) {\n            opts = { ...DEFAULT_OPTIONS, ...options };\n        }\n        let entries = handlersByElement.get(opts.srcElement);\n        if (!entries) {\n            entries = [];\n            handlersByElement.set(opts.srcElement, entries);\n        }\n        const entry = {\n            type,\n            handler,\n            srcElement: opts.srcElement,\n            priority: opts.priority\n        };\n        if (once) {\n            entry.once = true;\n        }\n        if (passive) {\n            entry.passive = true;\n        }\n        handlers.push(entry);\n        this._active = this._active || !entry.passive;\n        // Sort handlers by descending priority\n        // Handlers with the same priority are excuted in the order of registration\n        let insertPosition = entries.length - 1;\n        while (insertPosition >= 0) {\n            if (entries[insertPosition].priority >= entry.priority) {\n                break;\n            }\n            insertPosition--;\n        }\n        entries.splice(insertPosition + 1, 0, entry);\n    }\n    remove(type, handler) {\n        const { handlers, handlersByElement } = this;\n        for (let i = handlers.length - 1; i >= 0; i--) {\n            const entry = handlers[i];\n            if (entry.type === type && entry.handler === handler) {\n                handlers.splice(i, 1);\n                const entries = handlersByElement.get(entry.srcElement);\n                entries.splice(entries.indexOf(entry), 1);\n                if (entries.length === 0) {\n                    handlersByElement.delete(entry.srcElement);\n                }\n            }\n        }\n        this._active = handlers.some(entry => !entry.passive);\n    }\n    /**\n     * Invoke handlers on a particular element\n     */\n    _emit(event, srcElement) {\n        const entries = this.handlersByElement.get(srcElement);\n        if (entries) {\n            let immediatePropagationStopped = false;\n            // Prevents the current event from bubbling up\n            const stopPropagation = () => {\n                event.handled = true;\n            };\n            // Prevent any remaining listeners from being called\n            const stopImmediatePropagation = () => {\n                event.handled = true;\n                immediatePropagationStopped = true;\n            };\n            const entriesToRemove = [];\n            for (let i = 0; i < entries.length; i++) {\n                const { type, handler, once } = entries[i];\n                handler({\n                    ...event,\n                    // @ts-ignore\n                    type,\n                    stopPropagation,\n                    stopImmediatePropagation\n                });\n                if (once) {\n                    entriesToRemove.push(entries[i]);\n                }\n                if (immediatePropagationStopped) {\n                    break;\n                }\n            }\n            for (let i = 0; i < entriesToRemove.length; i++) {\n                const { type, handler } = entriesToRemove[i];\n                this.remove(type, handler);\n            }\n        }\n    }\n    /**\n     * Normalizes hammerjs and custom events to have predictable fields.\n     */\n    _normalizeEvent(event) {\n        const rootElement = this.eventManager.getElement();\n        return {\n            ...event,\n            ...whichButtons(event),\n            ...getOffsetPosition(event, rootElement),\n            preventDefault: () => {\n                event.srcEvent.preventDefault();\n            },\n            stopImmediatePropagation: null,\n            stopPropagation: null,\n            handled: false,\n            rootElement\n        };\n    }\n}\n//# sourceMappingURL=event-registrar.js.map","import { Manager } from './utils/hammer';\nimport WheelInput from './inputs/wheel-input';\nimport MoveInput from './inputs/move-input';\nimport KeyInput from './inputs/key-input';\nimport ContextmenuInput from './inputs/contextmenu-input';\nimport EventRegistrar from './utils/event-registrar';\nimport { BASIC_EVENT_ALIASES, EVENT_RECOGNIZER_MAP, GESTURE_EVENT_ALIASES, RECOGNIZERS, RECOGNIZER_COMPATIBLE_MAP, RECOGNIZER_FALLBACK_MAP } from './constants';\nconst DEFAULT_OPTIONS = {\n    // event handlers\n    events: null,\n    // custom recognizers\n    recognizers: null,\n    recognizerOptions: {},\n    // Manager class\n    Manager,\n    // allow browser default touch action\n    // https://github.com/uber/react-map-gl/issues/506\n    touchAction: 'none',\n    tabIndex: 0\n};\n// Unified API for subscribing to events about both\n// basic input events (e.g. 'mousemove', 'touchstart', 'wheel')\n// and gestural input (e.g. 'click', 'tap', 'panstart').\n// Delegates gesture related event registration and handling to Hammer.js.\nexport default class EventManager {\n    constructor(element = null, options) {\n        /**\n         * Handle basic events using the 'hammer.input' Hammer.js API:\n         * Before running Recognizers, Hammer emits a 'hammer.input' event\n         * with the basic event info. This function emits all basic events\n         * aliased to the \"class\" of event received.\n         * See constants.BASIC_EVENT_CLASSES basic event class definitions.\n         */\n        this._onBasicInput = (event) => {\n            const { srcEvent } = event;\n            const alias = BASIC_EVENT_ALIASES[srcEvent.type];\n            if (alias) {\n                // fire all events aliased to srcEvent.type\n                this.manager.emit(alias, event);\n            }\n        };\n        /**\n         * Handle events not supported by Hammer.js,\n         * and pipe back out through same (Hammer) channel used by other events.\n         */\n        this._onOtherEvent = (event) => {\n            // console.log('onotherevent', event.type, event)\n            this.manager.emit(event.type, event);\n        };\n        this.options = { ...DEFAULT_OPTIONS, ...options };\n        this.events = new Map();\n        this.setElement(element);\n        // Register all passed events.\n        const { events } = this.options;\n        if (events) {\n            this.on(events);\n        }\n    }\n    getElement() {\n        return this.element;\n    }\n    setElement(element) {\n        if (this.element) {\n            // unregister all events\n            this.destroy();\n        }\n        this.element = element;\n        if (!element) {\n            return;\n        }\n        const { options } = this;\n        const ManagerClass = options.Manager;\n        this.manager = new ManagerClass(element, {\n            touchAction: options.touchAction,\n            recognizers: options.recognizers || RECOGNIZERS\n        }).on('hammer.input', this._onBasicInput);\n        if (!options.recognizers) {\n            // Set default recognize withs\n            // http://hammerjs.github.io/recognize-with/\n            Object.keys(RECOGNIZER_COMPATIBLE_MAP).forEach(name => {\n                const recognizer = this.manager.get(name);\n                if (recognizer) {\n                    RECOGNIZER_COMPATIBLE_MAP[name].forEach(otherName => {\n                        recognizer.recognizeWith(otherName);\n                    });\n                }\n            });\n        }\n        // Set recognizer options\n        for (const recognizerName in options.recognizerOptions) {\n            const recognizer = this.manager.get(recognizerName);\n            if (recognizer) {\n                const recognizerOption = options.recognizerOptions[recognizerName];\n                // `enable` is managed by the event registrations\n                delete recognizerOption.enable;\n                recognizer.set(recognizerOption);\n            }\n        }\n        // Handle events not handled by Hammer.js:\n        // - mouse wheel\n        // - pointer/touch/mouse move\n        this.wheelInput = new WheelInput(element, this._onOtherEvent, {\n            enable: false\n        });\n        this.moveInput = new MoveInput(element, this._onOtherEvent, {\n            enable: false\n        });\n        this.keyInput = new KeyInput(element, this._onOtherEvent, {\n            enable: false,\n            tabIndex: options.tabIndex\n        });\n        this.contextmenuInput = new ContextmenuInput(element, this._onOtherEvent, {\n            enable: false\n        });\n        // Register all existing events\n        for (const [eventAlias, eventRegistrar] of this.events) {\n            if (!eventRegistrar.isEmpty()) {\n                // Enable recognizer for this event.\n                this._toggleRecognizer(eventRegistrar.recognizerName, true);\n                this.manager.on(eventAlias, eventRegistrar.handleEvent);\n            }\n        }\n    }\n    // Tear down internal event management implementations.\n    destroy() {\n        if (this.element) {\n            // wheelInput etc. are created in setElement() and therefore\n            // cannot exist if there is no element\n            this.wheelInput.destroy();\n            this.moveInput.destroy();\n            this.keyInput.destroy();\n            this.contextmenuInput.destroy();\n            this.manager.destroy();\n            this.wheelInput = null;\n            this.moveInput = null;\n            this.keyInput = null;\n            this.contextmenuInput = null;\n            this.manager = null;\n            this.element = null;\n        }\n    }\n    /** Register an event handler function to be called on `event` */\n    on(event, handler, opts) {\n        this._addEventHandler(event, handler, opts, false);\n    }\n    once(event, handler, opts) {\n        this._addEventHandler(event, handler, opts, true);\n    }\n    watch(event, handler, opts) {\n        this._addEventHandler(event, handler, opts, false, true);\n    }\n    off(event, handler) {\n        this._removeEventHandler(event, handler);\n    }\n    /*\n     * Enable/disable recognizer for the given event\n     */\n    _toggleRecognizer(name, enabled) {\n        const { manager } = this;\n        if (!manager) {\n            return;\n        }\n        const recognizer = manager.get(name);\n        // @ts-ignore\n        if (recognizer && recognizer.options.enable !== enabled) {\n            recognizer.set({ enable: enabled });\n            const fallbackRecognizers = RECOGNIZER_FALLBACK_MAP[name];\n            if (fallbackRecognizers && !this.options.recognizers) {\n                // Set default require failures\n                // http://hammerjs.github.io/require-failure/\n                fallbackRecognizers.forEach(otherName => {\n                    const otherRecognizer = manager.get(otherName);\n                    if (enabled) {\n                        // Wait for this recognizer to fail\n                        otherRecognizer.requireFailure(name);\n                        /**\n                         * This seems to be a bug in hammerjs:\n                         * requireFailure() adds both ways\n                         * dropRequireFailure() only drops one way\n                         * https://github.com/hammerjs/hammer.js/blob/master/src/recognizerjs/\n                           recognizer-constructor.js#L136\n                         */\n                        recognizer.dropRequireFailure(otherName);\n                    }\n                    else {\n                        // Do not wait for this recognizer to fail\n                        otherRecognizer.dropRequireFailure(name);\n                    }\n                });\n            }\n        }\n        this.wheelInput.enableEventType(name, enabled);\n        this.moveInput.enableEventType(name, enabled);\n        this.keyInput.enableEventType(name, enabled);\n        this.contextmenuInput.enableEventType(name, enabled);\n    }\n    /**\n     * Process the event registration for a single event + handler.\n     */\n    _addEventHandler(event, handler, opts, once, passive) {\n        if (typeof event !== 'string') {\n            // @ts-ignore\n            opts = handler;\n            // If `event` is a map, call `on()` for each entry.\n            for (const eventName in event) {\n                this._addEventHandler(eventName, event[eventName], opts, once, passive);\n            }\n            return;\n        }\n        const { manager, events } = this;\n        // Alias to a recognized gesture as necessary.\n        const eventAlias = GESTURE_EVENT_ALIASES[event] || event;\n        let eventRegistrar = events.get(eventAlias);\n        if (!eventRegistrar) {\n            eventRegistrar = new EventRegistrar(this);\n            events.set(eventAlias, eventRegistrar);\n            // Enable recognizer for this event.\n            eventRegistrar.recognizerName = EVENT_RECOGNIZER_MAP[eventAlias] || eventAlias;\n            // Listen to the event\n            if (manager) {\n                manager.on(eventAlias, eventRegistrar.handleEvent);\n            }\n        }\n        eventRegistrar.add(event, handler, opts, once, passive);\n        if (!eventRegistrar.isEmpty()) {\n            this._toggleRecognizer(eventRegistrar.recognizerName, true);\n        }\n    }\n    /**\n     * Process the event deregistration for a single event + handler.\n     */\n    _removeEventHandler(event, handler) {\n        if (typeof event !== 'string') {\n            // If `event` is a map, call `off()` for each entry.\n            for (const eventName in event) {\n                this._removeEventHandler(eventName, event[eventName]);\n            }\n            return;\n        }\n        const { events } = this;\n        // Alias to a recognized gesture as necessary.\n        const eventAlias = GESTURE_EVENT_ALIASES[event] || event;\n        const eventRegistrar = events.get(eventAlias);\n        if (!eventRegistrar) {\n            return;\n        }\n        eventRegistrar.remove(event, handler);\n        if (eventRegistrar.isEmpty()) {\n            const { recognizerName } = eventRegistrar;\n            // Disable recognizer if no more handlers are attached to its events\n            let isRecognizerUsed = false;\n            for (const eh of events.values()) {\n                if (eh.recognizerName === recognizerName && !eh.isEmpty()) {\n                    isRecognizerUsed = true;\n                    break;\n                }\n            }\n            if (!isRecognizerUsed) {\n                this._toggleRecognizer(recognizerName, false);\n            }\n        }\n    }\n}\n//# sourceMappingURL=event-manager.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = Boolean(typeof process !== 'object' || String(process) !== '[object process]' || process.browser);\nexport const isWorker = typeof importScripts === 'function';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loaders.gl assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\nexport const isWorker = typeof importScripts === 'function';\nexport const isMobile = typeof window !== 'undefined' && typeof window.orientation !== 'undefined';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { assert } from '../env-utils/assert';\nexport default class WorkerJob {\n  constructor(jobName, workerThread) {\n    _defineProperty(this, \"name\", void 0);\n\n    _defineProperty(this, \"workerThread\", void 0);\n\n    _defineProperty(this, \"isRunning\", true);\n\n    _defineProperty(this, \"result\", void 0);\n\n    _defineProperty(this, \"_resolve\", () => {});\n\n    _defineProperty(this, \"_reject\", () => {});\n\n    this.name = jobName;\n    this.workerThread = workerThread;\n    this.result = new Promise((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n  }\n\n  postMessage(type, payload) {\n    this.workerThread.postMessage({\n      source: 'loaders.gl',\n      type,\n      payload\n    });\n  }\n\n  done(value) {\n    assert(this.isRunning);\n    this.isRunning = false;\n\n    this._resolve(value);\n  }\n\n  error(error) {\n    assert(this.isRunning);\n    this.isRunning = false;\n\n    this._reject(error);\n  }\n\n}\n//# sourceMappingURL=worker-job.js.map","export class Worker {}\nexport const parentPort = null;\n//# sourceMappingURL=worker_threads-browser.js.map","import { assert } from '../env-utils/assert';\nconst workerURLCache = new Map();\nexport function getLoadableWorkerURL(props) {\n  assert(props.source && !props.url || !props.source && props.url);\n  let workerURL = workerURLCache.get(props.source || props.url);\n\n  if (!workerURL) {\n    if (props.url) {\n      workerURL = getLoadableWorkerURLFromURL(props.url);\n      workerURLCache.set(props.url, workerURL);\n    }\n\n    if (props.source) {\n      workerURL = getLoadableWorkerURLFromSource(props.source);\n      workerURLCache.set(props.source, workerURL);\n    }\n  }\n\n  assert(workerURL);\n  return workerURL;\n}\n\nfunction getLoadableWorkerURLFromURL(url) {\n  if (!url.startsWith('http')) {\n    return url;\n  }\n\n  const workerSource = buildScriptSource(url);\n  return getLoadableWorkerURLFromSource(workerSource);\n}\n\nfunction getLoadableWorkerURLFromSource(workerSource) {\n  const blob = new Blob([workerSource], {\n    type: 'application/javascript'\n  });\n  return URL.createObjectURL(blob);\n}\n\nfunction buildScriptSource(workerUrl) {\n  return \"try {\\n  importScripts('\".concat(workerUrl, \"');\\n} catch (error) {\\n  console.error(error);\\n  throw error;\\n}\");\n}\n//# sourceMappingURL=get-loadable-worker-url.js.map","export function getTransferList(object, recursive = true, transfers) {\n  const transfersSet = transfers || new Set();\n\n  if (!object) {} else if (isTransferable(object)) {\n    transfersSet.add(object);\n  } else if (isTransferable(object.buffer)) {\n    transfersSet.add(object.buffer);\n  } else if (ArrayBuffer.isView(object)) {} else if (recursive && typeof object === 'object') {\n    for (const key in object) {\n      getTransferList(object[key], recursive, transfersSet);\n    }\n  }\n\n  return transfers === undefined ? Array.from(transfersSet) : [];\n}\n\nfunction isTransferable(object) {\n  if (!object) {\n    return false;\n  }\n\n  if (object instanceof ArrayBuffer) {\n    return true;\n  }\n\n  if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n    return true;\n  }\n\n  if (typeof ImageBitmap !== 'undefined' && object instanceof ImageBitmap) {\n    return true;\n  }\n\n  if (typeof OffscreenCanvas !== 'undefined' && object instanceof OffscreenCanvas) {\n    return true;\n  }\n\n  return false;\n}\n\nexport function getTransferListForWriter(object) {\n  if (object === null) {\n    return {};\n  }\n\n  const clone = Object.assign({}, object);\n  Object.keys(clone).forEach(key => {\n    if (typeof object[key] === 'object' && !ArrayBuffer.isView(object[key])) {\n      clone[key] = getTransferListForWriter(object[key]);\n    } else if (typeof clone[key] === 'function' || clone[key] instanceof RegExp) {\n      clone[key] = {};\n    } else {\n      clone[key] = object[key];\n    }\n  });\n  return clone;\n}\n//# sourceMappingURL=get-transfer-list.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Worker as NodeWorker } from '../node/worker_threads';\nimport { isBrowser } from '../env-utils/globals';\nimport { assert } from '../env-utils/assert';\nimport { getLoadableWorkerURL } from '../worker-utils/get-loadable-worker-url';\nimport { getTransferList } from '../worker-utils/get-transfer-list';\n\nconst NOOP = () => {};\n\nexport default class WorkerThread {\n  static isSupported() {\n    return typeof Worker !== 'undefined' && isBrowser || typeof NodeWorker !== 'undefined' && !isBrowser;\n  }\n\n  constructor(props) {\n    _defineProperty(this, \"name\", void 0);\n\n    _defineProperty(this, \"source\", void 0);\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"terminated\", false);\n\n    _defineProperty(this, \"worker\", void 0);\n\n    _defineProperty(this, \"onMessage\", void 0);\n\n    _defineProperty(this, \"onError\", void 0);\n\n    _defineProperty(this, \"_loadableURL\", '');\n\n    const {\n      name,\n      source,\n      url\n    } = props;\n    assert(source || url);\n    this.name = name;\n    this.source = source;\n    this.url = url;\n    this.onMessage = NOOP;\n\n    this.onError = error => console.log(error);\n\n    this.worker = isBrowser ? this._createBrowserWorker() : this._createNodeWorker();\n  }\n\n  destroy() {\n    this.onMessage = NOOP;\n    this.onError = NOOP;\n    this.worker.terminate();\n    this.terminated = true;\n  }\n\n  get isRunning() {\n    return Boolean(this.onMessage);\n  }\n\n  postMessage(data, transferList) {\n    transferList = transferList || getTransferList(data);\n    this.worker.postMessage(data, transferList);\n  }\n\n  _getErrorFromErrorEvent(event) {\n    let message = 'Failed to load ';\n    message += \"worker \".concat(this.name, \" from \").concat(this.url, \". \");\n\n    if (event.message) {\n      message += \"\".concat(event.message, \" in \");\n    }\n\n    if (event.lineno) {\n      message += \":\".concat(event.lineno, \":\").concat(event.colno);\n    }\n\n    return new Error(message);\n  }\n\n  _createBrowserWorker() {\n    this._loadableURL = getLoadableWorkerURL({\n      source: this.source,\n      url: this.url\n    });\n    const worker = new Worker(this._loadableURL, {\n      name: this.name\n    });\n\n    worker.onmessage = event => {\n      if (!event.data) {\n        this.onError(new Error('No data received'));\n      } else {\n        this.onMessage(event.data);\n      }\n    };\n\n    worker.onerror = error => {\n      this.onError(this._getErrorFromErrorEvent(error));\n      this.terminated = true;\n    };\n\n    worker.onmessageerror = event => console.error(event);\n\n    return worker;\n  }\n\n  _createNodeWorker() {\n    let worker;\n\n    if (this.url) {\n      const absolute = this.url.includes(':/') || this.url.startsWith('/');\n      const url = absolute ? this.url : \"./\".concat(this.url);\n      worker = new NodeWorker(url, {\n        eval: false\n      });\n    } else if (this.source) {\n      worker = new NodeWorker(this.source, {\n        eval: true\n      });\n    } else {\n      throw new Error('no worker');\n    }\n\n    worker.on('message', data => {\n      this.onMessage(data);\n    });\n    worker.on('error', error => {\n      this.onError(error);\n    });\n    worker.on('exit', code => {});\n    return worker;\n  }\n\n}\n//# sourceMappingURL=worker-thread.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { isMobile } from '../env-utils/globals';\nimport WorkerThread from './worker-thread';\nimport WorkerJob from './worker-job';\nexport default class WorkerPool {\n  static isSupported() {\n    return WorkerThread.isSupported();\n  }\n\n  constructor(props) {\n    _defineProperty(this, \"name\", 'unnamed');\n\n    _defineProperty(this, \"source\", void 0);\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"maxConcurrency\", 1);\n\n    _defineProperty(this, \"maxMobileConcurrency\", 1);\n\n    _defineProperty(this, \"onDebug\", () => {});\n\n    _defineProperty(this, \"reuseWorkers\", true);\n\n    _defineProperty(this, \"props\", {});\n\n    _defineProperty(this, \"jobQueue\", []);\n\n    _defineProperty(this, \"idleQueue\", []);\n\n    _defineProperty(this, \"count\", 0);\n\n    _defineProperty(this, \"isDestroyed\", false);\n\n    this.source = props.source;\n    this.url = props.url;\n    this.setProps(props);\n  }\n\n  destroy() {\n    this.idleQueue.forEach(worker => worker.destroy());\n    this.isDestroyed = true;\n  }\n\n  setProps(props) {\n    this.props = { ...this.props,\n      ...props\n    };\n\n    if (props.name !== undefined) {\n      this.name = props.name;\n    }\n\n    if (props.maxConcurrency !== undefined) {\n      this.maxConcurrency = props.maxConcurrency;\n    }\n\n    if (props.maxMobileConcurrency !== undefined) {\n      this.maxMobileConcurrency = props.maxMobileConcurrency;\n    }\n\n    if (props.reuseWorkers !== undefined) {\n      this.reuseWorkers = props.reuseWorkers;\n    }\n\n    if (props.onDebug !== undefined) {\n      this.onDebug = props.onDebug;\n    }\n  }\n\n  async startJob(name, onMessage = (job, type, data) => job.done(data), onError = (job, error) => job.error(error)) {\n    const startPromise = new Promise(onStart => {\n      this.jobQueue.push({\n        name,\n        onMessage,\n        onError,\n        onStart\n      });\n      return this;\n    });\n\n    this._startQueuedJob();\n\n    return await startPromise;\n  }\n\n  async _startQueuedJob() {\n    if (!this.jobQueue.length) {\n      return;\n    }\n\n    const workerThread = this._getAvailableWorker();\n\n    if (!workerThread) {\n      return;\n    }\n\n    const queuedJob = this.jobQueue.shift();\n\n    if (queuedJob) {\n      this.onDebug({\n        message: 'Starting job',\n        name: queuedJob.name,\n        workerThread,\n        backlog: this.jobQueue.length\n      });\n      const job = new WorkerJob(queuedJob.name, workerThread);\n\n      workerThread.onMessage = data => queuedJob.onMessage(job, data.type, data.payload);\n\n      workerThread.onError = error => queuedJob.onError(job, error);\n\n      queuedJob.onStart(job);\n\n      try {\n        await job.result;\n      } finally {\n        this.returnWorkerToQueue(workerThread);\n      }\n    }\n  }\n\n  returnWorkerToQueue(worker) {\n    const shouldDestroyWorker = this.isDestroyed || !this.reuseWorkers || this.count > this._getMaxConcurrency();\n\n    if (shouldDestroyWorker) {\n      worker.destroy();\n      this.count--;\n    } else {\n      this.idleQueue.push(worker);\n    }\n\n    if (!this.isDestroyed) {\n      this._startQueuedJob();\n    }\n  }\n\n  _getAvailableWorker() {\n    if (this.idleQueue.length > 0) {\n      return this.idleQueue.shift() || null;\n    }\n\n    if (this.count < this._getMaxConcurrency()) {\n      this.count++;\n      const name = \"\".concat(this.name.toLowerCase(), \" (#\").concat(this.count, \" of \").concat(this.maxConcurrency, \")\");\n      return new WorkerThread({\n        name,\n        source: this.source,\n        url: this.url\n      });\n    }\n\n    return null;\n  }\n\n  _getMaxConcurrency() {\n    return isMobile ? this.maxMobileConcurrency : this.maxConcurrency;\n  }\n\n}\n//# sourceMappingURL=worker-pool.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport WorkerPool from './worker-pool';\nimport WorkerThread from './worker-thread';\nconst DEFAULT_PROPS = {\n  maxConcurrency: 3,\n  maxMobileConcurrency: 1,\n  reuseWorkers: true,\n  onDebug: () => {}\n};\nexport default class WorkerFarm {\n  static isSupported() {\n    return WorkerThread.isSupported();\n  }\n\n  static getWorkerFarm(props = {}) {\n    WorkerFarm._workerFarm = WorkerFarm._workerFarm || new WorkerFarm({});\n\n    WorkerFarm._workerFarm.setProps(props);\n\n    return WorkerFarm._workerFarm;\n  }\n\n  constructor(props) {\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"workerPools\", new Map());\n\n    this.props = { ...DEFAULT_PROPS\n    };\n    this.setProps(props);\n    this.workerPools = new Map();\n  }\n\n  destroy() {\n    for (const workerPool of this.workerPools.values()) {\n      workerPool.destroy();\n    }\n\n    this.workerPools = new Map();\n  }\n\n  setProps(props) {\n    this.props = { ...this.props,\n      ...props\n    };\n\n    for (const workerPool of this.workerPools.values()) {\n      workerPool.setProps(this._getWorkerPoolProps());\n    }\n  }\n\n  getWorkerPool(options) {\n    const {\n      name,\n      source,\n      url\n    } = options;\n    let workerPool = this.workerPools.get(name);\n\n    if (!workerPool) {\n      workerPool = new WorkerPool({\n        name,\n        source,\n        url\n      });\n      workerPool.setProps(this._getWorkerPoolProps());\n      this.workerPools.set(name, workerPool);\n    }\n\n    return workerPool;\n  }\n\n  _getWorkerPoolProps() {\n    return {\n      maxConcurrency: this.props.maxConcurrency,\n      maxMobileConcurrency: this.props.maxMobileConcurrency,\n      reuseWorkers: this.props.reuseWorkers,\n      onDebug: this.props.onDebug\n    };\n  }\n\n}\n\n_defineProperty(WorkerFarm, \"_workerFarm\", void 0);\n//# sourceMappingURL=worker-farm.js.map","import { isBrowser } from '@loaders.gl/worker-utils';\nimport { WorkerFarm, getWorkerURL } from '@loaders.gl/worker-utils';\nexport function canParseWithWorker(loader, options) {\n  if (!WorkerFarm.isSupported()) {\n    return false;\n  }\n\n  if (!isBrowser && !(options !== null && options !== void 0 && options._nodeWorkers)) {\n    return false;\n  }\n\n  return loader.worker && (options === null || options === void 0 ? void 0 : options.worker);\n}\nexport async function parseWithWorker(loader, data, options, context, parseOnMainThread) {\n  const name = loader.id;\n  const url = getWorkerURL(loader, options);\n  const workerFarm = WorkerFarm.getWorkerFarm(options);\n  const workerPool = workerFarm.getWorkerPool({\n    name,\n    url\n  });\n  options = JSON.parse(JSON.stringify(options));\n  context = JSON.parse(JSON.stringify(context || {}));\n  const job = await workerPool.startJob('process-on-worker', onMessage.bind(null, parseOnMainThread));\n  job.postMessage('process', {\n    input: data,\n    options,\n    context\n  });\n  const result = await job.result;\n  return await result.result;\n}\n\nasync function onMessage(parseOnMainThread, job, type, payload) {\n  switch (type) {\n    case 'done':\n      job.done(payload);\n      break;\n\n    case 'error':\n      job.error(new Error(payload.error));\n      break;\n\n    case 'process':\n      const {\n        id,\n        input,\n        options\n      } = payload;\n\n      try {\n        const result = await parseOnMainThread(input, options);\n        job.postMessage('done', {\n          id,\n          result\n        });\n      } catch (error) {\n        const message = error instanceof Error ? error.message : 'unknown error';\n        job.postMessage('error', {\n          id,\n          error: message\n        });\n      }\n\n      break;\n\n    default:\n      console.warn(\"parse-with-worker unknown message \".concat(type));\n  }\n}\n//# sourceMappingURL=parse-with-worker.js.map","import { assert } from '../env-utils/assert';\nimport { VERSION as __VERSION__ } from '../env-utils/version';\nconst NPM_TAG = 'latest';\nconst VERSION = typeof \"3.2.11\" !== 'undefined' ? \"3.2.11\" : NPM_TAG;\nexport function getWorkerName(worker) {\n  const warning = worker.version !== VERSION ? \" (worker-utils@\".concat(VERSION, \")\") : '';\n  return \"\".concat(worker.name, \"@\").concat(worker.version).concat(warning);\n}\nexport function getWorkerURL(worker, options = {}) {\n  const workerOptions = options[worker.id] || {};\n  const workerFile = \"\".concat(worker.id, \"-worker.js\");\n  let url = workerOptions.workerUrl;\n\n  if (!url && worker.id === 'compression') {\n    url = options.workerUrl;\n  }\n\n  if (options._workerType === 'test') {\n    url = \"modules/\".concat(worker.module, \"/dist/\").concat(workerFile);\n  }\n\n  if (!url) {\n    let version = worker.version;\n\n    if (version === 'latest') {\n      version = NPM_TAG;\n    }\n\n    const versionTag = version ? \"@\".concat(version) : '';\n    url = \"https://unpkg.com/@loaders.gl/\".concat(worker.module).concat(versionTag, \"/dist/\").concat(workerFile);\n  }\n\n  assert(url);\n  return url;\n}\n//# sourceMappingURL=get-worker-url.js.map","import * as node from '../node/buffer';\nexport function isBuffer(value) {\n  return value && typeof value === 'object' && value.isBuffer;\n}\nexport function toBuffer(data) {\n  return node.toBuffer ? node.toBuffer(data) : data;\n}\nexport function bufferToArrayBuffer(buffer) {\n  if (isBuffer(buffer)) {\n    const typedArray = new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.length);\n    return typedArray.slice().buffer;\n  }\n\n  return buffer;\n}\n//# sourceMappingURL=buffer-utils.js.map","import { isBuffer, bufferToArrayBuffer } from './buffer-utils';\nexport function toArrayBuffer(data) {\n  if (isBuffer(data)) {\n    return bufferToArrayBuffer(data);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    if (data.byteOffset === 0 && data.byteLength === data.buffer.byteLength) {\n      return data.buffer;\n    }\n\n    return data.buffer.slice(data.byteOffset, data.byteOffset + data.byteLength);\n  }\n\n  if (typeof data === 'string') {\n    const text = data;\n    const uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  if (data && typeof data === 'object' && data._toArrayBuffer) {\n    return data._toArrayBuffer();\n  }\n\n  throw new Error('toArrayBuffer');\n}\nexport function compareArrayBuffers(arrayBuffer1, arrayBuffer2, byteLength) {\n  byteLength = byteLength || arrayBuffer1.byteLength;\n\n  if (arrayBuffer1.byteLength < byteLength || arrayBuffer2.byteLength < byteLength) {\n    return false;\n  }\n\n  const array1 = new Uint8Array(arrayBuffer1);\n  const array2 = new Uint8Array(arrayBuffer2);\n\n  for (let i = 0; i < array1.length; ++i) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function concatenateArrayBuffers(...sources) {\n  const sourceArrays = sources.map(source2 => source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2);\n  const byteLength = sourceArrays.reduce((length, typedArray) => length + typedArray.byteLength, 0);\n  const result = new Uint8Array(byteLength);\n  let offset = 0;\n\n  for (const sourceArray of sourceArrays) {\n    result.set(sourceArray, offset);\n    offset += sourceArray.byteLength;\n  }\n\n  return result.buffer;\n}\nexport function concatenateTypedArrays(...typedArrays) {\n  const arrays = typedArrays;\n  const TypedArrayConstructor = arrays && arrays.length > 1 && arrays[0].constructor || null;\n\n  if (!TypedArrayConstructor) {\n    throw new Error('\"concatenateTypedArrays\" - incorrect quantity of arguments or arguments have incompatible data types');\n  }\n\n  const sumLength = arrays.reduce((acc, value) => acc + value.length, 0);\n  const result = new TypedArrayConstructor(sumLength);\n  let offset = 0;\n\n  for (const array of arrays) {\n    result.set(array, offset);\n    offset += array.length;\n  }\n\n  return result;\n}\nexport function sliceArrayBuffer(arrayBuffer, byteOffset, byteLength) {\n  const subArray = byteLength !== undefined ? new Uint8Array(arrayBuffer).subarray(byteOffset, byteOffset + byteLength) : new Uint8Array(arrayBuffer).subarray(byteOffset);\n  const arrayCopy = new Uint8Array(subArray);\n  return arrayCopy.buffer;\n}\n//# sourceMappingURL=array-buffer-utils.js.map","import { concatenateArrayBuffers } from '../binary-utils/array-buffer-utils';\nexport async function forEach(iterator, visitor) {\n  while (true) {\n    const {\n      done,\n      value\n    } = await iterator.next();\n\n    if (done) {\n      iterator.return();\n      return;\n    }\n\n    const cancel = visitor(value);\n\n    if (cancel) {\n      return;\n    }\n  }\n}\nexport async function concatenateArrayBuffersAsync(asyncIterator) {\n  const arrayBuffers = [];\n\n  for await (const chunk of asyncIterator) {\n    arrayBuffers.push(chunk);\n  }\n\n  return concatenateArrayBuffers(...arrayBuffers);\n}\nexport async function concatenateStringsAsync(asyncIterator) {\n  const strings = [];\n\n  for await (const chunk of asyncIterator) {\n    strings.push(chunk);\n  }\n\n  return strings.join('');\n}\n//# sourceMappingURL=async-iteration.js.map","export default function getHiResTimestamp() {\n  let timestamp;\n\n  if (typeof window !== 'undefined' && window.performance) {\n    timestamp = window.performance.now();\n  } else if (typeof process !== 'undefined' && process.hrtime) {\n    const timeParts = process.hrtime();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport getHiResTimestamp from '../utils/hi-res-timestamp';\nexport default class Stat {\n  constructor(name, type) {\n    _defineProperty(this, \"name\", void 0);\n\n    _defineProperty(this, \"type\", void 0);\n\n    _defineProperty(this, \"sampleSize\", 1);\n\n    _defineProperty(this, \"time\", void 0);\n\n    _defineProperty(this, \"count\", void 0);\n\n    _defineProperty(this, \"samples\", void 0);\n\n    _defineProperty(this, \"lastTiming\", void 0);\n\n    _defineProperty(this, \"lastSampleTime\", void 0);\n\n    _defineProperty(this, \"lastSampleCount\", void 0);\n\n    _defineProperty(this, \"_count\", 0);\n\n    _defineProperty(this, \"_time\", 0);\n\n    _defineProperty(this, \"_samples\", 0);\n\n    _defineProperty(this, \"_startTime\", 0);\n\n    _defineProperty(this, \"_timerPending\", false);\n\n    this.name = name;\n    this.type = type;\n    this.reset();\n  }\n\n  setSampleSize(samples) {\n    this.sampleSize = samples;\n    return this;\n  }\n\n  incrementCount() {\n    this.addCount(1);\n    return this;\n  }\n\n  decrementCount() {\n    this.subtractCount(1);\n    return this;\n  }\n\n  addCount(value) {\n    this._count += value;\n    this._samples++;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  subtractCount(value) {\n    this._count -= value;\n    this._samples++;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  addTime(time) {\n    this._time += time;\n    this.lastTiming = time;\n    this._samples++;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  timeStart() {\n    this._startTime = getHiResTimestamp();\n    this._timerPending = true;\n    return this;\n  }\n\n  timeEnd() {\n    if (!this._timerPending) {\n      return this;\n    }\n\n    this.addTime(getHiResTimestamp() - this._startTime);\n    this._timerPending = false;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  getSampleAverageCount() {\n    return this.sampleSize > 0 ? this.lastSampleCount / this.sampleSize : 0;\n  }\n\n  getSampleAverageTime() {\n    return this.sampleSize > 0 ? this.lastSampleTime / this.sampleSize : 0;\n  }\n\n  getSampleHz() {\n    return this.lastSampleTime > 0 ? this.sampleSize / (this.lastSampleTime / 1000) : 0;\n  }\n\n  getAverageCount() {\n    return this.samples > 0 ? this.count / this.samples : 0;\n  }\n\n  getAverageTime() {\n    return this.samples > 0 ? this.time / this.samples : 0;\n  }\n\n  getHz() {\n    return this.time > 0 ? this.samples / (this.time / 1000) : 0;\n  }\n\n  reset() {\n    this.time = 0;\n    this.count = 0;\n    this.samples = 0;\n    this.lastTiming = 0;\n    this.lastSampleTime = 0;\n    this.lastSampleCount = 0;\n    this._count = 0;\n    this._time = 0;\n    this._samples = 0;\n    this._startTime = 0;\n    this._timerPending = false;\n    return this;\n  }\n\n  _checkSampling() {\n    if (this._samples === this.sampleSize) {\n      this.lastSampleTime = this._time;\n      this.lastSampleCount = this._count;\n      this.count += this._count;\n      this.time += this._time;\n      this.samples += this._samples;\n      this._time = 0;\n      this._count = 0;\n      this._samples = 0;\n    }\n  }\n\n}\n//# sourceMappingURL=stat.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Stat from './stat';\nexport default class Stats {\n  constructor(options) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"stats\", {});\n\n    this.id = options.id;\n    this.stats = {};\n\n    this._initializeStats(options.stats);\n\n    Object.seal(this);\n  }\n\n  get(name) {\n    let type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'count';\n    return this._getOrCreate({\n      name,\n      type\n    });\n  }\n\n  get size() {\n    return Object.keys(this.stats).length;\n  }\n\n  reset() {\n    for (const key in this.stats) {\n      this.stats[key].reset();\n    }\n\n    return this;\n  }\n\n  forEach(fn) {\n    for (const key in this.stats) {\n      fn(this.stats[key]);\n    }\n  }\n\n  getTable() {\n    const table = {};\n    this.forEach(stat => {\n      table[stat.name] = {\n        time: stat.time || 0,\n        count: stat.count || 0,\n        average: stat.getAverageTime() || 0,\n        hz: stat.getHz() || 0\n      };\n    });\n    return table;\n  }\n\n  _initializeStats() {\n    let stats = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    stats.forEach(stat => this._getOrCreate(stat));\n  }\n\n  _getOrCreate(stat) {\n    if (!stat || !stat.name) {\n      return null;\n    }\n\n    const {\n      name,\n      type\n    } = stat;\n\n    if (!this.stats[name]) {\n      if (stat instanceof Stat) {\n        this.stats[name] = stat;\n      } else {\n        this.stats[name] = new Stat(name, type);\n      }\n    }\n\n    return this.stats[name];\n  }\n\n}\n//# sourceMappingURL=stats.js.map","let pathPrefix = '';\nconst fileAliases = {};\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function getPathPrefix() {\n  return pathPrefix;\n}\nexport function addAliases(aliases) {\n  Object.assign(fileAliases, aliases);\n}\nexport function resolvePath(filename) {\n  for (const alias in fileAliases) {\n    if (filename.startsWith(alias)) {\n      const replacement = fileAliases[alias];\n      filename = filename.replace(alias, replacement);\n    }\n  }\n\n  if (!filename.startsWith('http://') && !filename.startsWith('https://')) {\n    filename = \"\".concat(pathPrefix).concat(filename);\n  }\n\n  return filename;\n}\n//# sourceMappingURL=file-aliases.js.map","const isBoolean = x => typeof x === 'boolean';\n\nconst isFunction = x => typeof x === 'function';\n\nexport const isObject = x => x !== null && typeof x === 'object';\nexport const isPureObject = x => isObject(x) && x.constructor === {}.constructor;\nexport const isPromise = x => isObject(x) && isFunction(x.then);\nexport const isIterable = x => x && typeof x[Symbol.iterator] === 'function';\nexport const isAsyncIterable = x => x && typeof x[Symbol.asyncIterator] === 'function';\nexport const isIterator = x => x && isFunction(x.next);\nexport const isResponse = x => typeof Response !== 'undefined' && x instanceof Response || x && x.arrayBuffer && x.text && x.json;\nexport const isFile = x => typeof File !== 'undefined' && x instanceof File;\nexport const isBlob = x => typeof Blob !== 'undefined' && x instanceof Blob;\nexport const isBuffer = x => x && typeof x === 'object' && x.isBuffer;\nexport const isWritableDOMStream = x => isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\nexport const isReadableDOMStream = x => typeof ReadableStream !== 'undefined' && x instanceof ReadableStream || isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.getReader);\nexport const isWritableNodeStream = x => isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\nexport const isReadableNodeStream = x => isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\nexport const isReadableStream = x => isReadableDOMStream(x) || isReadableNodeStream(x);\nexport const isWritableStream = x => isWritableDOMStream(x) || isWritableNodeStream(x);\n//# sourceMappingURL=is-type.js.map","const DATA_URL_PATTERN = /^data:([-\\w.]+\\/[-\\w.+]+)(;|,)/;\nconst MIME_TYPE_PATTERN = /^([-\\w.]+\\/[-\\w.+]+)/;\nexport function parseMIMEType(mimeString) {\n  const matches = MIME_TYPE_PATTERN.exec(mimeString);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return mimeString;\n}\nexport function parseMIMETypeFromURL(url) {\n  const matches = DATA_URL_PATTERN.exec(url);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return '';\n}\n//# sourceMappingURL=mime-type-utils.js.map","import { isResponse, isBlob } from '../../javascript-utils/is-type';\nimport { parseMIMEType, parseMIMETypeFromURL } from './mime-type-utils';\nconst QUERY_STRING_PATTERN = /\\?.*/;\nexport function getResourceUrlAndType(resource) {\n  if (isResponse(resource)) {\n    const url = stripQueryString(resource.url || '');\n    const contentTypeHeader = resource.headers.get('content-type') || '';\n    return {\n      url,\n      type: parseMIMEType(contentTypeHeader) || parseMIMETypeFromURL(url)\n    };\n  }\n\n  if (isBlob(resource)) {\n    return {\n      url: stripQueryString(resource.name || ''),\n      type: resource.type || ''\n    };\n  }\n\n  if (typeof resource === 'string') {\n    return {\n      url: stripQueryString(resource),\n      type: parseMIMETypeFromURL(resource)\n    };\n  }\n\n  return {\n    url: '',\n    type: ''\n  };\n}\nexport function getResourceContentLength(resource) {\n  if (isResponse(resource)) {\n    return resource.headers['content-length'] || -1;\n  }\n\n  if (isBlob(resource)) {\n    return resource.size;\n  }\n\n  if (typeof resource === 'string') {\n    return resource.length;\n  }\n\n  if (resource instanceof ArrayBuffer) {\n    return resource.byteLength;\n  }\n\n  if (ArrayBuffer.isView(resource)) {\n    return resource.byteLength;\n  }\n\n  return -1;\n}\n\nfunction stripQueryString(url) {\n  return url.replace(QUERY_STRING_PATTERN, '');\n}\n//# sourceMappingURL=resource-utils.js.map","import { isResponse } from '../../javascript-utils/is-type';\nimport { getResourceContentLength, getResourceUrlAndType } from './resource-utils';\nexport async function makeResponse(resource) {\n  if (isResponse(resource)) {\n    return resource;\n  }\n\n  const headers = {};\n  const contentLength = getResourceContentLength(resource);\n\n  if (contentLength >= 0) {\n    headers['content-length'] = String(contentLength);\n  }\n\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(resource);\n\n  if (type) {\n    headers['content-type'] = type;\n  }\n\n  const initialDataUrl = await getInitialDataUrl(resource);\n\n  if (initialDataUrl) {\n    headers['x-first-bytes'] = initialDataUrl;\n  }\n\n  if (typeof resource === 'string') {\n    resource = new TextEncoder().encode(resource);\n  }\n\n  const response = new Response(resource, {\n    headers\n  });\n  Object.defineProperty(response, 'url', {\n    value: url\n  });\n  return response;\n}\nexport async function checkResponse(response) {\n  if (!response.ok) {\n    const message = await getResponseError(response);\n    throw new Error(message);\n  }\n}\nexport function checkResponseSync(response) {\n  if (!response.ok) {\n    let message = \"\".concat(response.status, \" \").concat(response.statusText);\n    message = message.length > 60 ? \"\".concat(message.slice(0, 60), \"...\") : message;\n    throw new Error(message);\n  }\n}\n\nasync function getResponseError(response) {\n  let message = \"Failed to fetch resource \".concat(response.url, \" (\").concat(response.status, \"): \");\n\n  try {\n    const contentType = response.headers.get('Content-Type');\n    let text = response.statusText;\n\n    if (contentType.includes('application/json')) {\n      text += \" \".concat(await response.text());\n    }\n\n    message += text;\n    message = message.length > 60 ? \"\".concat(message.slice(0, 60), \"...\") : message;\n  } catch (error) {}\n\n  return message;\n}\n\nasync function getInitialDataUrl(resource) {\n  const INITIAL_DATA_LENGTH = 5;\n\n  if (typeof resource === 'string') {\n    return \"data:,\".concat(resource.slice(0, INITIAL_DATA_LENGTH));\n  }\n\n  if (resource instanceof Blob) {\n    const blobSlice = resource.slice(0, 5);\n    return await new Promise(resolve => {\n      const reader = new FileReader();\n\n      reader.onload = event => {\n        var _event$target;\n\n        return resolve(event === null || event === void 0 ? void 0 : (_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.result);\n      };\n\n      reader.readAsDataURL(blobSlice);\n    });\n  }\n\n  if (resource instanceof ArrayBuffer) {\n    const slice = resource.slice(0, INITIAL_DATA_LENGTH);\n    const base64 = arrayBufferToBase64(slice);\n    return \"data:base64,\".concat(base64);\n  }\n\n  return null;\n}\n\nfunction arrayBufferToBase64(buffer) {\n  let binary = '';\n  const bytes = new Uint8Array(buffer);\n\n  for (let i = 0; i < bytes.byteLength; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n\n  return btoa(binary);\n}\n//# sourceMappingURL=response-utils.js.map","import { resolvePath } from '@loaders.gl/loader-utils';\nimport { makeResponse } from '../utils/response-utils';\nexport async function fetchFile(url, options) {\n  if (typeof url === 'string') {\n    url = resolvePath(url);\n    let fetchOptions = options;\n\n    if (options !== null && options !== void 0 && options.fetch && typeof (options === null || options === void 0 ? void 0 : options.fetch) !== 'function') {\n      fetchOptions = options.fetch;\n    }\n\n    return await fetch(url, fetchOptions);\n  }\n\n  return await makeResponse(url);\n}\n//# sourceMappingURL=fetch-file.js.map","export default function isElectron(mockUserAgent) {\n  if (typeof window !== 'undefined' && typeof window.process === 'object' && window.process.type === 'renderer') {\n    return true;\n  }\n\n  if (typeof process !== 'undefined' && typeof process.versions === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  }\n\n  const realUserAgent = typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  const userAgent = mockUserAgent || realUserAgent;\n\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=is-electron.js.map","import isElectron from './is-electron';\nexport default function isBrowser() {\n  const isNode = typeof process === 'object' && String(process) === '[object process]' && !process.browser;\n  return !isNode || isElectron();\n}\nexport function isBrowserMainThread() {\n  return isBrowser() && typeof document !== 'undefined';\n}\n//# sourceMappingURL=is-browser.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: typeof process === 'object' && process\n};\nconst global_ = globalThis;\nconst self_ = globals.self || globals.window || globals.global;\nconst window_ = globals.window || globals.self || globals.global;\nconst document_ = globals.document || {};\nconst process_ = globals.process || {};\nconst console_ = console;\nexport { self_ as self, window_ as window, global_ as global, document_ as document, process_ as process, console_ as console };\n//# sourceMappingURL=globals.js.map","import checkIfBrowser from '../lib/is-browser';\nexport { self, window, global, document, process, console } from '../lib/globals';\nexport const VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'untranspiled source';\nexport const isBrowser = checkIfBrowser();\n//# sourceMappingURL=globals.js.map","import isBrowser from './is-browser';\nimport isElectron from './is-electron';\nconst window = globalThis;\nexport function isMobile() {\n  return typeof window.orientation !== 'undefined';\n}\nexport default function getBrowser(mockUserAgent) {\n  if (!mockUserAgent && !isBrowser()) {\n    return 'Node';\n  }\n\n  if (isElectron(mockUserAgent)) {\n    return 'Electron';\n  }\n\n  const navigator_ = typeof navigator !== 'undefined' ? navigator : {};\n  const userAgent = mockUserAgent || navigator_.userAgent || '';\n\n  if (userAgent.indexOf('Edge') > -1) {\n    return 'Edge';\n  }\n\n  const isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  const isTrident = userAgent.indexOf('Trident/') !== -1;\n\n  if (isMSIE || isTrident) {\n    return 'IE';\n  }\n\n  if (window.chrome) {\n    return 'Chrome';\n  }\n\n  if (window.safari) {\n    return 'Safari';\n  }\n\n  if (window.mozInnerScreenX) {\n    return 'Firefox';\n  }\n\n  return 'Unknown';\n}\n//# sourceMappingURL=get-browser.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction getStorage(type) {\n  try {\n    const storage = window[type];\n    const x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return storage;\n  } catch (e) {\n    return null;\n  }\n}\n\nexport default class LocalStorage {\n  constructor(id) {\n    let defaultSettings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'sessionStorage';\n\n    _defineProperty(this, \"storage\", void 0);\n\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"config\", {});\n\n    this.storage = getStorage(type);\n    this.id = id;\n    this.config = {};\n    Object.assign(this.config, defaultSettings);\n\n    this._loadConfiguration();\n  }\n\n  getConfiguration() {\n    return this.config;\n  }\n\n  setConfiguration(configuration) {\n    this.config = {};\n    return this.updateConfiguration(configuration);\n  }\n\n  updateConfiguration(configuration) {\n    Object.assign(this.config, configuration);\n\n    if (this.storage) {\n      const serialized = JSON.stringify(this.config);\n      this.storage.setItem(this.id, serialized);\n    }\n\n    return this;\n  }\n\n  _loadConfiguration() {\n    let configuration = {};\n\n    if (this.storage) {\n      const serializedConfiguration = this.storage.getItem(this.id);\n      configuration = serializedConfiguration ? JSON.parse(serializedConfiguration) : {};\n    }\n\n    Object.assign(this.config, configuration);\n    return this;\n  }\n\n}\n//# sourceMappingURL=local-storage.js.map","export function formatTime(ms) {\n  let formatted;\n\n  if (ms < 10) {\n    formatted = \"\".concat(ms.toFixed(2), \"ms\");\n  } else if (ms < 100) {\n    formatted = \"\".concat(ms.toFixed(1), \"ms\");\n  } else if (ms < 1000) {\n    formatted = \"\".concat(ms.toFixed(0), \"ms\");\n  } else {\n    formatted = \"\".concat((ms / 1000).toFixed(2), \"s\");\n  }\n\n  return formatted;\n}\nexport function leftPad(string) {\n  let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8;\n  const padLength = Math.max(length - string.length, 0);\n  return \"\".concat(' '.repeat(padLength)).concat(string);\n}\nexport function rightPad(string) {\n  let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8;\n  const padLength = Math.max(length - string.length, 0);\n  return \"\".concat(string).concat(' '.repeat(padLength));\n}\nexport function formatValue(v) {\n  let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const EPSILON = 1e-16;\n  const {\n    isInteger = false\n  } = opts;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  const string = v.toPrecision(2);\n  const decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n\nfunction formatArrayValue(v, opts) {\n  const {\n    maxElts = 16,\n    size = 1\n  } = opts;\n  let string = '[';\n\n  for (let i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  const terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatImage(image, message, scale) {\n  let maxWidth = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 600;\n  const imageUrl = image.src.replace(/\\(/g, '%28').replace(/\\)/g, '%29');\n\n  if (image.width > maxWidth) {\n    scale = Math.min(scale, maxWidth / image.width);\n  }\n\n  const width = image.width * scale;\n  const height = image.height * scale;\n  const style = ['font-size:1px;', \"padding:\".concat(Math.floor(height / 2), \"px \").concat(Math.floor(width / 2), \"px;\"), \"line-height:\".concat(height, \"px;\"), \"background:url(\".concat(imageUrl, \");\"), \"background-size:\".concat(width, \"px \").concat(height, \"px;\"), 'color:transparent;'].join('');\n  return [\"\".concat(message, \" %c+\"), style];\n}\n//# sourceMappingURL=formatters.js.map","import { isBrowser } from '@probe.gl/env';\nexport let COLOR;\n\n(function (COLOR) {\n  COLOR[COLOR[\"BLACK\"] = 30] = \"BLACK\";\n  COLOR[COLOR[\"RED\"] = 31] = \"RED\";\n  COLOR[COLOR[\"GREEN\"] = 32] = \"GREEN\";\n  COLOR[COLOR[\"YELLOW\"] = 33] = \"YELLOW\";\n  COLOR[COLOR[\"BLUE\"] = 34] = \"BLUE\";\n  COLOR[COLOR[\"MAGENTA\"] = 35] = \"MAGENTA\";\n  COLOR[COLOR[\"CYAN\"] = 36] = \"CYAN\";\n  COLOR[COLOR[\"WHITE\"] = 37] = \"WHITE\";\n  COLOR[COLOR[\"BRIGHT_BLACK\"] = 90] = \"BRIGHT_BLACK\";\n  COLOR[COLOR[\"BRIGHT_RED\"] = 91] = \"BRIGHT_RED\";\n  COLOR[COLOR[\"BRIGHT_GREEN\"] = 92] = \"BRIGHT_GREEN\";\n  COLOR[COLOR[\"BRIGHT_YELLOW\"] = 93] = \"BRIGHT_YELLOW\";\n  COLOR[COLOR[\"BRIGHT_BLUE\"] = 94] = \"BRIGHT_BLUE\";\n  COLOR[COLOR[\"BRIGHT_MAGENTA\"] = 95] = \"BRIGHT_MAGENTA\";\n  COLOR[COLOR[\"BRIGHT_CYAN\"] = 96] = \"BRIGHT_CYAN\";\n  COLOR[COLOR[\"BRIGHT_WHITE\"] = 97] = \"BRIGHT_WHITE\";\n})(COLOR || (COLOR = {}));\n\nfunction getColor(color) {\n  return typeof color === 'string' ? COLOR[color.toUpperCase()] || COLOR.WHITE : color;\n}\n\nexport function addColor(string, color, background) {\n  if (!isBrowser && typeof string === 'string') {\n    if (color) {\n      color = getColor(color);\n      string = \"\\x1B[\".concat(color, \"m\").concat(string, \"\\x1B[39m\");\n    }\n\n    if (background) {\n      color = getColor(background);\n      string = \"\\x1B[\".concat(background + 10, \"m\").concat(string, \"\\x1B[49m\");\n    }\n  }\n\n  return string;\n}\n//# sourceMappingURL=color.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'Assertion failed');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { window, process, isBrowser } from '@probe.gl/env';\nexport function getHiResTimestamp() {\n  let timestamp;\n\n  if (isBrowser && 'performance' in window) {\n    var _window$performance, _window$performance$n;\n\n    timestamp = window === null || window === void 0 ? void 0 : (_window$performance = window.performance) === null || _window$performance === void 0 ? void 0 : (_window$performance$n = _window$performance.now) === null || _window$performance$n === void 0 ? void 0 : _window$performance$n.call(_window$performance);\n  } else if ('hrtime' in process) {\n    var _process$hrtime;\n\n    const timeParts = process === null || process === void 0 ? void 0 : (_process$hrtime = process.hrtime) === null || _process$hrtime === void 0 ? void 0 : _process$hrtime.call(process);\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { VERSION, isBrowser } from '@probe.gl/env';\nimport LocalStorage from './utils/local-storage';\nimport { formatImage, formatTime, leftPad } from './utils/formatters';\nimport { addColor } from './utils/color';\nimport { autobind } from './utils/autobind';\nimport assert from './utils/assert';\nimport { getHiResTimestamp } from './utils/hi-res-timestamp';\nimport * as asciify from './node/node-asciify-image';\nconst originalConsole = {\n  debug: isBrowser ? console.debug || console.log : console.log,\n  log: console.log,\n  info: console.info,\n  warn: console.warn,\n  error: console.error\n};\nconst DEFAULT_SETTINGS = {\n  enabled: true,\n  level: 0\n};\n\nfunction noop() {}\n\nconst cache = {};\nconst ONCE = {\n  once: true\n};\nexport default class Log {\n  constructor() {\n    let {\n      id\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      id: ''\n    };\n\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"VERSION\", VERSION);\n\n    _defineProperty(this, \"_startTs\", getHiResTimestamp());\n\n    _defineProperty(this, \"_deltaTs\", getHiResTimestamp());\n\n    _defineProperty(this, \"_storage\", void 0);\n\n    _defineProperty(this, \"userData\", {});\n\n    _defineProperty(this, \"LOG_THROTTLE_TIMEOUT\", 0);\n\n    this.id = id;\n    this._storage = new LocalStorage(\"__probe-\".concat(this.id, \"__\"), DEFAULT_SETTINGS);\n    this.userData = {};\n    this.timeStamp(\"\".concat(this.id, \" started\"));\n    autobind(this);\n    Object.seal(this);\n  }\n\n  set level(newLevel) {\n    this.setLevel(newLevel);\n  }\n\n  get level() {\n    return this.getLevel();\n  }\n\n  isEnabled() {\n    return this._storage.config.enabled;\n  }\n\n  getLevel() {\n    return this._storage.config.level;\n  }\n\n  getTotal() {\n    return Number((getHiResTimestamp() - this._startTs).toPrecision(10));\n  }\n\n  getDelta() {\n    return Number((getHiResTimestamp() - this._deltaTs).toPrecision(10));\n  }\n\n  set priority(newPriority) {\n    this.level = newPriority;\n  }\n\n  get priority() {\n    return this.level;\n  }\n\n  getPriority() {\n    return this.level;\n  }\n\n  enable() {\n    let enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n    this._storage.updateConfiguration({\n      enabled\n    });\n\n    return this;\n  }\n\n  setLevel(level) {\n    this._storage.updateConfiguration({\n      level\n    });\n\n    return this;\n  }\n\n  get(setting) {\n    return this._storage.config[setting];\n  }\n\n  set(setting, value) {\n    this._storage.updateConfiguration({\n      [setting]: value\n    });\n  }\n\n  settings() {\n    if (console.table) {\n      console.table(this._storage.config);\n    } else {\n      console.log(this._storage.config);\n    }\n  }\n\n  assert(condition, message) {\n    assert(condition, message);\n  }\n\n  warn(message) {\n    return this._getLogFunction(0, message, originalConsole.warn, arguments, ONCE);\n  }\n\n  error(message) {\n    return this._getLogFunction(0, message, originalConsole.error, arguments);\n  }\n\n  deprecated(oldUsage, newUsage) {\n    return this.warn(\"`\".concat(oldUsage, \"` is deprecated and will be removed in a later version. Use `\").concat(newUsage, \"` instead\"));\n  }\n\n  removed(oldUsage, newUsage) {\n    return this.error(\"`\".concat(oldUsage, \"` has been removed. Use `\").concat(newUsage, \"` instead\"));\n  }\n\n  probe(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.log, arguments, {\n      time: true,\n      once: true\n    });\n  }\n\n  log(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.debug, arguments);\n  }\n\n  info(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.info, arguments);\n  }\n\n  once(logLevel, message) {\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    return this._getLogFunction(logLevel, message, originalConsole.debug || originalConsole.info, arguments, ONCE);\n  }\n\n  table(logLevel, table, columns) {\n    if (table) {\n      return this._getLogFunction(logLevel, table, console.table || noop, columns && [columns], {\n        tag: getTableHeader(table)\n      });\n    }\n\n    return noop;\n  }\n\n  image(_ref) {\n    let {\n      logLevel,\n      priority,\n      image,\n      message = '',\n      scale = 1\n    } = _ref;\n\n    if (!this._shouldLog(logLevel || priority)) {\n      return noop;\n    }\n\n    return isBrowser ? logImageInBrowser({\n      image,\n      message,\n      scale\n    }) : logImageInNode({\n      image,\n      message,\n      scale\n    });\n  }\n\n  time(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.time ? console.time : console.info);\n  }\n\n  timeEnd(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.timeEnd ? console.timeEnd : console.info);\n  }\n\n  timeStamp(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.timeStamp || noop);\n  }\n\n  group(logLevel, message) {\n    let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n      collapsed: false\n    };\n    const options = normalizeArguments({\n      logLevel,\n      message,\n      opts\n    });\n    const {\n      collapsed\n    } = opts;\n    options.method = (collapsed ? console.groupCollapsed : console.group) || console.info;\n    return this._getLogFunction(options);\n  }\n\n  groupCollapsed(logLevel, message) {\n    let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return this.group(logLevel, message, Object.assign({}, opts, {\n      collapsed: true\n    }));\n  }\n\n  groupEnd(logLevel) {\n    return this._getLogFunction(logLevel, '', console.groupEnd || noop);\n  }\n\n  withGroup(logLevel, message, func) {\n    this.group(logLevel, message)();\n\n    try {\n      func();\n    } finally {\n      this.groupEnd(logLevel)();\n    }\n  }\n\n  trace() {\n    if (console.trace) {\n      console.trace();\n    }\n  }\n\n  _shouldLog(logLevel) {\n    return this.isEnabled() && this.getLevel() >= normalizeLogLevel(logLevel);\n  }\n\n  _getLogFunction(logLevel, message, method, args, opts) {\n    if (this._shouldLog(logLevel)) {\n      opts = normalizeArguments({\n        logLevel,\n        message,\n        args,\n        opts\n      });\n      method = method || opts.method;\n      assert(method);\n      opts.total = this.getTotal();\n      opts.delta = this.getDelta();\n      this._deltaTs = getHiResTimestamp();\n      const tag = opts.tag || opts.message;\n\n      if (opts.once) {\n        if (!cache[tag]) {\n          cache[tag] = getHiResTimestamp();\n        } else {\n          return noop;\n        }\n      }\n\n      message = decorateMessage(this.id, opts.message, opts);\n      return method.bind(console, message, ...opts.args);\n    }\n\n    return noop;\n  }\n\n}\n\n_defineProperty(Log, \"VERSION\", VERSION);\n\nfunction normalizeLogLevel(logLevel) {\n  if (!logLevel) {\n    return 0;\n  }\n\n  let resolvedLevel;\n\n  switch (typeof logLevel) {\n    case 'number':\n      resolvedLevel = logLevel;\n      break;\n\n    case 'object':\n      resolvedLevel = logLevel.logLevel || logLevel.priority || 0;\n      break;\n\n    default:\n      return 0;\n  }\n\n  assert(Number.isFinite(resolvedLevel) && resolvedLevel >= 0);\n  return resolvedLevel;\n}\n\nexport function normalizeArguments(opts) {\n  const {\n    logLevel,\n    message\n  } = opts;\n  opts.logLevel = normalizeLogLevel(logLevel);\n  const args = opts.args ? Array.from(opts.args) : [];\n\n  while (args.length && args.shift() !== message) {}\n\n  switch (typeof logLevel) {\n    case 'string':\n    case 'function':\n      if (message !== undefined) {\n        args.unshift(message);\n      }\n\n      opts.message = logLevel;\n      break;\n\n    case 'object':\n      Object.assign(opts, logLevel);\n      break;\n\n    default:\n  }\n\n  if (typeof opts.message === 'function') {\n    opts.message = opts.message();\n  }\n\n  const messageType = typeof opts.message;\n  assert(messageType === 'string' || messageType === 'object');\n  return Object.assign(opts, {\n    args\n  }, opts.opts);\n}\n\nfunction decorateMessage(id, message, opts) {\n  if (typeof message === 'string') {\n    const time = opts.time ? leftPad(formatTime(opts.total)) : '';\n    message = opts.time ? \"\".concat(id, \": \").concat(time, \"  \").concat(message) : \"\".concat(id, \": \").concat(message);\n    message = addColor(message, opts.color, opts.background);\n  }\n\n  return message;\n}\n\nfunction logImageInNode(_ref2) {\n  let {\n    image,\n    message = '',\n    scale = 1\n  } = _ref2;\n  asciify.nodeAsciifyImage({\n    image,\n    message,\n    scale\n  });\n  return noop;\n}\n\nfunction logImageInBrowser(_ref3) {\n  let {\n    image,\n    message = '',\n    scale = 1\n  } = _ref3;\n\n  if (typeof image === 'string') {\n    const img = new Image();\n\n    img.onload = () => {\n      const args = formatImage(img, message, scale);\n      console.log(...args);\n    };\n\n    img.src = image;\n    return noop;\n  }\n\n  const element = image.nodeName || '';\n\n  if (element.toLowerCase() === 'img') {\n    console.log(...formatImage(image, message, scale));\n    return noop;\n  }\n\n  if (element.toLowerCase() === 'canvas') {\n    const img = new Image();\n\n    img.onload = () => console.log(...formatImage(img, message, scale));\n\n    img.src = image.toDataURL();\n    return noop;\n  }\n\n  return noop;\n}\n\nfunction getTableHeader(table) {\n  for (const key in table) {\n    for (const title in table[key]) {\n      return title || 'untitled';\n    }\n  }\n\n  return 'empty';\n}\n//# sourceMappingURL=log.js.map","export function autobind(obj) {\n  let predefined = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['constructor'];\n  const proto = Object.getPrototypeOf(obj);\n  const propNames = Object.getOwnPropertyNames(proto);\n\n  for (const key of propNames) {\n    if (typeof obj[key] === 'function') {\n      if (!predefined.find(name => key === name)) {\n        obj[key] = obj[key].bind(obj);\n      }\n    }\n  }\n}\n//# sourceMappingURL=autobind.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Log } from 'probe.gl';\nexport const probeLog = new Log({\n  id: 'loaders.gl'\n});\nexport class NullLog {\n  log() {\n    return () => {};\n  }\n\n  info() {\n    return () => {};\n  }\n\n  warn() {\n    return () => {};\n  }\n\n  error() {\n    return () => {};\n  }\n\n}\nexport class ConsoleLog {\n  constructor() {\n    _defineProperty(this, \"console\", void 0);\n\n    this.console = console;\n  }\n\n  log(...args) {\n    return this.console.log.bind(this.console, ...args);\n  }\n\n  info(...args) {\n    return this.console.info.bind(this.console, ...args);\n  }\n\n  warn(...args) {\n    return this.console.warn.bind(this.console, ...args);\n  }\n\n  error(...args) {\n    return this.console.error.bind(this.console, ...args);\n  }\n\n}\n//# sourceMappingURL=loggers.js.map","import { isBrowser } from '@loaders.gl/loader-utils';\nimport { ConsoleLog } from './loggers';\nexport const DEFAULT_LOADER_OPTIONS = {\n  fetch: null,\n  mimeType: undefined,\n  nothrow: false,\n  log: new ConsoleLog(),\n  CDN: 'https://unpkg.com/@loaders.gl',\n  worker: true,\n  maxConcurrency: 3,\n  maxMobileConcurrency: 1,\n  reuseWorkers: isBrowser,\n  _nodeWorkers: false,\n  _workerType: '',\n  limit: 0,\n  _limitMB: 0,\n  batchSize: 'auto',\n  batchDebounceMs: 0,\n  metadata: false,\n  transforms: []\n};\nexport const REMOVED_LOADER_OPTIONS = {\n  throws: 'nothrow',\n  dataType: '(no longer used)',\n  uri: 'baseUri',\n  method: 'fetch.method',\n  headers: 'fetch.headers',\n  body: 'fetch.body',\n  mode: 'fetch.mode',\n  credentials: 'fetch.credentials',\n  cache: 'fetch.cache',\n  redirect: 'fetch.redirect',\n  referrer: 'fetch.referrer',\n  referrerPolicy: 'fetch.referrerPolicy',\n  integrity: 'fetch.integrity',\n  keepalive: 'fetch.keepalive',\n  signal: 'fetch.signal'\n};\n//# sourceMappingURL=option-defaults.js.map","import { isPureObject, isObject } from '../../javascript-utils/is-type';\nimport { fetchFile } from '../fetch/fetch-file';\nimport { probeLog, NullLog } from './loggers';\nimport { DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS } from './option-defaults';\nexport function getGlobalLoaderState() {\n  globalThis.loaders = globalThis.loaders || {};\n  const {\n    loaders\n  } = globalThis;\n  loaders._state = loaders._state || {};\n  return loaders._state;\n}\nexport const getGlobalLoaderOptions = () => {\n  const state = getGlobalLoaderState();\n  state.globalOptions = state.globalOptions || { ...DEFAULT_LOADER_OPTIONS\n  };\n  return state.globalOptions;\n};\nexport function setGlobalOptions(options) {\n  const state = getGlobalLoaderState();\n  const globalOptions = getGlobalLoaderOptions();\n  state.globalOptions = normalizeOptionsInternal(globalOptions, options);\n}\nexport function normalizeOptions(options, loader, loaders, url) {\n  loaders = loaders || [];\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n  validateOptions(options, loaders);\n  return normalizeOptionsInternal(loader, options, url);\n}\nexport function getFetchFunction(options, context) {\n  const globalOptions = getGlobalLoaderOptions();\n  const fetchOptions = options || globalOptions;\n\n  if (typeof fetchOptions.fetch === 'function') {\n    return fetchOptions.fetch;\n  }\n\n  if (isObject(fetchOptions.fetch)) {\n    return url => fetchFile(url, fetchOptions);\n  }\n\n  if (context !== null && context !== void 0 && context.fetch) {\n    return context === null || context === void 0 ? void 0 : context.fetch;\n  }\n\n  return fetchFile;\n}\n\nfunction validateOptions(options, loaders) {\n  validateOptionsObject(options, null, DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS, loaders);\n\n  for (const loader of loaders) {\n    const idOptions = options && options[loader.id] || {};\n    const loaderOptions = loader.options && loader.options[loader.id] || {};\n    const deprecatedOptions = loader.deprecatedOptions && loader.deprecatedOptions[loader.id] || {};\n    validateOptionsObject(idOptions, loader.id, loaderOptions, deprecatedOptions, loaders);\n  }\n}\n\nfunction validateOptionsObject(options, id, defaultOptions, deprecatedOptions, loaders) {\n  const loaderName = id || 'Top level';\n  const prefix = id ? \"\".concat(id, \".\") : '';\n\n  for (const key in options) {\n    const isSubOptions = !id && isObject(options[key]);\n    const isBaseUriOption = key === 'baseUri' && !id;\n    const isWorkerUrlOption = key === 'workerUrl' && id;\n\n    if (!(key in defaultOptions) && !isBaseUriOption && !isWorkerUrlOption) {\n      if (key in deprecatedOptions) {\n        probeLog.warn(\"\".concat(loaderName, \" loader option '\").concat(prefix).concat(key, \"' no longer supported, use '\").concat(deprecatedOptions[key], \"'\"))();\n      } else if (!isSubOptions) {\n        const suggestion = findSimilarOption(key, loaders);\n        probeLog.warn(\"\".concat(loaderName, \" loader option '\").concat(prefix).concat(key, \"' not recognized. \").concat(suggestion))();\n      }\n    }\n  }\n}\n\nfunction findSimilarOption(optionKey, loaders) {\n  const lowerCaseOptionKey = optionKey.toLowerCase();\n  let bestSuggestion = '';\n\n  for (const loader of loaders) {\n    for (const key in loader.options) {\n      if (optionKey === key) {\n        return \"Did you mean '\".concat(loader.id, \".\").concat(key, \"'?\");\n      }\n\n      const lowerCaseKey = key.toLowerCase();\n      const isPartialMatch = lowerCaseOptionKey.startsWith(lowerCaseKey) || lowerCaseKey.startsWith(lowerCaseOptionKey);\n\n      if (isPartialMatch) {\n        bestSuggestion = bestSuggestion || \"Did you mean '\".concat(loader.id, \".\").concat(key, \"'?\");\n      }\n    }\n  }\n\n  return bestSuggestion;\n}\n\nfunction normalizeOptionsInternal(loader, options, url) {\n  const loaderDefaultOptions = loader.options || {};\n  const mergedOptions = { ...loaderDefaultOptions\n  };\n  addUrlOptions(mergedOptions, url);\n\n  if (mergedOptions.log === null) {\n    mergedOptions.log = new NullLog();\n  }\n\n  mergeNestedFields(mergedOptions, getGlobalLoaderOptions());\n  mergeNestedFields(mergedOptions, options);\n  return mergedOptions;\n}\n\nfunction mergeNestedFields(mergedOptions, options) {\n  for (const key in options) {\n    if (key in options) {\n      const value = options[key];\n\n      if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n        mergedOptions[key] = { ...mergedOptions[key],\n          ...options[key]\n        };\n      } else {\n        mergedOptions[key] = options[key];\n      }\n    }\n  }\n}\n\nfunction addUrlOptions(options, url) {\n  if (url && !('baseUri' in options)) {\n    options.baseUri = url;\n  }\n}\n//# sourceMappingURL=option-utils.js.map","import { assert } from '@loaders.gl/loader-utils';\nexport function isLoaderObject(loader) {\n  var _loader;\n\n  if (!loader) {\n    return false;\n  }\n\n  if (Array.isArray(loader)) {\n    loader = loader[0];\n  }\n\n  const hasExtensions = Array.isArray((_loader = loader) === null || _loader === void 0 ? void 0 : _loader.extensions);\n  return hasExtensions;\n}\nexport function normalizeLoader(loader) {\n  var _loader2, _loader3;\n\n  assert(loader, 'null loader');\n  assert(isLoaderObject(loader), 'invalid loader');\n  let options;\n\n  if (Array.isArray(loader)) {\n    options = loader[1];\n    loader = loader[0];\n    loader = { ...loader,\n      options: { ...loader.options,\n        ...options\n      }\n    };\n  }\n\n  if ((_loader2 = loader) !== null && _loader2 !== void 0 && _loader2.parseTextSync || (_loader3 = loader) !== null && _loader3 !== void 0 && _loader3.parseText) {\n    loader.text = true;\n  }\n\n  if (!loader.text) {\n    loader.binary = true;\n  }\n\n  return loader;\n}\n//# sourceMappingURL=normalize-loader.js.map","import { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { getGlobalLoaderState } from '../loader-utils/option-utils';\n\nconst getGlobalLoaderRegistry = () => {\n  const state = getGlobalLoaderState();\n  state.loaderRegistry = state.loaderRegistry || [];\n  return state.loaderRegistry;\n};\n\nexport function registerLoaders(loaders) {\n  const loaderRegistry = getGlobalLoaderRegistry();\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n\n  for (const loader of loaders) {\n    const normalizedLoader = normalizeLoader(loader);\n\n    if (!loaderRegistry.find(registeredLoader => normalizedLoader === registeredLoader)) {\n      loaderRegistry.unshift(normalizedLoader);\n    }\n  }\n}\nexport function getRegisteredLoaders() {\n  return getGlobalLoaderRegistry();\n}\nexport function _unregisterLoaders() {\n  const state = getGlobalLoaderState();\n  state.loaderRegistry = [];\n}\n//# sourceMappingURL=register-loaders.js.map","import { Log } from '@probe.gl/log';\nexport const log = new Log({\n  id: 'loaders.gl'\n});\n//# sourceMappingURL=log.js.map","import { compareArrayBuffers, path } from '@loaders.gl/loader-utils';\nimport { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { log } from '../utils/log';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { getRegisteredLoaders } from './register-loaders';\nimport { isBlob } from '../../javascript-utils/is-type';\nconst EXT_PATTERN = /\\.([^.]+)$/;\nexport async function selectLoader(data, loaders = [], options, context) {\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n\n  let loader = selectLoaderSync(data, loaders, { ...options,\n    nothrow: true\n  }, context);\n\n  if (loader) {\n    return loader;\n  }\n\n  if (isBlob(data)) {\n    data = await data.slice(0, 10).arrayBuffer();\n    loader = selectLoaderSync(data, loaders, options, context);\n  }\n\n  if (!loader && !(options !== null && options !== void 0 && options.nothrow)) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\nexport function selectLoaderSync(data, loaders = [], options, context) {\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n\n  if (loaders && !Array.isArray(loaders)) {\n    return normalizeLoader(loaders);\n  }\n\n  let candidateLoaders = [];\n\n  if (loaders) {\n    candidateLoaders = candidateLoaders.concat(loaders);\n  }\n\n  if (!(options !== null && options !== void 0 && options.ignoreRegisteredLoaders)) {\n    candidateLoaders.push(...getRegisteredLoaders());\n  }\n\n  normalizeLoaders(candidateLoaders);\n  const loader = selectLoaderInternal(data, candidateLoaders, options, context);\n\n  if (!loader && !(options !== null && options !== void 0 && options.nothrow)) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\n\nfunction selectLoaderInternal(data, loaders, options, context) {\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(data);\n  const testUrl = url || (context === null || context === void 0 ? void 0 : context.url);\n  let loader = null;\n  let reason = '';\n\n  if (options !== null && options !== void 0 && options.mimeType) {\n    loader = findLoaderByMIMEType(loaders, options === null || options === void 0 ? void 0 : options.mimeType);\n    reason = \"match forced by supplied MIME type \".concat(options === null || options === void 0 ? void 0 : options.mimeType);\n  }\n\n  loader = loader || findLoaderByUrl(loaders, testUrl);\n  reason = reason || (loader ? \"matched url \".concat(testUrl) : '');\n  loader = loader || findLoaderByMIMEType(loaders, type);\n  reason = reason || (loader ? \"matched MIME type \".concat(type) : '');\n  loader = loader || findLoaderByInitialBytes(loaders, data);\n  reason = reason || (loader ? \"matched initial data \".concat(getFirstCharacters(data)) : '');\n  loader = loader || findLoaderByMIMEType(loaders, options === null || options === void 0 ? void 0 : options.fallbackMimeType);\n  reason = reason || (loader ? \"matched fallback MIME type \".concat(type) : '');\n\n  if (reason) {\n    var _loader;\n\n    log.log(1, \"selectLoader selected \".concat((_loader = loader) === null || _loader === void 0 ? void 0 : _loader.name, \": \").concat(reason, \".\"));\n  }\n\n  return loader;\n}\n\nfunction validHTTPResponse(data) {\n  if (data instanceof Response) {\n    if (data.status === 204) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getNoValidLoaderMessage(data) {\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(data);\n  let message = 'No valid loader found (';\n  message += url ? \"\".concat(path.filename(url), \", \") : 'no url provided, ';\n  message += \"MIME type: \".concat(type ? \"\\\"\".concat(type, \"\\\"\") : 'not provided', \", \");\n  const firstCharacters = data ? getFirstCharacters(data) : '';\n  message += firstCharacters ? \" first bytes: \\\"\".concat(firstCharacters, \"\\\"\") : 'first bytes: not available';\n  message += ')';\n  return message;\n}\n\nfunction normalizeLoaders(loaders) {\n  for (const loader of loaders) {\n    normalizeLoader(loader);\n  }\n}\n\nfunction findLoaderByUrl(loaders, url) {\n  const match = url && EXT_PATTERN.exec(url);\n  const extension = match && match[1];\n  return extension ? findLoaderByExtension(loaders, extension) : null;\n}\n\nfunction findLoaderByExtension(loaders, extension) {\n  extension = extension.toLowerCase();\n\n  for (const loader of loaders) {\n    for (const loaderExtension of loader.extensions) {\n      if (loaderExtension.toLowerCase() === extension) {\n        return loader;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByMIMEType(loaders, mimeType) {\n  for (const loader of loaders) {\n    if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n      return loader;\n    }\n\n    if (mimeType === \"application/x.\".concat(loader.id)) {\n      return loader;\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByInitialBytes(loaders, data) {\n  if (!data) {\n    return null;\n  }\n\n  for (const loader of loaders) {\n    if (typeof data === 'string') {\n      if (testDataAgainstText(data, loader)) {\n        return loader;\n      }\n    } else if (ArrayBuffer.isView(data)) {\n      if (testDataAgainstBinary(data.buffer, data.byteOffset, loader)) {\n        return loader;\n      }\n    } else if (data instanceof ArrayBuffer) {\n      const byteOffset = 0;\n\n      if (testDataAgainstBinary(data, byteOffset, loader)) {\n        return loader;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction testDataAgainstText(data, loader) {\n  if (loader.testText) {\n    return loader.testText(data);\n  }\n\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some(test => data.startsWith(test));\n}\n\nfunction testDataAgainstBinary(data, byteOffset, loader) {\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some(test => testBinary(data, byteOffset, loader, test));\n}\n\nfunction testBinary(data, byteOffset, loader, test) {\n  if (test instanceof ArrayBuffer) {\n    return compareArrayBuffers(test, data, test.byteLength);\n  }\n\n  switch (typeof test) {\n    case 'function':\n      return test(data, loader);\n\n    case 'string':\n      const magic = getMagicString(data, byteOffset, test.length);\n      return test === magic;\n\n    default:\n      return false;\n  }\n}\n\nfunction getFirstCharacters(data, length = 5) {\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    const byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\n\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength < byteOffset + length) {\n    return '';\n  }\n\n  const dataView = new DataView(arrayBuffer);\n  let magic = '';\n\n  for (let i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}\n//# sourceMappingURL=select-loader.js.map","export function filename(url) {\n  const slashIndex = url && url.lastIndexOf('/');\n  return slashIndex >= 0 ? url.substr(slashIndex + 1) : '';\n}\nexport function dirname(url) {\n  const slashIndex = url && url.lastIndexOf('/');\n  return slashIndex >= 0 ? url.substr(0, slashIndex) : '';\n}\nexport function join(...parts) {\n  const separator = '/';\n  parts = parts.map((part, index) => {\n    if (index) {\n      part = part.replace(new RegExp(\"^\".concat(separator)), '');\n    }\n\n    if (index !== parts.length - 1) {\n      part = part.replace(new RegExp(\"\".concat(separator, \"$\")), '');\n    }\n\n    return part;\n  });\n  return parts.join(separator);\n}\n//# sourceMappingURL=path.js.map","const DEFAULT_CHUNK_SIZE = 256 * 1024;\nexport function* makeArrayBufferIterator(arrayBuffer, options = {}) {\n  const {\n    chunkSize = DEFAULT_CHUNK_SIZE\n  } = options;\n  let byteOffset = 0;\n\n  while (byteOffset < arrayBuffer.byteLength) {\n    const chunkByteLength = Math.min(arrayBuffer.byteLength - byteOffset, chunkSize);\n    const chunk = new ArrayBuffer(chunkByteLength);\n    const sourceArray = new Uint8Array(arrayBuffer, byteOffset, chunkByteLength);\n    const chunkArray = new Uint8Array(chunk);\n    chunkArray.set(sourceArray);\n    byteOffset += chunkByteLength;\n    yield chunk;\n  }\n}\n//# sourceMappingURL=make-array-buffer-iterator.js.map","import { isBrowser, toArrayBuffer } from '@loaders.gl/loader-utils';\nexport function makeStreamIterator(stream, options) {\n  return isBrowser ? makeBrowserStreamIterator(stream, options) : makeNodeStreamIterator(stream, options);\n}\n\nasync function* makeBrowserStreamIterator(stream, options) {\n  const reader = stream.getReader();\n  let nextBatchPromise;\n\n  try {\n    while (true) {\n      const currentBatchPromise = nextBatchPromise || reader.read();\n\n      if (options !== null && options !== void 0 && options._streamReadAhead) {\n        nextBatchPromise = reader.read();\n      }\n\n      const {\n        done,\n        value\n      } = await currentBatchPromise;\n\n      if (done) {\n        return;\n      }\n\n      yield toArrayBuffer(value);\n    }\n  } catch (error) {\n    reader.releaseLock();\n  }\n}\n\nasync function* makeNodeStreamIterator(stream, options) {\n  for await (const chunk of stream) {\n    yield toArrayBuffer(chunk);\n  }\n}\n//# sourceMappingURL=make-stream-iterator.js.map","import { makeStringIterator } from './make-string-iterator';\nimport { makeArrayBufferIterator } from './make-array-buffer-iterator';\nimport { makeBlobIterator } from './make-blob-iterator';\nimport { makeStreamIterator } from './make-stream-iterator';\nimport { isBlob, isReadableStream, isResponse } from '../../javascript-utils/is-type';\nexport function makeIterator(data, options) {\n  if (typeof data === 'string') {\n    return makeStringIterator(data, options);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return makeArrayBufferIterator(data, options);\n  }\n\n  if (isBlob(data)) {\n    return makeBlobIterator(data, options);\n  }\n\n  if (isReadableStream(data)) {\n    return makeStreamIterator(data, options);\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    return makeStreamIterator(response.body, options);\n  }\n\n  throw new Error('makeIterator');\n}\n//# sourceMappingURL=make-iterator.js.map","const DEFAULT_CHUNK_SIZE = 256 * 1024;\nexport function* makeStringIterator(string, options) {\n  const chunkSize = (options === null || options === void 0 ? void 0 : options.chunkSize) || DEFAULT_CHUNK_SIZE;\n  let offset = 0;\n  const textEncoder = new TextEncoder();\n\n  while (offset < string.length) {\n    const chunkLength = Math.min(string.length - offset, chunkSize);\n    const chunk = string.slice(offset, offset + chunkLength);\n    offset += chunkLength;\n    yield textEncoder.encode(chunk);\n  }\n}\n//# sourceMappingURL=make-string-iterator.js.map","const DEFAULT_CHUNK_SIZE = 1024 * 1024;\nexport async function* makeBlobIterator(blob, options) {\n  const chunkSize = (options === null || options === void 0 ? void 0 : options.chunkSize) || DEFAULT_CHUNK_SIZE;\n  let offset = 0;\n\n  while (offset < blob.size) {\n    const end = offset + chunkSize;\n    const chunk = await blob.slice(offset, end).arrayBuffer();\n    offset = end;\n    yield chunk;\n  }\n}\n//# sourceMappingURL=make-blob-iterator.js.map","import { concatenateArrayBuffersAsync } from '@loaders.gl/loader-utils';\nimport { isResponse, isReadableStream, isAsyncIterable, isIterable, isIterator, isBlob, isBuffer } from '../../javascript-utils/is-type';\nimport { makeIterator } from '../../iterators/make-iterator/make-iterator';\nimport { checkResponse, makeResponse } from '../utils/response-utils';\nconst ERR_DATA = 'Cannot convert supplied data type';\nexport function getArrayBufferOrStringFromDataSync(data, loader, options) {\n  if (loader.text && typeof data === 'string') {\n    return data;\n  }\n\n  if (isBuffer(data)) {\n    data = data.buffer;\n  }\n\n  if (data instanceof ArrayBuffer) {\n    const arrayBuffer = data;\n\n    if (loader.text && !loader.binary) {\n      const textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(arrayBuffer);\n    }\n\n    return arrayBuffer;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    if (loader.text && !loader.binary) {\n      const textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(data);\n    }\n\n    let arrayBuffer = data.buffer;\n    const byteLength = data.byteLength || data.length;\n\n    if (data.byteOffset !== 0 || byteLength !== arrayBuffer.byteLength) {\n      arrayBuffer = arrayBuffer.slice(data.byteOffset, data.byteOffset + byteLength);\n    }\n\n    return arrayBuffer;\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport async function getArrayBufferOrStringFromData(data, loader, options) {\n  const isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n\n  if (typeof data === 'string' || isArrayBuffer) {\n    return getArrayBufferOrStringFromDataSync(data, loader, options);\n  }\n\n  if (isBlob(data)) {\n    data = await makeResponse(data);\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    await checkResponse(response);\n    return loader.binary ? await response.arrayBuffer() : await response.text();\n  }\n\n  if (isReadableStream(data)) {\n    data = makeIterator(data, options);\n  }\n\n  if (isIterable(data) || isAsyncIterable(data)) {\n    return concatenateArrayBuffersAsync(data);\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport async function getAsyncIterableFromData(data, options) {\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    await checkResponse(response);\n    const body = await response.body;\n    return makeIterator(body, options);\n  }\n\n  if (isBlob(data) || isReadableStream(data)) {\n    return makeIterator(data, options);\n  }\n\n  if (isAsyncIterable(data)) {\n    return data[Symbol.asyncIterator]();\n  }\n\n  return getIterableFromData(data);\n}\nexport async function getReadableStream(data) {\n  if (isReadableStream(data)) {\n    return data;\n  }\n\n  if (isResponse(data)) {\n    return data.body;\n  }\n\n  const response = await makeResponse(data);\n  return response.body;\n}\n\nfunction getIterableFromData(data) {\n  if (ArrayBuffer.isView(data)) {\n    return function* oneChunk() {\n      yield data.buffer;\n    }();\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return function* oneChunk() {\n      yield data;\n    }();\n  }\n\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isIterable(data)) {\n    return data[Symbol.iterator]();\n  }\n\n  throw new Error(ERR_DATA);\n}\n//# sourceMappingURL=get-data.js.map","import { assert, validateWorkerVersion } from '@loaders.gl/worker-utils';\nimport { parseWithWorker, canParseWithWorker } from '@loaders.gl/loader-utils';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { isResponse } from '../../javascript-utils/is-type';\nimport { normalizeOptions } from '../loader-utils/option-utils';\nimport { getArrayBufferOrStringFromData } from '../loader-utils/get-data';\nimport { getLoaderContext, getLoadersFromContext } from '../loader-utils/loader-context';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { selectLoader } from './select-loader';\nexport async function parse(data, loaders, options, context) {\n  assert(!context || typeof context === 'object');\n\n  if (loaders && !Array.isArray(loaders) && !isLoaderObject(loaders)) {\n    context = undefined;\n    options = loaders;\n    loaders = undefined;\n  }\n\n  data = await data;\n  options = options || {};\n  const {\n    url\n  } = getResourceUrlAndType(data);\n  const typedLoaders = loaders;\n  const candidateLoaders = getLoadersFromContext(typedLoaders, context);\n  const loader = await selectLoader(data, candidateLoaders, options);\n\n  if (!loader) {\n    return null;\n  }\n\n  options = normalizeOptions(options, loader, candidateLoaders, url);\n  context = getLoaderContext({\n    url,\n    parse,\n    loaders: candidateLoaders\n  }, options, context);\n  return await parseWithLoader(loader, data, options, context);\n}\n\nasync function parseWithLoader(loader, data, options, context) {\n  validateWorkerVersion(loader);\n\n  if (isResponse(data)) {\n    const response = data;\n    const {\n      ok,\n      redirected,\n      status,\n      statusText,\n      type,\n      url\n    } = response;\n    const headers = Object.fromEntries(response.headers.entries());\n    context.response = {\n      headers,\n      ok,\n      redirected,\n      status,\n      statusText,\n      type,\n      url\n    };\n  }\n\n  data = await getArrayBufferOrStringFromData(data, loader, options);\n\n  if (loader.parseTextSync && typeof data === 'string') {\n    options.dataType = 'text';\n    return loader.parseTextSync(data, options, context, loader);\n  }\n\n  if (canParseWithWorker(loader, options)) {\n    return await parseWithWorker(loader, data, options, context, parse);\n  }\n\n  if (loader.parseText && typeof data === 'string') {\n    return await loader.parseText(data, options, context, loader);\n  }\n\n  if (loader.parse) {\n    return await loader.parse(data, options, context, loader);\n  }\n\n  assert(!loader.parseSync);\n  throw new Error(\"\".concat(loader.id, \" loader - no parser found and worker is disabled\"));\n}\n//# sourceMappingURL=parse.js.map","import { getFetchFunction } from './option-utils';\nexport function getLoaderContext(context, options, previousContext = null) {\n  if (previousContext) {\n    return previousContext;\n  }\n\n  const resolvedContext = {\n    fetch: getFetchFunction(options, context),\n    ...context\n  };\n\n  if (!Array.isArray(resolvedContext.loaders)) {\n    resolvedContext.loaders = null;\n  }\n\n  return resolvedContext;\n}\nexport function getLoadersFromContext(loaders, context) {\n  if (!context && loaders && !Array.isArray(loaders)) {\n    return loaders;\n  }\n\n  let candidateLoaders;\n\n  if (loaders) {\n    candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n  }\n\n  if (context && context.loaders) {\n    const contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n    candidateLoaders = candidateLoaders ? [...candidateLoaders, ...contextLoaders] : contextLoaders;\n  }\n\n  return candidateLoaders && candidateLoaders.length ? candidateLoaders : null;\n}\n//# sourceMappingURL=loader-context.js.map","import { assert } from '../env-utils/assert';\nimport { VERSION } from '../env-utils/version';\nexport function validateWorkerVersion(worker, coreVersion = VERSION) {\n  assert(worker, 'no worker provided');\n  const workerVersion = worker.version;\n\n  if (!coreVersion || !workerVersion) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction parseVersion(version) {\n  const parts = version.split('.').map(Number);\n  return {\n    major: parts[0],\n    minor: parts[1]\n  };\n}\n//# sourceMappingURL=validate-worker-version.js.map","const DEFAULT_VERSION = 'latest';\nexport const VERSION = typeof \"3.2.11\" !== 'undefined' ? \"3.2.11\" : DEFAULT_VERSION;\n\nif (typeof \"3.2.11\" === 'undefined') {\n  console.error('loaders.gl: The __VERSION__ variable is not injected using babel plugin. Latest unstable workers would be fetched from the CDN.');\n}\n//# sourceMappingURL=version.js.map","import { isBlob } from '../../javascript-utils/is-type';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { getFetchFunction } from '../loader-utils/option-utils';\nimport { parse } from './parse';\nexport async function load(url, loaders, options, context) {\n  if (!Array.isArray(loaders) && !isLoaderObject(loaders)) {\n    context = undefined;\n    options = loaders;\n    loaders = undefined;\n  }\n\n  const fetch = getFetchFunction(options);\n  let data = url;\n\n  if (typeof url === 'string') {\n    data = await fetch(url);\n  }\n\n  if (isBlob(url)) {\n    data = await fetch(url);\n  }\n\n  return await parse(data, loaders, options);\n}\n//# sourceMappingURL=load.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = Boolean(typeof process !== 'object' || String(process) !== '[object process]' || process.browser);\nexport const isWorker = typeof importScripts === 'function';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","import { isBrowser } from '@loaders.gl/loader-utils';\nconst {\n  _parseImageNode\n} = globalThis;\nconst IMAGE_SUPPORTED = typeof Image !== 'undefined';\nconst IMAGE_BITMAP_SUPPORTED = typeof ImageBitmap !== 'undefined';\nconst NODE_IMAGE_SUPPORTED = Boolean(_parseImageNode);\nconst DATA_SUPPORTED = isBrowser ? true : NODE_IMAGE_SUPPORTED;\nexport function isImageTypeSupported(type) {\n  switch (type) {\n    case 'auto':\n      return IMAGE_BITMAP_SUPPORTED || IMAGE_SUPPORTED || DATA_SUPPORTED;\n\n    case 'imagebitmap':\n      return IMAGE_BITMAP_SUPPORTED;\n\n    case 'image':\n      return IMAGE_SUPPORTED;\n\n    case 'data':\n      return DATA_SUPPORTED;\n\n    default:\n      throw new Error(\"@loaders.gl/images: image \".concat(type, \" not supported in this environment\"));\n  }\n}\nexport function getDefaultImageType() {\n  if (IMAGE_BITMAP_SUPPORTED) {\n    return 'imagebitmap';\n  }\n\n  if (IMAGE_SUPPORTED) {\n    return 'image';\n  }\n\n  if (DATA_SUPPORTED) {\n    return 'data';\n  }\n\n  throw new Error('Install \\'@loaders.gl/polyfills\\' to parse images under Node.js');\n}\n//# sourceMappingURL=image-type.js.map","export function isImage(image) {\n  return Boolean(getImageTypeOrNull(image));\n}\nexport function deleteImage(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n      image.close();\n      break;\n\n    default:\n  }\n}\nexport function getImageType(image) {\n  const format = getImageTypeOrNull(image);\n\n  if (!format) {\n    throw new Error('Not an image');\n  }\n\n  return format;\n}\nexport function getImageSize(image) {\n  return getImageData(image);\n}\nexport function getImageData(image) {\n  switch (getImageType(image)) {\n    case 'data':\n      return image;\n\n    case 'image':\n    case 'imagebitmap':\n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n\n      if (!context) {\n        throw new Error('getImageData');\n      }\n\n      canvas.width = image.width;\n      canvas.height = image.height;\n      context.drawImage(image, 0, 0);\n      return context.getImageData(0, 0, image.width, image.height);\n\n    default:\n      throw new Error('getImageData');\n  }\n}\n\nfunction getImageTypeOrNull(image) {\n  if (typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    return 'imagebitmap';\n  }\n\n  if (typeof Image !== 'undefined' && image instanceof Image) {\n    return 'image';\n  }\n\n  if (image && typeof image === 'object' && image.data && image.width && image.height) {\n    return 'data';\n  }\n\n  return null;\n}\n//# sourceMappingURL=parsed-image-api.js.map","const SVG_DATA_URL_PATTERN = /^data:image\\/svg\\+xml/;\nconst SVG_URL_PATTERN = /\\.svg((\\?|#).*)?$/;\nexport function isSVG(url) {\n  return url && (SVG_DATA_URL_PATTERN.test(url) || SVG_URL_PATTERN.test(url));\n}\nexport function getBlobOrSVGDataUrl(arrayBuffer, url) {\n  if (isSVG(url)) {\n    const textDecoder = new TextDecoder();\n    let xmlText = textDecoder.decode(arrayBuffer);\n\n    try {\n      if (typeof unescape === 'function' && typeof encodeURIComponent === 'function') {\n        xmlText = unescape(encodeURIComponent(xmlText));\n      }\n    } catch (error) {\n      throw new Error(error.message);\n    }\n\n    const src = \"data:image/svg+xml;base64,\".concat(btoa(xmlText));\n    return src;\n  }\n\n  return getBlob(arrayBuffer, url);\n}\nexport function getBlob(arrayBuffer, url) {\n  if (isSVG(url)) {\n    throw new Error('SVG cannot be parsed directly to imagebitmap');\n  }\n\n  return new Blob([new Uint8Array(arrayBuffer)]);\n}\n//# sourceMappingURL=svg-utils.js.map","import { getBlobOrSVGDataUrl } from './svg-utils';\nexport default async function parseToImage(arrayBuffer, options, url) {\n  const blobOrDataUrl = getBlobOrSVGDataUrl(arrayBuffer, url);\n  const URL = self.URL || self.webkitURL;\n  const objectUrl = typeof blobOrDataUrl !== 'string' && URL.createObjectURL(blobOrDataUrl);\n\n  try {\n    return await loadToImage(objectUrl || blobOrDataUrl, options);\n  } finally {\n    if (objectUrl) {\n      URL.revokeObjectURL(objectUrl);\n    }\n  }\n}\nexport async function loadToImage(url, options) {\n  const image = new Image();\n  image.src = url;\n\n  if (options.image && options.image.decode && image.decode) {\n    await image.decode();\n    return image;\n  }\n\n  return await new Promise((resolve, reject) => {\n    try {\n      image.onload = () => resolve(image);\n\n      image.onerror = err => reject(new Error(\"Could not load image \".concat(url, \": \").concat(err)));\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n//# sourceMappingURL=parse-to-image.js.map","import { isSVG, getBlob } from './svg-utils';\nimport parseToImage from './parse-to-image';\nconst EMPTY_OBJECT = {};\nlet imagebitmapOptionsSupported = true;\nexport default async function parseToImageBitmap(arrayBuffer, options, url) {\n  let blob;\n\n  if (isSVG(url)) {\n    const image = await parseToImage(arrayBuffer, options, url);\n    blob = image;\n  } else {\n    blob = getBlob(arrayBuffer, url);\n  }\n\n  const imagebitmapOptions = options && options.imagebitmap;\n  return await safeCreateImageBitmap(blob, imagebitmapOptions);\n}\n\nasync function safeCreateImageBitmap(blob, imagebitmapOptions = null) {\n  if (isEmptyObject(imagebitmapOptions) || !imagebitmapOptionsSupported) {\n    imagebitmapOptions = null;\n  }\n\n  if (imagebitmapOptions) {\n    try {\n      return await createImageBitmap(blob, imagebitmapOptions);\n    } catch (error) {\n      console.warn(error);\n      imagebitmapOptionsSupported = false;\n    }\n  }\n\n  return await createImageBitmap(blob);\n}\n\nfunction isEmptyObject(object) {\n  for (const key in object || EMPTY_OBJECT) {\n    return false;\n  }\n\n  return true;\n}\n//# sourceMappingURL=parse-to-image-bitmap.js.map","const BIG_ENDIAN = false;\nconst LITTLE_ENDIAN = true;\nexport function getBinaryImageMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  return getPngMetadata(dataView) || getJpegMetadata(dataView) || getGifMetadata(dataView) || getBmpMetadata(dataView);\n}\n\nfunction getPngMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isPng = dataView.byteLength >= 24 && dataView.getUint32(0, BIG_ENDIAN) === 0x89504e47;\n\n  if (!isPng) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/png',\n    width: dataView.getUint32(16, BIG_ENDIAN),\n    height: dataView.getUint32(20, BIG_ENDIAN)\n  };\n}\n\nfunction getGifMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isGif = dataView.byteLength >= 10 && dataView.getUint32(0, BIG_ENDIAN) === 0x47494638;\n\n  if (!isGif) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/gif',\n    width: dataView.getUint16(6, LITTLE_ENDIAN),\n    height: dataView.getUint16(8, LITTLE_ENDIAN)\n  };\n}\n\nexport function getBmpMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isBmp = dataView.byteLength >= 14 && dataView.getUint16(0, BIG_ENDIAN) === 0x424d && dataView.getUint32(2, LITTLE_ENDIAN) === dataView.byteLength;\n\n  if (!isBmp) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/bmp',\n    width: dataView.getUint32(18, LITTLE_ENDIAN),\n    height: dataView.getUint32(22, LITTLE_ENDIAN)\n  };\n}\n\nfunction getJpegMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isJpeg = dataView.byteLength >= 3 && dataView.getUint16(0, BIG_ENDIAN) === 0xffd8 && dataView.getUint8(2) === 0xff;\n\n  if (!isJpeg) {\n    return null;\n  }\n\n  const {\n    tableMarkers,\n    sofMarkers\n  } = getJpegMarkers();\n  let i = 2;\n\n  while (i + 9 < dataView.byteLength) {\n    const marker = dataView.getUint16(i, BIG_ENDIAN);\n\n    if (sofMarkers.has(marker)) {\n      return {\n        mimeType: 'image/jpeg',\n        height: dataView.getUint16(i + 5, BIG_ENDIAN),\n        width: dataView.getUint16(i + 7, BIG_ENDIAN)\n      };\n    }\n\n    if (!tableMarkers.has(marker)) {\n      return null;\n    }\n\n    i += 2;\n    i += dataView.getUint16(i, BIG_ENDIAN);\n  }\n\n  return null;\n}\n\nfunction getJpegMarkers() {\n  const tableMarkers = new Set([0xffdb, 0xffc4, 0xffcc, 0xffdd, 0xfffe]);\n\n  for (let i = 0xffe0; i < 0xfff0; ++i) {\n    tableMarkers.add(i);\n  }\n\n  const sofMarkers = new Set([0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc9, 0xffca, 0xffcb, 0xffcd, 0xffce, 0xffcf, 0xffde]);\n  return {\n    tableMarkers,\n    sofMarkers\n  };\n}\n\nfunction toDataView(data) {\n  if (data instanceof DataView) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return new DataView(data.buffer);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return new DataView(data);\n  }\n\n  throw new Error('toDataView');\n}\n//# sourceMappingURL=binary-image-api.js.map","import { VERSION } from './lib/utils/version';\nimport parseImage from './lib/parsers/parse-image';\nimport { getBinaryImageMetadata } from './lib/category-api/binary-image-api';\nconst EXTENSIONS = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'ico', 'svg'];\nconst MIME_TYPES = ['image/png', 'image/jpeg', 'image/gif', 'image/webp', 'image/bmp', 'image/vnd.microsoft.icon', 'image/svg+xml'];\nconst DEFAULT_IMAGE_LOADER_OPTIONS = {\n  image: {\n    type: 'auto',\n    decode: true\n  }\n};\nexport const ImageLoader = {\n  id: 'image',\n  module: 'images',\n  name: 'Images',\n  version: VERSION,\n  mimeTypes: MIME_TYPES,\n  extensions: EXTENSIONS,\n  parse: parseImage,\n  tests: [arrayBuffer => Boolean(getBinaryImageMetadata(new DataView(arrayBuffer)))],\n  options: DEFAULT_IMAGE_LOADER_OPTIONS\n};\nexport const _typecheckImageLoader = ImageLoader;\n//# sourceMappingURL=image-loader.js.map","export const VERSION = typeof \"3.2.12\" !== 'undefined' ? \"3.2.12\" : 'latest';\n//# sourceMappingURL=version.js.map","import { assert } from '@loaders.gl/loader-utils';\nimport { isImageTypeSupported, getDefaultImageType } from '../category-api/image-type';\nimport { getImageData } from '../category-api/parsed-image-api';\nimport parseToImage from './parse-to-image';\nimport parseToImageBitmap from './parse-to-image-bitmap';\nimport parseToNodeImage from './parse-to-node-image';\nexport default async function parseImage(arrayBuffer, options, context) {\n  options = options || {};\n  const imageOptions = options.image || {};\n  const imageType = imageOptions.type || 'auto';\n  const {\n    url\n  } = context || {};\n  const loadType = getLoadableImageType(imageType);\n  let image;\n\n  switch (loadType) {\n    case 'imagebitmap':\n      image = await parseToImageBitmap(arrayBuffer, options, url);\n      break;\n\n    case 'image':\n      image = await parseToImage(arrayBuffer, options, url);\n      break;\n\n    case 'data':\n      image = await parseToNodeImage(arrayBuffer, options);\n      break;\n\n    default:\n      assert(false);\n  }\n\n  if (imageType === 'data') {\n    image = getImageData(image);\n  }\n\n  return image;\n}\n\nfunction getLoadableImageType(type) {\n  switch (type) {\n    case 'auto':\n    case 'data':\n      return getDefaultImageType();\n\n    default:\n      isImageTypeSupported(type);\n      return type;\n  }\n}\n//# sourceMappingURL=parse-image.js.map","import { assert } from '@loaders.gl/loader-utils';\nimport { getBinaryImageMetadata } from '../category-api/binary-image-api';\nexport default async function parseToNodeImage(arrayBuffer, options) {\n  const {\n    mimeType\n  } = getBinaryImageMetadata(arrayBuffer) || {};\n  const _parseImageNode = globalThis._parseImageNode;\n  assert(_parseImageNode);\n  return await _parseImageNode(arrayBuffer, mimeType);\n}\n//# sourceMappingURL=parse-to-node-image.js.map","import { Log } from '@probe.gl/log';\nexport default new Log({\n  id: 'deck'\n});\n//# sourceMappingURL=log.js.map","import deckLog from '../utils/log';\nimport { getLoggers } from './loggers';\nlet loggers = {};\n\nif (process.env.NODE_ENV !== 'production') {\n  loggers = getLoggers(deckLog);\n}\n\nexport function register(handlers) {\n  loggers = handlers;\n}\nexport default function debug(eventType, arg1, arg2, arg3) {\n  if (deckLog.level > 0 && loggers[eventType]) {\n    loggers[eventType].call(null, arg1, arg2, arg3);\n  }\n}\n//# sourceMappingURL=index.js.map","function isJSON(text) {\n  const firstChar = text[0];\n  const lastChar = text[text.length - 1];\n  return firstChar === '{' && lastChar === '}' || firstChar === '[' && lastChar === ']';\n}\n\nexport default {\n  id: 'JSON',\n  name: 'JSON',\n  module: '',\n  version: '',\n  options: {},\n  extensions: ['json', 'geojson'],\n  mimeTypes: ['application/json', 'application/geo+json'],\n  testText: isJSON,\n  parseTextSync: JSON.parse\n};\n//# sourceMappingURL=json-loader.js.map","import { registerLoaders } from '@loaders.gl/core';\nimport { ImageLoader } from '@loaders.gl/images';\nimport log from '../utils/log';\nimport { register } from '../debug';\nimport jsonLoader from '../utils/json-loader';\nconst version = typeof \"8.8.21\" !== 'undefined' ? \"8.8.21\" : globalThis.DECK_VERSION || 'untranspiled source';\nconst existingVersion = globalThis.deck && globalThis.deck.VERSION;\n\nif (existingVersion && existingVersion !== version) {\n  throw new Error(\"deck.gl - multiple versions detected: \".concat(existingVersion, \" vs \").concat(version));\n}\n\nif (!existingVersion) {\n  log.log(1, \"deck.gl \".concat(version))();\n  globalThis.deck = { ...globalThis.deck,\n    VERSION: version,\n    version,\n    log,\n    _registerLoggers: register\n  };\n  registerLoaders([jsonLoader, [ImageLoader, {\n    imagebitmap: {\n      premultiplyAlpha: 'none'\n    }\n  }]]);\n}\n\nexport default globalThis.deck;\n//# sourceMappingURL=init.js.map","import { Log } from '@probe.gl/log';\nexport const log = new Log({\n  id: 'luma.gl'\n});\n//# sourceMappingURL=log.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { assert } from './assert';\nconst ERR_CONTEXT = 'Invalid WebGLRenderingContext';\nexport const ERR_WEBGL = ERR_CONTEXT;\nexport const ERR_WEBGL2 = 'Requires WebGL2';\nexport function isWebGL(gl) {\n  if (typeof WebGLRenderingContext !== 'undefined' && gl instanceof WebGLRenderingContext) {\n    return true;\n  }\n\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && Number.isFinite(gl._version));\n}\nexport function isWebGL2(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && gl._version === 2);\n}\nexport function getWebGL2Context(gl) {\n  return isWebGL2(gl) ? gl : null;\n}\nexport function assertWebGLContext(gl) {\n  assert(isWebGL(gl), ERR_CONTEXT);\n  return gl;\n}\nexport function assertWebGL2Context(gl) {\n  assert(isWebGL2(gl), ERR_WEBGL2);\n  return gl;\n}\n//# sourceMappingURL=webgl-checks.js.map","const glErrorShadow = {};\n\nfunction error(msg) {\n  if (globalThis.console && globalThis.console.error) {\n    globalThis.console.error(msg);\n  }\n}\n\nfunction log(msg) {\n  if (globalThis.console && globalThis.console.log) {\n    globalThis.console.log(msg);\n  }\n}\n\nfunction synthesizeGLError(err, opt_msg) {\n  glErrorShadow[err] = true;\n\n  if (opt_msg !== undefined) {\n    error(opt_msg);\n  }\n}\n\nfunction wrapGLError(gl) {\n  const f = gl.getError;\n\n  gl.getError = function getError() {\n    let err;\n\n    do {\n      err = f.apply(gl);\n\n      if (err !== 0) {\n        glErrorShadow[err] = true;\n      }\n    } while (err !== 0);\n\n    for (err in glErrorShadow) {\n      if (glErrorShadow[err]) {\n        delete glErrorShadow[err];\n        return parseInt(err, 10);\n      }\n    }\n\n    return 0;\n  };\n}\n\nconst WebGLVertexArrayObjectOES = function WebGLVertexArrayObjectOES(ext) {\n  const gl = ext.gl;\n  this.ext = ext;\n  this.isAlive = true;\n  this.hasBeenBound = false;\n  this.elementArrayBuffer = null;\n  this.attribs = new Array(ext.maxVertexAttribs);\n\n  for (let n = 0; n < this.attribs.length; n++) {\n    const attrib = new WebGLVertexArrayObjectOES.VertexAttrib(gl);\n    this.attribs[n] = attrib;\n  }\n\n  this.maxAttrib = 0;\n};\n\nWebGLVertexArrayObjectOES.VertexAttrib = function VertexAttrib(gl) {\n  this.enabled = false;\n  this.buffer = null;\n  this.size = 4;\n  this.type = 5126;\n  this.normalized = false;\n  this.stride = 16;\n  this.offset = 0;\n  this.cached = '';\n  this.recache();\n};\n\nWebGLVertexArrayObjectOES.VertexAttrib.prototype.recache = function recache() {\n  this.cached = [this.size, this.type, this.normalized, this.stride, this.offset].join(':');\n};\n\nconst OESVertexArrayObject = function OESVertexArrayObject(gl) {\n  const self = this;\n  this.gl = gl;\n  wrapGLError(gl);\n  const original = this.original = {\n    getParameter: gl.getParameter,\n    enableVertexAttribArray: gl.enableVertexAttribArray,\n    disableVertexAttribArray: gl.disableVertexAttribArray,\n    bindBuffer: gl.bindBuffer,\n    getVertexAttrib: gl.getVertexAttrib,\n    vertexAttribPointer: gl.vertexAttribPointer\n  };\n\n  gl.getParameter = function getParameter(pname) {\n    if (pname === self.VERTEX_ARRAY_BINDING_OES) {\n      if (self.currentVertexArrayObject === self.defaultVertexArrayObject) {\n        return null;\n      }\n\n      return self.currentVertexArrayObject;\n    }\n\n    return original.getParameter.apply(this, arguments);\n  };\n\n  gl.enableVertexAttribArray = function enableVertexAttribArray(index) {\n    const vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, index);\n    const attrib = vao.attribs[index];\n    attrib.enabled = true;\n    return original.enableVertexAttribArray.apply(this, arguments);\n  };\n\n  gl.disableVertexAttribArray = function disableVertexAttribArray(index) {\n    const vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, index);\n    const attrib = vao.attribs[index];\n    attrib.enabled = false;\n    return original.disableVertexAttribArray.apply(this, arguments);\n  };\n\n  gl.bindBuffer = function bindBuffer(target, buffer) {\n    switch (target) {\n      case 34962:\n        self.currentArrayBuffer = buffer;\n        break;\n\n      case 34963:\n        self.currentVertexArrayObject.elementArrayBuffer = buffer;\n        break;\n\n      default:\n    }\n\n    return original.bindBuffer.apply(this, arguments);\n  };\n\n  gl.getVertexAttrib = function getVertexAttrib(index, pname) {\n    const vao = self.currentVertexArrayObject;\n    const attrib = vao.attribs[index];\n\n    switch (pname) {\n      case 34975:\n        return attrib.buffer;\n\n      case 34338:\n        return attrib.enabled;\n\n      case 34339:\n        return attrib.size;\n\n      case 34340:\n        return attrib.stride;\n\n      case 34341:\n        return attrib.type;\n\n      case 34922:\n        return attrib.normalized;\n\n      default:\n        return original.getVertexAttrib.apply(this, arguments);\n    }\n  };\n\n  gl.vertexAttribPointer = function vertexAttribPointer(indx, size, type, normalized, stride, offset) {\n    const vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, indx);\n    const attrib = vao.attribs[indx];\n    attrib.buffer = self.currentArrayBuffer;\n    attrib.size = size;\n    attrib.type = type;\n    attrib.normalized = normalized;\n    attrib.stride = stride;\n    attrib.offset = offset;\n    attrib.recache();\n    return original.vertexAttribPointer.apply(this, arguments);\n  };\n\n  if (gl.instrumentExtension) {\n    gl.instrumentExtension(this, 'OES_vertex_array_object');\n  }\n\n  if (gl.canvas) {\n    gl.canvas.addEventListener('webglcontextrestored', () => {\n      log('OESVertexArrayObject emulation library context restored');\n      self.reset_();\n    }, true);\n  }\n\n  this.reset_();\n};\n\nOESVertexArrayObject.prototype.VERTEX_ARRAY_BINDING_OES = 0x85b5;\n\nOESVertexArrayObject.prototype.reset_ = function reset_() {\n  const contextWasLost = this.vertexArrayObjects !== undefined;\n\n  if (contextWasLost) {\n    for (let ii = 0; ii < this.vertexArrayObjects.length; ++ii) {\n      this.vertexArrayObjects.isAlive = false;\n    }\n  }\n\n  const gl = this.gl;\n  this.maxVertexAttribs = gl.getParameter(34921);\n  this.defaultVertexArrayObject = new WebGLVertexArrayObjectOES(this);\n  this.currentVertexArrayObject = null;\n  this.currentArrayBuffer = null;\n  this.vertexArrayObjects = [this.defaultVertexArrayObject];\n  this.bindVertexArrayOES(null);\n};\n\nOESVertexArrayObject.prototype.createVertexArrayOES = function createVertexArrayOES() {\n  const arrayObject = new WebGLVertexArrayObjectOES(this);\n  this.vertexArrayObjects.push(arrayObject);\n  return arrayObject;\n};\n\nOESVertexArrayObject.prototype.deleteVertexArrayOES = function deleteVertexArrayOES(arrayObject) {\n  arrayObject.isAlive = false;\n  this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(arrayObject), 1);\n\n  if (this.currentVertexArrayObject === arrayObject) {\n    this.bindVertexArrayOES(null);\n  }\n};\n\nOESVertexArrayObject.prototype.isVertexArrayOES = function isVertexArrayOES(arrayObject) {\n  if (arrayObject && arrayObject instanceof WebGLVertexArrayObjectOES) {\n    if (arrayObject.hasBeenBound && arrayObject.ext === this) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nOESVertexArrayObject.prototype.bindVertexArrayOES = function bindVertexArrayOES(arrayObject) {\n  const gl = this.gl;\n\n  if (arrayObject && !arrayObject.isAlive) {\n    synthesizeGLError(1282, 'bindVertexArrayOES: attempt to bind deleted arrayObject');\n    return;\n  }\n\n  const original = this.original;\n  const oldVAO = this.currentVertexArrayObject;\n  this.currentVertexArrayObject = arrayObject || this.defaultVertexArrayObject;\n  this.currentVertexArrayObject.hasBeenBound = true;\n  const newVAO = this.currentVertexArrayObject;\n\n  if (oldVAO === newVAO) {\n    return;\n  }\n\n  if (!oldVAO || newVAO.elementArrayBuffer !== oldVAO.elementArrayBuffer) {\n    original.bindBuffer.call(gl, 34963, newVAO.elementArrayBuffer);\n  }\n\n  let currentBinding = this.currentArrayBuffer;\n  const maxAttrib = Math.max(oldVAO ? oldVAO.maxAttrib : 0, newVAO.maxAttrib);\n\n  for (let n = 0; n <= maxAttrib; n++) {\n    const attrib = newVAO.attribs[n];\n    const oldAttrib = oldVAO ? oldVAO.attribs[n] : null;\n\n    if (!oldVAO || attrib.enabled !== oldAttrib.enabled) {\n      if (attrib.enabled) {\n        original.enableVertexAttribArray.call(gl, n);\n      } else {\n        original.disableVertexAttribArray.call(gl, n);\n      }\n    }\n\n    if (attrib.enabled) {\n      let bufferChanged = false;\n\n      if (!oldVAO || attrib.buffer !== oldAttrib.buffer) {\n        if (currentBinding !== attrib.buffer) {\n          original.bindBuffer.call(gl, 34962, attrib.buffer);\n          currentBinding = attrib.buffer;\n        }\n\n        bufferChanged = true;\n      }\n\n      if (bufferChanged || attrib.cached !== oldAttrib.cached) {\n        original.vertexAttribPointer.call(gl, n, attrib.size, attrib.type, attrib.normalized, attrib.stride, attrib.offset);\n      }\n    }\n  }\n\n  if (this.currentArrayBuffer !== currentBinding) {\n    original.bindBuffer.call(gl, 34962, this.currentArrayBuffer);\n  }\n};\n\nexport function polyfillVertexArrayObject(gl) {\n  if (typeof gl.createVertexArray === 'function') {\n    return;\n  }\n\n  const original_getSupportedExtensions = gl.getSupportedExtensions;\n\n  gl.getSupportedExtensions = function getSupportedExtensions() {\n    const list = original_getSupportedExtensions.call(this) || [];\n\n    if (list.indexOf('OES_vertex_array_object') < 0) {\n      list.push('OES_vertex_array_object');\n    }\n\n    return list;\n  };\n\n  const original_getExtension = gl.getExtension;\n\n  gl.getExtension = function getExtension(name) {\n    const ext = original_getExtension.call(this, name);\n\n    if (ext) {\n      return ext;\n    }\n\n    if (name !== 'OES_vertex_array_object') {\n      return null;\n    }\n\n    if (!gl.__OESVertexArrayObject) {\n      this.__OESVertexArrayObject = new OESVertexArrayObject(this);\n    }\n\n    return this.__OESVertexArrayObject;\n  };\n}\n//# sourceMappingURL=polyfill-vertex-array-object.js.map","import { isWebGL2 } from '../utils/webgl-checks';\nconst OES_element_index = 'OES_element_index';\nconst WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nconst EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nconst EXT_disjoint_timer_query_webgl2 = 'EXT_disjoint_timer_query_webgl2';\nconst EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nconst WEBGL_debug_renderer_info = 'WEBGL_debug_renderer_info';\nconst GL_FRAGMENT_SHADER_DERIVATIVE_HINT = 0x8b8b;\nconst GL_DONT_CARE = 0x1100;\nconst GL_GPU_DISJOINT_EXT = 0x8fbb;\nconst GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0x84ff;\nconst GL_UNMASKED_VENDOR_WEBGL = 0x9245;\nconst GL_UNMASKED_RENDERER_WEBGL = 0x9246;\n\nconst getWebGL2ValueOrZero = gl => !isWebGL2(gl) ? 0 : undefined;\n\nconst WEBGL_PARAMETERS = {\n  [3074]: gl => !isWebGL2(gl) ? 36064 : undefined,\n  [GL_FRAGMENT_SHADER_DERIVATIVE_HINT]: gl => !isWebGL2(gl) ? GL_DONT_CARE : undefined,\n  [35977]: getWebGL2ValueOrZero,\n  [32937]: getWebGL2ValueOrZero,\n  [GL_GPU_DISJOINT_EXT]: (gl, getParameter) => {\n    const ext = isWebGL2(gl) ? gl.getExtension(EXT_disjoint_timer_query_webgl2) : gl.getExtension(EXT_disjoint_timer_query);\n    return ext && ext.GPU_DISJOINT_EXT ? getParameter(ext.GPU_DISJOINT_EXT) : 0;\n  },\n  [GL_UNMASKED_VENDOR_WEBGL]: (gl, getParameter) => {\n    const ext = gl.getExtension(WEBGL_debug_renderer_info);\n    return getParameter(ext && ext.UNMASKED_VENDOR_WEBGL || 7936);\n  },\n  [GL_UNMASKED_RENDERER_WEBGL]: (gl, getParameter) => {\n    const ext = gl.getExtension(WEBGL_debug_renderer_info);\n    return getParameter(ext && ext.UNMASKED_RENDERER_WEBGL || 7937);\n  },\n  [GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT]: (gl, getParameter) => {\n    const ext = gl.luma.extensions[EXT_texture_filter_anisotropic];\n    return ext ? getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 1.0;\n  },\n  [32883]: getWebGL2ValueOrZero,\n  [35071]: getWebGL2ValueOrZero,\n  [37447]: getWebGL2ValueOrZero,\n  [36063]: (gl, getParameter) => {\n    if (!isWebGL2(gl)) {\n      const ext = gl.getExtension(WEBGL_draw_buffers);\n      return ext ? getParameter(ext.MAX_COLOR_ATTACHMENTS_WEBGL) : 0;\n    }\n\n    return undefined;\n  },\n  [35379]: getWebGL2ValueOrZero,\n  [35374]: getWebGL2ValueOrZero,\n  [35377]: getWebGL2ValueOrZero,\n  [34852]: gl => {\n    if (!isWebGL2(gl)) {\n      const ext = gl.getExtension(WEBGL_draw_buffers);\n      return ext ? ext.MAX_DRAW_BUFFERS_WEBGL : 0;\n    }\n\n    return undefined;\n  },\n  [36203]: gl => gl.getExtension(OES_element_index) ? 2147483647 : 65535,\n  [33001]: gl => gl.getExtension(OES_element_index) ? 16777216 : 65535,\n  [33000]: gl => 16777216,\n  [37157]: getWebGL2ValueOrZero,\n  [35373]: getWebGL2ValueOrZero,\n  [35657]: getWebGL2ValueOrZero,\n  [36183]: getWebGL2ValueOrZero,\n  [37137]: getWebGL2ValueOrZero,\n  [34045]: getWebGL2ValueOrZero,\n  [35978]: getWebGL2ValueOrZero,\n  [35979]: getWebGL2ValueOrZero,\n  [35968]: getWebGL2ValueOrZero,\n  [35376]: getWebGL2ValueOrZero,\n  [35375]: getWebGL2ValueOrZero,\n  [35659]: getWebGL2ValueOrZero,\n  [37154]: getWebGL2ValueOrZero,\n  [35371]: getWebGL2ValueOrZero,\n  [35658]: getWebGL2ValueOrZero,\n  [35076]: getWebGL2ValueOrZero,\n  [35077]: getWebGL2ValueOrZero,\n  [35380]: getWebGL2ValueOrZero\n};\nexport function getParameterPolyfill(gl, originalGetParameter, pname) {\n  const limit = WEBGL_PARAMETERS[pname];\n  const value = typeof limit === 'function' ? limit(gl, originalGetParameter, pname) : limit;\n  const result = value !== undefined ? value : originalGetParameter(pname);\n  return result;\n}\n//# sourceMappingURL=get-parameter-polyfill.js.map","import { assert } from '../utils/assert';\nimport { isWebGL2 } from '../utils/webgl-checks';\nimport { getParameterPolyfill } from './get-parameter-polyfill';\nconst OES_vertex_array_object = 'OES_vertex_array_object';\nconst ANGLE_instanced_arrays = 'ANGLE_instanced_arrays';\nconst WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nconst EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nconst EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nconst ERR_VAO_NOT_SUPPORTED = 'VertexArray requires WebGL2 or OES_vertex_array_object extension';\n\nfunction getExtensionData(gl, extension) {\n  return {\n    webgl2: isWebGL2(gl),\n    ext: gl.getExtension(extension)\n  };\n}\n\nexport const WEBGL2_CONTEXT_POLYFILLS = {\n  [OES_vertex_array_object]: {\n    meta: {\n      suffix: 'OES'\n    },\n    createVertexArray: () => {\n      assert(false, ERR_VAO_NOT_SUPPORTED);\n    },\n    deleteVertexArray: () => {},\n    bindVertexArray: () => {},\n    isVertexArray: () => false\n  },\n  [ANGLE_instanced_arrays]: {\n    meta: {\n      suffix: 'ANGLE'\n    },\n\n    vertexAttribDivisor(location, divisor) {\n      assert(divisor === 0, 'WebGL instanced rendering not supported');\n    },\n\n    drawElementsInstanced: () => {},\n    drawArraysInstanced: () => {}\n  },\n  [WEBGL_draw_buffers]: {\n    meta: {\n      suffix: 'WEBGL'\n    },\n    drawBuffers: () => {\n      assert(false);\n    }\n  },\n  [EXT_disjoint_timer_query]: {\n    meta: {\n      suffix: 'EXT'\n    },\n    createQuery: () => {\n      assert(false);\n    },\n    deleteQuery: () => {\n      assert(false);\n    },\n    beginQuery: () => {\n      assert(false);\n    },\n    endQuery: () => {},\n\n    getQuery(handle, pname) {\n      return this.getQueryObject(handle, pname);\n    },\n\n    getQueryParameter(handle, pname) {\n      return this.getQueryObject(handle, pname);\n    },\n\n    getQueryObject: () => {}\n  }\n};\nexport const WEBGL2_CONTEXT_OVERRIDES = {\n  readBuffer: (gl, originalFunc, attachment) => {\n    if (isWebGL2(gl)) {\n      originalFunc(attachment);\n    } else {}\n  },\n  getVertexAttrib: (gl, originalFunc, location, pname) => {\n    const {\n      webgl2,\n      ext\n    } = getExtensionData(gl, ANGLE_instanced_arrays);\n    let result;\n\n    switch (pname) {\n      case 35069:\n        result = !webgl2 ? false : undefined;\n        break;\n\n      case 35070:\n        result = !webgl2 && !ext ? 0 : undefined;\n        break;\n\n      default:\n    }\n\n    return result !== undefined ? result : originalFunc(location, pname);\n  },\n  getProgramParameter: (gl, originalFunc, program, pname) => {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 35967:\n          return 35981;\n\n        case 35971:\n          return 0;\n\n        case 35382:\n          return 0;\n\n        default:\n      }\n    }\n\n    return originalFunc(program, pname);\n  },\n  getInternalformatParameter: (gl, originalFunc, target, format, pname) => {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 32937:\n          return new Int32Array([0]);\n\n        default:\n      }\n    }\n\n    return gl.getInternalformatParameter(target, format, pname);\n  },\n\n  getTexParameter(gl, originalFunc, target, pname) {\n    switch (pname) {\n      case 34046:\n        const {\n          extensions\n        } = gl.luma;\n        const ext = extensions[EXT_texture_filter_anisotropic];\n        pname = ext && ext.TEXTURE_MAX_ANISOTROPY_EXT || 34046;\n        break;\n\n      default:\n    }\n\n    return originalFunc(target, pname);\n  },\n\n  getParameter: getParameterPolyfill,\n\n  hint(gl, originalFunc, pname, value) {\n    return originalFunc(pname, value);\n  }\n\n};\n//# sourceMappingURL=polyfill-table.js.map","import { polyfillVertexArrayObject } from './polyfill-vertex-array-object';\nimport { assert } from '../utils/assert';\nimport { WEBGL2_CONTEXT_POLYFILLS, WEBGL2_CONTEXT_OVERRIDES } from './polyfill-table';\nexport function polyfillContext(gl) {\n  gl.luma = gl.luma || {};\n  const {\n    luma\n  } = gl;\n\n  if (!luma.polyfilled) {\n    polyfillVertexArrayObject(gl);\n    initializeExtensions(gl);\n    installPolyfills(gl, WEBGL2_CONTEXT_POLYFILLS);\n    installOverrides(gl, {\n      target: luma,\n      target2: gl\n    });\n    luma.polyfilled = true;\n  }\n\n  return gl;\n}\nglobalThis.polyfillContext = polyfillContext;\n\nfunction initializeExtensions(gl) {\n  gl.luma.extensions = {};\n  const EXTENSIONS = gl.getSupportedExtensions() || [];\n\n  for (const extension of EXTENSIONS) {\n    gl.luma[extension] = gl.getExtension(extension);\n  }\n}\n\nfunction installOverrides(gl, _ref) {\n  let {\n    target,\n    target2\n  } = _ref;\n  Object.keys(WEBGL2_CONTEXT_OVERRIDES).forEach(key => {\n    if (typeof WEBGL2_CONTEXT_OVERRIDES[key] === 'function') {\n      const originalFunc = gl[key] ? gl[key].bind(gl) : () => {};\n      const polyfill = WEBGL2_CONTEXT_OVERRIDES[key].bind(null, gl, originalFunc);\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  });\n}\n\nfunction installPolyfills(gl, polyfills) {\n  for (const extension of Object.getOwnPropertyNames(polyfills)) {\n    if (extension !== 'overrides') {\n      polyfillExtension(gl, {\n        extension,\n        target: gl.luma,\n        target2: gl\n      });\n    }\n  }\n}\n\nfunction polyfillExtension(gl, _ref2) {\n  let {\n    extension,\n    target,\n    target2\n  } = _ref2;\n  const defaults = WEBGL2_CONTEXT_POLYFILLS[extension];\n  assert(defaults);\n  const {\n    meta = {}\n  } = defaults;\n  const {\n    suffix = ''\n  } = meta;\n  const ext = gl.getExtension(extension);\n\n  for (const key of Object.keys(defaults)) {\n    const extKey = \"\".concat(key).concat(suffix);\n    let polyfill = null;\n\n    if (key === 'meta') {} else if (typeof gl[key] === 'function') {} else if (ext && typeof ext[extKey] === 'function') {\n      polyfill = function () {\n        return ext[extKey](...arguments);\n      };\n    } else if (typeof defaults[key] === 'function') {\n      polyfill = defaults[key].bind(target);\n    }\n\n    if (polyfill) {\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  }\n}\n//# sourceMappingURL=polyfill-context.js.map","import { isWebGL2 } from '../utils/webgl-checks';\nexport const GL_PARAMETER_DEFAULTS = {\n  [3042]: false,\n  [32773]: new Float32Array([0, 0, 0, 0]),\n  [32777]: 32774,\n  [34877]: 32774,\n  [32969]: 1,\n  [32968]: 0,\n  [32971]: 1,\n  [32970]: 0,\n  [3106]: new Float32Array([0, 0, 0, 0]),\n  [3107]: [true, true, true, true],\n  [2884]: false,\n  [2885]: 1029,\n  [2929]: false,\n  [2931]: 1,\n  [2932]: 513,\n  [2928]: new Float32Array([0, 1]),\n  [2930]: true,\n  [3024]: true,\n  [36006]: null,\n  [2886]: 2305,\n  [33170]: 4352,\n  [2849]: 1,\n  [32823]: false,\n  [32824]: 0,\n  [10752]: 0,\n  [32938]: 1.0,\n  [32939]: false,\n  [3089]: false,\n  [3088]: new Int32Array([0, 0, 1024, 1024]),\n  [2960]: false,\n  [2961]: 0,\n  [2968]: 0xffffffff,\n  [36005]: 0xffffffff,\n  [2962]: 519,\n  [2967]: 0,\n  [2963]: 0xffffffff,\n  [34816]: 519,\n  [36003]: 0,\n  [36004]: 0xffffffff,\n  [2964]: 7680,\n  [2965]: 7680,\n  [2966]: 7680,\n  [34817]: 7680,\n  [34818]: 7680,\n  [34819]: 7680,\n  [2978]: [0, 0, 1024, 1024],\n  [3333]: 4,\n  [3317]: 4,\n  [37440]: false,\n  [37441]: false,\n  [37443]: 37444,\n  [35723]: 4352,\n  [36010]: null,\n  [35977]: false,\n  [3330]: 0,\n  [3332]: 0,\n  [3331]: 0,\n  [3314]: 0,\n  [32878]: 0,\n  [3316]: 0,\n  [3315]: 0,\n  [32877]: 0\n};\n\nconst enable = (gl, value, key) => value ? gl.enable(key) : gl.disable(key);\n\nconst hint = (gl, value, key) => gl.hint(key, value);\n\nconst pixelStorei = (gl, value, key) => gl.pixelStorei(key, value);\n\nconst drawFramebuffer = (gl, value) => {\n  const target = isWebGL2(gl) ? 36009 : 36160;\n  return gl.bindFramebuffer(target, value);\n};\n\nconst readFramebuffer = (gl, value) => {\n  return gl.bindFramebuffer(36008, value);\n};\n\nfunction isArray(array) {\n  return Array.isArray(array) || ArrayBuffer.isView(array);\n}\n\nexport const GL_PARAMETER_SETTERS = {\n  [3042]: enable,\n  [32773]: (gl, value) => gl.blendColor(...value),\n  [32777]: 'blendEquation',\n  [34877]: 'blendEquation',\n  [32969]: 'blendFunc',\n  [32968]: 'blendFunc',\n  [32971]: 'blendFunc',\n  [32970]: 'blendFunc',\n  [3106]: (gl, value) => gl.clearColor(...value),\n  [3107]: (gl, value) => gl.colorMask(...value),\n  [2884]: enable,\n  [2885]: (gl, value) => gl.cullFace(value),\n  [2929]: enable,\n  [2931]: (gl, value) => gl.clearDepth(value),\n  [2932]: (gl, value) => gl.depthFunc(value),\n  [2928]: (gl, value) => gl.depthRange(...value),\n  [2930]: (gl, value) => gl.depthMask(value),\n  [3024]: enable,\n  [35723]: hint,\n  [36006]: drawFramebuffer,\n  [2886]: (gl, value) => gl.frontFace(value),\n  [33170]: hint,\n  [2849]: (gl, value) => gl.lineWidth(value),\n  [32823]: enable,\n  [32824]: 'polygonOffset',\n  [10752]: 'polygonOffset',\n  [35977]: enable,\n  [32938]: 'sampleCoverage',\n  [32939]: 'sampleCoverage',\n  [3089]: enable,\n  [3088]: (gl, value) => gl.scissor(...value),\n  [2960]: enable,\n  [2961]: (gl, value) => gl.clearStencil(value),\n  [2968]: (gl, value) => gl.stencilMaskSeparate(1028, value),\n  [36005]: (gl, value) => gl.stencilMaskSeparate(1029, value),\n  [2962]: 'stencilFuncFront',\n  [2967]: 'stencilFuncFront',\n  [2963]: 'stencilFuncFront',\n  [34816]: 'stencilFuncBack',\n  [36003]: 'stencilFuncBack',\n  [36004]: 'stencilFuncBack',\n  [2964]: 'stencilOpFront',\n  [2965]: 'stencilOpFront',\n  [2966]: 'stencilOpFront',\n  [34817]: 'stencilOpBack',\n  [34818]: 'stencilOpBack',\n  [34819]: 'stencilOpBack',\n  [2978]: (gl, value) => gl.viewport(...value),\n  [3333]: pixelStorei,\n  [3317]: pixelStorei,\n  [37440]: pixelStorei,\n  [37441]: pixelStorei,\n  [37443]: pixelStorei,\n  [3330]: pixelStorei,\n  [3332]: pixelStorei,\n  [3331]: pixelStorei,\n  [36010]: readFramebuffer,\n  [3314]: pixelStorei,\n  [32878]: pixelStorei,\n  [3316]: pixelStorei,\n  [3315]: pixelStorei,\n  [32877]: pixelStorei,\n  framebuffer: (gl, framebuffer) => {\n    const handle = framebuffer && 'handle' in framebuffer ? framebuffer.handle : framebuffer;\n    return gl.bindFramebuffer(36160, handle);\n  },\n  blend: (gl, value) => value ? gl.enable(3042) : gl.disable(3042),\n  blendColor: (gl, value) => gl.blendColor(...value),\n  blendEquation: (gl, args) => {\n    args = isArray(args) ? args : [args, args];\n    gl.blendEquationSeparate(...args);\n  },\n  blendFunc: (gl, args) => {\n    args = isArray(args) && args.length === 2 ? [...args, ...args] : args;\n    gl.blendFuncSeparate(...args);\n  },\n  clearColor: (gl, value) => gl.clearColor(...value),\n  clearDepth: (gl, value) => gl.clearDepth(value),\n  clearStencil: (gl, value) => gl.clearStencil(value),\n  colorMask: (gl, value) => gl.colorMask(...value),\n  cull: (gl, value) => value ? gl.enable(2884) : gl.disable(2884),\n  cullFace: (gl, value) => gl.cullFace(value),\n  depthTest: (gl, value) => value ? gl.enable(2929) : gl.disable(2929),\n  depthFunc: (gl, value) => gl.depthFunc(value),\n  depthMask: (gl, value) => gl.depthMask(value),\n  depthRange: (gl, value) => gl.depthRange(...value),\n  dither: (gl, value) => value ? gl.enable(3024) : gl.disable(3024),\n  derivativeHint: (gl, value) => {\n    gl.hint(35723, value);\n  },\n  frontFace: (gl, value) => gl.frontFace(value),\n  mipmapHint: (gl, value) => gl.hint(33170, value),\n  lineWidth: (gl, value) => gl.lineWidth(value),\n  polygonOffsetFill: (gl, value) => value ? gl.enable(32823) : gl.disable(32823),\n  polygonOffset: (gl, value) => gl.polygonOffset(...value),\n  sampleCoverage: (gl, value) => gl.sampleCoverage(...value),\n  scissorTest: (gl, value) => value ? gl.enable(3089) : gl.disable(3089),\n  scissor: (gl, value) => gl.scissor(...value),\n  stencilTest: (gl, value) => value ? gl.enable(2960) : gl.disable(2960),\n  stencilMask: (gl, value) => {\n    value = isArray(value) ? value : [value, value];\n    const [mask, backMask] = value;\n    gl.stencilMaskSeparate(1028, mask);\n    gl.stencilMaskSeparate(1029, backMask);\n  },\n  stencilFunc: (gl, args) => {\n    args = isArray(args) && args.length === 3 ? [...args, ...args] : args;\n    const [func, ref, mask, backFunc, backRef, backMask] = args;\n    gl.stencilFuncSeparate(1028, func, ref, mask);\n    gl.stencilFuncSeparate(1029, backFunc, backRef, backMask);\n  },\n  stencilOp: (gl, args) => {\n    args = isArray(args) && args.length === 3 ? [...args, ...args] : args;\n    const [sfail, dpfail, dppass, backSfail, backDpfail, backDppass] = args;\n    gl.stencilOpSeparate(1028, sfail, dpfail, dppass);\n    gl.stencilOpSeparate(1029, backSfail, backDpfail, backDppass);\n  },\n  viewport: (gl, value) => gl.viewport(...value)\n};\n\nfunction getValue(glEnum, values, cache) {\n  return values[glEnum] !== undefined ? values[glEnum] : cache[glEnum];\n}\n\nexport const GL_COMPOSITE_PARAMETER_SETTERS = {\n  blendEquation: (gl, values, cache) => gl.blendEquationSeparate(getValue(32777, values, cache), getValue(34877, values, cache)),\n  blendFunc: (gl, values, cache) => gl.blendFuncSeparate(getValue(32969, values, cache), getValue(32968, values, cache), getValue(32971, values, cache), getValue(32970, values, cache)),\n  polygonOffset: (gl, values, cache) => gl.polygonOffset(getValue(32824, values, cache), getValue(10752, values, cache)),\n  sampleCoverage: (gl, values, cache) => gl.sampleCoverage(getValue(32938, values, cache), getValue(32939, values, cache)),\n  stencilFuncFront: (gl, values, cache) => gl.stencilFuncSeparate(1028, getValue(2962, values, cache), getValue(2967, values, cache), getValue(2963, values, cache)),\n  stencilFuncBack: (gl, values, cache) => gl.stencilFuncSeparate(1029, getValue(34816, values, cache), getValue(36003, values, cache), getValue(36004, values, cache)),\n  stencilOpFront: (gl, values, cache) => gl.stencilOpSeparate(1028, getValue(2964, values, cache), getValue(2965, values, cache), getValue(2966, values, cache)),\n  stencilOpBack: (gl, values, cache) => gl.stencilOpSeparate(1029, getValue(34817, values, cache), getValue(34818, values, cache), getValue(34819, values, cache))\n};\nexport const GL_HOOKED_SETTERS = {\n  enable: (update, capability) => update({\n    [capability]: true\n  }),\n  disable: (update, capability) => update({\n    [capability]: false\n  }),\n  pixelStorei: (update, pname, value) => update({\n    [pname]: value\n  }),\n  hint: (update, pname, hint) => update({\n    [pname]: hint\n  }),\n  bindFramebuffer: (update, target, framebuffer) => {\n    switch (target) {\n      case 36160:\n        return update({\n          [36006]: framebuffer,\n          [36010]: framebuffer\n        });\n\n      case 36009:\n        return update({\n          [36006]: framebuffer\n        });\n\n      case 36008:\n        return update({\n          [36010]: framebuffer\n        });\n\n      default:\n        return null;\n    }\n  },\n  blendColor: (update, r, g, b, a) => update({\n    [32773]: new Float32Array([r, g, b, a])\n  }),\n  blendEquation: (update, mode) => update({\n    [32777]: mode,\n    [34877]: mode\n  }),\n  blendEquationSeparate: (update, modeRGB, modeAlpha) => update({\n    [32777]: modeRGB,\n    [34877]: modeAlpha\n  }),\n  blendFunc: (update, src, dst) => update({\n    [32969]: src,\n    [32968]: dst,\n    [32971]: src,\n    [32970]: dst\n  }),\n  blendFuncSeparate: (update, srcRGB, dstRGB, srcAlpha, dstAlpha) => update({\n    [32969]: srcRGB,\n    [32968]: dstRGB,\n    [32971]: srcAlpha,\n    [32970]: dstAlpha\n  }),\n  clearColor: (update, r, g, b, a) => update({\n    [3106]: new Float32Array([r, g, b, a])\n  }),\n  clearDepth: (update, depth) => update({\n    [2931]: depth\n  }),\n  clearStencil: (update, s) => update({\n    [2961]: s\n  }),\n  colorMask: (update, r, g, b, a) => update({\n    [3107]: [r, g, b, a]\n  }),\n  cullFace: (update, mode) => update({\n    [2885]: mode\n  }),\n  depthFunc: (update, func) => update({\n    [2932]: func\n  }),\n  depthRange: (update, zNear, zFar) => update({\n    [2928]: new Float32Array([zNear, zFar])\n  }),\n  depthMask: (update, mask) => update({\n    [2930]: mask\n  }),\n  frontFace: (update, face) => update({\n    [2886]: face\n  }),\n  lineWidth: (update, width) => update({\n    [2849]: width\n  }),\n  polygonOffset: (update, factor, units) => update({\n    [32824]: factor,\n    [10752]: units\n  }),\n  sampleCoverage: (update, value, invert) => update({\n    [32938]: value,\n    [32939]: invert\n  }),\n  scissor: (update, x, y, width, height) => update({\n    [3088]: new Int32Array([x, y, width, height])\n  }),\n  stencilMask: (update, mask) => update({\n    [2968]: mask,\n    [36005]: mask\n  }),\n  stencilMaskSeparate: (update, face, mask) => update({\n    [face === 1028 ? 2968 : 36005]: mask\n  }),\n  stencilFunc: (update, func, ref, mask) => update({\n    [2962]: func,\n    [2967]: ref,\n    [2963]: mask,\n    [34816]: func,\n    [36003]: ref,\n    [36004]: mask\n  }),\n  stencilFuncSeparate: (update, face, func, ref, mask) => update({\n    [face === 1028 ? 2962 : 34816]: func,\n    [face === 1028 ? 2967 : 36003]: ref,\n    [face === 1028 ? 2963 : 36004]: mask\n  }),\n  stencilOp: (update, fail, zfail, zpass) => update({\n    [2964]: fail,\n    [2965]: zfail,\n    [2966]: zpass,\n    [34817]: fail,\n    [34818]: zfail,\n    [34819]: zpass\n  }),\n  stencilOpSeparate: (update, face, fail, zfail, zpass) => update({\n    [face === 1028 ? 2964 : 34817]: fail,\n    [face === 1028 ? 2965 : 34818]: zfail,\n    [face === 1028 ? 2966 : 34819]: zpass\n  }),\n  viewport: (update, x, y, width, height) => update({\n    [2978]: [x, y, width, height]\n  })\n};\n\nconst isEnabled = (gl, key) => gl.isEnabled(key);\n\nexport const GL_PARAMETER_GETTERS = {\n  [3042]: isEnabled,\n  [2884]: isEnabled,\n  [2929]: isEnabled,\n  [3024]: isEnabled,\n  [32823]: isEnabled,\n  [32926]: isEnabled,\n  [32928]: isEnabled,\n  [3089]: isEnabled,\n  [2960]: isEnabled,\n  [35977]: isEnabled\n};\n//# sourceMappingURL=webgl-parameter-tables.js.map","export function isObjectEmpty(object) {\n  for (const key in object) {\n    return false;\n  }\n\n  return true;\n}\nexport function deepArrayEqual(x, y) {\n  if (x === y) {\n    return true;\n  }\n\n  const isArrayX = Array.isArray(x) || ArrayBuffer.isView(x);\n  const isArrayY = Array.isArray(y) || ArrayBuffer.isView(y);\n\n  if (isArrayX && isArrayY && x.length === y.length) {\n    for (let i = 0; i < x.length; ++i) {\n      if (x[i] !== y[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=utils.js.map","import { GL_PARAMETER_DEFAULTS, GL_HOOKED_SETTERS } from './webgl-parameter-tables';\nimport { setParameters, getParameters } from './unified-parameter-api';\nimport { assert } from '../utils/assert';\nimport { deepArrayEqual } from '../utils/utils';\n\nfunction installGetterOverride(gl, functionName) {\n  const originalGetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function get() {\n    const pname = arguments.length <= 0 ? undefined : arguments[0];\n\n    if (!(pname in gl.state.cache)) {\n      return originalGetterFunc(...arguments);\n    }\n\n    return gl.state.enable ? gl.state.cache[pname] : originalGetterFunc(...arguments);\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: \"\".concat(functionName, \"-from-cache\"),\n    configurable: false\n  });\n}\n\nfunction installSetterSpy(gl, functionName, setter) {\n  const originalSetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function set() {\n    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {\n      params[_key] = arguments[_key];\n    }\n\n    const {\n      valueChanged,\n      oldValue\n    } = setter(gl.state._updateCache, ...params);\n\n    if (valueChanged) {\n      originalSetterFunc(...params);\n    }\n\n    return oldValue;\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: \"\".concat(functionName, \"-to-cache\"),\n    configurable: false\n  });\n}\n\nfunction installProgramSpy(gl) {\n  const originalUseProgram = gl.useProgram.bind(gl);\n\n  gl.useProgram = function useProgramLuma(handle) {\n    if (gl.state.program !== handle) {\n      originalUseProgram(handle);\n      gl.state.program = handle;\n    }\n  };\n}\n\nclass GLState {\n  constructor(gl) {\n    let {\n      copyState = false,\n      log = () => {}\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.gl = gl;\n    this.program = null;\n    this.stateStack = [];\n    this.enable = true;\n    this.cache = copyState ? getParameters(gl) : Object.assign({}, GL_PARAMETER_DEFAULTS);\n    this.log = log;\n    this._updateCache = this._updateCache.bind(this);\n    Object.seal(this);\n  }\n\n  push() {\n    let values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.stateStack.push({});\n  }\n\n  pop() {\n    assert(this.stateStack.length > 0);\n    const oldValues = this.stateStack[this.stateStack.length - 1];\n    setParameters(this.gl, oldValues);\n    this.stateStack.pop();\n  }\n\n  _updateCache(values) {\n    let valueChanged = false;\n    let oldValue;\n    const oldValues = this.stateStack.length > 0 && this.stateStack[this.stateStack.length - 1];\n\n    for (const key in values) {\n      assert(key !== undefined);\n      const value = values[key];\n      const cached = this.cache[key];\n\n      if (!deepArrayEqual(value, cached)) {\n        valueChanged = true;\n        oldValue = cached;\n\n        if (oldValues && !(key in oldValues)) {\n          oldValues[key] = cached;\n        }\n\n        this.cache[key] = value;\n      }\n    }\n\n    return {\n      valueChanged,\n      oldValue\n    };\n  }\n\n}\n\nexport function trackContextState(gl) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    enable = true,\n    copyState\n  } = options;\n  assert(copyState !== undefined);\n\n  if (!gl.state) {\n    const {\n      polyfillContext\n    } = globalThis;\n\n    if (polyfillContext) {\n      polyfillContext(gl);\n    }\n\n    gl.state = new GLState(gl, {\n      copyState\n    });\n    installProgramSpy(gl);\n\n    for (const key in GL_HOOKED_SETTERS) {\n      const setter = GL_HOOKED_SETTERS[key];\n      installSetterSpy(gl, key, setter);\n    }\n\n    installGetterOverride(gl, 'getParameter');\n    installGetterOverride(gl, 'isEnabled');\n  }\n\n  gl.state.enable = enable;\n  return gl;\n}\nexport function pushContextState(gl) {\n  if (!gl.state) {\n    trackContextState(gl, {\n      copyState: false\n    });\n  }\n\n  gl.state.push();\n}\nexport function popContextState(gl) {\n  assert(gl.state);\n  gl.state.pop();\n}\n//# sourceMappingURL=track-context-state.js.map","import { GL_PARAMETER_DEFAULTS, GL_PARAMETER_SETTERS, GL_COMPOSITE_PARAMETER_SETTERS, GL_PARAMETER_GETTERS } from './webgl-parameter-tables';\nimport { pushContextState, popContextState } from './track-context-state';\nimport { assert } from '../utils/assert';\nimport { isWebGL } from '../utils/webgl-checks';\nimport { isObjectEmpty } from '../utils/utils';\nexport function setParameters(gl, values) {\n  assert(isWebGL(gl), 'setParameters requires a WebGL context');\n\n  if (isObjectEmpty(values)) {\n    return;\n  }\n\n  const compositeSetters = {};\n\n  for (const key in values) {\n    const glConstant = Number(key);\n    const setter = GL_PARAMETER_SETTERS[key];\n\n    if (setter) {\n      if (typeof setter === 'string') {\n        compositeSetters[setter] = true;\n      } else {\n        setter(gl, values[key], glConstant);\n      }\n    }\n  }\n\n  const cache = gl.state && gl.state.cache;\n\n  if (cache) {\n    for (const key in compositeSetters) {\n      const compositeSetter = GL_COMPOSITE_PARAMETER_SETTERS[key];\n      compositeSetter(gl, values, cache);\n    }\n  }\n}\nexport function getParameters(gl, parameters) {\n  parameters = parameters || GL_PARAMETER_DEFAULTS;\n\n  if (typeof parameters === 'number') {\n    const key = parameters;\n    const getter = GL_PARAMETER_GETTERS[key];\n    return getter ? getter(gl, key) : gl.getParameter(key);\n  }\n\n  const parameterKeys = Array.isArray(parameters) ? parameters : Object.keys(parameters);\n  const state = {};\n\n  for (const key of parameterKeys) {\n    const getter = GL_PARAMETER_GETTERS[key];\n    state[key] = getter ? getter(gl, Number(key)) : gl.getParameter(Number(key));\n  }\n\n  return state;\n}\nexport function resetParameters(gl) {\n  setParameters(gl, GL_PARAMETER_DEFAULTS);\n}\nexport function withParameters(gl, parameters, func) {\n  if (isObjectEmpty(parameters)) {\n    return func(gl);\n  }\n\n  const {\n    nocatch = true\n  } = parameters;\n  pushContextState(gl);\n  setParameters(gl, parameters);\n  let value;\n\n  if (nocatch) {\n    value = func(gl);\n    popContextState(gl);\n  } else {\n    try {\n      value = func(gl);\n    } finally {\n      popContextState(gl);\n    }\n  }\n\n  return value;\n}\n//# sourceMappingURL=unified-parameter-api.js.map","export function cssToDeviceRatio(gl) {\n  const {\n    luma\n  } = gl;\n\n  if (gl.canvas && luma) {\n    const {\n      clientWidth\n    } = luma.canvasSizeInfo;\n    return clientWidth ? gl.drawingBufferWidth / clientWidth : 1;\n  }\n\n  return 1;\n}\nexport function cssToDevicePixels(gl, cssPixel) {\n  let yInvert = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  const ratio = cssToDeviceRatio(gl);\n  const width = gl.drawingBufferWidth;\n  const height = gl.drawingBufferHeight;\n  return scalePixels(cssPixel, ratio, width, height, yInvert);\n}\nexport function getDevicePixelRatio(useDevicePixels) {\n  const windowRatio = typeof window === 'undefined' ? 1 : window.devicePixelRatio || 1;\n\n  if (Number.isFinite(useDevicePixels)) {\n    return useDevicePixels <= 0 ? 1 : useDevicePixels;\n  }\n\n  return useDevicePixels ? windowRatio : 1;\n}\n\nfunction scalePixels(pixel, ratio, width, height, yInvert) {\n  const x = scaleX(pixel[0], ratio, width);\n  let y = scaleY(pixel[1], ratio, height, yInvert);\n  let t = scaleX(pixel[0] + 1, ratio, width);\n  const xHigh = t === width - 1 ? t : t - 1;\n  t = scaleY(pixel[1] + 1, ratio, height, yInvert);\n  let yHigh;\n\n  if (yInvert) {\n    t = t === 0 ? t : t + 1;\n    yHigh = y;\n    y = t;\n  } else {\n    yHigh = t === height - 1 ? t : t - 1;\n  }\n\n  return {\n    x,\n    y,\n    width: Math.max(xHigh - x + 1, 1),\n    height: Math.max(yHigh - y + 1, 1)\n  };\n}\n\nfunction scaleX(x, ratio, width) {\n  const r = Math.min(Math.round(x * ratio), width - 1);\n  return r;\n}\n\nfunction scaleY(y, ratio, height, yInvert) {\n  return yInvert ? Math.max(0, height - 1 - Math.round(y * ratio)) : Math.min(Math.round(y * ratio), height - 1);\n}\n//# sourceMappingURL=device-pixels.js.map","import { isBrowser as getIsBrowser } from '@probe.gl/env';\nimport { trackContextState } from '../state-tracker/track-context-state';\nimport { log } from '../utils/log';\nimport { assert } from '../utils/assert';\nimport { getDevicePixelRatio } from '../utils/device-pixels';\nimport { isWebGL2 } from '../utils/webgl-checks';\nconst isBrowser = getIsBrowser();\nconst isPage = isBrowser && typeof document !== 'undefined';\nconst CONTEXT_DEFAULTS = {\n  webgl2: true,\n  webgl1: true,\n  throwOnError: true,\n  manageState: true,\n  canvas: null,\n  debug: false,\n  width: 800,\n  height: 600\n};\nexport function createGLContext() {\n  let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  assert(isBrowser, \"createGLContext only available in the browser.\\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils\");\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  const {\n    width,\n    height\n  } = options;\n\n  function onError(message) {\n    if (options.throwOnError) {\n      throw new Error(message);\n    }\n\n    console.error(message);\n    return null;\n  }\n\n  options.onError = onError;\n  let gl;\n  const {\n    canvas\n  } = options;\n  const targetCanvas = getCanvas({\n    canvas,\n    width,\n    height,\n    onError\n  });\n  gl = createBrowserContext(targetCanvas, options);\n\n  if (!gl) {\n    return null;\n  }\n\n  gl = instrumentGLContext(gl, options);\n  logInfo(gl);\n  return gl;\n}\nexport function instrumentGLContext(gl) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!gl || gl._instrumented) {\n    return gl;\n  }\n\n  gl._version = gl._version || getVersion(gl);\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  const {\n    manageState,\n    debug\n  } = options;\n\n  if (manageState) {\n    trackContextState(gl, {\n      copyState: false,\n      log: function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return log.log(1, ...args)();\n      }\n    });\n  }\n\n  if (isBrowser && debug) {\n    if (!globalThis.makeDebugContext) {\n      log.warn('WebGL debug mode not activated. import \"@luma.gl/debug\" to enable.')();\n    } else {\n      gl = globalThis.makeDebugContext(gl, options);\n      log.level = Math.max(log.level, 1);\n    }\n  }\n\n  gl._instrumented = true;\n  return gl;\n}\nexport function getContextDebugInfo(gl) {\n  const vendorMasked = gl.getParameter(7936);\n  const rendererMasked = gl.getParameter(7937);\n  const ext = gl.getExtension('WEBGL_debug_renderer_info');\n  const vendorUnmasked = ext && gl.getParameter(ext.UNMASKED_VENDOR_WEBGL || 7936);\n  const rendererUnmasked = ext && gl.getParameter(ext.UNMASKED_RENDERER_WEBGL || 7937);\n  return {\n    vendor: vendorUnmasked || vendorMasked,\n    renderer: rendererUnmasked || rendererMasked,\n    vendorMasked,\n    rendererMasked,\n    version: gl.getParameter(7938),\n    shadingLanguageVersion: gl.getParameter(35724)\n  };\n}\nexport function resizeGLContext(gl) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (gl.canvas) {\n    const devicePixelRatio = getDevicePixelRatio(options.useDevicePixels);\n    setDevicePixelRatio(gl, devicePixelRatio, options);\n    return;\n  }\n\n  const ext = gl.getExtension('STACKGL_resize_drawingbuffer');\n\n  if (ext && \"width\" in options && \"height\" in options) {\n    ext.resize(options.width, options.height);\n  }\n}\n\nfunction createBrowserContext(canvas, options) {\n  const {\n    onError\n  } = options;\n  let errorMessage = null;\n\n  const onCreateError = error => errorMessage = error.statusMessage || errorMessage;\n\n  canvas.addEventListener('webglcontextcreationerror', onCreateError, false);\n  const {\n    webgl1 = true,\n    webgl2 = true\n  } = options;\n  let gl = null;\n\n  if (webgl2) {\n    gl = gl || canvas.getContext('webgl2', options);\n    gl = gl || canvas.getContext('experimental-webgl2', options);\n  }\n\n  if (webgl1) {\n    gl = gl || canvas.getContext('webgl', options);\n    gl = gl || canvas.getContext('experimental-webgl', options);\n  }\n\n  canvas.removeEventListener('webglcontextcreationerror', onCreateError, false);\n\n  if (!gl) {\n    return onError(\"Failed to create \".concat(webgl2 && !webgl1 ? 'WebGL2' : 'WebGL', \" context: \").concat(errorMessage || 'Unknown error'));\n  }\n\n  if (options.onContextLost) {\n    canvas.addEventListener('webglcontextlost', options.onContextLost, false);\n  }\n\n  if (options.onContextRestored) {\n    canvas.addEventListener('webglcontextrestored', options.onContextRestored, false);\n  }\n\n  return gl;\n}\n\nfunction getCanvas(_ref) {\n  let {\n    canvas,\n    width = 800,\n    height = 600,\n    onError\n  } = _ref;\n  let targetCanvas;\n\n  if (typeof canvas === 'string') {\n    const isPageLoaded = isPage && document.readyState === 'complete';\n\n    if (!isPageLoaded) {\n      onError(\"createGLContext called on canvas '\".concat(canvas, \"' before page was loaded\"));\n    }\n\n    targetCanvas = document.getElementById(canvas);\n  } else if (canvas) {\n    targetCanvas = canvas;\n  } else {\n    targetCanvas = document.createElement('canvas');\n    targetCanvas.id = 'lumagl-canvas';\n    targetCanvas.style.width = Number.isFinite(width) ? \"\".concat(width, \"px\") : '100%';\n    targetCanvas.style.height = Number.isFinite(height) ? \"\".concat(height, \"px\") : '100%';\n    document.body.insertBefore(targetCanvas, document.body.firstChild);\n  }\n\n  return targetCanvas;\n}\n\nfunction logInfo(gl) {\n  const webGL = isWebGL2(gl) ? 'WebGL2' : 'WebGL1';\n  const info = getContextDebugInfo(gl);\n  const driver = info ? \"(\".concat(info.vendor, \",\").concat(info.renderer, \")\") : '';\n  const debug = gl.debug ? ' debug' : '';\n  log.info(1, \"\".concat(webGL).concat(debug, \" context \").concat(driver))();\n}\n\nfunction getVersion(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return 2;\n  }\n\n  return 1;\n}\n\nfunction setDevicePixelRatio(gl, devicePixelRatio, options) {\n  let clientWidth = 'width' in options ? options.width : gl.canvas.clientWidth;\n  let clientHeight = 'height' in options ? options.height : gl.canvas.clientHeight;\n\n  if (!clientWidth || !clientHeight) {\n    log.log(1, 'Canvas clientWidth/clientHeight is 0')();\n    devicePixelRatio = 1;\n    clientWidth = gl.canvas.width || 1;\n    clientHeight = gl.canvas.height || 1;\n  }\n\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  const cachedSize = gl.luma.canvasSizeInfo;\n\n  if (cachedSize.clientWidth !== clientWidth || cachedSize.clientHeight !== clientHeight || cachedSize.devicePixelRatio !== devicePixelRatio) {\n    let clampedPixelRatio = devicePixelRatio;\n    const canvasWidth = Math.floor(clientWidth * clampedPixelRatio);\n    const canvasHeight = Math.floor(clientHeight * clampedPixelRatio);\n    gl.canvas.width = canvasWidth;\n    gl.canvas.height = canvasHeight;\n\n    if (gl.drawingBufferWidth !== canvasWidth || gl.drawingBufferHeight !== canvasHeight) {\n      log.warn(\"Device pixel ratio clamped\")();\n      clampedPixelRatio = Math.min(gl.drawingBufferWidth / clientWidth, gl.drawingBufferHeight / clientHeight);\n      gl.canvas.width = Math.floor(clientWidth * clampedPixelRatio);\n      gl.canvas.height = Math.floor(clientHeight * clampedPixelRatio);\n    }\n\n    Object.assign(gl.luma.canvasSizeInfo, {\n      clientWidth,\n      clientHeight,\n      devicePixelRatio\n    });\n  }\n}\n//# sourceMappingURL=context.js.map","import { log } from '@luma.gl/gltools';\nimport { Stats } from '@probe.gl/stats';\nimport { isBrowser } from '@probe.gl/env';\nconst VERSION = typeof \"8.5.18\" !== 'undefined' ? \"8.5.18\" : 'untranspiled source';\nconst STARTUP_MESSAGE = 'set luma.log.level=1 (or higher) to trace rendering';\nexport class StatsManager {\n  constructor() {\n    this.stats = new Map();\n  }\n\n  get(name) {\n    if (!this.stats.has(name)) {\n      this.stats.set(name, new Stats({\n        id: name\n      }));\n    }\n\n    return this.stats.get(name);\n  }\n\n}\nconst lumaStats = new StatsManager();\n\nif (globalThis.luma && globalThis.luma.VERSION !== VERSION) {\n  throw new Error(\"luma.gl - multiple VERSIONs detected: \".concat(globalThis.luma.VERSION, \" vs \").concat(VERSION));\n}\n\nif (!globalThis.luma) {\n  if (isBrowser()) {\n    log.log(1, \"luma.gl \".concat(VERSION, \" - \").concat(STARTUP_MESSAGE))();\n  }\n\n  globalThis.luma = globalThis.luma || {\n    VERSION,\n    version: VERSION,\n    log,\n    stats: lumaStats,\n    globals: {\n      modules: {},\n      nodeIO: {}\n    }\n  };\n}\n\nexport { lumaStats };\nexport default globalThis.luma;\n//# sourceMappingURL=init.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { assert } from '../utils/assert';\nexport function getKeyValue(gl, name) {\n  if (typeof name !== 'string') {\n    return name;\n  }\n\n  const number = Number(name);\n\n  if (!isNaN(number)) {\n    return number;\n  }\n\n  name = name.replace(/^.*\\./, '');\n  const value = gl[name];\n  assert(value !== undefined, \"Accessing undefined constant GL.\".concat(name));\n  return value;\n}\nexport function getKey(gl, value) {\n  value = Number(value);\n\n  for (const key in gl) {\n    if (gl[key] === value) {\n      return \"GL.\".concat(key);\n    }\n  }\n\n  return String(value);\n}\nexport function getKeyType(gl, value) {\n  assert(value !== undefined, 'undefined key');\n  value = Number(value);\n\n  for (const key in gl) {\n    if (gl[key] === value) {\n      return \"GL.\".concat(key);\n    }\n  }\n\n  return String(value);\n}\n//# sourceMappingURL=constants-to-keys.js.map","import { assert } from './assert';\nconst uidCounters = {};\nexport function uid() {\n  let id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'id';\n  uidCounters[id] = uidCounters[id] || 1;\n  const count = uidCounters[id]++;\n  return \"\".concat(id, \"-\").concat(count);\n}\nexport function isPowerOfTwo(n) {\n  assert(typeof n === 'number', 'Input must be a number');\n  return n && (n & n - 1) === 0;\n}\nexport function isObjectEmpty(obj) {\n  let isEmpty = true;\n\n  for (const key in obj) {\n    isEmpty = false;\n    break;\n  }\n\n  return isEmpty;\n}\n//# sourceMappingURL=utils.js.map","import { log } from '@luma.gl/gltools';\nexport function stubRemovedMethods(instance, className, version, methodNames) {\n  const upgradeMessage = \"See luma.gl \".concat(version, \" Upgrade Guide at https://luma.gl/docs/upgrade-guide\");\n  const prototype = Object.getPrototypeOf(instance);\n  methodNames.forEach(methodName => {\n    if (prototype.methodName) {\n      return;\n    }\n\n    prototype[methodName] = () => {\n      log.removed(\"Calling removed method \".concat(className, \".\").concat(methodName, \": \"), upgradeMessage)();\n      throw new Error(methodName);\n    };\n  });\n}\n//# sourceMappingURL=stub-methods.js.map","import { isWebGL2, assertWebGLContext } from '@luma.gl/gltools';\nimport { lumaStats } from '../init';\nimport { getKey, getKeyValue } from '../webgl-utils/constants-to-keys';\nimport { assert } from '../utils/assert';\nimport { uid } from '../utils/utils';\nimport { stubRemovedMethods } from '../utils/stub-methods';\nconst ERR_RESOURCE_METHOD_UNDEFINED = 'Resource subclass must define virtual methods';\nexport default class Resource {\n  get [Symbol.toStringTag]() {\n    return 'Resource';\n  }\n\n  constructor(gl) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    assertWebGLContext(gl);\n    const {\n      id,\n      userData = {}\n    } = opts;\n    this.gl = gl;\n    this.gl2 = gl;\n    this.id = id || uid(this[Symbol.toStringTag]);\n    this.userData = userData;\n    this._bound = false;\n    this._handle = opts.handle;\n\n    if (this._handle === undefined) {\n      this._handle = this._createHandle();\n    }\n\n    this.byteLength = 0;\n\n    this._addStats();\n  }\n\n  toString() {\n    return \"\".concat(this[Symbol.toStringTag] || this.constructor.name, \"(\").concat(this.id, \")\");\n  }\n\n  get handle() {\n    return this._handle;\n  }\n\n  delete() {\n    let {\n      deleteChildren = false\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    const children = this._handle && this._deleteHandle(this._handle);\n\n    if (this._handle) {\n      this._removeStats();\n    }\n\n    this._handle = null;\n\n    if (children && deleteChildren) {\n      children.filter(Boolean).forEach(child => child.delete());\n    }\n\n    return this;\n  }\n\n  bind() {\n    let funcOrHandle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.handle;\n\n    if (typeof funcOrHandle !== 'function') {\n      this._bindHandle(funcOrHandle);\n\n      return this;\n    }\n\n    let value;\n\n    if (!this._bound) {\n      this._bindHandle(this.handle);\n\n      this._bound = true;\n      value = funcOrHandle();\n      this._bound = false;\n\n      this._bindHandle(null);\n    } else {\n      value = funcOrHandle();\n    }\n\n    return value;\n  }\n\n  unbind() {\n    this.bind(null);\n  }\n\n  getParameter(pname) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    pname = getKeyValue(this.gl, pname);\n    assert(pname);\n    const parameters = this.constructor.PARAMETERS || {};\n    const parameter = parameters[pname];\n\n    if (parameter) {\n      const isWebgl2 = isWebGL2(this.gl);\n      const parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n      if (!parameterAvailable) {\n        const webgl1Default = parameter.webgl1;\n        const webgl2Default = 'webgl2' in parameter ? parameter.webgl2 : parameter.webgl1;\n        const defaultValue = isWebgl2 ? webgl2Default : webgl1Default;\n        return defaultValue;\n      }\n    }\n\n    return this._getParameter(pname, opts);\n  }\n\n  getParameters() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      parameters,\n      keys\n    } = options;\n    const PARAMETERS = this.constructor.PARAMETERS || {};\n    const isWebgl2 = isWebGL2(this.gl);\n    const values = {};\n    const parameterKeys = parameters || Object.keys(PARAMETERS);\n\n    for (const pname of parameterKeys) {\n      const parameter = PARAMETERS[pname];\n      const parameterAvailable = parameter && (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n      if (parameterAvailable) {\n        const key = keys ? getKey(this.gl, pname) : pname;\n        values[key] = this.getParameter(pname, options);\n\n        if (keys && parameter.type === 'GLenum') {\n          values[key] = getKey(this.gl, values[key]);\n        }\n      }\n    }\n\n    return values;\n  }\n\n  setParameter(pname, value) {\n    pname = getKeyValue(this.gl, pname);\n    assert(pname);\n    const parameters = this.constructor.PARAMETERS || {};\n    const parameter = parameters[pname];\n\n    if (parameter) {\n      const isWebgl2 = isWebGL2(this.gl);\n      const parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n      if (!parameterAvailable) {\n        throw new Error('Parameter not available on this platform');\n      }\n\n      if (parameter.type === 'GLenum') {\n        value = getKeyValue(value);\n      }\n    }\n\n    this._setParameter(pname, value);\n\n    return this;\n  }\n\n  setParameters(parameters) {\n    for (const pname in parameters) {\n      this.setParameter(pname, parameters[pname]);\n    }\n\n    return this;\n  }\n\n  stubRemovedMethods(className, version, methodNames) {\n    return stubRemovedMethods(this, className, version, methodNames);\n  }\n\n  initialize(opts) {}\n\n  _createHandle() {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _deleteHandle() {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _bindHandle(handle) {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _getOptsFromHandle() {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _getParameter(pname, opts) {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _setParameter(pname, value) {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _context() {\n    this.gl.luma = this.gl.luma || {};\n    return this.gl.luma;\n  }\n\n  _addStats() {\n    const name = this[Symbol.toStringTag];\n    const stats = lumaStats.get('Resource Counts');\n    stats.get('Resources Created').incrementCount();\n    stats.get(\"\".concat(name, \"s Created\")).incrementCount();\n    stats.get(\"\".concat(name, \"s Active\")).incrementCount();\n  }\n\n  _removeStats() {\n    const name = this[Symbol.toStringTag];\n    const stats = lumaStats.get('Resource Counts');\n    stats.get(\"\".concat(name, \"s Active\")).decrementCount();\n  }\n\n  _trackAllocatedMemory(bytes) {\n    let name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this[Symbol.toStringTag];\n\n    this._trackAllocatedMemoryForContext(bytes, name);\n\n    this._trackAllocatedMemoryForContext(bytes, name, this.gl.canvas && this.gl.canvas.id);\n\n    this.byteLength = bytes;\n  }\n\n  _trackAllocatedMemoryForContext(bytes) {\n    let name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this[Symbol.toStringTag];\n    let id = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n    const stats = lumaStats.get(\"Memory Usage\".concat(id));\n    stats.get('GPU Memory').addCount(bytes);\n    stats.get(\"\".concat(name, \" Memory\")).addCount(bytes);\n  }\n\n  _trackDeallocatedMemory() {\n    let name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this[Symbol.toStringTag];\n\n    this._trackDeallocatedMemoryForContext(name);\n\n    this._trackDeallocatedMemoryForContext(name, this.gl.canvas && this.gl.canvas.id);\n\n    this.byteLength = 0;\n  }\n\n  _trackDeallocatedMemoryForContext() {\n    let name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this[Symbol.toStringTag];\n    let id = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    const stats = lumaStats.get(\"Memory Usage\".concat(id));\n    stats.get('GPU Memory').subtractCount(this.byteLength);\n    stats.get(\"\".concat(name, \" Memory\")).subtractCount(this.byteLength);\n  }\n\n}\n//# sourceMappingURL=resource.js.map","const ERR_TYPE_DEDUCTION = 'Failed to deduce GL constant from typed array';\nexport function getGLTypeFromTypedArray(arrayOrType) {\n  const type = ArrayBuffer.isView(arrayOrType) ? arrayOrType.constructor : arrayOrType;\n\n  switch (type) {\n    case Float32Array:\n      return 5126;\n\n    case Uint16Array:\n      return 5123;\n\n    case Uint32Array:\n      return 5125;\n\n    case Uint8Array:\n      return 5121;\n\n    case Uint8ClampedArray:\n      return 5121;\n\n    case Int8Array:\n      return 5120;\n\n    case Int16Array:\n      return 5122;\n\n    case Int32Array:\n      return 5124;\n\n    default:\n      throw new Error(ERR_TYPE_DEDUCTION);\n  }\n}\nexport function getTypedArrayFromGLType(glType) {\n  let {\n    clamped = true\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return clamped ? Uint8ClampedArray : Uint8Array;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Failed to deduce typed array type from GL constant');\n  }\n}\nexport function flipRows(_ref) {\n  let {\n    data,\n    width,\n    height,\n    bytesPerPixel = 4,\n    temp\n  } = _ref;\n  const bytesPerRow = width * bytesPerPixel;\n  temp = temp || new Uint8Array(bytesPerRow);\n\n  for (let y = 0; y < height / 2; ++y) {\n    const topOffset = y * bytesPerRow;\n    const bottomOffset = (height - y - 1) * bytesPerRow;\n    temp.set(data.subarray(topOffset, topOffset + bytesPerRow));\n    data.copyWithin(topOffset, bottomOffset, bottomOffset + bytesPerRow);\n    data.set(temp, bottomOffset);\n  }\n}\nexport function scalePixels(_ref2) {\n  let {\n    data,\n    width,\n    height\n  } = _ref2;\n  const newWidth = Math.round(width / 2);\n  const newHeight = Math.round(height / 2);\n  const newData = new Uint8Array(newWidth * newHeight * 4);\n\n  for (let y = 0; y < newHeight; y++) {\n    for (let x = 0; x < newWidth; x++) {\n      for (let c = 0; c < 4; c++) {\n        newData[(y * newWidth + x) * 4 + c] = data[(y * 2 * width + x * 2) * 4 + c];\n      }\n    }\n  }\n\n  return {\n    data: newData,\n    width: newWidth,\n    height: newHeight\n  };\n}\n//# sourceMappingURL=typed-array-utils.js.map","import { log } from '@luma.gl/gltools';\nexport function checkProps(className, props, propChecks) {\n  const {\n    removedProps = {},\n    deprecatedProps = {},\n    replacedProps = {}\n  } = propChecks;\n\n  for (const propName in removedProps) {\n    if (propName in props) {\n      const replacementProp = removedProps[propName];\n      const replacement = replacementProp ? \"\".concat(className, \".\").concat(removedProps[propName]) : 'N/A';\n      log.removed(\"\".concat(className, \".\").concat(propName), replacement)();\n    }\n  }\n\n  for (const propName in deprecatedProps) {\n    if (propName in props) {\n      const replacementProp = deprecatedProps[propName];\n      log.deprecated(\"\".concat(className, \".\").concat(propName), \"\".concat(className, \".\").concat(replacementProp))();\n    }\n  }\n\n  let newProps = null;\n\n  for (const propName in replacedProps) {\n    if (propName in props) {\n      const replacementProp = replacedProps[propName];\n      log.deprecated(\"\".concat(className, \".\").concat(propName), \"\".concat(className, \".\").concat(replacementProp))();\n      newProps = newProps || Object.assign({}, props);\n      newProps[replacementProp] = props[propName];\n      delete newProps[propName];\n    }\n  }\n\n  return newProps || props;\n}\n//# sourceMappingURL=check-props.js.map","import { getTypedArrayFromGLType } from '../webgl-utils/typed-array-utils';\nimport { assert } from '../utils/assert';\nimport { checkProps } from '../utils/check-props';\nconst DEFAULT_ACCESSOR_VALUES = {\n  offset: 0,\n  stride: 0,\n  type: 5126,\n  size: 1,\n  divisor: 0,\n  normalized: false,\n  integer: false\n};\nconst PROP_CHECKS = {\n  deprecatedProps: {\n    instanced: 'divisor',\n    isInstanced: 'divisor'\n  }\n};\nexport default class Accessor {\n  static getBytesPerElement(accessor) {\n    const ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n    return ArrayType.BYTES_PER_ELEMENT;\n  }\n\n  static getBytesPerVertex(accessor) {\n    assert(accessor.size);\n    const ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n    return ArrayType.BYTES_PER_ELEMENT * accessor.size;\n  }\n\n  static resolve() {\n    for (var _len = arguments.length, accessors = new Array(_len), _key = 0; _key < _len; _key++) {\n      accessors[_key] = arguments[_key];\n    }\n\n    return new Accessor(...[DEFAULT_ACCESSOR_VALUES, ...accessors]);\n  }\n\n  constructor() {\n    for (var _len2 = arguments.length, accessors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      accessors[_key2] = arguments[_key2];\n    }\n\n    accessors.forEach(accessor => this._assign(accessor));\n    Object.freeze(this);\n  }\n\n  toString() {\n    return JSON.stringify(this);\n  }\n\n  get BYTES_PER_ELEMENT() {\n    return Accessor.getBytesPerElement(this);\n  }\n\n  get BYTES_PER_VERTEX() {\n    return Accessor.getBytesPerVertex(this);\n  }\n\n  _assign() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    props = checkProps('Accessor', props, PROP_CHECKS);\n\n    if (props.type !== undefined) {\n      this.type = props.type;\n\n      if (props.type === 5124 || props.type === 5125) {\n        this.integer = true;\n      }\n    }\n\n    if (props.size !== undefined) {\n      this.size = props.size;\n    }\n\n    if (props.offset !== undefined) {\n      this.offset = props.offset;\n    }\n\n    if (props.stride !== undefined) {\n      this.stride = props.stride;\n    }\n\n    if (props.normalized !== undefined) {\n      this.normalized = props.normalized;\n    }\n\n    if (props.integer !== undefined) {\n      this.integer = props.integer;\n    }\n\n    if (props.divisor !== undefined) {\n      this.divisor = props.divisor;\n    }\n\n    if (props.buffer !== undefined) {\n      this.buffer = props.buffer;\n    }\n\n    if (props.index !== undefined) {\n      if (typeof props.index === 'boolean') {\n        this.index = props.index ? 1 : 0;\n      } else {\n        this.index = props.index;\n      }\n    }\n\n    if (props.instanced !== undefined) {\n      this.divisor = props.instanced ? 1 : 0;\n    }\n\n    if (props.isInstanced !== undefined) {\n      this.divisor = props.isInstanced ? 1 : 0;\n    }\n\n    return this;\n  }\n\n}\nexport { DEFAULT_ACCESSOR_VALUES };\n//# sourceMappingURL=accessor.js.map","import Resource from './resource';\nimport Accessor from './accessor';\nimport { getGLTypeFromTypedArray, getTypedArrayFromGLType } from '../webgl-utils/typed-array-utils';\nimport { assertWebGL2Context, log } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\nimport { checkProps } from '../utils/check-props';\nconst DEBUG_DATA_LENGTH = 10;\nconst DEPRECATED_PROPS = {\n  offset: 'accessor.offset',\n  stride: 'accessor.stride',\n  type: 'accessor.type',\n  size: 'accessor.size',\n  divisor: 'accessor.divisor',\n  normalized: 'accessor.normalized',\n  integer: 'accessor.integer',\n  instanced: 'accessor.divisor',\n  isInstanced: 'accessor.divisor'\n};\nconst PROP_CHECKS_INITIALIZE = {\n  removedProps: {},\n  replacedProps: {\n    bytes: 'byteLength'\n  },\n  deprecatedProps: DEPRECATED_PROPS\n};\nconst PROP_CHECKS_SET_PROPS = {\n  removedProps: DEPRECATED_PROPS\n};\nexport default class Buffer extends Resource {\n  get [Symbol.toStringTag]() {\n    return 'Buffer';\n  }\n\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(gl, props);\n    this.stubRemovedMethods('Buffer', 'v6.0', ['layout', 'setLayout', 'getIndexedParameter']);\n    this.target = props.target || (this.gl.webgl2 ? 36662 : 34962);\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n  getElementCount() {\n    let accessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.accessor;\n    return Math.round(this.byteLength / Accessor.getBytesPerElement(accessor));\n  }\n\n  getVertexCount() {\n    let accessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.accessor;\n    return Math.round(this.byteLength / Accessor.getBytesPerVertex(accessor));\n  }\n\n  initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (ArrayBuffer.isView(props)) {\n      props = {\n        data: props\n      };\n    }\n\n    if (Number.isFinite(props)) {\n      props = {\n        byteLength: props\n      };\n    }\n\n    props = checkProps('Buffer', props, PROP_CHECKS_INITIALIZE);\n    this.usage = props.usage || 35044;\n    this.debugData = null;\n    this.setAccessor(Object.assign({}, props, props.accessor));\n\n    if (props.data) {\n      this._setData(props.data, props.offset, props.byteLength);\n    } else {\n      this._setByteLength(props.byteLength || 0);\n    }\n\n    return this;\n  }\n\n  setProps(props) {\n    props = checkProps('Buffer', props, PROP_CHECKS_SET_PROPS);\n\n    if ('accessor' in props) {\n      this.setAccessor(props.accessor);\n    }\n\n    return this;\n  }\n\n  setAccessor(accessor) {\n    accessor = Object.assign({}, accessor);\n    delete accessor.buffer;\n    this.accessor = new Accessor(accessor);\n    return this;\n  }\n\n  reallocate(byteLength) {\n    if (byteLength > this.byteLength) {\n      this._setByteLength(byteLength);\n\n      return true;\n    }\n\n    this.bytesUsed = byteLength;\n    return false;\n  }\n\n  setData(props) {\n    return this.initialize(props);\n  }\n\n  subData(props) {\n    if (ArrayBuffer.isView(props)) {\n      props = {\n        data: props\n      };\n    }\n\n    const {\n      data,\n      offset = 0,\n      srcOffset = 0\n    } = props;\n    const byteLength = props.byteLength || props.length;\n    assert(data);\n    const target = this.gl.webgl2 ? 36663 : this.target;\n    this.gl.bindBuffer(target, this.handle);\n\n    if (srcOffset !== 0 || byteLength !== undefined) {\n      assertWebGL2Context(this.gl);\n      this.gl.bufferSubData(this.target, offset, data, srcOffset, byteLength);\n    } else {\n      this.gl.bufferSubData(target, offset, data);\n    }\n\n    this.gl.bindBuffer(target, null);\n    this.debugData = null;\n\n    this._inferType(data);\n\n    return this;\n  }\n\n  copyData(_ref) {\n    let {\n      sourceBuffer,\n      readOffset = 0,\n      writeOffset = 0,\n      size\n    } = _ref;\n    const {\n      gl\n    } = this;\n    assertWebGL2Context(gl);\n    gl.bindBuffer(36662, sourceBuffer.handle);\n    gl.bindBuffer(36663, this.handle);\n    gl.copyBufferSubData(36662, 36663, readOffset, writeOffset, size);\n    gl.bindBuffer(36662, null);\n    gl.bindBuffer(36663, null);\n    this.debugData = null;\n    return this;\n  }\n\n  getData() {\n    let {\n      dstData = null,\n      srcByteOffset = 0,\n      dstOffset = 0,\n      length = 0\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    assertWebGL2Context(this.gl);\n    const ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n      clamped: false\n    });\n\n    const sourceAvailableElementCount = this._getAvailableElementCount(srcByteOffset);\n\n    const dstElementOffset = dstOffset;\n    let dstAvailableElementCount;\n    let dstElementCount;\n\n    if (dstData) {\n      dstElementCount = dstData.length;\n      dstAvailableElementCount = dstElementCount - dstElementOffset;\n    } else {\n      dstAvailableElementCount = Math.min(sourceAvailableElementCount, length || sourceAvailableElementCount);\n      dstElementCount = dstElementOffset + dstAvailableElementCount;\n    }\n\n    const copyElementCount = Math.min(sourceAvailableElementCount, dstAvailableElementCount);\n    length = length || copyElementCount;\n    assert(length <= copyElementCount);\n    dstData = dstData || new ArrayType(dstElementCount);\n    this.gl.bindBuffer(36662, this.handle);\n    this.gl.getBufferSubData(36662, srcByteOffset, dstData, dstOffset, length);\n    this.gl.bindBuffer(36662, null);\n    return dstData;\n  }\n\n  bind() {\n    let {\n      target = this.target,\n      index = this.accessor && this.accessor.index,\n      offset = 0,\n      size\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (target === 35345 || target === 35982) {\n      if (size !== undefined) {\n        this.gl.bindBufferRange(target, index, this.handle, offset, size);\n      } else {\n        assert(offset === 0);\n        this.gl.bindBufferBase(target, index, this.handle);\n      }\n    } else {\n      this.gl.bindBuffer(target, this.handle);\n    }\n\n    return this;\n  }\n\n  unbind() {\n    let {\n      target = this.target,\n      index = this.accessor && this.accessor.index\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const isIndexedBuffer = target === 35345 || target === 35982;\n\n    if (isIndexedBuffer) {\n      this.gl.bindBufferBase(target, index, null);\n    } else {\n      this.gl.bindBuffer(target, null);\n    }\n\n    return this;\n  }\n\n  getDebugData() {\n    if (!this.debugData) {\n      this.debugData = this.getData({\n        length: Math.min(DEBUG_DATA_LENGTH, this.byteLength)\n      });\n      return {\n        data: this.debugData,\n        changed: true\n      };\n    }\n\n    return {\n      data: this.debugData,\n      changed: false\n    };\n  }\n\n  invalidateDebugData() {\n    this.debugData = null;\n  }\n\n  _setData(data) {\n    let offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    let byteLength = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : data.byteLength + offset;\n    assert(ArrayBuffer.isView(data));\n\n    this._trackDeallocatedMemory();\n\n    const target = this._getTarget();\n\n    this.gl.bindBuffer(target, this.handle);\n    this.gl.bufferData(target, byteLength, this.usage);\n    this.gl.bufferSubData(target, offset, data);\n    this.gl.bindBuffer(target, null);\n    this.debugData = data.slice(0, DEBUG_DATA_LENGTH);\n    this.bytesUsed = byteLength;\n\n    this._trackAllocatedMemory(byteLength);\n\n    const type = getGLTypeFromTypedArray(data);\n    assert(type);\n    this.setAccessor(new Accessor(this.accessor, {\n      type\n    }));\n    return this;\n  }\n\n  _setByteLength(byteLength) {\n    let usage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.usage;\n    assert(byteLength >= 0);\n\n    this._trackDeallocatedMemory();\n\n    let data = byteLength;\n\n    if (byteLength === 0) {\n      data = new Float32Array(0);\n    }\n\n    const target = this._getTarget();\n\n    this.gl.bindBuffer(target, this.handle);\n    this.gl.bufferData(target, data, usage);\n    this.gl.bindBuffer(target, null);\n    this.usage = usage;\n    this.debugData = null;\n    this.bytesUsed = byteLength;\n\n    this._trackAllocatedMemory(byteLength);\n\n    return this;\n  }\n\n  _getTarget() {\n    return this.gl.webgl2 ? 36663 : this.target;\n  }\n\n  _getAvailableElementCount(srcByteOffset) {\n    const ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n      clamped: false\n    });\n    const sourceElementOffset = srcByteOffset / ArrayType.BYTES_PER_ELEMENT;\n    return this.getElementCount() - sourceElementOffset;\n  }\n\n  _inferType(data) {\n    if (!this.accessor.type) {\n      this.setAccessor(new Accessor(this.accessor, {\n        type: getGLTypeFromTypedArray(data)\n      }));\n    }\n  }\n\n  _createHandle() {\n    return this.gl.createBuffer();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteBuffer(this.handle);\n\n    this._trackDeallocatedMemory();\n  }\n\n  _getParameter(pname) {\n    this.gl.bindBuffer(this.target, this.handle);\n    const value = this.gl.getBufferParameter(this.target, pname);\n    this.gl.bindBuffer(this.target, null);\n    return value;\n  }\n\n  get type() {\n    log.deprecated('Buffer.type', 'Buffer.accessor.type')();\n    return this.accessor.type;\n  }\n\n  get bytes() {\n    log.deprecated('Buffer.bytes', 'Buffer.byteLength')();\n    return this.byteLength;\n  }\n\n  setByteLength(byteLength) {\n    log.deprecated('setByteLength', 'reallocate')();\n    return this.reallocate(byteLength);\n  }\n\n  updateAccessor(opts) {\n    log.deprecated('updateAccessor(...)', 'setAccessor(new Accessor(buffer.accessor, ...)')();\n    this.accessor = new Accessor(this.accessor, opts);\n    return this;\n  }\n\n}\n//# sourceMappingURL=buffer.js.map","import { isWebGL2 } from '@luma.gl/gltools';\nexport const TEXTURE_FORMATS = {\n  [6407]: {\n    dataFormat: 6407,\n    types: [5121, 33635]\n  },\n  [6408]: {\n    dataFormat: 6408,\n    types: [5121, 32819, 32820]\n  },\n  [6406]: {\n    dataFormat: 6406,\n    types: [5121]\n  },\n  [6409]: {\n    dataFormat: 6409,\n    types: [5121]\n  },\n  [6410]: {\n    dataFormat: 6410,\n    types: [5121]\n  },\n  [33326]: {\n    dataFormat: 6403,\n    types: [5126],\n    gl2: true\n  },\n  [33328]: {\n    dataFormat: 33319,\n    types: [5126],\n    gl2: true\n  },\n  [34837]: {\n    dataFormat: 6407,\n    types: [5126],\n    gl2: true\n  },\n  [34836]: {\n    dataFormat: 6408,\n    types: [5126],\n    gl2: true\n  }\n};\nexport const DATA_FORMAT_CHANNELS = {\n  [6403]: 1,\n  [36244]: 1,\n  [33319]: 2,\n  [33320]: 2,\n  [6407]: 3,\n  [36248]: 3,\n  [6408]: 4,\n  [36249]: 4,\n  [6402]: 1,\n  [34041]: 1,\n  [6406]: 1,\n  [6409]: 1,\n  [6410]: 2\n};\nexport const TYPE_SIZES = {\n  [5126]: 4,\n  [5125]: 4,\n  [5124]: 4,\n  [5123]: 2,\n  [5122]: 2,\n  [5131]: 2,\n  [5120]: 1,\n  [5121]: 1\n};\nexport function isFormatSupported(gl, format) {\n  const info = TEXTURE_FORMATS[format];\n\n  if (!info) {\n    return false;\n  }\n\n  if (info.gl1 === undefined && info.gl2 === undefined) {\n    return true;\n  }\n\n  const value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n  return typeof value === 'string' ? gl.getExtension(value) : value;\n}\nexport function isLinearFilteringSupported(gl, format) {\n  const info = TEXTURE_FORMATS[format];\n\n  switch (info && info.types[0]) {\n    case 5126:\n      return gl.getExtension('OES_texture_float_linear');\n\n    case 5131:\n      return gl.getExtension('OES_texture_half_float_linear');\n\n    default:\n      return true;\n  }\n}\n//# sourceMappingURL=texture-formats.js.map","import { isWebGL2, assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { TEXTURE_FORMATS, DATA_FORMAT_CHANNELS, TYPE_SIZES, isFormatSupported, isLinearFilteringSupported } from './texture-formats';\nimport { assert } from '../utils/assert';\nimport { uid, isPowerOfTwo } from '../utils/utils';\nconst NPOT_MIN_FILTERS = [9729, 9728];\n\nconst WebGLBuffer = globalThis.WebGLBuffer || function WebGLBuffer() {};\n\nexport default class Texture extends Resource {\n  get [Symbol.toStringTag]() {\n    return 'Texture';\n  }\n\n  static isSupported(gl) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const {\n      format,\n      linearFiltering\n    } = opts;\n    let supported = true;\n\n    if (format) {\n      supported = supported && isFormatSupported(gl, format);\n      supported = supported && (!linearFiltering || isLinearFilteringSupported(gl, format));\n    }\n\n    return supported;\n  }\n\n  constructor(gl, props) {\n    const {\n      id = uid('texture'),\n      handle,\n      target\n    } = props;\n    super(gl, {\n      id,\n      handle\n    });\n    this.target = target;\n    this.textureUnit = undefined;\n    this.loaded = false;\n    this.width = undefined;\n    this.height = undefined;\n    this.depth = undefined;\n    this.format = undefined;\n    this.type = undefined;\n    this.dataFormat = undefined;\n    this.border = undefined;\n    this.textureUnit = undefined;\n    this.mipmaps = undefined;\n  }\n\n  toString() {\n    return \"Texture(\".concat(this.id, \",\").concat(this.width, \"x\").concat(this.height, \")\");\n  }\n\n  initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let data = props.data;\n\n    if (data instanceof Promise) {\n      data.then(resolvedImageData => this.initialize(Object.assign({}, props, {\n        pixels: resolvedImageData,\n        data: resolvedImageData\n      })));\n      return this;\n    }\n\n    const isVideo = typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement;\n\n    if (isVideo && data.readyState < HTMLVideoElement.HAVE_METADATA) {\n      this._video = null;\n      data.addEventListener('loadeddata', () => this.initialize(props));\n      return this;\n    }\n\n    const {\n      pixels = null,\n      format = 6408,\n      border = 0,\n      recreate = false,\n      parameters = {},\n      pixelStore = {},\n      textureUnit = undefined\n    } = props;\n\n    if (!data) {\n      data = pixels;\n    }\n\n    let {\n      width,\n      height,\n      dataFormat,\n      type,\n      compressed = false,\n      mipmaps = true\n    } = props;\n    const {\n      depth = 0\n    } = props;\n    ({\n      width,\n      height,\n      compressed,\n      dataFormat,\n      type\n    } = this._deduceParameters({\n      format,\n      type,\n      dataFormat,\n      compressed,\n      data,\n      width,\n      height\n    }));\n    this.width = width;\n    this.height = height;\n    this.depth = depth;\n    this.format = format;\n    this.type = type;\n    this.dataFormat = dataFormat;\n    this.border = border;\n    this.textureUnit = textureUnit;\n\n    if (Number.isFinite(this.textureUnit)) {\n      this.gl.activeTexture(33984 + this.textureUnit);\n      this.gl.bindTexture(this.target, this.handle);\n    }\n\n    if (mipmaps && this._isNPOT()) {\n      log.warn(\"texture: \".concat(this, \" is Non-Power-Of-Two, disabling mipmaping\"))();\n      mipmaps = false;\n\n      this._updateForNPOT(parameters);\n    }\n\n    this.mipmaps = mipmaps;\n    this.setImageData({\n      data,\n      width,\n      height,\n      depth,\n      format,\n      type,\n      dataFormat,\n      border,\n      mipmaps,\n      parameters: pixelStore,\n      compressed\n    });\n\n    if (mipmaps) {\n      this.generateMipmap();\n    }\n\n    this.setParameters(parameters);\n\n    if (recreate) {\n      this.data = data;\n    }\n\n    if (isVideo) {\n      this._video = {\n        video: data,\n        parameters,\n        lastTime: data.readyState >= HTMLVideoElement.HAVE_CURRENT_DATA ? data.currentTime : -1\n      };\n    }\n\n    return this;\n  }\n\n  update() {\n    if (this._video) {\n      const {\n        video,\n        parameters,\n        lastTime\n      } = this._video;\n\n      if (lastTime === video.currentTime || video.readyState < HTMLVideoElement.HAVE_CURRENT_DATA) {\n        return;\n      }\n\n      this.setSubImageData({\n        data: video,\n        parameters\n      });\n\n      if (this.mipmaps) {\n        this.generateMipmap();\n      }\n\n      this._video.lastTime = video.currentTime;\n    }\n  }\n\n  resize(_ref) {\n    let {\n      height,\n      width,\n      mipmaps = false\n    } = _ref;\n\n    if (width !== this.width || height !== this.height) {\n      return this.initialize({\n        width,\n        height,\n        format: this.format,\n        type: this.type,\n        dataFormat: this.dataFormat,\n        border: this.border,\n        mipmaps\n      });\n    }\n\n    return this;\n  }\n\n  generateMipmap() {\n    let params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (this._isNPOT()) {\n      log.warn(\"texture: \".concat(this, \" is Non-Power-Of-Two, disabling mipmaping\"))();\n      return this;\n    }\n\n    this.mipmaps = true;\n    this.gl.bindTexture(this.target, this.handle);\n    withParameters(this.gl, params, () => {\n      this.gl.generateMipmap(this.target);\n    });\n    this.gl.bindTexture(this.target, null);\n    return this;\n  }\n\n  setImageData(options) {\n    this._trackDeallocatedMemory('Texture');\n\n    const {\n      target = this.target,\n      pixels = null,\n      level = 0,\n      format = this.format,\n      border = this.border,\n      offset = 0,\n      parameters = {}\n    } = options;\n    let {\n      data = null,\n      type = this.type,\n      width = this.width,\n      height = this.height,\n      dataFormat = this.dataFormat,\n      compressed = false\n    } = options;\n\n    if (!data) {\n      data = pixels;\n    }\n\n    ({\n      type,\n      dataFormat,\n      compressed,\n      width,\n      height\n    } = this._deduceParameters({\n      format,\n      type,\n      dataFormat,\n      compressed,\n      data,\n      width,\n      height\n    }));\n    const {\n      gl\n    } = this;\n    gl.bindTexture(this.target, this.handle);\n    let dataType = null;\n    ({\n      data,\n      dataType\n    } = this._getDataType({\n      data,\n      compressed\n    }));\n    let gl2;\n    let compressedTextureSize = 0;\n    withParameters(this.gl, parameters, () => {\n      switch (dataType) {\n        case 'null':\n          gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n          break;\n\n        case 'typed-array':\n          gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data, offset);\n          break;\n\n        case 'buffer':\n          gl2 = assertWebGL2Context(gl);\n          gl2.bindBuffer(35052, data.handle || data);\n          gl2.texImage2D(target, level, format, width, height, border, dataFormat, type, offset);\n          gl2.bindBuffer(35052, null);\n          break;\n\n        case 'browser-object':\n          if (isWebGL2(gl)) {\n            gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n          } else {\n            gl.texImage2D(target, level, format, dataFormat, type, data);\n          }\n\n          break;\n\n        case 'compressed':\n          for (const [levelIndex, levelData] of data.entries()) {\n            gl.compressedTexImage2D(target, levelIndex, levelData.format, levelData.width, levelData.height, border, levelData.data);\n            compressedTextureSize += levelData.levelSize;\n          }\n\n          break;\n\n        default:\n          assert(false, 'Unknown image data type');\n      }\n    });\n\n    if (dataType === 'compressed') {\n      this._trackAllocatedMemory(compressedTextureSize, 'Texture');\n    } else if (data && data.byteLength) {\n      this._trackAllocatedMemory(data.byteLength, 'Texture');\n    } else {\n      const channels = DATA_FORMAT_CHANNELS[this.dataFormat] || 4;\n      const channelSize = TYPE_SIZES[this.type] || 1;\n\n      this._trackAllocatedMemory(this.width * this.height * channels * channelSize, 'Texture');\n    }\n\n    this.loaded = true;\n    return this;\n  }\n\n  setSubImageData(_ref2) {\n    let {\n      target = this.target,\n      pixels = null,\n      data = null,\n      x = 0,\n      y = 0,\n      width = this.width,\n      height = this.height,\n      level = 0,\n      format = this.format,\n      type = this.type,\n      dataFormat = this.dataFormat,\n      compressed = false,\n      offset = 0,\n      border = this.border,\n      parameters = {}\n    } = _ref2;\n    ({\n      type,\n      dataFormat,\n      compressed,\n      width,\n      height\n    } = this._deduceParameters({\n      format,\n      type,\n      dataFormat,\n      compressed,\n      data,\n      width,\n      height\n    }));\n    assert(this.depth === 0, 'texSubImage not supported for 3D textures');\n\n    if (!data) {\n      data = pixels;\n    }\n\n    if (data && data.data) {\n      const ndarray = data;\n      data = ndarray.data;\n      width = ndarray.shape[0];\n      height = ndarray.shape[1];\n    }\n\n    if (data instanceof Buffer) {\n      data = data.handle;\n    }\n\n    this.gl.bindTexture(this.target, this.handle);\n    withParameters(this.gl, parameters, () => {\n      if (compressed) {\n        this.gl.compressedTexSubImage2D(target, level, x, y, width, height, format, data);\n      } else if (data === null) {\n        this.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, null);\n      } else if (ArrayBuffer.isView(data)) {\n        this.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data, offset);\n      } else if (data instanceof WebGLBuffer) {\n        const gl2 = assertWebGL2Context(this.gl);\n        gl2.bindBuffer(35052, data);\n        gl2.texSubImage2D(target, level, x, y, width, height, dataFormat, type, offset);\n        gl2.bindBuffer(35052, null);\n      } else if (isWebGL2(this.gl)) {\n        const gl2 = assertWebGL2Context(this.gl);\n        gl2.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data);\n      } else {\n        this.gl.texSubImage2D(target, level, x, y, dataFormat, type, data);\n      }\n    });\n    this.gl.bindTexture(this.target, null);\n  }\n\n  copyFramebuffer() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    log.error('Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n    return null;\n  }\n\n  getActiveUnit() {\n    return this.gl.getParameter(34016) - 33984;\n  }\n\n  bind() {\n    let textureUnit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.textureUnit;\n    const {\n      gl\n    } = this;\n\n    if (textureUnit !== undefined) {\n      this.textureUnit = textureUnit;\n      gl.activeTexture(33984 + textureUnit);\n    }\n\n    gl.bindTexture(this.target, this.handle);\n    return textureUnit;\n  }\n\n  unbind() {\n    let textureUnit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.textureUnit;\n    const {\n      gl\n    } = this;\n\n    if (textureUnit !== undefined) {\n      this.textureUnit = textureUnit;\n      gl.activeTexture(33984 + textureUnit);\n    }\n\n    gl.bindTexture(this.target, null);\n    return textureUnit;\n  }\n\n  _getDataType(_ref3) {\n    let {\n      data,\n      compressed = false\n    } = _ref3;\n\n    if (compressed) {\n      return {\n        data,\n        dataType: 'compressed'\n      };\n    }\n\n    if (data === null) {\n      return {\n        data,\n        dataType: 'null'\n      };\n    }\n\n    if (ArrayBuffer.isView(data)) {\n      return {\n        data,\n        dataType: 'typed-array'\n      };\n    }\n\n    if (data instanceof Buffer) {\n      return {\n        data: data.handle,\n        dataType: 'buffer'\n      };\n    }\n\n    if (data instanceof WebGLBuffer) {\n      return {\n        data,\n        dataType: 'buffer'\n      };\n    }\n\n    return {\n      data,\n      dataType: 'browser-object'\n    };\n  }\n\n  _deduceParameters(opts) {\n    const {\n      format,\n      data\n    } = opts;\n    let {\n      width,\n      height,\n      dataFormat,\n      type,\n      compressed\n    } = opts;\n    const textureFormat = TEXTURE_FORMATS[format];\n    dataFormat = dataFormat || textureFormat && textureFormat.dataFormat;\n    type = type || textureFormat && textureFormat.types[0];\n    compressed = compressed || textureFormat && textureFormat.compressed;\n    ({\n      width,\n      height\n    } = this._deduceImageSize(data, width, height));\n    return {\n      dataFormat,\n      type,\n      compressed,\n      width,\n      height,\n      format,\n      data\n    };\n  }\n\n  _deduceImageSize(data, width, height) {\n    let size;\n\n    if (typeof ImageData !== 'undefined' && data instanceof ImageData) {\n      size = {\n        width: data.width,\n        height: data.height\n      };\n    } else if (typeof HTMLImageElement !== 'undefined' && data instanceof HTMLImageElement) {\n      size = {\n        width: data.naturalWidth,\n        height: data.naturalHeight\n      };\n    } else if (typeof HTMLCanvasElement !== 'undefined' && data instanceof HTMLCanvasElement) {\n      size = {\n        width: data.width,\n        height: data.height\n      };\n    } else if (typeof ImageBitmap !== 'undefined' && data instanceof ImageBitmap) {\n      size = {\n        width: data.width,\n        height: data.height\n      };\n    } else if (typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement) {\n      size = {\n        width: data.videoWidth,\n        height: data.videoHeight\n      };\n    } else if (!data) {\n      size = {\n        width: width >= 0 ? width : 1,\n        height: height >= 0 ? height : 1\n      };\n    } else {\n      size = {\n        width,\n        height\n      };\n    }\n\n    assert(size, 'Could not deduced texture size');\n    assert(width === undefined || size.width === width, 'Deduced texture width does not match supplied width');\n    assert(height === undefined || size.height === height, 'Deduced texture height does not match supplied height');\n    return size;\n  }\n\n  _createHandle() {\n    return this.gl.createTexture();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteTexture(this.handle);\n\n    this._trackDeallocatedMemory('Texture');\n  }\n\n  _getParameter(pname) {\n    switch (pname) {\n      case 4096:\n        return this.width;\n\n      case 4097:\n        return this.height;\n\n      default:\n        this.gl.bindTexture(this.target, this.handle);\n        const value = this.gl.getTexParameter(this.target, pname);\n        this.gl.bindTexture(this.target, null);\n        return value;\n    }\n  }\n\n  _setParameter(pname, param) {\n    this.gl.bindTexture(this.target, this.handle);\n    param = this._getNPOTParam(pname, param);\n\n    switch (pname) {\n      case 33082:\n      case 33083:\n        this.gl.texParameterf(this.handle, pname, param);\n        break;\n\n      case 4096:\n      case 4097:\n        assert(false);\n        break;\n\n      default:\n        this.gl.texParameteri(this.target, pname, param);\n        break;\n    }\n\n    this.gl.bindTexture(this.target, null);\n    return this;\n  }\n\n  _isNPOT() {\n    if (isWebGL2(this.gl)) {\n      return false;\n    }\n\n    if (!this.width || !this.height) {\n      return false;\n    }\n\n    return !isPowerOfTwo(this.width) || !isPowerOfTwo(this.height);\n  }\n\n  _updateForNPOT(parameters) {\n    if (parameters[this.gl.TEXTURE_MIN_FILTER] === undefined) {\n      parameters[this.gl.TEXTURE_MIN_FILTER] = this.gl.LINEAR;\n    }\n\n    if (parameters[this.gl.TEXTURE_WRAP_S] === undefined) {\n      parameters[this.gl.TEXTURE_WRAP_S] = this.gl.CLAMP_TO_EDGE;\n    }\n\n    if (parameters[this.gl.TEXTURE_WRAP_T] === undefined) {\n      parameters[this.gl.TEXTURE_WRAP_T] = this.gl.CLAMP_TO_EDGE;\n    }\n  }\n\n  _getNPOTParam(pname, param) {\n    if (this._isNPOT()) {\n      switch (pname) {\n        case 10241:\n          if (NPOT_MIN_FILTERS.indexOf(param) === -1) {\n            param = 9729;\n          }\n\n          break;\n\n        case 10242:\n        case 10243:\n          if (param !== 33071) {\n            param = 33071;\n          }\n\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    return param;\n  }\n\n}\n//# sourceMappingURL=texture.js.map","import { assertWebGLContext } from '@luma.gl/gltools';\nimport Texture from './texture';\nimport { loadImage } from '../utils/load-file';\nexport default class Texture2D extends Texture {\n  get [Symbol.toStringTag]() {\n    return 'Texture2D';\n  }\n\n  static isSupported(gl, opts) {\n    return Texture.isSupported(gl, opts);\n  }\n\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    assertWebGLContext(gl);\n\n    if (props instanceof Promise || typeof props === 'string') {\n      props = {\n        data: props\n      };\n    }\n\n    if (typeof props.data === 'string') {\n      props = Object.assign({}, props, {\n        data: loadImage(props.data)\n      });\n    }\n\n    super(gl, Object.assign({}, props, {\n      target: 3553\n    }));\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n}\n//# sourceMappingURL=texture-2d.js.map","import { assert } from '../utils/assert';\nlet pathPrefix = '';\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function loadFile(url) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  assert(typeof url === 'string');\n  url = pathPrefix + url;\n  const dataType = options.dataType || 'text';\n  return fetch(url, options).then(res => res[dataType]());\n}\nexport function loadImage(url, opts) {\n  assert(typeof url === 'string');\n  url = pathPrefix + url;\n  return new Promise((resolve, reject) => {\n    try {\n      const image = new Image();\n\n      image.onload = () => resolve(image);\n\n      image.onerror = () => reject(new Error(\"Could not load image \".concat(url, \".\")));\n\n      image.crossOrigin = opts && opts.crossOrigin || 'anonymous';\n      image.src = url;\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n//# sourceMappingURL=load-file.js.map","import { log, assertWebGLContext } from '@luma.gl/gltools';\nimport Texture from './texture';\nconst FACES = [34069, 34070, 34071, 34072, 34073, 34074];\nexport default class TextureCube extends Texture {\n  get [Symbol.toStringTag]() {\n    return 'TextureCube';\n  }\n\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    assertWebGLContext(gl);\n    super(gl, Object.assign({}, props, {\n      target: 34067\n    }));\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n  initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      mipmaps = true,\n      parameters = {}\n    } = props;\n    this.opts = props;\n    this.setCubeMapImageData(props).then(() => {\n      this.loaded = true;\n\n      if (mipmaps) {\n        this.generateMipmap(props);\n      }\n\n      this.setParameters(parameters);\n    });\n    return this;\n  }\n\n  subImage(_ref) {\n    let {\n      face,\n      data,\n      x = 0,\n      y = 0,\n      mipmapLevel = 0\n    } = _ref;\n    return this._subImage({\n      target: face,\n      data,\n      x,\n      y,\n      mipmapLevel\n    });\n  }\n\n  async setCubeMapImageData(_ref2) {\n    let {\n      width,\n      height,\n      pixels,\n      data,\n      border = 0,\n      format = 6408,\n      type = 5121\n    } = _ref2;\n    const {\n      gl\n    } = this;\n    const imageDataMap = pixels || data;\n    const resolvedFaces = await Promise.all(FACES.map(face => {\n      const facePixels = imageDataMap[face];\n      return Promise.all(Array.isArray(facePixels) ? facePixels : [facePixels]);\n    }));\n    this.bind();\n    FACES.forEach((face, index) => {\n      if (resolvedFaces[index].length > 1 && this.opts.mipmaps !== false) {\n        log.warn(\"\".concat(this.id, \" has mipmap and multiple LODs.\"))();\n      }\n\n      resolvedFaces[index].forEach((image, lodLevel) => {\n        if (width && height) {\n          gl.texImage2D(face, lodLevel, format, width, height, border, format, type, image);\n        } else {\n          gl.texImage2D(face, lodLevel, format, format, type, image);\n        }\n      });\n    });\n    this.unbind();\n  }\n\n  setImageDataForFace(options) {\n    const {\n      face,\n      width,\n      height,\n      pixels,\n      data,\n      border = 0,\n      format = 6408,\n      type = 5121\n    } = options;\n    const {\n      gl\n    } = this;\n    const imageData = pixels || data;\n    this.bind();\n\n    if (imageData instanceof Promise) {\n      imageData.then(resolvedImageData => this.setImageDataForFace(Object.assign({}, options, {\n        face,\n        data: resolvedImageData,\n        pixels: resolvedImageData\n      })));\n    } else if (this.width || this.height) {\n      gl.texImage2D(face, 0, format, width, height, border, format, type, imageData);\n    } else {\n      gl.texImage2D(face, 0, format, format, type, imageData);\n    }\n\n    return this;\n  }\n\n}\nTextureCube.FACES = FACES;\n//# sourceMappingURL=texture-cube.js.map","import { isWebGL2, assertWebGL2Context, withParameters } from '@luma.gl/gltools';\nimport Texture from './texture';\nimport { DATA_FORMAT_CHANNELS, TYPE_SIZES } from './texture-formats';\nimport Buffer from './buffer';\nexport default class Texture3D extends Texture {\n  get [Symbol.toStringTag]() {\n    return 'Texture3D';\n  }\n\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    assertWebGL2Context(gl);\n    props = Object.assign({\n      depth: 1\n    }, props, {\n      target: 32879,\n      unpackFlipY: false\n    });\n    super(gl, props);\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n  setImageData(_ref) {\n    let {\n      level = 0,\n      dataFormat = 6408,\n      width,\n      height,\n      depth = 1,\n      border = 0,\n      format,\n      type = 5121,\n      offset = 0,\n      data,\n      parameters = {}\n    } = _ref;\n\n    this._trackDeallocatedMemory('Texture');\n\n    this.gl.bindTexture(this.target, this.handle);\n    withParameters(this.gl, parameters, () => {\n      if (ArrayBuffer.isView(data)) {\n        this.gl.texImage3D(this.target, level, dataFormat, width, height, depth, border, format, type, data);\n      }\n\n      if (data instanceof Buffer) {\n        this.gl.bindBuffer(35052, data.handle);\n        this.gl.texImage3D(this.target, level, dataFormat, width, height, depth, border, format, type, offset);\n      }\n    });\n\n    if (data && data.byteLength) {\n      this._trackAllocatedMemory(data.byteLength, 'Texture');\n    } else {\n      const channels = DATA_FORMAT_CHANNELS[this.dataFormat] || 4;\n      const channelSize = TYPE_SIZES[this.type] || 1;\n\n      this._trackAllocatedMemory(this.width * this.height * this.depth * channels * channelSize, 'Texture');\n    }\n\n    this.loaded = true;\n    return this;\n  }\n\n}\n//# sourceMappingURL=texture-3d.js.map","const EXT_FLOAT_WEBGL2 = 'EXT_color_buffer_float';\nexport default {\n  [33189]: {\n    bpp: 2\n  },\n  [33190]: {\n    gl2: true,\n    bpp: 3\n  },\n  [36012]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36168]: {\n    bpp: 1\n  },\n  [34041]: {\n    bpp: 4\n  },\n  [35056]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36013]: {\n    gl2: true,\n    bpp: 5\n  },\n  [32854]: {\n    bpp: 2\n  },\n  [36194]: {\n    bpp: 2\n  },\n  [32855]: {\n    bpp: 2\n  },\n  [33321]: {\n    gl2: true,\n    bpp: 1\n  },\n  [33330]: {\n    gl2: true,\n    bpp: 1\n  },\n  [33329]: {\n    gl2: true,\n    bpp: 1\n  },\n  [33332]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33331]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33334]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33333]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33323]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33336]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33335]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33338]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33337]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33340]: {\n    gl2: true,\n    bpp: 8\n  },\n  [33339]: {\n    gl2: true,\n    bpp: 8\n  },\n  [32849]: {\n    gl2: true,\n    bpp: 3\n  },\n  [32856]: {\n    gl2: true,\n    bpp: 4\n  },\n  [32857]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36220]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36238]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36975]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36214]: {\n    gl2: true,\n    bpp: 8\n  },\n  [36232]: {\n    gl2: true,\n    bpp: 8\n  },\n  [36226]: {\n    gl2: true,\n    bpp: 16\n  },\n  [36208]: {\n    gl2: true,\n    bpp: 16\n  },\n  [33325]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 2\n  },\n  [33327]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 4\n  },\n  [34842]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 8\n  },\n  [33326]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 4\n  },\n  [33328]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 8\n  },\n  [34836]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 16\n  },\n  [35898]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 4\n  }\n};\n//# sourceMappingURL=renderbuffer-formats.js.map","import Resource from './resource';\nimport RENDERBUFFER_FORMATS from './renderbuffer-formats';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\n\nfunction isFormatSupported(gl, format, formats) {\n  const info = formats[format];\n\n  if (!info) {\n    return false;\n  }\n\n  const value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n\n  if (typeof value === 'string') {\n    return gl.getExtension(value);\n  }\n\n  return value;\n}\n\nexport default class Renderbuffer extends Resource {\n  get [Symbol.toStringTag]() {\n    return 'Renderbuffer';\n  }\n\n  static isSupported(gl) {\n    let {\n      format\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      format: null\n    };\n    return !format || isFormatSupported(gl, format, RENDERBUFFER_FORMATS);\n  }\n\n  static getSamplesForFormat(gl, _ref) {\n    let {\n      format\n    } = _ref;\n    return gl.getInternalformatParameter(36161, format, 32937);\n  }\n\n  constructor(gl) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(gl, opts);\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  initialize(_ref2) {\n    let {\n      format,\n      width = 1,\n      height = 1,\n      samples = 0\n    } = _ref2;\n    assert(format, 'Needs format');\n\n    this._trackDeallocatedMemory();\n\n    this.gl.bindRenderbuffer(36161, this.handle);\n\n    if (samples !== 0 && isWebGL2(this.gl)) {\n      this.gl.renderbufferStorageMultisample(36161, samples, format, width, height);\n    } else {\n      this.gl.renderbufferStorage(36161, format, width, height);\n    }\n\n    this.format = format;\n    this.width = width;\n    this.height = height;\n    this.samples = samples;\n\n    this._trackAllocatedMemory(this.width * this.height * (this.samples || 1) * RENDERBUFFER_FORMATS[this.format].bpp);\n\n    return this;\n  }\n\n  resize(_ref3) {\n    let {\n      width,\n      height\n    } = _ref3;\n\n    if (width !== this.width || height !== this.height) {\n      return this.initialize({\n        width,\n        height,\n        format: this.format,\n        samples: this.samples\n      });\n    }\n\n    return this;\n  }\n\n  _createHandle() {\n    return this.gl.createRenderbuffer();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteRenderbuffer(this.handle);\n\n    this._trackDeallocatedMemory();\n  }\n\n  _bindHandle(handle) {\n    this.gl.bindRenderbuffer(36161, handle);\n  }\n\n  _syncHandle(handle) {\n    this.format = this.getParameter(36164);\n    this.width = this.getParameter(36162);\n    this.height = this.getParameter(36163);\n    this.samples = this.getParameter(36011);\n  }\n\n  _getParameter(pname) {\n    this.gl.bindRenderbuffer(36161, this.handle);\n    const value = this.gl.getRenderbufferParameter(36161, pname);\n    return value;\n  }\n\n}\n//# sourceMappingURL=renderbuffer.js.map","import { assertWebGL2Context, withParameters } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\nconst GL_DEPTH_BUFFER_BIT = 0x00000100;\nconst GL_STENCIL_BUFFER_BIT = 0x00000400;\nconst GL_COLOR_BUFFER_BIT = 0x00004000;\nconst GL_COLOR = 0x1800;\nconst GL_DEPTH = 0x1801;\nconst GL_STENCIL = 0x1802;\nconst GL_DEPTH_STENCIL = 0x84f9;\nconst ERR_ARGUMENTS = 'clear: bad arguments';\nexport function clear(gl) {\n  let {\n    framebuffer = null,\n    color = null,\n    depth = null,\n    stencil = null\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const parameters = {};\n\n  if (framebuffer) {\n    parameters.framebuffer = framebuffer;\n  }\n\n  let clearFlags = 0;\n\n  if (color) {\n    clearFlags |= GL_COLOR_BUFFER_BIT;\n\n    if (color !== true) {\n      parameters.clearColor = color;\n    }\n  }\n\n  if (depth) {\n    clearFlags |= GL_DEPTH_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearDepth = depth;\n    }\n  }\n\n  if (stencil) {\n    clearFlags |= GL_STENCIL_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearStencil = depth;\n    }\n  }\n\n  assert(clearFlags !== 0, ERR_ARGUMENTS);\n  withParameters(gl, parameters, () => {\n    gl.clear(clearFlags);\n  });\n}\nexport function clearBuffer(gl) {\n  let {\n    framebuffer = null,\n    buffer = GL_COLOR,\n    drawBuffer = 0,\n    value = [0, 0, 0, 0]\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  assertWebGL2Context(gl);\n  withParameters(gl, {\n    framebuffer\n  }, () => {\n    switch (buffer) {\n      case GL_COLOR:\n        switch (value.constructor) {\n          case Int32Array:\n            gl.clearBufferiv(buffer, drawBuffer, value);\n            break;\n\n          case Uint32Array:\n            gl.clearBufferuiv(buffer, drawBuffer, value);\n            break;\n\n          case Float32Array:\n          default:\n            gl.clearBufferfv(buffer, drawBuffer, value);\n        }\n\n        break;\n\n      case GL_DEPTH:\n        gl.clearBufferfv(GL_DEPTH, 0, [value]);\n        break;\n\n      case GL_STENCIL:\n        gl.clearBufferiv(GL_STENCIL, 0, [value]);\n        break;\n\n      case GL_DEPTH_STENCIL:\n        const [depth, stencil] = value;\n        gl.clearBufferfi(GL_DEPTH_STENCIL, 0, depth, stencil);\n        break;\n\n      default:\n        assert(false, ERR_ARGUMENTS);\n    }\n  });\n}\n//# sourceMappingURL=clear.js.map","import Buffer from './buffer';\nimport Framebuffer from './framebuffer';\nimport Texture from './texture';\nimport { assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { flipRows, scalePixels } from '../webgl-utils/typed-array-utils';\nimport { getTypedArrayFromGLType, getGLTypeFromTypedArray } from '../webgl-utils/typed-array-utils';\nimport { glFormatToComponents, glTypeToBytes } from '../webgl-utils/format-utils';\nimport { toFramebuffer } from '../webgl-utils/texture-utils';\nimport { assert } from '../utils/assert';\nexport function readPixelsToArray(source) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    sourceX = 0,\n    sourceY = 0,\n    sourceFormat = 6408\n  } = options;\n  let {\n    sourceAttachment = 36064,\n    target = null,\n    sourceWidth,\n    sourceHeight,\n    sourceType\n  } = options;\n  const {\n    framebuffer,\n    deleteFramebuffer\n  } = getFramebuffer(source);\n  assert(framebuffer);\n  const {\n    gl,\n    handle,\n    attachments\n  } = framebuffer;\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n\n  if (sourceAttachment === 36064 && handle === null) {\n    sourceAttachment = 1028;\n  }\n\n  assert(attachments[sourceAttachment]);\n  sourceType = sourceType || attachments[sourceAttachment].type;\n  target = getPixelArray(target, sourceType, sourceFormat, sourceWidth, sourceHeight);\n  sourceType = sourceType || getGLTypeFromTypedArray(target);\n  const prevHandle = gl.bindFramebuffer(36160, handle);\n  gl.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, target);\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer.delete();\n  }\n\n  return target;\n}\nexport function readPixelsToBuffer(source, _ref) {\n  let {\n    sourceX = 0,\n    sourceY = 0,\n    sourceFormat = 6408,\n    target = null,\n    targetByteOffset = 0,\n    sourceWidth,\n    sourceHeight,\n    sourceType\n  } = _ref;\n  const {\n    framebuffer,\n    deleteFramebuffer\n  } = getFramebuffer(source);\n  assert(framebuffer);\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n  const gl2 = assertWebGL2Context(framebuffer.gl);\n  sourceType = sourceType || (target ? target.type : 5121);\n\n  if (!target) {\n    const components = glFormatToComponents(sourceFormat);\n    const byteCount = glTypeToBytes(sourceType);\n    const byteLength = targetByteOffset + sourceWidth * sourceHeight * components * byteCount;\n    target = new Buffer(gl2, {\n      byteLength,\n      accessor: {\n        type: sourceType,\n        size: components\n      }\n    });\n  }\n\n  target.bind({\n    target: 35051\n  });\n  withParameters(gl2, {\n    framebuffer\n  }, () => {\n    gl2.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, targetByteOffset);\n  });\n  target.unbind({\n    target: 35051\n  });\n\n  if (deleteFramebuffer) {\n    framebuffer.delete();\n  }\n\n  return target;\n}\nexport function copyToDataUrl(source) {\n  let {\n    sourceAttachment = 36064,\n    targetMaxHeight = Number.MAX_SAFE_INTEGER\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let data = readPixelsToArray(source, {\n    sourceAttachment\n  });\n  let {\n    width,\n    height\n  } = source;\n\n  while (height > targetMaxHeight) {\n    ({\n      data,\n      width,\n      height\n    } = scalePixels({\n      data,\n      width,\n      height\n    }));\n  }\n\n  flipRows({\n    data,\n    width,\n    height\n  });\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  const context = canvas.getContext('2d');\n  const imageData = context.createImageData(width, height);\n  imageData.data.set(data);\n  context.putImageData(imageData, 0, 0);\n  return canvas.toDataURL();\n}\nexport function copyToImage(source) {\n  let {\n    sourceAttachment = 36064,\n    targetImage = null\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const dataUrl = copyToDataUrl(source, {\n    sourceAttachment\n  });\n  targetImage = targetImage || new Image();\n  targetImage.src = dataUrl;\n  return targetImage;\n}\nexport function copyToTexture(source, target) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const {\n    sourceX = 0,\n    sourceY = 0,\n    targetMipmaplevel = 0,\n    targetInternalFormat = 6408\n  } = options;\n  let {\n    targetX,\n    targetY,\n    targetZ,\n    width,\n    height\n  } = options;\n  const {\n    framebuffer,\n    deleteFramebuffer\n  } = getFramebuffer(source);\n  assert(framebuffer);\n  const {\n    gl,\n    handle\n  } = framebuffer;\n  const isSubCopy = typeof targetX !== 'undefined' || typeof targetY !== 'undefined' || typeof targetZ !== 'undefined';\n  targetX = targetX || 0;\n  targetY = targetY || 0;\n  targetZ = targetZ || 0;\n  const prevHandle = gl.bindFramebuffer(36160, handle);\n  assert(target);\n  let texture = null;\n\n  if (target instanceof Texture) {\n    texture = target;\n    width = Number.isFinite(width) ? width : texture.width;\n    height = Number.isFinite(height) ? height : texture.height;\n    texture.bind(0);\n    target = texture.target;\n  }\n\n  if (!isSubCopy) {\n    gl.copyTexImage2D(target, targetMipmaplevel, targetInternalFormat, sourceX, sourceY, width, height, 0);\n  } else {\n    switch (target) {\n      case 3553:\n      case 34067:\n        gl.copyTexSubImage2D(target, targetMipmaplevel, targetX, targetY, sourceX, sourceY, width, height);\n        break;\n\n      case 35866:\n      case 32879:\n        const gl2 = assertWebGL2Context(gl);\n        gl2.copyTexSubImage3D(target, targetMipmaplevel, targetX, targetY, targetZ, sourceX, sourceY, width, height);\n        break;\n\n      default:\n    }\n  }\n\n  if (texture) {\n    texture.unbind();\n  }\n\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer.delete();\n  }\n\n  return texture;\n}\nexport function blit(source, target) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const {\n    sourceX0 = 0,\n    sourceY0 = 0,\n    targetX0 = 0,\n    targetY0 = 0,\n    color = true,\n    depth = false,\n    stencil = false,\n    filter = 9728\n  } = options;\n  let {\n    sourceX1,\n    sourceY1,\n    targetX1,\n    targetY1,\n    sourceAttachment = 36064,\n    mask = 0\n  } = options;\n  const {\n    framebuffer: srcFramebuffer,\n    deleteFramebuffer: deleteSrcFramebuffer\n  } = getFramebuffer(source);\n  const {\n    framebuffer: dstFramebuffer,\n    deleteFramebuffer: deleteDstFramebuffer\n  } = getFramebuffer(target);\n  assert(srcFramebuffer);\n  assert(dstFramebuffer);\n  const {\n    gl,\n    handle,\n    width,\n    height,\n    readBuffer\n  } = dstFramebuffer;\n  const gl2 = assertWebGL2Context(gl);\n\n  if (!srcFramebuffer.handle && sourceAttachment === 36064) {\n    sourceAttachment = 1028;\n  }\n\n  if (color) {\n    mask |= 16384;\n  }\n\n  if (depth) {\n    mask |= 256;\n  }\n\n  if (stencil) {\n    mask |= 1024;\n  }\n\n  if (deleteSrcFramebuffer || deleteDstFramebuffer) {\n    if (mask & (256 | 1024)) {\n      mask = 16384;\n      log.warn('Blitting from or into a Texture object, forcing mask to GL.COLOR_BUFFER_BIT')();\n    }\n  }\n\n  assert(mask);\n  sourceX1 = sourceX1 === undefined ? srcFramebuffer.width : sourceX1;\n  sourceY1 = sourceY1 === undefined ? srcFramebuffer.height : sourceY1;\n  targetX1 = targetX1 === undefined ? width : targetX1;\n  targetY1 = targetY1 === undefined ? height : targetY1;\n  const prevDrawHandle = gl.bindFramebuffer(36009, handle);\n  const prevReadHandle = gl.bindFramebuffer(36008, srcFramebuffer.handle);\n  gl2.readBuffer(sourceAttachment);\n  gl2.blitFramebuffer(sourceX0, sourceY0, sourceX1, sourceY1, targetX0, targetY0, targetX1, targetY1, mask, filter);\n  gl2.readBuffer(readBuffer);\n  gl2.bindFramebuffer(36008, prevReadHandle || null);\n  gl2.bindFramebuffer(36009, prevDrawHandle || null);\n\n  if (deleteSrcFramebuffer) {\n    srcFramebuffer.delete();\n  }\n\n  if (deleteDstFramebuffer) {\n    dstFramebuffer.delete();\n  }\n\n  return dstFramebuffer;\n}\n\nfunction getFramebuffer(source) {\n  if (!(source instanceof Framebuffer)) {\n    return {\n      framebuffer: toFramebuffer(source),\n      deleteFramebuffer: true\n    };\n  }\n\n  return {\n    framebuffer: source,\n    deleteFramebuffer: false\n  };\n}\n\nfunction getPixelArray(pixelArray, type, format, width, height) {\n  if (pixelArray) {\n    return pixelArray;\n  }\n\n  type = type || 5121;\n  const ArrayType = getTypedArrayFromGLType(type, {\n    clamped: false\n  });\n  const components = glFormatToComponents(format);\n  return new ArrayType(width * height * components);\n}\n//# sourceMappingURL=copy-and-blit.js.map","import { assert } from '../utils/assert';\nexport function glFormatToComponents(format) {\n  switch (format) {\n    case 6406:\n    case 33326:\n    case 6403:\n      return 1;\n\n    case 33328:\n    case 33319:\n      return 2;\n\n    case 6407:\n    case 34837:\n      return 3;\n\n    case 6408:\n    case 34836:\n      return 4;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function glTypeToBytes(type) {\n  switch (type) {\n    case 5121:\n      return 1;\n\n    case 33635:\n    case 32819:\n    case 32820:\n      return 2;\n\n    case 5126:\n      return 4;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\n//# sourceMappingURL=format-utils.js.map","import Framebuffer from '../classes/framebuffer';\nimport Texture2D from '../classes/texture-2d';\nexport const FEATURES = {\n  WEBGL2: 'WEBGL2',\n  VERTEX_ARRAY_OBJECT: 'VERTEX_ARRAY_OBJECT',\n  TIMER_QUERY: 'TIMER_QUERY',\n  INSTANCED_RENDERING: 'INSTANCED_RENDERING',\n  MULTIPLE_RENDER_TARGETS: 'MULTIPLE_RENDER_TARGETS',\n  ELEMENT_INDEX_UINT32: 'ELEMENT_INDEX_UINT32',\n  BLEND_EQUATION_MINMAX: 'BLEND_EQUATION_MINMAX',\n  FLOAT_BLEND: 'FLOAT_BLEND',\n  COLOR_ENCODING_SRGB: 'COLOR_ENCODING_SRGB',\n  TEXTURE_DEPTH: 'TEXTURE_DEPTH',\n  TEXTURE_FLOAT: 'TEXTURE_FLOAT',\n  TEXTURE_HALF_FLOAT: 'TEXTURE_HALF_FLOAT',\n  TEXTURE_FILTER_LINEAR_FLOAT: 'TEXTURE_FILTER_LINEAR_FLOAT',\n  TEXTURE_FILTER_LINEAR_HALF_FLOAT: 'TEXTURE_FILTER_LINEAR_HALF_FLOAT',\n  TEXTURE_FILTER_ANISOTROPIC: 'TEXTURE_FILTER_ANISOTROPIC',\n  COLOR_ATTACHMENT_RGBA32F: 'COLOR_ATTACHMENT_RGBA32F',\n  COLOR_ATTACHMENT_FLOAT: 'COLOR_ATTACHMENT_FLOAT',\n  COLOR_ATTACHMENT_HALF_FLOAT: 'COLOR_ATTACHMENT_HALF_FLOAT',\n  GLSL_FRAG_DATA: 'GLSL_FRAG_DATA',\n  GLSL_FRAG_DEPTH: 'GLSL_FRAG_DEPTH',\n  GLSL_DERIVATIVES: 'GLSL_DERIVATIVES',\n  GLSL_TEXTURE_LOD: 'GLSL_TEXTURE_LOD'\n};\n\nfunction checkFloat32ColorAttachment(gl) {\n  const testTexture = new Texture2D(gl, {\n    format: 6408,\n    type: 5126,\n    dataFormat: 6408\n  });\n  const testFb = new Framebuffer(gl, {\n    id: \"test-framebuffer\",\n    check: false,\n    attachments: {\n      [36064]: testTexture\n    }\n  });\n  const status = testFb.getStatus();\n  testTexture.delete();\n  testFb.delete();\n  return status === 36053;\n}\n\nexport default {\n  [FEATURES.WEBGL2]: [false, true],\n  [FEATURES.VERTEX_ARRAY_OBJECT]: ['OES_vertex_array_object', true],\n  [FEATURES.TIMER_QUERY]: ['EXT_disjoint_timer_query', 'EXT_disjoint_timer_query_webgl2'],\n  [FEATURES.INSTANCED_RENDERING]: ['ANGLE_instanced_arrays', true],\n  [FEATURES.MULTIPLE_RENDER_TARGETS]: ['WEBGL_draw_buffers', true],\n  [FEATURES.ELEMENT_INDEX_UINT32]: ['OES_element_index_uint', true],\n  [FEATURES.BLEND_EQUATION_MINMAX]: ['EXT_blend_minmax', true],\n  [FEATURES.FLOAT_BLEND]: ['EXT_float_blend'],\n  [FEATURES.COLOR_ENCODING_SRGB]: ['EXT_sRGB', true],\n  [FEATURES.TEXTURE_DEPTH]: ['WEBGL_depth_texture', true],\n  [FEATURES.TEXTURE_FLOAT]: ['OES_texture_float', true],\n  [FEATURES.TEXTURE_HALF_FLOAT]: ['OES_texture_half_float', true],\n  [FEATURES.TEXTURE_FILTER_LINEAR_FLOAT]: ['OES_texture_float_linear'],\n  [FEATURES.TEXTURE_FILTER_LINEAR_HALF_FLOAT]: ['OES_texture_half_float_linear'],\n  [FEATURES.TEXTURE_FILTER_ANISOTROPIC]: ['EXT_texture_filter_anisotropic'],\n  [FEATURES.COLOR_ATTACHMENT_RGBA32F]: [checkFloat32ColorAttachment, 'EXT_color_buffer_float'],\n  [FEATURES.COLOR_ATTACHMENT_FLOAT]: [false, 'EXT_color_buffer_float'],\n  [FEATURES.COLOR_ATTACHMENT_HALF_FLOAT]: ['EXT_color_buffer_half_float'],\n  [FEATURES.GLSL_FRAG_DATA]: ['WEBGL_draw_buffers', true],\n  [FEATURES.GLSL_FRAG_DEPTH]: ['EXT_frag_depth', true],\n  [FEATURES.GLSL_DERIVATIVES]: ['OES_standard_derivatives', true],\n  [FEATURES.GLSL_TEXTURE_LOD]: ['EXT_shader_texture_lod', true]\n};\n//# sourceMappingURL=webgl-features-table.js.map","import WEBGL_FEATURES from './webgl-features-table';\nimport { isWebGL2, log } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\nconst LOG_UNSUPPORTED_FEATURE = 2;\nexport function hasFeature(gl, feature) {\n  return hasFeatures(gl, feature);\n}\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(feature => {\n    return isFeatureSupported(gl, feature);\n  });\n}\nexport function getFeatures(gl) {\n  gl.luma = gl.luma || {};\n  gl.luma.caps = gl.luma.caps || {};\n\n  for (const cap in WEBGL_FEATURES) {\n    if (gl.luma.caps[cap] === undefined) {\n      gl.luma.caps[cap] = isFeatureSupported(gl, cap);\n    }\n  }\n\n  return gl.luma.caps;\n}\n\nfunction isFeatureSupported(gl, cap) {\n  gl.luma = gl.luma || {};\n  gl.luma.caps = gl.luma.caps || {};\n\n  if (gl.luma.caps[cap] === undefined) {\n    gl.luma.caps[cap] = queryFeature(gl, cap);\n  }\n\n  if (!gl.luma.caps[cap]) {\n    log.log(LOG_UNSUPPORTED_FEATURE, \"Feature: \".concat(cap, \" not supported\"))();\n  }\n\n  return gl.luma.caps[cap];\n}\n\nfunction queryFeature(gl, cap) {\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n  let isSupported;\n  const featureDefinition = isWebGL2(gl) ? feature[1] || feature[0] : feature[0];\n\n  if (typeof featureDefinition === 'function') {\n    isSupported = featureDefinition(gl);\n  } else if (Array.isArray(featureDefinition)) {\n    isSupported = true;\n\n    for (const extension of featureDefinition) {\n      isSupported = isSupported && Boolean(gl.getExtension(extension));\n    }\n  } else if (typeof featureDefinition === 'string') {\n    isSupported = Boolean(gl.getExtension(featureDefinition));\n  } else if (typeof featureDefinition === 'boolean') {\n    isSupported = featureDefinition;\n  } else {\n    assert(false);\n  }\n\n  return isSupported;\n}\n//# sourceMappingURL=features.js.map","import { getWebGL2Context, assertWebGL2Context, log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Texture2D from './texture-2d';\nimport Renderbuffer from './renderbuffer';\nimport { clear, clearBuffer } from './clear';\nimport { copyToDataUrl } from './copy-and-blit.js';\nimport { getFeatures } from '../features';\nimport { getKey } from '../webgl-utils/constants-to-keys';\nimport { assert } from '../utils/assert';\nconst ERR_MULTIPLE_RENDERTARGETS = 'Multiple render targets not supported';\nexport default class Framebuffer extends Resource {\n  get [Symbol.toStringTag]() {\n    return 'Framebuffer';\n  }\n\n  static isSupported(gl) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const {\n      colorBufferFloat,\n      colorBufferHalfFloat\n    } = options;\n    let supported = true;\n\n    if (colorBufferFloat) {\n      supported = Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('WEBGL_color_buffer_float') || gl.getExtension('OES_texture_float'));\n    }\n\n    if (colorBufferHalfFloat) {\n      supported = supported && Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('EXT_color_buffer_half_float'));\n    }\n\n    return supported;\n  }\n\n  static getDefaultFramebuffer(gl) {\n    gl.luma = gl.luma || {};\n    gl.luma.defaultFramebuffer = gl.luma.defaultFramebuffer || new Framebuffer(gl, {\n      id: 'default-framebuffer',\n      handle: null,\n      attachments: {}\n    });\n    return gl.luma.defaultFramebuffer;\n  }\n\n  get MAX_COLOR_ATTACHMENTS() {\n    const gl2 = assertWebGL2Context(this.gl);\n    return gl2.getParameter(gl2.MAX_COLOR_ATTACHMENTS);\n  }\n\n  get MAX_DRAW_BUFFERS() {\n    const gl2 = assertWebGL2Context(this.gl);\n    return gl2.getParameter(gl2.MAX_DRAW_BUFFERS);\n  }\n\n  constructor(gl) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(gl, opts);\n    this.width = null;\n    this.height = null;\n    this.attachments = {};\n    this.readBuffer = 36064;\n    this.drawBuffers = [36064];\n    this.ownResources = [];\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  get color() {\n    return this.attachments[36064] || null;\n  }\n\n  get texture() {\n    return this.attachments[36064] || null;\n  }\n\n  get depth() {\n    return this.attachments[36096] || this.attachments[33306] || null;\n  }\n\n  get stencil() {\n    return this.attachments[36128] || this.attachments[33306] || null;\n  }\n\n  initialize(_ref) {\n    let {\n      width = 1,\n      height = 1,\n      attachments = null,\n      color = true,\n      depth = true,\n      stencil = false,\n      check = true,\n      readBuffer = undefined,\n      drawBuffers = undefined\n    } = _ref;\n    assert(width >= 0 && height >= 0, 'Width and height need to be integers');\n    this.width = width;\n    this.height = height;\n\n    if (attachments) {\n      for (const attachment in attachments) {\n        const target = attachments[attachment];\n        const object = Array.isArray(target) ? target[0] : target;\n        object.resize({\n          width,\n          height\n        });\n      }\n    } else {\n      attachments = this._createDefaultAttachments(color, depth, stencil, width, height);\n    }\n\n    this.update({\n      clearAttachments: true,\n      attachments,\n      readBuffer,\n      drawBuffers\n    });\n\n    if (attachments && check) {\n      this.checkStatus();\n    }\n  }\n\n  delete() {\n    for (const resource of this.ownResources) {\n      resource.delete();\n    }\n\n    super.delete();\n    return this;\n  }\n\n  update(_ref2) {\n    let {\n      attachments = {},\n      readBuffer,\n      drawBuffers,\n      clearAttachments = false,\n      resizeAttachments = true\n    } = _ref2;\n    this.attach(attachments, {\n      clearAttachments,\n      resizeAttachments\n    });\n    const {\n      gl\n    } = this;\n    const prevHandle = gl.bindFramebuffer(36160, this.handle);\n\n    if (readBuffer) {\n      this._setReadBuffer(readBuffer);\n    }\n\n    if (drawBuffers) {\n      this._setDrawBuffers(drawBuffers);\n    }\n\n    gl.bindFramebuffer(36160, prevHandle || null);\n    return this;\n  }\n\n  resize() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let {\n      width,\n      height\n    } = options;\n\n    if (this.handle === null) {\n      assert(width === undefined && height === undefined);\n      this.width = this.gl.drawingBufferWidth;\n      this.height = this.gl.drawingBufferHeight;\n      return this;\n    }\n\n    if (width === undefined) {\n      width = this.gl.drawingBufferWidth;\n    }\n\n    if (height === undefined) {\n      height = this.gl.drawingBufferHeight;\n    }\n\n    if (width !== this.width && height !== this.height) {\n      log.log(2, \"Resizing framebuffer \".concat(this.id, \" to \").concat(width, \"x\").concat(height))();\n    }\n\n    for (const attachmentPoint in this.attachments) {\n      this.attachments[attachmentPoint].resize({\n        width,\n        height\n      });\n    }\n\n    this.width = width;\n    this.height = height;\n    return this;\n  }\n\n  attach(attachments) {\n    let {\n      clearAttachments = false,\n      resizeAttachments = true\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const newAttachments = {};\n\n    if (clearAttachments) {\n      Object.keys(this.attachments).forEach(key => {\n        newAttachments[key] = null;\n      });\n    }\n\n    Object.assign(newAttachments, attachments);\n    const prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n    for (const key in newAttachments) {\n      assert(key !== undefined, 'Misspelled framebuffer binding point?');\n      const attachment = Number(key);\n      const descriptor = newAttachments[attachment];\n      let object = descriptor;\n\n      if (!object) {\n        this._unattach(attachment);\n      } else if (object instanceof Renderbuffer) {\n        this._attachRenderbuffer({\n          attachment,\n          renderbuffer: object\n        });\n      } else if (Array.isArray(descriptor)) {\n        const [texture, layer = 0, level = 0] = descriptor;\n        object = texture;\n\n        this._attachTexture({\n          attachment,\n          texture,\n          layer,\n          level\n        });\n      } else {\n        this._attachTexture({\n          attachment,\n          texture: object,\n          layer: 0,\n          level: 0\n        });\n      }\n\n      if (resizeAttachments && object) {\n        object.resize({\n          width: this.width,\n          height: this.height\n        });\n      }\n    }\n\n    this.gl.bindFramebuffer(36160, prevHandle || null);\n    Object.assign(this.attachments, attachments);\n    Object.keys(this.attachments).filter(key => !this.attachments[key]).forEach(key => {\n      delete this.attachments[key];\n    });\n  }\n\n  checkStatus() {\n    const {\n      gl\n    } = this;\n    const status = this.getStatus();\n\n    if (status !== 36053) {\n      throw new Error(_getFrameBufferStatus(status));\n    }\n\n    return this;\n  }\n\n  getStatus() {\n    const {\n      gl\n    } = this;\n    const prevHandle = gl.bindFramebuffer(36160, this.handle);\n    const status = gl.checkFramebufferStatus(36160);\n    gl.bindFramebuffer(36160, prevHandle || null);\n    return status;\n  }\n\n  clear() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      color,\n      depth,\n      stencil,\n      drawBuffers = []\n    } = options;\n    const prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n    if (color || depth || stencil) {\n      clear(this.gl, {\n        color,\n        depth,\n        stencil\n      });\n    }\n\n    drawBuffers.forEach((value, drawBuffer) => {\n      clearBuffer(this.gl, {\n        drawBuffer,\n        value\n      });\n    });\n    this.gl.bindFramebuffer(36160, prevHandle || null);\n    return this;\n  }\n\n  readPixels() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    log.error('Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)')();\n    return null;\n  }\n\n  readPixelsToBuffer() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    log.error('Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)')();\n    return null;\n  }\n\n  copyToDataUrl() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    log.error('Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)')();\n    return null;\n  }\n\n  copyToImage() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    log.error('Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)')();\n    return null;\n  }\n\n  copyToTexture() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    log.error('Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n    return null;\n  }\n\n  blit() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    log.error('Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)')();\n    return null;\n  }\n\n  invalidate(_ref3) {\n    let {\n      attachments = [],\n      x = 0,\n      y = 0,\n      width,\n      height\n    } = _ref3;\n    const gl2 = assertWebGL2Context(this.gl);\n    const prevHandle = gl2.bindFramebuffer(36008, this.handle);\n    const invalidateAll = x === 0 && y === 0 && width === undefined && height === undefined;\n\n    if (invalidateAll) {\n      gl2.invalidateFramebuffer(36008, attachments);\n    } else {\n      gl2.invalidateFramebuffer(36008, attachments, x, y, width, height);\n    }\n\n    gl2.bindFramebuffer(36008, prevHandle);\n    return this;\n  }\n\n  getAttachmentParameter(attachment, pname, keys) {\n    let value = this._getAttachmentParameterFallback(pname);\n\n    if (value === null) {\n      this.gl.bindFramebuffer(36160, this.handle);\n      value = this.gl.getFramebufferAttachmentParameter(36160, attachment, pname);\n      this.gl.bindFramebuffer(36160, null);\n    }\n\n    if (keys && value > 1000) {\n      value = getKey(this.gl, value);\n    }\n\n    return value;\n  }\n\n  getAttachmentParameters() {\n    let attachment = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 36064;\n    let keys = arguments.length > 1 ? arguments[1] : undefined;\n    let parameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.constructor.ATTACHMENT_PARAMETERS || [];\n    const values = {};\n\n    for (const pname of parameters) {\n      const key = keys ? getKey(this.gl, pname) : pname;\n      values[key] = this.getAttachmentParameter(attachment, pname, keys);\n    }\n\n    return values;\n  }\n\n  getParameters() {\n    let keys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    const attachments = Object.keys(this.attachments);\n    const parameters = {};\n\n    for (const attachmentName of attachments) {\n      const attachment = Number(attachmentName);\n      const key = keys ? getKey(this.gl, attachment) : attachment;\n      parameters[key] = this.getAttachmentParameters(attachment, keys);\n    }\n\n    return parameters;\n  }\n\n  show() {\n    if (typeof window !== 'undefined') {\n      window.open(copyToDataUrl(this), 'luma-debug-texture');\n    }\n\n    return this;\n  }\n\n  log() {\n    let logLevel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let message = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n    if (logLevel > log.level || typeof window === 'undefined') {\n      return this;\n    }\n\n    message = message || \"Framebuffer \".concat(this.id);\n    const image = copyToDataUrl(this, {\n      targetMaxHeight: 100\n    });\n    log.image({\n      logLevel,\n      message,\n      image\n    }, message)();\n    return this;\n  }\n\n  bind() {\n    let {\n      target = 36160\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.gl.bindFramebuffer(target, this.handle);\n    return this;\n  }\n\n  unbind() {\n    let {\n      target = 36160\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.gl.bindFramebuffer(target, null);\n    return this;\n  }\n\n  _createDefaultAttachments(color, depth, stencil, width, height) {\n    let defaultAttachments = null;\n\n    if (color) {\n      defaultAttachments = defaultAttachments || {};\n      defaultAttachments[36064] = new Texture2D(this.gl, {\n        id: \"\".concat(this.id, \"-color0\"),\n        pixels: null,\n        format: 6408,\n        type: 5121,\n        width,\n        height,\n        mipmaps: false,\n        parameters: {\n          [10241]: 9729,\n          [10240]: 9729,\n          [10242]: 33071,\n          [10243]: 33071\n        }\n      });\n      this.ownResources.push(defaultAttachments[36064]);\n    }\n\n    if (depth && stencil) {\n      defaultAttachments = defaultAttachments || {};\n      defaultAttachments[33306] = new Renderbuffer(this.gl, {\n        id: \"\".concat(this.id, \"-depth-stencil\"),\n        format: 35056,\n        width,\n        height: 111\n      });\n      this.ownResources.push(defaultAttachments[33306]);\n    } else if (depth) {\n      defaultAttachments = defaultAttachments || {};\n      defaultAttachments[36096] = new Renderbuffer(this.gl, {\n        id: \"\".concat(this.id, \"-depth\"),\n        format: 33189,\n        width,\n        height\n      });\n      this.ownResources.push(defaultAttachments[36096]);\n    } else if (stencil) {\n      assert(false);\n    }\n\n    return defaultAttachments;\n  }\n\n  _unattach(attachment) {\n    const oldAttachment = this.attachments[attachment];\n\n    if (!oldAttachment) {\n      return;\n    }\n\n    if (oldAttachment instanceof Renderbuffer) {\n      this.gl.framebufferRenderbuffer(36160, attachment, 36161, null);\n    } else {\n      this.gl.framebufferTexture2D(36160, attachment, 3553, null, 0);\n    }\n\n    delete this.attachments[attachment];\n  }\n\n  _attachRenderbuffer(_ref4) {\n    let {\n      attachment = 36064,\n      renderbuffer\n    } = _ref4;\n    const {\n      gl\n    } = this;\n    gl.framebufferRenderbuffer(36160, attachment, 36161, renderbuffer.handle);\n    this.attachments[attachment] = renderbuffer;\n  }\n\n  _attachTexture(_ref5) {\n    let {\n      attachment = 36064,\n      texture,\n      layer,\n      level\n    } = _ref5;\n    const {\n      gl\n    } = this;\n    gl.bindTexture(texture.target, texture.handle);\n\n    switch (texture.target) {\n      case 35866:\n      case 32879:\n        const gl2 = assertWebGL2Context(gl);\n        gl2.framebufferTextureLayer(36160, attachment, texture.target, level, layer);\n        break;\n\n      case 34067:\n        const face = mapIndexToCubeMapFace(layer);\n        gl.framebufferTexture2D(36160, attachment, face, texture.handle, level);\n        break;\n\n      case 3553:\n        gl.framebufferTexture2D(36160, attachment, 3553, texture.handle, level);\n        break;\n\n      default:\n        assert(false, 'Illegal texture type');\n    }\n\n    gl.bindTexture(texture.target, null);\n    this.attachments[attachment] = texture;\n  }\n\n  _setReadBuffer(readBuffer) {\n    const gl2 = getWebGL2Context(this.gl);\n\n    if (gl2) {\n      gl2.readBuffer(readBuffer);\n    } else {\n      assert(readBuffer === 36064 || readBuffer === 1029, ERR_MULTIPLE_RENDERTARGETS);\n    }\n\n    this.readBuffer = readBuffer;\n  }\n\n  _setDrawBuffers(drawBuffers) {\n    const {\n      gl\n    } = this;\n    const gl2 = assertWebGL2Context(gl);\n\n    if (gl2) {\n      gl2.drawBuffers(drawBuffers);\n    } else {\n      const ext = gl.getExtension('WEBGL_draw_buffers');\n\n      if (ext) {\n        ext.drawBuffersWEBGL(drawBuffers);\n      } else {\n        assert(drawBuffers.length === 1 && (drawBuffers[0] === 36064 || drawBuffers[0] === 1029), ERR_MULTIPLE_RENDERTARGETS);\n      }\n    }\n\n    this.drawBuffers = drawBuffers;\n  }\n\n  _getAttachmentParameterFallback(pname) {\n    const caps = getFeatures(this.gl);\n\n    switch (pname) {\n      case 36052:\n        return !caps.WEBGL2 ? 0 : null;\n\n      case 33298:\n      case 33299:\n      case 33300:\n      case 33301:\n      case 33302:\n      case 33303:\n        return !caps.WEBGL2 ? 8 : null;\n\n      case 33297:\n        return !caps.WEBGL2 ? 5125 : null;\n\n      case 33296:\n        return !caps.WEBGL2 && !caps.EXT_sRGB ? 9729 : null;\n\n      default:\n        return null;\n    }\n  }\n\n  _createHandle() {\n    return this.gl.createFramebuffer();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteFramebuffer(this.handle);\n  }\n\n  _bindHandle(handle) {\n    return this.gl.bindFramebuffer(36160, handle);\n  }\n\n}\n\nfunction mapIndexToCubeMapFace(layer) {\n  return layer < 34069 ? layer + 34069 : layer;\n}\n\nfunction _getFrameBufferStatus(status) {\n  const STATUS = Framebuffer.STATUS || {};\n  return STATUS[status] || \"Framebuffer error \".concat(status);\n}\n\nexport const FRAMEBUFFER_ATTACHMENT_PARAMETERS = [36049, 36048, 33296, 33298, 33299, 33300, 33301, 33302, 33303];\nFramebuffer.ATTACHMENT_PARAMETERS = FRAMEBUFFER_ATTACHMENT_PARAMETERS;\n//# sourceMappingURL=framebuffer.js.map","import Texture2D from '../classes/texture-2d';\nimport TextureCube from '../classes/texture-cube';\nimport Texture3D from '../classes/texture-3d';\nimport Framebuffer from '../classes/framebuffer';\nimport { assert } from '../utils/assert';\nexport function cloneTextureFrom(refTexture, overrides) {\n  assert(refTexture instanceof Texture2D || refTexture instanceof TextureCube || refTexture instanceof Texture3D);\n  const TextureType = refTexture.constructor;\n  const {\n    gl,\n    width,\n    height,\n    format,\n    type,\n    dataFormat,\n    border,\n    mipmaps\n  } = refTexture;\n  const textureOptions = Object.assign({\n    width,\n    height,\n    format,\n    type,\n    dataFormat,\n    border,\n    mipmaps\n  }, overrides);\n  return new TextureType(gl, textureOptions);\n}\nexport function toFramebuffer(texture, opts) {\n  const {\n    gl,\n    width,\n    height,\n    id\n  } = texture;\n  const framebuffer = new Framebuffer(gl, Object.assign({}, opts, {\n    id: \"framebuffer-for-\".concat(id),\n    width,\n    height,\n    attachments: {\n      [36064]: texture\n    }\n  }));\n  return framebuffer;\n}\n//# sourceMappingURL=texture-utils.js.map","export default function getShaderName(shader) {\n  let defaultName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'unnamed';\n  const SHADER_NAME_REGEXP = /#define[\\s*]SHADER_NAME[\\s*]([A-Za-z0-9_-]+)[\\s*]/;\n  const match = shader.match(SHADER_NAME_REGEXP);\n  return match ? match[1] : defaultName;\n}\n//# sourceMappingURL=get-shader-name.js.map","import getShaderName from './get-shader-name';\nimport getShaderTypeName from './get-shader-type-name';\nexport default function formatGLSLCompilerError(errLog, src, shaderType) {\n  const {\n    shaderName,\n    errors,\n    warnings\n  } = parseGLSLCompilerError(errLog, src, shaderType);\n  return \"GLSL compilation error in \".concat(shaderName, \"\\n\\n\").concat(errors, \"\\n\").concat(warnings);\n}\nexport function parseGLSLCompilerError(errLog, src, shaderType, shaderName) {\n  const errorStrings = errLog.split(/\\r?\\n/);\n  const errors = {};\n  const warnings = {};\n  const name = shaderName || getShaderName(src) || '(unnamed)';\n  const shaderDescription = \"\".concat(getShaderTypeName(shaderType), \" shader \").concat(name);\n\n  for (let i = 0; i < errorStrings.length; i++) {\n    const errorString = errorStrings[i];\n\n    if (errorString.length <= 1) {\n      continue;\n    }\n\n    const segments = errorString.split(':');\n    const type = segments[0];\n    const line = parseInt(segments[2], 10);\n\n    if (isNaN(line)) {\n      throw new Error(\"GLSL compilation error in \".concat(shaderDescription, \": \").concat(errLog));\n    }\n\n    if (type !== 'WARNING') {\n      errors[line] = errorString;\n    } else {\n      warnings[line] = errorString;\n    }\n  }\n\n  const lines = addLineNumbers(src);\n  return {\n    shaderName: shaderDescription,\n    errors: formatErrors(errors, lines),\n    warnings: formatErrors(warnings, lines)\n  };\n}\n\nfunction formatErrors(errors, lines) {\n  let message = '';\n\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n\n    if (!errors[i + 3] && !errors[i + 2] && !errors[i + 1]) {\n      continue;\n    }\n\n    message += \"\".concat(line, \"\\n\");\n\n    if (errors[i + 1]) {\n      const error = errors[i + 1];\n      const segments = error.split(':', 3);\n      const type = segments[0];\n      const column = parseInt(segments[1], 10) || 0;\n      const err = error.substring(segments.join(':').length + 1).trim();\n      message += padLeft(\"^^^ \".concat(type, \": \").concat(err, \"\\n\\n\"), column);\n    }\n  }\n\n  return message;\n}\n\nfunction addLineNumbers(string) {\n  let start = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  let delim = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ': ';\n  const lines = string.split(/\\r?\\n/);\n  const maxDigits = String(lines.length + start - 1).length;\n  return lines.map((line, i) => {\n    const lineNumber = String(i + start);\n    const digits = lineNumber.length;\n    const prefix = padLeft(lineNumber, maxDigits - digits);\n    return prefix + delim + line;\n  });\n}\n\nfunction padLeft(string, digits) {\n  let result = '';\n\n  for (let i = 0; i < digits; ++i) {\n    result += ' ';\n  }\n\n  return \"\".concat(result).concat(string);\n}\n//# sourceMappingURL=format-glsl-error.js.map","const GL_FRAGMENT_SHADER = 0x8b30;\nconst GL_VERTEX_SHADER = 0x8b31;\nexport default function getShaderTypeName(type) {\n  switch (type) {\n    case GL_FRAGMENT_SHADER:\n      return 'fragment';\n\n    case GL_VERTEX_SHADER:\n      return 'vertex';\n\n    default:\n      return 'unknown type';\n  }\n}\n//# sourceMappingURL=get-shader-type-name.js.map","export default function getShaderVersion(source) {\n  let version = 100;\n  const words = source.match(/[^\\s]+/g);\n\n  if (words.length >= 2 && words[0] === '#version') {\n    const v = parseInt(words[1], 10);\n\n    if (Number.isFinite(v)) {\n      version = v;\n    }\n  }\n\n  return version;\n}\n//# sourceMappingURL=get-shader-version.js.map","import { assertWebGLContext, log } from '@luma.gl/gltools';\nimport { parseGLSLCompilerError, getShaderName } from '../glsl-utils';\nimport { assert } from '../utils/assert';\nimport { uid } from '../utils/utils';\nimport Resource from './resource';\nconst ERR_SOURCE = 'Shader: GLSL source code must be a JavaScript string';\nexport class Shader extends Resource {\n  get [Symbol.toStringTag]() {\n    return 'Shader';\n  }\n\n  static getTypeName(shaderType) {\n    switch (shaderType) {\n      case 35633:\n        return 'vertex-shader';\n\n      case 35632:\n        return 'fragment-shader';\n\n      default:\n        assert(false);\n        return 'unknown';\n    }\n  }\n\n  constructor(gl, props) {\n    assertWebGLContext(gl);\n    assert(typeof props.source === 'string', ERR_SOURCE);\n    const id = getShaderName(props.source, null) || props.id || uid(\"unnamed \".concat(Shader.getTypeName(props.shaderType)));\n    super(gl, {\n      id\n    });\n    this.shaderType = props.shaderType;\n    this.source = props.source;\n    this.initialize(props);\n  }\n\n  initialize(_ref) {\n    let {\n      source\n    } = _ref;\n    const shaderName = getShaderName(source, null);\n\n    if (shaderName) {\n      this.id = uid(shaderName);\n    }\n\n    this._compile(source);\n  }\n\n  getParameter(pname) {\n    return this.gl.getShaderParameter(this.handle, pname);\n  }\n\n  toString() {\n    return \"\".concat(Shader.getTypeName(this.shaderType), \":\").concat(this.id);\n  }\n\n  getName() {\n    return getShaderName(this.source) || 'unnamed-shader';\n  }\n\n  getSource() {\n    return this.gl.getShaderSource(this.handle);\n  }\n\n  getTranslatedSource() {\n    const extension = this.gl.getExtension('WEBGL_debug_shaders');\n    return extension ? extension.getTranslatedShaderSource(this.handle) : 'No translated source available. WEBGL_debug_shaders not implemented';\n  }\n\n  _compile() {\n    let source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.source;\n\n    if (!source.startsWith('#version ')) {\n      source = \"#version 100\\n\".concat(source);\n    }\n\n    this.source = source;\n    this.gl.shaderSource(this.handle, this.source);\n    this.gl.compileShader(this.handle);\n    const compileStatus = this.getParameter(35713);\n\n    if (!compileStatus) {\n      const infoLog = this.gl.getShaderInfoLog(this.handle);\n      const {\n        shaderName,\n        errors,\n        warnings\n      } = parseGLSLCompilerError(infoLog, this.source, this.shaderType, this.id);\n      log.error(\"GLSL compilation errors in \".concat(shaderName, \"\\n\").concat(errors))();\n      log.warn(\"GLSL compilation warnings in \".concat(shaderName, \"\\n\").concat(warnings))();\n      throw new Error(\"GLSL compilation errors in \".concat(shaderName));\n    }\n  }\n\n  _deleteHandle() {\n    this.gl.deleteShader(this.handle);\n  }\n\n  _getOptsFromHandle() {\n    return {\n      type: this.getParameter(35663),\n      source: this.getSource()\n    };\n  }\n\n}\nexport class VertexShader extends Shader {\n  get [Symbol.toStringTag]() {\n    return 'VertexShader';\n  }\n\n  constructor(gl, props) {\n    if (typeof props === 'string') {\n      props = {\n        source: props\n      };\n    }\n\n    super(gl, Object.assign({}, props, {\n      shaderType: 35633\n    }));\n  }\n\n  _createHandle() {\n    return this.gl.createShader(35633);\n  }\n\n}\nexport class FragmentShader extends Shader {\n  get [Symbol.toStringTag]() {\n    return 'FragmentShader';\n  }\n\n  constructor(gl, props) {\n    if (typeof props === 'string') {\n      props = {\n        source: props\n      };\n    }\n\n    super(gl, Object.assign({}, props, {\n      shaderType: 35632\n    }));\n  }\n\n  _createHandle() {\n    return this.gl.createShader(35632);\n  }\n\n}\n//# sourceMappingURL=shader.js.map","import { log } from '@luma.gl/gltools';\nimport Framebuffer from './framebuffer';\nimport Renderbuffer from './renderbuffer';\nimport Texture from './texture';\nimport { assert } from '../utils/assert';\nconst UNIFORM_SETTERS = {\n  [5126]: getArraySetter.bind(null, 'uniform1fv', toFloatArray, 1, setVectorUniform),\n  [35664]: getArraySetter.bind(null, 'uniform2fv', toFloatArray, 2, setVectorUniform),\n  [35665]: getArraySetter.bind(null, 'uniform3fv', toFloatArray, 3, setVectorUniform),\n  [35666]: getArraySetter.bind(null, 'uniform4fv', toFloatArray, 4, setVectorUniform),\n  [5124]: getArraySetter.bind(null, 'uniform1iv', toIntArray, 1, setVectorUniform),\n  [35667]: getArraySetter.bind(null, 'uniform2iv', toIntArray, 2, setVectorUniform),\n  [35668]: getArraySetter.bind(null, 'uniform3iv', toIntArray, 3, setVectorUniform),\n  [35669]: getArraySetter.bind(null, 'uniform4iv', toIntArray, 4, setVectorUniform),\n  [35670]: getArraySetter.bind(null, 'uniform1iv', toIntArray, 1, setVectorUniform),\n  [35671]: getArraySetter.bind(null, 'uniform2iv', toIntArray, 2, setVectorUniform),\n  [35672]: getArraySetter.bind(null, 'uniform3iv', toIntArray, 3, setVectorUniform),\n  [35673]: getArraySetter.bind(null, 'uniform4iv', toIntArray, 4, setVectorUniform),\n  [35674]: getArraySetter.bind(null, 'uniformMatrix2fv', toFloatArray, 4, setMatrixUniform),\n  [35675]: getArraySetter.bind(null, 'uniformMatrix3fv', toFloatArray, 9, setMatrixUniform),\n  [35676]: getArraySetter.bind(null, 'uniformMatrix4fv', toFloatArray, 16, setMatrixUniform),\n  [35678]: getSamplerSetter,\n  [35680]: getSamplerSetter,\n  [5125]: getArraySetter.bind(null, 'uniform1uiv', toUIntArray, 1, setVectorUniform),\n  [36294]: getArraySetter.bind(null, 'uniform2uiv', toUIntArray, 2, setVectorUniform),\n  [36295]: getArraySetter.bind(null, 'uniform3uiv', toUIntArray, 3, setVectorUniform),\n  [36296]: getArraySetter.bind(null, 'uniform4uiv', toUIntArray, 4, setVectorUniform),\n  [35685]: getArraySetter.bind(null, 'uniformMatrix2x3fv', toFloatArray, 6, setMatrixUniform),\n  [35686]: getArraySetter.bind(null, 'uniformMatrix2x4fv', toFloatArray, 8, setMatrixUniform),\n  [35687]: getArraySetter.bind(null, 'uniformMatrix3x2fv', toFloatArray, 6, setMatrixUniform),\n  [35688]: getArraySetter.bind(null, 'uniformMatrix3x4fv', toFloatArray, 12, setMatrixUniform),\n  [35689]: getArraySetter.bind(null, 'uniformMatrix4x2fv', toFloatArray, 8, setMatrixUniform),\n  [35690]: getArraySetter.bind(null, 'uniformMatrix4x3fv', toFloatArray, 12, setMatrixUniform),\n  [35678]: getSamplerSetter,\n  [35680]: getSamplerSetter,\n  [35679]: getSamplerSetter,\n  [35682]: getSamplerSetter,\n  [36289]: getSamplerSetter,\n  [36292]: getSamplerSetter,\n  [36293]: getSamplerSetter,\n  [36298]: getSamplerSetter,\n  [36299]: getSamplerSetter,\n  [36300]: getSamplerSetter,\n  [36303]: getSamplerSetter,\n  [36306]: getSamplerSetter,\n  [36307]: getSamplerSetter,\n  [36308]: getSamplerSetter,\n  [36311]: getSamplerSetter\n};\nconst FLOAT_ARRAY = {};\nconst INT_ARRAY = {};\nconst UINT_ARRAY = {};\nconst array1 = [0];\n\nfunction toTypedArray(value, uniformLength, Type, cache) {\n  if (uniformLength === 1 && typeof value === 'boolean') {\n    value = value ? 1 : 0;\n  }\n\n  if (Number.isFinite(value)) {\n    array1[0] = value;\n    value = array1;\n  }\n\n  const length = value.length;\n\n  if (length % uniformLength) {\n    log.warn(\"Uniform size should be multiples of \".concat(uniformLength), value)();\n  }\n\n  if (value instanceof Type) {\n    return value;\n  }\n\n  let result = cache[length];\n\n  if (!result) {\n    result = new Type(length);\n    cache[length] = result;\n  }\n\n  for (let i = 0; i < length; i++) {\n    result[i] = value[i];\n  }\n\n  return result;\n}\n\nfunction toFloatArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Float32Array, FLOAT_ARRAY);\n}\n\nfunction toIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Int32Array, INT_ARRAY);\n}\n\nfunction toUIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Uint32Array, UINT_ARRAY);\n}\n\nexport function getUniformSetter(gl, location, info) {\n  const setter = UNIFORM_SETTERS[info.type];\n\n  if (!setter) {\n    throw new Error(\"Unknown GLSL uniform type \".concat(info.type));\n  }\n\n  return setter().bind(null, gl, location);\n}\nexport function parseUniformName(name) {\n  if (name[name.length - 1] !== ']') {\n    return {\n      name,\n      length: 1,\n      isArray: false\n    };\n  }\n\n  const UNIFORM_NAME_REGEXP = /([^[]*)(\\[[0-9]+\\])?/;\n  const matches = name.match(UNIFORM_NAME_REGEXP);\n\n  if (!matches || matches.length < 2) {\n    throw new Error(\"Failed to parse GLSL uniform name \".concat(name));\n  }\n\n  return {\n    name: matches[1],\n    length: matches[2] || 1,\n    isArray: Boolean(matches[2])\n  };\n}\nexport function checkUniformValues(uniforms, source, uniformMap) {\n  for (const uniformName in uniforms) {\n    const value = uniforms[uniformName];\n    const shouldCheck = !uniformMap || Boolean(uniformMap[uniformName]);\n\n    if (shouldCheck && !checkUniformValue(value)) {\n      source = source ? \"\".concat(source, \" \") : '';\n      console.error(\"\".concat(source, \" Bad uniform \").concat(uniformName), value);\n      throw new Error(\"\".concat(source, \" Bad uniform \").concat(uniformName));\n    }\n  }\n\n  return true;\n}\n\nfunction checkUniformValue(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return checkUniformArray(value);\n  }\n\n  if (isFinite(value)) {\n    return true;\n  } else if (value === true || value === false) {\n    return true;\n  } else if (value instanceof Texture) {\n    return true;\n  } else if (value instanceof Renderbuffer) {\n    return true;\n  } else if (value instanceof Framebuffer) {\n    return Boolean(value.texture);\n  }\n\n  return false;\n}\n\nexport function copyUniform(uniforms, key, value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    if (uniforms[key]) {\n      const dest = uniforms[key];\n\n      for (let i = 0, len = value.length; i < len; ++i) {\n        dest[i] = value[i];\n      }\n    } else {\n      uniforms[key] = value.slice();\n    }\n  } else {\n    uniforms[key] = value;\n  }\n}\n\nfunction checkUniformArray(value) {\n  if (value.length === 0) {\n    return false;\n  }\n\n  const checkLength = Math.min(value.length, 16);\n\n  for (let i = 0; i < checkLength; ++i) {\n    if (!Number.isFinite(value[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getSamplerSetter() {\n  let cache = null;\n  return (gl, location, value) => {\n    const update = cache !== value;\n\n    if (update) {\n      gl.uniform1i(location, value);\n      cache = value;\n    }\n\n    return update;\n  };\n}\n\nfunction getArraySetter(functionName, toArray, size, uniformSetter) {\n  let cache = null;\n  let cacheLength = null;\n  return (gl, location, value) => {\n    const arrayValue = toArray(value, size);\n    const length = arrayValue.length;\n    let update = false;\n\n    if (cache === null) {\n      cache = new Float32Array(length);\n      cacheLength = length;\n      update = true;\n    } else {\n      assert(cacheLength === length, 'Uniform length cannot change.');\n\n      for (let i = 0; i < length; ++i) {\n        if (arrayValue[i] !== cache[i]) {\n          update = true;\n          break;\n        }\n      }\n    }\n\n    if (update) {\n      uniformSetter(gl, functionName, location, arrayValue);\n      cache.set(arrayValue);\n    }\n\n    return update;\n  };\n}\n\nfunction setVectorUniform(gl, functionName, location, value) {\n  gl[functionName](location, value);\n}\n\nfunction setMatrixUniform(gl, functionName, location, value) {\n  gl[functionName](location, false, value);\n}\n//# sourceMappingURL=uniforms.js.map","import { assert } from '../utils/assert';\nconst GL_BYTE = 0x1400;\nconst GL_UNSIGNED_BYTE = 0x1401;\nconst GL_SHORT = 0x1402;\nconst GL_UNSIGNED_SHORT = 0x1403;\nconst GL_POINTS = 0x0;\nconst GL_LINES = 0x1;\nconst GL_LINE_LOOP = 0x2;\nconst GL_LINE_STRIP = 0x3;\nconst GL_TRIANGLES = 0x4;\nconst GL_TRIANGLE_STRIP = 0x5;\nconst GL_TRIANGLE_FAN = 0x6;\nconst GL_FLOAT = 0x1406;\nconst GL_FLOAT_VEC2 = 0x8b50;\nconst GL_FLOAT_VEC3 = 0x8b51;\nconst GL_FLOAT_VEC4 = 0x8b52;\nconst GL_INT = 0x1404;\nconst GL_INT_VEC2 = 0x8b53;\nconst GL_INT_VEC3 = 0x8b54;\nconst GL_INT_VEC4 = 0x8b55;\nconst GL_UNSIGNED_INT = 0x1405;\nconst GL_UNSIGNED_INT_VEC2 = 0x8dc6;\nconst GL_UNSIGNED_INT_VEC3 = 0x8dc7;\nconst GL_UNSIGNED_INT_VEC4 = 0x8dc8;\nconst GL_BOOL = 0x8b56;\nconst GL_BOOL_VEC2 = 0x8b57;\nconst GL_BOOL_VEC3 = 0x8b58;\nconst GL_BOOL_VEC4 = 0x8b59;\nconst GL_FLOAT_MAT2 = 0x8b5a;\nconst GL_FLOAT_MAT3 = 0x8b5b;\nconst GL_FLOAT_MAT4 = 0x8b5c;\nconst GL_FLOAT_MAT2x3 = 0x8b65;\nconst GL_FLOAT_MAT2x4 = 0x8b66;\nconst GL_FLOAT_MAT3x2 = 0x8b67;\nconst GL_FLOAT_MAT3x4 = 0x8b68;\nconst GL_FLOAT_MAT4x2 = 0x8b69;\nconst GL_FLOAT_MAT4x3 = 0x8b6a;\nconst COMPOSITE_GL_TYPES = {\n  [GL_FLOAT]: [GL_FLOAT, 1, 'float'],\n  [GL_FLOAT_VEC2]: [GL_FLOAT, 2, 'vec2'],\n  [GL_FLOAT_VEC3]: [GL_FLOAT, 3, 'vec3'],\n  [GL_FLOAT_VEC4]: [GL_FLOAT, 4, 'vec4'],\n  [GL_INT]: [GL_INT, 1, 'int'],\n  [GL_INT_VEC2]: [GL_INT, 2, 'ivec2'],\n  [GL_INT_VEC3]: [GL_INT, 3, 'ivec3'],\n  [GL_INT_VEC4]: [GL_INT, 4, 'ivec4'],\n  [GL_UNSIGNED_INT]: [GL_UNSIGNED_INT, 1, 'uint'],\n  [GL_UNSIGNED_INT_VEC2]: [GL_UNSIGNED_INT, 2, 'uvec2'],\n  [GL_UNSIGNED_INT_VEC3]: [GL_UNSIGNED_INT, 3, 'uvec3'],\n  [GL_UNSIGNED_INT_VEC4]: [GL_UNSIGNED_INT, 4, 'uvec4'],\n  [GL_BOOL]: [GL_FLOAT, 1, 'bool'],\n  [GL_BOOL_VEC2]: [GL_FLOAT, 2, 'bvec2'],\n  [GL_BOOL_VEC3]: [GL_FLOAT, 3, 'bvec3'],\n  [GL_BOOL_VEC4]: [GL_FLOAT, 4, 'bvec4'],\n  [GL_FLOAT_MAT2]: [GL_FLOAT, 8, 'mat2'],\n  [GL_FLOAT_MAT2x3]: [GL_FLOAT, 8, 'mat2x3'],\n  [GL_FLOAT_MAT2x4]: [GL_FLOAT, 8, 'mat2x4'],\n  [GL_FLOAT_MAT3]: [GL_FLOAT, 12, 'mat3'],\n  [GL_FLOAT_MAT3x2]: [GL_FLOAT, 12, 'mat3x2'],\n  [GL_FLOAT_MAT3x4]: [GL_FLOAT, 12, 'mat3x4'],\n  [GL_FLOAT_MAT4]: [GL_FLOAT, 16, 'mat4'],\n  [GL_FLOAT_MAT4x2]: [GL_FLOAT, 16, 'mat4x2'],\n  [GL_FLOAT_MAT4x3]: [GL_FLOAT, 16, 'mat4x3']\n};\nexport function getPrimitiveDrawMode(drawMode) {\n  switch (drawMode) {\n    case GL_POINTS:\n      return GL_POINTS;\n\n    case GL_LINES:\n      return GL_LINES;\n\n    case GL_LINE_STRIP:\n      return GL_LINES;\n\n    case GL_LINE_LOOP:\n      return GL_LINES;\n\n    case GL_TRIANGLES:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_STRIP:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_FAN:\n      return GL_TRIANGLES;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function getPrimitiveCount(_ref) {\n  let {\n    drawMode,\n    vertexCount\n  } = _ref;\n\n  switch (drawMode) {\n    case GL_POINTS:\n    case GL_LINE_LOOP:\n      return vertexCount;\n\n    case GL_LINES:\n      return vertexCount / 2;\n\n    case GL_LINE_STRIP:\n      return vertexCount - 1;\n\n    case GL_TRIANGLES:\n      return vertexCount / 3;\n\n    case GL_TRIANGLE_STRIP:\n    case GL_TRIANGLE_FAN:\n      return vertexCount - 2;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function getVertexCount(_ref2) {\n  let {\n    drawMode,\n    vertexCount\n  } = _ref2;\n  const primitiveCount = getPrimitiveCount({\n    drawMode,\n    vertexCount\n  });\n\n  switch (getPrimitiveDrawMode(drawMode)) {\n    case GL_POINTS:\n      return primitiveCount;\n\n    case GL_LINES:\n      return primitiveCount * 2;\n\n    case GL_TRIANGLES:\n      return primitiveCount * 3;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function decomposeCompositeGLType(compositeGLType) {\n  const typeAndSize = COMPOSITE_GL_TYPES[compositeGLType];\n\n  if (!typeAndSize) {\n    return null;\n  }\n\n  const [type, components] = typeAndSize;\n  return {\n    type,\n    components\n  };\n}\nexport function getCompositeGLType(type, components) {\n  switch (type) {\n    case GL_BYTE:\n    case GL_UNSIGNED_BYTE:\n    case GL_SHORT:\n    case GL_UNSIGNED_SHORT:\n      type = GL_FLOAT;\n      break;\n\n    default:\n  }\n\n  for (const glType in COMPOSITE_GL_TYPES) {\n    const [compType, compComponents, name] = COMPOSITE_GL_TYPES[glType];\n\n    if (compType === type && compComponents === components) {\n      return {\n        glType,\n        name\n      };\n    }\n  }\n\n  return null;\n}\n//# sourceMappingURL=attribute-utils.js.map","import Accessor from './accessor';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { decomposeCompositeGLType } from '../webgl-utils/attribute-utils';\nexport default class ProgramConfiguration {\n  constructor(program) {\n    this.id = program.id;\n    this.attributeInfos = [];\n    this.attributeInfosByName = {};\n    this.attributeInfosByLocation = [];\n    this.varyingInfos = [];\n    this.varyingInfosByName = {};\n    Object.seal(this);\n\n    this._readAttributesFromProgram(program);\n\n    this._readVaryingsFromProgram(program);\n  }\n\n  getAttributeInfo(locationOrName) {\n    const location = Number(locationOrName);\n\n    if (Number.isFinite(location)) {\n      return this.attributeInfosByLocation[location];\n    }\n\n    return this.attributeInfosByName[locationOrName] || null;\n  }\n\n  getAttributeLocation(locationOrName) {\n    const attributeInfo = this.getAttributeInfo(locationOrName);\n    return attributeInfo ? attributeInfo.location : -1;\n  }\n\n  getAttributeAccessor(locationOrName) {\n    const attributeInfo = this.getAttributeInfo(locationOrName);\n    return attributeInfo ? attributeInfo.accessor : null;\n  }\n\n  getVaryingInfo(locationOrName) {\n    const location = Number(locationOrName);\n\n    if (Number.isFinite(location)) {\n      return this.varyingInfos[location];\n    }\n\n    return this.varyingInfosByName[locationOrName] || null;\n  }\n\n  getVaryingIndex(locationOrName) {\n    const varying = this.getVaryingInfo();\n    return varying ? varying.location : -1;\n  }\n\n  getVaryingAccessor(locationOrName) {\n    const varying = this.getVaryingInfo();\n    return varying ? varying.accessor : null;\n  }\n\n  _readAttributesFromProgram(program) {\n    const {\n      gl\n    } = program;\n    const count = gl.getProgramParameter(program.handle, 35721);\n\n    for (let index = 0; index < count; index++) {\n      const {\n        name,\n        type,\n        size\n      } = gl.getActiveAttrib(program.handle, index);\n      const location = gl.getAttribLocation(program.handle, name);\n\n      if (location >= 0) {\n        this._addAttribute(location, name, type, size);\n      }\n    }\n\n    this.attributeInfos.sort((a, b) => a.location - b.location);\n  }\n\n  _readVaryingsFromProgram(program) {\n    const {\n      gl\n    } = program;\n\n    if (!isWebGL2(gl)) {\n      return;\n    }\n\n    const count = gl.getProgramParameter(program.handle, 35971);\n\n    for (let location = 0; location < count; location++) {\n      const {\n        name,\n        type,\n        size\n      } = gl.getTransformFeedbackVarying(program.handle, location);\n\n      this._addVarying(location, name, type, size);\n    }\n\n    this.varyingInfos.sort((a, b) => a.location - b.location);\n  }\n\n  _addAttribute(location, name, compositeType, size) {\n    const {\n      type,\n      components\n    } = decomposeCompositeGLType(compositeType);\n    const accessor = {\n      type,\n      size: size * components\n    };\n\n    this._inferProperties(location, name, accessor);\n\n    const attributeInfo = {\n      location,\n      name,\n      accessor: new Accessor(accessor)\n    };\n    this.attributeInfos.push(attributeInfo);\n    this.attributeInfosByLocation[location] = attributeInfo;\n    this.attributeInfosByName[attributeInfo.name] = attributeInfo;\n  }\n\n  _inferProperties(location, name, accessor) {\n    if (/instance/i.test(name)) {\n      accessor.divisor = 1;\n    }\n  }\n\n  _addVarying(location, name, compositeType, size) {\n    const {\n      type,\n      components\n    } = decomposeCompositeGLType(compositeType);\n    const accessor = new Accessor({\n      type,\n      size: size * components\n    });\n    const varying = {\n      location,\n      name,\n      accessor\n    };\n    this.varyingInfos.push(varying);\n    this.varyingInfosByName[varying.name] = varying;\n  }\n\n}\n//# sourceMappingURL=program-configuration.js.map","import Resource from './resource';\nimport Texture from './texture';\nimport Framebuffer from './framebuffer';\nimport { parseUniformName, getUniformSetter } from './uniforms';\nimport { VertexShader, FragmentShader } from './shader';\nimport ProgramConfiguration from './program-configuration';\nimport { copyUniform, checkUniformValues } from './uniforms';\nimport { isWebGL2, assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { getKey } from '../webgl-utils/constants-to-keys';\nimport { getPrimitiveDrawMode } from '../webgl-utils/attribute-utils';\nimport { assert } from '../utils/assert';\nimport { uid } from '../utils/utils';\nconst LOG_PROGRAM_PERF_PRIORITY = 4;\nconst GL_SEPARATE_ATTRIBS = 0x8c8d;\nconst V6_DEPRECATED_METHODS = ['setVertexArray', 'setAttributes', 'setBuffers', 'unsetBuffers', 'use', 'getUniformCount', 'getUniformInfo', 'getUniformLocation', 'getUniformValue', 'getVarying', 'getFragDataLocation', 'getAttachedShaders', 'getAttributeCount', 'getAttributeLocation', 'getAttributeInfo'];\nexport default class Program extends Resource {\n  get [Symbol.toStringTag]() {\n    return 'Program';\n  }\n\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(gl, props);\n    this.stubRemovedMethods('Program', 'v6.0', V6_DEPRECATED_METHODS);\n    this._isCached = false;\n    this.initialize(props);\n    Object.seal(this);\n\n    this._setId(props.id);\n  }\n\n  initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      hash,\n      vs,\n      fs,\n      varyings,\n      bufferMode = GL_SEPARATE_ATTRIBS\n    } = props;\n    this.hash = hash || '';\n    this.vs = typeof vs === 'string' ? new VertexShader(this.gl, {\n      id: \"\".concat(props.id, \"-vs\"),\n      source: vs\n    }) : vs;\n    this.fs = typeof fs === 'string' ? new FragmentShader(this.gl, {\n      id: \"\".concat(props.id, \"-fs\"),\n      source: fs\n    }) : fs;\n    assert(this.vs instanceof VertexShader);\n    assert(this.fs instanceof FragmentShader);\n    this.uniforms = {};\n    this._textureUniforms = {};\n\n    if (varyings && varyings.length > 0) {\n      assertWebGL2Context(this.gl);\n      this.varyings = varyings;\n      this.gl2.transformFeedbackVaryings(this.handle, varyings, bufferMode);\n    }\n\n    this._compileAndLink();\n\n    this._readUniformLocationsFromLinkedProgram();\n\n    this.configuration = new ProgramConfiguration(this);\n    return this.setProps(props);\n  }\n\n  delete() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (this._isCached) {\n      return this;\n    }\n\n    return super.delete(options);\n  }\n\n  setProps(props) {\n    if ('uniforms' in props) {\n      this.setUniforms(props.uniforms);\n    }\n\n    return this;\n  }\n\n  draw(_ref) {\n    let {\n      logPriority,\n      drawMode = 4,\n      vertexCount,\n      offset = 0,\n      start,\n      end,\n      isIndexed = false,\n      indexType = 5123,\n      instanceCount = 0,\n      isInstanced = instanceCount > 0,\n      vertexArray = null,\n      transformFeedback,\n      framebuffer,\n      parameters = {},\n      uniforms,\n      samplers\n    } = _ref;\n\n    if (uniforms || samplers) {\n      log.deprecated('Program.draw({uniforms})', 'Program.setUniforms(uniforms)')();\n      this.setUniforms(uniforms || {});\n    }\n\n    if (log.priority >= logPriority) {\n      const fb = framebuffer ? framebuffer.id : 'default';\n      const message = \"mode=\".concat(getKey(this.gl, drawMode), \" verts=\").concat(vertexCount, \" \") + \"instances=\".concat(instanceCount, \" indexType=\").concat(getKey(this.gl, indexType), \" \") + \"isInstanced=\".concat(isInstanced, \" isIndexed=\").concat(isIndexed, \" \") + \"Framebuffer=\".concat(fb);\n      log.log(logPriority, message)();\n    }\n\n    assert(vertexArray);\n    this.gl.useProgram(this.handle);\n\n    if (!this._areTexturesRenderable() || vertexCount === 0 || isInstanced && instanceCount === 0) {\n      return false;\n    }\n\n    vertexArray.bindForDraw(vertexCount, instanceCount, () => {\n      if (framebuffer !== undefined) {\n        parameters = Object.assign({}, parameters, {\n          framebuffer\n        });\n      }\n\n      if (transformFeedback) {\n        const primitiveMode = getPrimitiveDrawMode(drawMode);\n        transformFeedback.begin(primitiveMode);\n      }\n\n      this._bindTextures();\n\n      withParameters(this.gl, parameters, () => {\n        if (isIndexed && isInstanced) {\n          this.gl2.drawElementsInstanced(drawMode, vertexCount, indexType, offset, instanceCount);\n        } else if (isIndexed && isWebGL2(this.gl) && !isNaN(start) && !isNaN(end)) {\n          this.gl2.drawRangeElements(drawMode, start, end, vertexCount, indexType, offset);\n        } else if (isIndexed) {\n          this.gl.drawElements(drawMode, vertexCount, indexType, offset);\n        } else if (isInstanced) {\n          this.gl2.drawArraysInstanced(drawMode, offset, vertexCount, instanceCount);\n        } else {\n          this.gl.drawArrays(drawMode, offset, vertexCount);\n        }\n      });\n\n      if (transformFeedback) {\n        transformFeedback.end();\n      }\n    });\n    return true;\n  }\n\n  setUniforms() {\n    let uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (log.priority >= 2) {\n      checkUniformValues(uniforms, this.id, this._uniformSetters);\n    }\n\n    this.gl.useProgram(this.handle);\n\n    for (const uniformName in uniforms) {\n      const uniform = uniforms[uniformName];\n      const uniformSetter = this._uniformSetters[uniformName];\n\n      if (uniformSetter) {\n        let value = uniform;\n        let textureUpdate = false;\n\n        if (value instanceof Framebuffer) {\n          value = value.texture;\n        }\n\n        if (value instanceof Texture) {\n          textureUpdate = this.uniforms[uniformName] !== uniform;\n\n          if (textureUpdate) {\n            if (uniformSetter.textureIndex === undefined) {\n              uniformSetter.textureIndex = this._textureIndexCounter++;\n            }\n\n            const texture = value;\n            const {\n              textureIndex\n            } = uniformSetter;\n            texture.bind(textureIndex);\n            value = textureIndex;\n            this._textureUniforms[uniformName] = texture;\n          } else {\n            value = uniformSetter.textureIndex;\n          }\n        } else if (this._textureUniforms[uniformName]) {\n          delete this._textureUniforms[uniformName];\n        }\n\n        if (uniformSetter(value) || textureUpdate) {\n          copyUniform(this.uniforms, uniformName, uniform);\n        }\n      }\n    }\n\n    return this;\n  }\n\n  _areTexturesRenderable() {\n    let texturesRenderable = true;\n\n    for (const uniformName in this._textureUniforms) {\n      const texture = this._textureUniforms[uniformName];\n      texture.update();\n      texturesRenderable = texturesRenderable && texture.loaded;\n    }\n\n    return texturesRenderable;\n  }\n\n  _bindTextures() {\n    for (const uniformName in this._textureUniforms) {\n      const textureIndex = this._uniformSetters[uniformName].textureIndex;\n\n      this._textureUniforms[uniformName].bind(textureIndex);\n    }\n  }\n\n  _createHandle() {\n    return this.gl.createProgram();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteProgram(this.handle);\n  }\n\n  _getOptionsFromHandle(handle) {\n    const shaderHandles = this.gl.getAttachedShaders(handle);\n    const opts = {};\n\n    for (const shaderHandle of shaderHandles) {\n      const type = this.gl.getShaderParameter(this.handle, 35663);\n\n      switch (type) {\n        case 35633:\n          opts.vs = new VertexShader({\n            handle: shaderHandle\n          });\n          break;\n\n        case 35632:\n          opts.fs = new FragmentShader({\n            handle: shaderHandle\n          });\n          break;\n\n        default:\n      }\n    }\n\n    return opts;\n  }\n\n  _getParameter(pname) {\n    return this.gl.getProgramParameter(this.handle, pname);\n  }\n\n  _setId(id) {\n    if (!id) {\n      const programName = this._getName();\n\n      this.id = uid(programName);\n    }\n  }\n\n  _getName() {\n    let programName = this.vs.getName() || this.fs.getName();\n    programName = programName.replace(/shader/i, '');\n    programName = programName ? \"\".concat(programName, \"-program\") : 'program';\n    return programName;\n  }\n\n  _compileAndLink() {\n    const {\n      gl\n    } = this;\n    gl.attachShader(this.handle, this.vs.handle);\n    gl.attachShader(this.handle, this.fs.handle);\n    log.time(LOG_PROGRAM_PERF_PRIORITY, \"linkProgram for \".concat(this._getName()))();\n    gl.linkProgram(this.handle);\n    log.timeEnd(LOG_PROGRAM_PERF_PRIORITY, \"linkProgram for \".concat(this._getName()))();\n\n    if (gl.debug || log.level > 0) {\n      const linked = gl.getProgramParameter(this.handle, 35714);\n\n      if (!linked) {\n        throw new Error(\"Error linking: \".concat(gl.getProgramInfoLog(this.handle)));\n      }\n\n      gl.validateProgram(this.handle);\n      const validated = gl.getProgramParameter(this.handle, 35715);\n\n      if (!validated) {\n        throw new Error(\"Error validating: \".concat(gl.getProgramInfoLog(this.handle)));\n      }\n    }\n  }\n\n  _readUniformLocationsFromLinkedProgram() {\n    const {\n      gl\n    } = this;\n    this._uniformSetters = {};\n    this._uniformCount = this._getParameter(35718);\n\n    for (let i = 0; i < this._uniformCount; i++) {\n      const info = this.gl.getActiveUniform(this.handle, i);\n      const {\n        name\n      } = parseUniformName(info.name);\n      let location = gl.getUniformLocation(this.handle, name);\n      this._uniformSetters[name] = getUniformSetter(gl, location, info);\n\n      if (info.size > 1) {\n        for (let l = 0; l < info.size; l++) {\n          location = gl.getUniformLocation(this.handle, \"\".concat(name, \"[\").concat(l, \"]\"));\n          this._uniformSetters[\"\".concat(name, \"[\").concat(l, \"]\")] = getUniformSetter(gl, location, info);\n        }\n      }\n    }\n\n    this._textureIndexCounter = 0;\n  }\n\n  getActiveUniforms(uniformIndices, pname) {\n    return this.gl2.getActiveUniforms(this.handle, uniformIndices, pname);\n  }\n\n  getUniformBlockIndex(blockName) {\n    return this.gl2.getUniformBlockIndex(this.handle, blockName);\n  }\n\n  getActiveUniformBlockParameter(blockIndex, pname) {\n    return this.gl2.getActiveUniformBlockParameter(this.handle, blockIndex, pname);\n  }\n\n  uniformBlockBinding(blockIndex, blockBinding) {\n    this.gl2.uniformBlockBinding(this.handle, blockIndex, blockBinding);\n  }\n\n}\n//# sourceMappingURL=program.js.map","import Resource from './resource';\nimport { FEATURES, hasFeatures } from '../features';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\nconst GL_QUERY_RESULT = 0x8866;\nconst GL_QUERY_RESULT_AVAILABLE = 0x8867;\nconst GL_TIME_ELAPSED_EXT = 0x88bf;\nconst GL_GPU_DISJOINT_EXT = 0x8fbb;\nconst GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN = 0x8c88;\nconst GL_ANY_SAMPLES_PASSED = 0x8c2f;\nconst GL_ANY_SAMPLES_PASSED_CONSERVATIVE = 0x8d6a;\nexport default class Query extends Resource {\n  get [Symbol.toStringTag]() {\n    return 'Query';\n  }\n\n  static isSupported(gl) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    const webgl2 = isWebGL2(gl);\n    const hasTimerQuery = hasFeatures(gl, FEATURES.TIMER_QUERY);\n    let supported = webgl2 || hasTimerQuery;\n\n    for (const key of opts) {\n      switch (key) {\n        case 'queries':\n          supported = supported && webgl2;\n          break;\n\n        case 'timers':\n          supported = supported && hasTimerQuery;\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n\n    return supported;\n  }\n\n  constructor(gl) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(gl, opts);\n    this.target = null;\n    this._queryPending = false;\n    this._pollingPromise = null;\n    Object.seal(this);\n  }\n\n  beginTimeElapsedQuery() {\n    return this.begin(GL_TIME_ELAPSED_EXT);\n  }\n\n  beginOcclusionQuery() {\n    let {\n      conservative = false\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return this.begin(conservative ? GL_ANY_SAMPLES_PASSED_CONSERVATIVE : GL_ANY_SAMPLES_PASSED);\n  }\n\n  beginTransformFeedbackQuery() {\n    return this.begin(GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN);\n  }\n\n  begin(target) {\n    if (this._queryPending) {\n      return this;\n    }\n\n    this.target = target;\n    this.gl2.beginQuery(this.target, this.handle);\n    return this;\n  }\n\n  end() {\n    if (this._queryPending) {\n      return this;\n    }\n\n    if (this.target) {\n      this.gl2.endQuery(this.target);\n      this.target = null;\n      this._queryPending = true;\n    }\n\n    return this;\n  }\n\n  isResultAvailable() {\n    if (!this._queryPending) {\n      return false;\n    }\n\n    const resultAvailable = this.gl2.getQueryParameter(this.handle, GL_QUERY_RESULT_AVAILABLE);\n\n    if (resultAvailable) {\n      this._queryPending = false;\n    }\n\n    return resultAvailable;\n  }\n\n  isTimerDisjoint() {\n    return this.gl2.getParameter(GL_GPU_DISJOINT_EXT);\n  }\n\n  getResult() {\n    return this.gl2.getQueryParameter(this.handle, GL_QUERY_RESULT);\n  }\n\n  getTimerMilliseconds() {\n    return this.getResult() / 1e6;\n  }\n\n  createPoll() {\n    let limit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Number.POSITIVE_INFINITY;\n\n    if (this._pollingPromise) {\n      return this._pollingPromise;\n    }\n\n    let counter = 0;\n    this._pollingPromise = new Promise((resolve, reject) => {\n      const poll = () => {\n        if (this.isResultAvailable()) {\n          resolve(this.getResult());\n          this._pollingPromise = null;\n        } else if (counter++ > limit) {\n          reject('Timed out');\n          this._pollingPromise = null;\n        } else {\n          requestAnimationFrame(poll);\n        }\n      };\n\n      requestAnimationFrame(poll);\n    });\n    return this._pollingPromise;\n  }\n\n  _createHandle() {\n    return Query.isSupported(this.gl) ? this.gl2.createQuery() : null;\n  }\n\n  _deleteHandle() {\n    this.gl2.deleteQuery(this.handle);\n  }\n\n}\n//# sourceMappingURL=query.js.map","import { isWebGL2, assertWebGL2Context, log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { isObjectEmpty } from '../utils/utils';\nexport default class TransformFeedback extends Resource {\n  get [Symbol.toStringTag]() {\n    return 'TransformFeedback';\n  }\n\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    assertWebGL2Context(gl);\n    super(gl, props);\n    this.initialize(props);\n    this.stubRemovedMethods('TransformFeedback', 'v6.0', ['pause', 'resume']);\n    Object.seal(this);\n  }\n\n  initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.buffers = {};\n    this.unused = {};\n    this.configuration = null;\n    this.bindOnUse = true;\n\n    if (!isObjectEmpty(this.buffers)) {\n      this.bind(() => this._unbindBuffers());\n    }\n\n    this.setProps(props);\n    return this;\n  }\n\n  setProps(props) {\n    if ('program' in props) {\n      this.configuration = props.program && props.program.configuration;\n    }\n\n    if ('configuration' in props) {\n      this.configuration = props.configuration;\n    }\n\n    if ('bindOnUse' in props) {\n      props = props.bindOnUse;\n    }\n\n    if ('buffers' in props) {\n      this.setBuffers(props.buffers);\n    }\n  }\n\n  setBuffers() {\n    let buffers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.bind(() => {\n      for (const bufferName in buffers) {\n        this.setBuffer(bufferName, buffers[bufferName]);\n      }\n    });\n    return this;\n  }\n\n  setBuffer(locationOrName, bufferOrParams) {\n    const location = this._getVaryingIndex(locationOrName);\n\n    const {\n      buffer,\n      byteSize,\n      byteOffset\n    } = this._getBufferParams(bufferOrParams);\n\n    if (location < 0) {\n      this.unused[locationOrName] = buffer;\n      log.warn(\"\".concat(this.id, \" unused varying buffer \").concat(locationOrName))();\n      return this;\n    }\n\n    this.buffers[location] = bufferOrParams;\n\n    if (!this.bindOnUse) {\n      this._bindBuffer(location, buffer, byteOffset, byteSize);\n    }\n\n    return this;\n  }\n\n  begin() {\n    let primitiveMode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    this.gl.bindTransformFeedback(36386, this.handle);\n\n    this._bindBuffers();\n\n    this.gl.beginTransformFeedback(primitiveMode);\n    return this;\n  }\n\n  end() {\n    this.gl.endTransformFeedback();\n\n    this._unbindBuffers();\n\n    this.gl.bindTransformFeedback(36386, null);\n    return this;\n  }\n\n  _getBufferParams(bufferOrParams) {\n    let byteOffset;\n    let byteSize;\n    let buffer;\n\n    if (bufferOrParams instanceof Buffer === false) {\n      buffer = bufferOrParams.buffer;\n      byteSize = bufferOrParams.byteSize;\n      byteOffset = bufferOrParams.byteOffset;\n    } else {\n      buffer = bufferOrParams;\n    }\n\n    if (byteOffset !== undefined || byteSize !== undefined) {\n      byteOffset = byteOffset || 0;\n      byteSize = byteSize || buffer.byteLength - byteOffset;\n    }\n\n    return {\n      buffer,\n      byteOffset,\n      byteSize\n    };\n  }\n\n  _getVaryingInfo(locationOrName) {\n    return this.configuration && this.configuration.getVaryingInfo(locationOrName);\n  }\n\n  _getVaryingIndex(locationOrName) {\n    if (this.configuration) {\n      return this.configuration.getVaryingInfo(locationOrName).location;\n    }\n\n    const location = Number(locationOrName);\n    return Number.isFinite(location) ? location : -1;\n  }\n\n  _bindBuffers() {\n    if (this.bindOnUse) {\n      for (const bufferIndex in this.buffers) {\n        const {\n          buffer,\n          byteSize,\n          byteOffset\n        } = this._getBufferParams(this.buffers[bufferIndex]);\n\n        this._bindBuffer(bufferIndex, buffer, byteOffset, byteSize);\n      }\n    }\n  }\n\n  _unbindBuffers() {\n    if (this.bindOnUse) {\n      for (const bufferIndex in this.buffers) {\n        this._bindBuffer(bufferIndex, null);\n      }\n    }\n  }\n\n  _bindBuffer(index, buffer) {\n    let byteOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    let byteSize = arguments.length > 3 ? arguments[3] : undefined;\n    const handle = buffer && buffer.handle;\n\n    if (!handle || byteSize === undefined) {\n      this.gl.bindBufferBase(35982, index, handle);\n    } else {\n      this.gl.bindBufferRange(35982, index, handle, byteOffset, byteSize);\n    }\n\n    return this;\n  }\n\n  _createHandle() {\n    return this.gl.createTransformFeedback();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteTransformFeedback(this.handle);\n  }\n\n  _bindHandle(handle) {\n    this.gl.bindTransformFeedback(36386, this.handle);\n  }\n\n}\n//# sourceMappingURL=transform-feedback.js.map","let arrayBuffer = null;\nexport function getScratchArrayBuffer(byteLength) {\n  if (!arrayBuffer || arrayBuffer.byteLength < byteLength) {\n    arrayBuffer = new ArrayBuffer(byteLength);\n  }\n\n  return arrayBuffer;\n}\nexport function getScratchArray(Type, length) {\n  const scratchArrayBuffer = getScratchArrayBuffer(Type.BYTES_PER_ELEMENT * length);\n  return new Type(scratchArrayBuffer, 0, length);\n}\nexport function fillArray(_ref) {\n  let {\n    target,\n    source,\n    start = 0,\n    count = 1\n  } = _ref;\n  const length = source.length;\n  const total = count * length;\n  let copied = 0;\n\n  for (let i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}\n//# sourceMappingURL=array-utils-flat.js.map","import Resource from './resource';\nimport Buffer from './buffer';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { getScratchArray, fillArray } from '../utils/array-utils-flat';\nimport { assert } from '../utils/assert';\nimport { getBrowser } from '@probe.gl/env';\nconst ERR_ELEMENTS = 'elements must be GL.ELEMENT_ARRAY_BUFFER';\nexport default class VertexArrayObject extends Resource {\n  get [Symbol.toStringTag]() {\n    return 'VertexArrayObject';\n  }\n\n  static isSupported(gl) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    if (options.constantAttributeZero) {\n      return isWebGL2(gl) || getBrowser() === 'Chrome';\n    }\n\n    return true;\n  }\n\n  static getDefaultArray(gl) {\n    gl.luma = gl.luma || {};\n\n    if (!gl.luma.defaultVertexArray) {\n      gl.luma.defaultVertexArray = new VertexArrayObject(gl, {\n        handle: null,\n        isDefaultArray: true\n      });\n    }\n\n    return gl.luma.defaultVertexArray;\n  }\n\n  static getMaxAttributes(gl) {\n    VertexArrayObject.MAX_ATTRIBUTES = VertexArrayObject.MAX_ATTRIBUTES || gl.getParameter(34921);\n    return VertexArrayObject.MAX_ATTRIBUTES;\n  }\n\n  static setConstant(gl, location, array) {\n    switch (array.constructor) {\n      case Float32Array:\n        VertexArrayObject._setConstantFloatArray(gl, location, array);\n\n        break;\n\n      case Int32Array:\n        VertexArrayObject._setConstantIntArray(gl, location, array);\n\n        break;\n\n      case Uint32Array:\n        VertexArrayObject._setConstantUintArray(gl, location, array);\n\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  constructor(gl) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const id = opts.id || opts.program && opts.program.id;\n    super(gl, Object.assign({}, opts, {\n      id\n    }));\n    this.buffer = null;\n    this.bufferValue = null;\n    this.isDefaultArray = opts.isDefaultArray || false;\n    this.gl2 = gl;\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  delete() {\n    super.delete();\n\n    if (this.buffer) {\n      this.buffer.delete();\n    }\n\n    return this;\n  }\n\n  get MAX_ATTRIBUTES() {\n    return VertexArrayObject.getMaxAttributes(this.gl);\n  }\n\n  initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return this.setProps(props);\n  }\n\n  setProps(props) {\n    return this;\n  }\n\n  setElementBuffer() {\n    let elementBuffer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    assert(!elementBuffer || elementBuffer.target === 34963, ERR_ELEMENTS);\n    this.bind(() => {\n      this.gl.bindBuffer(34963, elementBuffer ? elementBuffer.handle : null);\n    });\n    return this;\n  }\n\n  setBuffer(location, buffer, accessor) {\n    if (buffer.target === 34963) {\n      return this.setElementBuffer(buffer, accessor);\n    }\n\n    const {\n      size,\n      type,\n      stride,\n      offset,\n      normalized,\n      integer,\n      divisor\n    } = accessor;\n    const {\n      gl,\n      gl2\n    } = this;\n    location = Number(location);\n    this.bind(() => {\n      gl.bindBuffer(34962, buffer.handle);\n\n      if (integer) {\n        assert(isWebGL2(gl));\n        gl2.vertexAttribIPointer(location, size, type, stride, offset);\n      } else {\n        gl.vertexAttribPointer(location, size, type, normalized, stride, offset);\n      }\n\n      gl.enableVertexAttribArray(location);\n      gl2.vertexAttribDivisor(location, divisor || 0);\n    });\n    return this;\n  }\n\n  enable(location) {\n    let enable = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    const disablingAttributeZero = !enable && location === 0 && !VertexArrayObject.isSupported(this.gl, {\n      constantAttributeZero: true\n    });\n\n    if (!disablingAttributeZero) {\n      location = Number(location);\n      this.bind(() => enable ? this.gl.enableVertexAttribArray(location) : this.gl.disableVertexAttribArray(location));\n    }\n\n    return this;\n  }\n\n  getConstantBuffer(elementCount, value) {\n    const constantValue = this._normalizeConstantArrayValue(value);\n\n    const byteLength = constantValue.byteLength * elementCount;\n    const length = constantValue.length * elementCount;\n    let updateNeeded = !this.buffer;\n    this.buffer = this.buffer || new Buffer(this.gl, byteLength);\n    updateNeeded = updateNeeded || this.buffer.reallocate(byteLength);\n    updateNeeded = updateNeeded || !this._compareConstantArrayValues(constantValue, this.bufferValue);\n\n    if (updateNeeded) {\n      const typedArray = getScratchArray(value.constructor, length);\n      fillArray({\n        target: typedArray,\n        source: constantValue,\n        start: 0,\n        count: length\n      });\n      this.buffer.subData(typedArray);\n      this.bufferValue = value;\n    }\n\n    return this.buffer;\n  }\n\n  _normalizeConstantArrayValue(arrayValue) {\n    if (Array.isArray(arrayValue)) {\n      return new Float32Array(arrayValue);\n    }\n\n    return arrayValue;\n  }\n\n  _compareConstantArrayValues(v1, v2) {\n    if (!v1 || !v2 || v1.length !== v2.length || v1.constructor !== v2.constructor) {\n      return false;\n    }\n\n    for (let i = 0; i < v1.length; ++i) {\n      if (v1[i] !== v2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  static _setConstantFloatArray(gl, location, array) {\n    switch (array.length) {\n      case 1:\n        gl.vertexAttrib1fv(location, array);\n        break;\n\n      case 2:\n        gl.vertexAttrib2fv(location, array);\n        break;\n\n      case 3:\n        gl.vertexAttrib3fv(location, array);\n        break;\n\n      case 4:\n        gl.vertexAttrib4fv(location, array);\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  static _setConstantIntArray(gl, location, array) {\n    assert(isWebGL2(gl));\n\n    switch (array.length) {\n      case 1:\n        gl.vertexAttribI1iv(location, array);\n        break;\n\n      case 2:\n        gl.vertexAttribI2iv(location, array);\n        break;\n\n      case 3:\n        gl.vertexAttribI3iv(location, array);\n        break;\n\n      case 4:\n        gl.vertexAttribI4iv(location, array);\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  static _setConstantUintArray(gl, location, array) {\n    assert(isWebGL2(gl));\n\n    switch (array.length) {\n      case 1:\n        gl.vertexAttribI1uiv(location, array);\n        break;\n\n      case 2:\n        gl.vertexAttribI2uiv(location, array);\n        break;\n\n      case 3:\n        gl.vertexAttribI3uiv(location, array);\n        break;\n\n      case 4:\n        gl.vertexAttribI4uiv(location, array);\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  _createHandle() {\n    const gl2 = this.gl;\n    return gl2.createVertexArray();\n  }\n\n  _deleteHandle(handle) {\n    this.gl2.deleteVertexArray(handle);\n    return [this.elements];\n  }\n\n  _bindHandle(handle) {\n    this.gl2.bindVertexArray(handle);\n  }\n\n  _getParameter(pname, _ref) {\n    let {\n      location\n    } = _ref;\n    assert(Number.isFinite(location));\n    return this.bind(() => {\n      switch (pname) {\n        case 34373:\n          return this.gl.getVertexAttribOffset(location, pname);\n\n        default:\n          return this.gl.getVertexAttrib(location, pname);\n      }\n    });\n  }\n\n}\n//# sourceMappingURL=vertex-array-object.js.map","import { log } from '@luma.gl/gltools';\nimport Accessor from './accessor';\nimport Buffer from './buffer';\nimport VertexArrayObject from './vertex-array-object';\nimport { assert } from '../utils/assert';\nimport { stubRemovedMethods } from '../utils/stub-methods';\nconst ERR_ATTRIBUTE_TYPE = 'VertexArray: attributes must be Buffers or constants (i.e. typed array)';\nconst MULTI_LOCATION_ATTRIBUTE_REGEXP = /^(.+)__LOCATION_([0-9]+)$/;\nconst DEPRECATIONS_V6 = ['setBuffers', 'setGeneric', 'clearBindings', 'setLocations', 'setGenericValues', 'setDivisor', 'enable', 'disable'];\nexport default class VertexArray {\n  constructor(gl) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const id = opts.id || opts.program && opts.program.id;\n    this.id = id;\n    this.gl = gl;\n    this.configuration = null;\n    this.elements = null;\n    this.elementsAccessor = null;\n    this.values = null;\n    this.accessors = null;\n    this.unused = null;\n    this.drawParams = null;\n    this.buffer = null;\n    this.attributes = {};\n    this.vertexArrayObject = new VertexArrayObject(gl);\n    stubRemovedMethods(this, 'VertexArray', 'v6.0', DEPRECATIONS_V6);\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  delete() {\n    if (this.buffer) {\n      this.buffer.delete();\n    }\n\n    this.vertexArrayObject.delete();\n  }\n\n  initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.reset();\n    this.configuration = null;\n    this.bindOnUse = false;\n    return this.setProps(props);\n  }\n\n  reset() {\n    this.elements = null;\n    this.elementsAccessor = null;\n    const {\n      MAX_ATTRIBUTES\n    } = this.vertexArrayObject;\n    this.values = new Array(MAX_ATTRIBUTES).fill(null);\n    this.accessors = new Array(MAX_ATTRIBUTES).fill(null);\n    this.unused = {};\n    this.drawParams = null;\n    return this;\n  }\n\n  setProps(props) {\n    if ('program' in props) {\n      this.configuration = props.program && props.program.configuration;\n    }\n\n    if ('configuration' in props) {\n      this.configuration = props.configuration;\n    }\n\n    if ('attributes' in props) {\n      this.setAttributes(props.attributes);\n    }\n\n    if ('elements' in props) {\n      this.setElementBuffer(props.elements);\n    }\n\n    if ('bindOnUse' in props) {\n      props = props.bindOnUse;\n    }\n\n    return this;\n  }\n\n  clearDrawParams() {\n    this.drawParams = null;\n  }\n\n  getDrawParams() {\n    this.drawParams = this.drawParams || this._updateDrawParams();\n    return this.drawParams;\n  }\n\n  setAttributes(attributes) {\n    Object.assign(this.attributes, attributes);\n    this.vertexArrayObject.bind(() => {\n      for (const locationOrName in attributes) {\n        const value = attributes[locationOrName];\n\n        this._setAttribute(locationOrName, value);\n      }\n\n      this.gl.bindBuffer(34962, null);\n    });\n    return this;\n  }\n\n  setElementBuffer() {\n    let elementBuffer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    let accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.elements = elementBuffer;\n    this.elementsAccessor = accessor;\n    this.clearDrawParams();\n    this.vertexArrayObject.setElementBuffer(elementBuffer, accessor);\n    return this;\n  }\n\n  setBuffer(locationOrName, buffer) {\n    let appAccessor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    if (buffer.target === 34963) {\n      return this.setElementBuffer(buffer, appAccessor);\n    }\n\n    const {\n      location,\n      accessor\n    } = this._resolveLocationAndAccessor(locationOrName, buffer, buffer.accessor, appAccessor);\n\n    if (location >= 0) {\n      this.values[location] = buffer;\n      this.accessors[location] = accessor;\n      this.clearDrawParams();\n      this.vertexArrayObject.setBuffer(location, buffer, accessor);\n    }\n\n    return this;\n  }\n\n  setConstant(locationOrName, arrayValue) {\n    let appAccessor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    const {\n      location,\n      accessor\n    } = this._resolveLocationAndAccessor(locationOrName, arrayValue, Object.assign({\n      size: arrayValue.length\n    }, appAccessor));\n\n    if (location >= 0) {\n      arrayValue = this.vertexArrayObject._normalizeConstantArrayValue(arrayValue);\n      this.values[location] = arrayValue;\n      this.accessors[location] = accessor;\n      this.clearDrawParams();\n      this.vertexArrayObject.enable(location, false);\n    }\n\n    return this;\n  }\n\n  unbindBuffers() {\n    this.vertexArrayObject.bind(() => {\n      if (this.elements) {\n        this.vertexArrayObject.setElementBuffer(null);\n      }\n\n      this.buffer = this.buffer || new Buffer(this.gl, {\n        accessor: {\n          size: 4\n        }\n      });\n\n      for (let location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        if (this.values[location] instanceof Buffer) {\n          this.gl.disableVertexAttribArray(location);\n          this.gl.bindBuffer(34962, this.buffer.handle);\n          this.gl.vertexAttribPointer(location, 1, 5126, false, 0, 0);\n        }\n      }\n    });\n    return this;\n  }\n\n  bindBuffers() {\n    this.vertexArrayObject.bind(() => {\n      if (this.elements) {\n        this.setElementBuffer(this.elements);\n      }\n\n      for (let location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        const buffer = this.values[location];\n\n        if (buffer instanceof Buffer) {\n          this.setBuffer(location, buffer);\n        }\n      }\n    });\n    return this;\n  }\n\n  bindForDraw(vertexCount, instanceCount, func) {\n    let value;\n    this.vertexArrayObject.bind(() => {\n      this._setConstantAttributes(vertexCount, instanceCount);\n\n      value = func();\n    });\n    return value;\n  }\n\n  _resolveLocationAndAccessor(locationOrName, value, valueAccessor, appAccessor) {\n    const INVALID_RESULT = {\n      location: -1,\n      accessor: null\n    };\n\n    const {\n      location,\n      name\n    } = this._getAttributeIndex(locationOrName);\n\n    if (!Number.isFinite(location) || location < 0) {\n      this.unused[locationOrName] = value;\n      log.once(3, () => \"unused value \".concat(locationOrName, \" in \").concat(this.id))();\n      return INVALID_RESULT;\n    }\n\n    const accessInfo = this._getAttributeInfo(name || location);\n\n    if (!accessInfo) {\n      return INVALID_RESULT;\n    }\n\n    const currentAccessor = this.accessors[location] || {};\n    const accessor = Accessor.resolve(accessInfo.accessor, currentAccessor, valueAccessor, appAccessor);\n    const {\n      size,\n      type\n    } = accessor;\n    assert(Number.isFinite(size) && Number.isFinite(type));\n    return {\n      location,\n      accessor\n    };\n  }\n\n  _getAttributeInfo(attributeName) {\n    return this.configuration && this.configuration.getAttributeInfo(attributeName);\n  }\n\n  _getAttributeIndex(locationOrName) {\n    const location = Number(locationOrName);\n\n    if (Number.isFinite(location)) {\n      return {\n        location\n      };\n    }\n\n    const multiLocation = MULTI_LOCATION_ATTRIBUTE_REGEXP.exec(locationOrName);\n    const name = multiLocation ? multiLocation[1] : locationOrName;\n    const locationOffset = multiLocation ? Number(multiLocation[2]) : 0;\n\n    if (this.configuration) {\n      return {\n        location: this.configuration.getAttributeLocation(name) + locationOffset,\n        name\n      };\n    }\n\n    return {\n      location: -1\n    };\n  }\n\n  _setAttribute(locationOrName, value) {\n    if (value instanceof Buffer) {\n      this.setBuffer(locationOrName, value);\n    } else if (Array.isArray(value) && value.length && value[0] instanceof Buffer) {\n      const buffer = value[0];\n      const accessor = value[1];\n      this.setBuffer(locationOrName, buffer, accessor);\n    } else if (ArrayBuffer.isView(value) || Array.isArray(value)) {\n      const constant = value;\n      this.setConstant(locationOrName, constant);\n    } else if (value.buffer instanceof Buffer) {\n      const accessor = value;\n      this.setBuffer(locationOrName, accessor.buffer, accessor);\n    } else {\n      throw new Error(ERR_ATTRIBUTE_TYPE);\n    }\n  }\n\n  _setConstantAttributes(vertexCount, instanceCount) {\n    const elementCount = Math.max(vertexCount | 0, instanceCount | 0);\n    let constant = this.values[0];\n\n    if (ArrayBuffer.isView(constant)) {\n      this._setConstantAttributeZero(constant, elementCount);\n    }\n\n    for (let location = 1; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n      constant = this.values[location];\n\n      if (ArrayBuffer.isView(constant)) {\n        this._setConstantAttribute(location, constant);\n      }\n    }\n  }\n\n  _setConstantAttributeZero(constant, elementCount) {\n    if (VertexArrayObject.isSupported(this.gl, {\n      constantAttributeZero: true\n    })) {\n      this._setConstantAttribute(0, constant);\n\n      return;\n    }\n\n    const buffer = this.vertexArrayObject.getConstantBuffer(elementCount, constant);\n    this.vertexArrayObject.setBuffer(0, buffer, this.accessors[0]);\n  }\n\n  _setConstantAttribute(location, constant) {\n    VertexArrayObject.setConstant(this.gl, location, constant);\n  }\n\n  _updateDrawParams() {\n    const drawParams = {\n      isIndexed: false,\n      isInstanced: false,\n      indexCount: Infinity,\n      vertexCount: Infinity,\n      instanceCount: Infinity\n    };\n\n    for (let location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n      this._updateDrawParamsForLocation(drawParams, location);\n    }\n\n    if (this.elements) {\n      drawParams.elementCount = this.elements.getElementCount(this.elements.accessor);\n      drawParams.isIndexed = true;\n      drawParams.indexType = this.elementsAccessor.type || this.elements.accessor.type;\n      drawParams.indexOffset = this.elementsAccessor.offset || 0;\n    }\n\n    if (drawParams.indexCount === Infinity) {\n      drawParams.indexCount = 0;\n    }\n\n    if (drawParams.vertexCount === Infinity) {\n      drawParams.vertexCount = 0;\n    }\n\n    if (drawParams.instanceCount === Infinity) {\n      drawParams.instanceCount = 0;\n    }\n\n    return drawParams;\n  }\n\n  _updateDrawParamsForLocation(drawParams, location) {\n    const value = this.values[location];\n    const accessor = this.accessors[location];\n\n    if (!value) {\n      return;\n    }\n\n    const {\n      divisor\n    } = accessor;\n    const isInstanced = divisor > 0;\n    drawParams.isInstanced = drawParams.isInstanced || isInstanced;\n\n    if (value instanceof Buffer) {\n      const buffer = value;\n\n      if (isInstanced) {\n        const instanceCount = buffer.getVertexCount(accessor);\n        drawParams.instanceCount = Math.min(drawParams.instanceCount, instanceCount);\n      } else {\n        const vertexCount = buffer.getVertexCount(accessor);\n        drawParams.vertexCount = Math.min(drawParams.vertexCount, vertexCount);\n      }\n    }\n  }\n\n  setElements() {\n    let elementBuffer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    let accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    log.deprecated('setElements', 'setElementBuffer')();\n    return this.setElementBuffer(elementBuffer, accessor);\n  }\n\n}\n//# sourceMappingURL=vertex-array.js.map","function formatArrayValue(v, opts) {\n  const {\n    maxElts = 16,\n    size = 1\n  } = opts;\n  let string = '[';\n\n  for (let i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  const terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatValue(v) {\n  let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const EPSILON = 1e-16;\n  const {\n    isInteger = false\n  } = opts;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  const string = v.toPrecision(2);\n  const decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n//# sourceMappingURL=format-value.js.map","import { assert } from '../utils/assert';\nimport { formatValue } from '../utils/format-value';\nexport function getDebugTableForUniforms(_ref) {\n  let {\n    header = 'Uniforms',\n    program,\n    uniforms,\n    undefinedOnly = false\n  } = _ref;\n  assert(program);\n  const SHADER_MODULE_UNIFORM_REGEXP = '.*_.*';\n  const PROJECT_MODULE_UNIFORM_REGEXP = '.*Matrix';\n  const uniformLocations = program._uniformSetters;\n  const table = {};\n  const uniformNames = Object.keys(uniformLocations).sort();\n  let count = 0;\n\n  for (const uniformName of uniformNames) {\n    if (!uniformName.match(SHADER_MODULE_UNIFORM_REGEXP) && !uniformName.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n      if (addUniformToTable({\n        table,\n        header,\n        uniforms,\n        uniformName,\n        undefinedOnly\n      })) {\n        count++;\n      }\n    }\n  }\n\n  for (const uniformName of uniformNames) {\n    if (uniformName.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n      if (addUniformToTable({\n        table,\n        header,\n        uniforms,\n        uniformName,\n        undefinedOnly\n      })) {\n        count++;\n      }\n    }\n  }\n\n  for (const uniformName of uniformNames) {\n    if (!table[uniformName]) {\n      if (addUniformToTable({\n        table,\n        header,\n        uniforms,\n        uniformName,\n        undefinedOnly\n      })) {\n        count++;\n      }\n    }\n  }\n\n  let unusedCount = 0;\n  const unusedTable = {};\n\n  if (!undefinedOnly) {\n    for (const uniformName in uniforms) {\n      const uniform = uniforms[uniformName];\n\n      if (!table[uniformName]) {\n        unusedCount++;\n        unusedTable[uniformName] = {\n          Type: \"NOT USED: \".concat(uniform),\n          [header]: formatValue(uniform)\n        };\n      }\n    }\n  }\n\n  return {\n    table,\n    count,\n    unusedTable,\n    unusedCount\n  };\n}\n\nfunction addUniformToTable(_ref2) {\n  let {\n    table,\n    header,\n    uniforms,\n    uniformName,\n    undefinedOnly\n  } = _ref2;\n  const value = uniforms[uniformName];\n  const isDefined = isUniformDefined(value);\n\n  if (!undefinedOnly || !isDefined) {\n    table[uniformName] = {\n      [header]: isDefined ? formatValue(value) : 'N/A',\n      'Uniform Type': isDefined ? value : 'NOT PROVIDED'\n    };\n    return true;\n  }\n\n  return false;\n}\n\nfunction isUniformDefined(value) {\n  return value !== undefined && value !== null;\n}\n//# sourceMappingURL=debug-uniforms.js.map","import Buffer from '../classes/buffer';\nimport { getKey } from '../webgl-utils/constants-to-keys';\nimport { getCompositeGLType } from '../webgl-utils/attribute-utils';\nimport { formatValue } from '../utils/format-value';\nexport function getDebugTableForVertexArray(_ref) {\n  let {\n    vertexArray,\n    header = 'Attributes'\n  } = _ref;\n\n  if (!vertexArray.configuration) {\n    return {};\n  }\n\n  const table = {};\n\n  if (vertexArray.elements) {\n    table.ELEMENT_ARRAY_BUFFER = getDebugTableRow(vertexArray, vertexArray.elements, null, header);\n  }\n\n  const attributes = vertexArray.values;\n\n  for (const attributeLocation in attributes) {\n    const info = vertexArray._getAttributeInfo(attributeLocation);\n\n    if (info) {\n      let rowHeader = \"\".concat(attributeLocation, \": \").concat(info.name);\n      const accessor = vertexArray.accessors[info.location];\n\n      if (accessor) {\n        rowHeader = \"\".concat(attributeLocation, \": \").concat(getGLSLDeclaration(info.name, accessor));\n      }\n\n      table[rowHeader] = getDebugTableRow(vertexArray, attributes[attributeLocation], accessor, header);\n    }\n  }\n\n  return table;\n}\n\nfunction getDebugTableRow(vertexArray, attribute, accessor, header) {\n  const {\n    gl\n  } = vertexArray;\n\n  if (!attribute) {\n    return {\n      [header]: 'null',\n      'Format ': 'N/A'\n    };\n  }\n\n  let type = 'NOT PROVIDED';\n  let size = 1;\n  let verts = 0;\n  let bytes = 0;\n  let isInteger;\n  let marker;\n  let value;\n\n  if (accessor) {\n    type = accessor.type;\n    size = accessor.size;\n    type = String(type).replace('Array', '');\n    isInteger = type.indexOf('nt') !== -1;\n  }\n\n  if (attribute instanceof Buffer) {\n    const buffer = attribute;\n    const {\n      data,\n      changed\n    } = buffer.getDebugData();\n    marker = changed ? '*' : '';\n    value = data;\n    bytes = buffer.byteLength;\n    verts = bytes / data.BYTES_PER_ELEMENT / size;\n    let format;\n\n    if (accessor) {\n      const instanced = accessor.divisor > 0;\n      format = \"\".concat(instanced ? 'I ' : 'P ', \" \").concat(verts, \" (x\").concat(size, \"=\").concat(bytes, \" bytes \").concat(getKey(gl, type), \")\");\n    } else {\n      isInteger = true;\n      format = \"\".concat(bytes, \" bytes\");\n    }\n\n    return {\n      [header]: \"\".concat(marker).concat(formatValue(value, {\n        size,\n        isInteger\n      })),\n      'Format ': format\n    };\n  }\n\n  value = attribute;\n  size = attribute.length;\n  type = String(attribute.constructor.name).replace('Array', '');\n  isInteger = type.indexOf('nt') !== -1;\n  return {\n    [header]: \"\".concat(formatValue(value, {\n      size,\n      isInteger\n    }), \" (constant)\"),\n    'Format ': \"\".concat(size, \"x\").concat(type, \" (constant)\")\n  };\n}\n\nfunction getGLSLDeclaration(name, accessor) {\n  const {\n    type,\n    size\n  } = accessor;\n  const typeAndName = getCompositeGLType(type, size);\n  return typeAndName ? \"\".concat(name, \" (\").concat(typeAndName.name, \")\") : name;\n}\n//# sourceMappingURL=debug-vertex-array.js.map","import { getCompositeGLType } from '../webgl-utils/attribute-utils';\nexport function getDebugTableForProgramConfiguration(config) {\n  const table = {};\n  const header = \"Accessors for \".concat(config.id);\n\n  for (const attributeInfo of config.attributeInfos) {\n    if (attributeInfo) {\n      const glslDeclaration = getGLSLDeclaration(attributeInfo);\n      table[\"in \".concat(glslDeclaration)] = {\n        [header]: JSON.stringify(attributeInfo.accessor)\n      };\n    }\n  }\n\n  for (const varyingInfo of config.varyingInfos) {\n    if (varyingInfo) {\n      const glslDeclaration = getGLSLDeclaration(varyingInfo);\n      table[\"out \".concat(glslDeclaration)] = {\n        [header]: JSON.stringify(varyingInfo.accessor)\n      };\n    }\n  }\n\n  return table;\n}\n\nfunction getGLSLDeclaration(attributeInfo) {\n  const {\n    type,\n    size\n  } = attributeInfo.accessor;\n  const typeAndName = getCompositeGLType(type, size);\n\n  if (typeAndName) {\n    return \"\".concat(typeAndName.name, \" \").concat(attributeInfo.name);\n  }\n\n  return attributeInfo.name;\n}\n//# sourceMappingURL=debug-program-configuration.js.map","import { isWebGL, createGLContext, instrumentGLContext, resizeGLContext, resetParameters } from '@luma.gl/gltools';\nimport { requestAnimationFrame, cancelAnimationFrame, Query, lumaStats, Framebuffer, log, assert } from '@luma.gl/webgl';\nimport { isBrowser } from '@probe.gl/env';\nconst isPage = isBrowser() && typeof document !== 'undefined';\nlet statIdCounter = 0;\nexport default class AnimationLoop {\n  constructor() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      onCreateContext = opts => createGLContext(opts),\n      onAddHTML = null,\n      onInitialize = () => {},\n      onRender = () => {},\n      onFinalize = () => {},\n      onError,\n      gl = null,\n      glOptions = {},\n      debug = false,\n      createFramebuffer = false,\n      autoResizeViewport = true,\n      autoResizeDrawingBuffer = true,\n      stats = lumaStats.get(\"animation-loop-\".concat(statIdCounter++))\n    } = props;\n    let {\n      useDevicePixels = true\n    } = props;\n\n    if ('useDevicePixelRatio' in props) {\n      log.deprecated('useDevicePixelRatio', 'useDevicePixels')();\n      useDevicePixels = props.useDevicePixelRatio;\n    }\n\n    this.props = {\n      onCreateContext,\n      onAddHTML,\n      onInitialize,\n      onRender,\n      onFinalize,\n      onError,\n      gl,\n      glOptions,\n      debug,\n      createFramebuffer\n    };\n    this.gl = gl;\n    this.needsRedraw = null;\n    this.timeline = null;\n    this.stats = stats;\n    this.cpuTime = this.stats.get('CPU Time');\n    this.gpuTime = this.stats.get('GPU Time');\n    this.frameRate = this.stats.get('Frame Rate');\n    this._initialized = false;\n    this._running = false;\n    this._animationFrameId = null;\n    this._nextFramePromise = null;\n    this._resolveNextFrame = null;\n    this._cpuStartTime = 0;\n    this.setProps({\n      autoResizeViewport,\n      autoResizeDrawingBuffer,\n      useDevicePixels\n    });\n    this.start = this.start.bind(this);\n    this.stop = this.stop.bind(this);\n    this._pageLoadPromise = null;\n    this._onMousemove = this._onMousemove.bind(this);\n    this._onMouseleave = this._onMouseleave.bind(this);\n  }\n\n  delete() {\n    this.stop();\n\n    this._setDisplay(null);\n  }\n\n  setNeedsRedraw(reason) {\n    assert(typeof reason === 'string');\n    this.needsRedraw = this.needsRedraw || reason;\n    return this;\n  }\n\n  setProps(props) {\n    if ('autoResizeViewport' in props) {\n      this.autoResizeViewport = props.autoResizeViewport;\n    }\n\n    if ('autoResizeDrawingBuffer' in props) {\n      this.autoResizeDrawingBuffer = props.autoResizeDrawingBuffer;\n    }\n\n    if ('useDevicePixels' in props) {\n      this.useDevicePixels = props.useDevicePixels;\n    }\n\n    return this;\n  }\n\n  start() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (this._running) {\n      return this;\n    }\n\n    this._running = true;\n\n    const startPromise = this._getPageLoadPromise().then(() => {\n      if (!this._running || this._initialized) {\n        return null;\n      }\n\n      this._createWebGLContext(opts);\n\n      this._createFramebuffer();\n\n      this._startEventHandling();\n\n      this._initializeCallbackData();\n\n      this._updateCallbackData();\n\n      this._resizeCanvasDrawingBuffer();\n\n      this._resizeViewport();\n\n      this._gpuTimeQuery = Query.isSupported(this.gl, ['timers']) ? new Query(this.gl) : null;\n      this._initialized = true;\n      return this.onInitialize(this.animationProps);\n    }).then(appContext => {\n      if (this._running) {\n        this._addCallbackData(appContext || {});\n\n        if (appContext !== false) {\n          this._startLoop();\n        }\n      }\n    });\n\n    if (this.props.onError) {\n      startPromise.catch(this.props.onError);\n    }\n\n    return this;\n  }\n\n  redraw() {\n    if (this.isContextLost()) {\n      return this;\n    }\n\n    this._beginTimers();\n\n    this._setupFrame();\n\n    this._updateCallbackData();\n\n    this._renderFrame(this.animationProps);\n\n    this._clearNeedsRedraw();\n\n    if (this.offScreen && this.gl.commit) {\n      this.gl.commit();\n    }\n\n    if (this._resolveNextFrame) {\n      this._resolveNextFrame(this);\n\n      this._nextFramePromise = null;\n      this._resolveNextFrame = null;\n    }\n\n    this._endTimers();\n\n    return this;\n  }\n\n  stop() {\n    if (this._running) {\n      this._finalizeCallbackData();\n\n      this._cancelAnimationFrame(this._animationFrameId);\n\n      this._nextFramePromise = null;\n      this._resolveNextFrame = null;\n      this._animationFrameId = null;\n      this._running = false;\n    }\n\n    return this;\n  }\n\n  attachTimeline(timeline) {\n    this.timeline = timeline;\n    return this.timeline;\n  }\n\n  detachTimeline() {\n    this.timeline = null;\n  }\n\n  waitForRender() {\n    this.setNeedsRedraw('waitForRender');\n\n    if (!this._nextFramePromise) {\n      this._nextFramePromise = new Promise(resolve => {\n        this._resolveNextFrame = resolve;\n      });\n    }\n\n    return this._nextFramePromise;\n  }\n\n  async toDataURL() {\n    this.setNeedsRedraw('toDataURL');\n    await this.waitForRender();\n    return this.gl.canvas.toDataURL();\n  }\n\n  isContextLost() {\n    return this.gl.isContextLost();\n  }\n\n  onCreateContext() {\n    return this.props.onCreateContext(...arguments);\n  }\n\n  onInitialize() {\n    return this.props.onInitialize(...arguments);\n  }\n\n  onRender() {\n    return this.props.onRender(...arguments);\n  }\n\n  onFinalize() {\n    return this.props.onFinalize(...arguments);\n  }\n\n  getHTMLControlValue(id) {\n    let defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    const element = document.getElementById(id);\n    return element ? Number(element.value) : defaultValue;\n  }\n\n  setViewParameters() {\n    log.removed('AnimationLoop.setViewParameters', 'AnimationLoop.setProps')();\n    return this;\n  }\n\n  _startLoop() {\n    const renderFrame = () => {\n      if (!this._running) {\n        return;\n      }\n\n      this.redraw();\n      this._animationFrameId = this._requestAnimationFrame(renderFrame);\n    };\n\n    this._cancelAnimationFrame(this._animationFrameId);\n\n    this._animationFrameId = this._requestAnimationFrame(renderFrame);\n  }\n\n  _getPageLoadPromise() {\n    if (!this._pageLoadPromise) {\n      this._pageLoadPromise = isPage ? new Promise((resolve, reject) => {\n        if (isPage && document.readyState === 'complete') {\n          resolve(document);\n          return;\n        }\n\n        window.addEventListener('load', () => {\n          resolve(document);\n        });\n      }) : Promise.resolve({});\n    }\n\n    return this._pageLoadPromise;\n  }\n\n  _setDisplay(display) {\n    if (this.display) {\n      this.display.delete();\n      this.display.animationLoop = null;\n    }\n\n    if (display) {\n      display.animationLoop = this;\n    }\n\n    this.display = display;\n  }\n\n  _cancelAnimationFrame(animationFrameId) {\n    if (this.display && this.display.cancelAnimationFrame) {\n      return this.display.cancelAnimationFrame(animationFrameId);\n    }\n\n    return cancelAnimationFrame(animationFrameId);\n  }\n\n  _requestAnimationFrame(renderFrameCallback) {\n    if (this._running) {\n      if (this.display && this.display.requestAnimationFrame) {\n        return this.display.requestAnimationFrame(renderFrameCallback);\n      }\n\n      return requestAnimationFrame(renderFrameCallback);\n    }\n\n    return undefined;\n  }\n\n  _renderFrame() {\n    if (this.display) {\n      this.display._renderFrame(...arguments);\n\n      return;\n    }\n\n    this.onRender(...arguments);\n  }\n\n  _clearNeedsRedraw() {\n    this.needsRedraw = null;\n  }\n\n  _setupFrame() {\n    this._resizeCanvasDrawingBuffer();\n\n    this._resizeViewport();\n\n    this._resizeFramebuffer();\n  }\n\n  _initializeCallbackData() {\n    this.animationProps = {\n      gl: this.gl,\n      stop: this.stop,\n      canvas: this.gl.canvas,\n      framebuffer: this.framebuffer,\n      useDevicePixels: this.useDevicePixels,\n      needsRedraw: null,\n      startTime: Date.now(),\n      engineTime: 0,\n      tick: 0,\n      tock: 0,\n      time: 0,\n      _timeline: this.timeline,\n      _loop: this,\n      _animationLoop: this,\n      _mousePosition: null\n    };\n  }\n\n  _updateCallbackData() {\n    const {\n      width,\n      height,\n      aspect\n    } = this._getSizeAndAspect();\n\n    if (width !== this.animationProps.width || height !== this.animationProps.height) {\n      this.setNeedsRedraw('drawing buffer resized');\n    }\n\n    if (aspect !== this.animationProps.aspect) {\n      this.setNeedsRedraw('drawing buffer aspect changed');\n    }\n\n    this.animationProps.width = width;\n    this.animationProps.height = height;\n    this.animationProps.aspect = aspect;\n    this.animationProps.needsRedraw = this.needsRedraw;\n    this.animationProps.engineTime = Date.now() - this.animationProps.startTime;\n\n    if (this.timeline) {\n      this.timeline.update(this.animationProps.engineTime);\n    }\n\n    this.animationProps.tick = Math.floor(this.animationProps.time / 1000 * 60);\n    this.animationProps.tock++;\n    this.animationProps.time = this.timeline ? this.timeline.getTime() : this.animationProps.engineTime;\n    this.animationProps._offScreen = this.offScreen;\n  }\n\n  _finalizeCallbackData() {\n    this.onFinalize(this.animationProps);\n  }\n\n  _addCallbackData(appContext) {\n    if (typeof appContext === 'object' && appContext !== null) {\n      this.animationProps = Object.assign({}, this.animationProps, appContext);\n    }\n  }\n\n  _createWebGLContext(opts) {\n    this.offScreen = opts.canvas && typeof OffscreenCanvas !== 'undefined' && opts.canvas instanceof OffscreenCanvas;\n    opts = Object.assign({}, opts, this.props.glOptions);\n    this.gl = this.props.gl ? instrumentGLContext(this.props.gl, opts) : this.onCreateContext(opts);\n\n    if (!isWebGL(this.gl)) {\n      throw new Error('AnimationLoop.onCreateContext - illegal context returned');\n    }\n\n    resetParameters(this.gl);\n\n    this._createInfoDiv();\n  }\n\n  _createInfoDiv() {\n    if (this.gl.canvas && this.props.onAddHTML) {\n      const wrapperDiv = document.createElement('div');\n      document.body.appendChild(wrapperDiv);\n      wrapperDiv.style.position = 'relative';\n      const div = document.createElement('div');\n      div.style.position = 'absolute';\n      div.style.left = '10px';\n      div.style.bottom = '10px';\n      div.style.width = '300px';\n      div.style.background = 'white';\n      wrapperDiv.appendChild(this.gl.canvas);\n      wrapperDiv.appendChild(div);\n      const html = this.props.onAddHTML(div);\n\n      if (html) {\n        div.innerHTML = html;\n      }\n    }\n  }\n\n  _getSizeAndAspect() {\n    const width = this.gl.drawingBufferWidth;\n    const height = this.gl.drawingBufferHeight;\n    let aspect = 1;\n    const {\n      canvas\n    } = this.gl;\n\n    if (canvas && canvas.clientHeight) {\n      aspect = canvas.clientWidth / canvas.clientHeight;\n    } else if (width > 0 && height > 0) {\n      aspect = width / height;\n    }\n\n    return {\n      width,\n      height,\n      aspect\n    };\n  }\n\n  _resizeViewport() {\n    if (this.autoResizeViewport) {\n      this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);\n    }\n  }\n\n  _resizeCanvasDrawingBuffer() {\n    if (this.autoResizeDrawingBuffer) {\n      resizeGLContext(this.gl, {\n        useDevicePixels: this.useDevicePixels\n      });\n    }\n  }\n\n  _createFramebuffer() {\n    if (this.props.createFramebuffer) {\n      this.framebuffer = new Framebuffer(this.gl);\n    }\n  }\n\n  _resizeFramebuffer() {\n    if (this.framebuffer) {\n      this.framebuffer.resize({\n        width: this.gl.drawingBufferWidth,\n        height: this.gl.drawingBufferHeight\n      });\n    }\n  }\n\n  _beginTimers() {\n    this.frameRate.timeEnd();\n    this.frameRate.timeStart();\n\n    if (this._gpuTimeQuery && this._gpuTimeQuery.isResultAvailable() && !this._gpuTimeQuery.isTimerDisjoint()) {\n      this.stats.get('GPU Time').addTime(this._gpuTimeQuery.getTimerMilliseconds());\n    }\n\n    if (this._gpuTimeQuery) {\n      this._gpuTimeQuery.beginTimeElapsedQuery();\n    }\n\n    this.cpuTime.timeStart();\n  }\n\n  _endTimers() {\n    this.cpuTime.timeEnd();\n\n    if (this._gpuTimeQuery) {\n      this._gpuTimeQuery.end();\n    }\n  }\n\n  _startEventHandling() {\n    const {\n      canvas\n    } = this.gl;\n\n    if (canvas) {\n      canvas.addEventListener('mousemove', this._onMousemove);\n      canvas.addEventListener('mouseleave', this._onMouseleave);\n    }\n  }\n\n  _onMousemove(e) {\n    this.animationProps._mousePosition = [e.offsetX, e.offsetY];\n  }\n\n  _onMouseleave(e) {\n    this.animationProps._mousePosition = null;\n  }\n\n}\n//# sourceMappingURL=animation-loop.js.map","export function requestAnimationFrame(callback) {\n  return typeof window !== 'undefined' && window.requestAnimationFrame ? window.requestAnimationFrame(callback) : setTimeout(callback, 1000 / 60);\n}\nexport function cancelAnimationFrame(timerId) {\n  return typeof window !== 'undefined' && window.cancelAnimationFrame ? window.cancelAnimationFrame(timerId) : clearTimeout(timerId);\n}\n//# sourceMappingURL=request-animation-frame.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'shadertools: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","const TYPE_DEFINITIONS = {\n  number: {\n    validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n\n  },\n  array: {\n    validate(value, propType) {\n      return Array.isArray(value) || ArrayBuffer.isView(value);\n    }\n\n  }\n};\nexport function parsePropTypes(propDefs) {\n  const propTypes = {};\n\n  for (const propName in propDefs) {\n    const propDef = propDefs[propName];\n    const propType = parsePropType(propDef);\n    propTypes[propName] = propType;\n  }\n\n  return propTypes;\n}\n\nfunction parsePropType(propDef) {\n  let type = getTypeOf(propDef);\n\n  if (type === 'object') {\n    if (!propDef) {\n      return {\n        type: 'object',\n        value: null\n      };\n    }\n\n    if ('type' in propDef) {\n      return Object.assign({}, propDef, TYPE_DEFINITIONS[propDef.type]);\n    }\n\n    if (!('value' in propDef)) {\n      return {\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    type = getTypeOf(propDef.value);\n    return Object.assign({\n      type\n    }, propDef, TYPE_DEFINITIONS[type]);\n  }\n\n  return Object.assign({\n    type,\n    value: propDef\n  }, TYPE_DEFINITIONS[type]);\n}\n\nfunction getTypeOf(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return 'array';\n  }\n\n  return typeof value;\n}\n//# sourceMappingURL=prop-types.js.map","import { assert } from '../utils';\nimport { parsePropTypes } from './filters/prop-types';\nconst VERTEX_SHADER = 'vs';\nconst FRAGMENT_SHADER = 'fs';\nexport default class ShaderModule {\n  constructor(_ref) {\n    let {\n      name,\n      vs,\n      fs,\n      dependencies = [],\n      uniforms,\n      getUniforms,\n      deprecations = [],\n      defines = {},\n      inject = {},\n      vertexShader,\n      fragmentShader\n    } = _ref;\n    assert(typeof name === 'string');\n    this.name = name;\n    this.vs = vs || vertexShader;\n    this.fs = fs || fragmentShader;\n    this.getModuleUniforms = getUniforms;\n    this.dependencies = dependencies;\n    this.deprecations = this._parseDeprecationDefinitions(deprecations);\n    this.defines = defines;\n    this.injections = normalizeInjections(inject);\n\n    if (uniforms) {\n      this.uniforms = parsePropTypes(uniforms);\n    }\n  }\n\n  getModuleSource(type) {\n    let moduleSource;\n\n    switch (type) {\n      case VERTEX_SHADER:\n        moduleSource = this.vs || '';\n        break;\n\n      case FRAGMENT_SHADER:\n        moduleSource = this.fs || '';\n        break;\n\n      default:\n        assert(false);\n    }\n\n    return \"#define MODULE_\".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi, '_'), \"\\n\").concat(moduleSource, \"// END MODULE_\").concat(this.name, \"\\n\\n\");\n  }\n\n  getUniforms(opts, uniforms) {\n    if (this.getModuleUniforms) {\n      return this.getModuleUniforms(opts, uniforms);\n    }\n\n    if (this.uniforms) {\n      return this._defaultGetUniforms(opts);\n    }\n\n    return {};\n  }\n\n  getDefines() {\n    return this.defines;\n  }\n\n  checkDeprecations(shaderSource, log) {\n    this.deprecations.forEach(def => {\n      if (def.regex.test(shaderSource)) {\n        if (def.deprecated) {\n          log.deprecated(def.old, def.new)();\n        } else {\n          log.removed(def.old, def.new)();\n        }\n      }\n    });\n  }\n\n  _parseDeprecationDefinitions(deprecations) {\n    deprecations.forEach(def => {\n      switch (def.type) {\n        case 'function':\n          def.regex = new RegExp(\"\\\\b\".concat(def.old, \"\\\\(\"));\n          break;\n\n        default:\n          def.regex = new RegExp(\"\".concat(def.type, \" \").concat(def.old, \";\"));\n      }\n    });\n    return deprecations;\n  }\n\n  _defaultGetUniforms() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const uniforms = {};\n    const propTypes = this.uniforms;\n\n    for (const key in propTypes) {\n      const propDef = propTypes[key];\n\n      if (key in opts && !propDef.private) {\n        if (propDef.validate) {\n          assert(propDef.validate(opts[key], propDef), \"\".concat(this.name, \": invalid \").concat(key));\n        }\n\n        uniforms[key] = opts[key];\n      } else {\n        uniforms[key] = propDef.value;\n      }\n    }\n\n    return uniforms;\n  }\n\n}\nexport function normalizeShaderModule(module) {\n  if (!module.normalized) {\n    module.normalized = true;\n\n    if (module.uniforms && !module.getUniforms) {\n      const shaderModule = new ShaderModule(module);\n      module.getUniforms = shaderModule.getUniforms.bind(shaderModule);\n    }\n  }\n\n  return module;\n}\n\nfunction normalizeInjections(injections) {\n  const result = {\n    vs: {},\n    fs: {}\n  };\n\n  for (const hook in injections) {\n    let injection = injections[hook];\n    const stage = hook.slice(0, 2);\n\n    if (typeof injection === 'string') {\n      injection = {\n        order: 0,\n        injection\n      };\n    }\n\n    result[stage][hook] = injection;\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader-module.js.map","import ShaderModule from './shader-module';\nimport { assert } from '../utils';\nexport function resolveModules(modules) {\n  return getShaderDependencies(instantiateModules(modules));\n}\n\nfunction getShaderDependencies(modules) {\n  const moduleMap = {};\n  const moduleDepth = {};\n  getDependencyGraph({\n    modules,\n    level: 0,\n    moduleMap,\n    moduleDepth\n  });\n  return Object.keys(moduleDepth).sort((a, b) => moduleDepth[b] - moduleDepth[a]).map(name => moduleMap[name]);\n}\n\nfunction getDependencyGraph(_ref) {\n  let {\n    modules,\n    level,\n    moduleMap,\n    moduleDepth\n  } = _ref;\n\n  if (level >= 5) {\n    throw new Error('Possible loop in shader dependency graph');\n  }\n\n  for (const module of modules) {\n    moduleMap[module.name] = module;\n\n    if (moduleDepth[module.name] === undefined || moduleDepth[module.name] < level) {\n      moduleDepth[module.name] = level;\n    }\n  }\n\n  for (const module of modules) {\n    if (module.dependencies) {\n      getDependencyGraph({\n        modules: module.dependencies,\n        level: level + 1,\n        moduleMap,\n        moduleDepth\n      });\n    }\n  }\n}\n\nfunction instantiateModules(modules, seen) {\n  return modules.map(module => {\n    if (module instanceof ShaderModule) {\n      return module;\n    }\n\n    assert(typeof module !== 'string', \"Shader module use by name is deprecated. Import shader module '\".concat(module, \"' and use it directly.\"));\n    assert(module.name, 'shader module has no name');\n    module = new ShaderModule(module);\n    module.dependencies = instantiateModules(module.dependencies);\n    return module;\n  });\n}\n\nexport const TEST_EXPORTS = {\n  getShaderDependencies,\n  getDependencyGraph\n};\n//# sourceMappingURL=resolve-modules.js.map","export default function isOldIE() {\n  let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const navigator = typeof window !== 'undefined' ? window.navigator || {} : {};\n  const userAgent = opts.userAgent || navigator.userAgent || '';\n  const isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  const isTrident = userAgent.indexOf('Trident/') !== -1;\n  return isMSIE || isTrident;\n}\n//# sourceMappingURL=is-old-ie.js.map","import isOldIE from './is-old-ie';\nimport assert from './assert';\nconst GL_VENDOR = 0x1f00;\nconst GL_RENDERER = 0x1f01;\nconst GL_VERSION = 0x1f02;\nconst GL_SHADING_LANGUAGE_VERSION = 0x8b8c;\nconst WEBGL_FEATURES = {\n  GLSL_FRAG_DATA: ['WEBGL_draw_buffers', true],\n  GLSL_FRAG_DEPTH: ['EXT_frag_depth', true],\n  GLSL_DERIVATIVES: ['OES_standard_derivatives', true],\n  GLSL_TEXTURE_LOD: ['EXT_shader_texture_lod', true]\n};\nconst FEATURES = {};\nObject.keys(WEBGL_FEATURES).forEach(key => {\n  FEATURES[key] = key;\n});\nexport { FEATURES };\n\nfunction isWebGL2(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && gl._version === 2);\n}\n\nexport function getContextInfo(gl) {\n  const info = gl.getExtension('WEBGL_debug_renderer_info');\n  const vendor = gl.getParameter(info && info.UNMASKED_VENDOR_WEBGL || GL_VENDOR);\n  const renderer = gl.getParameter(info && info.UNMASKED_RENDERER_WEBGL || GL_RENDERER);\n  const gpuVendor = identifyGPUVendor(vendor, renderer);\n  const gpuInfo = {\n    gpuVendor,\n    vendor,\n    renderer,\n    version: gl.getParameter(GL_VERSION),\n    shadingLanguageVersion: gl.getParameter(GL_SHADING_LANGUAGE_VERSION)\n  };\n  return gpuInfo;\n}\n\nfunction identifyGPUVendor(vendor, renderer) {\n  if (vendor.match(/NVIDIA/i) || renderer.match(/NVIDIA/i)) {\n    return 'NVIDIA';\n  }\n\n  if (vendor.match(/INTEL/i) || renderer.match(/INTEL/i)) {\n    return 'INTEL';\n  }\n\n  if (vendor.match(/AMD/i) || renderer.match(/AMD/i) || vendor.match(/ATI/i) || renderer.match(/ATI/i)) {\n    return 'AMD';\n  }\n\n  return 'UNKNOWN GPU';\n}\n\nconst compiledGlslExtensions = {};\nexport function canCompileGLGSExtension(gl, cap) {\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n\n  if (!isOldIE(opts)) {\n    return true;\n  }\n\n  if (cap in compiledGlslExtensions) {\n    return compiledGlslExtensions[cap];\n  }\n\n  const extensionName = feature[0];\n  const behavior = opts.behavior || 'enable';\n  const source = \"#extension GL_\".concat(extensionName, \" : \").concat(behavior, \"\\nvoid main(void) {}\");\n  const shader = gl.createShader(35633);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  const canCompile = gl.getShaderParameter(shader, 35713);\n  gl.deleteShader(shader);\n  compiledGlslExtensions[cap] = canCompile;\n  return canCompile;\n}\n\nfunction getFeature(gl, cap) {\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n  const extensionName = isWebGL2(gl) ? feature[1] || feature[0] : feature[0];\n  const value = typeof extensionName === 'string' ? Boolean(gl.getExtension(extensionName)) : extensionName;\n  assert(value === false || value === true);\n  return value;\n}\n\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(feature => getFeature(gl, feature));\n}\n//# sourceMappingURL=webgl-info.js.map","export const MODULE_INJECTORS_VS = \"#ifdef MODULE_LOGDEPTH\\n  logdepth_adjustPosition(gl_Position);\\n#endif\\n\";\nexport const MODULE_INJECTORS_FS = \"#ifdef MODULE_MATERIAL\\n  gl_FragColor = material_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LIGHTING\\n  gl_FragColor = lighting_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_FOG\\n  gl_FragColor = fog_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_PICKING\\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LOGDEPTH\\n  logdepth_setFragDepth();\\n#endif\\n\";\n//# sourceMappingURL=module-injectors.js.map","import { MODULE_INJECTORS_VS, MODULE_INJECTORS_FS } from '../modules/module-injectors';\nimport { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { assert } from '../utils';\nconst MODULE_INJECTORS = {\n  [VERTEX_SHADER]: MODULE_INJECTORS_VS,\n  [FRAGMENT_SHADER]: MODULE_INJECTORS_FS\n};\nexport const DECLARATION_INJECT_MARKER = '__LUMA_INJECT_DECLARATIONS__';\nconst REGEX_START_OF_MAIN = /void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/;\nconst REGEX_END_OF_MAIN = /}\\n?[^{}]*$/;\nconst fragments = [];\nexport default function injectShader(source, type, inject) {\n  let injectStandardStubs = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  const isVertex = type === VERTEX_SHADER;\n\n  for (const key in inject) {\n    const fragmentData = inject[key];\n    fragmentData.sort((a, b) => a.order - b.order);\n    fragments.length = fragmentData.length;\n\n    for (let i = 0, len = fragmentData.length; i < len; ++i) {\n      fragments[i] = fragmentData[i].injection;\n    }\n\n    const fragmentString = \"\".concat(fragments.join('\\n'), \"\\n\");\n\n    switch (key) {\n      case 'vs:#decl':\n        if (isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'vs:#main-start':\n        if (isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, match => match + fragmentString);\n        }\n\n        break;\n\n      case 'vs:#main-end':\n        if (isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, match => fragmentString + match);\n        }\n\n        break;\n\n      case 'fs:#decl':\n        if (!isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'fs:#main-start':\n        if (!isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, match => match + fragmentString);\n        }\n\n        break;\n\n      case 'fs:#main-end':\n        if (!isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, match => fragmentString + match);\n        }\n\n        break;\n\n      default:\n        source = source.replace(key, match => match + fragmentString);\n    }\n  }\n\n  source = source.replace(DECLARATION_INJECT_MARKER, '');\n\n  if (injectStandardStubs) {\n    source = source.replace(/\\}\\s*$/, match => match + MODULE_INJECTORS[type]);\n  }\n\n  return source;\n}\nexport function combineInjects(injects) {\n  const result = {};\n  assert(Array.isArray(injects) && injects.length > 1);\n  injects.forEach(inject => {\n    for (const key in inject) {\n      result[key] = result[key] ? \"\".concat(result[key], \"\\n\").concat(inject[key]) : inject[key];\n    }\n  });\n  return result;\n}\n//# sourceMappingURL=inject-shader.js.map","export const VERTEX_SHADER = 'vs';\nexport const FRAGMENT_SHADER = 'fs';\n//# sourceMappingURL=constants.js.map","function testVariable(qualifier) {\n  return new RegExp(\"\\\\b\".concat(qualifier, \"[ \\\\t]+(\\\\w+[ \\\\t]+\\\\w+(\\\\[\\\\w+\\\\])?;)\"), 'g');\n}\n\nconst ES300_REPLACEMENTS = [[/^(#version[ \\t]+(100|300[ \\t]+es))?[ \\t]*\\n/, '#version 300 es\\n'], [/\\btexture(2D|2DProj|Cube)Lod(EXT)?\\(/g, 'textureLod('], [/\\btexture(2D|2DProj|Cube)(EXT)?\\(/g, 'texture(']];\nconst ES300_VERTEX_REPLACEMENTS = [...ES300_REPLACEMENTS, [testVariable('attribute'), 'in $1'], [testVariable('varying'), 'out $1']];\nconst ES300_FRAGMENT_REPLACEMENTS = [...ES300_REPLACEMENTS, [testVariable('varying'), 'in $1']];\nconst ES100_REPLACEMENTS = [[/^#version[ \\t]+300[ \\t]+es/, '#version 100'], [/\\btexture(2D|2DProj|Cube)Lod\\(/g, 'texture$1LodEXT('], [/\\btexture\\(/g, 'texture2D('], [/\\btextureLod\\(/g, 'texture2DLodEXT(']];\nconst ES100_VERTEX_REPLACEMENTS = [...ES100_REPLACEMENTS, [testVariable('in'), 'attribute $1'], [testVariable('out'), 'varying $1']];\nconst ES100_FRAGMENT_REPLACEMENTS = [...ES100_REPLACEMENTS, [testVariable('in'), 'varying $1']];\nconst ES100_FRAGMENT_OUTPUT_NAME = 'gl_FragColor';\nconst ES300_FRAGMENT_OUTPUT_REGEX = /\\bout[ \\t]+vec4[ \\t]+(\\w+)[ \\t]*;\\n?/;\nconst REGEX_START_OF_MAIN = /void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/;\nexport default function transpileShader(source, targetGLSLVersion, isVertex) {\n  switch (targetGLSLVersion) {\n    case 300:\n      return isVertex ? convertShader(source, ES300_VERTEX_REPLACEMENTS) : convertFragmentShaderTo300(source);\n\n    case 100:\n      return isVertex ? convertShader(source, ES100_VERTEX_REPLACEMENTS) : convertFragmentShaderTo100(source);\n\n    default:\n      throw new Error(\"unknown GLSL version \".concat(targetGLSLVersion));\n  }\n}\n\nfunction convertShader(source, replacements) {\n  for (const [pattern, replacement] of replacements) {\n    source = source.replace(pattern, replacement);\n  }\n\n  return source;\n}\n\nfunction convertFragmentShaderTo300(source) {\n  source = convertShader(source, ES300_FRAGMENT_REPLACEMENTS);\n  const outputMatch = source.match(ES300_FRAGMENT_OUTPUT_REGEX);\n\n  if (outputMatch) {\n    const outputName = outputMatch[1];\n    source = source.replace(new RegExp(\"\\\\b\".concat(ES100_FRAGMENT_OUTPUT_NAME, \"\\\\b\"), 'g'), outputName);\n  } else {\n    const outputName = 'fragmentColor';\n    source = source.replace(REGEX_START_OF_MAIN, match => \"out vec4 \".concat(outputName, \";\\n\").concat(match)).replace(new RegExp(\"\\\\b\".concat(ES100_FRAGMENT_OUTPUT_NAME, \"\\\\b\"), 'g'), outputName);\n  }\n\n  return source;\n}\n\nfunction convertFragmentShaderTo100(source) {\n  source = convertShader(source, ES100_FRAGMENT_REPLACEMENTS);\n  const outputMatch = source.match(ES300_FRAGMENT_OUTPUT_REGEX);\n\n  if (outputMatch) {\n    const outputName = outputMatch[1];\n    source = source.replace(ES300_FRAGMENT_OUTPUT_REGEX, '').replace(new RegExp(\"\\\\b\".concat(outputName, \"\\\\b\"), 'g'), ES100_FRAGMENT_OUTPUT_NAME);\n  }\n\n  return source;\n}\n//# sourceMappingURL=transpile-shader.js.map","import { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { resolveModules } from './resolve-modules';\nimport { getPlatformShaderDefines, getVersionDefines } from './platform-defines';\nimport injectShader, { DECLARATION_INJECT_MARKER } from './inject-shader';\nimport transpileShader from './transpile-shader';\nimport { assert } from '../utils';\nconst INJECT_SHADER_DECLARATIONS = \"\\n\\n\".concat(DECLARATION_INJECT_MARKER, \"\\n\\n\");\nconst SHADER_TYPE = {\n  [VERTEX_SHADER]: 'vertex',\n  [FRAGMENT_SHADER]: 'fragment'\n};\nconst FRAGMENT_SHADER_PROLOGUE = \"precision highp float;\\n\\n\";\nexport function assembleShaders(gl, opts) {\n  const {\n    vs,\n    fs\n  } = opts;\n  const modules = resolveModules(opts.modules || []);\n  return {\n    gl,\n    vs: assembleShader(gl, Object.assign({}, opts, {\n      source: vs,\n      type: VERTEX_SHADER,\n      modules\n    })),\n    fs: assembleShader(gl, Object.assign({}, opts, {\n      source: fs,\n      type: FRAGMENT_SHADER,\n      modules\n    })),\n    getUniforms: assembleGetUniforms(modules)\n  };\n}\n\nfunction assembleShader(gl, _ref) {\n  let {\n    id,\n    source,\n    type,\n    modules,\n    defines = {},\n    hookFunctions = [],\n    inject = {},\n    transpileToGLSL100 = false,\n    prologue = true,\n    log\n  } = _ref;\n  assert(typeof source === 'string', 'shader source must be a string');\n  const isVertex = type === VERTEX_SHADER;\n  const sourceLines = source.split('\\n');\n  let glslVersion = 100;\n  let versionLine = '';\n  let coreSource = source;\n\n  if (sourceLines[0].indexOf('#version ') === 0) {\n    glslVersion = 300;\n    versionLine = sourceLines[0];\n    coreSource = sourceLines.slice(1).join('\\n');\n  } else {\n    versionLine = \"#version \".concat(glslVersion);\n  }\n\n  const allDefines = {};\n  modules.forEach(module => {\n    Object.assign(allDefines, module.getDefines());\n  });\n  Object.assign(allDefines, defines);\n  let assembledSource = prologue ? \"\".concat(versionLine, \"\\n\").concat(getShaderName({\n    id,\n    source,\n    type\n  }), \"\\n\").concat(getShaderType({\n    type\n  }), \"\\n\").concat(getPlatformShaderDefines(gl), \"\\n\").concat(getVersionDefines(gl, glslVersion, !isVertex), \"\\n\").concat(getApplicationDefines(allDefines), \"\\n\").concat(isVertex ? '' : FRAGMENT_SHADER_PROLOGUE, \"\\n\") : \"\".concat(versionLine, \"\\n\");\n  const hookFunctionMap = normalizeHookFunctions(hookFunctions);\n  const hookInjections = {};\n  const declInjections = {};\n  const mainInjections = {};\n\n  for (const key in inject) {\n    const injection = typeof inject[key] === 'string' ? {\n      injection: inject[key],\n      order: 0\n    } : inject[key];\n    const match = key.match(/^(v|f)s:(#)?([\\w-]+)$/);\n\n    if (match) {\n      const hash = match[2];\n      const name = match[3];\n\n      if (hash) {\n        if (name === 'decl') {\n          declInjections[key] = [injection];\n        } else {\n          mainInjections[key] = [injection];\n        }\n      } else {\n        hookInjections[key] = [injection];\n      }\n    } else {\n      mainInjections[key] = [injection];\n    }\n  }\n\n  for (const module of modules) {\n    if (log) {\n      module.checkDeprecations(coreSource, log);\n    }\n\n    const moduleSource = module.getModuleSource(type, glslVersion);\n    assembledSource += moduleSource;\n    const injections = module.injections[type];\n\n    for (const key in injections) {\n      const match = key.match(/^(v|f)s:#([\\w-]+)$/);\n\n      if (match) {\n        const name = match[2];\n        const injectionType = name === 'decl' ? declInjections : mainInjections;\n        injectionType[key] = injectionType[key] || [];\n        injectionType[key].push(injections[key]);\n      } else {\n        hookInjections[key] = hookInjections[key] || [];\n        hookInjections[key].push(injections[key]);\n      }\n    }\n  }\n\n  assembledSource += INJECT_SHADER_DECLARATIONS;\n  assembledSource = injectShader(assembledSource, type, declInjections);\n  assembledSource += getHookFunctions(hookFunctionMap[type], hookInjections);\n  assembledSource += coreSource;\n  assembledSource = injectShader(assembledSource, type, mainInjections);\n  assembledSource = transpileShader(assembledSource, transpileToGLSL100 ? 100 : glslVersion, isVertex);\n  return assembledSource;\n}\n\nfunction assembleGetUniforms(modules) {\n  return function getUniforms(opts) {\n    const uniforms = {};\n\n    for (const module of modules) {\n      const moduleUniforms = module.getUniforms(opts, uniforms);\n      Object.assign(uniforms, moduleUniforms);\n    }\n\n    return uniforms;\n  };\n}\n\nfunction getShaderType(_ref2) {\n  let {\n    type\n  } = _ref2;\n  return \"\\n#define SHADER_TYPE_\".concat(SHADER_TYPE[type].toUpperCase(), \"\\n\");\n}\n\nfunction getShaderName(_ref3) {\n  let {\n    id,\n    source,\n    type\n  } = _ref3;\n  const injectShaderName = id && typeof id === 'string' && source.indexOf('SHADER_NAME') === -1;\n  return injectShaderName ? \"\\n#define SHADER_NAME \".concat(id, \"_\").concat(SHADER_TYPE[type], \"\\n\\n\") : '';\n}\n\nfunction getApplicationDefines() {\n  let defines = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let count = 0;\n  let sourceText = '';\n\n  for (const define in defines) {\n    if (count === 0) {\n      sourceText += '\\n// APPLICATION DEFINES\\n';\n    }\n\n    count++;\n    const value = defines[define];\n\n    if (value || Number.isFinite(value)) {\n      sourceText += \"#define \".concat(define.toUpperCase(), \" \").concat(defines[define], \"\\n\");\n    }\n  }\n\n  if (count === 0) {\n    sourceText += '\\n';\n  }\n\n  return sourceText;\n}\n\nfunction getHookFunctions(hookFunctions, hookInjections) {\n  let result = '';\n\n  for (const hookName in hookFunctions) {\n    const hookFunction = hookFunctions[hookName];\n    result += \"void \".concat(hookFunction.signature, \" {\\n\");\n\n    if (hookFunction.header) {\n      result += \"  \".concat(hookFunction.header);\n    }\n\n    if (hookInjections[hookName]) {\n      const injections = hookInjections[hookName];\n      injections.sort((a, b) => a.order - b.order);\n\n      for (const injection of injections) {\n        result += \"  \".concat(injection.injection, \"\\n\");\n      }\n    }\n\n    if (hookFunction.footer) {\n      result += \"  \".concat(hookFunction.footer);\n    }\n\n    result += '}\\n';\n  }\n\n  return result;\n}\n\nfunction normalizeHookFunctions(hookFunctions) {\n  const result = {\n    vs: {},\n    fs: {}\n  };\n  hookFunctions.forEach(hook => {\n    let opts;\n\n    if (typeof hook !== 'string') {\n      opts = hook;\n      hook = opts.hook;\n    } else {\n      opts = {};\n    }\n\n    hook = hook.trim();\n    const [stage, signature] = hook.split(':');\n    const name = hook.replace(/\\(.+/, '');\n    result[stage][name] = Object.assign(opts, {\n      signature\n    });\n  });\n  return result;\n}\n//# sourceMappingURL=assemble-shaders.js.map","import { getContextInfo, hasFeatures, canCompileGLGSExtension, FEATURES } from '../utils/webgl-info';\nexport function getPlatformShaderDefines(gl) {\n  const debugInfo = getContextInfo(gl);\n\n  switch (debugInfo.gpuVendor.toLowerCase()) {\n    case 'nvidia':\n      return \"#define NVIDIA_GPU\\n// Nvidia optimizes away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n\";\n\n    case 'intel':\n      return \"#define INTEL_GPU\\n// Intel optimizes away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n// Intel's built-in 'tan' function doesn't have acceptable precision\\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\\n\";\n\n    case 'amd':\n      return \"#define AMD_GPU\\n\";\n\n    default:\n      return \"#define DEFAULT_GPU\\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n// Intel's built-in 'tan' function doesn't have acceptable precision\\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\\n\";\n  }\n}\nexport function getVersionDefines(gl, glslVersion, isFragment) {\n  let versionDefines = \"#if (__VERSION__ > 120)\\n\\n# define FEATURE_GLSL_DERIVATIVES\\n# define FEATURE_GLSL_DRAW_BUFFERS\\n# define FEATURE_GLSL_FRAG_DEPTH\\n# define FEATURE_GLSL_TEXTURE_LOD\\n\\n// DEPRECATED FLAGS, remove in v9\\n# define FRAG_DEPTH\\n# define DERIVATIVES\\n# define DRAW_BUFFERS\\n# define TEXTURE_LOD\\n\\n#endif // __VERSION\\n\";\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DEPTH)) {\n    versionDefines += \"\\n// FRAG_DEPTH => gl_FragDepth is available\\n#ifdef GL_EXT_frag_depth\\n#extension GL_EXT_frag_depth : enable\\n# define FEATURE_GLSL_FRAG_DEPTH\\n# define FRAG_DEPTH\\n# define gl_FragDepth gl_FragDepthEXT\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_DERIVATIVES) && canCompileGLGSExtension(gl, FEATURES.GLSL_DERIVATIVES)) {\n    versionDefines += \"\\n// DERIVATIVES => dxdF, dxdY and fwidth are available\\n#ifdef GL_OES_standard_derivatives\\n#extension GL_OES_standard_derivatives : enable\\n# define FEATURE_GLSL_DERIVATIVES\\n# define DERIVATIVES\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DATA) && canCompileGLGSExtension(gl, FEATURES.GLSL_FRAG_DATA, {\n    behavior: 'require'\n  })) {\n    versionDefines += \"\\n// DRAW_BUFFERS => gl_FragData[] is available\\n#ifdef GL_EXT_draw_buffers\\n#extension GL_EXT_draw_buffers : require\\n#define FEATURE_GLSL_DRAW_BUFFERS\\n#define DRAW_BUFFERS\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_TEXTURE_LOD)) {\n    versionDefines += \"// TEXTURE_LOD => texture2DLod etc are available\\n#ifdef GL_EXT_shader_texture_lod\\n#extension GL_EXT_shader_texture_lod : enable\\n\\n# define FEATURE_GLSL_TEXTURE_LOD\\n# define TEXTURE_LOD\\n\\n#endif\\n\";\n  }\n\n  return versionDefines;\n}\n//# sourceMappingURL=platform-defines.js.map","import { assert } from '../utils';\nconst FS100 = \"void main() {gl_FragColor = vec4(0);}\";\nconst FS_GLES = \"out vec4 transform_output;\\nvoid main() {\\n  transform_output = vec4(0);\\n}\";\nconst FS300 = \"#version 300 es\\n\".concat(FS_GLES);\nexport function getQualifierDetails(line, qualifiers) {\n  qualifiers = Array.isArray(qualifiers) ? qualifiers : [qualifiers];\n  const words = line.replace(/^\\s+/, '').split(/\\s+/);\n  const [qualifier, type, definition] = words;\n\n  if (!qualifiers.includes(qualifier) || !type || !definition) {\n    return null;\n  }\n\n  const name = definition.split(';')[0];\n  return {\n    qualifier,\n    type,\n    name\n  };\n}\nexport function getPassthroughFS() {\n  let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const {\n    version = 100,\n    input,\n    inputType,\n    output\n  } = options;\n\n  if (!input) {\n    if (version === 300) {\n      return FS300;\n    } else if (version > 300) {\n      return \"#version \".concat(version, \"\\n\").concat(FS_GLES);\n    }\n\n    return FS100;\n  }\n\n  const outputValue = convertToVec4(input, inputType);\n\n  if (version >= 300) {\n    return \"#version \".concat(version, \" \").concat(version === 300 ? 'es' : '', \"\\nin \").concat(inputType, \" \").concat(input, \";\\nout vec4 \").concat(output, \";\\nvoid main() {\\n  \").concat(output, \" = \").concat(outputValue, \";\\n}\");\n  }\n\n  return \"varying \".concat(inputType, \" \").concat(input, \";\\nvoid main() {\\n  gl_FragColor = \").concat(outputValue, \";\\n}\");\n}\nexport function typeToChannelSuffix(type) {\n  switch (type) {\n    case 'float':\n      return 'x';\n\n    case 'vec2':\n      return 'xy';\n\n    case 'vec3':\n      return 'xyz';\n\n    case 'vec4':\n      return 'xyzw';\n\n    default:\n      assert(false);\n      return null;\n  }\n}\nexport function typeToChannelCount(type) {\n  switch (type) {\n    case 'float':\n      return 1;\n\n    case 'vec2':\n      return 2;\n\n    case 'vec3':\n      return 3;\n\n    case 'vec4':\n      return 4;\n\n    default:\n      assert(false);\n      return null;\n  }\n}\nexport function convertToVec4(variable, type) {\n  switch (type) {\n    case 'float':\n      return \"vec4(\".concat(variable, \", 0.0, 0.0, 1.0)\");\n\n    case 'vec2':\n      return \"vec4(\".concat(variable, \", 0.0, 1.0)\");\n\n    case 'vec3':\n      return \"vec4(\".concat(variable, \", 1.0)\");\n\n    case 'vec4':\n      return variable;\n\n    default:\n      assert(false);\n      return null;\n  }\n}\n//# sourceMappingURL=shader-utils.js.map","const fp32shader = \"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\\nconst float TWO_PI = 6.2831854820251465;\\nconst float PI_2 = 1.5707963705062866;\\nconst float PI_16 = 0.1963495463132858;\\n\\nconst float SIN_TABLE_0 = 0.19509032368659973;\\nconst float SIN_TABLE_1 = 0.3826834261417389;\\nconst float SIN_TABLE_2 = 0.5555702447891235;\\nconst float SIN_TABLE_3 = 0.7071067690849304;\\n\\nconst float COS_TABLE_0 = 0.9807852506637573;\\nconst float COS_TABLE_1 = 0.9238795042037964;\\nconst float COS_TABLE_2 = 0.8314695954322815;\\nconst float COS_TABLE_3 = 0.7071067690849304;\\n\\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\\n\\nfloat sin_taylor_fp32(float a) {\\n  float r, s, t, x;\\n\\n  if (a == 0.0) {\\n    return 0.0;\\n  }\\n\\n  x = -a * a;\\n  s = a;\\n  r = a;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_3;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_5;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_7;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_9;\\n  s = s + t;\\n\\n  return s;\\n}\\n\\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\\n  if (a == 0.0) {\\n    sin_t = 0.0;\\n    cos_t = 1.0;\\n  }\\n  sin_t = sin_taylor_fp32(a);\\n  cos_t = sqrt(1.0 - sin_t * sin_t);\\n}\\n\\nfloat tan_taylor_fp32(float a) {\\n    float sin_a;\\n    float cos_a;\\n\\n    if (a == 0.0) {\\n        return 0.0;\\n    }\\n    float z = floor(a / TWO_PI);\\n    float r = a - TWO_PI * z;\\n\\n    float t;\\n    float q = floor(r / PI_2 + 0.5);\\n    int j = int(q);\\n\\n    if (j < -2 || j > 2) {\\n        return 1.0 / 0.0;\\n    }\\n\\n    t = r - PI_2 * q;\\n\\n    q = floor(t / PI_16 + 0.5);\\n    int k = int(q);\\n    int abs_k = int(abs(float(k)));\\n\\n    if (abs_k > 4) {\\n        return 1.0 / 0.0;\\n    } else {\\n        t = t - PI_16 * q;\\n    }\\n\\n    float u = 0.0;\\n    float v = 0.0;\\n\\n    float sin_t, cos_t;\\n    float s, c;\\n    sincos_taylor_fp32(t, sin_t, cos_t);\\n\\n    if (k == 0) {\\n        s = sin_t;\\n        c = cos_t;\\n    } else {\\n        if (abs(float(abs_k) - 1.0) < 0.5) {\\n            u = COS_TABLE_0;\\n            v = SIN_TABLE_0;\\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\\n            u = COS_TABLE_1;\\n            v = SIN_TABLE_1;\\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\\n            u = COS_TABLE_2;\\n            v = SIN_TABLE_2;\\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\\n            u = COS_TABLE_3;\\n            v = SIN_TABLE_3;\\n        }\\n        if (k > 0) {\\n            s = u * sin_t + v * cos_t;\\n            c = u * cos_t - v * sin_t;\\n        } else {\\n            s = u * sin_t - v * cos_t;\\n            c = u * cos_t + v * sin_t;\\n        }\\n    }\\n\\n    if (j == 0) {\\n        sin_a = s;\\n        cos_a = c;\\n    } else if (j == 1) {\\n        sin_a = c;\\n        cos_a = -s;\\n    } else if (j == -1) {\\n        sin_a = -c;\\n        cos_a = s;\\n    } else {\\n        sin_a = -s;\\n        cos_a = -c;\\n    }\\n    return sin_a / cos_a;\\n}\\n#endif\\n\\nfloat tan_fp32(float a) {\\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\\n  return tan_taylor_fp32(a);\\n#else\\n  return tan(a);\\n#endif\\n}\\n\";\nexport const fp32 = {\n  name: 'fp32',\n  vs: fp32shader,\n  fs: null\n};\n//# sourceMappingURL=fp32.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"math.gl assertion \".concat(message));\n  }\n}\n//# sourceMappingURL=assert.js.map","import assert from './assert';\nconst RADIANS_TO_DEGREES = 1 / Math.PI * 180;\nconst DEGREES_TO_RADIANS = 1 / 180 * Math.PI;\nexport const config = {\n  EPSILON: 1e-12,\n  debug: false,\n  precision: 4,\n  printTypes: false,\n  printDegrees: false,\n  printRowMajor: true\n};\nexport function configure(options) {\n  for (const key in options) {\n    assert(key in config);\n    config[key] = options[key];\n  }\n\n  return config;\n}\nexport function formatValue(value, {\n  precision = config.precision\n} = {}) {\n  value = round(value);\n  return \"\".concat(parseFloat(value.toPrecision(precision)));\n}\nexport function isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value) && !(value instanceof DataView);\n}\nexport function clone(array) {\n  return 'clone' in array ? array.clone() : array.slice();\n}\nexport function toRadians(degrees) {\n  return radians(degrees);\n}\nexport function toDegrees(radians) {\n  return degrees(radians);\n}\nexport function radians(degrees, result) {\n  return map(degrees, degrees => degrees * DEGREES_TO_RADIANS, result);\n}\nexport function degrees(radians, result) {\n  return map(radians, radians => radians * RADIANS_TO_DEGREES, result);\n}\nexport function sin(radians, result) {\n  return map(radians, angle => Math.sin(angle), result);\n}\nexport function cos(radians, result) {\n  return map(radians, angle => Math.cos(angle), result);\n}\nexport function tan(radians, result) {\n  return map(radians, angle => Math.tan(angle), result);\n}\nexport function asin(radians, result) {\n  return map(radians, angle => Math.asin(angle), result);\n}\nexport function acos(radians, result) {\n  return map(radians, angle => Math.acos(angle), result);\n}\nexport function atan(radians, result) {\n  return map(radians, angle => Math.atan(angle), result);\n}\nexport function clamp(value, min, max) {\n  return map(value, value => Math.max(min, Math.min(max, value)));\n}\nexport function lerp(a, b, t) {\n  if (isArray(a)) {\n    return a.map((ai, i) => lerp(ai, b[i], t));\n  }\n\n  return t * b + (1 - t) * a;\n}\nexport function equals(a, b, epsilon) {\n  const oldEpsilon = config.EPSILON;\n\n  if (epsilon) {\n    config.EPSILON = epsilon;\n  }\n\n  try {\n    if (a === b) {\n      return true;\n    }\n\n    if (isArray(a) && isArray(b)) {\n      if (a.length !== b.length) {\n        return false;\n      }\n\n      for (let i = 0; i < a.length; ++i) {\n        if (!equals(a[i], b[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    if (a && a.equals) {\n      return a.equals(b);\n    }\n\n    if (b && b.equals) {\n      return b.equals(a);\n    }\n\n    if (typeof a === 'number' && typeof b === 'number') {\n      return Math.abs(a - b) <= config.EPSILON * Math.max(1, Math.abs(a), Math.abs(b));\n    }\n\n    return false;\n  } finally {\n    config.EPSILON = oldEpsilon;\n  }\n}\nexport function exactEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a && typeof a === 'object' && b && typeof b === 'object') {\n    if (a.constructor !== b.constructor) {\n      return false;\n    }\n\n    if (a.exactEquals) {\n      return a.exactEquals(b);\n    }\n  }\n\n  if (isArray(a) && isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (let i = 0; i < a.length; ++i) {\n      if (!exactEquals(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\nexport function withEpsilon(epsilon, func) {\n  const oldPrecision = config.EPSILON;\n  config.EPSILON = epsilon;\n  let value;\n\n  try {\n    value = func();\n  } finally {\n    config.EPSILON = oldPrecision;\n  }\n\n  return value;\n}\n\nfunction round(value) {\n  return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n\nfunction duplicateArray(array) {\n  return array.clone ? array.clone() : new Array(array.length);\n}\n\nfunction map(value, func, result) {\n  if (isArray(value)) {\n    const array = value;\n    result = result || duplicateArray(array);\n\n    for (let i = 0; i < result.length && i < array.length; ++i) {\n      result[i] = func(value[i], i, result);\n    }\n\n    return result;\n  }\n\n  return func(value);\n}\n//# sourceMappingURL=common.js.map","function _extendableBuiltin(cls) {\n  function ExtendableBuiltin() {\n    var instance = Reflect.construct(cls, Array.from(arguments));\n    Object.setPrototypeOf(instance, Object.getPrototypeOf(this));\n    return instance;\n  }\n\n  ExtendableBuiltin.prototype = Object.create(cls.prototype, {\n    constructor: {\n      value: cls,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(ExtendableBuiltin, cls);\n  } else {\n    ExtendableBuiltin.__proto__ = cls;\n  }\n\n  return ExtendableBuiltin;\n}\n\nimport { config, formatValue, equals, isArray } from '../../lib/common';\nexport default class MathArray extends _extendableBuiltin(Array) {\n  clone() {\n    return new this.constructor().copy(this);\n  }\n\n  fromArray(array, offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = array[i + offset];\n    }\n\n    return this.check();\n  }\n\n  toArray(targetArray = [], offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      targetArray[offset + i] = this[i];\n    }\n\n    return targetArray;\n  }\n\n  from(arrayOrObject) {\n    return Array.isArray(arrayOrObject) ? this.copy(arrayOrObject) : this.fromObject(arrayOrObject);\n  }\n\n  to(arrayOrObject) {\n    if (arrayOrObject === this) {\n      return this;\n    }\n\n    return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n  }\n\n  toTarget(target) {\n    return target ? this.to(target) : this;\n  }\n\n  toFloat32Array() {\n    return new Float32Array(this);\n  }\n\n  toString() {\n    return this.formatString(config);\n  }\n\n  formatString(opts) {\n    let string = '';\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n    }\n\n    return \"\".concat(opts.printTypes ? this.constructor.name : '', \"[\").concat(string, \"]\");\n  }\n\n  equals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (!equals(this[i], array[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  exactEquals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (this[i] !== array[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  negate() {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = -this[i];\n    }\n\n    return this.check();\n  }\n\n  lerp(a, b, t) {\n    if (t === undefined) {\n      return this.lerp(this, a, b);\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const ai = a[i];\n      this[i] = ai + t * (b[i] - ai);\n    }\n\n    return this.check();\n  }\n\n  min(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(vector[i], this[i]);\n    }\n\n    return this.check();\n  }\n\n  max(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.max(vector[i], this[i]);\n    }\n\n    return this.check();\n  }\n\n  clamp(minVector, maxVector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n    }\n\n    return this.check();\n  }\n\n  add(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] += vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  subtract(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] -= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  scale(scale) {\n    if (typeof scale === 'number') {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= scale;\n      }\n    } else {\n      for (let i = 0; i < this.ELEMENTS && i < scale.length; ++i) {\n        this[i] *= scale[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  multiplyByScalar(scalar) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] *= scalar;\n    }\n\n    return this.check();\n  }\n\n  check() {\n    if (config.debug && !this.validate()) {\n      throw new Error(\"math.gl: \".concat(this.constructor.name, \" some fields set to invalid numbers'\"));\n    }\n\n    return this;\n  }\n\n  validate() {\n    let valid = this.length === this.ELEMENTS;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      valid = valid && Number.isFinite(this[i]);\n    }\n\n    return valid;\n  }\n\n  sub(a) {\n    return this.subtract(a);\n  }\n\n  setScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = a;\n    }\n\n    return this.check();\n  }\n\n  addScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] += a;\n    }\n\n    return this.check();\n  }\n\n  subScalar(a) {\n    return this.addScalar(-a);\n  }\n\n  multiplyScalar(scalar) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] *= scalar;\n    }\n\n    return this.check();\n  }\n\n  divideScalar(a) {\n    return this.multiplyByScalar(1 / a);\n  }\n\n  clampScalar(min, max) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], min), max);\n    }\n\n    return this.check();\n  }\n\n  get elements() {\n    return this;\n  }\n\n}\n//# sourceMappingURL=math-array.js.map","import { config } from './common';\nexport function validateVector(v, length) {\n  if (v.length !== length) {\n    return false;\n  }\n\n  for (let i = 0; i < v.length; ++i) {\n    if (!Number.isFinite(v[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function checkNumber(value) {\n  if (!Number.isFinite(value)) {\n    throw new Error(\"Invalid number \".concat(value));\n  }\n\n  return value;\n}\nexport function checkVector(v, length, callerName = '') {\n  if (config.debug && !validateVector(v, length)) {\n    throw new Error(\"math.gl: \".concat(callerName, \" some fields set to invalid numbers'\"));\n  }\n\n  return v;\n}\nconst map = {};\nexport function deprecated(method, version) {\n  if (!map[method]) {\n    map[method] = true;\n    console.warn(\"\".concat(method, \" has been removed in version \").concat(version, \", see upgrade guide for more information\"));\n  }\n}\n//# sourceMappingURL=validators.js.map","import MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\nexport default class Vector extends MathArray {\n  get x() {\n    return this[0];\n  }\n\n  set x(value) {\n    this[0] = checkNumber(value);\n  }\n\n  get y() {\n    return this[1];\n  }\n\n  set y(value) {\n    this[1] = checkNumber(value);\n  }\n\n  len() {\n    return Math.sqrt(this.lengthSquared());\n  }\n\n  magnitude() {\n    return this.len();\n  }\n\n  lengthSquared() {\n    let length = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      length += this[i] * this[i];\n    }\n\n    return length;\n  }\n\n  magnitudeSquared() {\n    return this.lengthSquared();\n  }\n\n  distance(mathArray) {\n    return Math.sqrt(this.distanceSquared(mathArray));\n  }\n\n  distanceSquared(mathArray) {\n    let length = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const dist = this[i] - mathArray[i];\n      length += dist * dist;\n    }\n\n    return checkNumber(length);\n  }\n\n  dot(mathArray) {\n    let product = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      product += this[i] * mathArray[i];\n    }\n\n    return checkNumber(product);\n  }\n\n  normalize() {\n    const length = this.magnitude();\n\n    if (length !== 0) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= length;\n      }\n    }\n\n    return this.check();\n  }\n\n  multiply(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  divide(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  lengthSq() {\n    return this.lengthSquared();\n  }\n\n  distanceTo(vector) {\n    return this.distance(vector);\n  }\n\n  distanceToSquared(vector) {\n    return this.distanceSquared(vector);\n  }\n\n  getComponent(i) {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    return checkNumber(this[i]);\n  }\n\n  setComponent(i, value) {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    this[i] = value;\n    return this.check();\n  }\n\n  addVectors(a, b) {\n    return this.copy(a).add(b);\n  }\n\n  subVectors(a, b) {\n    return this.copy(a).subtract(b);\n  }\n\n  multiplyVectors(a, b) {\n    return this.copy(a).multiply(b);\n  }\n\n  addScaledVector(a, b) {\n    return this.add(new this.constructor(a).multiplyScalar(b));\n  }\n\n}\n//# sourceMappingURL=vector.js.map","export function vec2_transformMat4AsVector(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const w = m[3] * x + m[7] * y || 1.0;\n  out[0] = (m[0] * x + m[4] * y) / w;\n  out[1] = (m[1] * x + m[5] * y) / w;\n  return out;\n}\nexport function vec3_transformMat4AsVector(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const z = a[2];\n  const w = m[3] * x + m[7] * y + m[11] * z || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n  return out;\n}\nexport function vec3_transformMat2(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  return out;\n}\nexport function vec4_transformMat2(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nexport function vec4_transformMat3(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const z = a[2];\n  out[0] = m[0] * x + m[3] * y + m[6] * z;\n  out[1] = m[1] * x + m[4] * y + m[7] * z;\n  out[2] = m[2] * x + m[5] * y + m[8] * z;\n  out[3] = a[3];\n  return out;\n}\n//# sourceMappingURL=gl-matrix-extras.js.map","import Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nconst ORIGIN = [0, 0, 0];\nlet ZERO;\nexport default class Vector3 extends Vector {\n  static get ZERO() {\n    if (!ZERO) {\n      ZERO = new Vector3(0, 0, 0);\n      Object.freeze(ZERO);\n    }\n\n    return ZERO;\n  }\n\n  constructor(x = 0, y = 0, z = 0) {\n    super(-0, -0, -0);\n\n    if (arguments.length === 1 && isArray(x)) {\n      this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n    }\n  }\n\n  set(x, y, z) {\n    this[0] = x;\n    this[1] = y;\n    this[2] = z;\n    return this.check();\n  }\n\n  copy(array) {\n    this[0] = array[0];\n    this[1] = array[1];\n    this[2] = array[2];\n    return this.check();\n  }\n\n  fromObject(object) {\n    if (config.debug) {\n      checkNumber(object.x);\n      checkNumber(object.y);\n      checkNumber(object.z);\n    }\n\n    this[0] = object.x;\n    this[1] = object.y;\n    this[2] = object.z;\n    return this.check();\n  }\n\n  toObject(object) {\n    object.x = this[0];\n    object.y = this[1];\n    object.z = this[2];\n    return object;\n  }\n\n  get ELEMENTS() {\n    return 3;\n  }\n\n  get z() {\n    return this[2];\n  }\n\n  set z(value) {\n    this[2] = checkNumber(value);\n  }\n\n  angle(vector) {\n    return vec3.angle(this, vector);\n  }\n\n  cross(vector) {\n    vec3.cross(this, this, vector);\n    return this.check();\n  }\n\n  rotateX({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateX(this, this, origin, radians);\n    return this.check();\n  }\n\n  rotateY({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateY(this, this, origin, radians);\n    return this.check();\n  }\n\n  rotateZ({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateZ(this, this, origin, radians);\n    return this.check();\n  }\n\n  transform(matrix4) {\n    return this.transformAsPoint(matrix4);\n  }\n\n  transformAsPoint(matrix4) {\n    vec3.transformMat4(this, this, matrix4);\n    return this.check();\n  }\n\n  transformAsVector(matrix4) {\n    vec3_transformMat4AsVector(this, this, matrix4);\n    return this.check();\n  }\n\n  transformByMatrix3(matrix3) {\n    vec3.transformMat3(this, this, matrix3);\n    return this.check();\n  }\n\n  transformByMatrix2(matrix2) {\n    vec3_transformMat2(this, this, matrix2);\n    return this.check();\n  }\n\n  transformByQuaternion(quaternion) {\n    vec3.transformQuat(this, this, quaternion);\n    return this.check();\n  }\n\n}\n//# sourceMappingURL=vector3.js.map","import MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport { config } from '../../lib/common';\nexport default class Matrix extends MathArray {\n  toString() {\n    let string = '[';\n\n    if (config.printRowMajor) {\n      string += 'row-major:';\n\n      for (let row = 0; row < this.RANK; ++row) {\n        for (let col = 0; col < this.RANK; ++col) {\n          string += \" \".concat(this[col * this.RANK + row]);\n        }\n      }\n    } else {\n      string += 'column-major:';\n\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        string += \" \".concat(this[i]);\n      }\n    }\n\n    string += ']';\n    return string;\n  }\n\n  getElementIndex(row, col) {\n    return col * this.RANK + row;\n  }\n\n  getElement(row, col) {\n    return this[col * this.RANK + row];\n  }\n\n  setElement(row, col, value) {\n    this[col * this.RANK + row] = checkNumber(value);\n    return this;\n  }\n\n  getColumn(columnIndex, result = new Array(this.RANK).fill(-0)) {\n    const firstIndex = columnIndex * this.RANK;\n\n    for (let i = 0; i < this.RANK; ++i) {\n      result[i] = this[firstIndex + i];\n    }\n\n    return result;\n  }\n\n  setColumn(columnIndex, columnVector) {\n    const firstIndex = columnIndex * this.RANK;\n\n    for (let i = 0; i < this.RANK; ++i) {\n      this[firstIndex + i] = columnVector[i];\n    }\n\n    return this;\n  }\n\n}\n//# sourceMappingURL=matrix.js.map","import Matrix from './base/matrix';\nimport { checkVector } from '../lib/validators';\nimport { vec2_transformMat4AsVector, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport * as vec4 from 'gl-matrix/vec4';\nvar INDICES;\n\n(function (INDICES) {\n  INDICES[INDICES[\"COL0ROW0\"] = 0] = \"COL0ROW0\";\n  INDICES[INDICES[\"COL0ROW1\"] = 1] = \"COL0ROW1\";\n  INDICES[INDICES[\"COL0ROW2\"] = 2] = \"COL0ROW2\";\n  INDICES[INDICES[\"COL0ROW3\"] = 3] = \"COL0ROW3\";\n  INDICES[INDICES[\"COL1ROW0\"] = 4] = \"COL1ROW0\";\n  INDICES[INDICES[\"COL1ROW1\"] = 5] = \"COL1ROW1\";\n  INDICES[INDICES[\"COL1ROW2\"] = 6] = \"COL1ROW2\";\n  INDICES[INDICES[\"COL1ROW3\"] = 7] = \"COL1ROW3\";\n  INDICES[INDICES[\"COL2ROW0\"] = 8] = \"COL2ROW0\";\n  INDICES[INDICES[\"COL2ROW1\"] = 9] = \"COL2ROW1\";\n  INDICES[INDICES[\"COL2ROW2\"] = 10] = \"COL2ROW2\";\n  INDICES[INDICES[\"COL2ROW3\"] = 11] = \"COL2ROW3\";\n  INDICES[INDICES[\"COL3ROW0\"] = 12] = \"COL3ROW0\";\n  INDICES[INDICES[\"COL3ROW1\"] = 13] = \"COL3ROW1\";\n  INDICES[INDICES[\"COL3ROW2\"] = 14] = \"COL3ROW2\";\n  INDICES[INDICES[\"COL3ROW3\"] = 15] = \"COL3ROW3\";\n})(INDICES || (INDICES = {}));\n\nconst DEFAULT_FOVY = 45 * Math.PI / 180;\nconst DEFAULT_ASPECT = 1;\nconst DEFAULT_NEAR = 0.1;\nconst DEFAULT_FAR = 500;\nconst IDENTITY_MATRIX = Object.freeze([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\nexport default class Matrix4 extends Matrix {\n  static get IDENTITY() {\n    return getIdentityMatrix();\n  }\n\n  static get ZERO() {\n    return getZeroMatrix();\n  }\n\n  get ELEMENTS() {\n    return 16;\n  }\n\n  get RANK() {\n    return 4;\n  }\n\n  get INDICES() {\n    return INDICES;\n  }\n\n  constructor(array) {\n    super(-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0);\n\n    if (arguments.length === 1 && Array.isArray(array)) {\n      this.copy(array);\n    } else {\n      this.identity();\n    }\n  }\n\n  copy(array) {\n    this[0] = array[0];\n    this[1] = array[1];\n    this[2] = array[2];\n    this[3] = array[3];\n    this[4] = array[4];\n    this[5] = array[5];\n    this[6] = array[6];\n    this[7] = array[7];\n    this[8] = array[8];\n    this[9] = array[9];\n    this[10] = array[10];\n    this[11] = array[11];\n    this[12] = array[12];\n    this[13] = array[13];\n    this[14] = array[14];\n    this[15] = array[15];\n    return this.check();\n  }\n\n  set(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {\n    this[0] = m00;\n    this[1] = m10;\n    this[2] = m20;\n    this[3] = m30;\n    this[4] = m01;\n    this[5] = m11;\n    this[6] = m21;\n    this[7] = m31;\n    this[8] = m02;\n    this[9] = m12;\n    this[10] = m22;\n    this[11] = m32;\n    this[12] = m03;\n    this[13] = m13;\n    this[14] = m23;\n    this[15] = m33;\n    return this.check();\n  }\n\n  setRowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    this[0] = m00;\n    this[1] = m10;\n    this[2] = m20;\n    this[3] = m30;\n    this[4] = m01;\n    this[5] = m11;\n    this[6] = m21;\n    this[7] = m31;\n    this[8] = m02;\n    this[9] = m12;\n    this[10] = m22;\n    this[11] = m32;\n    this[12] = m03;\n    this[13] = m13;\n    this[14] = m23;\n    this[15] = m33;\n    return this.check();\n  }\n\n  toRowMajor(result) {\n    result[0] = this[0];\n    result[1] = this[4];\n    result[2] = this[8];\n    result[3] = this[12];\n    result[4] = this[1];\n    result[5] = this[5];\n    result[6] = this[9];\n    result[7] = this[13];\n    result[8] = this[2];\n    result[9] = this[6];\n    result[10] = this[10];\n    result[11] = this[14];\n    result[12] = this[3];\n    result[13] = this[7];\n    result[14] = this[11];\n    result[15] = this[15];\n    return result;\n  }\n\n  identity() {\n    return this.copy(IDENTITY_MATRIX);\n  }\n\n  fromObject(object) {\n    return this.check();\n  }\n\n  fromQuaternion(quaternion) {\n    mat4.fromQuat(this, quaternion);\n    return this.check();\n  }\n\n  frustum(view) {\n    const {\n      left,\n      right,\n      bottom,\n      top,\n      near = DEFAULT_NEAR,\n      far = DEFAULT_FAR\n    } = view;\n\n    if (far === Infinity) {\n      computeInfinitePerspectiveOffCenter(this, left, right, bottom, top, near);\n    } else {\n      mat4.frustum(this, left, right, bottom, top, near, far);\n    }\n\n    return this.check();\n  }\n\n  lookAt(view) {\n    const {\n      eye,\n      center = [0, 0, 0],\n      up = [0, 1, 0]\n    } = view;\n    mat4.lookAt(this, eye, center, up);\n    return this.check();\n  }\n\n  ortho(view) {\n    const {\n      left,\n      right,\n      bottom,\n      top,\n      near = DEFAULT_NEAR,\n      far = DEFAULT_FAR\n    } = view;\n    mat4.ortho(this, left, right, bottom, top, near, far);\n    return this.check();\n  }\n\n  orthographic(view) {\n    const {\n      fovy = DEFAULT_FOVY,\n      aspect = DEFAULT_ASPECT,\n      focalDistance = 1,\n      near = DEFAULT_NEAR,\n      far = DEFAULT_FAR\n    } = view;\n    checkRadians(fovy);\n    const halfY = fovy / 2;\n    const top = focalDistance * Math.tan(halfY);\n    const right = top * aspect;\n    return this.ortho({\n      left: -right,\n      right,\n      bottom: -top,\n      top,\n      near,\n      far\n    });\n  }\n\n  perspective(view) {\n    const {\n      fovy = 45 * Math.PI / 180,\n      aspect = 1,\n      near = 0.1,\n      far = 500\n    } = view;\n    checkRadians(fovy);\n    mat4.perspective(this, fovy, aspect, near, far);\n    return this.check();\n  }\n\n  determinant() {\n    return mat4.determinant(this);\n  }\n\n  getScale(result = [-0, -0, -0]) {\n    result[0] = Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n    result[1] = Math.sqrt(this[4] * this[4] + this[5] * this[5] + this[6] * this[6]);\n    result[2] = Math.sqrt(this[8] * this[8] + this[9] * this[9] + this[10] * this[10]);\n    return result;\n  }\n\n  getTranslation(result = [-0, -0, -0]) {\n    result[0] = this[12];\n    result[1] = this[13];\n    result[2] = this[14];\n    return result;\n  }\n\n  getRotation(result, scaleResult) {\n    result = result || [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0];\n    scaleResult = scaleResult || [-0, -0, -0];\n    const scale = this.getScale(scaleResult);\n    const inverseScale0 = 1 / scale[0];\n    const inverseScale1 = 1 / scale[1];\n    const inverseScale2 = 1 / scale[2];\n    result[0] = this[0] * inverseScale0;\n    result[1] = this[1] * inverseScale1;\n    result[2] = this[2] * inverseScale2;\n    result[3] = 0;\n    result[4] = this[4] * inverseScale0;\n    result[5] = this[5] * inverseScale1;\n    result[6] = this[6] * inverseScale2;\n    result[7] = 0;\n    result[8] = this[8] * inverseScale0;\n    result[9] = this[9] * inverseScale1;\n    result[10] = this[10] * inverseScale2;\n    result[11] = 0;\n    result[12] = 0;\n    result[13] = 0;\n    result[14] = 0;\n    result[15] = 1;\n    return result;\n  }\n\n  getRotationMatrix3(result, scaleResult) {\n    result = result || [-0, -0, -0, -0, -0, -0, -0, -0, -0];\n    scaleResult = scaleResult || [-0, -0, -0];\n    const scale = this.getScale(scaleResult);\n    const inverseScale0 = 1 / scale[0];\n    const inverseScale1 = 1 / scale[1];\n    const inverseScale2 = 1 / scale[2];\n    result[0] = this[0] * inverseScale0;\n    result[1] = this[1] * inverseScale1;\n    result[2] = this[2] * inverseScale2;\n    result[3] = this[4] * inverseScale0;\n    result[4] = this[5] * inverseScale1;\n    result[5] = this[6] * inverseScale2;\n    result[6] = this[8] * inverseScale0;\n    result[7] = this[9] * inverseScale1;\n    result[8] = this[10] * inverseScale2;\n    return result;\n  }\n\n  transpose() {\n    mat4.transpose(this, this);\n    return this.check();\n  }\n\n  invert() {\n    mat4.invert(this, this);\n    return this.check();\n  }\n\n  multiplyLeft(a) {\n    mat4.multiply(this, a, this);\n    return this.check();\n  }\n\n  multiplyRight(a) {\n    mat4.multiply(this, this, a);\n    return this.check();\n  }\n\n  rotateX(radians) {\n    mat4.rotateX(this, this, radians);\n    return this.check();\n  }\n\n  rotateY(radians) {\n    mat4.rotateY(this, this, radians);\n    return this.check();\n  }\n\n  rotateZ(radians) {\n    mat4.rotateZ(this, this, radians);\n    return this.check();\n  }\n\n  rotateXYZ(angleXYZ) {\n    return this.rotateX(angleXYZ[0]).rotateY(angleXYZ[1]).rotateZ(angleXYZ[2]);\n  }\n\n  rotateAxis(radians, axis) {\n    mat4.rotate(this, this, radians, axis);\n    return this.check();\n  }\n\n  scale(factor) {\n    mat4.scale(this, this, Array.isArray(factor) ? factor : [factor, factor, factor]);\n    return this.check();\n  }\n\n  translate(vector) {\n    mat4.translate(this, this, vector);\n    return this.check();\n  }\n\n  transform(vector, result) {\n    if (vector.length === 4) {\n      result = vec4.transformMat4(result || [-0, -0, -0, -0], vector, this);\n      checkVector(result, 4);\n      return result;\n    }\n\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformAsPoint(vector, result) {\n    const {\n      length\n    } = vector;\n    let out;\n\n    switch (length) {\n      case 2:\n        out = vec2.transformMat4(result || [-0, -0], vector, this);\n        break;\n\n      case 3:\n        out = vec3.transformMat4(result || [-0, -0, -0], vector, this);\n        break;\n\n      default:\n        throw new Error('Illegal vector');\n    }\n\n    checkVector(out, vector.length);\n    return out;\n  }\n\n  transformAsVector(vector, result) {\n    let out;\n\n    switch (vector.length) {\n      case 2:\n        out = vec2_transformMat4AsVector(result || [-0, -0], vector, this);\n        break;\n\n      case 3:\n        out = vec3_transformMat4AsVector(result || [-0, -0, -0], vector, this);\n        break;\n\n      default:\n        throw new Error('Illegal vector');\n    }\n\n    checkVector(out, vector.length);\n    return out;\n  }\n\n  transformPoint(vector, result) {\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformVector(vector, result) {\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformDirection(vector, result) {\n    return this.transformAsVector(vector, result);\n  }\n\n  makeRotationX(radians) {\n    return this.identity().rotateX(radians);\n  }\n\n  makeTranslation(x, y, z) {\n    return this.identity().translate([x, y, z]);\n  }\n\n}\nlet ZERO;\nlet IDENTITY;\n\nfunction getZeroMatrix() {\n  if (!ZERO) {\n    ZERO = new Matrix4([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\n    Object.freeze(ZERO);\n  }\n\n  return ZERO;\n}\n\nfunction getIdentityMatrix() {\n  if (!IDENTITY) {\n    IDENTITY = new Matrix4();\n    Object.freeze(IDENTITY);\n  }\n\n  return IDENTITY;\n}\n\nfunction checkRadians(possiblyDegrees) {\n  if (possiblyDegrees > Math.PI * 2) {\n    throw Error('expected radians');\n  }\n}\n\nfunction computeInfinitePerspectiveOffCenter(result, left, right, bottom, top, near) {\n  const column0Row0 = 2 * near / (right - left);\n  const column1Row1 = 2 * near / (top - bottom);\n  const column2Row0 = (right + left) / (right - left);\n  const column2Row1 = (top + bottom) / (top - bottom);\n  const column2Row2 = -1;\n  const column2Row3 = -1;\n  const column3Row2 = -2 * near;\n  result[0] = column0Row0;\n  result[1] = 0;\n  result[2] = 0;\n  result[3] = 0;\n  result[4] = 0;\n  result[5] = column1Row1;\n  result[6] = 0;\n  result[7] = 0;\n  result[8] = column2Row0;\n  result[9] = column2Row1;\n  result[10] = column2Row2;\n  result[11] = column2Row3;\n  result[12] = 0;\n  result[13] = 0;\n  result[14] = column3Row2;\n  result[15] = 0;\n  return result;\n}\n//# sourceMappingURL=matrix4.js.map","const DEFAULT_HIGHLIGHT_COLOR = new Uint8Array([0, 255, 255, 255]);\nconst DEFAULT_MODULE_OPTIONS = {\n  pickingSelectedColor: null,\n  pickingHighlightColor: DEFAULT_HIGHLIGHT_COLOR,\n  pickingActive: false,\n  pickingAttribute: false\n};\n\nfunction getUniforms() {\n  let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_MODULE_OPTIONS;\n  const uniforms = {};\n\n  if (opts.pickingSelectedColor !== undefined) {\n    if (!opts.pickingSelectedColor) {\n      uniforms.picking_uSelectedColorValid = 0;\n    } else {\n      const selectedColor = opts.pickingSelectedColor.slice(0, 3);\n      uniforms.picking_uSelectedColorValid = 1;\n      uniforms.picking_uSelectedColor = selectedColor;\n    }\n  }\n\n  if (opts.pickingHighlightColor) {\n    const color = Array.from(opts.pickingHighlightColor, x => x / 255);\n\n    if (!Number.isFinite(color[3])) {\n      color[3] = 1;\n    }\n\n    uniforms.picking_uHighlightColor = color;\n  }\n\n  if (opts.pickingActive !== undefined) {\n    uniforms.picking_uActive = Boolean(opts.pickingActive);\n    uniforms.picking_uAttribute = Boolean(opts.pickingAttribute);\n  }\n\n  return uniforms;\n}\n\nconst vs = \"uniform bool picking_uActive;\\nuniform bool picking_uAttribute;\\nuniform vec3 picking_uSelectedColor;\\nuniform bool picking_uSelectedColorValid;\\n\\nout vec4 picking_vRGBcolor_Avalid;\\n\\nconst float COLOR_SCALE = 1. / 255.;\\n\\nbool picking_isColorValid(vec3 color) {\\n  return dot(color, vec3(1.0)) > 0.001;\\n}\\n\\nbool isVertexPicked(vec3 vertexColor) {\\n  return\\n    picking_uSelectedColorValid &&\\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\\n}\\n\\nvoid picking_setPickingColor(vec3 pickingColor) {\\n  if (picking_uActive) {\\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\\n\\n    if (!picking_uAttribute) {\\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\\n    }\\n  } else {\\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\\n  }\\n}\\n\\nvoid picking_setPickingAttribute(float value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.r = value;\\n  }\\n}\\nvoid picking_setPickingAttribute(vec2 value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.rg = value;\\n  }\\n}\\nvoid picking_setPickingAttribute(vec3 value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.rgb = value;\\n  }\\n}\\n\";\nconst fs = \"uniform bool picking_uActive;\\nuniform vec3 picking_uSelectedColor;\\nuniform vec4 picking_uHighlightColor;\\n\\nin vec4 picking_vRGBcolor_Avalid;\\nvec4 picking_filterHighlightColor(vec4 color) {\\n  if (picking_uActive) {\\n    return color;\\n  }\\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\\n\\n  if (selected) {\\n    float highLightAlpha = picking_uHighlightColor.a;\\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\\n    float highLightRatio = highLightAlpha / blendedAlpha;\\n\\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\\n    return vec4(blendedRGB, blendedAlpha);\\n  } else {\\n    return color;\\n  }\\n}\\nvec4 picking_filterPickingColor(vec4 color) {\\n  if (picking_uActive) {\\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\\n      discard;\\n    }\\n    return picking_vRGBcolor_Avalid;\\n  }\\n  return color;\\n}\\nvec4 picking_filterColor(vec4 color) {\\n  vec4 highightColor = picking_filterHighlightColor(color);\\n  return picking_filterPickingColor(highightColor);\\n}\\n\\n\";\nexport const picking = {\n  name: 'picking',\n  vs,\n  fs,\n  getUniforms\n};\n//# sourceMappingURL=picking.js.map","const vs = \"attribute float transform_elementID;\\nvec2 transform_getPixelSizeHalf(vec2 size) {\\n  return vec2(1.) / (2. * size);\\n}\\n\\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\\n  return vec2(xIndex, yIndex);\\n}\\nvec2 transform_getTexCoord(vec2 size) {\\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\\n  vec2 coord = indices / size + pixelSizeHalf;\\n  return coord;\\n}\\nvec2 transform_getPos(vec2 size) {\\n  vec2 texCoord = transform_getTexCoord(size);\\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\\n  return pos;\\n}\\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\\n  vec2 texCoord = transform_getTexCoord(size);\\n  vec4 textureColor = texture2D(texSampler, texCoord);\\n  return textureColor;\\n}\\n\";\nexport const transform = {\n  name: 'transform',\n  vs,\n  fs: null\n};\n//# sourceMappingURL=transform.js.map","import { assembleShaders } from '@luma.gl/shadertools';\nimport { Program } from '@luma.gl/webgl';\nexport default class ProgramManager {\n  static getDefaultProgramManager(gl) {\n    gl.luma = gl.luma || {};\n    gl.luma.defaultProgramManager = gl.luma.defaultProgramManager || new ProgramManager(gl);\n    return gl.luma.defaultProgramManager;\n  }\n\n  constructor(gl) {\n    this.gl = gl;\n    this._programCache = {};\n    this._getUniforms = {};\n    this._registeredModules = {};\n    this._hookFunctions = [];\n    this._defaultModules = [];\n    this._hashes = {};\n    this._hashCounter = 0;\n    this.stateHash = 0;\n    this._useCounts = {};\n  }\n\n  addDefaultModule(module) {\n    if (!this._defaultModules.find(m => m.name === module.name)) {\n      this._defaultModules.push(module);\n    }\n\n    this.stateHash++;\n  }\n\n  removeDefaultModule(module) {\n    const moduleName = typeof module === 'string' ? module : module.name;\n    this._defaultModules = this._defaultModules.filter(m => m.name !== moduleName);\n    this.stateHash++;\n  }\n\n  addShaderHook(hook, opts) {\n    if (opts) {\n      hook = Object.assign(opts, {\n        hook\n      });\n    }\n\n    this._hookFunctions.push(hook);\n\n    this.stateHash++;\n  }\n\n  get() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      vs = '',\n      fs = '',\n      defines = {},\n      inject = {},\n      varyings = [],\n      bufferMode = 0x8c8d,\n      transpileToGLSL100 = false\n    } = props;\n\n    const modules = this._getModuleList(props.modules);\n\n    const vsHash = this._getHash(vs);\n\n    const fsHash = this._getHash(fs);\n\n    const moduleHashes = modules.map(m => this._getHash(m.name)).sort();\n    const varyingHashes = varyings.map(v => this._getHash(v));\n    const defineKeys = Object.keys(defines).sort();\n    const injectKeys = Object.keys(inject).sort();\n    const defineHashes = [];\n    const injectHashes = [];\n\n    for (const key of defineKeys) {\n      defineHashes.push(this._getHash(key));\n      defineHashes.push(this._getHash(defines[key]));\n    }\n\n    for (const key of injectKeys) {\n      injectHashes.push(this._getHash(key));\n      injectHashes.push(this._getHash(inject[key]));\n    }\n\n    const hash = \"\".concat(vsHash, \"/\").concat(fsHash, \"D\").concat(defineHashes.join('/'), \"M\").concat(moduleHashes.join('/'), \"I\").concat(injectHashes.join('/'), \"V\").concat(varyingHashes.join('/'), \"H\").concat(this.stateHash, \"B\").concat(bufferMode).concat(transpileToGLSL100 ? 'T' : '');\n\n    if (!this._programCache[hash]) {\n      const assembled = assembleShaders(this.gl, {\n        vs,\n        fs,\n        modules,\n        inject,\n        defines,\n        hookFunctions: this._hookFunctions,\n        transpileToGLSL100\n      });\n      this._programCache[hash] = new Program(this.gl, {\n        hash,\n        vs: assembled.vs,\n        fs: assembled.fs,\n        varyings,\n        bufferMode\n      });\n\n      this._getUniforms[hash] = assembled.getUniforms || (x => {});\n\n      this._useCounts[hash] = 0;\n    }\n\n    this._useCounts[hash]++;\n    return this._programCache[hash];\n  }\n\n  getUniforms(program) {\n    return this._getUniforms[program.hash] || null;\n  }\n\n  release(program) {\n    const hash = program.hash;\n    this._useCounts[hash]--;\n\n    if (this._useCounts[hash] === 0) {\n      this._programCache[hash].delete();\n\n      delete this._programCache[hash];\n      delete this._getUniforms[hash];\n      delete this._useCounts[hash];\n    }\n  }\n\n  _getHash(key) {\n    if (this._hashes[key] === undefined) {\n      this._hashes[key] = this._hashCounter++;\n    }\n\n    return this._hashes[key];\n  }\n\n  _getModuleList() {\n    let appModules = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    const modules = new Array(this._defaultModules.length + appModules.length);\n    const seen = {};\n    let count = 0;\n\n    for (let i = 0, len = this._defaultModules.length; i < len; ++i) {\n      const module = this._defaultModules[i];\n      const name = module.name;\n      modules[count++] = module;\n      seen[name] = true;\n    }\n\n    for (let i = 0, len = appModules.length; i < len; ++i) {\n      const module = appModules[i];\n      const name = module.name;\n\n      if (!seen[name]) {\n        modules[count++] = module;\n        seen[name] = true;\n      }\n    }\n\n    modules.length = count;\n    return modules;\n  }\n\n}\n//# sourceMappingURL=program-manager.js.map","import { Buffer, assert } from '@luma.gl/webgl';\nconst GLTF_TO_LUMA_ATTRIBUTE_MAP = {\n  POSITION: 'positions',\n  NORMAL: 'normals',\n  COLOR_0: 'colors',\n  TEXCOORD_0: 'texCoords',\n  TEXCOORD_1: 'texCoords1',\n  TEXCOORD_2: 'texCoords2'\n};\nexport function getBuffersFromGeometry(gl, geometry, options) {\n  const buffers = {};\n  let indices = geometry.indices;\n\n  for (const name in geometry.attributes) {\n    const attribute = geometry.attributes[name];\n    const remappedName = mapAttributeName(name, options);\n\n    if (name === 'indices') {\n      indices = attribute;\n    } else if (attribute.constant) {\n      buffers[remappedName] = attribute.value;\n    } else {\n      const typedArray = attribute.value;\n      const accessor = { ...attribute\n      };\n      delete accessor.value;\n      buffers[remappedName] = [new Buffer(gl, typedArray), accessor];\n      inferAttributeAccessor(name, accessor);\n    }\n  }\n\n  if (indices) {\n    const data = indices.value || indices;\n    assert(data instanceof Uint16Array || data instanceof Uint32Array, 'attribute array for \"indices\" must be of integer type');\n    const accessor = {\n      size: 1,\n      isIndexed: indices.isIndexed === undefined ? true : indices.isIndexed\n    };\n    buffers.indices = [new Buffer(gl, {\n      data,\n      target: 34963\n    }), accessor];\n  }\n\n  return buffers;\n}\n\nfunction mapAttributeName(name, options) {\n  const {\n    attributeMap = GLTF_TO_LUMA_ATTRIBUTE_MAP\n  } = options || {};\n  return attributeMap && attributeMap[name] || name;\n}\n\nexport function inferAttributeAccessor(attributeName, attribute) {\n  let category;\n\n  switch (attributeName) {\n    case 'texCoords':\n    case 'texCoord1':\n    case 'texCoord2':\n    case 'texCoord3':\n      category = 'uvs';\n      break;\n\n    case 'vertices':\n    case 'positions':\n    case 'normals':\n    case 'pickingColors':\n      category = 'vectors';\n      break;\n\n    default:\n  }\n\n  switch (category) {\n    case 'vectors':\n      attribute.size = attribute.size || 3;\n      break;\n\n    case 'uvs':\n      attribute.size = attribute.size || 2;\n      break;\n\n    default:\n  }\n\n  assert(Number.isFinite(attribute.size), \"attribute \".concat(attributeName, \" needs size\"));\n}\n//# sourceMappingURL=model-utils.js.map","import { isWebGL } from '@luma.gl/gltools';\nimport ProgramManager from './program-manager';\nimport { Program, VertexArray, clear, TransformFeedback, Buffer, log, isObjectEmpty, uid, assert } from '@luma.gl/webgl';\nimport { getDebugTableForUniforms, getDebugTableForVertexArray, getDebugTableForProgramConfiguration } from '@luma.gl/webgl';\nimport { getBuffersFromGeometry } from './model-utils';\nconst LOG_DRAW_PRIORITY = 2;\nconst LOG_DRAW_TIMEOUT = 10000;\nconst ERR_MODEL_PARAMS = 'Model needs drawMode and vertexCount';\n\nconst NOOP = () => {};\n\nconst DRAW_PARAMS = {};\nexport default class Model {\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const {\n      id = uid('model')\n    } = props;\n    assert(isWebGL(gl));\n    this.id = id;\n    this.gl = gl;\n    this.id = props.id || uid('Model');\n    this.lastLogTime = 0;\n    this.animated = false;\n    this.initialize(props);\n  }\n\n  initialize(props) {\n    this.props = {};\n    this.programManager = props.programManager || ProgramManager.getDefaultProgramManager(this.gl);\n    this._programManagerState = -1;\n    this._managedProgram = false;\n    const {\n      program = null,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    } = props;\n    this.programProps = {\n      program,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    };\n    this.program = null;\n    this.vertexArray = null;\n    this._programDirty = true;\n    this.userData = {};\n    this.needsRedraw = true;\n    this._attributes = {};\n    this.attributes = {};\n    this.uniforms = {};\n    this.pickable = true;\n\n    this._checkProgram();\n\n    this.setUniforms(Object.assign({}, this.getModuleUniforms(props.moduleSettings)));\n    this.drawMode = props.drawMode !== undefined ? props.drawMode : 4;\n    this.vertexCount = props.vertexCount || 0;\n    this.geometryBuffers = {};\n    this.isInstanced = props.isInstanced || props.instanced || props.instanceCount > 0;\n\n    this._setModelProps(props);\n\n    this.geometry = {};\n    assert(this.drawMode !== undefined && Number.isFinite(this.vertexCount), ERR_MODEL_PARAMS);\n  }\n\n  setProps(props) {\n    this._setModelProps(props);\n  }\n\n  delete() {\n    for (const key in this._attributes) {\n      if (this._attributes[key] !== this.attributes[key]) {\n        this._attributes[key].delete();\n      }\n    }\n\n    if (this._managedProgram) {\n      this.programManager.release(this.program);\n      this._managedProgram = false;\n    }\n\n    this.vertexArray.delete();\n\n    this._deleteGeometryBuffers();\n  }\n\n  getDrawMode() {\n    return this.drawMode;\n  }\n\n  getVertexCount() {\n    return this.vertexCount;\n  }\n\n  getInstanceCount() {\n    return this.instanceCount;\n  }\n\n  getAttributes() {\n    return this.attributes;\n  }\n\n  getProgram() {\n    return this.program;\n  }\n\n  setProgram(props) {\n    const {\n      program,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    } = props;\n    this.programProps = {\n      program,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    };\n    this._programDirty = true;\n  }\n\n  getUniforms() {\n    return this.uniforms;\n  }\n\n  setDrawMode(drawMode) {\n    this.drawMode = drawMode;\n    return this;\n  }\n\n  setVertexCount(vertexCount) {\n    assert(Number.isFinite(vertexCount));\n    this.vertexCount = vertexCount;\n    return this;\n  }\n\n  setInstanceCount(instanceCount) {\n    assert(Number.isFinite(instanceCount));\n    this.instanceCount = instanceCount;\n    return this;\n  }\n\n  setGeometry(geometry) {\n    this.drawMode = geometry.drawMode;\n    this.vertexCount = geometry.getVertexCount();\n\n    this._deleteGeometryBuffers();\n\n    this.geometryBuffers = getBuffersFromGeometry(this.gl, geometry);\n    this.vertexArray.setAttributes(this.geometryBuffers);\n    return this;\n  }\n\n  setAttributes() {\n    let attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (isObjectEmpty(attributes)) {\n      return this;\n    }\n\n    const normalizedAttributes = {};\n\n    for (const name in attributes) {\n      const attribute = attributes[name];\n      normalizedAttributes[name] = attribute.getValue ? attribute.getValue() : attribute;\n    }\n\n    this.vertexArray.setAttributes(normalizedAttributes);\n    return this;\n  }\n\n  setUniforms() {\n    let uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    Object.assign(this.uniforms, uniforms);\n    return this;\n  }\n\n  getModuleUniforms(opts) {\n    this._checkProgram();\n\n    const getUniforms = this.programManager.getUniforms(this.program);\n\n    if (getUniforms) {\n      return getUniforms(opts);\n    }\n\n    return {};\n  }\n\n  updateModuleSettings(opts) {\n    const uniforms = this.getModuleUniforms(opts || {});\n    return this.setUniforms(uniforms);\n  }\n\n  clear(opts) {\n    clear(this.program.gl, opts);\n    return this;\n  }\n\n  draw() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    this._checkProgram();\n\n    const {\n      moduleSettings = null,\n      framebuffer,\n      uniforms = {},\n      attributes = {},\n      transformFeedback = this.transformFeedback,\n      parameters = {},\n      vertexArray = this.vertexArray\n    } = opts;\n    this.setAttributes(attributes);\n    this.updateModuleSettings(moduleSettings);\n    this.setUniforms(uniforms);\n    let logPriority;\n\n    if (log.priority >= LOG_DRAW_PRIORITY) {\n      logPriority = this._logDrawCallStart(LOG_DRAW_PRIORITY);\n    }\n\n    const drawParams = this.vertexArray.getDrawParams();\n    const {\n      isIndexed = drawParams.isIndexed,\n      indexType = drawParams.indexType,\n      indexOffset = drawParams.indexOffset,\n      vertexArrayInstanced = drawParams.isInstanced\n    } = this.props;\n\n    if (vertexArrayInstanced && !this.isInstanced) {\n      log.warn('Found instanced attributes on non-instanced model', this.id)();\n    }\n\n    const {\n      isInstanced,\n      instanceCount\n    } = this;\n    const {\n      onBeforeRender = NOOP,\n      onAfterRender = NOOP\n    } = this.props;\n    onBeforeRender();\n    this.program.setUniforms(this.uniforms);\n    const didDraw = this.program.draw(Object.assign(DRAW_PARAMS, opts, {\n      logPriority,\n      uniforms: null,\n      framebuffer,\n      parameters,\n      drawMode: this.getDrawMode(),\n      vertexCount: this.getVertexCount(),\n      vertexArray,\n      transformFeedback,\n      isIndexed,\n      indexType,\n      isInstanced,\n      instanceCount,\n      offset: isIndexed ? indexOffset : 0\n    }));\n    onAfterRender();\n\n    if (log.priority >= LOG_DRAW_PRIORITY) {\n      this._logDrawCallEnd(logPriority, vertexArray, framebuffer);\n    }\n\n    return didDraw;\n  }\n\n  transform() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      discard = true,\n      feedbackBuffers,\n      unbindModels = []\n    } = opts;\n    let {\n      parameters\n    } = opts;\n\n    if (feedbackBuffers) {\n      this._setFeedbackBuffers(feedbackBuffers);\n    }\n\n    if (discard) {\n      parameters = Object.assign({}, parameters, {\n        [35977]: discard\n      });\n    }\n\n    unbindModels.forEach(model => model.vertexArray.unbindBuffers());\n\n    try {\n      this.draw(Object.assign({}, opts, {\n        parameters\n      }));\n    } finally {\n      unbindModels.forEach(model => model.vertexArray.bindBuffers());\n    }\n\n    return this;\n  }\n\n  render() {\n    let uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    log.warn('Model.render() is deprecated. Use Model.setUniforms() and Model.draw()')();\n    return this.setUniforms(uniforms).draw();\n  }\n\n  _setModelProps(props) {\n    Object.assign(this.props, props);\n\n    if ('uniforms' in props) {\n      this.setUniforms(props.uniforms);\n    }\n\n    if ('pickable' in props) {\n      this.pickable = props.pickable;\n    }\n\n    if ('instanceCount' in props) {\n      this.instanceCount = props.instanceCount;\n    }\n\n    if ('geometry' in props) {\n      this.setGeometry(props.geometry);\n    }\n\n    if ('attributes' in props) {\n      this.setAttributes(props.attributes);\n    }\n\n    if ('_feedbackBuffers' in props) {\n      this._setFeedbackBuffers(props._feedbackBuffers);\n    }\n  }\n\n  _checkProgram() {\n    const needsUpdate = this._programDirty || this.programManager.stateHash !== this._programManagerState;\n\n    if (!needsUpdate) {\n      return;\n    }\n\n    let {\n      program\n    } = this.programProps;\n\n    if (program) {\n      this._managedProgram = false;\n    } else {\n      const {\n        vs,\n        fs,\n        modules,\n        inject,\n        defines,\n        varyings,\n        bufferMode,\n        transpileToGLSL100\n      } = this.programProps;\n      program = this.programManager.get({\n        vs,\n        fs,\n        modules,\n        inject,\n        defines,\n        varyings,\n        bufferMode,\n        transpileToGLSL100\n      });\n\n      if (this.program && this._managedProgram) {\n        this.programManager.release(this.program);\n      }\n\n      this._programManagerState = this.programManager.stateHash;\n      this._managedProgram = true;\n    }\n\n    assert(program instanceof Program, 'Model needs a program');\n    this._programDirty = false;\n\n    if (program === this.program) {\n      return;\n    }\n\n    this.program = program;\n\n    if (this.vertexArray) {\n      this.vertexArray.setProps({\n        program: this.program,\n        attributes: this.vertexArray.attributes\n      });\n    } else {\n      this.vertexArray = new VertexArray(this.gl, {\n        program: this.program\n      });\n    }\n\n    this.setUniforms(Object.assign({}, this.getModuleUniforms()));\n  }\n\n  _deleteGeometryBuffers() {\n    for (const name in this.geometryBuffers) {\n      const buffer = this.geometryBuffers[name][0] || this.geometryBuffers[name];\n\n      if (buffer instanceof Buffer) {\n        buffer.delete();\n      }\n    }\n  }\n\n  _setAnimationProps(animationProps) {\n    if (this.animated) {\n      assert(animationProps, 'Model.draw(): animated uniforms but no animationProps');\n    }\n  }\n\n  _setFeedbackBuffers() {\n    let feedbackBuffers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (isObjectEmpty(feedbackBuffers)) {\n      return this;\n    }\n\n    const {\n      gl\n    } = this.program;\n    this.transformFeedback = this.transformFeedback || new TransformFeedback(gl, {\n      program: this.program\n    });\n    this.transformFeedback.setBuffers(feedbackBuffers);\n    return this;\n  }\n\n  _logDrawCallStart(logLevel) {\n    const logDrawTimeout = logLevel > 3 ? 0 : LOG_DRAW_TIMEOUT;\n\n    if (Date.now() - this.lastLogTime < logDrawTimeout) {\n      return undefined;\n    }\n\n    this.lastLogTime = Date.now();\n    log.group(LOG_DRAW_PRIORITY, \">>> DRAWING MODEL \".concat(this.id), {\n      collapsed: log.level <= 2\n    })();\n    return logLevel;\n  }\n\n  _logDrawCallEnd(logLevel, vertexArray, uniforms, framebuffer) {\n    if (logLevel === undefined) {\n      return;\n    }\n\n    const attributeTable = getDebugTableForVertexArray({\n      vertexArray,\n      header: \"\".concat(this.id, \" attributes\"),\n      attributes: this._attributes\n    });\n    const {\n      table: uniformTable,\n      unusedTable,\n      unusedCount\n    } = getDebugTableForUniforms({\n      header: \"\".concat(this.id, \" uniforms\"),\n      program: this.program,\n      uniforms: Object.assign({}, this.program.uniforms, uniforms)\n    });\n    const {\n      table: missingTable,\n      count: missingCount\n    } = getDebugTableForUniforms({\n      header: \"\".concat(this.id, \" uniforms\"),\n      program: this.program,\n      uniforms: Object.assign({}, this.program.uniforms, uniforms),\n      undefinedOnly: true\n    });\n\n    if (missingCount > 0) {\n      log.log('MISSING UNIFORMS', Object.keys(missingTable))();\n    }\n\n    if (unusedCount > 0) {\n      log.log('UNUSED UNIFORMS', Object.keys(unusedTable))();\n    }\n\n    const configTable = getDebugTableForProgramConfiguration(this.vertexArray.configuration);\n    log.table(logLevel, attributeTable)();\n    log.table(logLevel, uniformTable)();\n    log.table(logLevel + 1, configTable)();\n\n    if (framebuffer) {\n      framebuffer.log({\n        logLevel: LOG_DRAW_PRIORITY,\n        message: \"Rendered to \".concat(framebuffer.id)\n      });\n    }\n\n    log.groupEnd(LOG_DRAW_PRIORITY)();\n  }\n\n}\n//# sourceMappingURL=model.js.map","import { isWebGL2 } from '@luma.gl/gltools';\nimport { Buffer, TransformFeedback } from '@luma.gl/webgl';\nimport { assert } from '@luma.gl/webgl';\nexport default class BufferTransform {\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.gl = gl;\n    this.currentIndex = 0;\n    this.feedbackMap = {};\n    this.varyings = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  setupResources(opts) {\n    for (const binding of this.bindings) {\n      this._setupTransformFeedback(binding, opts);\n    }\n  }\n\n  updateModelProps() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      varyings\n    } = this;\n\n    if (varyings.length > 0) {\n      props = Object.assign({}, props, {\n        varyings\n      });\n    }\n\n    return props;\n  }\n\n  getDrawOptions() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const binding = this.bindings[this.currentIndex];\n    const {\n      sourceBuffers,\n      transformFeedback\n    } = binding;\n    const attributes = Object.assign({}, sourceBuffers, opts.attributes);\n    return {\n      attributes,\n      transformFeedback\n    };\n  }\n\n  swap() {\n    if (this.feedbackMap) {\n      this.currentIndex = this._getNextIndex();\n      return true;\n    }\n\n    return false;\n  }\n\n  update() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    this._setupBuffers(opts);\n  }\n\n  getBuffer(varyingName) {\n    const {\n      feedbackBuffers\n    } = this.bindings[this.currentIndex];\n    const bufferOrParams = varyingName ? feedbackBuffers[varyingName] : null;\n\n    if (!bufferOrParams) {\n      return null;\n    }\n\n    return bufferOrParams instanceof Buffer ? bufferOrParams : bufferOrParams.buffer;\n  }\n\n  getData() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      varyingName\n    } = options;\n    const buffer = this.getBuffer(varyingName);\n\n    if (buffer) {\n      return buffer.getData();\n    }\n\n    return null;\n  }\n\n  delete() {\n    for (const name in this.resources) {\n      this.resources[name].delete();\n    }\n  }\n\n  _initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    this._setupBuffers(props);\n\n    this.varyings = props.varyings || Object.keys(this.bindings[this.currentIndex].feedbackBuffers);\n\n    if (this.varyings.length > 0) {\n      assert(isWebGL2(this.gl));\n    }\n  }\n\n  _getFeedbackBuffers(props) {\n    const {\n      sourceBuffers = {}\n    } = props;\n    const feedbackBuffers = {};\n\n    if (this.bindings[this.currentIndex]) {\n      Object.assign(feedbackBuffers, this.bindings[this.currentIndex].feedbackBuffers);\n    }\n\n    if (this.feedbackMap) {\n      for (const sourceName in this.feedbackMap) {\n        const feedbackName = this.feedbackMap[sourceName];\n\n        if (sourceName in sourceBuffers) {\n          feedbackBuffers[feedbackName] = sourceName;\n        }\n      }\n    }\n\n    Object.assign(feedbackBuffers, props.feedbackBuffers);\n\n    for (const bufferName in feedbackBuffers) {\n      const bufferOrRef = feedbackBuffers[bufferName];\n\n      if (typeof bufferOrRef === 'string') {\n        const sourceBuffer = sourceBuffers[bufferOrRef];\n        const {\n          byteLength,\n          usage,\n          accessor\n        } = sourceBuffer;\n        feedbackBuffers[bufferName] = this._createNewBuffer(bufferName, {\n          byteLength,\n          usage,\n          accessor\n        });\n      }\n    }\n\n    return feedbackBuffers;\n  }\n\n  _setupBuffers() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      sourceBuffers = null\n    } = props;\n    Object.assign(this.feedbackMap, props.feedbackMap);\n\n    const feedbackBuffers = this._getFeedbackBuffers(props);\n\n    this._updateBindings({\n      sourceBuffers,\n      feedbackBuffers\n    });\n  }\n\n  _setupTransformFeedback(binding, _ref) {\n    let {\n      model\n    } = _ref;\n    const {\n      program\n    } = model;\n    binding.transformFeedback = new TransformFeedback(this.gl, {\n      program,\n      buffers: binding.feedbackBuffers\n    });\n  }\n\n  _updateBindings(opts) {\n    this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n    if (this.feedbackMap) {\n      const {\n        sourceBuffers,\n        feedbackBuffers\n      } = this._swapBuffers(this.bindings[this.currentIndex]);\n\n      const nextIndex = this._getNextIndex();\n\n      this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n        sourceBuffers,\n        feedbackBuffers\n      });\n    }\n  }\n\n  _updateBinding(binding, opts) {\n    if (!binding) {\n      return {\n        sourceBuffers: Object.assign({}, opts.sourceBuffers),\n        feedbackBuffers: Object.assign({}, opts.feedbackBuffers)\n      };\n    }\n\n    Object.assign(binding.sourceBuffers, opts.sourceBuffers);\n    Object.assign(binding.feedbackBuffers, opts.feedbackBuffers);\n\n    if (binding.transformFeedback) {\n      binding.transformFeedback.setBuffers(binding.feedbackBuffers);\n    }\n\n    return binding;\n  }\n\n  _swapBuffers(opts) {\n    if (!this.feedbackMap) {\n      return null;\n    }\n\n    const sourceBuffers = Object.assign({}, opts.sourceBuffers);\n    const feedbackBuffers = Object.assign({}, opts.feedbackBuffers);\n\n    for (const srcName in this.feedbackMap) {\n      const dstName = this.feedbackMap[srcName];\n      sourceBuffers[srcName] = opts.feedbackBuffers[dstName];\n      feedbackBuffers[dstName] = opts.sourceBuffers[srcName];\n      assert(feedbackBuffers[dstName] instanceof Buffer);\n    }\n\n    return {\n      sourceBuffers,\n      feedbackBuffers\n    };\n  }\n\n  _createNewBuffer(name, opts) {\n    const buffer = new Buffer(this.gl, opts);\n\n    if (this.resources[name]) {\n      this.resources[name].delete();\n    }\n\n    this.resources[name] = buffer;\n    return buffer;\n  }\n\n  _getNextIndex() {\n    return (this.currentIndex + 1) % 2;\n  }\n\n}\n//# sourceMappingURL=buffer-transform.js.map","import { assert } from '@luma.gl/webgl';\nimport { combineInjects, getQualifierDetails, typeToChannelSuffix } from '@luma.gl/shadertools';\nconst SAMPLER_UNIFORM_PREFIX = 'transform_uSampler_';\nconst SIZE_UNIFORM_PREFIX = 'transform_uSize_';\nconst VS_POS_VARIABLE = 'transform_position';\nexport function updateForTextures(_ref) {\n  let {\n    vs,\n    sourceTextureMap,\n    targetTextureVarying,\n    targetTexture\n  } = _ref;\n  const texAttributeNames = Object.keys(sourceTextureMap);\n  let sourceCount = texAttributeNames.length;\n  let targetTextureType = null;\n  const samplerTextureMap = {};\n  let updatedVs = vs;\n  let finalInject = {};\n\n  if (sourceCount > 0 || targetTextureVarying) {\n    const vsLines = updatedVs.split('\\n');\n    const updateVsLines = vsLines.slice();\n    vsLines.forEach((line, index, lines) => {\n      if (sourceCount > 0) {\n        const updated = processAttributeDefinition(line, sourceTextureMap);\n\n        if (updated) {\n          const {\n            updatedLine,\n            inject\n          } = updated;\n          updateVsLines[index] = updatedLine;\n          finalInject = combineInjects([finalInject, inject]);\n          Object.assign(samplerTextureMap, updated.samplerTextureMap);\n          sourceCount--;\n        }\n      }\n\n      if (targetTextureVarying && !targetTextureType) {\n        targetTextureType = getVaryingType(line, targetTextureVarying);\n      }\n    });\n\n    if (targetTextureVarying) {\n      assert(targetTexture);\n      const sizeName = \"\".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying);\n      const uniformDeclaration = \"uniform vec2 \".concat(sizeName, \";\\n\");\n      const posInstructions = \"     vec2 \".concat(VS_POS_VARIABLE, \" = transform_getPos(\").concat(sizeName, \");\\n     gl_Position = vec4(\").concat(VS_POS_VARIABLE, \", 0, 1.);\\n\");\n      const inject = {\n        'vs:#decl': uniformDeclaration,\n        'vs:#main-start': posInstructions\n      };\n      finalInject = combineInjects([finalInject, inject]);\n    }\n\n    updatedVs = updateVsLines.join('\\n');\n  }\n\n  return {\n    vs: updatedVs,\n    targetTextureType,\n    inject: finalInject,\n    samplerTextureMap\n  };\n}\nexport function getSizeUniforms(_ref2) {\n  let {\n    sourceTextureMap,\n    targetTextureVarying,\n    targetTexture\n  } = _ref2;\n  const uniforms = {};\n  let width;\n  let height;\n\n  if (targetTextureVarying) {\n    ({\n      width,\n      height\n    } = targetTexture);\n    uniforms[\"\".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying)] = [width, height];\n  }\n\n  for (const textureName in sourceTextureMap) {\n    ({\n      width,\n      height\n    } = sourceTextureMap[textureName]);\n    uniforms[\"\".concat(SIZE_UNIFORM_PREFIX).concat(textureName)] = [width, height];\n  }\n\n  return uniforms;\n}\n\nfunction getAttributeDefinition(line) {\n  return getQualifierDetails(line, ['attribute', 'in']);\n}\n\nfunction getSamplerDeclerations(textureName) {\n  const samplerName = \"\".concat(SAMPLER_UNIFORM_PREFIX).concat(textureName);\n  const sizeName = \"\".concat(SIZE_UNIFORM_PREFIX).concat(textureName);\n  const uniformDeclerations = \"  uniform sampler2D \".concat(samplerName, \";\\n  uniform vec2 \").concat(sizeName, \";\");\n  return {\n    samplerName,\n    sizeName,\n    uniformDeclerations\n  };\n}\n\nexport function getVaryingType(line, varying) {\n  const qualaiferDetails = getQualifierDetails(line, ['varying', 'out']);\n\n  if (!qualaiferDetails) {\n    return null;\n  }\n\n  return qualaiferDetails.name === varying ? qualaiferDetails.type : null;\n}\nexport function processAttributeDefinition(line, textureMap) {\n  const samplerTextureMap = {};\n  const attributeData = getAttributeDefinition(line);\n\n  if (!attributeData) {\n    return null;\n  }\n\n  const {\n    type,\n    name\n  } = attributeData;\n\n  if (name && textureMap[name]) {\n    const updatedLine = \"// \".concat(line, \" => Replaced by Transform with a sampler\");\n    const {\n      samplerName,\n      sizeName,\n      uniformDeclerations\n    } = getSamplerDeclerations(name);\n    const channels = typeToChannelSuffix(type);\n    const sampleInstruction = \"  \".concat(type, \" \").concat(name, \" = transform_getInput(\").concat(samplerName, \", \").concat(sizeName, \").\").concat(channels, \";\\n\");\n    samplerTextureMap[samplerName] = name;\n    const inject = {\n      'vs:#decl': uniformDeclerations,\n      'vs:#main-start': sampleInstruction\n    };\n    return {\n      updatedLine,\n      inject,\n      samplerTextureMap\n    };\n  }\n\n  return null;\n}\n//# sourceMappingURL=transform-shader-utils.js.map","import { cloneTextureFrom, readPixelsToArray, getShaderVersion, Buffer, Texture2D, Framebuffer } from '@luma.gl/webgl';\nimport { _transform as transformModule, getPassthroughFS, typeToChannelCount, combineInjects } from '@luma.gl/shadertools';\nimport { updateForTextures, getSizeUniforms } from './transform-shader-utils';\nconst SRC_TEX_PARAMETER_OVERRIDES = {\n  [10241]: 9728,\n  [10240]: 9728,\n  [10242]: 33071,\n  [10243]: 33071\n};\nconst FS_OUTPUT_VARIABLE = 'transform_output';\nexport default class TextureTransform {\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.gl = gl;\n    this.id = this.currentIndex = 0;\n    this._swapTexture = null;\n    this.targetTextureVarying = null;\n    this.targetTextureType = null;\n    this.samplerTextureMap = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  updateModelProps() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    const updatedModelProps = this._processVertexShader(props);\n\n    return Object.assign({}, props, updatedModelProps);\n  }\n\n  getDrawOptions() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      sourceBuffers,\n      sourceTextures,\n      framebuffer,\n      targetTexture\n    } = this.bindings[this.currentIndex];\n    const attributes = Object.assign({}, sourceBuffers, opts.attributes);\n    const uniforms = Object.assign({}, opts.uniforms);\n    const parameters = Object.assign({}, opts.parameters);\n    let discard = opts.discard;\n\n    if (this.hasSourceTextures || this.hasTargetTexture) {\n      attributes.transform_elementID = this.elementIDBuffer;\n\n      for (const sampler in this.samplerTextureMap) {\n        const textureName = this.samplerTextureMap[sampler];\n        uniforms[sampler] = sourceTextures[textureName];\n      }\n\n      this._setSourceTextureParameters();\n\n      const sizeUniforms = getSizeUniforms({\n        sourceTextureMap: sourceTextures,\n        targetTextureVarying: this.targetTextureVarying,\n        targetTexture\n      });\n      Object.assign(uniforms, sizeUniforms);\n    }\n\n    if (this.hasTargetTexture) {\n      discard = false;\n      parameters.viewport = [0, 0, framebuffer.width, framebuffer.height];\n    }\n\n    return {\n      attributes,\n      framebuffer,\n      uniforms,\n      discard,\n      parameters\n    };\n  }\n\n  swap() {\n    if (this._swapTexture) {\n      this.currentIndex = this._getNextIndex();\n      return true;\n    }\n\n    return false;\n  }\n\n  update() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    this._setupTextures(opts);\n  }\n\n  getTargetTexture() {\n    const {\n      targetTexture\n    } = this.bindings[this.currentIndex];\n    return targetTexture;\n  }\n\n  getData() {\n    let {\n      packed = false\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      framebuffer\n    } = this.bindings[this.currentIndex];\n    const pixels = readPixelsToArray(framebuffer);\n\n    if (!packed) {\n      return pixels;\n    }\n\n    const ArrayType = pixels.constructor;\n    const channelCount = typeToChannelCount(this.targetTextureType);\n    const packedPixels = new ArrayType(pixels.length * channelCount / 4);\n    let packCount = 0;\n\n    for (let i = 0; i < pixels.length; i += 4) {\n      for (let j = 0; j < channelCount; j++) {\n        packedPixels[packCount++] = pixels[i + j];\n      }\n    }\n\n    return packedPixels;\n  }\n\n  getFramebuffer() {\n    const currentResources = this.bindings[this.currentIndex];\n    return currentResources.framebuffer;\n  }\n\n  delete() {\n    if (this.ownTexture) {\n      this.ownTexture.delete();\n    }\n\n    if (this.elementIDBuffer) {\n      this.elementIDBuffer.delete();\n    }\n  }\n\n  _initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      _targetTextureVarying,\n      _swapTexture\n    } = props;\n    this._swapTexture = _swapTexture;\n    this.targetTextureVarying = _targetTextureVarying;\n    this.hasTargetTexture = _targetTextureVarying;\n\n    this._setupTextures(props);\n  }\n\n  _createTargetTexture(props) {\n    const {\n      sourceTextures,\n      textureOrReference\n    } = props;\n\n    if (textureOrReference instanceof Texture2D) {\n      return textureOrReference;\n    }\n\n    const refTexture = sourceTextures[textureOrReference];\n\n    if (!refTexture) {\n      return null;\n    }\n\n    this._targetRefTexName = textureOrReference;\n    return this._createNewTexture(refTexture);\n  }\n\n  _setupTextures() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      sourceBuffers,\n      _sourceTextures = {},\n      _targetTexture\n    } = props;\n\n    const targetTexture = this._createTargetTexture({\n      sourceTextures: _sourceTextures,\n      textureOrReference: _targetTexture\n    });\n\n    this.hasSourceTextures = this.hasSourceTextures || _sourceTextures && Object.keys(_sourceTextures).length > 0;\n\n    this._updateBindings({\n      sourceBuffers,\n      sourceTextures: _sourceTextures,\n      targetTexture\n    });\n\n    if ('elementCount' in props) {\n      this._updateElementIDBuffer(props.elementCount);\n    }\n  }\n\n  _updateElementIDBuffer(elementCount) {\n    if (typeof elementCount !== 'number' || this.elementCount >= elementCount) {\n      return;\n    }\n\n    const elementIds = new Float32Array(elementCount);\n    elementIds.forEach((_, index, array) => {\n      array[index] = index;\n    });\n\n    if (!this.elementIDBuffer) {\n      this.elementIDBuffer = new Buffer(this.gl, {\n        data: elementIds,\n        accessor: {\n          size: 1\n        }\n      });\n    } else {\n      this.elementIDBuffer.setData({\n        data: elementIds\n      });\n    }\n\n    this.elementCount = elementCount;\n  }\n\n  _updateBindings(opts) {\n    this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n    if (this._swapTexture) {\n      const {\n        sourceTextures,\n        targetTexture\n      } = this._swapTextures(this.bindings[this.currentIndex]);\n\n      const nextIndex = this._getNextIndex();\n\n      this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n        sourceTextures,\n        targetTexture\n      });\n    }\n  }\n\n  _updateBinding(binding, opts) {\n    const {\n      sourceBuffers,\n      sourceTextures,\n      targetTexture\n    } = opts;\n\n    if (!binding) {\n      binding = {\n        sourceBuffers: {},\n        sourceTextures: {},\n        targetTexture: null\n      };\n    }\n\n    Object.assign(binding.sourceTextures, sourceTextures);\n    Object.assign(binding.sourceBuffers, sourceBuffers);\n\n    if (targetTexture) {\n      binding.targetTexture = targetTexture;\n      const {\n        width,\n        height\n      } = targetTexture;\n      const {\n        framebuffer\n      } = binding;\n\n      if (framebuffer) {\n        framebuffer.update({\n          attachments: {\n            [36064]: targetTexture\n          },\n          resizeAttachments: false\n        });\n        framebuffer.resize({\n          width,\n          height\n        });\n      } else {\n        binding.framebuffer = new Framebuffer(this.gl, {\n          id: \"transform-framebuffer\",\n          width,\n          height,\n          attachments: {\n            [36064]: targetTexture\n          }\n        });\n      }\n    }\n\n    return binding;\n  }\n\n  _setSourceTextureParameters() {\n    const index = this.currentIndex;\n    const {\n      sourceTextures\n    } = this.bindings[index];\n\n    for (const name in sourceTextures) {\n      sourceTextures[name].setParameters(SRC_TEX_PARAMETER_OVERRIDES);\n    }\n  }\n\n  _swapTextures(opts) {\n    if (!this._swapTexture) {\n      return null;\n    }\n\n    const sourceTextures = Object.assign({}, opts.sourceTextures);\n    sourceTextures[this._swapTexture] = opts.targetTexture;\n    const targetTexture = opts.sourceTextures[this._swapTexture];\n    return {\n      sourceTextures,\n      targetTexture\n    };\n  }\n\n  _createNewTexture(refTexture) {\n    const texture = cloneTextureFrom(refTexture, {\n      parameters: {\n        [10241]: 9728,\n        [10240]: 9728,\n        [10242]: 33071,\n        [10243]: 33071\n      },\n      pixelStore: {\n        [37440]: false\n      }\n    });\n\n    if (this.ownTexture) {\n      this.ownTexture.delete();\n    }\n\n    this.ownTexture = texture;\n    return texture;\n  }\n\n  _getNextIndex() {\n    return (this.currentIndex + 1) % 2;\n  }\n\n  _processVertexShader() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      sourceTextures,\n      targetTexture\n    } = this.bindings[this.currentIndex];\n    const {\n      vs,\n      uniforms,\n      targetTextureType,\n      inject,\n      samplerTextureMap\n    } = updateForTextures({\n      vs: props.vs,\n      sourceTextureMap: sourceTextures,\n      targetTextureVarying: this.targetTextureVarying,\n      targetTexture\n    });\n    const combinedInject = combineInjects([props.inject || {}, inject]);\n    this.targetTextureType = targetTextureType;\n    this.samplerTextureMap = samplerTextureMap;\n    const fs = props._fs || getPassthroughFS({\n      version: getShaderVersion(vs),\n      input: this.targetTextureVarying,\n      inputType: targetTextureType,\n      output: FS_OUTPUT_VARIABLE\n    });\n    const modules = this.hasSourceTextures || this.targetTextureVarying ? [transformModule].concat(props.modules || []) : props.modules;\n    return {\n      vs,\n      fs,\n      modules,\n      uniforms,\n      inject: combinedInject\n    };\n  }\n\n}\n//# sourceMappingURL=texture-transform.js.map","import { getPassthroughFS } from '@luma.gl/shadertools';\nimport BufferTransform from './buffer-transform';\nimport TextureTransform from './texture-transform';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert, isObjectEmpty, getShaderVersion } from '@luma.gl/webgl';\nimport Model from '../lib/model';\nexport default class Transform {\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.gl = gl;\n    this.model = null;\n    this.elementCount = 0;\n    this.bufferTransform = null;\n    this.textureTransform = null;\n    this.elementIDBuffer = null;\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  delete() {\n    const {\n      model,\n      bufferTransform,\n      textureTransform\n    } = this;\n\n    if (model) {\n      model.delete();\n    }\n\n    if (bufferTransform) {\n      bufferTransform.delete();\n    }\n\n    if (textureTransform) {\n      textureTransform.delete();\n    }\n  }\n\n  run() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      clearRenderTarget = true\n    } = opts;\n\n    const updatedOpts = this._updateDrawOptions(opts);\n\n    if (clearRenderTarget && updatedOpts.framebuffer) {\n      updatedOpts.framebuffer.clear({\n        color: true\n      });\n    }\n\n    this.model.transform(updatedOpts);\n  }\n\n  swap() {\n    let swapped = false;\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      swapped = swapped || resourceTransform.swap();\n    }\n\n    assert(swapped, 'Nothing to swap');\n  }\n\n  getBuffer() {\n    let varyingName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    return this.bufferTransform && this.bufferTransform.getBuffer(varyingName);\n  }\n\n  getData() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      const data = resourceTransform.getData(opts);\n\n      if (data) {\n        return data;\n      }\n    }\n\n    return null;\n  }\n\n  getFramebuffer() {\n    return this.textureTransform && this.textureTransform.getFramebuffer();\n  }\n\n  update() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if ('elementCount' in opts) {\n      this.model.setVertexCount(opts.elementCount);\n    }\n\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      resourceTransform.update(opts);\n    }\n  }\n\n  _initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      gl\n    } = this;\n\n    this._buildResourceTransforms(gl, props);\n\n    props = this._updateModelProps(props);\n    this.model = new Model(gl, Object.assign({}, props, {\n      fs: props.fs || getPassthroughFS({\n        version: getShaderVersion(props.vs)\n      }),\n      id: props.id || 'transform-model',\n      drawMode: props.drawMode || 0,\n      vertexCount: props.elementCount\n    }));\n    this.bufferTransform && this.bufferTransform.setupResources({\n      model: this.model\n    });\n  }\n\n  _updateModelProps(props) {\n    let updatedProps = Object.assign({}, props);\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      updatedProps = resourceTransform.updateModelProps(updatedProps);\n    }\n\n    return updatedProps;\n  }\n\n  _buildResourceTransforms(gl, props) {\n    if (canCreateBufferTransform(props)) {\n      this.bufferTransform = new BufferTransform(gl, props);\n    }\n\n    if (canCreateTextureTransform(props)) {\n      this.textureTransform = new TextureTransform(gl, props);\n    }\n\n    assert(this.bufferTransform || this.textureTransform, 'must provide source/feedback buffers or source/target textures');\n  }\n\n  _updateDrawOptions(opts) {\n    let updatedOpts = Object.assign({}, opts);\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      updatedOpts = Object.assign(updatedOpts, resourceTransform.getDrawOptions(updatedOpts));\n    }\n\n    return updatedOpts;\n  }\n\n}\n\nfunction canCreateBufferTransform(props) {\n  if (!isObjectEmpty(props.feedbackBuffers) || !isObjectEmpty(props.feedbackMap) || props.varyings && props.varyings.length > 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction canCreateTextureTransform(props) {\n  if (!isObjectEmpty(props._sourceTextures) || props._targetTexture || props._targetTextureVarying) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=transform.js.map","import { uid, assert } from '@luma.gl/webgl';\nexport const DRAW_MODE = {\n  POINTS: 0x0000,\n  LINES: 0x0001,\n  LINE_LOOP: 0x0002,\n  LINE_STRIP: 0x0003,\n  TRIANGLES: 0x0004,\n  TRIANGLE_STRIP: 0x0005,\n  TRIANGLE_FAN: 0x0006\n};\nexport default class Geometry {\n  static get DRAW_MODE() {\n    return DRAW_MODE;\n  }\n\n  constructor() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      id = uid('geometry'),\n      drawMode = DRAW_MODE.TRIANGLES,\n      attributes = {},\n      indices = null,\n      vertexCount = null\n    } = props;\n    this.id = id;\n    this.drawMode = drawMode | 0;\n    this.attributes = {};\n    this.userData = {};\n\n    this._setAttributes(attributes, indices);\n\n    this.vertexCount = vertexCount || this._calculateVertexCount(this.attributes, this.indices);\n  }\n\n  get mode() {\n    return this.drawMode;\n  }\n\n  getVertexCount() {\n    return this.vertexCount;\n  }\n\n  getAttributes() {\n    return this.indices ? {\n      indices: this.indices,\n      ...this.attributes\n    } : this.attributes;\n  }\n\n  _print(attributeName) {\n    return \"Geometry \".concat(this.id, \" attribute \").concat(attributeName);\n  }\n\n  _setAttributes(attributes, indices) {\n    if (indices) {\n      this.indices = ArrayBuffer.isView(indices) ? {\n        value: indices,\n        size: 1\n      } : indices;\n    }\n\n    for (const attributeName in attributes) {\n      let attribute = attributes[attributeName];\n      attribute = ArrayBuffer.isView(attribute) ? {\n        value: attribute\n      } : attribute;\n      assert(ArrayBuffer.isView(attribute.value), \"\".concat(this._print(attributeName), \": must be typed array or object with value as typed array\"));\n\n      if ((attributeName === 'POSITION' || attributeName === 'positions') && !attribute.size) {\n        attribute.size = 3;\n      }\n\n      if (attributeName === 'indices') {\n        assert(!this.indices);\n        this.indices = attribute;\n      } else {\n        this.attributes[attributeName] = attribute;\n      }\n    }\n\n    if (this.indices && this.indices.isIndexed !== undefined) {\n      this.indices = Object.assign({}, this.indices);\n      delete this.indices.isIndexed;\n    }\n\n    return this;\n  }\n\n  _calculateVertexCount(attributes, indices) {\n    if (indices) {\n      return indices.value.length;\n    }\n\n    let vertexCount = Infinity;\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      const {\n        value,\n        size,\n        constant\n      } = attribute;\n\n      if (!constant && value && size >= 1) {\n        vertexCount = Math.min(vertexCount, value.length / size);\n      }\n    }\n\n    assert(Number.isFinite(vertexCount));\n    return vertexCount;\n  }\n\n}\n//# sourceMappingURL=geometry.js.map","let channelHandles = 1;\nlet animationHandles = 1;\nexport class Timeline {\n  constructor() {\n    this.time = 0;\n    this.channels = new Map();\n    this.animations = new Map();\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  addChannel(props) {\n    const {\n      delay = 0,\n      duration = Number.POSITIVE_INFINITY,\n      rate = 1,\n      repeat = 1\n    } = props;\n    const handle = channelHandles++;\n    const channel = {\n      time: 0,\n      delay,\n      duration,\n      rate,\n      repeat\n    };\n\n    this._setChannelTime(channel, this.time);\n\n    this.channels.set(handle, channel);\n    return handle;\n  }\n\n  removeChannel(handle) {\n    this.channels.delete(handle);\n\n    for (const [animationHandle, animation] of this.animations) {\n      if (animation.channel === handle) {\n        this.detachAnimation(animationHandle);\n      }\n    }\n  }\n\n  isFinished(handle) {\n    const channel = this.channels.get(handle);\n\n    if (channel === undefined) {\n      return false;\n    }\n\n    return this.time >= channel.delay + channel.duration * channel.repeat;\n  }\n\n  getTime(handle) {\n    if (handle === undefined) {\n      return this.time;\n    }\n\n    const channel = this.channels.get(handle);\n\n    if (channel === undefined) {\n      return -1;\n    }\n\n    return channel.time;\n  }\n\n  setTime(time) {\n    this.time = Math.max(0, time);\n    const channels = this.channels.values();\n\n    for (const channel of channels) {\n      this._setChannelTime(channel, this.time);\n    }\n\n    const animations = this.animations.values();\n\n    for (const animationData of animations) {\n      const {\n        animation,\n        channel\n      } = animationData;\n      animation.setTime(this.getTime(channel));\n    }\n  }\n\n  play() {\n    this.playing = true;\n  }\n\n  pause() {\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  reset() {\n    this.setTime(0);\n  }\n\n  attachAnimation(animation, channelHandle) {\n    const animationHandle = animationHandles++;\n    this.animations.set(animationHandle, {\n      animation,\n      channel: channelHandle\n    });\n    animation.setTime(this.getTime(channelHandle));\n    return animationHandle;\n  }\n\n  detachAnimation(handle) {\n    this.animations.delete(handle);\n  }\n\n  update(engineTime) {\n    if (this.playing) {\n      if (this.lastEngineTime === -1) {\n        this.lastEngineTime = engineTime;\n      }\n\n      this.setTime(this.time + (engineTime - this.lastEngineTime));\n      this.lastEngineTime = engineTime;\n    }\n  }\n\n  _setChannelTime(channel, time) {\n    const offsetTime = time - channel.delay;\n    const totalDuration = channel.duration * channel.repeat;\n\n    if (offsetTime >= totalDuration) {\n      channel.time = channel.duration * channel.rate;\n    } else {\n      channel.time = Math.max(0, offsetTime) % channel.duration;\n      channel.time *= channel.rate;\n    }\n  }\n\n}\n//# sourceMappingURL=timeline.js.map","const defines = '#define SMOOTH_EDGE_RADIUS 0.5';\nconst vs = \"\\n\".concat(defines, \"\\n\\nstruct VertexGeometry {\\n  vec4 position;\\n  vec3 worldPosition;\\n  vec3 worldPositionAlt;\\n  vec3 normal;\\n  vec2 uv;\\n  vec3 pickingColor;\\n} geometry = VertexGeometry(\\n  vec4(0.0, 0.0, 1.0, 0.0),\\n  vec3(0.0),\\n  vec3(0.0),\\n  vec3(0.0),\\n  vec2(0.0),\\n  vec3(0.0)\\n);\\n\");\nconst fs = \"\\n\".concat(defines, \"\\n\\nstruct FragmentGeometry {\\n  vec2 uv;\\n} geometry;\\n\\nfloat smoothedge(float edge, float x) {\\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\\n}\\n\");\nexport default {\n  name: 'geometry',\n  vs,\n  fs\n};\n//# sourceMappingURL=geometry.js.map","import log from '../utils/log';\nexport const COORDINATE_SYSTEM = {\n  DEFAULT: -1,\n  LNGLAT: 1,\n  METER_OFFSETS: 2,\n  LNGLAT_OFFSETS: 3,\n  CARTESIAN: 0\n};\nObject.defineProperty(COORDINATE_SYSTEM, 'IDENTITY', {\n  get: () => {\n    log.deprecated('COORDINATE_SYSTEM.IDENTITY', 'COORDINATE_SYSTEM.CARTESIAN')();\n    return 0;\n  }\n});\nexport const PROJECTION_MODE = {\n  WEB_MERCATOR: 1,\n  GLOBE: 2,\n  WEB_MERCATOR_AUTO_OFFSET: 4,\n  IDENTITY: 0\n};\nexport const UNIT = {\n  common: 0,\n  meters: 1,\n  pixels: 2\n};\nexport const EVENTS = {\n  click: {\n    handler: 'onClick'\n  },\n  panstart: {\n    handler: 'onDragStart'\n  },\n  panmove: {\n    handler: 'onDrag'\n  },\n  panend: {\n    handler: 'onDragEnd'\n  }\n};\nexport const OPERATION = {\n  DRAW: 'draw',\n  MASK: 'mask'\n};\n//# sourceMappingURL=constants.js.map","import { COORDINATE_SYSTEM, PROJECTION_MODE, UNIT } from '../../lib/constants';\nconst COORDINATE_SYSTEM_GLSL_CONSTANTS = Object.keys(COORDINATE_SYSTEM).map(key => \"const int COORDINATE_SYSTEM_\".concat(key, \" = \").concat(COORDINATE_SYSTEM[key], \";\")).join('');\nconst PROJECTION_MODE_GLSL_CONSTANTS = Object.keys(PROJECTION_MODE).map(key => \"const int PROJECTION_MODE_\".concat(key, \" = \").concat(PROJECTION_MODE[key], \";\")).join('');\nconst UNIT_GLSL_CONSTANTS = Object.keys(UNIT).map(key => \"const int UNIT_\".concat(key.toUpperCase(), \" = \").concat(UNIT[key], \";\")).join('');\nexport default \"\".concat(COORDINATE_SYSTEM_GLSL_CONSTANTS, \"\\n\").concat(PROJECTION_MODE_GLSL_CONSTANTS, \"\\n\").concat(UNIT_GLSL_CONSTANTS, \"\\n\\nuniform int project_uCoordinateSystem;\\nuniform int project_uProjectionMode;\\nuniform float project_uScale;\\nuniform bool project_uWrapLongitude;\\nuniform vec3 project_uCommonUnitsPerMeter;\\nuniform vec3 project_uCommonUnitsPerWorldUnit;\\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\\nuniform vec4 project_uCenter;\\nuniform mat4 project_uModelMatrix;\\nuniform mat4 project_uViewProjectionMatrix;\\nuniform vec2 project_uViewportSize;\\nuniform float project_uDevicePixelRatio;\\nuniform float project_uFocalDistance;\\nuniform vec3 project_uCameraPosition;\\nuniform vec3 project_uCoordinateOrigin;\\nuniform vec3 project_uCommonOrigin;\\nuniform bool project_uPseudoMeters;\\n\\nconst float TILE_SIZE = 512.0;\\nconst float PI = 3.1415926536;\\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\\nconst vec3 ZERO_64_LOW = vec3(0.0);\\nconst float EARTH_RADIUS = 6370972.0; // meters\\nconst float GLOBE_RADIUS = 256.0;\\n\\n// returns an adjustment factor for uCommonUnitsPerMeter\\nfloat project_size_at_latitude(float lat) {\\n  float y = clamp(lat, -89.9, 89.9);\\n  return 1.0 / cos(radians(y));\\n}\\n\\nfloat project_size() {\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\\n    project_uPseudoMeters == false) {\\n\\n    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear\\n    // Adjust by 1 / cos(latitude)\\n    // If geometry.position (vertex in common space) is populated, use it\\n    // Otherwise use geometry.worldPosition (anchor in world space)\\n    \\n    if (geometry.position.w == 0.0) {\\n      return project_size_at_latitude(geometry.worldPosition.y);\\n    }\\n\\n    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)\\n    // Taylor series of 1 / cos(latitude)\\n    // Max error < 0.003\\n  \\n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\\n    float y2 = y * y;\\n    float y4 = y2 * y2;\\n    float y6 = y4 * y2;\\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\\n  }\\n  return 1.0;\\n}\\n\\nfloat project_size_at_latitude(float meters, float lat) {\\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\\n}\\n\\n//\\n// Scaling offsets - scales meters to \\\"world distance\\\"\\n// Note the scalar version of project_size is for scaling the z component only\\n//\\nfloat project_size(float meters) {\\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\\n}\\n\\nvec2 project_size(vec2 meters) {\\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\\n}\\n\\nvec3 project_size(vec3 meters) {\\n  return meters * project_uCommonUnitsPerMeter * project_size();\\n}\\n\\nvec4 project_size(vec4 meters) {\\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\\n}\\n\\n// Get rotation matrix that aligns the z axis with the given up vector\\n// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up\\nmat3 project_get_orientation_matrix(vec3 up) {\\n  vec3 uz = normalize(up);\\n  // Tangent on XY plane\\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\\n  vec3 uy = cross(uz, ux);\\n  return mat3(ux, uy, uz);\\n}\\n\\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    transform = project_get_orientation_matrix(commonPosition);\\n    return true;\\n  }\\n  return false;\\n}\\n\\n//\\n// Projecting normal - transform deltas from current coordinate system to\\n// normals in the worldspace\\n//\\nvec3 project_normal(vec3 vector) {\\n  // Apply model matrix\\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\\n  mat3 rotation;\\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\\n    n = rotation * n;\\n  }\\n  return n;\\n}\\n\\nvec4 project_offset_(vec4 offset) {\\n  float dy = offset.y;\\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\\n}\\n\\n//\\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\\n//\\nvec2 project_mercator_(vec2 lnglat) {\\n  float x = lnglat.x;\\n  if (project_uWrapLongitude) {\\n    x = mod(x + 180., 360.0) - 180.;\\n  }\\n  float y = clamp(lnglat.y, -89.9, 89.9);\\n  return vec2(\\n    radians(x) + PI,\\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\\n  ) * WORLD_SCALE;\\n}\\n\\nvec3 project_globe_(vec3 lnglatz) {\\n  float lambda = radians(lnglatz.x);\\n  float phi = radians(lnglatz.y);\\n  float cosPhi = cos(phi);\\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\\n\\n  return vec3(\\n    sin(lambda) * cosPhi,\\n    -cos(lambda) * cosPhi,\\n    sin(phi)\\n  ) * D;\\n}\\n\\n//\\n// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)\\n//\\nvec4 project_position(vec4 position, vec3 position64Low) {\\n  vec4 position_world = project_uModelMatrix * position;\\n\\n  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_mercator_(position_world.xy),\\n        project_size_at_latitude(position_world.z, position_world.y),\\n        position_world.w\\n      );\\n    }\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\\n      position_world.xyz += project_uCoordinateOrigin;\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_globe_(position_world.xyz),\\n        position_world.w\\n      );\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\\n        // Too far from the projection center for offset mode to be accurate\\n        // Only use high parts\\n        return vec4(\\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\\n          project_size(position_world.z),\\n          position_world.w\\n        );\\n      }\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\\n    position_world.xyz -= project_uCoordinateOrigin;\\n  }\\n\\n  // Translation is already added to the high parts\\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\\n}\\n\\nvec4 project_position(vec4 position) {\\n  return project_position(position, ZERO_64_LOW);\\n}\\n\\nvec3 project_position(vec3 position, vec3 position64Low) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\\n  return projected_position.xyz;\\n}\\n\\nvec3 project_position(vec3 position) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\\n  return projected_position.xyz;\\n}\\n\\nvec2 project_position(vec2 position) {\\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\\n  return projected_position.xy;\\n}\\n\\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\\n  return viewProjectionMatrix * position + center;\\n}\\n\\n//\\n// Projects from common space coordinates to clip space.\\n// Uses project_uViewProjectionMatrix\\n//\\nvec4 project_common_position_to_clipspace(vec4 position) {\\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\\n}\\n\\n// Returns a clip space offset that corresponds to a given number of screen pixels\\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\\n  return offset * project_uFocalDistance;\\n}\\n\\nfloat project_size_to_pixel(float meters) {\\n  return project_size(meters) * project_uScale;\\n}\\nfloat project_size_to_pixel(float size, int unit) {\\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\\n  if (unit == UNIT_COMMON) return size * project_uScale;\\n  // UNIT_PIXELS\\n  return size;\\n}\\nfloat project_pixel_size(float pixels) {\\n  return pixels / project_uScale;\\n}\\nvec2 project_pixel_size(vec2 pixels) {\\n  return pixels / project_uScale;\\n}\\n\");\n//# sourceMappingURL=project.glsl.js.map","function isEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (Array.isArray(a)) {\n    const len = a.length;\n\n    if (!b || b.length !== len) {\n      return false;\n    }\n\n    for (let i = 0; i < len; i++) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nexport default function memoize(compute) {\n  let cachedArgs = {};\n  let cachedResult;\n  return args => {\n    for (const key in args) {\n      if (!isEqual(args[key], cachedArgs[key])) {\n        cachedResult = compute(args);\n        cachedArgs = args;\n        break;\n      }\n    }\n\n    return cachedResult;\n  };\n}\n//# sourceMappingURL=memoize.js.map","import * as mat4 from 'gl-matrix/mat4';\nimport * as vec4 from 'gl-matrix/vec4';\nimport { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nimport memoize from '../../utils/memoize';\nconst ZERO_VECTOR = [0, 0, 0, 0];\nconst VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\nconst IDENTITY_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\nconst DEFAULT_PIXELS_PER_UNIT2 = [0, 0, 0];\nconst DEFAULT_COORDINATE_ORIGIN = [0, 0, 0];\nconst getMemoizedViewportUniforms = memoize(calculateViewportUniforms);\nexport function getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin = DEFAULT_COORDINATE_ORIGIN) {\n  if (coordinateOrigin.length < 3) {\n    coordinateOrigin = [coordinateOrigin[0], coordinateOrigin[1], 0];\n  }\n\n  let shaderCoordinateOrigin = coordinateOrigin;\n  let geospatialOrigin;\n  let offsetMode = true;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT_OFFSETS || coordinateSystem === COORDINATE_SYSTEM.METER_OFFSETS) {\n    geospatialOrigin = coordinateOrigin;\n  } else {\n    geospatialOrigin = viewport.isGeospatial ? [Math.fround(viewport.longitude), Math.fround(viewport.latitude), 0] : null;\n  }\n\n  switch (viewport.projectionMode) {\n    case PROJECTION_MODE.WEB_MERCATOR:\n      if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT || coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n        geospatialOrigin = [0, 0, 0];\n        offsetMode = false;\n      }\n\n      break;\n\n    case PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:\n      if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT) {\n        shaderCoordinateOrigin = geospatialOrigin;\n      } else if (coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n        shaderCoordinateOrigin = [Math.fround(viewport.center[0]), Math.fround(viewport.center[1]), 0];\n        geospatialOrigin = viewport.unprojectPosition(shaderCoordinateOrigin);\n        shaderCoordinateOrigin[0] -= coordinateOrigin[0];\n        shaderCoordinateOrigin[1] -= coordinateOrigin[1];\n        shaderCoordinateOrigin[2] -= coordinateOrigin[2];\n      }\n\n      break;\n\n    case PROJECTION_MODE.IDENTITY:\n      shaderCoordinateOrigin = viewport.position.map(Math.fround);\n      shaderCoordinateOrigin[2] = shaderCoordinateOrigin[2] || 0;\n      break;\n\n    case PROJECTION_MODE.GLOBE:\n      offsetMode = false;\n      geospatialOrigin = null;\n      break;\n\n    default:\n      offsetMode = false;\n  }\n\n  return {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  };\n}\n\nfunction calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin) {\n  const {\n    viewMatrixUncentered,\n    projectionMatrix\n  } = viewport;\n  let {\n    viewMatrix,\n    viewProjectionMatrix\n  } = viewport;\n  let projectionCenter = ZERO_VECTOR;\n  let originCommon = ZERO_VECTOR;\n  let cameraPosCommon = viewport.cameraPosition;\n  const {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  } = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin);\n\n  if (offsetMode) {\n    originCommon = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    cameraPosCommon = [cameraPosCommon[0] - originCommon[0], cameraPosCommon[1] - originCommon[1], cameraPosCommon[2] - originCommon[2]];\n    originCommon[3] = 1;\n    projectionCenter = vec4.transformMat4([], originCommon, viewProjectionMatrix);\n    viewMatrix = viewMatrixUncentered || viewMatrix;\n    viewProjectionMatrix = mat4.multiply([], projectionMatrix, viewMatrix);\n    viewProjectionMatrix = mat4.multiply([], viewProjectionMatrix, VECTOR_TO_POINT_MATRIX);\n  }\n\n  return {\n    viewMatrix,\n    viewProjectionMatrix,\n    projectionCenter,\n    originCommon,\n    cameraPosCommon,\n    shaderCoordinateOrigin,\n    geospatialOrigin\n  };\n}\n\nexport function getUniformsFromViewport({\n  viewport,\n  devicePixelRatio = 1,\n  modelMatrix = null,\n  coordinateSystem = COORDINATE_SYSTEM.DEFAULT,\n  coordinateOrigin = DEFAULT_COORDINATE_ORIGIN,\n  autoWrapLongitude = false\n}) {\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  const uniforms = getMemoizedViewportUniforms({\n    viewport,\n    devicePixelRatio,\n    coordinateSystem,\n    coordinateOrigin\n  });\n  uniforms.project_uWrapLongitude = autoWrapLongitude;\n  uniforms.project_uModelMatrix = modelMatrix || IDENTITY_MATRIX;\n  return uniforms;\n}\n\nfunction calculateViewportUniforms({\n  viewport,\n  devicePixelRatio,\n  coordinateSystem,\n  coordinateOrigin\n}) {\n  const {\n    projectionCenter,\n    viewProjectionMatrix,\n    originCommon,\n    cameraPosCommon,\n    shaderCoordinateOrigin,\n    geospatialOrigin\n  } = calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin);\n  const distanceScales = viewport.getDistanceScales();\n  const viewportSize = [viewport.width * devicePixelRatio, viewport.height * devicePixelRatio];\n  const focalDistance = vec4.transformMat4([], [0, 0, -viewport.focalDistance, 1], viewport.projectionMatrix)[3] || 1;\n  const uniforms = {\n    project_uCoordinateSystem: coordinateSystem,\n    project_uProjectionMode: viewport.projectionMode,\n    project_uCoordinateOrigin: shaderCoordinateOrigin,\n    project_uCommonOrigin: originCommon.slice(0, 3),\n    project_uCenter: projectionCenter,\n    project_uPseudoMeters: Boolean(viewport._pseudoMeters),\n    project_uViewportSize: viewportSize,\n    project_uDevicePixelRatio: devicePixelRatio,\n    project_uFocalDistance: focalDistance,\n    project_uCommonUnitsPerMeter: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit2: DEFAULT_PIXELS_PER_UNIT2,\n    project_uScale: viewport.scale,\n    project_uWrapLongitude: false,\n    project_uViewProjectionMatrix: viewProjectionMatrix,\n    project_uModelMatrix: IDENTITY_MATRIX,\n    project_uCameraPosition: cameraPosCommon\n  };\n\n  if (geospatialOrigin) {\n    const distanceScalesAtOrigin = viewport.getDistanceScales(geospatialOrigin);\n\n    switch (coordinateSystem) {\n      case COORDINATE_SYSTEM.METER_OFFSETS:\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerMeter;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerMeter2;\n        break;\n\n      case COORDINATE_SYSTEM.LNGLAT:\n      case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n        if (!viewport._pseudoMeters) {\n          uniforms.project_uCommonUnitsPerMeter = distanceScalesAtOrigin.unitsPerMeter;\n        }\n\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerDegree;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerDegree2;\n        break;\n\n      case COORDINATE_SYSTEM.CARTESIAN:\n        uniforms.project_uCommonUnitsPerWorldUnit = [1, 1, distanceScalesAtOrigin.unitsPerMeter[2]];\n        uniforms.project_uCommonUnitsPerWorldUnit2 = [0, 0, distanceScalesAtOrigin.unitsPerMeter2[2]];\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  return uniforms;\n}\n//# sourceMappingURL=viewport-uniforms.js.map","import { fp32 } from '@luma.gl/core';\nimport geometry from '../misc/geometry';\nimport projectShader from './project.glsl';\nimport { getUniformsFromViewport } from './viewport-uniforms';\nconst INITIAL_MODULE_OPTIONS = {};\n\nfunction getUniforms(opts = INITIAL_MODULE_OPTIONS) {\n  if ('viewport' in opts) {\n    return getUniformsFromViewport(opts);\n  }\n\n  return {};\n}\n\nexport default {\n  name: 'project',\n  dependencies: [fp32, geometry],\n  vs: projectShader,\n  getUniforms\n};\n//# sourceMappingURL=project.js.map","import project from '../project/project';\nconst vs = \"\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\\n) {\\n  vec3 projectedPosition = project_position(position, position64Low);\\n  mat3 rotation;\\n  if (project_needs_rotation(projectedPosition, rotation)) {\\n    // offset is specified as ENU\\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\\n    offset = rotation * offset;\\n  }\\n  commonPosition = vec4(projectedPosition + offset, 1.0);\\n  return project_common_position_to_clipspace(commonPosition);\\n}\\n\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset\\n) {\\n  vec4 commonPosition;\\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\\n}\\n\";\nexport default {\n  name: 'project32',\n  dependencies: [project],\n  vs\n};\n//# sourceMappingURL=project32.js.map","import { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nimport project from '../project/project';\nimport { Vector3, Matrix4 } from '@math.gl/core';\nimport memoize from '../../utils/memoize';\nimport { pixelsToWorld } from '@math.gl/web-mercator';\nconst vs = \"\\nconst int max_lights = 2;\\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\\nuniform vec4 shadow_uProjectCenters[max_lights];\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform int shadow_uLightId;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\\n  if (shadow_uDrawShadowMap) {\\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\\n  }\\n  if (shadow_uUseShadowMap) {\\n    for (int i = 0; i < max_lights; i++) {\\n      if(i < int(shadow_uLightCount)) {\\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\\n      }\\n    }\\n  }\\n  return gl_Position;\\n}\\n\";\nconst fs = \"\\nconst int max_lights = 2;\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform sampler2D shadow_uShadowMap0;\\nuniform sampler2D shadow_uShadowMap1;\\nuniform vec4 shadow_uColor;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\\n\\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\\n\\n  float z = dot(rgbaDepth, bitUnpackShift);\\n  return smoothstep(0.001, 0.01, position.z - z);\\n}\\n\\nvec4 shadow_filterShadowColor(vec4 color) {\\n  if (shadow_uDrawShadowMap) {\\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\\n    return rgbaDepth;\\n  }\\n  if (shadow_uUseShadowMap) {\\n    float shadowAlpha = 0.0;\\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\\n    if(shadow_uLightCount > 1.0) {\\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\\n    }\\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\\n\\n    return vec4(\\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\\n      blendedAlpha\\n    );\\n  }\\n  return color;\\n}\\n\";\nconst getMemoizedViewportCenterPosition = memoize(getViewportCenterPosition);\nconst getMemoizedViewProjectionMatrices = memoize(getViewProjectionMatrices);\nconst DEFAULT_SHADOW_COLOR = [0, 0, 0, 1.0];\nconst VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\n\nfunction screenToCommonSpace(xyz, pixelUnprojectionMatrix) {\n  const [x, y, z] = xyz;\n  const coord = pixelsToWorld([x, y, z], pixelUnprojectionMatrix);\n\n  if (Number.isFinite(z)) {\n    return coord;\n  }\n\n  return [coord[0], coord[1], 0];\n}\n\nfunction getViewportCenterPosition({\n  viewport,\n  center\n}) {\n  return new Matrix4(viewport.viewProjectionMatrix).invert().transform(center);\n}\n\nfunction getViewProjectionMatrices({\n  viewport,\n  shadowMatrices\n}) {\n  const projectionMatrices = [];\n  const pixelUnprojectionMatrix = viewport.pixelUnprojectionMatrix;\n  const farZ = viewport.isGeospatial ? undefined : 1;\n  const corners = [[0, 0, farZ], [viewport.width, 0, farZ], [0, viewport.height, farZ], [viewport.width, viewport.height, farZ], [0, 0, -1], [viewport.width, 0, -1], [0, viewport.height, -1], [viewport.width, viewport.height, -1]].map(pixel => screenToCommonSpace(pixel, pixelUnprojectionMatrix));\n\n  for (const shadowMatrix of shadowMatrices) {\n    const viewMatrix = shadowMatrix.clone().translate(new Vector3(viewport.center).negate());\n    const positions = corners.map(corner => viewMatrix.transform(corner));\n    const projectionMatrix = new Matrix4().ortho({\n      left: Math.min(...positions.map(position => position[0])),\n      right: Math.max(...positions.map(position => position[0])),\n      bottom: Math.min(...positions.map(position => position[1])),\n      top: Math.max(...positions.map(position => position[1])),\n      near: Math.min(...positions.map(position => -position[2])),\n      far: Math.max(...positions.map(position => -position[2]))\n    });\n    projectionMatrices.push(projectionMatrix.multiplyRight(shadowMatrix));\n  }\n\n  return projectionMatrices;\n}\n\nfunction createShadowUniforms(opts, context) {\n  const {\n    shadowEnabled = true\n  } = opts;\n\n  if (!shadowEnabled || !opts.shadowMatrices || !opts.shadowMatrices.length) {\n    return {\n      shadow_uDrawShadowMap: false,\n      shadow_uUseShadowMap: false\n    };\n  }\n\n  const uniforms = {\n    shadow_uDrawShadowMap: Boolean(opts.drawToShadowMap),\n    shadow_uUseShadowMap: opts.shadowMaps ? opts.shadowMaps.length > 0 : false,\n    shadow_uColor: opts.shadowColor || DEFAULT_SHADOW_COLOR,\n    shadow_uLightId: opts.shadowLightId || 0,\n    shadow_uLightCount: opts.shadowMatrices.length\n  };\n  const center = getMemoizedViewportCenterPosition({\n    viewport: opts.viewport,\n    center: context.project_uCenter\n  });\n  const projectCenters = [];\n  const viewProjectionMatrices = getMemoizedViewProjectionMatrices({\n    shadowMatrices: opts.shadowMatrices,\n    viewport: opts.viewport\n  }).slice();\n\n  for (let i = 0; i < opts.shadowMatrices.length; i++) {\n    const viewProjectionMatrix = viewProjectionMatrices[i];\n    const viewProjectionMatrixCentered = viewProjectionMatrix.clone().translate(new Vector3(opts.viewport.center).negate());\n\n    if (context.project_uCoordinateSystem === COORDINATE_SYSTEM.LNGLAT && context.project_uProjectionMode === PROJECTION_MODE.WEB_MERCATOR) {\n      viewProjectionMatrices[i] = viewProjectionMatrixCentered;\n      projectCenters[i] = center;\n    } else {\n      viewProjectionMatrices[i] = viewProjectionMatrix.clone().multiplyRight(VECTOR_TO_POINT_MATRIX);\n      projectCenters[i] = viewProjectionMatrixCentered.transform(center);\n    }\n  }\n\n  for (let i = 0; i < viewProjectionMatrices.length; i++) {\n    uniforms[\"shadow_uViewProjectionMatrices[\".concat(i, \"]\")] = viewProjectionMatrices[i];\n    uniforms[\"shadow_uProjectCenters[\".concat(i, \"]\")] = projectCenters[i];\n\n    if (opts.shadowMaps && opts.shadowMaps.length > 0) {\n      uniforms[\"shadow_uShadowMap\".concat(i)] = opts.shadowMaps[i];\n    } else {\n      uniforms[\"shadow_uShadowMap\".concat(i)] = opts.dummyShadowMap;\n    }\n  }\n\n  return uniforms;\n}\n\nexport default {\n  name: 'shadow',\n  dependencies: [project],\n  vs,\n  fs,\n  inject: {\n    'vs:DECKGL_FILTER_GL_POSITION': \"\\n    position = shadow_setVertexPosition(geometry.position);\\n    \",\n    'fs:DECKGL_FILTER_COLOR': \"\\n    color = shadow_filterShadowColor(color);\\n    \"\n  },\n  getUniforms: (opts = {}, context = {}) => {\n    if ('viewport' in opts && (opts.drawToShadowMap || opts.shadowMaps && opts.shadowMaps.length > 0)) {\n      return createShadowUniforms(opts, context);\n    }\n\n    return {};\n  }\n};\n//# sourceMappingURL=shadow.js.map","import { picking } from '@luma.gl/core';\nexport default {\n  inject: {\n    'vs:DECKGL_FILTER_GL_POSITION': \"\\n    // for picking depth values\\n    picking_setPickingAttribute(position.z / position.w);\\n  \",\n    'vs:DECKGL_FILTER_COLOR': \"\\n  picking_setPickingColor(geometry.pickingColor);\\n  \",\n    'fs:DECKGL_FILTER_COLOR': {\n      order: 99,\n      injection: \"\\n  // use highlight color if this fragment belongs to the selected object.\\n  color = picking_filterHighlightColor(color);\\n\\n  // use picking color if rendering to picking FBO.\\n  color = picking_filterPickingColor(color);\\n    \"\n    }\n  },\n  ...picking\n};\n//# sourceMappingURL=picking.js.map","import { ProgramManager } from '@luma.gl/core';\nimport { gouraudLighting, phongLighting } from '@luma.gl/core';\nimport project from './project/project';\nimport project32 from './project32/project32';\nimport shadow from './shadow/shadow';\nimport picking from './picking/picking';\nconst DEFAULT_MODULES = [project];\nconst SHADER_HOOKS = ['vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)', 'vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)', 'vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)', 'fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)'];\nexport function createProgramManager(gl) {\n  const programManager = ProgramManager.getDefaultProgramManager(gl);\n\n  for (const shaderModule of DEFAULT_MODULES) {\n    programManager.addDefaultModule(shaderModule);\n  }\n\n  for (const shaderHook of SHADER_HOOKS) {\n    programManager.addShaderHook(shaderHook);\n  }\n\n  return programManager;\n}\nexport { picking, project, project32, gouraudLighting, phongLighting, shadow };\n//# sourceMappingURL=index.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nconst DEFAULT_LIGHT_COLOR = [255, 255, 255];\nconst DEFAULT_LIGHT_INTENSITY = 1.0;\nlet idCount = 0;\nexport class AmbientLight {\n  constructor(props = {}) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"color\", void 0);\n\n    _defineProperty(this, \"intensity\", void 0);\n\n    _defineProperty(this, \"type\", 'ambient');\n\n    const {\n      color = DEFAULT_LIGHT_COLOR\n    } = props;\n    const {\n      intensity = DEFAULT_LIGHT_INTENSITY\n    } = props;\n    this.id = props.id || \"ambient-\".concat(idCount++);\n    this.color = color;\n    this.intensity = intensity;\n  }\n\n}\n//# sourceMappingURL=ambient-light.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Vector3 } from '@math.gl/core';\nconst DEFAULT_LIGHT_COLOR = [255, 255, 255];\nconst DEFAULT_LIGHT_INTENSITY = 1.0;\nconst DEFAULT_LIGHT_DIRECTION = [0.0, 0.0, -1.0];\nlet idCount = 0;\nexport class DirectionalLight {\n  constructor(props = {}) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"color\", void 0);\n\n    _defineProperty(this, \"intensity\", void 0);\n\n    _defineProperty(this, \"type\", 'directional');\n\n    _defineProperty(this, \"direction\", void 0);\n\n    _defineProperty(this, \"shadow\", void 0);\n\n    const {\n      color = DEFAULT_LIGHT_COLOR\n    } = props;\n    const {\n      intensity = DEFAULT_LIGHT_INTENSITY\n    } = props;\n    const {\n      direction = DEFAULT_LIGHT_DIRECTION\n    } = props;\n    const {\n      _shadow = false\n    } = props;\n    this.id = props.id || \"directional-\".concat(idCount++);\n    this.color = color;\n    this.intensity = intensity;\n    this.type = 'directional';\n    this.direction = new Vector3(direction).normalize().toArray();\n    this.shadow = _shadow;\n  }\n\n  getProjectedLight(opts) {\n    return this;\n  }\n\n}\n//# sourceMappingURL=directional-light.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Pass from './pass';\nimport { clear, setParameters, withParameters, cssToDeviceRatio } from '@luma.gl/core';\nexport default class LayersPass extends Pass {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"_lastRenderIndex\", -1);\n  }\n\n  render(options) {\n    const gl = this.gl;\n    setParameters(gl, {\n      framebuffer: options.target\n    });\n    return this._drawLayers(options);\n  }\n\n  _drawLayers(options) {\n    const {\n      target,\n      moduleParameters,\n      viewports,\n      views,\n      onViewportActive,\n      clearStack = true,\n      clearCanvas = true\n    } = options;\n    options.pass = options.pass || 'unknown';\n    const gl = this.gl;\n\n    if (clearCanvas) {\n      clearGLCanvas(gl);\n    }\n\n    if (clearStack) {\n      this._lastRenderIndex = -1;\n    }\n\n    const renderStats = [];\n\n    for (const viewport of viewports) {\n      const view = views && views[viewport.id];\n      onViewportActive(viewport);\n\n      const drawLayerParams = this._getDrawLayerParams(viewport, options);\n\n      const subViewports = viewport.subViewports || [viewport];\n\n      for (const subViewport of subViewports) {\n        const stats = this._drawLayersInViewport(gl, {\n          target,\n          moduleParameters,\n          viewport: subViewport,\n          view,\n          pass: options.pass,\n          layers: options.layers\n        }, drawLayerParams);\n\n        renderStats.push(stats);\n      }\n    }\n\n    return renderStats;\n  }\n\n  _getDrawLayerParams(viewport, {\n    layers,\n    pass,\n    layerFilter,\n    cullRect,\n    effects,\n    moduleParameters\n  }) {\n    const drawLayerParams = [];\n    const indexResolver = layerIndexResolver(this._lastRenderIndex + 1);\n    const drawContext = {\n      layer: layers[0],\n      viewport,\n      isPicking: pass.startsWith('picking'),\n      renderPass: pass,\n      cullRect\n    };\n    const layerFilterCache = {};\n\n    for (let layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n      const layer = layers[layerIndex];\n\n      const shouldDrawLayer = this._shouldDrawLayer(layer, drawContext, layerFilter, layerFilterCache);\n\n      const layerParam = {\n        shouldDrawLayer\n      };\n\n      if (shouldDrawLayer) {\n        layerParam.layerRenderIndex = indexResolver(layer, shouldDrawLayer);\n        layerParam.moduleParameters = this._getModuleParameters(layer, effects, pass, moduleParameters);\n        layerParam.layerParameters = this.getLayerParameters(layer, layerIndex, viewport);\n      }\n\n      drawLayerParams[layerIndex] = layerParam;\n    }\n\n    return drawLayerParams;\n  }\n\n  _drawLayersInViewport(gl, {\n    layers,\n    moduleParameters: globalModuleParameters,\n    pass,\n    target,\n    viewport,\n    view\n  }, drawLayerParams) {\n    const glViewport = getGLViewport(gl, {\n      moduleParameters: globalModuleParameters,\n      target,\n      viewport\n    });\n\n    if (view && view.props.clear) {\n      const clearOpts = view.props.clear === true ? {\n        color: true,\n        depth: true\n      } : view.props.clear;\n      withParameters(gl, {\n        scissorTest: true,\n        scissor: glViewport\n      }, () => clear(gl, clearOpts));\n    }\n\n    const renderStatus = {\n      totalCount: layers.length,\n      visibleCount: 0,\n      compositeCount: 0,\n      pickableCount: 0\n    };\n    setParameters(gl, {\n      viewport: glViewport\n    });\n\n    for (let layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n      const layer = layers[layerIndex];\n      const {\n        shouldDrawLayer,\n        layerRenderIndex,\n        moduleParameters,\n        layerParameters\n      } = drawLayerParams[layerIndex];\n\n      if (shouldDrawLayer && layer.props.pickable) {\n        renderStatus.pickableCount++;\n      }\n\n      if (layer.isComposite) {\n        renderStatus.compositeCount++;\n      } else if (shouldDrawLayer) {\n        renderStatus.visibleCount++;\n        this._lastRenderIndex = Math.max(this._lastRenderIndex, layerRenderIndex);\n        moduleParameters.viewport = viewport;\n\n        try {\n          layer._drawLayer({\n            moduleParameters,\n            uniforms: {\n              layerIndex: layerRenderIndex\n            },\n            parameters: layerParameters\n          });\n        } catch (err) {\n          layer.raiseError(err, \"drawing \".concat(layer, \" to \").concat(pass));\n        }\n      }\n    }\n\n    return renderStatus;\n  }\n\n  shouldDrawLayer(layer) {\n    return true;\n  }\n\n  getModuleParameters(layer, effects) {\n    return null;\n  }\n\n  getLayerParameters(layer, layerIndex, viewport) {\n    return layer.props.parameters;\n  }\n\n  _shouldDrawLayer(layer, drawContext, layerFilter, layerFilterCache) {\n    const shouldDrawLayer = layer.props.visible && this.shouldDrawLayer(layer);\n\n    if (!shouldDrawLayer) {\n      return false;\n    }\n\n    drawContext.layer = layer;\n    let parent = layer.parent;\n\n    while (parent) {\n      if (!parent.props.visible || !parent.filterSubLayer(drawContext)) {\n        return false;\n      }\n\n      drawContext.layer = parent;\n      parent = parent.parent;\n    }\n\n    if (layerFilter) {\n      const rootLayerId = drawContext.layer.id;\n\n      if (!(rootLayerId in layerFilterCache)) {\n        layerFilterCache[rootLayerId] = layerFilter(drawContext);\n      }\n\n      if (!layerFilterCache[rootLayerId]) {\n        return false;\n      }\n    }\n\n    layer.activateViewport(drawContext.viewport);\n    return true;\n  }\n\n  _getModuleParameters(layer, effects, pass, overrides) {\n    var _layer$internalState;\n\n    const moduleParameters = Object.assign(Object.create(((_layer$internalState = layer.internalState) === null || _layer$internalState === void 0 ? void 0 : _layer$internalState.propsInTransition) || layer.props), {\n      autoWrapLongitude: layer.wrapLongitude,\n      viewport: layer.context.viewport,\n      mousePosition: layer.context.mousePosition,\n      pickingActive: 0,\n      devicePixelRatio: cssToDeviceRatio(this.gl)\n    });\n\n    if (effects) {\n      for (const effect of effects) {\n        var _effect$getModulePara;\n\n        Object.assign(moduleParameters, (_effect$getModulePara = effect.getModuleParameters) === null || _effect$getModulePara === void 0 ? void 0 : _effect$getModulePara.call(effect, layer));\n      }\n    }\n\n    return Object.assign(moduleParameters, this.getModuleParameters(layer, effects), overrides);\n  }\n\n}\nexport function layerIndexResolver(startIndex = 0, layerIndices = {}) {\n  const resolvers = {};\n\n  const resolveLayerIndex = (layer, isDrawn) => {\n    const indexOverride = layer.props._offset;\n    const layerId = layer.id;\n    const parentId = layer.parent && layer.parent.id;\n    let index;\n\n    if (parentId && !(parentId in layerIndices)) {\n      resolveLayerIndex(layer.parent, false);\n    }\n\n    if (parentId in resolvers) {\n      const resolver = resolvers[parentId] = resolvers[parentId] || layerIndexResolver(layerIndices[parentId], layerIndices);\n      index = resolver(layer, isDrawn);\n      resolvers[layerId] = resolver;\n    } else if (Number.isFinite(indexOverride)) {\n      index = indexOverride + (layerIndices[parentId] || 0);\n      resolvers[layerId] = null;\n    } else {\n      index = startIndex;\n    }\n\n    if (isDrawn && index >= startIndex) {\n      startIndex = index + 1;\n    }\n\n    layerIndices[layerId] = index;\n    return index;\n  };\n\n  return resolveLayerIndex;\n}\n\nfunction getGLViewport(gl, {\n  moduleParameters,\n  target,\n  viewport\n}) {\n  const useTarget = target && target.id !== 'default-framebuffer';\n  const pixelRatio = moduleParameters && moduleParameters.devicePixelRatio || cssToDeviceRatio(gl);\n  const height = useTarget ? target.height : gl.drawingBufferHeight;\n  const dimensions = viewport;\n  return [dimensions.x * pixelRatio, height - (dimensions.y + dimensions.height) * pixelRatio, dimensions.width * pixelRatio, dimensions.height * pixelRatio];\n}\n\nfunction clearGLCanvas(gl) {\n  const width = gl.drawingBufferWidth;\n  const height = gl.drawingBufferHeight;\n  setParameters(gl, {\n    viewport: [0, 0, width, height]\n  });\n  gl.clear(16384 | 256);\n}\n//# sourceMappingURL=layers-pass.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport default class Pass {\n  constructor(gl, props = {\n    id: 'pass'\n  }) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"gl\", void 0);\n\n    _defineProperty(this, \"props\", void 0);\n\n    const {\n      id\n    } = props;\n    this.id = id;\n    this.gl = gl;\n    this.props = { ...props\n    };\n  }\n\n  setProps(props) {\n    Object.assign(this.props, props);\n  }\n\n  render(params) {}\n\n  cleanup() {}\n\n}\n//# sourceMappingURL=pass.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { default as LayersPass } from './layers-pass';\nimport { Framebuffer, Texture2D, Renderbuffer, withParameters, cssToDeviceRatio } from '@luma.gl/core';\nexport default class ShadowPass extends LayersPass {\n  constructor(gl, props) {\n    super(gl, props);\n\n    _defineProperty(this, \"shadowMap\", void 0);\n\n    _defineProperty(this, \"depthBuffer\", void 0);\n\n    _defineProperty(this, \"fbo\", void 0);\n\n    this.shadowMap = new Texture2D(gl, {\n      width: 1,\n      height: 1,\n      parameters: {\n        [10241]: 9729,\n        [10240]: 9729,\n        [10242]: 33071,\n        [10243]: 33071\n      }\n    });\n    this.depthBuffer = new Renderbuffer(gl, {\n      format: 33189,\n      width: 1,\n      height: 1\n    });\n    this.fbo = new Framebuffer(gl, {\n      id: 'shadowmap',\n      width: 1,\n      height: 1,\n      attachments: {\n        [36064]: this.shadowMap,\n        [36096]: this.depthBuffer\n      }\n    });\n  }\n\n  render(params) {\n    const target = this.fbo;\n    withParameters(this.gl, {\n      depthRange: [0, 1],\n      depthTest: true,\n      blend: false,\n      clearColor: [1, 1, 1, 1]\n    }, () => {\n      const viewport = params.viewports[0];\n      const pixelRatio = cssToDeviceRatio(this.gl);\n      const width = viewport.width * pixelRatio;\n      const height = viewport.height * pixelRatio;\n\n      if (width !== target.width || height !== target.height) {\n        target.resize({\n          width,\n          height\n        });\n      }\n\n      super.render({ ...params,\n        target,\n        pass: 'shadow'\n      });\n    });\n  }\n\n  shouldDrawLayer(layer) {\n    return layer.props.shadowEnabled !== false;\n  }\n\n  getModuleParameters() {\n    return {\n      drawToShadowMap: true\n    };\n  }\n\n  delete() {\n    if (this.fbo) {\n      this.fbo.delete();\n      this.fbo = null;\n    }\n\n    if (this.shadowMap) {\n      this.shadowMap.delete();\n      this.shadowMap = null;\n    }\n\n    if (this.depthBuffer) {\n      this.depthBuffer.delete();\n      this.depthBuffer = null;\n    }\n  }\n\n}\n//# sourceMappingURL=shadow-pass.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Texture2D, ProgramManager } from '@luma.gl/core';\nimport { AmbientLight } from './ambient-light';\nimport { DirectionalLight } from './directional-light';\nimport { Matrix4, Vector3 } from '@math.gl/core';\nimport ShadowPass from '../../passes/shadow-pass';\nimport shadow from '../../shaderlib/shadow/shadow';\nconst DEFAULT_AMBIENT_LIGHT_PROPS = {\n  color: [255, 255, 255],\n  intensity: 1.0\n};\nconst DEFAULT_DIRECTIONAL_LIGHT_PROPS = [{\n  color: [255, 255, 255],\n  intensity: 1.0,\n  direction: [-1, 3, -1]\n}, {\n  color: [255, 255, 255],\n  intensity: 0.9,\n  direction: [1, -8, -2.5]\n}];\nconst DEFAULT_SHADOW_COLOR = [0, 0, 0, 200 / 255];\nexport default class LightingEffect {\n  constructor(props = {}) {\n    _defineProperty(this, \"id\", 'lighting-effect');\n\n    _defineProperty(this, \"props\", null);\n\n    _defineProperty(this, \"shadowColor\", DEFAULT_SHADOW_COLOR);\n\n    _defineProperty(this, \"shadow\", void 0);\n\n    _defineProperty(this, \"ambientLight\", null);\n\n    _defineProperty(this, \"directionalLights\", []);\n\n    _defineProperty(this, \"pointLights\", []);\n\n    _defineProperty(this, \"shadowPasses\", []);\n\n    _defineProperty(this, \"shadowMaps\", []);\n\n    _defineProperty(this, \"dummyShadowMap\", null);\n\n    _defineProperty(this, \"programManager\", void 0);\n\n    _defineProperty(this, \"shadowMatrices\", void 0);\n\n    for (const key in props) {\n      const lightSource = props[key];\n\n      switch (lightSource.type) {\n        case 'ambient':\n          this.ambientLight = lightSource;\n          break;\n\n        case 'directional':\n          this.directionalLights.push(lightSource);\n          break;\n\n        case 'point':\n          this.pointLights.push(lightSource);\n          break;\n\n        default:\n      }\n    }\n\n    this._applyDefaultLights();\n\n    this.shadow = this.directionalLights.some(light => light.shadow);\n  }\n\n  preRender(gl, {\n    layers,\n    layerFilter,\n    viewports,\n    onViewportActive,\n    views\n  }) {\n    if (!this.shadow) return;\n    this.shadowMatrices = this._calculateMatrices();\n\n    if (this.shadowPasses.length === 0) {\n      this._createShadowPasses(gl);\n    }\n\n    if (!this.programManager) {\n      this.programManager = ProgramManager.getDefaultProgramManager(gl);\n\n      if (shadow) {\n        this.programManager.addDefaultModule(shadow);\n      }\n    }\n\n    if (!this.dummyShadowMap) {\n      this.dummyShadowMap = new Texture2D(gl, {\n        width: 1,\n        height: 1\n      });\n    }\n\n    for (let i = 0; i < this.shadowPasses.length; i++) {\n      const shadowPass = this.shadowPasses[i];\n      shadowPass.render({\n        layers,\n        layerFilter,\n        viewports,\n        onViewportActive,\n        views,\n        moduleParameters: {\n          shadowLightId: i,\n          dummyShadowMap: this.dummyShadowMap,\n          shadowMatrices: this.shadowMatrices\n        }\n      });\n    }\n  }\n\n  getModuleParameters(layer) {\n    const parameters = this.shadow ? {\n      shadowMaps: this.shadowMaps,\n      dummyShadowMap: this.dummyShadowMap,\n      shadowColor: this.shadowColor,\n      shadowMatrices: this.shadowMatrices\n    } : {};\n    parameters.lightSources = {\n      ambientLight: this.ambientLight,\n      directionalLights: this.directionalLights.map(directionalLight => directionalLight.getProjectedLight({\n        layer\n      })),\n      pointLights: this.pointLights.map(pointLight => pointLight.getProjectedLight({\n        layer\n      }))\n    };\n    return parameters;\n  }\n\n  cleanup() {\n    for (const shadowPass of this.shadowPasses) {\n      shadowPass.delete();\n    }\n\n    this.shadowPasses.length = 0;\n    this.shadowMaps.length = 0;\n\n    if (this.dummyShadowMap) {\n      this.dummyShadowMap.delete();\n      this.dummyShadowMap = null;\n    }\n\n    if (this.shadow && this.programManager) {\n      this.programManager.removeDefaultModule(shadow);\n      this.programManager = null;\n    }\n  }\n\n  _calculateMatrices() {\n    const lightMatrices = [];\n\n    for (const light of this.directionalLights) {\n      const viewMatrix = new Matrix4().lookAt({\n        eye: new Vector3(light.direction).negate()\n      });\n      lightMatrices.push(viewMatrix);\n    }\n\n    return lightMatrices;\n  }\n\n  _createShadowPasses(gl) {\n    for (let i = 0; i < this.directionalLights.length; i++) {\n      const shadowPass = new ShadowPass(gl);\n      this.shadowPasses[i] = shadowPass;\n      this.shadowMaps[i] = shadowPass.shadowMap;\n    }\n  }\n\n  _applyDefaultLights() {\n    const {\n      ambientLight,\n      pointLights,\n      directionalLights\n    } = this;\n\n    if (!ambientLight && pointLights.length === 0 && directionalLights.length === 0) {\n      this.ambientLight = new AmbientLight(DEFAULT_AMBIENT_LIGHT_PROPS);\n      this.directionalLights.push(new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[0]), new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[1]));\n    }\n  }\n\n}\n//# sourceMappingURL=lighting-effect.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport class TypedArrayManager {\n  constructor(options = {}) {\n    _defineProperty(this, \"_pool\", []);\n\n    _defineProperty(this, \"opts\", {\n      overAlloc: 2,\n      poolSize: 100\n    });\n\n    this.setOptions(options);\n  }\n\n  setOptions(options) {\n    Object.assign(this.opts, options);\n  }\n\n  allocate(typedArray, count, {\n    size = 1,\n    type,\n    padding = 0,\n    copy = false,\n    initialize = false,\n    maxCount\n  }) {\n    const Type = type || typedArray && typedArray.constructor || Float32Array;\n    const newSize = count * size + padding;\n\n    if (ArrayBuffer.isView(typedArray)) {\n      if (newSize <= typedArray.length) {\n        return typedArray;\n      }\n\n      if (newSize * typedArray.BYTES_PER_ELEMENT <= typedArray.buffer.byteLength) {\n        return new Type(typedArray.buffer, 0, newSize);\n      }\n    }\n\n    let maxSize = Infinity;\n\n    if (maxCount) {\n      maxSize = maxCount * size + padding;\n    }\n\n    const newArray = this._allocate(Type, newSize, initialize, maxSize);\n\n    if (typedArray && copy) {\n      newArray.set(typedArray);\n    } else if (!initialize) {\n      newArray.fill(0, 0, 4);\n    }\n\n    this._release(typedArray);\n\n    return newArray;\n  }\n\n  release(typedArray) {\n    this._release(typedArray);\n  }\n\n  _allocate(Type, size, initialize, maxSize) {\n    let sizeToAllocate = Math.max(Math.ceil(size * this.opts.overAlloc), 1);\n\n    if (sizeToAllocate > maxSize) {\n      sizeToAllocate = maxSize;\n    }\n\n    const pool = this._pool;\n    const byteLength = Type.BYTES_PER_ELEMENT * sizeToAllocate;\n    const i = pool.findIndex(b => b.byteLength >= byteLength);\n\n    if (i >= 0) {\n      const array = new Type(pool.splice(i, 1)[0], 0, sizeToAllocate);\n\n      if (initialize) {\n        array.fill(0);\n      }\n\n      return array;\n    }\n\n    return new Type(sizeToAllocate);\n  }\n\n  _release(typedArray) {\n    if (!ArrayBuffer.isView(typedArray)) {\n      return;\n    }\n\n    const pool = this._pool;\n    const {\n      buffer\n    } = typedArray;\n    const {\n      byteLength\n    } = buffer;\n    const i = pool.findIndex(b => b.byteLength >= byteLength);\n\n    if (i < 0) {\n      pool.push(buffer);\n    } else if (i > 0 || pool.length < this.opts.poolSize) {\n      pool.splice(i, 0, buffer);\n    }\n\n    if (pool.length > this.opts.poolSize) {\n      pool.shift();\n    }\n  }\n\n}\nexport default new TypedArrayManager();\n//# sourceMappingURL=typed-array-manager.js.map","import typedArrayManager from './typed-array-manager';\nimport { Vector3 } from '@math.gl/core';\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function mod(value, divisor) {\n  const modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function getCameraPosition(viewMatrixInverse) {\n  return [viewMatrixInverse[12], viewMatrixInverse[13], viewMatrixInverse[14]];\n}\nexport function getFrustumPlanes(viewProjectionMatrix) {\n  return {\n    left: getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[0], viewProjectionMatrix[7] + viewProjectionMatrix[4], viewProjectionMatrix[11] + viewProjectionMatrix[8], viewProjectionMatrix[15] + viewProjectionMatrix[12]),\n    right: getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[0], viewProjectionMatrix[7] - viewProjectionMatrix[4], viewProjectionMatrix[11] - viewProjectionMatrix[8], viewProjectionMatrix[15] - viewProjectionMatrix[12]),\n    bottom: getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[1], viewProjectionMatrix[7] + viewProjectionMatrix[5], viewProjectionMatrix[11] + viewProjectionMatrix[9], viewProjectionMatrix[15] + viewProjectionMatrix[13]),\n    top: getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[1], viewProjectionMatrix[7] - viewProjectionMatrix[5], viewProjectionMatrix[11] - viewProjectionMatrix[9], viewProjectionMatrix[15] - viewProjectionMatrix[13]),\n    near: getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[2], viewProjectionMatrix[7] + viewProjectionMatrix[6], viewProjectionMatrix[11] + viewProjectionMatrix[10], viewProjectionMatrix[15] + viewProjectionMatrix[14]),\n    far: getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[2], viewProjectionMatrix[7] - viewProjectionMatrix[6], viewProjectionMatrix[11] - viewProjectionMatrix[10], viewProjectionMatrix[15] - viewProjectionMatrix[14])\n  };\n}\nconst scratchVector = new Vector3();\n\nfunction getFrustumPlane(a, b, c, d) {\n  scratchVector.set(a, b, c);\n  const L = scratchVector.len();\n  return {\n    distance: d / L,\n    normal: new Vector3(-a / L, -b / L, -c / L)\n  };\n}\n\nexport function fp64LowPart(x) {\n  return x - Math.fround(x);\n}\nlet scratchArray;\nexport function toDoublePrecisionArray(typedArray, options) {\n  const {\n    size = 1,\n    startIndex = 0\n  } = options;\n  const endIndex = options.endIndex !== undefined ? options.endIndex : typedArray.length;\n  const count = (endIndex - startIndex) / size;\n  scratchArray = typedArrayManager.allocate(scratchArray, count, {\n    type: Float32Array,\n    size: size * 2\n  });\n  let sourceIndex = startIndex;\n  let targetIndex = 0;\n\n  while (sourceIndex < endIndex) {\n    for (let j = 0; j < size; j++) {\n      const value = typedArray[sourceIndex++];\n      scratchArray[targetIndex + j] = value;\n      scratchArray[targetIndex + j + size] = fp64LowPart(value);\n    }\n\n    targetIndex += size * 2;\n  }\n\n  return scratchArray.subarray(0, count * size * 2);\n}\n//# sourceMappingURL=math-utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport log from '../utils/log';\nimport { createMat4, getCameraPosition, getFrustumPlanes } from '../utils/math-utils';\nimport { Matrix4, Vector3, equals, clamp } from '@math.gl/core';\nimport * as mat4 from 'gl-matrix/mat4';\nimport { getDistanceScales, getMeterZoom, lngLatToWorld, worldToLngLat, worldToPixels, pixelsToWorld } from '@math.gl/web-mercator';\nimport { PROJECTION_MODE } from '../lib/constants';\nconst DEGREES_TO_RADIANS = Math.PI / 180;\nconst IDENTITY = createMat4();\nconst ZERO_VECTOR = [0, 0, 0];\nconst DEFAULT_DISTANCE_SCALES = {\n  unitsPerMeter: [1, 1, 1],\n  metersPerUnit: [1, 1, 1]\n};\n\nfunction createProjectionMatrix({\n  width,\n  height,\n  orthographic,\n  fovyRadians,\n  focalDistance,\n  padding,\n  near,\n  far\n}) {\n  const aspect = width / height;\n  const matrix = orthographic ? new Matrix4().orthographic({\n    fovy: fovyRadians,\n    aspect,\n    focalDistance,\n    near,\n    far\n  }) : new Matrix4().perspective({\n    fovy: fovyRadians,\n    aspect,\n    near,\n    far\n  });\n\n  if (padding) {\n    const {\n      left = 0,\n      right = 0,\n      top = 0,\n      bottom = 0\n    } = padding;\n    const offsetX = clamp((left + width - right) / 2, 0, width) - width / 2;\n    const offsetY = clamp((top + height - bottom) / 2, 0, height) - height / 2;\n    matrix[8] -= offsetX * 2 / width;\n    matrix[9] += offsetY * 2 / height;\n  }\n\n  return matrix;\n}\n\nexport default class Viewport {\n  constructor(opts = {}) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"x\", void 0);\n\n    _defineProperty(this, \"y\", void 0);\n\n    _defineProperty(this, \"width\", void 0);\n\n    _defineProperty(this, \"height\", void 0);\n\n    _defineProperty(this, \"padding\", void 0);\n\n    _defineProperty(this, \"isGeospatial\", void 0);\n\n    _defineProperty(this, \"zoom\", void 0);\n\n    _defineProperty(this, \"focalDistance\", void 0);\n\n    _defineProperty(this, \"position\", void 0);\n\n    _defineProperty(this, \"modelMatrix\", void 0);\n\n    _defineProperty(this, \"distanceScales\", void 0);\n\n    _defineProperty(this, \"scale\", void 0);\n\n    _defineProperty(this, \"center\", void 0);\n\n    _defineProperty(this, \"cameraPosition\", void 0);\n\n    _defineProperty(this, \"projectionMatrix\", void 0);\n\n    _defineProperty(this, \"viewMatrix\", void 0);\n\n    _defineProperty(this, \"viewMatrixUncentered\", void 0);\n\n    _defineProperty(this, \"viewMatrixInverse\", void 0);\n\n    _defineProperty(this, \"viewProjectionMatrix\", void 0);\n\n    _defineProperty(this, \"pixelProjectionMatrix\", void 0);\n\n    _defineProperty(this, \"pixelUnprojectionMatrix\", void 0);\n\n    _defineProperty(this, \"resolution\", void 0);\n\n    _defineProperty(this, \"_frustumPlanes\", {});\n\n    this.id = opts.id || this.constructor.displayName || 'viewport';\n    this.x = opts.x || 0;\n    this.y = opts.y || 0;\n    this.width = opts.width || 1;\n    this.height = opts.height || 1;\n    this.zoom = opts.zoom || 0;\n    this.padding = opts.padding;\n    this.distanceScales = opts.distanceScales || DEFAULT_DISTANCE_SCALES;\n    this.focalDistance = opts.focalDistance || 1;\n    this.position = opts.position || ZERO_VECTOR;\n    this.modelMatrix = opts.modelMatrix || null;\n    const {\n      longitude,\n      latitude\n    } = opts;\n    this.isGeospatial = Number.isFinite(latitude) && Number.isFinite(longitude);\n\n    this._initProps(opts);\n\n    this._initMatrices(opts);\n\n    this.equals = this.equals.bind(this);\n    this.project = this.project.bind(this);\n    this.unproject = this.unproject.bind(this);\n    this.projectPosition = this.projectPosition.bind(this);\n    this.unprojectPosition = this.unprojectPosition.bind(this);\n    this.projectFlat = this.projectFlat.bind(this);\n    this.unprojectFlat = this.unprojectFlat.bind(this);\n  }\n\n  get metersPerPixel() {\n    return this.distanceScales.metersPerUnit[2] / this.scale;\n  }\n\n  get projectionMode() {\n    if (this.isGeospatial) {\n      return this.zoom < 12 ? PROJECTION_MODE.WEB_MERCATOR : PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET;\n    }\n\n    return PROJECTION_MODE.IDENTITY;\n  }\n\n  equals(viewport) {\n    if (!(viewport instanceof Viewport)) {\n      return false;\n    }\n\n    if (this === viewport) {\n      return true;\n    }\n\n    return viewport.width === this.width && viewport.height === this.height && viewport.scale === this.scale && equals(viewport.projectionMatrix, this.projectionMatrix) && equals(viewport.viewMatrix, this.viewMatrix);\n  }\n\n  project(xyz, {\n    topLeft = true\n  } = {}) {\n    const worldPosition = this.projectPosition(xyz);\n    const coord = worldToPixels(worldPosition, this.pixelProjectionMatrix);\n    const [x, y] = coord;\n    const y2 = topLeft ? y : this.height - y;\n    return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n  }\n\n  unproject(xyz, {\n    topLeft = true,\n    targetZ\n  } = {}) {\n    const [x, y, z] = xyz;\n    const y2 = topLeft ? y : this.height - y;\n    const targetZWorld = targetZ && targetZ * this.distanceScales.unitsPerMeter[2];\n    const coord = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n    const [X, Y, Z] = this.unprojectPosition(coord);\n\n    if (Number.isFinite(z)) {\n      return [X, Y, Z];\n    }\n\n    return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n  }\n\n  projectPosition(xyz) {\n    const [X, Y] = this.projectFlat(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.unitsPerMeter[2];\n    return [X, Y, Z];\n  }\n\n  unprojectPosition(xyz) {\n    const [X, Y] = this.unprojectFlat(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.metersPerUnit[2];\n    return [X, Y, Z];\n  }\n\n  projectFlat(xyz) {\n    if (this.isGeospatial) {\n      const result = lngLatToWorld(xyz);\n      result[1] = clamp(result[1], -318, 830);\n      return result;\n    }\n\n    return xyz;\n  }\n\n  unprojectFlat(xyz) {\n    if (this.isGeospatial) {\n      return worldToLngLat(xyz);\n    }\n\n    return xyz;\n  }\n\n  getBounds(options = {}) {\n    const unprojectOption = {\n      targetZ: options.z || 0\n    };\n    const topLeft = this.unproject([0, 0], unprojectOption);\n    const topRight = this.unproject([this.width, 0], unprojectOption);\n    const bottomLeft = this.unproject([0, this.height], unprojectOption);\n    const bottomRight = this.unproject([this.width, this.height], unprojectOption);\n    return [Math.min(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]), Math.min(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]), Math.max(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]), Math.max(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1])];\n  }\n\n  getDistanceScales(coordinateOrigin) {\n    if (coordinateOrigin) {\n      return getDistanceScales({\n        longitude: coordinateOrigin[0],\n        latitude: coordinateOrigin[1],\n        highPrecision: true\n      });\n    }\n\n    return this.distanceScales;\n  }\n\n  containsPixel({\n    x,\n    y,\n    width = 1,\n    height = 1\n  }) {\n    return x < this.x + this.width && this.x < x + width && y < this.y + this.height && this.y < y + height;\n  }\n\n  getFrustumPlanes() {\n    if (this._frustumPlanes.near) {\n      return this._frustumPlanes;\n    }\n\n    Object.assign(this._frustumPlanes, getFrustumPlanes(this.viewProjectionMatrix));\n    return this._frustumPlanes;\n  }\n\n  panByPosition(coords, pixel) {\n    return null;\n  }\n\n  _initProps(opts) {\n    const longitude = opts.longitude;\n    const latitude = opts.latitude;\n\n    if (this.isGeospatial) {\n      if (!Number.isFinite(opts.zoom)) {\n        this.zoom = getMeterZoom({\n          latitude\n        }) + Math.log2(this.focalDistance);\n      }\n\n      this.distanceScales = opts.distanceScales || getDistanceScales({\n        latitude,\n        longitude\n      });\n    }\n\n    const scale = Math.pow(2, this.zoom);\n    this.scale = scale;\n    const {\n      position,\n      modelMatrix\n    } = opts;\n    let meterOffset = ZERO_VECTOR;\n\n    if (position) {\n      meterOffset = modelMatrix ? new Matrix4(modelMatrix).transformAsVector(position, []) : position;\n    }\n\n    if (this.isGeospatial) {\n      const center = this.projectPosition([longitude, latitude, 0]);\n      this.center = new Vector3(meterOffset).scale(this.distanceScales.unitsPerMeter).add(center);\n    } else {\n      this.center = this.projectPosition(meterOffset);\n    }\n  }\n\n  _initMatrices(opts) {\n    const {\n      viewMatrix = IDENTITY,\n      projectionMatrix = null,\n      orthographic = false,\n      fovyRadians,\n      fovy = 75,\n      near = 0.1,\n      far = 1000,\n      padding = null,\n      focalDistance = 1\n    } = opts;\n    this.viewMatrixUncentered = viewMatrix;\n    this.viewMatrix = new Matrix4().multiplyRight(viewMatrix).translate(new Vector3(this.center).negate());\n    this.projectionMatrix = projectionMatrix || createProjectionMatrix({\n      width: this.width,\n      height: this.height,\n      orthographic,\n      fovyRadians: fovyRadians || fovy * DEGREES_TO_RADIANS,\n      focalDistance,\n      padding,\n      near,\n      far\n    });\n    const vpm = createMat4();\n    mat4.multiply(vpm, vpm, this.projectionMatrix);\n    mat4.multiply(vpm, vpm, this.viewMatrix);\n    this.viewProjectionMatrix = vpm;\n    this.viewMatrixInverse = mat4.invert([], this.viewMatrix) || this.viewMatrix;\n    this.cameraPosition = getCameraPosition(this.viewMatrixInverse);\n    const viewportMatrix = createMat4();\n    const pixelProjectionMatrix = createMat4();\n    mat4.scale(viewportMatrix, viewportMatrix, [this.width / 2, -this.height / 2, 1]);\n    mat4.translate(viewportMatrix, viewportMatrix, [1, -1, 0]);\n    mat4.multiply(pixelProjectionMatrix, viewportMatrix, this.viewProjectionMatrix);\n    this.pixelProjectionMatrix = pixelProjectionMatrix;\n    this.pixelUnprojectionMatrix = mat4.invert(createMat4(), this.pixelProjectionMatrix);\n\n    if (!this.pixelUnprojectionMatrix) {\n      log.warn('Pixel project matrix not invertible')();\n    }\n  }\n\n}\n\n_defineProperty(Viewport, \"displayName\", 'Viewport');\n//# sourceMappingURL=viewport.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Viewport from './viewport';\nimport { pixelsToWorld, getViewMatrix, addMetersToLngLat, getProjectionParameters, altitudeToFovy, fovyToAltitude, fitBounds, getBounds } from '@math.gl/web-mercator';\nimport * as vec2 from 'gl-matrix/vec2';\nimport { Matrix4 } from '@math.gl/core';\nconst TILE_SIZE = 512;\nconst EARTH_CIRCUMFERENCE = 40.03e6;\nconst DEGREES_TO_RADIANS = Math.PI / 180;\n\nfunction unitsPerMeter(latitude) {\n  const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  return TILE_SIZE / EARTH_CIRCUMFERENCE / latCosine;\n}\n\nexport default class WebMercatorViewport extends Viewport {\n  constructor(opts = {}) {\n    const {\n      latitude = 0,\n      longitude = 0,\n      zoom = 0,\n      pitch = 0,\n      bearing = 0,\n      nearZMultiplier = 0.1,\n      farZMultiplier = 1.01,\n      orthographic = false,\n      projectionMatrix,\n      repeat = false,\n      worldOffset = 0,\n      legacyMeterSizes = false\n    } = opts;\n    let {\n      width,\n      height,\n      altitude = 1.5\n    } = opts;\n    const scale = Math.pow(2, zoom);\n    width = width || 1;\n    height = height || 1;\n    let fovy;\n    let projectionParameters = null;\n\n    if (projectionMatrix) {\n      altitude = projectionMatrix[5] / 2;\n      fovy = altitudeToFovy(altitude);\n    } else {\n      if (opts.fovy) {\n        fovy = opts.fovy;\n        altitude = fovyToAltitude(fovy);\n      } else {\n        fovy = altitudeToFovy(altitude);\n      }\n\n      projectionParameters = getProjectionParameters({\n        width,\n        height,\n        pitch,\n        fovy,\n        nearZMultiplier,\n        farZMultiplier\n      });\n    }\n\n    let viewMatrixUncentered = getViewMatrix({\n      height,\n      pitch,\n      bearing,\n      scale,\n      altitude\n    });\n\n    if (worldOffset) {\n      const viewOffset = new Matrix4().translate([512 * worldOffset, 0, 0]);\n      viewMatrixUncentered = viewOffset.multiplyLeft(viewMatrixUncentered);\n    }\n\n    super({ ...opts,\n      width,\n      height,\n      viewMatrix: viewMatrixUncentered,\n      longitude,\n      latitude,\n      zoom,\n      ...projectionParameters,\n      fovy,\n      focalDistance: altitude\n    });\n\n    _defineProperty(this, \"longitude\", void 0);\n\n    _defineProperty(this, \"latitude\", void 0);\n\n    _defineProperty(this, \"pitch\", void 0);\n\n    _defineProperty(this, \"bearing\", void 0);\n\n    _defineProperty(this, \"altitude\", void 0);\n\n    _defineProperty(this, \"fovy\", void 0);\n\n    _defineProperty(this, \"orthographic\", void 0);\n\n    _defineProperty(this, \"_subViewports\", void 0);\n\n    _defineProperty(this, \"_pseudoMeters\", void 0);\n\n    this.latitude = latitude;\n    this.longitude = longitude;\n    this.zoom = zoom;\n    this.pitch = pitch;\n    this.bearing = bearing;\n    this.altitude = altitude;\n    this.fovy = fovy;\n    this.orthographic = orthographic;\n    this._subViewports = repeat ? [] : null;\n    this._pseudoMeters = legacyMeterSizes;\n    Object.freeze(this);\n  }\n\n  get subViewports() {\n    if (this._subViewports && !this._subViewports.length) {\n      const bounds = this.getBounds();\n      const minOffset = Math.floor((bounds[0] + 180) / 360);\n      const maxOffset = Math.ceil((bounds[2] - 180) / 360);\n\n      for (let x = minOffset; x <= maxOffset; x++) {\n        const offsetViewport = x ? new WebMercatorViewport({ ...this,\n          worldOffset: x\n        }) : this;\n\n        this._subViewports.push(offsetViewport);\n      }\n    }\n\n    return this._subViewports;\n  }\n\n  projectPosition(xyz) {\n    if (this._pseudoMeters) {\n      return super.projectPosition(xyz);\n    }\n\n    const [X, Y] = this.projectFlat(xyz);\n    const Z = (xyz[2] || 0) * unitsPerMeter(xyz[1]);\n    return [X, Y, Z];\n  }\n\n  unprojectPosition(xyz) {\n    if (this._pseudoMeters) {\n      return super.unprojectPosition(xyz);\n    }\n\n    const [X, Y] = this.unprojectFlat(xyz);\n    const Z = (xyz[2] || 0) / unitsPerMeter(Y);\n    return [X, Y, Z];\n  }\n\n  addMetersToLngLat(lngLatZ, xyz) {\n    return addMetersToLngLat(lngLatZ, xyz);\n  }\n\n  panByPosition(coords, pixel) {\n    const fromLocation = pixelsToWorld(pixel, this.pixelUnprojectionMatrix);\n    const toLocation = this.projectFlat(coords);\n    const translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n    const newCenter = vec2.add([], this.center, translate);\n    const [longitude, latitude] = this.unprojectFlat(newCenter);\n    return {\n      longitude,\n      latitude\n    };\n  }\n\n  getBounds(options = {}) {\n    const corners = getBounds(this, options.z || 0);\n    return [Math.min(corners[0][0], corners[1][0], corners[2][0], corners[3][0]), Math.min(corners[0][1], corners[1][1], corners[2][1], corners[3][1]), Math.max(corners[0][0], corners[1][0], corners[2][0], corners[3][0]), Math.max(corners[0][1], corners[1][1], corners[2][1], corners[3][1])];\n  }\n\n  fitBounds(bounds, options = {}) {\n    const {\n      width,\n      height\n    } = this;\n    const {\n      longitude,\n      latitude,\n      zoom\n    } = fitBounds({\n      width,\n      height,\n      bounds,\n      ...options\n    });\n    return new WebMercatorViewport({\n      width,\n      height,\n      longitude,\n      latitude,\n      zoom\n    });\n  }\n\n}\n\n_defineProperty(WebMercatorViewport, \"displayName\", 'WebMercatorViewport');\n//# sourceMappingURL=web-mercator-viewport.js.map","import { COORDINATE_SYSTEM } from '../../lib/constants';\nimport { getOffsetOrigin } from './viewport-uniforms';\nimport WebMercatorViewport from '../../viewports/web-mercator-viewport';\nimport * as vec4 from 'gl-matrix/vec4';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { addMetersToLngLat } from '@math.gl/web-mercator';\n\nfunction lngLatZToWorldPosition(lngLatZ, viewport, offsetMode = false) {\n  const p = viewport.projectPosition(lngLatZ);\n\n  if (offsetMode && viewport instanceof WebMercatorViewport) {\n    const [longitude, latitude, z = 0] = lngLatZ;\n    const distanceScales = viewport.getDistanceScales([longitude, latitude]);\n    p[2] = z * distanceScales.unitsPerMeter[2];\n  }\n\n  return p;\n}\n\nfunction normalizeParameters(opts) {\n  const {\n    viewport,\n    modelMatrix,\n    coordinateOrigin\n  } = opts;\n  let {\n    coordinateSystem,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  } = opts;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  if (fromCoordinateSystem === undefined) {\n    fromCoordinateSystem = coordinateSystem;\n  }\n\n  if (fromCoordinateOrigin === undefined) {\n    fromCoordinateOrigin = coordinateOrigin;\n  }\n\n  return {\n    viewport,\n    coordinateSystem,\n    coordinateOrigin,\n    modelMatrix,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  };\n}\n\nexport function getWorldPosition(position, {\n  viewport,\n  modelMatrix,\n  coordinateSystem,\n  coordinateOrigin,\n  offsetMode\n}) {\n  let [x, y, z = 0] = position;\n\n  if (modelMatrix) {\n    [x, y, z] = vec4.transformMat4([], [x, y, z, 1.0], modelMatrix);\n  }\n\n  switch (coordinateSystem) {\n    case COORDINATE_SYSTEM.LNGLAT:\n      return lngLatZToWorldPosition([x, y, z], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n      return lngLatZToWorldPosition([x + coordinateOrigin[0], y + coordinateOrigin[1], z + (coordinateOrigin[2] || 0)], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.METER_OFFSETS:\n      return lngLatZToWorldPosition(addMetersToLngLat(coordinateOrigin, [x, y, z]), viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.CARTESIAN:\n    default:\n      return viewport.isGeospatial ? [x + coordinateOrigin[0], y + coordinateOrigin[1], z + coordinateOrigin[2]] : viewport.projectPosition([x, y, z]);\n  }\n}\nexport function projectPosition(position, params) {\n  const {\n    viewport,\n    coordinateSystem,\n    coordinateOrigin,\n    modelMatrix,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  } = normalizeParameters(params);\n  const {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  } = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin);\n  const worldPosition = getWorldPosition(position, {\n    viewport,\n    modelMatrix,\n    coordinateSystem: fromCoordinateSystem,\n    coordinateOrigin: fromCoordinateOrigin,\n    offsetMode\n  });\n\n  if (offsetMode) {\n    const positionCommonSpace = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    vec3.sub(worldPosition, worldPosition, positionCommonSpace);\n  }\n\n  return worldPosition;\n}\n//# sourceMappingURL=project-functions.js.map","export const LIFECYCLE = {\n  NO_STATE: 'Awaiting state',\n  MATCHED: 'Matched. State transferred from previous layer',\n  INITIALIZED: 'Initialized',\n  AWAITING_GC: 'Discarded. Awaiting garbage collection',\n  AWAITING_FINALIZATION: 'No longer matched. Awaiting garbage collection',\n  FINALIZED: 'Finalized! Awaiting garbage collection'\n};\nexport const COMPONENT_SYMBOL = Symbol.for('component');\nexport const ASYNC_DEFAULTS_SYMBOL = Symbol.for('asyncPropDefaults');\nexport const ASYNC_ORIGINAL_SYMBOL = Symbol.for('asyncPropOriginal');\nexport const ASYNC_RESOLVED_SYMBOL = Symbol.for('asyncPropResolved');\n//# sourceMappingURL=constants.js.map","export function flatten(array, filter = () => true) {\n  if (!Array.isArray(array)) {\n    return filter(array) ? [array] : [];\n  }\n\n  return flattenArray(array, filter, []);\n}\n\nfunction flattenArray(array, filter, result) {\n  let index = -1;\n\n  while (++index < array.length) {\n    const value = array[index];\n\n    if (Array.isArray(value)) {\n      flattenArray(value, filter, result);\n    } else if (filter(value)) {\n      result.push(value);\n    }\n  }\n\n  return result;\n}\n\nexport function fillArray({\n  target,\n  source,\n  start = 0,\n  count = 1\n}) {\n  const length = source.length;\n  const total = count * length;\n  let copied = 0;\n\n  for (let i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}\n//# sourceMappingURL=flatten.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { load } from '@loaders.gl/core';\nexport default class Resource {\n  constructor(id, data, context) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"context\", void 0);\n\n    _defineProperty(this, \"isLoaded\", void 0);\n\n    _defineProperty(this, \"persistent\", void 0);\n\n    _defineProperty(this, \"_loadCount\", 0);\n\n    _defineProperty(this, \"_subscribers\", new Set());\n\n    _defineProperty(this, \"_data\", void 0);\n\n    _defineProperty(this, \"_loader\", void 0);\n\n    _defineProperty(this, \"_error\", void 0);\n\n    _defineProperty(this, \"_content\", void 0);\n\n    this.id = id;\n    this.context = context;\n    this.setData(data);\n  }\n\n  subscribe(consumer) {\n    this._subscribers.add(consumer);\n  }\n\n  unsubscribe(consumer) {\n    this._subscribers.delete(consumer);\n  }\n\n  inUse() {\n    return this._subscribers.size > 0;\n  }\n\n  delete() {}\n\n  getData() {\n    return this.isLoaded ? this._error ? Promise.reject(this._error) : this._content : this._loader.then(() => this.getData());\n  }\n\n  setData(data, forceUpdate) {\n    if (data === this._data && !forceUpdate) {\n      return;\n    }\n\n    this._data = data;\n    const loadCount = ++this._loadCount;\n    let loader = data;\n\n    if (typeof data === 'string') {\n      loader = load(data);\n    }\n\n    if (loader instanceof Promise) {\n      this.isLoaded = false;\n      this._loader = loader.then(result => {\n        if (this._loadCount === loadCount) {\n          this.isLoaded = true;\n          this._error = undefined;\n          this._content = result;\n        }\n      }).catch(error => {\n        if (this._loadCount === loadCount) {\n          this.isLoaded = true;\n          this._error = error || true;\n        }\n      });\n    } else {\n      this.isLoaded = true;\n      this._error = undefined;\n      this._content = data;\n    }\n\n    for (const subscriber of this._subscribers) {\n      subscriber.onChange(this.getData());\n    }\n  }\n\n}\n//# sourceMappingURL=resource.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Resource from './resource';\nexport default class ResourceManager {\n  constructor({\n    gl,\n    protocol\n  }) {\n    _defineProperty(this, \"protocol\", void 0);\n\n    _defineProperty(this, \"_context\", void 0);\n\n    _defineProperty(this, \"_resources\", void 0);\n\n    _defineProperty(this, \"_consumers\", void 0);\n\n    _defineProperty(this, \"_pruneRequest\", void 0);\n\n    this.protocol = protocol || 'resource://';\n    this._context = {\n      gl,\n      resourceManager: this\n    };\n    this._resources = {};\n    this._consumers = {};\n    this._pruneRequest = null;\n  }\n\n  contains(resourceId) {\n    if (resourceId.startsWith(this.protocol)) {\n      return true;\n    }\n\n    return resourceId in this._resources;\n  }\n\n  add({\n    resourceId,\n    data,\n    forceUpdate = false,\n    persistent = true\n  }) {\n    let res = this._resources[resourceId];\n\n    if (res) {\n      res.setData(data, forceUpdate);\n    } else {\n      res = new Resource(resourceId, data, this._context);\n      this._resources[resourceId] = res;\n    }\n\n    res.persistent = persistent;\n  }\n\n  remove(resourceId) {\n    const res = this._resources[resourceId];\n\n    if (res) {\n      res.delete();\n      delete this._resources[resourceId];\n    }\n  }\n\n  unsubscribe({\n    consumerId\n  }) {\n    const consumer = this._consumers[consumerId];\n\n    if (consumer) {\n      for (const requestId in consumer) {\n        const request = consumer[requestId];\n        const resource = this._resources[request.resourceId];\n\n        if (resource) {\n          resource.unsubscribe(request);\n        }\n      }\n\n      delete this._consumers[consumerId];\n      this.prune();\n    }\n  }\n\n  subscribe({\n    resourceId,\n    onChange,\n    consumerId,\n    requestId = 'default'\n  }) {\n    const {\n      _resources: resources,\n      protocol\n    } = this;\n\n    if (resourceId.startsWith(protocol)) {\n      resourceId = resourceId.replace(protocol, '');\n\n      if (!resources[resourceId]) {\n        this.add({\n          resourceId,\n          data: null,\n          persistent: false\n        });\n      }\n    }\n\n    const res = resources[resourceId];\n\n    this._track(consumerId, requestId, res, onChange);\n\n    if (res) {\n      return res.getData();\n    }\n\n    return undefined;\n  }\n\n  prune() {\n    if (!this._pruneRequest) {\n      this._pruneRequest = setTimeout(() => this._prune(), 0);\n    }\n  }\n\n  finalize() {\n    for (const key in this._resources) {\n      this._resources[key].delete();\n    }\n  }\n\n  _track(consumerId, requestId, resource, onChange) {\n    const consumers = this._consumers;\n    const consumer = consumers[consumerId] = consumers[consumerId] || {};\n    const request = consumer[requestId] || {};\n    const oldResource = request.resourceId && this._resources[request.resourceId];\n\n    if (oldResource) {\n      oldResource.unsubscribe(request);\n      this.prune();\n    }\n\n    if (resource) {\n      consumer[requestId] = request;\n      request.onChange = onChange;\n      request.resourceId = resource.id;\n      resource.subscribe(request);\n    }\n  }\n\n  _prune() {\n    this._pruneRequest = null;\n\n    for (const key of Object.keys(this._resources)) {\n      const res = this._resources[key];\n\n      if (!res.persistent && !res.inUse()) {\n        res.delete();\n        delete this._resources[key];\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=resource-manager.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Timeline } from '@luma.gl/core';\nimport { LIFECYCLE } from '../lifecycle/constants';\nimport log from '../utils/log';\nimport debug from '../debug';\nimport { flatten } from '../utils/flatten';\nimport { Stats } from '@probe.gl/stats';\nimport ResourceManager from './resource/resource-manager';\nimport Viewport from '../viewports/viewport';\nimport { createProgramManager } from '../shaderlib';\nconst TRACE_SET_LAYERS = 'layerManager.setLayers';\nconst TRACE_ACTIVATE_VIEWPORT = 'layerManager.activateViewport';\nexport default class LayerManager {\n  constructor(gl, {\n    deck,\n    stats,\n    viewport: _viewport,\n    timeline\n  } = {}) {\n    _defineProperty(this, \"layers\", void 0);\n\n    _defineProperty(this, \"context\", void 0);\n\n    _defineProperty(this, \"resourceManager\", void 0);\n\n    _defineProperty(this, \"_lastRenderedLayers\", []);\n\n    _defineProperty(this, \"_needsRedraw\", false);\n\n    _defineProperty(this, \"_needsUpdate\", false);\n\n    _defineProperty(this, \"_nextLayers\", null);\n\n    _defineProperty(this, \"_debug\", false);\n\n    _defineProperty(this, \"activateViewport\", viewport => {\n      debug(TRACE_ACTIVATE_VIEWPORT, this, viewport);\n\n      if (viewport) {\n        this.context.viewport = viewport;\n      }\n    });\n\n    this.layers = [];\n    this.resourceManager = new ResourceManager({\n      gl,\n      protocol: 'deck://'\n    });\n    this.context = {\n      mousePosition: null,\n      userData: {},\n      layerManager: this,\n      gl,\n      deck,\n      programManager: gl && createProgramManager(gl),\n      stats: stats || new Stats({\n        id: 'deck.gl'\n      }),\n      viewport: _viewport || new Viewport({\n        id: 'DEFAULT-INITIAL-VIEWPORT'\n      }),\n      timeline: timeline || new Timeline(),\n      resourceManager: this.resourceManager,\n      onError: undefined\n    };\n    Object.seal(this);\n  }\n\n  finalize() {\n    this.resourceManager.finalize();\n\n    for (const layer of this.layers) {\n      this._finalizeLayer(layer);\n    }\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    let redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    for (const layer of this.layers) {\n      const layerNeedsRedraw = layer.getNeedsRedraw(opts);\n      redraw = redraw || layerNeedsRedraw;\n    }\n\n    return redraw;\n  }\n\n  needsUpdate() {\n    if (this._nextLayers && this._nextLayers !== this._lastRenderedLayers) {\n      return 'layers changed';\n    }\n\n    return this._needsUpdate;\n  }\n\n  setNeedsRedraw(reason) {\n    this._needsRedraw = this._needsRedraw || reason;\n  }\n\n  setNeedsUpdate(reason) {\n    this._needsUpdate = this._needsUpdate || reason;\n  }\n\n  getLayers({\n    layerIds\n  } = {}) {\n    return layerIds ? this.layers.filter(layer => layerIds.find(layerId => layer.id.indexOf(layerId) === 0)) : this.layers;\n  }\n\n  setProps(props) {\n    if ('debug' in props) {\n      this._debug = props.debug;\n    }\n\n    if ('userData' in props) {\n      this.context.userData = props.userData;\n    }\n\n    if ('layers' in props) {\n      this._nextLayers = props.layers;\n    }\n\n    if ('onError' in props) {\n      this.context.onError = props.onError;\n    }\n  }\n\n  setLayers(newLayers, reason) {\n    debug(TRACE_SET_LAYERS, this, reason, newLayers);\n    this._lastRenderedLayers = newLayers;\n    const flatLayers = flatten(newLayers, Boolean);\n\n    for (const layer of flatLayers) {\n      layer.context = this.context;\n    }\n\n    this._updateLayers(this.layers, flatLayers);\n  }\n\n  updateLayers() {\n    const reason = this.needsUpdate();\n\n    if (reason) {\n      this.setNeedsRedraw(\"updating layers: \".concat(reason));\n      this.setLayers(this._nextLayers || this._lastRenderedLayers, reason);\n    }\n\n    this._nextLayers = null;\n  }\n\n  _handleError(stage, error, layer) {\n    layer.raiseError(error, \"\".concat(stage, \" of \").concat(layer));\n  }\n\n  _updateLayers(oldLayers, newLayers) {\n    const oldLayerMap = {};\n\n    for (const oldLayer of oldLayers) {\n      if (oldLayerMap[oldLayer.id]) {\n        log.warn(\"Multiple old layers with same id \".concat(oldLayer.id))();\n      } else {\n        oldLayerMap[oldLayer.id] = oldLayer;\n      }\n    }\n\n    const generatedLayers = [];\n\n    this._updateSublayersRecursively(newLayers, oldLayerMap, generatedLayers);\n\n    this._finalizeOldLayers(oldLayerMap);\n\n    let needsUpdate = false;\n\n    for (const layer of generatedLayers) {\n      if (layer.hasUniformTransition()) {\n        needsUpdate = \"Uniform transition in \".concat(layer);\n        break;\n      }\n    }\n\n    this._needsUpdate = needsUpdate;\n    this.layers = generatedLayers;\n  }\n\n  _updateSublayersRecursively(newLayers, oldLayerMap, generatedLayers) {\n    for (const newLayer of newLayers) {\n      newLayer.context = this.context;\n      const oldLayer = oldLayerMap[newLayer.id];\n\n      if (oldLayer === null) {\n        log.warn(\"Multiple new layers with same id \".concat(newLayer.id))();\n      }\n\n      oldLayerMap[newLayer.id] = null;\n      let sublayers = null;\n\n      try {\n        if (this._debug && oldLayer !== newLayer) {\n          newLayer.validateProps();\n        }\n\n        if (!oldLayer) {\n          this._initializeLayer(newLayer);\n        } else {\n          this._transferLayerState(oldLayer, newLayer);\n\n          this._updateLayer(newLayer);\n        }\n\n        generatedLayers.push(newLayer);\n        sublayers = newLayer.isComposite ? newLayer.getSubLayers() : null;\n      } catch (err) {\n        this._handleError('matching', err, newLayer);\n      }\n\n      if (sublayers) {\n        this._updateSublayersRecursively(sublayers, oldLayerMap, generatedLayers);\n      }\n    }\n  }\n\n  _finalizeOldLayers(oldLayerMap) {\n    for (const layerId in oldLayerMap) {\n      const layer = oldLayerMap[layerId];\n\n      if (layer) {\n        this._finalizeLayer(layer);\n      }\n    }\n  }\n\n  _initializeLayer(layer) {\n    try {\n      layer._initialize();\n\n      layer.lifecycle = LIFECYCLE.INITIALIZED;\n    } catch (err) {\n      this._handleError('initialization', err, layer);\n    }\n  }\n\n  _transferLayerState(oldLayer, newLayer) {\n    newLayer._transferState(oldLayer);\n\n    newLayer.lifecycle = LIFECYCLE.MATCHED;\n\n    if (newLayer !== oldLayer) {\n      oldLayer.lifecycle = LIFECYCLE.AWAITING_GC;\n    }\n  }\n\n  _updateLayer(layer) {\n    try {\n      layer._update();\n    } catch (err) {\n      this._handleError('update', err, layer);\n    }\n  }\n\n  _finalizeLayer(layer) {\n    this._needsRedraw = this._needsRedraw || \"finalized \".concat(layer);\n    layer.lifecycle = LIFECYCLE.AWAITING_FINALIZATION;\n\n    try {\n      layer._finalize();\n\n      layer.lifecycle = LIFECYCLE.FINALIZED;\n    } catch (err) {\n      this._handleError('finalization', err, layer);\n    }\n  }\n\n}\n//# sourceMappingURL=layer-manager.js.map","export function deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (!a || !b) {\n    return false;\n  }\n\n  for (const key in a) {\n    const aValue = a[key];\n    const bValue = b[key];\n    const equals = aValue === bValue || Array.isArray(aValue) && Array.isArray(bValue) && deepEqual(aValue, bValue);\n\n    if (!equals) {\n      return false;\n    }\n  }\n\n  return true;\n}\n//# sourceMappingURL=deep-equal.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { deepEqual } from '../utils/deep-equal';\nimport log from '../utils/log';\nimport { flatten } from '../utils/flatten';\nexport default class ViewManager {\n  constructor(props) {\n    _defineProperty(this, \"width\", void 0);\n\n    _defineProperty(this, \"height\", void 0);\n\n    _defineProperty(this, \"views\", void 0);\n\n    _defineProperty(this, \"viewState\", void 0);\n\n    _defineProperty(this, \"controllers\", void 0);\n\n    _defineProperty(this, \"timeline\", void 0);\n\n    _defineProperty(this, \"_viewports\", void 0);\n\n    _defineProperty(this, \"_viewportMap\", void 0);\n\n    _defineProperty(this, \"_isUpdating\", void 0);\n\n    _defineProperty(this, \"_needsRedraw\", void 0);\n\n    _defineProperty(this, \"_needsUpdate\", void 0);\n\n    _defineProperty(this, \"_eventManager\", void 0);\n\n    _defineProperty(this, \"_eventCallbacks\", void 0);\n\n    this.views = [];\n    this.width = 100;\n    this.height = 100;\n    this.viewState = {};\n    this.controllers = {};\n    this.timeline = props.timeline;\n    this._viewports = [];\n    this._viewportMap = {};\n    this._isUpdating = false;\n    this._needsRedraw = 'First render';\n    this._needsUpdate = 'Initialize';\n    this._eventManager = props.eventManager;\n    this._eventCallbacks = {\n      onViewStateChange: props.onViewStateChange,\n      onInteractionStateChange: props.onInteractionStateChange\n    };\n    Object.seal(this);\n    this.setProps(props);\n  }\n\n  finalize() {\n    for (const key in this.controllers) {\n      const controller = this.controllers[key];\n\n      if (controller) {\n        controller.finalize();\n      }\n    }\n\n    this.controllers = {};\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  setNeedsUpdate(reason) {\n    this._needsUpdate = this._needsUpdate || reason;\n    this._needsRedraw = this._needsRedraw || reason;\n  }\n\n  updateViewStates() {\n    for (const viewId in this.controllers) {\n      const controller = this.controllers[viewId];\n\n      if (controller) {\n        controller.updateTransition();\n      }\n    }\n  }\n\n  getViewports(rect) {\n    if (rect) {\n      return this._viewports.filter(viewport => viewport.containsPixel(rect));\n    }\n\n    return this._viewports;\n  }\n\n  getViews() {\n    const viewMap = {};\n    this.views.forEach(view => {\n      viewMap[view.id] = view;\n    });\n    return viewMap;\n  }\n\n  getView(viewId) {\n    return this.views.find(view => view.id === viewId);\n  }\n\n  getViewState(viewOrViewId) {\n    const view = typeof viewOrViewId === 'string' ? this.getView(viewOrViewId) : viewOrViewId;\n    const viewState = view && this.viewState[view.getViewStateId()] || this.viewState;\n    return view ? view.filterViewState(viewState) : viewState;\n  }\n\n  getViewport(viewId) {\n    return this._viewportMap[viewId];\n  }\n\n  unproject(xyz, opts) {\n    const viewports = this.getViewports();\n    const pixel = {\n      x: xyz[0],\n      y: xyz[1]\n    };\n\n    for (let i = viewports.length - 1; i >= 0; --i) {\n      const viewport = viewports[i];\n\n      if (viewport.containsPixel(pixel)) {\n        const p = xyz.slice();\n        p[0] -= viewport.x;\n        p[1] -= viewport.y;\n        return viewport.unproject(p, opts);\n      }\n    }\n\n    return null;\n  }\n\n  setProps(props) {\n    if (props.views) {\n      this._setViews(props.views);\n    }\n\n    if (props.viewState) {\n      this._setViewState(props.viewState);\n    }\n\n    if ('width' in props || 'height' in props) {\n      this._setSize(props.width, props.height);\n    }\n\n    if (!this._isUpdating) {\n      this._update();\n    }\n  }\n\n  _update() {\n    this._isUpdating = true;\n\n    if (this._needsUpdate) {\n      this._needsUpdate = false;\n\n      this._rebuildViewports();\n    }\n\n    if (this._needsUpdate) {\n      this._needsUpdate = false;\n\n      this._rebuildViewports();\n    }\n\n    this._isUpdating = false;\n  }\n\n  _setSize(width, height) {\n    if (width !== this.width || height !== this.height) {\n      this.width = width;\n      this.height = height;\n      this.setNeedsUpdate('Size changed');\n    }\n  }\n\n  _setViews(views) {\n    views = flatten(views, Boolean);\n\n    const viewsChanged = this._diffViews(views, this.views);\n\n    if (viewsChanged) {\n      this.setNeedsUpdate('views changed');\n    }\n\n    this.views = views;\n  }\n\n  _setViewState(viewState) {\n    if (viewState) {\n      const viewStateChanged = !deepEqual(viewState, this.viewState);\n\n      if (viewStateChanged) {\n        this.setNeedsUpdate('viewState changed');\n      }\n\n      this.viewState = viewState;\n    } else {\n      log.warn('missing `viewState` or `initialViewState`')();\n    }\n  }\n\n  _onViewStateChange(viewId, event) {\n    if (this._eventCallbacks.onViewStateChange) {\n      this._eventCallbacks.onViewStateChange({ ...event,\n        viewId\n      });\n    }\n  }\n\n  _createController(view, props) {\n    const Controller = props.type;\n    const controller = new Controller({\n      timeline: this.timeline,\n      eventManager: this._eventManager,\n      onViewStateChange: this._onViewStateChange.bind(this, props.id),\n      onStateChange: this._eventCallbacks.onInteractionStateChange,\n      makeViewport: viewState => {\n        var _this$getView;\n\n        return (_this$getView = this.getView(view.id)) === null || _this$getView === void 0 ? void 0 : _this$getView.makeViewport({\n          viewState,\n          width: this.width,\n          height: this.height\n        });\n      }\n    });\n    return controller;\n  }\n\n  _updateController(view, viewState, viewport, controller) {\n    const controllerProps = view.controller;\n\n    if (controllerProps) {\n      const resolvedProps = { ...viewState,\n        ...controllerProps,\n        id: view.id,\n        x: viewport.x,\n        y: viewport.y,\n        width: viewport.width,\n        height: viewport.height\n      };\n\n      if (!controller) {\n        controller = this._createController(view, resolvedProps);\n      }\n\n      if (controller) {\n        controller.setProps(resolvedProps);\n      }\n\n      return controller;\n    }\n\n    return null;\n  }\n\n  _rebuildViewports() {\n    const {\n      views\n    } = this;\n    const oldControllers = this.controllers;\n    this._viewports = [];\n    this.controllers = {};\n    let invalidateControllers = false;\n\n    for (let i = views.length; i--;) {\n      const view = views[i];\n      const viewState = this.getViewState(view);\n      const viewport = view.makeViewport({\n        viewState,\n        width: this.width,\n        height: this.height\n      });\n      let oldController = oldControllers[view.id];\n      const hasController = Boolean(view.controller);\n\n      if (hasController && !oldController) {\n        invalidateControllers = true;\n      }\n\n      if ((invalidateControllers || !hasController) && oldController) {\n        oldController.finalize();\n        oldController = null;\n      }\n\n      this.controllers[view.id] = this._updateController(view, viewState, viewport, oldController);\n\n      this._viewports.unshift(viewport);\n    }\n\n    for (const id in oldControllers) {\n      const oldController = oldControllers[id];\n\n      if (oldController && !this.controllers[id]) {\n        oldController.finalize();\n      }\n    }\n\n    this._buildViewportMap();\n  }\n\n  _buildViewportMap() {\n    this._viewportMap = {};\n\n    this._viewports.forEach(viewport => {\n      if (viewport.id) {\n        this._viewportMap[viewport.id] = this._viewportMap[viewport.id] || viewport;\n      }\n    });\n  }\n\n  _diffViews(newViews, oldViews) {\n    if (newViews.length !== oldViews.length) {\n      return true;\n    }\n\n    return newViews.some((_, i) => !newViews[i].equals(oldViews[i]));\n  }\n\n}\n//# sourceMappingURL=view-manager.js.map","const PERCENT_OR_PIXELS_REGEX = /([0-9]+\\.?[0-9]*)(%|px)/;\nexport function parsePosition(value) {\n  switch (typeof value) {\n    case 'number':\n      return {\n        position: value,\n        relative: false\n      };\n\n    case 'string':\n      const match = PERCENT_OR_PIXELS_REGEX.exec(value);\n\n      if (match && match.length >= 3) {\n        const relative = match[2] === '%';\n        const position = parseFloat(match[1]);\n        return {\n          position: relative ? position / 100 : position,\n          relative\n        };\n      }\n\n    default:\n      throw new Error(\"Could not parse position string \".concat(value));\n  }\n}\nexport function getPosition(position, extent) {\n  return position.relative ? Math.round(position.position * extent) : position.position;\n}\n//# sourceMappingURL=positions.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'deck.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Viewport from '../viewports/viewport';\nimport { parsePosition, getPosition } from '../utils/positions';\nimport { deepEqual } from '../utils/deep-equal';\nimport assert from '../utils/assert';\nexport default class View {\n  constructor(props) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"viewportInstance\", void 0);\n\n    _defineProperty(this, \"_x\", void 0);\n\n    _defineProperty(this, \"_y\", void 0);\n\n    _defineProperty(this, \"_width\", void 0);\n\n    _defineProperty(this, \"_height\", void 0);\n\n    _defineProperty(this, \"_padding\", void 0);\n\n    _defineProperty(this, \"props\", void 0);\n\n    const {\n      id,\n      x = 0,\n      y = 0,\n      width = '100%',\n      height = '100%',\n      padding = null,\n      viewportInstance\n    } = props || {};\n    assert(!viewportInstance || viewportInstance instanceof Viewport);\n    this.viewportInstance = viewportInstance;\n    this.id = id || this.constructor.displayName || 'view';\n    this.props = { ...props,\n      id: this.id\n    };\n    this._x = parsePosition(x);\n    this._y = parsePosition(y);\n    this._width = parsePosition(width);\n    this._height = parsePosition(height);\n    this._padding = padding && {\n      left: parsePosition(padding.left || 0),\n      right: parsePosition(padding.right || 0),\n      top: parsePosition(padding.top || 0),\n      bottom: parsePosition(padding.bottom || 0)\n    };\n    this.equals = this.equals.bind(this);\n    Object.seal(this);\n  }\n\n  equals(view) {\n    if (this === view) {\n      return true;\n    }\n\n    if (this.viewportInstance) {\n      return view.viewportInstance ? this.viewportInstance.equals(view.viewportInstance) : false;\n    }\n\n    return this.ViewportType === view.ViewportType && deepEqual(this.props, view.props);\n  }\n\n  makeViewport({\n    width,\n    height,\n    viewState\n  }) {\n    if (this.viewportInstance) {\n      return this.viewportInstance;\n    }\n\n    viewState = this.filterViewState(viewState);\n    const viewportDimensions = this.getDimensions({\n      width,\n      height\n    });\n    return new this.ViewportType({ ...viewState,\n      ...this.props,\n      ...viewportDimensions\n    });\n  }\n\n  getViewStateId() {\n    const {\n      viewState\n    } = this.props;\n\n    if (typeof viewState === 'string') {\n      return viewState;\n    }\n\n    return (viewState === null || viewState === void 0 ? void 0 : viewState.id) || this.id;\n  }\n\n  filterViewState(viewState) {\n    if (this.props.viewState && typeof this.props.viewState === 'object') {\n      if (!this.props.viewState.id) {\n        return this.props.viewState;\n      }\n\n      const newViewState = { ...viewState\n      };\n\n      for (const key in this.props.viewState) {\n        if (key !== 'id') {\n          newViewState[key] = this.props.viewState[key];\n        }\n      }\n\n      return newViewState;\n    }\n\n    return viewState;\n  }\n\n  getDimensions({\n    width,\n    height\n  }) {\n    const dimensions = {\n      x: getPosition(this._x, width),\n      y: getPosition(this._y, height),\n      width: getPosition(this._width, width),\n      height: getPosition(this._height, height)\n    };\n\n    if (this._padding) {\n      dimensions.padding = {\n        left: getPosition(this._padding.left, width),\n        top: getPosition(this._padding.top, height),\n        right: getPosition(this._padding.right, width),\n        bottom: getPosition(this._padding.bottom, height)\n      };\n    }\n\n    return dimensions;\n  }\n\n  get controller() {\n    const opts = this.props.controller;\n\n    if (!opts) {\n      return null;\n    }\n\n    if (opts === true) {\n      return {\n        type: this.ControllerType\n      };\n    }\n\n    if (typeof opts === 'function') {\n      return {\n        type: opts\n      };\n    }\n\n    return {\n      type: this.ControllerType,\n      ...opts\n    };\n  }\n\n}\n//# sourceMappingURL=view.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport default class Transition {\n  constructor(timeline) {\n    _defineProperty(this, \"_inProgress\", void 0);\n\n    _defineProperty(this, \"_handle\", void 0);\n\n    _defineProperty(this, \"_timeline\", void 0);\n\n    _defineProperty(this, \"time\", void 0);\n\n    _defineProperty(this, \"settings\", void 0);\n\n    this._inProgress = false;\n    this._handle = null;\n    this._timeline = timeline;\n    this.time = 0;\n    this.settings = {\n      duration: 0\n    };\n  }\n\n  get inProgress() {\n    return this._inProgress;\n  }\n\n  start(settings) {\n    var _this$settings$onStar, _this$settings;\n\n    this.cancel();\n    this.settings = settings;\n    this._inProgress = true;\n    (_this$settings$onStar = (_this$settings = this.settings).onStart) === null || _this$settings$onStar === void 0 ? void 0 : _this$settings$onStar.call(_this$settings, this);\n  }\n\n  end() {\n    if (this._inProgress) {\n      var _this$settings$onEnd, _this$settings2;\n\n      this._timeline.removeChannel(this._handle);\n\n      this._handle = null;\n      this._inProgress = false;\n      (_this$settings$onEnd = (_this$settings2 = this.settings).onEnd) === null || _this$settings$onEnd === void 0 ? void 0 : _this$settings$onEnd.call(_this$settings2, this);\n    }\n  }\n\n  cancel() {\n    if (this._inProgress) {\n      var _this$settings$onInte, _this$settings3;\n\n      (_this$settings$onInte = (_this$settings3 = this.settings).onInterrupt) === null || _this$settings$onInte === void 0 ? void 0 : _this$settings$onInte.call(_this$settings3, this);\n\n      this._timeline.removeChannel(this._handle);\n\n      this._handle = null;\n      this._inProgress = false;\n    }\n  }\n\n  update() {\n    var _this$settings$onUpda, _this$settings4;\n\n    if (!this._inProgress) {\n      return false;\n    }\n\n    if (this._handle === null) {\n      const {\n        _timeline: timeline,\n        settings\n      } = this;\n      this._handle = timeline.addChannel({\n        delay: timeline.getTime(),\n        duration: settings.duration\n      });\n    }\n\n    this.time = this._timeline.getTime(this._handle);\n\n    this._onUpdate();\n\n    (_this$settings$onUpda = (_this$settings4 = this.settings).onUpdate) === null || _this$settings$onUpda === void 0 ? void 0 : _this$settings$onUpda.call(_this$settings4, this);\n\n    if (this._timeline.isFinished(this._handle)) {\n      this.end();\n    }\n\n    return true;\n  }\n\n  _onUpdate() {}\n\n}\n//# sourceMappingURL=transition.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Transition from '../transitions/transition';\n\nconst noop = () => {};\n\nexport const TRANSITION_EVENTS = {\n  BREAK: 1,\n  SNAP_TO_END: 2,\n  IGNORE: 3\n};\n\nconst DEFAULT_EASING = t => t;\n\nconst DEFAULT_INTERRUPTION = TRANSITION_EVENTS.BREAK;\nexport default class TransitionManager {\n  constructor(opts) {\n    _defineProperty(this, \"getControllerState\", void 0);\n\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"propsInTransition\", void 0);\n\n    _defineProperty(this, \"transition\", void 0);\n\n    _defineProperty(this, \"onViewStateChange\", void 0);\n\n    _defineProperty(this, \"onStateChange\", void 0);\n\n    _defineProperty(this, \"_onTransitionUpdate\", transition => {\n      const {\n        time,\n        settings: {\n          interpolator,\n          startProps,\n          endProps,\n          duration,\n          easing\n        }\n      } = transition;\n      const t = easing(time / duration);\n      const viewport = interpolator.interpolateProps(startProps, endProps, t);\n      this.propsInTransition = this.getControllerState({ ...this.props,\n        ...viewport\n      }).getViewportProps();\n      this.onViewStateChange({\n        viewState: this.propsInTransition,\n        oldViewState: this.props\n      });\n    });\n\n    this.getControllerState = opts.getControllerState;\n    this.propsInTransition = null;\n    this.transition = new Transition(opts.timeline);\n    this.onViewStateChange = opts.onViewStateChange || noop;\n    this.onStateChange = opts.onStateChange || noop;\n  }\n\n  finalize() {\n    this.transition.cancel();\n  }\n\n  getViewportInTransition() {\n    return this.propsInTransition;\n  }\n\n  processViewStateChange(nextProps) {\n    let transitionTriggered = false;\n    const currentProps = this.props;\n    this.props = nextProps;\n\n    if (!currentProps || this._shouldIgnoreViewportChange(currentProps, nextProps)) {\n      return false;\n    }\n\n    if (this._isTransitionEnabled(nextProps)) {\n      let startProps = currentProps;\n\n      if (this.transition.inProgress) {\n        const {\n          interruption,\n          endProps\n        } = this.transition.settings;\n        startProps = { ...currentProps,\n          ...(interruption === TRANSITION_EVENTS.SNAP_TO_END ? endProps : this.propsInTransition || currentProps)\n        };\n      }\n\n      this._triggerTransition(startProps, nextProps);\n\n      transitionTriggered = true;\n    } else {\n      this.transition.cancel();\n    }\n\n    return transitionTriggered;\n  }\n\n  updateTransition() {\n    this.transition.update();\n  }\n\n  _isTransitionEnabled(props) {\n    const {\n      transitionDuration,\n      transitionInterpolator\n    } = props;\n    return (transitionDuration > 0 || transitionDuration === 'auto') && Boolean(transitionInterpolator);\n  }\n\n  _isUpdateDueToCurrentTransition(props) {\n    if (this.transition.inProgress && this.propsInTransition) {\n      return this.transition.settings.interpolator.arePropsEqual(props, this.propsInTransition);\n    }\n\n    return false;\n  }\n\n  _shouldIgnoreViewportChange(currentProps, nextProps) {\n    if (this.transition.inProgress) {\n      return this.transition.settings.interruption === TRANSITION_EVENTS.IGNORE || this._isUpdateDueToCurrentTransition(nextProps);\n    }\n\n    if (this._isTransitionEnabled(nextProps)) {\n      return nextProps.transitionInterpolator.arePropsEqual(currentProps, nextProps);\n    }\n\n    return true;\n  }\n\n  _triggerTransition(startProps, endProps) {\n    const startViewstate = this.getControllerState(startProps);\n    const endViewStateProps = this.getControllerState(endProps).shortestPathFrom(startViewstate);\n    const transitionInterpolator = endProps.transitionInterpolator;\n    const duration = transitionInterpolator.getDuration ? transitionInterpolator.getDuration(startProps, endProps) : endProps.transitionDuration;\n\n    if (duration === 0) {\n      return;\n    }\n\n    const initialProps = transitionInterpolator.initializeProps(startProps, endViewStateProps);\n    this.propsInTransition = {};\n    const transitionSettings = {\n      duration,\n      easing: endProps.transitionEasing || DEFAULT_EASING,\n      interpolator: transitionInterpolator,\n      interruption: endProps.transitionInterruption || DEFAULT_INTERRUPTION,\n      startProps: initialProps.start,\n      endProps: initialProps.end,\n      onStart: endProps.onTransitionStart,\n      onUpdate: this._onTransitionUpdate,\n      onInterrupt: this._onTransitionEnd(endProps.onTransitionInterrupt),\n      onEnd: this._onTransitionEnd(endProps.onTransitionEnd)\n    };\n    this.transition.start(transitionSettings);\n    this.onStateChange({\n      inTransition: true\n    });\n    this.updateTransition();\n  }\n\n  _onTransitionEnd(callback) {\n    return transition => {\n      this.propsInTransition = null;\n      this.onStateChange({\n        inTransition: false,\n        isZooming: false,\n        isPanning: false,\n        isRotating: false\n      });\n      callback === null || callback === void 0 ? void 0 : callback(transition);\n    };\n  }\n\n}\n//# sourceMappingURL=transition-manager.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport TransitionInterpolator from './transition-interpolator';\nimport { lerp } from '@math.gl/core';\nconst DEFAULT_PROPS = ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\nconst DEFAULT_REQUIRED_PROPS = ['longitude', 'latitude', 'zoom'];\nexport default class LinearInterpolator extends TransitionInterpolator {\n  constructor(opts = {}) {\n    const transitionProps = Array.isArray(opts) ? opts : opts.transitionProps;\n    const normalizedOpts = Array.isArray(opts) ? {} : opts;\n    normalizedOpts.transitionProps = Array.isArray(transitionProps) ? {\n      compare: transitionProps,\n      required: transitionProps\n    } : transitionProps || {\n      compare: DEFAULT_PROPS,\n      required: DEFAULT_REQUIRED_PROPS\n    };\n    super(normalizedOpts.transitionProps);\n\n    _defineProperty(this, \"opts\", void 0);\n\n    this.opts = normalizedOpts;\n  }\n\n  initializeProps(startProps, endProps) {\n    const result = super.initializeProps(startProps, endProps);\n    const {\n      makeViewport,\n      around\n    } = this.opts;\n\n    if (makeViewport && around) {\n      const startViewport = makeViewport(startProps);\n      const endViewport = makeViewport(endProps);\n      const aroundPosition = startViewport.unproject(around);\n      result.start.around = around;\n      Object.assign(result.end, {\n        around: endViewport.project(aroundPosition),\n        aroundPosition,\n        width: endProps.width,\n        height: endProps.height\n      });\n    }\n\n    return result;\n  }\n\n  interpolateProps(startProps, endProps, t) {\n    const propsInTransition = {};\n\n    for (const key of this._propsToExtract) {\n      propsInTransition[key] = lerp(startProps[key] || 0, endProps[key] || 0, t);\n    }\n\n    if (endProps.aroundPosition && this.opts.makeViewport) {\n      const viewport = this.opts.makeViewport({ ...endProps,\n        ...propsInTransition\n      });\n      Object.assign(propsInTransition, viewport.panByPosition(endProps.aroundPosition, lerp(startProps.around, endProps.around, t)));\n    }\n\n    return propsInTransition;\n  }\n\n}\n//# sourceMappingURL=linear-interpolator.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { equals } from '@math.gl/core';\nimport assert from '../utils/assert';\nexport default class TransitionInterpolator {\n  constructor(opts) {\n    _defineProperty(this, \"_propsToCompare\", void 0);\n\n    _defineProperty(this, \"_propsToExtract\", void 0);\n\n    _defineProperty(this, \"_requiredProps\", void 0);\n\n    const {\n      compare,\n      extract,\n      required\n    } = opts;\n    this._propsToCompare = compare;\n    this._propsToExtract = extract || compare;\n    this._requiredProps = required;\n  }\n\n  arePropsEqual(currentProps, nextProps) {\n    for (const key of this._propsToCompare) {\n      if (!(key in currentProps) || !(key in nextProps) || !equals(currentProps[key], nextProps[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  initializeProps(startProps, endProps) {\n    const startViewStateProps = {};\n    const endViewStateProps = {};\n\n    for (const key of this._propsToExtract) {\n      if (key in startProps || key in endProps) {\n        startViewStateProps[key] = startProps[key];\n        endViewStateProps[key] = endProps[key];\n      }\n    }\n\n    this._checkRequiredProps(startViewStateProps);\n\n    this._checkRequiredProps(endViewStateProps);\n\n    return {\n      start: startViewStateProps,\n      end: endViewStateProps\n    };\n  }\n\n  getDuration(startProps, endProps) {\n    return endProps.transitionDuration;\n  }\n\n  _checkRequiredProps(props) {\n    if (!this._requiredProps) {\n      return;\n    }\n\n    this._requiredProps.forEach(propName => {\n      const value = props[propName];\n      assert(Number.isFinite(value) || Array.isArray(value), \"\".concat(propName, \" is required for transition\"));\n    });\n  }\n\n}\n//# sourceMappingURL=transition-interpolator.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport TransitionManager from './transition-manager';\nimport LinearInterpolator from '../transitions/linear-interpolator';\nconst NO_TRANSITION_PROPS = {\n  transitionDuration: 0\n};\nconst DEFAULT_INERTIA = 300;\n\nconst INERTIA_EASING = t => 1 - (1 - t) * (1 - t);\n\nconst EVENT_TYPES = {\n  WHEEL: ['wheel'],\n  PAN: ['panstart', 'panmove', 'panend'],\n  PINCH: ['pinchstart', 'pinchmove', 'pinchend'],\n  TRIPLE_PAN: ['tripanstart', 'tripanmove', 'tripanend'],\n  DOUBLE_TAP: ['doubletap'],\n  KEYBOARD: ['keydown']\n};\nconst pinchEventWorkaround = {};\nexport default class Controller {\n  constructor(opts) {\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"state\", {});\n\n    _defineProperty(this, \"transitionManager\", void 0);\n\n    _defineProperty(this, \"eventManager\", void 0);\n\n    _defineProperty(this, \"onViewStateChange\", void 0);\n\n    _defineProperty(this, \"onStateChange\", void 0);\n\n    _defineProperty(this, \"makeViewport\", void 0);\n\n    _defineProperty(this, \"_controllerState\", void 0);\n\n    _defineProperty(this, \"_events\", {});\n\n    _defineProperty(this, \"_interactionState\", {\n      isDragging: false\n    });\n\n    _defineProperty(this, \"_customEvents\", []);\n\n    _defineProperty(this, \"_eventStartBlocked\", null);\n\n    _defineProperty(this, \"_panMove\", false);\n\n    _defineProperty(this, \"invertPan\", false);\n\n    _defineProperty(this, \"dragMode\", 'rotate');\n\n    _defineProperty(this, \"inertia\", 0);\n\n    _defineProperty(this, \"scrollZoom\", true);\n\n    _defineProperty(this, \"dragPan\", true);\n\n    _defineProperty(this, \"dragRotate\", true);\n\n    _defineProperty(this, \"doubleClickZoom\", true);\n\n    _defineProperty(this, \"touchZoom\", true);\n\n    _defineProperty(this, \"touchRotate\", false);\n\n    _defineProperty(this, \"keyboard\", true);\n\n    this.transitionManager = new TransitionManager({ ...opts,\n      getControllerState: props => new this.ControllerState(props),\n      onViewStateChange: this._onTransition.bind(this),\n      onStateChange: this._setInteractionState.bind(this)\n    });\n    this.handleEvent = this.handleEvent.bind(this);\n    this.eventManager = opts.eventManager;\n\n    this.onViewStateChange = opts.onViewStateChange || (() => {});\n\n    this.onStateChange = opts.onStateChange || (() => {});\n\n    this.makeViewport = opts.makeViewport;\n  }\n\n  set events(customEvents) {\n    this.toggleEvents(this._customEvents, false);\n    this.toggleEvents(customEvents, true);\n    this._customEvents = customEvents;\n\n    if (this.props) {\n      this.setProps(this.props);\n    }\n  }\n\n  finalize() {\n    for (const eventName in this._events) {\n      if (this._events[eventName]) {\n        var _this$eventManager;\n\n        (_this$eventManager = this.eventManager) === null || _this$eventManager === void 0 ? void 0 : _this$eventManager.off(eventName, this.handleEvent);\n      }\n    }\n\n    this.transitionManager.finalize();\n  }\n\n  handleEvent(event) {\n    this._controllerState = undefined;\n    const eventStartBlocked = this._eventStartBlocked;\n\n    switch (event.type) {\n      case 'panstart':\n        return eventStartBlocked ? false : this._onPanStart(event);\n\n      case 'panmove':\n        return this._onPan(event);\n\n      case 'panend':\n        return this._onPanEnd(event);\n\n      case 'pinchstart':\n        return eventStartBlocked ? false : this._onPinchStart(event);\n\n      case 'pinchmove':\n        return this._onPinch(event);\n\n      case 'pinchend':\n        return this._onPinchEnd(event);\n\n      case 'tripanstart':\n        return eventStartBlocked ? false : this._onTriplePanStart(event);\n\n      case 'tripanmove':\n        return this._onTriplePan(event);\n\n      case 'tripanend':\n        return this._onTriplePanEnd(event);\n\n      case 'doubletap':\n        return this._onDoubleTap(event);\n\n      case 'wheel':\n        return this._onWheel(event);\n\n      case 'keydown':\n        return this._onKeyDown(event);\n\n      default:\n        return false;\n    }\n  }\n\n  get controllerState() {\n    this._controllerState = this._controllerState || new this.ControllerState({\n      makeViewport: this.makeViewport,\n      ...this.props,\n      ...this.state\n    });\n    return this._controllerState;\n  }\n\n  getCenter(event) {\n    const {\n      x,\n      y\n    } = this.props;\n    const {\n      offsetCenter\n    } = event;\n    return [offsetCenter.x - x, offsetCenter.y - y];\n  }\n\n  isPointInBounds(pos, event) {\n    const {\n      width,\n      height\n    } = this.props;\n\n    if (event && event.handled) {\n      return false;\n    }\n\n    const inside = pos[0] >= 0 && pos[0] <= width && pos[1] >= 0 && pos[1] <= height;\n\n    if (inside && event) {\n      event.stopPropagation();\n    }\n\n    return inside;\n  }\n\n  isFunctionKeyPressed(event) {\n    const {\n      srcEvent\n    } = event;\n    return Boolean(srcEvent.metaKey || srcEvent.altKey || srcEvent.ctrlKey || srcEvent.shiftKey);\n  }\n\n  isDragging() {\n    return this._interactionState.isDragging || false;\n  }\n\n  blockEvents(timeout) {\n    const timer = setTimeout(() => {\n      if (this._eventStartBlocked === timer) {\n        this._eventStartBlocked = null;\n      }\n    }, timeout);\n    this._eventStartBlocked = timer;\n  }\n\n  setProps(props) {\n    if (props.dragMode) {\n      this.dragMode = props.dragMode;\n    }\n\n    this.props = props;\n\n    if (!('transitionInterpolator' in props)) {\n      props.transitionInterpolator = this._getTransitionProps().transitionInterpolator;\n    }\n\n    this.transitionManager.processViewStateChange(props);\n    const {\n      inertia\n    } = props;\n    this.inertia = Number.isFinite(inertia) ? inertia : inertia === true ? DEFAULT_INERTIA : 0;\n    const {\n      scrollZoom = true,\n      dragPan = true,\n      dragRotate = true,\n      doubleClickZoom = true,\n      touchZoom = true,\n      touchRotate = false,\n      keyboard = true\n    } = props;\n    const isInteractive = Boolean(this.onViewStateChange);\n    this.toggleEvents(EVENT_TYPES.WHEEL, isInteractive && scrollZoom);\n    this.toggleEvents(EVENT_TYPES.PAN, isInteractive && (dragPan || dragRotate));\n    this.toggleEvents(EVENT_TYPES.PINCH, isInteractive && (touchZoom || touchRotate));\n    this.toggleEvents(EVENT_TYPES.TRIPLE_PAN, isInteractive && touchRotate);\n    this.toggleEvents(EVENT_TYPES.DOUBLE_TAP, isInteractive && doubleClickZoom);\n    this.toggleEvents(EVENT_TYPES.KEYBOARD, isInteractive && keyboard);\n    this.scrollZoom = scrollZoom;\n    this.dragPan = dragPan;\n    this.dragRotate = dragRotate;\n    this.doubleClickZoom = doubleClickZoom;\n    this.touchZoom = touchZoom;\n    this.touchRotate = touchRotate;\n    this.keyboard = keyboard;\n  }\n\n  updateTransition() {\n    this.transitionManager.updateTransition();\n  }\n\n  toggleEvents(eventNames, enabled) {\n    if (this.eventManager) {\n      eventNames.forEach(eventName => {\n        if (this._events[eventName] !== enabled) {\n          this._events[eventName] = enabled;\n\n          if (enabled) {\n            this.eventManager.on(eventName, this.handleEvent);\n          } else {\n            this.eventManager.off(eventName, this.handleEvent);\n          }\n        }\n      });\n    }\n  }\n\n  updateViewport(newControllerState, extraProps = null, interactionState = {}) {\n    const viewState = { ...newControllerState.getViewportProps(),\n      ...extraProps\n    };\n    const changed = this.controllerState !== newControllerState;\n    this.state = newControllerState.getState();\n\n    this._setInteractionState(interactionState);\n\n    if (changed) {\n      const oldViewState = this.controllerState && this.controllerState.getViewportProps();\n\n      if (this.onViewStateChange) {\n        this.onViewStateChange({\n          viewState,\n          interactionState: this._interactionState,\n          oldViewState\n        });\n      }\n    }\n  }\n\n  _onTransition(params) {\n    this.onViewStateChange({ ...params,\n      interactionState: this._interactionState\n    });\n  }\n\n  _setInteractionState(newStates) {\n    Object.assign(this._interactionState, newStates);\n    this.onStateChange(this._interactionState);\n  }\n\n  _onPanStart(event) {\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    let alternateMode = this.isFunctionKeyPressed(event) || event.rightButton || false;\n\n    if (this.invertPan || this.dragMode === 'pan') {\n      alternateMode = !alternateMode;\n    }\n\n    const newControllerState = this.controllerState[alternateMode ? 'panStart' : 'rotateStart']({\n      pos\n    });\n    this._panMove = alternateMode;\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true\n    });\n    return true;\n  }\n\n  _onPan(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    return this._panMove ? this._onPanMove(event) : this._onPanRotate(event);\n  }\n\n  _onPanEnd(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    return this._panMove ? this._onPanMoveEnd(event) : this._onPanRotateEnd(event);\n  }\n\n  _onPanMove(event) {\n    if (!this.dragPan) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n    const newControllerState = this.controllerState.pan({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isPanning: true\n    });\n    return true;\n  }\n\n  _onPanMoveEnd(event) {\n    const {\n      inertia\n    } = this;\n\n    if (this.dragPan && inertia && event.velocity) {\n      const pos = this.getCenter(event);\n      const endPos = [pos[0] + event.velocityX * inertia / 2, pos[1] + event.velocityY * inertia / 2];\n      const newControllerState = this.controllerState.pan({\n        pos: endPos\n      }).panEnd();\n      this.updateViewport(newControllerState, { ...this._getTransitionProps(),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isPanning: true\n      });\n    } else {\n      const newControllerState = this.controllerState.panEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isPanning: false\n      });\n    }\n\n    return true;\n  }\n\n  _onPanRotate(event) {\n    if (!this.dragRotate) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n    const newControllerState = this.controllerState.rotate({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isRotating: true\n    });\n    return true;\n  }\n\n  _onPanRotateEnd(event) {\n    const {\n      inertia\n    } = this;\n\n    if (this.dragRotate && inertia && event.velocity) {\n      const pos = this.getCenter(event);\n      const endPos = [pos[0] + event.velocityX * inertia / 2, pos[1] + event.velocityY * inertia / 2];\n      const newControllerState = this.controllerState.rotate({\n        pos: endPos\n      }).rotateEnd();\n      this.updateViewport(newControllerState, { ...this._getTransitionProps(),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isRotating: true\n      });\n    } else {\n      const newControllerState = this.controllerState.rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isRotating: false\n      });\n    }\n\n    return true;\n  }\n\n  _onWheel(event) {\n    if (!this.scrollZoom) {\n      return false;\n    }\n\n    event.srcEvent.preventDefault();\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const {\n      speed = 0.01,\n      smooth = false\n    } = this.scrollZoom === true ? {} : this.scrollZoom;\n    const {\n      delta\n    } = event;\n    let scale = 2 / (1 + Math.exp(-Math.abs(delta * speed)));\n\n    if (delta < 0 && scale !== 0) {\n      scale = 1 / scale;\n    }\n\n    const newControllerState = this.controllerState.zoom({\n      pos,\n      scale\n    });\n    this.updateViewport(newControllerState, { ...this._getTransitionProps({\n        around: pos\n      }),\n      transitionDuration: smooth ? 250 : 1\n    }, {\n      isZooming: true,\n      isPanning: true\n    });\n    return true;\n  }\n\n  _onTriplePanStart(event) {\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const newControllerState = this.controllerState.rotateStart({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true\n    });\n    return true;\n  }\n\n  _onTriplePan(event) {\n    if (!this.touchRotate) {\n      return false;\n    }\n\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n    pos[0] -= event.deltaX;\n    const newControllerState = this.controllerState.rotate({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isRotating: true\n    });\n    return true;\n  }\n\n  _onTriplePanEnd(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    const {\n      inertia\n    } = this;\n\n    if (this.touchRotate && inertia && event.velocityY) {\n      const pos = this.getCenter(event);\n      const endPos = [pos[0], pos[1] += event.velocityY * inertia / 2];\n      const newControllerState = this.controllerState.rotate({\n        pos: endPos\n      });\n      this.updateViewport(newControllerState, { ...this._getTransitionProps(),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isRotating: true\n      });\n      this.blockEvents(inertia);\n    } else {\n      const newControllerState = this.controllerState.rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isRotating: false\n      });\n    }\n\n    return true;\n  }\n\n  _onPinchStart(event) {\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const newControllerState = this.controllerState.zoomStart({\n      pos\n    }).rotateStart({\n      pos\n    });\n    pinchEventWorkaround._startPinchRotation = event.rotation;\n    pinchEventWorkaround._lastPinchEvent = event;\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true\n    });\n    return true;\n  }\n\n  _onPinch(event) {\n    if (!this.touchZoom && !this.touchRotate) {\n      return false;\n    }\n\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    let newControllerState = this.controllerState;\n\n    if (this.touchZoom) {\n      const {\n        scale\n      } = event;\n      const pos = this.getCenter(event);\n      newControllerState = newControllerState.zoom({\n        pos,\n        scale\n      });\n    }\n\n    if (this.touchRotate) {\n      const {\n        rotation\n      } = event;\n      newControllerState = newControllerState.rotate({\n        deltaAngleX: pinchEventWorkaround._startPinchRotation - rotation\n      });\n    }\n\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isPanning: this.touchZoom,\n      isZooming: this.touchZoom,\n      isRotating: this.touchRotate\n    });\n    pinchEventWorkaround._lastPinchEvent = event;\n    return true;\n  }\n\n  _onPinchEnd(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    const {\n      inertia\n    } = this;\n    const {\n      _lastPinchEvent\n    } = pinchEventWorkaround;\n\n    if (this.touchZoom && inertia && _lastPinchEvent && event.scale !== _lastPinchEvent.scale) {\n      const pos = this.getCenter(event);\n      let newControllerState = this.controllerState.rotateEnd();\n      const z = Math.log2(event.scale);\n\n      const velocityZ = (z - Math.log2(_lastPinchEvent.scale)) / (event.deltaTime - _lastPinchEvent.deltaTime);\n\n      const endScale = Math.pow(2, z + velocityZ * inertia / 2);\n      newControllerState = newControllerState.zoom({\n        pos,\n        scale: endScale\n      }).zoomEnd();\n      this.updateViewport(newControllerState, { ...this._getTransitionProps({\n          around: pos\n        }),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isPanning: this.touchZoom,\n        isZooming: this.touchZoom,\n        isRotating: false\n      });\n      this.blockEvents(inertia);\n    } else {\n      const newControllerState = this.controllerState.zoomEnd().rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isPanning: false,\n        isZooming: false,\n        isRotating: false\n      });\n    }\n\n    pinchEventWorkaround._startPinchRotation = null;\n    pinchEventWorkaround._lastPinchEvent = null;\n    return true;\n  }\n\n  _onDoubleTap(event) {\n    if (!this.doubleClickZoom) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const isZoomOut = this.isFunctionKeyPressed(event);\n    const newControllerState = this.controllerState.zoom({\n      pos,\n      scale: isZoomOut ? 0.5 : 2\n    });\n    this.updateViewport(newControllerState, this._getTransitionProps({\n      around: pos\n    }), {\n      isZooming: true,\n      isPanning: true\n    });\n    this.blockEvents(100);\n    return true;\n  }\n\n  _onKeyDown(event) {\n    if (!this.keyboard) {\n      return false;\n    }\n\n    const funcKey = this.isFunctionKeyPressed(event);\n    const {\n      zoomSpeed,\n      moveSpeed,\n      rotateSpeedX,\n      rotateSpeedY\n    } = this.keyboard === true ? {} : this.keyboard;\n    const {\n      controllerState\n    } = this;\n    let newControllerState;\n    const interactionState = {};\n\n    switch (event.srcEvent.code) {\n      case 'Minus':\n        newControllerState = funcKey ? controllerState.zoomOut(zoomSpeed).zoomOut(zoomSpeed) : controllerState.zoomOut(zoomSpeed);\n        interactionState.isZooming = true;\n        break;\n\n      case 'Equal':\n        newControllerState = funcKey ? controllerState.zoomIn(zoomSpeed).zoomIn(zoomSpeed) : controllerState.zoomIn(zoomSpeed);\n        interactionState.isZooming = true;\n        break;\n\n      case 'ArrowLeft':\n        if (funcKey) {\n          newControllerState = controllerState.rotateLeft(rotateSpeedX);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveLeft(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      case 'ArrowRight':\n        if (funcKey) {\n          newControllerState = controllerState.rotateRight(rotateSpeedX);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveRight(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      case 'ArrowUp':\n        if (funcKey) {\n          newControllerState = controllerState.rotateUp(rotateSpeedY);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveUp(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      case 'ArrowDown':\n        if (funcKey) {\n          newControllerState = controllerState.rotateDown(rotateSpeedY);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveDown(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      default:\n        return false;\n    }\n\n    this.updateViewport(newControllerState, this._getTransitionProps(), interactionState);\n    return true;\n  }\n\n  _getTransitionProps(opts) {\n    const {\n      transition\n    } = this;\n\n    if (!transition || !transition.transitionInterpolator) {\n      return NO_TRANSITION_PROPS;\n    }\n\n    return opts ? { ...transition,\n      transitionInterpolator: new LinearInterpolator({ ...opts,\n        ...transition.transitionInterpolator.opts,\n        makeViewport: this.controllerState.makeViewport\n      })\n    } : transition;\n  }\n\n}\n//# sourceMappingURL=controller.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport default class ViewState {\n  constructor(props, state) {\n    _defineProperty(this, \"_viewportProps\", void 0);\n\n    _defineProperty(this, \"_state\", void 0);\n\n    this._viewportProps = this.applyConstraints(props);\n    this._state = state;\n  }\n\n  getViewportProps() {\n    return this._viewportProps;\n  }\n\n  getState() {\n    return this._state;\n  }\n\n}\n//# sourceMappingURL=view-state.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { clamp } from '@math.gl/core';\nimport Controller from './controller';\nimport ViewState from './view-state';\nimport { normalizeViewportProps } from '@math.gl/web-mercator';\nimport assert from '../utils/assert';\nimport LinearInterpolator from '../transitions/linear-interpolator';\nconst PITCH_MOUSE_THRESHOLD = 5;\nconst PITCH_ACCEL = 1.2;\nexport class MapState extends ViewState {\n  constructor(options) {\n    const {\n      width,\n      height,\n      latitude,\n      longitude,\n      zoom,\n      bearing = 0,\n      pitch = 0,\n      altitude = 1.5,\n      position = [0, 0, 0],\n      maxZoom = 20,\n      minZoom = 0,\n      maxPitch = 60,\n      minPitch = 0,\n      startPanLngLat,\n      startZoomLngLat,\n      startRotatePos,\n      startBearing,\n      startPitch,\n      startZoom,\n      normalize = true\n    } = options;\n    assert(Number.isFinite(longitude));\n    assert(Number.isFinite(latitude));\n    assert(Number.isFinite(zoom));\n    super({\n      width,\n      height,\n      latitude,\n      longitude,\n      zoom,\n      bearing,\n      pitch,\n      altitude,\n      maxZoom,\n      minZoom,\n      maxPitch,\n      minPitch,\n      normalize,\n      position\n    }, {\n      startPanLngLat,\n      startZoomLngLat,\n      startRotatePos,\n      startBearing,\n      startPitch,\n      startZoom\n    });\n\n    _defineProperty(this, \"makeViewport\", void 0);\n\n    this.makeViewport = options.makeViewport;\n  }\n\n  panStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startPanLngLat: this._unproject(pos)\n    });\n  }\n\n  pan({\n    pos,\n    startPos\n  }) {\n    const startPanLngLat = this.getState().startPanLngLat || this._unproject(startPos);\n\n    if (!startPanLngLat) {\n      return this;\n    }\n\n    const viewport = this.makeViewport(this.getViewportProps());\n    const newProps = viewport.panByPosition(startPanLngLat, pos);\n    return this._getUpdatedState(newProps);\n  }\n\n  panEnd() {\n    return this._getUpdatedState({\n      startPanLngLat: null\n    });\n  }\n\n  rotateStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startRotatePos: pos,\n      startBearing: this.getViewportProps().bearing,\n      startPitch: this.getViewportProps().pitch\n    });\n  }\n\n  rotate({\n    pos,\n    deltaAngleX = 0,\n    deltaAngleY = 0\n  }) {\n    const {\n      startRotatePos,\n      startBearing,\n      startPitch\n    } = this.getState();\n\n    if (!startRotatePos || startBearing === undefined || startPitch === undefined) {\n      return this;\n    }\n\n    let newRotation;\n\n    if (pos) {\n      newRotation = this._getNewRotation(pos, startRotatePos, startPitch, startBearing);\n    } else {\n      newRotation = {\n        bearing: startBearing + deltaAngleX,\n        pitch: startPitch + deltaAngleY\n      };\n    }\n\n    return this._getUpdatedState(newRotation);\n  }\n\n  rotateEnd() {\n    return this._getUpdatedState({\n      startBearing: null,\n      startPitch: null\n    });\n  }\n\n  zoomStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startZoomLngLat: this._unproject(pos),\n      startZoom: this.getViewportProps().zoom\n    });\n  }\n\n  zoom({\n    pos,\n    startPos,\n    scale\n  }) {\n    let {\n      startZoom,\n      startZoomLngLat\n    } = this.getState();\n\n    if (!startZoomLngLat) {\n      startZoom = this.getViewportProps().zoom;\n      startZoomLngLat = this._unproject(startPos) || this._unproject(pos);\n    }\n\n    if (!startZoomLngLat) {\n      return this;\n    }\n\n    const {\n      maxZoom,\n      minZoom\n    } = this.getViewportProps();\n    let zoom = startZoom + Math.log2(scale);\n    zoom = clamp(zoom, minZoom, maxZoom);\n    const zoomedViewport = this.makeViewport({ ...this.getViewportProps(),\n      zoom\n    });\n    return this._getUpdatedState({\n      zoom,\n      ...zoomedViewport.panByPosition(startZoomLngLat, pos)\n    });\n  }\n\n  zoomEnd() {\n    return this._getUpdatedState({\n      startZoomLngLat: null,\n      startZoom: null\n    });\n  }\n\n  zoomIn(speed = 2) {\n    return this._zoomFromCenter(speed);\n  }\n\n  zoomOut(speed = 2) {\n    return this._zoomFromCenter(1 / speed);\n  }\n\n  moveLeft(speed = 100) {\n    return this._panFromCenter([speed, 0]);\n  }\n\n  moveRight(speed = 100) {\n    return this._panFromCenter([-speed, 0]);\n  }\n\n  moveUp(speed = 100) {\n    return this._panFromCenter([0, speed]);\n  }\n\n  moveDown(speed = 100) {\n    return this._panFromCenter([0, -speed]);\n  }\n\n  rotateLeft(speed = 15) {\n    return this._getUpdatedState({\n      bearing: this.getViewportProps().bearing - speed\n    });\n  }\n\n  rotateRight(speed = 15) {\n    return this._getUpdatedState({\n      bearing: this.getViewportProps().bearing + speed\n    });\n  }\n\n  rotateUp(speed = 10) {\n    return this._getUpdatedState({\n      pitch: this.getViewportProps().pitch + speed\n    });\n  }\n\n  rotateDown(speed = 10) {\n    return this._getUpdatedState({\n      pitch: this.getViewportProps().pitch - speed\n    });\n  }\n\n  shortestPathFrom(viewState) {\n    const fromProps = viewState.getViewportProps();\n    const props = { ...this.getViewportProps()\n    };\n    const {\n      bearing,\n      longitude\n    } = props;\n\n    if (Math.abs(bearing - fromProps.bearing) > 180) {\n      props.bearing = bearing < 0 ? bearing + 360 : bearing - 360;\n    }\n\n    if (Math.abs(longitude - fromProps.longitude) > 180) {\n      props.longitude = longitude < 0 ? longitude + 360 : longitude - 360;\n    }\n\n    return props;\n  }\n\n  applyConstraints(props) {\n    const {\n      maxZoom,\n      minZoom,\n      zoom\n    } = props;\n    props.zoom = clamp(zoom, minZoom, maxZoom);\n    const {\n      maxPitch,\n      minPitch,\n      pitch\n    } = props;\n    props.pitch = clamp(pitch, minPitch, maxPitch);\n    const {\n      normalize = true\n    } = props;\n\n    if (normalize) {\n      Object.assign(props, normalizeViewportProps(props));\n    }\n\n    return props;\n  }\n\n  _zoomFromCenter(scale) {\n    const {\n      width,\n      height\n    } = this.getViewportProps();\n    return this.zoom({\n      pos: [width / 2, height / 2],\n      scale\n    });\n  }\n\n  _panFromCenter(offset) {\n    const {\n      width,\n      height\n    } = this.getViewportProps();\n    return this.pan({\n      startPos: [width / 2, height / 2],\n      pos: [width / 2 + offset[0], height / 2 + offset[1]]\n    });\n  }\n\n  _getUpdatedState(newProps) {\n    return new this.constructor({\n      makeViewport: this.makeViewport,\n      ...this.getViewportProps(),\n      ...this.getState(),\n      ...newProps\n    });\n  }\n\n  _unproject(pos) {\n    const viewport = this.makeViewport(this.getViewportProps());\n    return pos && viewport.unproject(pos);\n  }\n\n  _getNewRotation(pos, startPos, startPitch, startBearing) {\n    const deltaX = pos[0] - startPos[0];\n    const deltaY = pos[1] - startPos[1];\n    const centerY = pos[1];\n    const startY = startPos[1];\n    const {\n      width,\n      height\n    } = this.getViewportProps();\n    const deltaScaleX = deltaX / width;\n    let deltaScaleY = 0;\n\n    if (deltaY > 0) {\n      if (Math.abs(height - startY) > PITCH_MOUSE_THRESHOLD) {\n        deltaScaleY = deltaY / (startY - height) * PITCH_ACCEL;\n      }\n    } else if (deltaY < 0) {\n      if (startY > PITCH_MOUSE_THRESHOLD) {\n        deltaScaleY = 1 - centerY / startY;\n      }\n    }\n\n    deltaScaleY = clamp(deltaScaleY, -1, 1);\n    const {\n      minPitch,\n      maxPitch\n    } = this.getViewportProps();\n    const bearing = startBearing + 180 * deltaScaleX;\n    let pitch = startPitch;\n\n    if (deltaScaleY > 0) {\n      pitch = startPitch + deltaScaleY * (maxPitch - startPitch);\n    } else if (deltaScaleY < 0) {\n      pitch = startPitch - deltaScaleY * (minPitch - startPitch);\n    }\n\n    return {\n      pitch,\n      bearing\n    };\n  }\n\n}\nexport default class MapController extends Controller {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ControllerState\", MapState);\n\n    _defineProperty(this, \"transition\", {\n      transitionDuration: 300,\n      transitionInterpolator: new LinearInterpolator({\n        transitionProps: {\n          compare: ['longitude', 'latitude', 'zoom', 'bearing', 'pitch', 'position'],\n          required: ['longitude', 'latitude', 'zoom']\n        }\n      })\n    });\n\n    _defineProperty(this, \"dragMode\", 'pan');\n  }\n\n  setProps(props) {\n    props.position = props.position || [0, 0, 0];\n    const oldProps = this.props;\n    super.setProps(props);\n    const dimensionChanged = !oldProps || oldProps.height !== props.height;\n\n    if (dimensionChanged) {\n      this.updateViewport(new this.ControllerState({\n        makeViewport: this.makeViewport,\n        ...props,\n        ...this.state\n      }));\n    }\n  }\n\n}\n//# sourceMappingURL=map-controller.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport View from './view';\nimport WebMercatorViewport from '../viewports/web-mercator-viewport';\nimport MapController from '../controllers/map-controller';\nexport default class MapView extends View {\n  get ViewportType() {\n    return WebMercatorViewport;\n  }\n\n  get ControllerType() {\n    return MapController;\n  }\n\n}\n\n_defineProperty(MapView, \"displayName\", 'MapView');\n//# sourceMappingURL=map-view.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Framebuffer, Texture2D, withParameters } from '@luma.gl/core';\nimport { OPERATION } from '../lib/constants';\nimport LayersPass from './layers-pass';\nexport default class MaskPass extends LayersPass {\n  constructor(gl, props) {\n    super(gl, props);\n\n    _defineProperty(this, \"maskMap\", void 0);\n\n    _defineProperty(this, \"fbo\", void 0);\n\n    const {\n      mapSize = 2048\n    } = props;\n    this.maskMap = new Texture2D(gl, {\n      width: mapSize,\n      height: mapSize,\n      parameters: {\n        [10241]: 9729,\n        [10240]: 9729,\n        [10242]: 33071,\n        [10243]: 33071\n      }\n    });\n    this.fbo = new Framebuffer(gl, {\n      id: 'maskmap',\n      width: mapSize,\n      height: mapSize,\n      attachments: {\n        [36064]: this.maskMap\n      }\n    });\n  }\n\n  render(options) {\n    const gl = this.gl;\n    const colorMask = [false, false, false, false];\n    colorMask[options.channel] = true;\n    return withParameters(gl, {\n      clearColor: [255, 255, 255, 255],\n      blend: true,\n      blendFunc: [0, 1],\n      blendEquation: 32778,\n      colorMask,\n      depthTest: false\n    }, () => super.render({ ...options,\n      target: this.fbo,\n      pass: 'mask'\n    }));\n  }\n\n  shouldDrawLayer(layer) {\n    return layer.props.operation === OPERATION.MASK;\n  }\n\n  delete() {\n    this.fbo.delete();\n    this.maskMap.delete();\n  }\n\n}\n//# sourceMappingURL=mask-pass.js.map","import Viewport from '../viewports/viewport';\nimport { Matrix4, clamp } from '@math.gl/core';\nimport { pixelsToWorld } from '@math.gl/web-mercator';\nimport * as vec2 from 'gl-matrix/vec2';\nconst viewMatrix = new Matrix4().lookAt({\n  eye: [0, 0, 1]\n});\n\nfunction getProjectionMatrix({\n  width,\n  height,\n  near,\n  far,\n  padding\n}) {\n  let left = -width / 2;\n  let right = width / 2;\n  let bottom = -height / 2;\n  let top = height / 2;\n\n  if (padding) {\n    const {\n      left: l = 0,\n      right: r = 0,\n      top: t = 0,\n      bottom: b = 0\n    } = padding;\n    const offsetX = clamp((l + width - r) / 2, 0, width) - width / 2;\n    const offsetY = clamp((t + height - b) / 2, 0, height) - height / 2;\n    left -= offsetX;\n    right -= offsetX;\n    bottom += offsetY;\n    top += offsetY;\n  }\n\n  return new Matrix4().ortho({\n    left,\n    right,\n    bottom,\n    top,\n    near,\n    far\n  });\n}\n\nexport default class OrthographicViewport extends Viewport {\n  constructor(props) {\n    const {\n      width,\n      height,\n      near = 0.1,\n      far = 1000,\n      zoom = 0,\n      target = [0, 0, 0],\n      padding = null,\n      flipY = true\n    } = props;\n    const zoomX = Array.isArray(zoom) ? zoom[0] : zoom;\n    const zoomY = Array.isArray(zoom) ? zoom[1] : zoom;\n    const zoom_ = Math.min(zoomX, zoomY);\n    const scale = Math.pow(2, zoom_);\n    let distanceScales;\n\n    if (zoomX !== zoomY) {\n      const scaleX = Math.pow(2, zoomX);\n      const scaleY = Math.pow(2, zoomY);\n      distanceScales = {\n        unitsPerMeter: [scaleX / scale, scaleY / scale, 1],\n        metersPerUnit: [scale / scaleX, scale / scaleY, 1]\n      };\n    }\n\n    super({ ...props,\n      longitude: undefined,\n      position: target,\n      viewMatrix: viewMatrix.clone().scale([scale, scale * (flipY ? -1 : 1), scale]),\n      projectionMatrix: getProjectionMatrix({\n        width: width || 1,\n        height: height || 1,\n        padding,\n        near,\n        far\n      }),\n      zoom: zoom_,\n      distanceScales\n    });\n  }\n\n  projectFlat([X, Y]) {\n    const {\n      unitsPerMeter\n    } = this.distanceScales;\n    return [X * unitsPerMeter[0], Y * unitsPerMeter[1]];\n  }\n\n  unprojectFlat([x, y]) {\n    const {\n      metersPerUnit\n    } = this.distanceScales;\n    return [x * metersPerUnit[0], y * metersPerUnit[1]];\n  }\n\n  panByPosition(coords, pixel) {\n    const fromLocation = pixelsToWorld(pixel, this.pixelUnprojectionMatrix);\n    const toLocation = this.projectFlat(coords);\n    const translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n    const newCenter = vec2.add([], this.center, translate);\n    return {\n      target: this.unprojectFlat(newCenter)\n    };\n  }\n\n}\n//# sourceMappingURL=orthographic-viewport.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { clamp } from '@math.gl/core';\nimport Controller from './controller';\nimport ViewState from './view-state';\nimport { mod } from '../utils/math-utils';\nimport LinearInterpolator from '../transitions/linear-interpolator';\nexport class OrbitState extends ViewState {\n  constructor(options) {\n    const {\n      width,\n      height,\n      rotationX = 0,\n      rotationOrbit = 0,\n      target = [0, 0, 0],\n      zoom = 0,\n      minRotationX = -90,\n      maxRotationX = 90,\n      minZoom = -Infinity,\n      maxZoom = Infinity,\n      startPanPosition,\n      startRotatePos,\n      startRotationX,\n      startRotationOrbit,\n      startZoomPosition,\n      startZoom\n    } = options;\n    super({\n      width,\n      height,\n      rotationX,\n      rotationOrbit,\n      target,\n      zoom,\n      minRotationX,\n      maxRotationX,\n      minZoom,\n      maxZoom\n    }, {\n      startPanPosition,\n      startRotatePos,\n      startRotationX,\n      startRotationOrbit,\n      startZoomPosition,\n      startZoom\n    });\n\n    _defineProperty(this, \"makeViewport\", void 0);\n\n    this.makeViewport = options.makeViewport;\n  }\n\n  panStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startPanPosition: this._unproject(pos)\n    });\n  }\n\n  pan({\n    pos,\n    startPosition\n  }) {\n    const startPanPosition = this.getState().startPanPosition || startPosition;\n\n    if (!startPanPosition) {\n      return this;\n    }\n\n    const viewport = this.makeViewport(this.getViewportProps());\n    const newProps = viewport.panByPosition(startPanPosition, pos);\n    return this._getUpdatedState(newProps);\n  }\n\n  panEnd() {\n    return this._getUpdatedState({\n      startPanPosition: null\n    });\n  }\n\n  rotateStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startRotatePos: pos,\n      startRotationX: this.getViewportProps().rotationX,\n      startRotationOrbit: this.getViewportProps().rotationOrbit\n    });\n  }\n\n  rotate({\n    pos,\n    deltaAngleX = 0,\n    deltaAngleY = 0\n  }) {\n    const {\n      startRotatePos,\n      startRotationX,\n      startRotationOrbit\n    } = this.getState();\n    const {\n      width,\n      height\n    } = this.getViewportProps();\n\n    if (!startRotatePos || startRotationX === undefined || startRotationOrbit === undefined) {\n      return this;\n    }\n\n    let newRotation;\n\n    if (pos) {\n      let deltaScaleX = (pos[0] - startRotatePos[0]) / width;\n      const deltaScaleY = (pos[1] - startRotatePos[1]) / height;\n\n      if (startRotationX < -90 || startRotationX > 90) {\n        deltaScaleX *= -1;\n      }\n\n      newRotation = {\n        rotationX: startRotationX + deltaScaleY * 180,\n        rotationOrbit: startRotationOrbit + deltaScaleX * 180\n      };\n    } else {\n      newRotation = {\n        rotationX: startRotationX + deltaAngleY,\n        rotationOrbit: startRotationOrbit + deltaAngleX\n      };\n    }\n\n    return this._getUpdatedState(newRotation);\n  }\n\n  rotateEnd() {\n    return this._getUpdatedState({\n      startRotationX: null,\n      startRotationOrbit: null\n    });\n  }\n\n  shortestPathFrom(viewState) {\n    const fromProps = viewState.getViewportProps();\n    const props = { ...this.getViewportProps()\n    };\n    const {\n      rotationOrbit\n    } = props;\n\n    if (Math.abs(rotationOrbit - fromProps.rotationOrbit) > 180) {\n      props.rotationOrbit = rotationOrbit < 0 ? rotationOrbit + 360 : rotationOrbit - 360;\n    }\n\n    return props;\n  }\n\n  zoomStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startZoomPosition: this._unproject(pos),\n      startZoom: this.getViewportProps().zoom\n    });\n  }\n\n  zoom({\n    pos,\n    startPos,\n    scale\n  }) {\n    let {\n      startZoom,\n      startZoomPosition\n    } = this.getState();\n\n    if (!startZoomPosition) {\n      startZoom = this.getViewportProps().zoom;\n      startZoomPosition = this._unproject(startPos) || this._unproject(pos);\n    }\n\n    if (!startZoomPosition) {\n      return this;\n    }\n\n    const newZoom = this._calculateNewZoom({\n      scale,\n      startZoom\n    });\n\n    const zoomedViewport = this.makeViewport({ ...this.getViewportProps(),\n      zoom: newZoom\n    });\n    return this._getUpdatedState({\n      zoom: newZoom,\n      ...zoomedViewport.panByPosition(startZoomPosition, pos)\n    });\n  }\n\n  zoomEnd() {\n    return this._getUpdatedState({\n      startZoomPosition: null,\n      startZoom: null\n    });\n  }\n\n  zoomIn(speed = 2) {\n    return this._getUpdatedState({\n      zoom: this._calculateNewZoom({\n        scale: speed\n      })\n    });\n  }\n\n  zoomOut(speed = 2) {\n    return this._getUpdatedState({\n      zoom: this._calculateNewZoom({\n        scale: 1 / speed\n      })\n    });\n  }\n\n  moveLeft(speed = 50) {\n    return this._panFromCenter([-speed, 0]);\n  }\n\n  moveRight(speed = 50) {\n    return this._panFromCenter([speed, 0]);\n  }\n\n  moveUp(speed = 50) {\n    return this._panFromCenter([0, -speed]);\n  }\n\n  moveDown(speed = 50) {\n    return this._panFromCenter([0, speed]);\n  }\n\n  rotateLeft(speed = 15) {\n    return this._getUpdatedState({\n      rotationOrbit: this.getViewportProps().rotationOrbit - speed\n    });\n  }\n\n  rotateRight(speed = 15) {\n    return this._getUpdatedState({\n      rotationOrbit: this.getViewportProps().rotationOrbit + speed\n    });\n  }\n\n  rotateUp(speed = 10) {\n    return this._getUpdatedState({\n      rotationX: this.getViewportProps().rotationX - speed\n    });\n  }\n\n  rotateDown(speed = 10) {\n    return this._getUpdatedState({\n      rotationX: this.getViewportProps().rotationX + speed\n    });\n  }\n\n  _unproject(pos) {\n    const viewport = this.makeViewport(this.getViewportProps());\n    return pos && viewport.unproject(pos);\n  }\n\n  _calculateNewZoom({\n    scale,\n    startZoom\n  }) {\n    const {\n      maxZoom,\n      minZoom\n    } = this.getViewportProps();\n\n    if (startZoom === undefined) {\n      startZoom = this.getViewportProps().zoom;\n    }\n\n    const zoom = startZoom + Math.log2(scale);\n    return clamp(zoom, minZoom, maxZoom);\n  }\n\n  _panFromCenter(offset) {\n    const {\n      width,\n      height,\n      target\n    } = this.getViewportProps();\n    return this.pan({\n      startPosition: target,\n      pos: [width / 2 + offset[0], height / 2 + offset[1]]\n    });\n  }\n\n  _getUpdatedState(newProps) {\n    return new this.constructor({\n      makeViewport: this.makeViewport,\n      ...this.getViewportProps(),\n      ...this.getState(),\n      ...newProps\n    });\n  }\n\n  applyConstraints(props) {\n    const {\n      maxZoom,\n      minZoom,\n      zoom,\n      maxRotationX,\n      minRotationX,\n      rotationOrbit\n    } = props;\n    props.zoom = Array.isArray(zoom) ? [clamp(zoom[0], minZoom, maxZoom), clamp(zoom[1], minZoom, maxZoom)] : clamp(zoom, minZoom, maxZoom);\n    props.rotationX = clamp(props.rotationX, minRotationX, maxRotationX);\n\n    if (rotationOrbit < -180 || rotationOrbit > 180) {\n      props.rotationOrbit = mod(rotationOrbit + 180, 360) - 180;\n    }\n\n    return props;\n  }\n\n}\nexport default class OrbitController extends Controller {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ControllerState\", OrbitState);\n\n    _defineProperty(this, \"transition\", {\n      transitionDuration: 300,\n      transitionInterpolator: new LinearInterpolator({\n        transitionProps: {\n          compare: ['target', 'zoom', 'rotationX', 'rotationOrbit'],\n          required: ['target', 'zoom']\n        }\n      })\n    });\n  }\n\n}\n//# sourceMappingURL=orbit-controller.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { clamp } from '@math.gl/core';\nimport Controller from './controller';\nimport { OrbitState } from './orbit-controller';\nimport LinearInterpolator from '../transitions/linear-interpolator';\n\nclass OrthographicState extends OrbitState {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"zoomAxis\", void 0);\n\n    this.zoomAxis = props.zoomAxis || 'all';\n  }\n\n  _calculateNewZoom({\n    scale,\n    startZoom\n  }) {\n    const {\n      maxZoom,\n      minZoom\n    } = this.getViewportProps();\n\n    if (startZoom === undefined) {\n      startZoom = this.getViewportProps().zoom;\n    }\n\n    let deltaZoom = Math.log2(scale);\n\n    if (Array.isArray(startZoom)) {\n      let [newZoomX, newZoomY] = startZoom;\n\n      switch (this.zoomAxis) {\n        case 'X':\n          newZoomX = clamp(newZoomX + deltaZoom, minZoom, maxZoom);\n          break;\n\n        case 'Y':\n          newZoomY = clamp(newZoomY + deltaZoom, minZoom, maxZoom);\n          break;\n\n        default:\n          let z = Math.min(newZoomX + deltaZoom, newZoomY + deltaZoom);\n\n          if (z < minZoom) {\n            deltaZoom += minZoom - z;\n          }\n\n          z = Math.max(newZoomX + deltaZoom, newZoomY + deltaZoom);\n\n          if (z > maxZoom) {\n            deltaZoom += maxZoom - z;\n          }\n\n          newZoomX += deltaZoom;\n          newZoomY += deltaZoom;\n      }\n\n      return [newZoomX, newZoomY];\n    }\n\n    return clamp(startZoom + deltaZoom, minZoom, maxZoom);\n  }\n\n}\n\nexport default class OrthographicController extends Controller {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ControllerState\", OrthographicState);\n\n    _defineProperty(this, \"transition\", {\n      transitionDuration: 300,\n      transitionInterpolator: new LinearInterpolator(['target', 'zoom'])\n    });\n\n    _defineProperty(this, \"dragMode\", 'pan');\n  }\n\n  _onPanRotate() {\n    return false;\n  }\n\n}\n//# sourceMappingURL=orthographic-controller.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport View from './view';\nimport OrthographicViewport from '../viewports/orthographic-viewport';\nimport OrthographicController from '../controllers/orthographic-controller';\nexport default class OrthographicView extends View {\n  get ViewportType() {\n    return OrthographicViewport;\n  }\n\n  get ControllerType() {\n    return OrthographicController;\n  }\n\n}\n\n_defineProperty(OrthographicView, \"displayName\", 'OrthographicView');\n//# sourceMappingURL=orthographic-view.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Texture2D } from '@luma.gl/core';\nimport { equals } from '@math.gl/core';\nimport MaskPass from '../../passes/mask-pass';\nimport { OPERATION } from '../../lib/constants';\nimport { getMaskBounds, getMaskViewport } from './utils';\nimport log from '../../utils/log';\nexport default class MaskEffect {\n  constructor() {\n    _defineProperty(this, \"id\", 'mask-effect');\n\n    _defineProperty(this, \"props\", null);\n\n    _defineProperty(this, \"useInPicking\", true);\n\n    _defineProperty(this, \"dummyMaskMap\", void 0);\n\n    _defineProperty(this, \"channels\", []);\n\n    _defineProperty(this, \"masks\", null);\n\n    _defineProperty(this, \"maskPass\", void 0);\n\n    _defineProperty(this, \"maskMap\", void 0);\n\n    _defineProperty(this, \"lastViewport\", void 0);\n  }\n\n  preRender(gl, {\n    layers,\n    layerFilter,\n    viewports,\n    onViewportActive,\n    views\n  }) {\n    if (!this.dummyMaskMap) {\n      this.dummyMaskMap = new Texture2D(gl, {\n        width: 1,\n        height: 1\n      });\n    }\n\n    const maskLayers = layers.filter(l => l.props.visible && l.props.operation === OPERATION.MASK);\n\n    if (maskLayers.length === 0) {\n      this.masks = null;\n      this.channels.length = 0;\n      return;\n    }\n\n    this.masks = {};\n\n    if (!this.maskPass) {\n      this.maskPass = new MaskPass(gl, {\n        id: 'default-mask'\n      });\n      this.maskMap = this.maskPass.maskMap;\n    }\n\n    const channelMap = this._sortMaskChannels(maskLayers);\n\n    const viewport = viewports[0];\n    const viewportChanged = !this.lastViewport || !this.lastViewport.equals(viewport);\n\n    for (const maskId in channelMap) {\n      this._renderChannel(channelMap[maskId], {\n        layerFilter,\n        onViewportActive,\n        views,\n        viewport,\n        viewportChanged\n      });\n    }\n  }\n\n  _renderChannel(channelInfo, {\n    layerFilter,\n    onViewportActive,\n    views,\n    viewport,\n    viewportChanged\n  }) {\n    const oldChannelInfo = this.channels[channelInfo.index];\n\n    if (!oldChannelInfo) {\n      return;\n    }\n\n    const maskChanged = channelInfo === oldChannelInfo || oldChannelInfo.layers.length !== channelInfo.layers.length || channelInfo.layerBounds.some((b, i) => b !== oldChannelInfo.layerBounds[i]);\n    channelInfo.bounds = oldChannelInfo.bounds;\n    channelInfo.maskBounds = oldChannelInfo.maskBounds;\n    this.channels[channelInfo.index] = channelInfo;\n\n    if (maskChanged || viewportChanged) {\n      this.lastViewport = viewport;\n      channelInfo.bounds = getMaskBounds({\n        layers: channelInfo.layers,\n        viewport\n      });\n\n      if (maskChanged || !equals(channelInfo.bounds, oldChannelInfo.bounds)) {\n        const {\n          maskPass,\n          maskMap\n        } = this;\n        const maskViewport = getMaskViewport({\n          bounds: channelInfo.bounds,\n          viewport,\n          width: maskMap.width,\n          height: maskMap.height\n        });\n        channelInfo.maskBounds = maskViewport ? maskViewport.getBounds() : [0, 0, 1, 1];\n        maskPass.render({\n          pass: 'mask',\n          channel: channelInfo.index,\n          layers: channelInfo.layers,\n          layerFilter,\n          viewports: maskViewport ? [maskViewport] : [],\n          onViewportActive,\n          views,\n          moduleParameters: {\n            devicePixelRatio: 1\n          }\n        });\n      }\n    }\n\n    this.masks[channelInfo.id] = {\n      index: channelInfo.index,\n      bounds: channelInfo.maskBounds,\n      coordinateOrigin: channelInfo.coordinateOrigin,\n      coordinateSystem: channelInfo.coordinateSystem\n    };\n  }\n\n  _sortMaskChannels(maskLayers) {\n    const channelMap = {};\n    let channelCount = 0;\n\n    for (const layer of maskLayers) {\n      const {\n        id\n      } = layer.root;\n      let channelInfo = channelMap[id];\n\n      if (!channelInfo) {\n        if (++channelCount > 4) {\n          log.warn('Too many mask layers. The max supported is 4')();\n          continue;\n        }\n\n        channelInfo = {\n          id,\n          index: this.channels.findIndex(c => (c === null || c === void 0 ? void 0 : c.id) === id),\n          layers: [],\n          layerBounds: [],\n          coordinateOrigin: layer.root.props.coordinateOrigin,\n          coordinateSystem: layer.root.props.coordinateSystem\n        };\n        channelMap[id] = channelInfo;\n      }\n\n      channelInfo.layers.push(layer);\n      channelInfo.layerBounds.push(layer.getBounds());\n    }\n\n    for (let i = 0; i < 4; i++) {\n      const channelInfo = this.channels[i];\n\n      if (!channelInfo || !(channelInfo.id in channelMap)) {\n        this.channels[i] = null;\n      }\n    }\n\n    for (const maskId in channelMap) {\n      const channelInfo = channelMap[maskId];\n\n      if (channelInfo.index < 0) {\n        channelInfo.index = this.channels.findIndex(c => !c);\n        this.channels[channelInfo.index] = channelInfo;\n      }\n    }\n\n    return channelMap;\n  }\n\n  getModuleParameters() {\n    return {\n      maskMap: this.masks ? this.maskMap : this.dummyMaskMap,\n      maskChannels: this.masks\n    };\n  }\n\n  cleanup() {\n    if (this.dummyMaskMap) {\n      this.dummyMaskMap.delete();\n      this.dummyMaskMap = undefined;\n    }\n\n    if (this.maskPass) {\n      this.maskPass.delete();\n      this.maskPass = undefined;\n      this.maskMap = undefined;\n    }\n\n    this.lastViewport = undefined;\n    this.masks = null;\n    this.channels.length = 0;\n  }\n\n}\n//# sourceMappingURL=mask-effect.js.map","import OrthographicView from '../../views/orthographic-view';\nimport WebMercatorViewport from '../../viewports/web-mercator-viewport';\nimport { fitBounds } from '@math.gl/web-mercator';\nexport function getMaskBounds({\n  layers,\n  viewport\n}) {\n  let bounds = null;\n\n  for (const layer of layers) {\n    const subLayerBounds = layer.getBounds();\n\n    if (subLayerBounds) {\n      if (bounds) {\n        bounds[0] = Math.min(bounds[0], subLayerBounds[0][0]);\n        bounds[1] = Math.min(bounds[1], subLayerBounds[0][1]);\n        bounds[2] = Math.max(bounds[2], subLayerBounds[1][0]);\n        bounds[3] = Math.max(bounds[3], subLayerBounds[1][1]);\n      } else {\n        bounds = [subLayerBounds[0][0], subLayerBounds[0][1], subLayerBounds[1][0], subLayerBounds[1][1]];\n      }\n    }\n  }\n\n  const viewportBounds = viewport.getBounds();\n\n  if (!bounds) {\n    return viewportBounds;\n  }\n\n  const paddedBounds = _doubleBounds(viewportBounds);\n\n  if (bounds[2] - bounds[0] < paddedBounds[2] - paddedBounds[0] || bounds[3] - bounds[1] < paddedBounds[3] - paddedBounds[1]) {\n    return bounds;\n  }\n\n  bounds[0] = Math.max(bounds[0], paddedBounds[0]);\n  bounds[1] = Math.max(bounds[1], paddedBounds[1]);\n  bounds[2] = Math.min(bounds[2], paddedBounds[2]);\n  bounds[3] = Math.min(bounds[3], paddedBounds[3]);\n  return bounds;\n}\nexport function getMaskViewport({\n  bounds,\n  viewport,\n  width,\n  height\n}) {\n  if (bounds[2] <= bounds[0] || bounds[3] <= bounds[1]) {\n    return null;\n  }\n\n  const padding = 1;\n  width -= padding * 2;\n  height -= padding * 2;\n\n  if (viewport instanceof WebMercatorViewport) {\n    const {\n      longitude,\n      latitude,\n      zoom\n    } = fitBounds({\n      width,\n      height,\n      bounds: [[bounds[0], bounds[1]], [bounds[2], bounds[3]]],\n      maxZoom: 20\n    });\n    return new WebMercatorViewport({\n      longitude,\n      latitude,\n      zoom,\n      x: padding,\n      y: padding,\n      width,\n      height\n    });\n  }\n\n  const center = [(bounds[0] + bounds[2]) / 2, (bounds[1] + bounds[3]) / 2, 0];\n  const scale = Math.min(20, width / (bounds[2] - bounds[0]), height / (bounds[3] - bounds[1]));\n  return new OrthographicView({\n    x: padding,\n    y: padding\n  }).makeViewport({\n    width,\n    height,\n    viewState: {\n      target: center,\n      zoom: Math.log2(scale)\n    }\n  });\n}\n\nfunction _doubleBounds(bounds) {\n  const size = {\n    x: bounds[2] - bounds[0],\n    y: bounds[3] - bounds[1]\n  };\n  const center = {\n    x: bounds[0] + 0.5 * size.x,\n    y: bounds[1] + 0.5 * size.y\n  };\n  return [center.x - size.x, center.y - size.y, center.x + size.x, center.y + size.y];\n}\n//# sourceMappingURL=utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { deepEqual } from '../utils/deep-equal';\nimport LightingEffect from '../effects/lighting/lighting-effect';\nimport MaskEffect from '../effects/mask/mask-effect';\nconst DEFAULT_LIGHTING_EFFECT = new LightingEffect();\nexport default class EffectManager {\n  constructor() {\n    _defineProperty(this, \"effects\", void 0);\n\n    _defineProperty(this, \"_internalEffects\", void 0);\n\n    _defineProperty(this, \"_needsRedraw\", void 0);\n\n    this.effects = [];\n    this._internalEffects = [];\n    this._needsRedraw = 'Initial render';\n    this.setEffects();\n  }\n\n  setProps(props) {\n    if ('effects' in props) {\n      if (props.effects.length !== this.effects.length || !deepEqual(props.effects, this.effects)) {\n        this.setEffects(props.effects);\n        this._needsRedraw = 'effects changed';\n      }\n    }\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  getEffects() {\n    return this._internalEffects;\n  }\n\n  finalize() {\n    this.cleanup();\n  }\n\n  setEffects(effects = []) {\n    this.cleanup();\n    this.effects = effects;\n    this._internalEffects = effects.slice();\n\n    this._internalEffects.push(new MaskEffect());\n\n    if (!effects.some(effect => effect instanceof LightingEffect)) {\n      this._internalEffects.push(DEFAULT_LIGHTING_EFFECT);\n    }\n  }\n\n  cleanup() {\n    for (const effect of this.effects) {\n      effect.cleanup();\n    }\n\n    for (const effect of this._internalEffects) {\n      effect.cleanup();\n    }\n\n    this.effects.length = 0;\n    this._internalEffects.length = 0;\n  }\n\n}\n//# sourceMappingURL=effect-manager.js.map","import { OPERATION } from '../lib/constants';\nimport LayersPass from './layers-pass';\nexport default class DrawLayersPass extends LayersPass {\n  shouldDrawLayer(layer) {\n    return layer.props.operation === OPERATION.DRAW;\n  }\n\n}\n//# sourceMappingURL=draw-layers-pass.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport LayersPass from './layers-pass';\nimport { withParameters } from '@luma.gl/core';\nimport { OPERATION } from '../lib/constants';\nimport log from '../utils/log';\nconst PICKING_PARAMETERS = {\n  blendFunc: [1, 0, 32771, 0],\n  blendEquation: 32774\n};\nexport default class PickLayersPass extends LayersPass {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"pickZ\", void 0);\n\n    _defineProperty(this, \"_colors\", null);\n  }\n\n  render(props) {\n    if (props.pickingFBO) {\n      return this._drawPickingBuffer(props);\n    }\n\n    return super.render(props);\n  }\n\n  _drawPickingBuffer({\n    layers,\n    layerFilter,\n    views,\n    viewports,\n    onViewportActive,\n    pickingFBO,\n    deviceRect: {\n      x,\n      y,\n      width,\n      height\n    },\n    cullRect,\n    effects,\n    pass = 'picking',\n    pickZ\n  }) {\n    const gl = this.gl;\n    this.pickZ = pickZ;\n    const encodedColors = pickZ ? null : {\n      byLayer: new Map(),\n      byAlpha: []\n    };\n    this._colors = encodedColors;\n    const renderStatus = withParameters(gl, {\n      scissorTest: true,\n      scissor: [x, y, width, height],\n      clearColor: [0, 0, 0, 0],\n      depthMask: true,\n      depthTest: true,\n      depthRange: [0, 1],\n      colorMask: [true, true, true, true],\n      ...PICKING_PARAMETERS,\n      blend: !pickZ\n    }, () => super.render({\n      target: pickingFBO,\n      layers,\n      layerFilter,\n      views,\n      viewports,\n      onViewportActive,\n      cullRect,\n      effects: effects === null || effects === void 0 ? void 0 : effects.filter(e => e.useInPicking),\n      pass\n    }));\n    this._colors = null;\n    const decodePickingColor = encodedColors && decodeColor.bind(null, encodedColors);\n    return {\n      decodePickingColor,\n      stats: renderStatus\n    };\n  }\n\n  shouldDrawLayer(layer) {\n    return layer.props.pickable && layer.props.operation === OPERATION.DRAW;\n  }\n\n  getModuleParameters() {\n    return {\n      pickingActive: 1,\n      pickingAttribute: this.pickZ,\n      lightSources: {}\n    };\n  }\n\n  getLayerParameters(layer, layerIndex, viewport) {\n    const pickParameters = { ...layer.props.parameters\n    };\n\n    if (!this._colors) {\n      pickParameters.blend = false;\n    } else {\n      Object.assign(pickParameters, PICKING_PARAMETERS);\n      pickParameters.blend = true;\n      pickParameters.blendColor = encodeColor(this._colors, layer, viewport);\n    }\n\n    return pickParameters;\n  }\n\n}\n\nfunction encodeColor(encoded, layer, viewport) {\n  const {\n    byLayer,\n    byAlpha\n  } = encoded;\n  let a;\n  let entry = byLayer.get(layer);\n\n  if (entry) {\n    entry.viewports.push(viewport);\n    a = entry.a;\n  } else {\n    a = byLayer.size + 1;\n\n    if (a <= 255) {\n      entry = {\n        a,\n        layer,\n        viewports: [viewport]\n      };\n      byLayer.set(layer, entry);\n      byAlpha[a] = entry;\n    } else {\n      log.warn('Too many pickable layers, only picking the first 255')();\n      a = 0;\n    }\n  }\n\n  return [0, 0, 0, a / 255];\n}\n\nfunction decodeColor(encoded, pickedColor) {\n  const entry = encoded.byAlpha[pickedColor[3]];\n  return entry && {\n    pickedLayer: entry.layer,\n    pickedViewports: entry.viewports,\n    pickedObjectIndex: entry.layer.decodePickingColor(pickedColor)\n  };\n}\n//# sourceMappingURL=pick-layers-pass.js.map","import debug from '../debug';\nimport DrawLayersPass from '../passes/draw-layers-pass';\nimport PickLayersPass from '../passes/pick-layers-pass';\nimport { Framebuffer } from '@luma.gl/core';\nconst TRACE_RENDER_LAYERS = 'deckRenderer.renderLayers';\nexport default class DeckRenderer {\n  constructor(gl) {\n    this.gl = gl;\n    this.layerFilter = null;\n    this.drawPickingColors = false;\n    this.drawLayersPass = new DrawLayersPass(gl);\n    this.pickLayersPass = new PickLayersPass(gl);\n    this.renderCount = 0;\n    this._needsRedraw = 'Initial render';\n    this.renderBuffers = [];\n    this.lastPostProcessEffect = null;\n  }\n\n  setProps(props) {\n    if ('layerFilter' in props && this.layerFilter !== props.layerFilter) {\n      this.layerFilter = props.layerFilter;\n      this._needsRedraw = 'layerFilter changed';\n    }\n\n    if ('drawPickingColors' in props && this.drawPickingColors !== props.drawPickingColors) {\n      this.drawPickingColors = props.drawPickingColors;\n      this._needsRedraw = 'drawPickingColors changed';\n    }\n  }\n\n  renderLayers(opts) {\n    const layerPass = this.drawPickingColors ? this.pickLayersPass : this.drawLayersPass;\n    opts.layerFilter = opts.layerFilter || this.layerFilter;\n    opts.effects = opts.effects || [];\n    opts.target = opts.target || Framebuffer.getDefaultFramebuffer(this.gl);\n\n    this._preRender(opts.effects, opts);\n\n    const outputBuffer = this.lastPostProcessEffect ? this.renderBuffers[0] : opts.target;\n    const renderStats = layerPass.render({ ...opts,\n      target: outputBuffer\n    });\n\n    this._postRender(opts.effects, opts);\n\n    this.renderCount++;\n    debug(TRACE_RENDER_LAYERS, this, renderStats, opts);\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  finalize() {\n    const {\n      renderBuffers\n    } = this;\n\n    for (const buffer of renderBuffers) {\n      buffer.delete();\n    }\n\n    renderBuffers.length = 0;\n  }\n\n  _preRender(effects, opts) {\n    let lastPostProcessEffect = null;\n\n    for (const effect of effects) {\n      effect.preRender(this.gl, opts);\n\n      if (effect.postRender) {\n        lastPostProcessEffect = effect;\n      }\n    }\n\n    if (lastPostProcessEffect) {\n      this._resizeRenderBuffers();\n    }\n\n    this.lastPostProcessEffect = lastPostProcessEffect;\n  }\n\n  _resizeRenderBuffers() {\n    const {\n      renderBuffers\n    } = this;\n\n    if (renderBuffers.length === 0) {\n      renderBuffers.push(new Framebuffer(this.gl), new Framebuffer(this.gl));\n    }\n\n    for (const buffer of renderBuffers) {\n      buffer.resize();\n    }\n  }\n\n  _postRender(effects, opts) {\n    const {\n      renderBuffers\n    } = this;\n    const params = {\n      inputBuffer: renderBuffers[0],\n      swapBuffer: renderBuffers[1],\n      target: null\n    };\n\n    for (const effect of effects) {\n      if (effect.postRender) {\n        if (effect === this.lastPostProcessEffect) {\n          params.target = opts.target;\n          effect.postRender(this.gl, params);\n          break;\n        }\n\n        const buffer = effect.postRender(this.gl, params);\n        params.inputBuffer = buffer;\n        params.swapBuffer = buffer === renderBuffers[0] ? renderBuffers[1] : renderBuffers[0];\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=deck-renderer.js.map","import log from '../../utils/log';\nconst NO_PICKED_OBJECT = {\n  pickedColor: null,\n  pickedObjectIndex: -1\n};\nexport function getClosestObject({\n  pickedColors,\n  decodePickingColor,\n  deviceX,\n  deviceY,\n  deviceRadius,\n  deviceRect\n}) {\n  const {\n    x,\n    y,\n    width,\n    height\n  } = deviceRect;\n  let minSquareDistanceToCenter = deviceRadius * deviceRadius;\n  let closestPixelIndex = -1;\n  let i = 0;\n\n  for (let row = 0; row < height; row++) {\n    const dy = row + y - deviceY;\n    const dy2 = dy * dy;\n\n    if (dy2 > minSquareDistanceToCenter) {\n      i += 4 * width;\n    } else {\n      for (let col = 0; col < width; col++) {\n        const pickedLayerIndex = pickedColors[i + 3] - 1;\n\n        if (pickedLayerIndex >= 0) {\n          const dx = col + x - deviceX;\n          const d2 = dx * dx + dy2;\n\n          if (d2 <= minSquareDistanceToCenter) {\n            minSquareDistanceToCenter = d2;\n            closestPixelIndex = i;\n          }\n        }\n\n        i += 4;\n      }\n    }\n  }\n\n  if (closestPixelIndex >= 0) {\n    const pickedColor = pickedColors.slice(closestPixelIndex, closestPixelIndex + 4);\n    const pickedObject = decodePickingColor(pickedColor);\n\n    if (pickedObject) {\n      const dy = Math.floor(closestPixelIndex / 4 / width);\n      const dx = closestPixelIndex / 4 - dy * width;\n      return { ...pickedObject,\n        pickedColor,\n        pickedX: x + dx,\n        pickedY: y + dy\n      };\n    }\n\n    log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n  }\n\n  return NO_PICKED_OBJECT;\n}\nexport function getUniqueObjects({\n  pickedColors,\n  decodePickingColor\n}) {\n  const uniqueColors = new Map();\n\n  if (pickedColors) {\n    for (let i = 0; i < pickedColors.length; i += 4) {\n      const pickedLayerIndex = pickedColors[i + 3] - 1;\n\n      if (pickedLayerIndex >= 0) {\n        const pickedColor = pickedColors.slice(i, i + 4);\n        const colorKey = pickedColor.join(',');\n\n        if (!uniqueColors.has(colorKey)) {\n          const pickedObject = decodePickingColor(pickedColor);\n\n          if (pickedObject) {\n            uniqueColors.set(colorKey, { ...pickedObject,\n              color: pickedColor\n            });\n          } else {\n            log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n          }\n        }\n      }\n    }\n  }\n\n  return Array.from(uniqueColors.values());\n}\n//# sourceMappingURL=query-object.js.map","export function getEmptyPickingInfo({\n  pickInfo,\n  viewports,\n  pixelRatio,\n  x,\n  y,\n  z\n}) {\n  let pickedViewport = viewports[0];\n\n  if (viewports.length > 1) {\n    pickedViewport = getViewportFromCoordinates((pickInfo === null || pickInfo === void 0 ? void 0 : pickInfo.pickedViewports) || viewports, {\n      x,\n      y\n    });\n  }\n\n  let coordinate;\n\n  if (pickedViewport) {\n    const point = [x - pickedViewport.x, y - pickedViewport.y];\n\n    if (z !== undefined) {\n      point[2] = z;\n    }\n\n    coordinate = pickedViewport.unproject(point);\n  }\n\n  return {\n    color: null,\n    layer: null,\n    viewport: pickedViewport,\n    index: -1,\n    picked: false,\n    x,\n    y,\n    pixel: [x, y],\n    coordinate,\n    devicePixel: pickInfo && 'pickedX' in pickInfo ? [pickInfo.pickedX, pickInfo.pickedY] : undefined,\n    pixelRatio\n  };\n}\nexport function processPickInfo(opts) {\n  const {\n    pickInfo,\n    lastPickedInfo,\n    mode,\n    layers\n  } = opts;\n  const {\n    pickedColor,\n    pickedLayer,\n    pickedObjectIndex\n  } = pickInfo;\n  const affectedLayers = pickedLayer ? [pickedLayer] : [];\n\n  if (mode === 'hover') {\n    const lastPickedPixelIndex = lastPickedInfo.index;\n    const lastPickedLayerId = lastPickedInfo.layerId;\n    const pickedLayerId = pickedLayer ? pickedLayer.props.id : null;\n\n    if (pickedLayerId !== lastPickedLayerId || pickedObjectIndex !== lastPickedPixelIndex) {\n      if (pickedLayerId !== lastPickedLayerId) {\n        const lastPickedLayer = layers.find(layer => layer.props.id === lastPickedLayerId);\n\n        if (lastPickedLayer) {\n          affectedLayers.unshift(lastPickedLayer);\n        }\n      }\n\n      lastPickedInfo.layerId = pickedLayerId;\n      lastPickedInfo.index = pickedObjectIndex;\n      lastPickedInfo.info = null;\n    }\n  }\n\n  const baseInfo = getEmptyPickingInfo(opts);\n  const infos = new Map();\n  infos.set(null, baseInfo);\n  affectedLayers.forEach(layer => {\n    let info = { ...baseInfo\n    };\n\n    if (layer === pickedLayer) {\n      info.color = pickedColor;\n      info.index = pickedObjectIndex;\n      info.picked = true;\n    }\n\n    info = getLayerPickingInfo({\n      layer,\n      info,\n      mode\n    });\n    const rootLayer = info.layer;\n\n    if (layer === pickedLayer && mode === 'hover') {\n      lastPickedInfo.info = info;\n    }\n\n    infos.set(rootLayer.id, info);\n\n    if (mode === 'hover') {\n      rootLayer.updateAutoHighlight(info);\n    }\n  });\n  return infos;\n}\nexport function getLayerPickingInfo({\n  layer,\n  info,\n  mode\n}) {\n  while (layer && info) {\n    const sourceLayer = info.layer || null;\n    info.sourceLayer = sourceLayer;\n    info.layer = layer;\n    info = layer.getPickingInfo({\n      info,\n      mode,\n      sourceLayer\n    });\n    layer = layer.parent;\n  }\n\n  return info;\n}\n\nfunction getViewportFromCoordinates(viewports, pixel) {\n  for (let i = viewports.length - 1; i >= 0; i--) {\n    const viewport = viewports[i];\n\n    if (viewport.containsPixel(pixel)) {\n      return viewport;\n    }\n  }\n\n  return viewports[0];\n}\n//# sourceMappingURL=pick-info.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Framebuffer, Texture2D, isWebGL2, readPixelsToArray, cssToDeviceRatio, cssToDevicePixels } from '@luma.gl/core';\nimport PickLayersPass from '../passes/pick-layers-pass';\nimport { getClosestObject, getUniqueObjects } from './picking/query-object';\nimport { processPickInfo, getLayerPickingInfo, getEmptyPickingInfo } from './picking/pick-info';\nexport default class DeckPicker {\n  constructor(gl) {\n    _defineProperty(this, \"gl\", void 0);\n\n    _defineProperty(this, \"pickingFBO\", void 0);\n\n    _defineProperty(this, \"depthFBO\", void 0);\n\n    _defineProperty(this, \"pickLayersPass\", void 0);\n\n    _defineProperty(this, \"layerFilter\", void 0);\n\n    _defineProperty(this, \"lastPickedInfo\", void 0);\n\n    _defineProperty(this, \"_pickable\", true);\n\n    this.gl = gl;\n    this.pickLayersPass = new PickLayersPass(gl);\n    this.lastPickedInfo = {\n      index: -1,\n      layerId: null,\n      info: null\n    };\n  }\n\n  setProps(props) {\n    if ('layerFilter' in props) {\n      this.layerFilter = props.layerFilter;\n    }\n\n    if ('_pickable' in props) {\n      this._pickable = props._pickable;\n    }\n  }\n\n  finalize() {\n    if (this.pickingFBO) {\n      this.pickingFBO.delete();\n    }\n\n    if (this.depthFBO) {\n      this.depthFBO.color.delete();\n      this.depthFBO.delete();\n    }\n  }\n\n  pickObject(opts) {\n    return this._pickClosestObject(opts);\n  }\n\n  pickObjects(opts) {\n    return this._pickVisibleObjects(opts);\n  }\n\n  getLastPickedObject({\n    x,\n    y,\n    layers,\n    viewports\n  }, lastPickedInfo = this.lastPickedInfo.info) {\n    const lastPickedLayerId = lastPickedInfo && lastPickedInfo.layer && lastPickedInfo.layer.id;\n    const lastPickedViewportId = lastPickedInfo && lastPickedInfo.viewport && lastPickedInfo.viewport.id;\n    const layer = lastPickedLayerId ? layers.find(l => l.id === lastPickedLayerId) : null;\n    const viewport = lastPickedViewportId && viewports.find(v => v.id === lastPickedViewportId) || viewports[0];\n    const coordinate = viewport && viewport.unproject([x - viewport.x, y - viewport.y]);\n    const info = {\n      x,\n      y,\n      viewport,\n      coordinate,\n      layer\n    };\n    return { ...lastPickedInfo,\n      ...info\n    };\n  }\n\n  _resizeBuffer() {\n    var _this$pickingFBO, _this$depthFBO;\n\n    const {\n      gl\n    } = this;\n\n    if (!this.pickingFBO) {\n      this.pickingFBO = new Framebuffer(gl);\n\n      if (Framebuffer.isSupported(gl, {\n        colorBufferFloat: true\n      })) {\n        const depthFBO = new Framebuffer(gl);\n        depthFBO.attach({\n          [36064]: new Texture2D(gl, {\n            format: isWebGL2(gl) ? 34836 : 6408,\n            type: 5126\n          })\n        });\n        this.depthFBO = depthFBO;\n      }\n    }\n\n    (_this$pickingFBO = this.pickingFBO) === null || _this$pickingFBO === void 0 ? void 0 : _this$pickingFBO.resize({\n      width: gl.canvas.width,\n      height: gl.canvas.height\n    });\n    (_this$depthFBO = this.depthFBO) === null || _this$depthFBO === void 0 ? void 0 : _this$depthFBO.resize({\n      width: gl.canvas.width,\n      height: gl.canvas.height\n    });\n  }\n\n  _getPickable(layers) {\n    if (this._pickable === false) {\n      return null;\n    }\n\n    const pickableLayers = layers.filter(layer => layer.isPickable() && !layer.isComposite);\n    return pickableLayers.length ? pickableLayers : null;\n  }\n\n  _pickClosestObject({\n    layers,\n    views,\n    viewports,\n    x,\n    y,\n    radius = 0,\n    depth = 1,\n    mode = 'query',\n    unproject3D,\n    onViewportActive,\n    effects\n  }) {\n    const pickableLayers = this._getPickable(layers);\n\n    const pixelRatio = cssToDeviceRatio(this.gl);\n\n    if (!pickableLayers) {\n      return {\n        result: [],\n        emptyInfo: getEmptyPickingInfo({\n          viewports,\n          x,\n          y,\n          pixelRatio\n        })\n      };\n    }\n\n    this._resizeBuffer();\n\n    const devicePixelRange = cssToDevicePixels(this.gl, [x, y], true);\n    const devicePixel = [devicePixelRange.x + Math.floor(devicePixelRange.width / 2), devicePixelRange.y + Math.floor(devicePixelRange.height / 2)];\n    const deviceRadius = Math.round(radius * pixelRatio);\n    const {\n      width,\n      height\n    } = this.pickingFBO;\n\n    const deviceRect = this._getPickingRect({\n      deviceX: devicePixel[0],\n      deviceY: devicePixel[1],\n      deviceRadius,\n      deviceWidth: width,\n      deviceHeight: height\n    });\n\n    const cullRect = {\n      x: x - radius,\n      y: y - radius,\n      width: radius * 2 + 1,\n      height: radius * 2 + 1\n    };\n    let infos;\n    const result = [];\n    const affectedLayers = new Set();\n\n    for (let i = 0; i < depth; i++) {\n      let pickInfo;\n\n      if (deviceRect) {\n        const pickedResult = this._drawAndSample({\n          layers: pickableLayers,\n          views,\n          viewports,\n          onViewportActive,\n          deviceRect,\n          cullRect,\n          effects,\n          pass: \"picking:\".concat(mode)\n        });\n\n        pickInfo = getClosestObject({ ...pickedResult,\n          deviceX: devicePixel[0],\n          deviceY: devicePixel[1],\n          deviceRadius,\n          deviceRect\n        });\n      } else {\n        pickInfo = {\n          pickedColor: null,\n          pickedObjectIndex: -1\n        };\n      }\n\n      let z;\n\n      if (pickInfo.pickedLayer && unproject3D && this.depthFBO) {\n        const pickedResultPass2 = this._drawAndSample({\n          layers: [pickInfo.pickedLayer],\n          views,\n          viewports,\n          onViewportActive,\n          deviceRect: {\n            x: pickInfo.pickedX,\n            y: pickInfo.pickedY,\n            width: 1,\n            height: 1\n          },\n          cullRect,\n          effects,\n          pass: \"picking:\".concat(mode, \":z\")\n        }, true);\n\n        z = pickedResultPass2.pickedColors[0];\n      }\n\n      if (pickInfo.pickedLayer && i + 1 < depth) {\n        affectedLayers.add(pickInfo.pickedLayer);\n        pickInfo.pickedLayer.disablePickingIndex(pickInfo.pickedObjectIndex);\n      }\n\n      infos = processPickInfo({\n        pickInfo,\n        lastPickedInfo: this.lastPickedInfo,\n        mode,\n        layers: pickableLayers,\n        viewports,\n        x,\n        y,\n        z,\n        pixelRatio\n      });\n\n      for (const info of infos.values()) {\n        if (info.layer) {\n          result.push(info);\n        }\n      }\n\n      if (!pickInfo.pickedColor) {\n        break;\n      }\n    }\n\n    for (const layer of affectedLayers) {\n      layer.restorePickingColors();\n    }\n\n    return {\n      result,\n      emptyInfo: infos.get(null)\n    };\n  }\n\n  _pickVisibleObjects({\n    layers,\n    views,\n    viewports,\n    x,\n    y,\n    width = 1,\n    height = 1,\n    mode = 'query',\n    maxObjects = null,\n    onViewportActive,\n    effects\n  }) {\n    const pickableLayers = this._getPickable(layers);\n\n    if (!pickableLayers) {\n      return [];\n    }\n\n    this._resizeBuffer();\n\n    const pixelRatio = cssToDeviceRatio(this.gl);\n    const leftTop = cssToDevicePixels(this.gl, [x, y], true);\n    const deviceLeft = leftTop.x;\n    const deviceTop = leftTop.y + leftTop.height;\n    const rightBottom = cssToDevicePixels(this.gl, [x + width, y + height], true);\n    const deviceRight = rightBottom.x + rightBottom.width;\n    const deviceBottom = rightBottom.y;\n    const deviceRect = {\n      x: deviceLeft,\n      y: deviceBottom,\n      width: deviceRight - deviceLeft,\n      height: deviceTop - deviceBottom\n    };\n\n    const pickedResult = this._drawAndSample({\n      layers: pickableLayers,\n      views,\n      viewports,\n      onViewportActive,\n      deviceRect,\n      cullRect: {\n        x,\n        y,\n        width,\n        height\n      },\n      effects,\n      pass: \"picking:\".concat(mode)\n    });\n\n    const pickInfos = getUniqueObjects(pickedResult);\n    const uniqueInfos = new Map();\n    const isMaxObjects = Number.isFinite(maxObjects);\n\n    for (let i = 0; i < pickInfos.length; i++) {\n      if (isMaxObjects && maxObjects && uniqueInfos.size >= maxObjects) {\n        break;\n      }\n\n      const pickInfo = pickInfos[i];\n      let info = {\n        color: pickInfo.pickedColor,\n        layer: null,\n        index: pickInfo.pickedObjectIndex,\n        picked: true,\n        x,\n        y,\n        pixelRatio\n      };\n      info = getLayerPickingInfo({\n        layer: pickInfo.pickedLayer,\n        info,\n        mode\n      });\n\n      if (!uniqueInfos.has(info.object)) {\n        uniqueInfos.set(info.object, info);\n      }\n    }\n\n    return Array.from(uniqueInfos.values());\n  }\n\n  _drawAndSample({\n    layers,\n    views,\n    viewports,\n    onViewportActive,\n    deviceRect,\n    cullRect,\n    effects,\n    pass\n  }, pickZ = false) {\n    const pickingFBO = pickZ ? this.depthFBO : this.pickingFBO;\n    const {\n      decodePickingColor\n    } = this.pickLayersPass.render({\n      layers,\n      layerFilter: this.layerFilter,\n      views,\n      viewports,\n      onViewportActive,\n      pickingFBO,\n      deviceRect,\n      cullRect,\n      effects,\n      pass,\n      pickZ\n    });\n    const {\n      x,\n      y,\n      width,\n      height\n    } = deviceRect;\n    const pickedColors = new (pickZ ? Float32Array : Uint8Array)(width * height * 4);\n    readPixelsToArray(pickingFBO, {\n      sourceX: x,\n      sourceY: y,\n      sourceWidth: width,\n      sourceHeight: height,\n      target: pickedColors\n    });\n    return {\n      pickedColors,\n      decodePickingColor\n    };\n  }\n\n  _getPickingRect({\n    deviceX,\n    deviceY,\n    deviceRadius,\n    deviceWidth,\n    deviceHeight\n  }) {\n    const x = Math.max(0, deviceX - deviceRadius);\n    const y = Math.max(0, deviceY - deviceRadius);\n    const width = Math.min(deviceWidth, deviceX + deviceRadius + 1) - x;\n    const height = Math.min(deviceHeight, deviceY + deviceRadius + 1) - y;\n\n    if (width <= 0 || height <= 0) {\n      return null;\n    }\n\n    return {\n      x,\n      y,\n      width,\n      height\n    };\n  }\n\n}\n//# sourceMappingURL=deck-picker.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nconst defaultStyle = {\n  zIndex: '1',\n  position: 'absolute',\n  pointerEvents: 'none',\n  color: '#a0a7b4',\n  backgroundColor: '#29323c',\n  padding: '10px',\n  top: '0',\n  left: '0',\n  display: 'none'\n};\nexport default class Tooltip {\n  constructor(canvas) {\n    _defineProperty(this, \"el\", null);\n\n    _defineProperty(this, \"isVisible\", false);\n\n    const canvasParent = canvas.parentElement;\n\n    if (canvasParent) {\n      this.el = document.createElement('div');\n      this.el.className = 'deck-tooltip';\n      Object.assign(this.el.style, defaultStyle);\n      canvasParent.appendChild(this.el);\n    }\n  }\n\n  setTooltip(displayInfo, x, y) {\n    const el = this.el;\n\n    if (!el) {\n      return;\n    }\n\n    if (typeof displayInfo === 'string') {\n      el.innerText = displayInfo;\n    } else if (!displayInfo) {\n      this.isVisible = false;\n      el.style.display = 'none';\n      return;\n    } else {\n      if (displayInfo.text) {\n        el.innerText = displayInfo.text;\n      }\n\n      if (displayInfo.html) {\n        el.innerHTML = displayInfo.html;\n      }\n\n      if (displayInfo.className) {\n        el.className = displayInfo.className;\n      }\n\n      Object.assign(el.style, displayInfo.style);\n    }\n\n    this.isVisible = true;\n    el.style.display = 'block';\n    el.style.transform = \"translate(\".concat(x, \"px, \").concat(y, \"px)\");\n  }\n\n  remove() {\n    if (this.el) {\n      this.el.remove();\n      this.el = null;\n    }\n  }\n\n}\n//# sourceMappingURL=tooltip.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport LayerManager from './layer-manager';\nimport ViewManager from './view-manager';\nimport MapView from '../views/map-view';\nimport EffectManager from './effect-manager';\nimport DeckRenderer from './deck-renderer';\nimport DeckPicker from './deck-picker';\nimport Tooltip from './tooltip';\nimport log from '../utils/log';\nimport { deepEqual } from '../utils/deep-equal';\nimport typedArrayManager from '../utils/typed-array-manager';\nimport deckGlobal from './init';\nimport { getBrowser } from '@probe.gl/env';\nimport { AnimationLoop, createGLContext, instrumentGLContext, setParameters, Timeline, lumaStats } from '@luma.gl/core';\nimport { Stats } from '@probe.gl/stats';\nimport { EventManager } from 'mjolnir.js';\nimport assert from '../utils/assert';\nimport { EVENTS } from './constants';\n\nfunction noop() {}\n\nconst getCursor = ({\n  isDragging\n}) => isDragging ? 'grabbing' : 'grab';\n\nconst defaultProps = {\n  id: '',\n  width: '100%',\n  height: '100%',\n  style: null,\n  viewState: null,\n  initialViewState: null,\n  pickingRadius: 0,\n  layerFilter: null,\n  glOptions: {},\n  parameters: {},\n  parent: null,\n  gl: null,\n  canvas: null,\n  layers: [],\n  effects: [],\n  views: null,\n  controller: null,\n  useDevicePixels: true,\n  touchAction: 'none',\n  eventRecognizerOptions: {},\n  _framebuffer: null,\n  _animate: false,\n  _pickable: true,\n  _typedArrayManagerProps: {},\n  _customRender: null,\n  onWebGLInitialized: noop,\n  onResize: noop,\n  onViewStateChange: noop,\n  onInteractionStateChange: noop,\n  onBeforeRender: noop,\n  onAfterRender: noop,\n  onLoad: noop,\n  onError: error => log.error(error.message)(),\n  onHover: null,\n  onClick: null,\n  onDragStart: null,\n  onDrag: null,\n  onDragEnd: null,\n  _onMetrics: null,\n  getCursor,\n  getTooltip: null,\n  debug: false,\n  drawPickingColors: false\n};\nexport default class Deck {\n  constructor(props) {\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"width\", 0);\n\n    _defineProperty(this, \"height\", 0);\n\n    _defineProperty(this, \"userData\", {});\n\n    _defineProperty(this, \"canvas\", null);\n\n    _defineProperty(this, \"viewManager\", null);\n\n    _defineProperty(this, \"layerManager\", null);\n\n    _defineProperty(this, \"effectManager\", null);\n\n    _defineProperty(this, \"deckRenderer\", null);\n\n    _defineProperty(this, \"deckPicker\", null);\n\n    _defineProperty(this, \"eventManager\", null);\n\n    _defineProperty(this, \"tooltip\", null);\n\n    _defineProperty(this, \"metrics\", void 0);\n\n    _defineProperty(this, \"animationLoop\", void 0);\n\n    _defineProperty(this, \"stats\", void 0);\n\n    _defineProperty(this, \"viewState\", void 0);\n\n    _defineProperty(this, \"cursorState\", void 0);\n\n    _defineProperty(this, \"_needsRedraw\", void 0);\n\n    _defineProperty(this, \"_pickRequest\", void 0);\n\n    _defineProperty(this, \"_lastPointerDownInfo\", null);\n\n    _defineProperty(this, \"_metricsCounter\", void 0);\n\n    _defineProperty(this, \"_onPointerMove\", event => {\n      const {\n        _pickRequest\n      } = this;\n\n      if (event.type === 'pointerleave') {\n        _pickRequest.x = -1;\n        _pickRequest.y = -1;\n        _pickRequest.radius = 0;\n      } else if (event.leftButton || event.rightButton) {\n        return;\n      } else {\n        const pos = event.offsetCenter;\n\n        if (!pos) {\n          return;\n        }\n\n        _pickRequest.x = pos.x;\n        _pickRequest.y = pos.y;\n        _pickRequest.radius = this.props.pickingRadius;\n      }\n\n      if (this.layerManager) {\n        this.layerManager.context.mousePosition = {\n          x: _pickRequest.x,\n          y: _pickRequest.y\n        };\n      }\n\n      _pickRequest.event = event;\n    });\n\n    _defineProperty(this, \"_onEvent\", event => {\n      const eventOptions = EVENTS[event.type];\n      const pos = event.offsetCenter;\n\n      if (!eventOptions || !pos || !this.layerManager) {\n        return;\n      }\n\n      const layers = this.layerManager.getLayers();\n      const info = this.deckPicker.getLastPickedObject({\n        x: pos.x,\n        y: pos.y,\n        layers,\n        viewports: this.getViewports(pos)\n      }, this._lastPointerDownInfo);\n      const {\n        layer\n      } = info;\n      const layerHandler = layer && (layer[eventOptions.handler] || layer.props[eventOptions.handler]);\n      const rootHandler = this.props[eventOptions.handler];\n      let handled = false;\n\n      if (layerHandler) {\n        handled = layerHandler.call(layer, info, event);\n      }\n\n      if (!handled && rootHandler) {\n        rootHandler(info, event);\n      }\n    });\n\n    _defineProperty(this, \"_onPointerDown\", event => {\n      const pos = event.offsetCenter;\n\n      const pickedInfo = this._pick('pickObject', 'pickObject Time', {\n        x: pos.x,\n        y: pos.y,\n        radius: this.props.pickingRadius\n      });\n\n      this._lastPointerDownInfo = pickedInfo.result[0] || pickedInfo.emptyInfo;\n    });\n\n    this.props = { ...defaultProps,\n      ...props\n    };\n    props = this.props;\n    this._needsRedraw = 'Initial render';\n    this._pickRequest = {\n      mode: 'hover',\n      x: -1,\n      y: -1,\n      radius: 0,\n      event: null\n    };\n    this.cursorState = {\n      isHovering: false,\n      isDragging: false\n    };\n\n    if (props.viewState && props.initialViewState) {\n      log.warn('View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.')();\n    }\n\n    if (getBrowser() === 'IE') {\n      log.warn('IE 11 is not supported')();\n    }\n\n    this.viewState = props.initialViewState;\n\n    if (!props.gl) {\n      if (typeof document !== 'undefined') {\n        this.canvas = this._createCanvas(props);\n      }\n    }\n\n    this.animationLoop = this._createAnimationLoop(props);\n    this.stats = new Stats({\n      id: 'deck.gl'\n    });\n    this.metrics = {\n      fps: 0,\n      setPropsTime: 0,\n      updateAttributesTime: 0,\n      framesRedrawn: 0,\n      pickTime: 0,\n      pickCount: 0,\n      gpuTime: 0,\n      gpuTimePerFrame: 0,\n      cpuTime: 0,\n      cpuTimePerFrame: 0,\n      bufferMemory: 0,\n      textureMemory: 0,\n      renderbufferMemory: 0,\n      gpuMemory: 0\n    };\n    this._metricsCounter = 0;\n    this.setProps(props);\n\n    if (props._typedArrayManagerProps) {\n      typedArrayManager.setOptions(props._typedArrayManagerProps);\n    }\n\n    this.animationLoop.start();\n  }\n\n  finalize() {\n    var _this$layerManager, _this$viewManager, _this$effectManager, _this$deckRenderer, _this$deckPicker, _this$eventManager, _this$tooltip;\n\n    this.animationLoop.stop();\n    this.animationLoop = null;\n    this._lastPointerDownInfo = null;\n    (_this$layerManager = this.layerManager) === null || _this$layerManager === void 0 ? void 0 : _this$layerManager.finalize();\n    this.layerManager = null;\n    (_this$viewManager = this.viewManager) === null || _this$viewManager === void 0 ? void 0 : _this$viewManager.finalize();\n    this.viewManager = null;\n    (_this$effectManager = this.effectManager) === null || _this$effectManager === void 0 ? void 0 : _this$effectManager.finalize();\n    this.effectManager = null;\n    (_this$deckRenderer = this.deckRenderer) === null || _this$deckRenderer === void 0 ? void 0 : _this$deckRenderer.finalize();\n    this.deckRenderer = null;\n    (_this$deckPicker = this.deckPicker) === null || _this$deckPicker === void 0 ? void 0 : _this$deckPicker.finalize();\n    this.deckPicker = null;\n    (_this$eventManager = this.eventManager) === null || _this$eventManager === void 0 ? void 0 : _this$eventManager.destroy();\n    this.eventManager = null;\n    (_this$tooltip = this.tooltip) === null || _this$tooltip === void 0 ? void 0 : _this$tooltip.remove();\n    this.tooltip = null;\n\n    if (!this.props.canvas && !this.props.gl && this.canvas) {\n      var _this$canvas$parentEl;\n\n      (_this$canvas$parentEl = this.canvas.parentElement) === null || _this$canvas$parentEl === void 0 ? void 0 : _this$canvas$parentEl.removeChild(this.canvas);\n      this.canvas = null;\n    }\n  }\n\n  setProps(props) {\n    this.stats.get('setProps Time').timeStart();\n\n    if ('onLayerHover' in props) {\n      log.removed('onLayerHover', 'onHover')();\n    }\n\n    if ('onLayerClick' in props) {\n      log.removed('onLayerClick', 'onClick')();\n    }\n\n    if (props.initialViewState && !deepEqual(this.props.initialViewState, props.initialViewState)) {\n      this.viewState = props.initialViewState;\n    }\n\n    Object.assign(this.props, props);\n\n    this._setCanvasSize(this.props);\n\n    const resolvedProps = Object.create(this.props);\n    Object.assign(resolvedProps, {\n      views: this._getViews(),\n      width: this.width,\n      height: this.height,\n      viewState: this._getViewState()\n    });\n    this.animationLoop.setProps(resolvedProps);\n\n    if (this.layerManager) {\n      this.viewManager.setProps(resolvedProps);\n      this.layerManager.activateViewport(this.getViewports()[0]);\n      this.layerManager.setProps(resolvedProps);\n      this.effectManager.setProps(resolvedProps);\n      this.deckRenderer.setProps(resolvedProps);\n      this.deckPicker.setProps(resolvedProps);\n    }\n\n    this.stats.get('setProps Time').timeEnd();\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    if (!this.layerManager) {\n      return false;\n    }\n\n    if (this.props._animate) {\n      return 'Deck._animate';\n    }\n\n    let redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    const viewManagerNeedsRedraw = this.viewManager.needsRedraw(opts);\n    const layerManagerNeedsRedraw = this.layerManager.needsRedraw(opts);\n    const effectManagerNeedsRedraw = this.effectManager.needsRedraw(opts);\n    const deckRendererNeedsRedraw = this.deckRenderer.needsRedraw(opts);\n    redraw = redraw || viewManagerNeedsRedraw || layerManagerNeedsRedraw || effectManagerNeedsRedraw || deckRendererNeedsRedraw;\n    return redraw;\n  }\n\n  redraw(reason) {\n    if (!this.layerManager) {\n      return;\n    }\n\n    let redrawReason = this.needsRedraw({\n      clearRedrawFlags: true\n    });\n    redrawReason = reason || redrawReason;\n\n    if (!redrawReason) {\n      return;\n    }\n\n    this.stats.get('Redraw Count').incrementCount();\n\n    if (this.props._customRender) {\n      this.props._customRender(redrawReason);\n    } else {\n      this._drawLayers(redrawReason);\n    }\n  }\n\n  get isInitialized() {\n    return this.viewManager !== null;\n  }\n\n  getViews() {\n    assert(this.viewManager);\n    return this.viewManager.views;\n  }\n\n  getViewports(rect) {\n    assert(this.viewManager);\n    return this.viewManager.getViewports(rect);\n  }\n\n  pickObject(opts) {\n    const infos = this._pick('pickObject', 'pickObject Time', opts).result;\n\n    return infos.length ? infos[0] : null;\n  }\n\n  pickMultipleObjects(opts) {\n    opts.depth = opts.depth || 10;\n    return this._pick('pickObject', 'pickMultipleObjects Time', opts).result;\n  }\n\n  pickObjects(opts) {\n    return this._pick('pickObjects', 'pickObjects Time', opts);\n  }\n\n  _addResources(resources, forceUpdate = false) {\n    for (const id in resources) {\n      this.layerManager.resourceManager.add({\n        resourceId: id,\n        data: resources[id],\n        forceUpdate\n      });\n    }\n  }\n\n  _removeResources(resourceIds) {\n    for (const id of resourceIds) {\n      this.layerManager.resourceManager.remove(id);\n    }\n  }\n\n  _pick(method, statKey, opts) {\n    assert(this.deckPicker);\n    const {\n      stats\n    } = this;\n    stats.get('Pick Count').incrementCount();\n    stats.get(statKey).timeStart();\n    const infos = this.deckPicker[method]({\n      layers: this.layerManager.getLayers(opts),\n      views: this.viewManager.getViews(),\n      viewports: this.getViewports(opts),\n      onViewportActive: this.layerManager.activateViewport,\n      effects: this.effectManager.getEffects(),\n      ...opts\n    });\n    stats.get(statKey).timeEnd();\n    return infos;\n  }\n\n  _createCanvas(props) {\n    let canvas = props.canvas;\n\n    if (typeof canvas === 'string') {\n      canvas = document.getElementById(canvas);\n      assert(canvas);\n    }\n\n    if (!canvas) {\n      canvas = document.createElement('canvas');\n      canvas.id = props.id || 'deckgl-overlay';\n      const parent = props.parent || document.body;\n      parent.appendChild(canvas);\n    }\n\n    Object.assign(canvas.style, props.style);\n    return canvas;\n  }\n\n  _setCanvasSize(props) {\n    if (!this.canvas) {\n      return;\n    }\n\n    const {\n      width,\n      height\n    } = props;\n\n    if (width || width === 0) {\n      const cssWidth = Number.isFinite(width) ? \"\".concat(width, \"px\") : width;\n      this.canvas.style.width = cssWidth;\n    }\n\n    if (height || height === 0) {\n      var _props$style;\n\n      const cssHeight = Number.isFinite(height) ? \"\".concat(height, \"px\") : height;\n      this.canvas.style.position = ((_props$style = props.style) === null || _props$style === void 0 ? void 0 : _props$style.position) || 'absolute';\n      this.canvas.style.height = cssHeight;\n    }\n  }\n\n  _updateCanvasSize() {\n    const {\n      canvas\n    } = this;\n\n    if (!canvas) {\n      return;\n    }\n\n    const newWidth = canvas.clientWidth || canvas.width;\n    const newHeight = canvas.clientHeight || canvas.height;\n\n    if (newWidth !== this.width || newHeight !== this.height) {\n      var _this$viewManager2;\n\n      this.width = newWidth;\n      this.height = newHeight;\n      (_this$viewManager2 = this.viewManager) === null || _this$viewManager2 === void 0 ? void 0 : _this$viewManager2.setProps({\n        width: newWidth,\n        height: newHeight\n      });\n      this.props.onResize({\n        width: newWidth,\n        height: newHeight\n      });\n    }\n  }\n\n  _createAnimationLoop(props) {\n    const {\n      width,\n      height,\n      gl,\n      glOptions,\n      debug,\n      onError,\n      onBeforeRender,\n      onAfterRender,\n      useDevicePixels\n    } = props;\n    return new AnimationLoop({\n      width,\n      height,\n      useDevicePixels,\n      autoResizeViewport: false,\n      gl,\n      onCreateContext: opts => createGLContext({ ...glOptions,\n        ...opts,\n        canvas: this.canvas,\n        debug,\n        onContextLost: () => this._onContextLost()\n      }),\n      onInitialize: context => this._setGLContext(context.gl),\n      onRender: this._onRenderFrame.bind(this),\n      onBeforeRender,\n      onAfterRender,\n      onError\n    });\n  }\n\n  _getViewState() {\n    return this.props.viewState || this.viewState;\n  }\n\n  _getViews() {\n    let views = this.props.views || [new MapView({\n      id: 'default-view'\n    })];\n    views = Array.isArray(views) ? views : [views];\n\n    if (views.length && this.props.controller) {\n      views[0].props.controller = this.props.controller;\n    }\n\n    return views;\n  }\n\n  _onContextLost() {\n    const {\n      onError\n    } = this.props;\n\n    if (this.animationLoop && onError) {\n      onError(new Error('WebGL context is lost'));\n    }\n  }\n\n  _pickAndCallback() {\n    const {\n      _pickRequest\n    } = this;\n\n    if (_pickRequest.event) {\n      const {\n        result,\n        emptyInfo\n      } = this._pick('pickObject', 'pickObject Time', _pickRequest);\n\n      this.cursorState.isHovering = result.length > 0;\n      let pickedInfo = emptyInfo;\n      let handled = false;\n\n      for (const info of result) {\n        var _info$layer;\n\n        pickedInfo = info;\n        handled = ((_info$layer = info.layer) === null || _info$layer === void 0 ? void 0 : _info$layer.onHover(info, _pickRequest.event)) || handled;\n      }\n\n      if (!handled && this.props.onHover) {\n        this.props.onHover(pickedInfo, _pickRequest.event);\n      }\n\n      if (this.props.getTooltip && this.tooltip) {\n        const displayInfo = this.props.getTooltip(pickedInfo);\n        this.tooltip.setTooltip(displayInfo, pickedInfo.x, pickedInfo.y);\n      }\n\n      _pickRequest.event = null;\n    }\n  }\n\n  _updateCursor() {\n    const container = this.props.parent || this.canvas;\n\n    if (container) {\n      container.style.cursor = this.props.getCursor(this.cursorState);\n    }\n  }\n\n  _setGLContext(gl) {\n    if (this.layerManager) {\n      return;\n    }\n\n    if (!this.canvas) {\n      this.canvas = gl.canvas;\n      instrumentGLContext(gl, {\n        enable: true,\n        copyState: true\n      });\n    }\n\n    this.tooltip = new Tooltip(this.canvas);\n    setParameters(gl, {\n      blend: true,\n      blendFunc: [770, 771, 1, 771],\n      polygonOffsetFill: true,\n      depthTest: true,\n      depthFunc: 515\n    });\n    this.props.onWebGLInitialized(gl);\n    const timeline = new Timeline();\n    timeline.play();\n    this.animationLoop.attachTimeline(timeline);\n    this.eventManager = new EventManager(this.props.parent || gl.canvas, {\n      touchAction: this.props.touchAction,\n      recognizerOptions: this.props.eventRecognizerOptions,\n      events: {\n        pointerdown: this._onPointerDown,\n        pointermove: this._onPointerMove,\n        pointerleave: this._onPointerMove\n      }\n    });\n\n    for (const eventType in EVENTS) {\n      this.eventManager.on(eventType, this._onEvent);\n    }\n\n    this.viewManager = new ViewManager({\n      timeline,\n      eventManager: this.eventManager,\n      onViewStateChange: this._onViewStateChange.bind(this),\n      onInteractionStateChange: this._onInteractionStateChange.bind(this),\n      views: this._getViews(),\n      viewState: this._getViewState(),\n      width: this.width,\n      height: this.height\n    });\n    const viewport = this.viewManager.getViewports()[0];\n    this.layerManager = new LayerManager(gl, {\n      deck: this,\n      stats: this.stats,\n      viewport,\n      timeline\n    });\n    this.effectManager = new EffectManager();\n    this.deckRenderer = new DeckRenderer(gl);\n    this.deckPicker = new DeckPicker(gl);\n    this.setProps(this.props);\n\n    this._updateCanvasSize();\n\n    this.props.onLoad();\n  }\n\n  _drawLayers(redrawReason, renderOptions) {\n    const {\n      gl\n    } = this.layerManager.context;\n    setParameters(gl, this.props.parameters);\n    this.props.onBeforeRender({\n      gl\n    });\n    this.deckRenderer.renderLayers({\n      target: this.props._framebuffer,\n      layers: this.layerManager.getLayers(),\n      viewports: this.viewManager.getViewports(),\n      onViewportActive: this.layerManager.activateViewport,\n      views: this.viewManager.getViews(),\n      pass: 'screen',\n      redrawReason,\n      effects: this.effectManager.getEffects(),\n      ...renderOptions\n    });\n    this.props.onAfterRender({\n      gl\n    });\n  }\n\n  _onRenderFrame(animationProps) {\n    this._getFrameStats();\n\n    if (this._metricsCounter++ % 60 === 0) {\n      this._getMetrics();\n\n      this.stats.reset();\n      log.table(4, this.metrics)();\n\n      if (this.props._onMetrics) {\n        this.props._onMetrics(this.metrics);\n      }\n    }\n\n    this._updateCanvasSize();\n\n    this._updateCursor();\n\n    if (this.tooltip.isVisible && this.viewManager.needsRedraw()) {\n      this.tooltip.setTooltip(null);\n    }\n\n    this.layerManager.updateLayers();\n\n    this._pickAndCallback();\n\n    this.redraw();\n\n    if (this.viewManager) {\n      this.viewManager.updateViewStates();\n    }\n  }\n\n  _onViewStateChange(params) {\n    const viewState = this.props.onViewStateChange(params) || params.viewState;\n\n    if (this.viewState) {\n      this.viewState = { ...this.viewState,\n        [params.viewId]: viewState\n      };\n\n      if (!this.props.viewState) {\n        if (this.viewManager) {\n          this.viewManager.setProps({\n            viewState: this.viewState\n          });\n        }\n      }\n    }\n  }\n\n  _onInteractionStateChange(interactionState) {\n    this.cursorState.isDragging = interactionState.isDragging || false;\n    this.props.onInteractionStateChange(interactionState);\n  }\n\n  _getFrameStats() {\n    const {\n      stats\n    } = this;\n    stats.get('frameRate').timeEnd();\n    stats.get('frameRate').timeStart();\n    const animationLoopStats = this.animationLoop.stats;\n    stats.get('GPU Time').addTime(animationLoopStats.get('GPU Time').lastTiming);\n    stats.get('CPU Time').addTime(animationLoopStats.get('CPU Time').lastTiming);\n  }\n\n  _getMetrics() {\n    const {\n      metrics,\n      stats\n    } = this;\n    metrics.fps = stats.get('frameRate').getHz();\n    metrics.setPropsTime = stats.get('setProps Time').time;\n    metrics.updateAttributesTime = stats.get('Update Attributes').time;\n    metrics.framesRedrawn = stats.get('Redraw Count').count;\n    metrics.pickTime = stats.get('pickObject Time').time + stats.get('pickMultipleObjects Time').time + stats.get('pickObjects Time').time;\n    metrics.pickCount = stats.get('Pick Count').count;\n    metrics.gpuTime = stats.get('GPU Time').time;\n    metrics.cpuTime = stats.get('CPU Time').time;\n    metrics.gpuTimePerFrame = stats.get('GPU Time').getAverageTime();\n    metrics.cpuTimePerFrame = stats.get('CPU Time').getAverageTime();\n    const memoryStats = lumaStats.get('Memory Usage');\n    metrics.bufferMemory = memoryStats.get('Buffer Memory').count;\n    metrics.textureMemory = memoryStats.get('Texture Memory').count;\n    metrics.renderbufferMemory = memoryStats.get('Renderbuffer Memory').count;\n    metrics.gpuMemory = memoryStats.get('GPU Memory').count;\n  }\n\n}\n\n_defineProperty(Deck, \"defaultProps\", defaultProps);\n\n_defineProperty(Deck, \"VERSION\", deckGlobal.VERSION);\n//# sourceMappingURL=deck.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport default class ShaderAttribute {\n  constructor(dataColumn, opts) {\n    _defineProperty(this, \"opts\", void 0);\n\n    _defineProperty(this, \"source\", void 0);\n\n    this.opts = opts;\n    this.source = dataColumn;\n  }\n\n  get value() {\n    return this.source.value;\n  }\n\n  getValue() {\n    const buffer = this.source.getBuffer();\n    const accessor = this.getAccessor();\n\n    if (buffer) {\n      return [buffer, accessor];\n    }\n\n    const {\n      value\n    } = this.source;\n    const {\n      size\n    } = accessor;\n    let constantValue = value;\n\n    if (value && value.length !== size) {\n      constantValue = new Float32Array(size);\n      const index = accessor.elementOffset || 0;\n\n      for (let i = 0; i < size; ++i) {\n        constantValue[i] = value[index + i];\n      }\n    }\n\n    return constantValue;\n  }\n\n  getAccessor() {\n    return { ...this.source.getAccessor(),\n      ...this.opts\n    };\n  }\n\n}\n//# sourceMappingURL=shader-attribute.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { hasFeature, FEATURES, Buffer } from '@luma.gl/core';\nimport ShaderAttribute from './shader-attribute';\nimport { glArrayFromType } from './gl-utils';\nimport typedArrayManager from '../../utils/typed-array-manager';\nimport { toDoublePrecisionArray } from '../../utils/math-utils';\nimport log from '../../utils/log';\n\nfunction getStride(accessor) {\n  return accessor.stride || accessor.size * accessor.bytesPerElement;\n}\n\nfunction resolveShaderAttribute(baseAccessor, shaderAttributeOptions) {\n  if (shaderAttributeOptions.offset) {\n    log.removed('shaderAttribute.offset', 'vertexOffset, elementOffset')();\n  }\n\n  const stride = getStride(baseAccessor);\n  const vertexOffset = shaderAttributeOptions.vertexOffset !== undefined ? shaderAttributeOptions.vertexOffset : baseAccessor.vertexOffset || 0;\n  const elementOffset = shaderAttributeOptions.elementOffset || 0;\n  const offset = vertexOffset * stride + elementOffset * baseAccessor.bytesPerElement + (baseAccessor.offset || 0);\n  return { ...shaderAttributeOptions,\n    offset,\n    stride\n  };\n}\n\nfunction resolveDoublePrecisionShaderAttributes(baseAccessor, shaderAttributeOptions) {\n  const resolvedOptions = resolveShaderAttribute(baseAccessor, shaderAttributeOptions);\n  return {\n    high: resolvedOptions,\n    low: { ...resolvedOptions,\n      offset: resolvedOptions.offset + baseAccessor.size * 4\n    }\n  };\n}\n\nexport default class DataColumn {\n  constructor(gl, opts, state) {\n    _defineProperty(this, \"gl\", void 0);\n\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"size\", void 0);\n\n    _defineProperty(this, \"settings\", void 0);\n\n    _defineProperty(this, \"value\", void 0);\n\n    _defineProperty(this, \"doublePrecision\", void 0);\n\n    _defineProperty(this, \"_buffer\", void 0);\n\n    _defineProperty(this, \"state\", void 0);\n\n    this.gl = gl;\n    this.id = opts.id || '';\n    this.size = opts.size || 1;\n    const logicalType = opts.logicalType || opts.type;\n    const doublePrecision = logicalType === 5130;\n    let {\n      defaultValue\n    } = opts;\n    defaultValue = Number.isFinite(defaultValue) ? [defaultValue] : defaultValue || new Array(this.size).fill(0);\n    let bufferType;\n\n    if (doublePrecision) {\n      bufferType = 5126;\n    } else if (!logicalType && opts.isIndexed) {\n      bufferType = gl && hasFeature(gl, FEATURES.ELEMENT_INDEX_UINT32) ? 5125 : 5123;\n    } else {\n      bufferType = logicalType || 5126;\n    }\n\n    let defaultType = glArrayFromType(logicalType || bufferType || 5126);\n    this.doublePrecision = doublePrecision;\n\n    if (doublePrecision && opts.fp64 === false) {\n      defaultType = Float32Array;\n    }\n\n    this.value = null;\n    this.settings = { ...opts,\n      defaultType,\n      defaultValue: defaultValue,\n      logicalType,\n      type: bufferType,\n      size: this.size,\n      bytesPerElement: defaultType.BYTES_PER_ELEMENT\n    };\n    this.state = { ...state,\n      externalBuffer: null,\n      bufferAccessor: this.settings,\n      allocatedValue: null,\n      numInstances: 0,\n      bounds: null,\n      constant: false\n    };\n    this._buffer = null;\n  }\n\n  get isConstant() {\n    return this.state.constant;\n  }\n\n  get buffer() {\n    if (!this._buffer) {\n      const {\n        isIndexed,\n        type\n      } = this.settings;\n      this._buffer = new Buffer(this.gl, {\n        id: this.id,\n        target: isIndexed ? 34963 : 34962,\n        accessor: {\n          type\n        }\n      });\n    }\n\n    return this._buffer;\n  }\n\n  get byteOffset() {\n    const accessor = this.getAccessor();\n\n    if (accessor.vertexOffset) {\n      return accessor.vertexOffset * getStride(accessor);\n    }\n\n    return 0;\n  }\n\n  get numInstances() {\n    return this.state.numInstances;\n  }\n\n  set numInstances(n) {\n    this.state.numInstances = n;\n  }\n\n  delete() {\n    if (this._buffer) {\n      this._buffer.delete();\n\n      this._buffer = null;\n    }\n\n    typedArrayManager.release(this.state.allocatedValue);\n  }\n\n  getShaderAttributes(id, options) {\n    if (this.doublePrecision) {\n      const shaderAttributes = {};\n      const isBuffer64Bit = this.value instanceof Float64Array;\n      const doubleShaderAttributeDefs = resolveDoublePrecisionShaderAttributes(this.getAccessor(), options || {});\n      shaderAttributes[id] = new ShaderAttribute(this, doubleShaderAttributeDefs.high);\n      shaderAttributes[\"\".concat(id, \"64Low\")] = isBuffer64Bit ? new ShaderAttribute(this, doubleShaderAttributeDefs.low) : new Float32Array(this.size);\n      return shaderAttributes;\n    }\n\n    if (options) {\n      const shaderAttributeDef = resolveShaderAttribute(this.getAccessor(), options);\n      return {\n        [id]: new ShaderAttribute(this, shaderAttributeDef)\n      };\n    }\n\n    return {\n      [id]: this\n    };\n  }\n\n  getBuffer() {\n    if (this.state.constant) {\n      return null;\n    }\n\n    return this.state.externalBuffer || this._buffer;\n  }\n\n  getValue() {\n    if (this.state.constant) {\n      return this.value;\n    }\n\n    return [this.getBuffer(), this.getAccessor()];\n  }\n\n  getAccessor() {\n    return this.state.bufferAccessor;\n  }\n\n  getBounds() {\n    if (this.state.bounds) {\n      return this.state.bounds;\n    }\n\n    let result = null;\n\n    if (this.state.constant && this.value) {\n      const min = Array.from(this.value);\n      result = [min, min];\n    } else {\n      const {\n        value,\n        numInstances,\n        size\n      } = this;\n      const len = numInstances * size;\n\n      if (value && len && value.length >= len) {\n        const min = new Array(size).fill(Infinity);\n        const max = new Array(size).fill(-Infinity);\n\n        for (let i = 0; i < len;) {\n          for (let j = 0; j < size; j++) {\n            const v = value[i++];\n            if (v < min[j]) min[j] = v;\n            if (v > max[j]) max[j] = v;\n          }\n        }\n\n        result = [min, max];\n      }\n    }\n\n    this.state.bounds = result;\n    return result;\n  }\n\n  setData(data) {\n    const {\n      state\n    } = this;\n    let opts;\n\n    if (ArrayBuffer.isView(data)) {\n      opts = {\n        value: data\n      };\n    } else if (data instanceof Buffer) {\n      opts = {\n        buffer: data\n      };\n    } else {\n      opts = data;\n    }\n\n    const accessor = { ...this.settings,\n      ...opts\n    };\n    state.bufferAccessor = accessor;\n    state.bounds = null;\n\n    if (opts.constant) {\n      let value = opts.value;\n      value = this._normalizeValue(value, [], 0);\n\n      if (this.settings.normalized) {\n        value = this.normalizeConstant(value);\n      }\n\n      const hasChanged = !state.constant || !this._areValuesEqual(value, this.value);\n\n      if (!hasChanged) {\n        return false;\n      }\n\n      state.externalBuffer = null;\n      state.constant = true;\n      this.value = value;\n    } else if (opts.buffer) {\n      const buffer = opts.buffer;\n      state.externalBuffer = buffer;\n      state.constant = false;\n      this.value = opts.value || null;\n      const isBuffer64Bit = opts.value instanceof Float64Array;\n      accessor.type = opts.type || buffer.accessor.type;\n      accessor.bytesPerElement = buffer.accessor.BYTES_PER_ELEMENT * (isBuffer64Bit ? 2 : 1);\n      accessor.stride = getStride(accessor);\n    } else if (opts.value) {\n      this._checkExternalBuffer(opts);\n\n      let value = opts.value;\n      state.externalBuffer = null;\n      state.constant = false;\n      this.value = value;\n      accessor.bytesPerElement = value.BYTES_PER_ELEMENT;\n      accessor.stride = getStride(accessor);\n      const {\n        buffer,\n        byteOffset\n      } = this;\n\n      if (this.doublePrecision && value instanceof Float64Array) {\n        value = toDoublePrecisionArray(value, accessor);\n      }\n\n      const requiredBufferSize = value.byteLength + byteOffset + accessor.stride * 2;\n\n      if (buffer.byteLength < requiredBufferSize) {\n        buffer.reallocate(requiredBufferSize);\n      }\n\n      buffer.setAccessor(null);\n      buffer.subData({\n        data: value,\n        offset: byteOffset\n      });\n      accessor.type = opts.type || buffer.accessor.type;\n    }\n\n    return true;\n  }\n\n  updateSubBuffer(opts = {}) {\n    this.state.bounds = null;\n    const value = this.value;\n    const {\n      startOffset = 0,\n      endOffset\n    } = opts;\n    this.buffer.subData({\n      data: this.doublePrecision && value instanceof Float64Array ? toDoublePrecisionArray(value, {\n        size: this.size,\n        startIndex: startOffset,\n        endIndex: endOffset\n      }) : value.subarray(startOffset, endOffset),\n      offset: startOffset * value.BYTES_PER_ELEMENT + this.byteOffset\n    });\n  }\n\n  allocate(numInstances, copy = false) {\n    const {\n      state\n    } = this;\n    const oldValue = state.allocatedValue;\n    const value = typedArrayManager.allocate(oldValue, numInstances + 1, {\n      size: this.size,\n      type: this.settings.defaultType,\n      copy\n    });\n    this.value = value;\n    const {\n      buffer,\n      byteOffset\n    } = this;\n\n    if (buffer.byteLength < value.byteLength + byteOffset) {\n      buffer.reallocate(value.byteLength + byteOffset);\n\n      if (copy && oldValue) {\n        buffer.subData({\n          data: oldValue instanceof Float64Array ? toDoublePrecisionArray(oldValue, this) : oldValue,\n          offset: byteOffset\n        });\n      }\n    }\n\n    state.allocatedValue = value;\n    state.constant = false;\n    state.externalBuffer = null;\n    state.bufferAccessor = this.settings;\n    return true;\n  }\n\n  _checkExternalBuffer(opts) {\n    const {\n      value\n    } = opts;\n\n    if (!ArrayBuffer.isView(value)) {\n      throw new Error(\"Attribute \".concat(this.id, \" value is not TypedArray\"));\n    }\n\n    const ArrayType = this.settings.defaultType;\n    let illegalArrayType = false;\n\n    if (this.doublePrecision) {\n      illegalArrayType = value.BYTES_PER_ELEMENT < 4;\n    }\n\n    if (illegalArrayType) {\n      throw new Error(\"Attribute \".concat(this.id, \" does not support \").concat(value.constructor.name));\n    }\n\n    if (!(value instanceof ArrayType) && this.settings.normalized && !('normalized' in opts)) {\n      log.warn(\"Attribute \".concat(this.id, \" is normalized\"))();\n    }\n  }\n\n  normalizeConstant(value) {\n    switch (this.settings.type) {\n      case 5120:\n        return new Float32Array(value).map(x => (x + 128) / 255 * 2 - 1);\n\n      case 5122:\n        return new Float32Array(value).map(x => (x + 32768) / 65535 * 2 - 1);\n\n      case 5121:\n        return new Float32Array(value).map(x => x / 255);\n\n      case 5123:\n        return new Float32Array(value).map(x => x / 65535);\n\n      default:\n        return value;\n    }\n  }\n\n  _normalizeValue(value, out, start) {\n    const {\n      defaultValue,\n      size\n    } = this.settings;\n\n    if (Number.isFinite(value)) {\n      out[start] = value;\n      return out;\n    }\n\n    if (!value) {\n      out[start] = defaultValue[0];\n      return out;\n    }\n\n    switch (size) {\n      case 4:\n        out[start + 3] = Number.isFinite(value[3]) ? value[3] : defaultValue[3];\n\n      case 3:\n        out[start + 2] = Number.isFinite(value[2]) ? value[2] : defaultValue[2];\n\n      case 2:\n        out[start + 1] = Number.isFinite(value[1]) ? value[1] : defaultValue[1];\n\n      case 1:\n        out[start + 0] = Number.isFinite(value[0]) ? value[0] : defaultValue[0];\n        break;\n\n      default:\n        let i = size;\n\n        while (--i >= 0) {\n          out[start + i] = Number.isFinite(value[i]) ? value[i] : defaultValue[i];\n        }\n\n    }\n\n    return out;\n  }\n\n  _areValuesEqual(value1, value2) {\n    if (!value1 || !value2) {\n      return false;\n    }\n\n    const {\n      size\n    } = this;\n\n    for (let i = 0; i < size; i++) {\n      if (value1[i] !== value2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n}\n//# sourceMappingURL=data-column.js.map","const EMPTY_ARRAY = [];\nconst placeholderArray = [];\nexport function createIterable(data, startRow = 0, endRow = Infinity) {\n  let iterable = EMPTY_ARRAY;\n  const objectInfo = {\n    index: -1,\n    data,\n    target: []\n  };\n\n  if (!data) {\n    iterable = EMPTY_ARRAY;\n  } else if (typeof data[Symbol.iterator] === 'function') {\n    iterable = data;\n  } else if (data.length > 0) {\n    placeholderArray.length = data.length;\n    iterable = placeholderArray;\n  }\n\n  if (startRow > 0 || Number.isFinite(endRow)) {\n    iterable = (Array.isArray(iterable) ? iterable : Array.from(iterable)).slice(startRow, endRow);\n    objectInfo.index = startRow - 1;\n  }\n\n  return {\n    iterable,\n    objectInfo\n  };\n}\nexport function isAsyncIterable(data) {\n  return data && data[Symbol.asyncIterator];\n}\nexport function getAccessorFromBuffer(typedArray, options) {\n  const {\n    size,\n    stride,\n    offset,\n    startIndices,\n    nested\n  } = options;\n  const bytesPerElement = typedArray.BYTES_PER_ELEMENT;\n  const elementStride = stride ? stride / bytesPerElement : size;\n  const elementOffset = offset ? offset / bytesPerElement : 0;\n  const vertexCount = Math.floor((typedArray.length - elementOffset) / elementStride);\n  return (_, {\n    index,\n    target\n  }) => {\n    if (!startIndices) {\n      const sourceIndex = index * elementStride + elementOffset;\n\n      for (let j = 0; j < size; j++) {\n        target[j] = typedArray[sourceIndex + j];\n      }\n\n      return target;\n    }\n\n    const startIndex = startIndices[index];\n    const endIndex = startIndices[index + 1] || vertexCount;\n    let result;\n\n    if (nested) {\n      result = new Array(endIndex - startIndex);\n\n      for (let i = startIndex; i < endIndex; i++) {\n        const sourceIndex = i * elementStride + elementOffset;\n        target = new Array(size);\n\n        for (let j = 0; j < size; j++) {\n          target[j] = typedArray[sourceIndex + j];\n        }\n\n        result[i - startIndex] = target;\n      }\n    } else if (elementStride === size) {\n      result = typedArray.subarray(startIndex * size + elementOffset, endIndex * size + elementOffset);\n    } else {\n      result = new typedArray.constructor((endIndex - startIndex) * size);\n      let targetIndex = 0;\n\n      for (let i = startIndex; i < endIndex; i++) {\n        const sourceIndex = i * elementStride + elementOffset;\n\n        for (let j = 0; j < size; j++) {\n          result[targetIndex++] = typedArray[sourceIndex + j];\n        }\n      }\n    }\n\n    return result;\n  };\n}\n//# sourceMappingURL=iterable-utils.js.map","export const EMPTY = [];\nexport const FULL = [[0, Infinity]];\nexport function add(rangeList, range) {\n  if (rangeList === FULL) {\n    return rangeList;\n  }\n\n  if (range[0] < 0) {\n    range[0] = 0;\n  }\n\n  if (range[0] >= range[1]) {\n    return rangeList;\n  }\n\n  const newRangeList = [];\n  const len = rangeList.length;\n  let insertPosition = 0;\n\n  for (let i = 0; i < len; i++) {\n    const range0 = rangeList[i];\n\n    if (range0[1] < range[0]) {\n      newRangeList.push(range0);\n      insertPosition = i + 1;\n    } else if (range0[0] > range[1]) {\n      newRangeList.push(range0);\n    } else {\n      range = [Math.min(range0[0], range[0]), Math.max(range0[1], range[1])];\n    }\n  }\n\n  newRangeList.splice(insertPosition, 0, range);\n  return newRangeList;\n}\n//# sourceMappingURL=range.js.map","function padArrayChunk(options) {\n  const {\n    source,\n    target,\n    start = 0,\n    size,\n    getData\n  } = options;\n  const end = options.end || target.length;\n  const sourceLength = source.length;\n  const targetLength = end - start;\n\n  if (sourceLength > targetLength) {\n    target.set(source.subarray(0, targetLength), start);\n    return;\n  }\n\n  target.set(source, start);\n\n  if (!getData) {\n    return;\n  }\n\n  let i = sourceLength;\n\n  while (i < targetLength) {\n    const datum = getData(i, source);\n\n    for (let j = 0; j < size; j++) {\n      target[start + i] = datum[j] || 0;\n      i++;\n    }\n  }\n}\n\nexport function padArray({\n  source,\n  target,\n  size,\n  getData,\n  sourceStartIndices,\n  targetStartIndices\n}) {\n  if (!Array.isArray(targetStartIndices)) {\n    padArrayChunk({\n      source,\n      target,\n      size,\n      getData\n    });\n    return target;\n  }\n\n  let sourceIndex = 0;\n  let targetIndex = 0;\n\n  const getChunkData = getData && ((i, chunk) => getData(i + targetIndex, chunk));\n\n  const n = Math.min(sourceStartIndices.length, targetStartIndices.length);\n\n  for (let i = 1; i < n; i++) {\n    const nextSourceIndex = sourceStartIndices[i] * size;\n    const nextTargetIndex = targetStartIndices[i] * size;\n    padArrayChunk({\n      source: source.subarray(sourceIndex, nextSourceIndex),\n      target,\n      start: targetIndex,\n      end: nextTargetIndex,\n      size,\n      getData: getChunkData\n    });\n    sourceIndex = nextSourceIndex;\n    targetIndex = nextTargetIndex;\n  }\n\n  if (targetIndex < target.length) {\n    padArrayChunk({\n      source: [],\n      target,\n      start: targetIndex,\n      size,\n      getData: getChunkData\n    });\n  }\n\n  return target;\n}\n//# sourceMappingURL=array-utils.js.map","import { padArray } from '../../utils/array-utils';\nconst DEFAULT_TRANSITION_SETTINGS = {\n  interpolation: {\n    duration: 0,\n    easing: t => t\n  },\n  spring: {\n    stiffness: 0.05,\n    damping: 0.5\n  }\n};\nexport function normalizeTransitionSettings(userSettings, layerSettings) {\n  if (!userSettings) {\n    return null;\n  }\n\n  if (Number.isFinite(userSettings)) {\n    userSettings = {\n      type: 'interpolation',\n      duration: userSettings\n    };\n  }\n\n  const type = userSettings.type || 'interpolation';\n  return { ...DEFAULT_TRANSITION_SETTINGS[type],\n    ...layerSettings,\n    ...userSettings,\n    type\n  };\n}\nexport function getSourceBufferAttribute(gl, attribute) {\n  const buffer = attribute.getBuffer();\n\n  if (buffer) {\n    return [buffer, {\n      divisor: 0,\n      size: attribute.size,\n      normalized: attribute.settings.normalized\n    }];\n  }\n\n  return attribute.value;\n}\nexport function getAttributeTypeFromSize(size) {\n  switch (size) {\n    case 1:\n      return 'float';\n\n    case 2:\n      return 'vec2';\n\n    case 3:\n      return 'vec3';\n\n    case 4:\n      return 'vec4';\n\n    default:\n      throw new Error(\"No defined attribute type for size \\\"\".concat(size, \"\\\"\"));\n  }\n}\nexport function cycleBuffers(buffers) {\n  buffers.push(buffers.shift());\n}\nexport function getAttributeBufferLength(attribute, numInstances) {\n  const {\n    doublePrecision,\n    settings,\n    value,\n    size\n  } = attribute;\n  const multiplier = doublePrecision && value instanceof Float64Array ? 2 : 1;\n  return (settings.noAlloc ? value.length : numInstances * size) * multiplier;\n}\nexport function padBuffer({\n  buffer,\n  numInstances,\n  attribute,\n  fromLength,\n  fromStartIndices,\n  getData = x => x\n}) {\n  const precisionMultiplier = attribute.doublePrecision && attribute.value instanceof Float64Array ? 2 : 1;\n  const size = attribute.size * precisionMultiplier;\n  const byteOffset = attribute.byteOffset;\n  const toStartIndices = attribute.startIndices;\n  const hasStartIndices = fromStartIndices && toStartIndices;\n  const toLength = getAttributeBufferLength(attribute, numInstances);\n  const isConstant = attribute.isConstant;\n\n  if (!hasStartIndices && fromLength >= toLength) {\n    return;\n  }\n\n  const toData = isConstant ? attribute.value : attribute.getBuffer().getData({\n    srcByteOffset: byteOffset\n  });\n\n  if (attribute.settings.normalized && !isConstant) {\n    const getter = getData;\n\n    getData = (value, chunk) => attribute.normalizeConstant(getter(value, chunk));\n  }\n\n  const getMissingData = isConstant ? (i, chunk) => getData(toData, chunk) : (i, chunk) => getData(toData.subarray(i, i + size), chunk);\n  const source = buffer.getData({\n    length: fromLength\n  });\n  const data = new Float32Array(toLength);\n  padArray({\n    source,\n    target: data,\n    sourceStartIndices: fromStartIndices,\n    targetStartIndices: toStartIndices,\n    size,\n    getData: getMissingData\n  });\n\n  if (buffer.byteLength < data.byteLength + byteOffset) {\n    buffer.reallocate(data.byteLength + byteOffset);\n  }\n\n  buffer.subData({\n    data,\n    offset: byteOffset\n  });\n}\n//# sourceMappingURL=attribute-transition-utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport DataColumn from './data-column';\nimport assert from '../../utils/assert';\nimport { createIterable, getAccessorFromBuffer } from '../../utils/iterable-utils';\nimport { fillArray } from '../../utils/flatten';\nimport * as range from '../../utils/range';\nimport { normalizeTransitionSettings } from './attribute-transition-utils';\nexport default class Attribute extends DataColumn {\n  constructor(gl, opts) {\n    super(gl, opts, {\n      startIndices: null,\n      lastExternalBuffer: null,\n      binaryValue: null,\n      binaryAccessor: null,\n      needsUpdate: true,\n      needsRedraw: false,\n      updateRanges: range.FULL\n    });\n\n    _defineProperty(this, \"constant\", false);\n\n    this.settings.update = opts.update || (opts.accessor ? this._autoUpdater : undefined);\n    Object.seal(this.settings);\n    Object.seal(this.state);\n\n    this._validateAttributeUpdaters();\n  }\n\n  get startIndices() {\n    return this.state.startIndices;\n  }\n\n  set startIndices(layout) {\n    this.state.startIndices = layout;\n  }\n\n  needsUpdate() {\n    return this.state.needsUpdate;\n  }\n\n  needsRedraw({\n    clearChangedFlags = false\n  } = {}) {\n    const needsRedraw = this.state.needsRedraw;\n    this.state.needsRedraw = needsRedraw && !clearChangedFlags;\n    return needsRedraw;\n  }\n\n  getUpdateTriggers() {\n    const {\n      accessor\n    } = this.settings;\n    return [this.id].concat(typeof accessor !== 'function' && accessor || []);\n  }\n\n  supportsTransition() {\n    return Boolean(this.settings.transition);\n  }\n\n  getTransitionSetting(opts) {\n    if (!opts || !this.supportsTransition()) {\n      return null;\n    }\n\n    const {\n      accessor\n    } = this.settings;\n    const layerSettings = this.settings.transition;\n    const userSettings = Array.isArray(accessor) ? opts[accessor.find(a => opts[a])] : opts[accessor];\n    return normalizeTransitionSettings(userSettings, layerSettings);\n  }\n\n  setNeedsUpdate(reason = this.id, dataRange) {\n    this.state.needsUpdate = this.state.needsUpdate || reason;\n    this.setNeedsRedraw(reason);\n\n    if (dataRange) {\n      const {\n        startRow = 0,\n        endRow = Infinity\n      } = dataRange;\n      this.state.updateRanges = range.add(this.state.updateRanges, [startRow, endRow]);\n    } else {\n      this.state.updateRanges = range.FULL;\n    }\n  }\n\n  clearNeedsUpdate() {\n    this.state.needsUpdate = false;\n    this.state.updateRanges = range.EMPTY;\n  }\n\n  setNeedsRedraw(reason = this.id) {\n    this.state.needsRedraw = this.state.needsRedraw || reason;\n  }\n\n  allocate(numInstances) {\n    const {\n      state,\n      settings\n    } = this;\n\n    if (settings.noAlloc) {\n      return false;\n    }\n\n    if (settings.update) {\n      super.allocate(numInstances, state.updateRanges !== range.FULL);\n      return true;\n    }\n\n    return false;\n  }\n\n  updateBuffer({\n    numInstances,\n    data,\n    props,\n    context\n  }) {\n    if (!this.needsUpdate()) {\n      return false;\n    }\n\n    const {\n      state: {\n        updateRanges\n      },\n      settings: {\n        update,\n        noAlloc\n      }\n    } = this;\n    let updated = true;\n\n    if (update) {\n      for (const [startRow, endRow] of updateRanges) {\n        update.call(context, this, {\n          data,\n          startRow,\n          endRow,\n          props,\n          numInstances\n        });\n      }\n\n      if (!this.value) {} else if (this.constant || this.buffer.byteLength < this.value.byteLength + this.byteOffset) {\n        this.setData({\n          value: this.value,\n          constant: this.constant\n        });\n        this.constant = false;\n      } else {\n        for (const [startRow, endRow] of updateRanges) {\n          const startOffset = Number.isFinite(startRow) ? this.getVertexOffset(startRow) : 0;\n          const endOffset = Number.isFinite(endRow) ? this.getVertexOffset(endRow) : noAlloc || !Number.isFinite(numInstances) ? this.value.length : numInstances * this.size;\n          super.updateSubBuffer({\n            startOffset,\n            endOffset\n          });\n        }\n      }\n\n      this._checkAttributeArray();\n    } else {\n      updated = false;\n    }\n\n    this.clearNeedsUpdate();\n    this.setNeedsRedraw();\n    return updated;\n  }\n\n  setConstantValue(value) {\n    if (value === undefined || typeof value === 'function') {\n      return false;\n    }\n\n    const hasChanged = this.setData({\n      constant: true,\n      value\n    });\n\n    if (hasChanged) {\n      this.setNeedsRedraw();\n    }\n\n    this.clearNeedsUpdate();\n    return true;\n  }\n\n  setExternalBuffer(buffer) {\n    const {\n      state\n    } = this;\n\n    if (!buffer) {\n      state.lastExternalBuffer = null;\n      return false;\n    }\n\n    this.clearNeedsUpdate();\n\n    if (state.lastExternalBuffer === buffer) {\n      return true;\n    }\n\n    state.lastExternalBuffer = buffer;\n    this.setNeedsRedraw();\n    this.setData(buffer);\n    return true;\n  }\n\n  setBinaryValue(buffer, startIndices = null) {\n    const {\n      state,\n      settings\n    } = this;\n\n    if (!buffer) {\n      state.binaryValue = null;\n      state.binaryAccessor = null;\n      return false;\n    }\n\n    if (settings.noAlloc) {\n      return false;\n    }\n\n    if (state.binaryValue === buffer) {\n      this.clearNeedsUpdate();\n      return true;\n    }\n\n    state.binaryValue = buffer;\n    this.setNeedsRedraw();\n    const needsUpdate = settings.transform || startIndices !== this.startIndices;\n\n    if (needsUpdate) {\n      if (ArrayBuffer.isView(buffer)) {\n        buffer = {\n          value: buffer\n        };\n      }\n\n      const binaryValue = buffer;\n      assert(ArrayBuffer.isView(binaryValue.value), \"invalid \".concat(settings.accessor));\n      const needsNormalize = Boolean(binaryValue.size) && binaryValue.size !== this.size;\n      state.binaryAccessor = getAccessorFromBuffer(binaryValue.value, {\n        size: binaryValue.size || this.size,\n        stride: binaryValue.stride,\n        offset: binaryValue.offset,\n        startIndices: startIndices,\n        nested: needsNormalize\n      });\n      return false;\n    }\n\n    this.clearNeedsUpdate();\n    this.setData(buffer);\n    return true;\n  }\n\n  getVertexOffset(row) {\n    const {\n      startIndices\n    } = this;\n    const vertexIndex = startIndices ? row < startIndices.length ? startIndices[row] : this.numInstances : row;\n    return vertexIndex * this.size;\n  }\n\n  getShaderAttributes() {\n    const shaderAttributeDefs = this.settings.shaderAttributes || {\n      [this.id]: null\n    };\n    const shaderAttributes = {};\n\n    for (const shaderAttributeName in shaderAttributeDefs) {\n      Object.assign(shaderAttributes, super.getShaderAttributes(shaderAttributeName, shaderAttributeDefs[shaderAttributeName]));\n    }\n\n    return shaderAttributes;\n  }\n\n  _autoUpdater(attribute, {\n    data,\n    startRow,\n    endRow,\n    props,\n    numInstances\n  }) {\n    if (attribute.constant) {\n      return;\n    }\n\n    const {\n      settings,\n      state,\n      value,\n      size,\n      startIndices\n    } = attribute;\n    const {\n      accessor,\n      transform\n    } = settings;\n    const accessorFunc = state.binaryAccessor || (typeof accessor === 'function' ? accessor : props[accessor]);\n    assert(typeof accessorFunc === 'function', \"accessor \\\"\".concat(accessor, \"\\\" is not a function\"));\n    let i = attribute.getVertexOffset(startRow);\n    const {\n      iterable,\n      objectInfo\n    } = createIterable(data, startRow, endRow);\n\n    for (const object of iterable) {\n      objectInfo.index++;\n      let objectValue = accessorFunc(object, objectInfo);\n\n      if (transform) {\n        objectValue = transform.call(this, objectValue);\n      }\n\n      if (startIndices) {\n        const numVertices = (objectInfo.index < startIndices.length - 1 ? startIndices[objectInfo.index + 1] : numInstances) - startIndices[objectInfo.index];\n\n        if (objectValue && Array.isArray(objectValue[0])) {\n          let startIndex = i;\n\n          for (const item of objectValue) {\n            attribute._normalizeValue(item, value, startIndex);\n\n            startIndex += size;\n          }\n        } else if (objectValue && objectValue.length > size) {\n          value.set(objectValue, i);\n        } else {\n          attribute._normalizeValue(objectValue, objectInfo.target, 0);\n\n          fillArray({\n            target: value,\n            source: objectInfo.target,\n            start: i,\n            count: numVertices\n          });\n        }\n\n        i += numVertices * size;\n      } else {\n        attribute._normalizeValue(objectValue, value, i);\n\n        i += size;\n      }\n    }\n  }\n\n  _validateAttributeUpdaters() {\n    const {\n      settings\n    } = this;\n    const hasUpdater = settings.noAlloc || typeof settings.update === 'function';\n\n    if (!hasUpdater) {\n      throw new Error(\"Attribute \".concat(this.id, \" missing update or accessor\"));\n    }\n  }\n\n  _checkAttributeArray() {\n    const {\n      value\n    } = this;\n    const limit = Math.min(4, this.size);\n\n    if (value && value.length >= limit) {\n      let valid = true;\n\n      switch (limit) {\n        case 4:\n          valid = valid && Number.isFinite(value[3]);\n\n        case 3:\n          valid = valid && Number.isFinite(value[2]);\n\n        case 2:\n          valid = valid && Number.isFinite(value[1]);\n\n        case 1:\n          valid = valid && Number.isFinite(value[0]);\n          break;\n\n        default:\n          valid = false;\n      }\n\n      if (!valid) {\n        throw new Error(\"Illegal attribute generated for \".concat(this.id));\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=attribute.js.map","export function glArrayFromType(glType) {\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5130:\n      return Float64Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return Uint8ClampedArray;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Unknown GL type');\n  }\n}\n//# sourceMappingURL=gl-utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Buffer, Transform } from '@luma.gl/core';\nimport Attribute from '../lib/attribute/attribute';\nimport { padBuffer, getAttributeTypeFromSize, getSourceBufferAttribute, getAttributeBufferLength, cycleBuffers } from '../lib/attribute/attribute-transition-utils';\nimport Transition from './transition';\nexport default class GPUInterpolationTransition {\n  constructor({\n    gl,\n    attribute,\n    timeline\n  }) {\n    _defineProperty(this, \"gl\", void 0);\n\n    _defineProperty(this, \"type\", 'interpolation');\n\n    _defineProperty(this, \"attributeInTransition\", void 0);\n\n    _defineProperty(this, \"settings\", void 0);\n\n    _defineProperty(this, \"attribute\", void 0);\n\n    _defineProperty(this, \"transition\", void 0);\n\n    _defineProperty(this, \"currentStartIndices\", void 0);\n\n    _defineProperty(this, \"currentLength\", void 0);\n\n    _defineProperty(this, \"transform\", void 0);\n\n    _defineProperty(this, \"buffers\", void 0);\n\n    this.gl = gl;\n    this.transition = new Transition(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new Attribute(gl, attribute.settings);\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.transform = getTransform(gl, attribute);\n    const bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts)];\n  }\n\n  get inProgress() {\n    return this.transition.inProgress;\n  }\n\n  start(transitionSettings, numInstances) {\n    if (transitionSettings.duration <= 0) {\n      this.transition.cancel();\n      return;\n    }\n\n    this.settings = transitionSettings;\n    const {\n      gl,\n      buffers,\n      attribute\n    } = this;\n    cycleBuffers(buffers);\n    const padBufferOpts = {\n      numInstances,\n      attribute,\n      fromLength: this.currentLength,\n      fromStartIndices: this.currentStartIndices,\n      getData: transitionSettings.enter\n    };\n\n    for (const buffer of buffers) {\n      padBuffer({\n        buffer,\n        ...padBufferOpts\n      });\n    }\n\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = getAttributeBufferLength(attribute, numInstances);\n    this.attributeInTransition.setData({\n      buffer: buffers[1],\n      value: attribute.value\n    });\n    this.transition.start(transitionSettings);\n    this.transform.update({\n      elementCount: Math.floor(this.currentLength / attribute.size),\n      sourceBuffers: {\n        aFrom: buffers[0],\n        aTo: getSourceBufferAttribute(gl, attribute)\n      },\n      feedbackBuffers: {\n        vCurrent: buffers[1]\n      }\n    });\n  }\n\n  update() {\n    const updated = this.transition.update();\n\n    if (updated) {\n      const {\n        duration,\n        easing\n      } = this.settings;\n      const {\n        time\n      } = this.transition;\n      let t = time / duration;\n\n      if (easing) {\n        t = easing(t);\n      }\n\n      this.transform.run({\n        uniforms: {\n          time: t\n        }\n      });\n    }\n\n    return updated;\n  }\n\n  cancel() {\n    this.transition.cancel();\n    this.transform.delete();\n\n    for (const buffer of this.buffers) {\n      buffer.delete();\n    }\n\n    this.buffers.length = 0;\n  }\n\n}\nconst vs = \"\\n#define SHADER_NAME interpolation-transition-vertex-shader\\n\\nuniform float time;\\nattribute ATTRIBUTE_TYPE aFrom;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vCurrent;\\n\\nvoid main(void) {\\n  vCurrent = mix(aFrom, aTo, time);\\n  gl_Position = vec4(0.0);\\n}\\n\";\n\nfunction getTransform(gl, attribute) {\n  const attributeType = getAttributeTypeFromSize(attribute.size);\n  return new Transform(gl, {\n    vs,\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vCurrent']\n  });\n}\n//# sourceMappingURL=gpu-interpolation-transition.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Transform } from '@luma.gl/core';\nimport GPUInterpolationTransition from '../../transitions/gpu-interpolation-transition';\nimport GPUSpringTransition from '../../transitions/gpu-spring-transition';\nimport log from '../../utils/log';\nconst TRANSITION_TYPES = {\n  interpolation: GPUInterpolationTransition,\n  spring: GPUSpringTransition\n};\nexport default class AttributeTransitionManager {\n  constructor(gl, {\n    id,\n    timeline\n  }) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"isSupported\", void 0);\n\n    _defineProperty(this, \"gl\", void 0);\n\n    _defineProperty(this, \"timeline\", void 0);\n\n    _defineProperty(this, \"transitions\", void 0);\n\n    _defineProperty(this, \"needsRedraw\", void 0);\n\n    _defineProperty(this, \"numInstances\", void 0);\n\n    this.id = id;\n    this.gl = gl;\n    this.timeline = timeline;\n    this.transitions = {};\n    this.needsRedraw = false;\n    this.numInstances = 1;\n    this.isSupported = Transform.isSupported(gl);\n  }\n\n  finalize() {\n    for (const attributeName in this.transitions) {\n      this._removeTransition(attributeName);\n    }\n  }\n\n  update({\n    attributes,\n    transitions,\n    numInstances\n  }) {\n    this.numInstances = numInstances || 1;\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      const settings = attribute.getTransitionSetting(transitions);\n      if (!settings) continue;\n\n      this._updateAttribute(attributeName, attribute, settings);\n    }\n\n    for (const attributeName in this.transitions) {\n      const attribute = attributes[attributeName];\n\n      if (!attribute || !attribute.getTransitionSetting(transitions)) {\n        this._removeTransition(attributeName);\n      }\n    }\n  }\n\n  hasAttribute(attributeName) {\n    const transition = this.transitions[attributeName];\n    return transition && transition.inProgress;\n  }\n\n  getAttributes() {\n    const animatedAttributes = {};\n\n    for (const attributeName in this.transitions) {\n      const transition = this.transitions[attributeName];\n\n      if (transition.inProgress) {\n        animatedAttributes[attributeName] = transition.attributeInTransition;\n      }\n    }\n\n    return animatedAttributes;\n  }\n\n  run() {\n    if (!this.isSupported || this.numInstances === 0) {\n      return false;\n    }\n\n    for (const attributeName in this.transitions) {\n      const updated = this.transitions[attributeName].update();\n\n      if (updated) {\n        this.needsRedraw = true;\n      }\n    }\n\n    const needsRedraw = this.needsRedraw;\n    this.needsRedraw = false;\n    return needsRedraw;\n  }\n\n  _removeTransition(attributeName) {\n    this.transitions[attributeName].cancel();\n    delete this.transitions[attributeName];\n  }\n\n  _updateAttribute(attributeName, attribute, settings) {\n    const transition = this.transitions[attributeName];\n    let isNew = !transition || transition.type !== settings.type;\n\n    if (isNew) {\n      if (!this.isSupported) {\n        log.warn(\"WebGL2 not supported by this browser. Transition for \".concat(attributeName, \" is disabled.\"))();\n        return;\n      }\n\n      if (transition) {\n        this._removeTransition(attributeName);\n      }\n\n      const TransitionType = TRANSITION_TYPES[settings.type];\n\n      if (TransitionType) {\n        this.transitions[attributeName] = new TransitionType({\n          attribute,\n          timeline: this.timeline,\n          gl: this.gl\n        });\n      } else {\n        log.error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n        isNew = false;\n      }\n    }\n\n    if (isNew || attribute.needsRedraw()) {\n      this.needsRedraw = true;\n      this.transitions[attributeName].start(settings, this.numInstances);\n    }\n  }\n\n}\n//# sourceMappingURL=attribute-transition-manager.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Buffer, Transform, Framebuffer, Texture2D, readPixelsToArray } from '@luma.gl/core';\nimport { padBuffer, getAttributeTypeFromSize, getSourceBufferAttribute, getAttributeBufferLength, cycleBuffers } from '../lib/attribute/attribute-transition-utils';\nimport Attribute from '../lib/attribute/attribute';\nimport Transition from './transition';\nexport default class GPUSpringTransition {\n  constructor({\n    gl,\n    attribute,\n    timeline\n  }) {\n    _defineProperty(this, \"gl\", void 0);\n\n    _defineProperty(this, \"type\", 'spring');\n\n    _defineProperty(this, \"attributeInTransition\", void 0);\n\n    _defineProperty(this, \"settings\", void 0);\n\n    _defineProperty(this, \"attribute\", void 0);\n\n    _defineProperty(this, \"transition\", void 0);\n\n    _defineProperty(this, \"currentStartIndices\", void 0);\n\n    _defineProperty(this, \"currentLength\", void 0);\n\n    _defineProperty(this, \"texture\", void 0);\n\n    _defineProperty(this, \"framebuffer\", void 0);\n\n    _defineProperty(this, \"transform\", void 0);\n\n    _defineProperty(this, \"buffers\", void 0);\n\n    this.gl = gl;\n    this.type = 'spring';\n    this.transition = new Transition(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new Attribute(gl, { ...attribute.settings,\n      normalized: false\n    });\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.texture = getTexture(gl);\n    this.framebuffer = getFramebuffer(gl, this.texture);\n    this.transform = getTransform(gl, attribute, this.framebuffer);\n    const bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts)];\n  }\n\n  get inProgress() {\n    return this.transition.inProgress;\n  }\n\n  start(transitionSettings, numInstances) {\n    const {\n      gl,\n      buffers,\n      attribute\n    } = this;\n    const padBufferOpts = {\n      numInstances,\n      attribute,\n      fromLength: this.currentLength,\n      fromStartIndices: this.currentStartIndices,\n      getData: transitionSettings.enter\n    };\n\n    for (const buffer of buffers) {\n      padBuffer({\n        buffer,\n        ...padBufferOpts\n      });\n    }\n\n    this.settings = transitionSettings;\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = getAttributeBufferLength(attribute, numInstances);\n    this.attributeInTransition.setData({\n      buffer: buffers[1],\n      value: attribute.value\n    });\n    this.transition.start({ ...transitionSettings,\n      duration: Infinity\n    });\n    this.transform.update({\n      elementCount: Math.floor(this.currentLength / attribute.size),\n      sourceBuffers: {\n        aTo: getSourceBufferAttribute(gl, attribute)\n      }\n    });\n  }\n\n  update() {\n    const {\n      buffers,\n      transform,\n      framebuffer,\n      transition\n    } = this;\n    const updated = transition.update();\n\n    if (!updated) {\n      return false;\n    }\n\n    const settings = this.settings;\n    transform.update({\n      sourceBuffers: {\n        aPrev: buffers[0],\n        aCur: buffers[1]\n      },\n      feedbackBuffers: {\n        vNext: buffers[2]\n      }\n    });\n    transform.run({\n      framebuffer,\n      discard: false,\n      clearRenderTarget: true,\n      uniforms: {\n        stiffness: settings.stiffness,\n        damping: settings.damping\n      },\n      parameters: {\n        depthTest: false,\n        blend: true,\n        viewport: [0, 0, 1, 1],\n        blendFunc: [1, 1],\n        blendEquation: [32776, 32776]\n      }\n    });\n    cycleBuffers(buffers);\n    this.attributeInTransition.setData({\n      buffer: buffers[1],\n      value: this.attribute.value\n    });\n    const isTransitioning = readPixelsToArray(framebuffer)[0] > 0;\n\n    if (!isTransitioning) {\n      transition.end();\n    }\n\n    return true;\n  }\n\n  cancel() {\n    this.transition.cancel();\n    this.transform.delete();\n\n    for (const buffer of this.buffers) {\n      buffer.delete();\n    }\n\n    this.buffers.length = 0;\n    this.texture.delete();\n    this.framebuffer.delete();\n  }\n\n}\n\nfunction getTransform(gl, attribute, framebuffer) {\n  const attributeType = getAttributeTypeFromSize(attribute.size);\n  return new Transform(gl, {\n    framebuffer,\n    vs: \"\\n#define SHADER_NAME spring-transition-vertex-shader\\n\\n#define EPSILON 0.00001\\n\\nuniform float stiffness;\\nuniform float damping;\\nattribute ATTRIBUTE_TYPE aPrev;\\nattribute ATTRIBUTE_TYPE aCur;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vNext;\\nvarying float vIsTransitioningFlag;\\n\\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\\n  ATTRIBUTE_TYPE velocity = cur - prev;\\n  ATTRIBUTE_TYPE delta = dest - cur;\\n  ATTRIBUTE_TYPE spring = delta * stiffness;\\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\\n  return spring + damper + velocity + cur;\\n}\\n\\nvoid main(void) {\\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\\n\\n  vNext = getNextValue(aCur, aPrev, aTo);\\n  gl_Position = vec4(0, 0, 0, 1);\\n  gl_PointSize = 100.0;\\n}\\n\",\n    fs: \"\\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\\n\\nvarying float vIsTransitioningFlag;\\n\\nvoid main(void) {\\n  if (vIsTransitioningFlag == 0.0) {\\n    discard;\\n  }\\n  gl_FragColor = vec4(1.0);\\n}\",\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vNext']\n  });\n}\n\nfunction getTexture(gl) {\n  return new Texture2D(gl, {\n    data: new Uint8Array(4),\n    format: 6408,\n    type: 5121,\n    border: 0,\n    mipmaps: false,\n    dataFormat: 6408,\n    width: 1,\n    height: 1\n  });\n}\n\nfunction getFramebuffer(gl, texture) {\n  return new Framebuffer(gl, {\n    id: 'spring-transition-is-transitioning-framebuffer',\n    width: 1,\n    height: 1,\n    attachments: {\n      [36064]: texture\n    }\n  });\n}\n//# sourceMappingURL=gpu-spring-transition.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Attribute from './attribute';\nimport log from '../../utils/log';\nimport debug from '../../debug';\nimport AttributeTransitionManager from './attribute-transition-manager';\nconst TRACE_INVALIDATE = 'attributeManager.invalidate';\nconst TRACE_UPDATE_START = 'attributeManager.updateStart';\nconst TRACE_UPDATE_END = 'attributeManager.updateEnd';\nconst TRACE_ATTRIBUTE_UPDATE_START = 'attribute.updateStart';\nconst TRACE_ATTRIBUTE_ALLOCATE = 'attribute.allocate';\nconst TRACE_ATTRIBUTE_UPDATE_END = 'attribute.updateEnd';\nexport default class AttributeManager {\n  constructor(gl, {\n    id = 'attribute-manager',\n    stats,\n    timeline\n  } = {}) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"gl\", void 0);\n\n    _defineProperty(this, \"attributes\", void 0);\n\n    _defineProperty(this, \"updateTriggers\", void 0);\n\n    _defineProperty(this, \"needsRedraw\", void 0);\n\n    _defineProperty(this, \"userData\", void 0);\n\n    _defineProperty(this, \"stats\", void 0);\n\n    _defineProperty(this, \"attributeTransitionManager\", void 0);\n\n    this.id = id;\n    this.gl = gl;\n    this.attributes = {};\n    this.updateTriggers = {};\n    this.needsRedraw = true;\n    this.userData = {};\n    this.stats = stats;\n    this.attributeTransitionManager = new AttributeTransitionManager(gl, {\n      id: \"\".concat(id, \"-transitions\"),\n      timeline\n    });\n    Object.seal(this);\n  }\n\n  finalize() {\n    for (const attributeName in this.attributes) {\n      this.attributes[attributeName].delete();\n    }\n\n    this.attributeTransitionManager.finalize();\n  }\n\n  getNeedsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this.needsRedraw;\n    this.needsRedraw = this.needsRedraw && !opts.clearRedrawFlags;\n    return redraw && this.id;\n  }\n\n  setNeedsRedraw() {\n    this.needsRedraw = true;\n  }\n\n  add(attributes) {\n    this._add(attributes);\n  }\n\n  addInstanced(attributes) {\n    this._add(attributes, {\n      instanced: 1\n    });\n  }\n\n  remove(attributeNameArray) {\n    for (const name of attributeNameArray) {\n      if (this.attributes[name] !== undefined) {\n        this.attributes[name].delete();\n        delete this.attributes[name];\n      }\n    }\n  }\n\n  invalidate(triggerName, dataRange) {\n    const invalidatedAttributes = this._invalidateTrigger(triggerName, dataRange);\n\n    debug(TRACE_INVALIDATE, this, triggerName, invalidatedAttributes);\n  }\n\n  invalidateAll(dataRange) {\n    for (const attributeName in this.attributes) {\n      this.attributes[attributeName].setNeedsUpdate(attributeName, dataRange);\n    }\n\n    debug(TRACE_INVALIDATE, this, 'all');\n  }\n\n  update({\n    data,\n    numInstances,\n    startIndices = null,\n    transitions,\n    props = {},\n    buffers = {},\n    context = {}\n  }) {\n    let updated = false;\n    debug(TRACE_UPDATE_START, this);\n\n    if (this.stats) {\n      this.stats.get('Update Attributes').timeStart();\n    }\n\n    for (const attributeName in this.attributes) {\n      const attribute = this.attributes[attributeName];\n      const accessorName = attribute.settings.accessor;\n      attribute.startIndices = startIndices;\n      attribute.numInstances = numInstances;\n\n      if (props[attributeName]) {\n        log.removed(\"props.\".concat(attributeName), \"data.attributes.\".concat(attributeName))();\n      }\n\n      if (attribute.setExternalBuffer(buffers[attributeName])) {} else if (attribute.setBinaryValue(typeof accessorName === 'string' ? buffers[accessorName] : undefined, data.startIndices)) {} else if (typeof accessorName === 'string' && !buffers[accessorName] && attribute.setConstantValue(props[accessorName])) {} else if (attribute.needsUpdate()) {\n        updated = true;\n\n        this._updateAttribute({\n          attribute,\n          numInstances,\n          data,\n          props,\n          context\n        });\n      }\n\n      this.needsRedraw = this.needsRedraw || attribute.needsRedraw();\n    }\n\n    if (updated) {\n      debug(TRACE_UPDATE_END, this, numInstances);\n    }\n\n    if (this.stats) {\n      this.stats.get('Update Attributes').timeEnd();\n    }\n\n    this.attributeTransitionManager.update({\n      attributes: this.attributes,\n      numInstances,\n      transitions\n    });\n  }\n\n  updateTransition() {\n    const {\n      attributeTransitionManager\n    } = this;\n    const transitionUpdated = attributeTransitionManager.run();\n    this.needsRedraw = this.needsRedraw || transitionUpdated;\n    return transitionUpdated;\n  }\n\n  getAttributes() {\n    return this.attributes;\n  }\n\n  getChangedAttributes(opts = {\n    clearChangedFlags: false\n  }) {\n    const {\n      attributes,\n      attributeTransitionManager\n    } = this;\n    const changedAttributes = { ...attributeTransitionManager.getAttributes()\n    };\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n\n      if (attribute.needsRedraw(opts) && !attributeTransitionManager.hasAttribute(attributeName)) {\n        changedAttributes[attributeName] = attribute;\n      }\n    }\n\n    return changedAttributes;\n  }\n\n  getShaderAttributes(attributes, excludeAttributes = {}) {\n    if (!attributes) {\n      attributes = this.getAttributes();\n    }\n\n    const shaderAttributes = {};\n\n    for (const attributeName in attributes) {\n      if (!excludeAttributes[attributeName]) {\n        Object.assign(shaderAttributes, attributes[attributeName].getShaderAttributes());\n      }\n    }\n\n    return shaderAttributes;\n  }\n\n  _add(attributes, extraProps = {}) {\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      this.attributes[attributeName] = this._createAttribute(attributeName, attribute, extraProps);\n    }\n\n    this._mapUpdateTriggersToAttributes();\n  }\n\n  _createAttribute(name, attribute, extraProps) {\n    const props = { ...attribute,\n      id: name,\n      size: attribute.isIndexed && 1 || attribute.size || 1,\n      divisor: extraProps.instanced ? 1 : attribute.divisor || 0\n    };\n    return new Attribute(this.gl, props);\n  }\n\n  _mapUpdateTriggersToAttributes() {\n    const triggers = {};\n\n    for (const attributeName in this.attributes) {\n      const attribute = this.attributes[attributeName];\n      attribute.getUpdateTriggers().forEach(triggerName => {\n        if (!triggers[triggerName]) {\n          triggers[triggerName] = [];\n        }\n\n        triggers[triggerName].push(attributeName);\n      });\n    }\n\n    this.updateTriggers = triggers;\n  }\n\n  _invalidateTrigger(triggerName, dataRange) {\n    const {\n      attributes,\n      updateTriggers\n    } = this;\n    const invalidatedAttributes = updateTriggers[triggerName];\n\n    if (invalidatedAttributes) {\n      invalidatedAttributes.forEach(name => {\n        const attribute = attributes[name];\n\n        if (attribute) {\n          attribute.setNeedsUpdate(attribute.id, dataRange);\n        }\n      });\n    }\n\n    return invalidatedAttributes;\n  }\n\n  _updateAttribute(opts) {\n    const {\n      attribute,\n      numInstances\n    } = opts;\n    debug(TRACE_ATTRIBUTE_UPDATE_START, attribute);\n\n    if (attribute.constant) {\n      attribute.setConstantValue(attribute.value);\n      return;\n    }\n\n    if (attribute.allocate(numInstances)) {\n      debug(TRACE_ATTRIBUTE_ALLOCATE, attribute, numInstances);\n    }\n\n    const updated = attribute.updateBuffer(opts);\n\n    if (updated) {\n      this.needsRedraw = true;\n      debug(TRACE_ATTRIBUTE_UPDATE_END, attribute, numInstances);\n    }\n  }\n\n}\n//# sourceMappingURL=attribute-manager.js.map","import Transition from './transition';\nconst EPSILON = 1e-5;\n\nfunction updateSpringElement(prev, cur, dest, damping, stiffness) {\n  const velocity = cur - prev;\n  const delta = dest - cur;\n  const spring = delta * stiffness;\n  const damper = -velocity * damping;\n  return spring + damper + velocity + cur;\n}\n\nfunction updateSpring(prev, cur, dest, damping, stiffness) {\n  if (Array.isArray(dest)) {\n    const next = [];\n\n    for (let i = 0; i < dest.length; i++) {\n      next[i] = updateSpringElement(prev[i], cur[i], dest[i], damping, stiffness);\n    }\n\n    return next;\n  }\n\n  return updateSpringElement(prev, cur, dest, damping, stiffness);\n}\n\nfunction distance(value1, value2) {\n  if (Array.isArray(value1)) {\n    let distanceSquare = 0;\n\n    for (let i = 0; i < value1.length; i++) {\n      const d = value1[i] - value2[i];\n      distanceSquare += d * d;\n    }\n\n    return Math.sqrt(distanceSquare);\n  }\n\n  return Math.abs(value1 - value2);\n}\n\nexport default class CPUSpringTransition extends Transition {\n  get value() {\n    return this._currValue;\n  }\n\n  _onUpdate() {\n    const {\n      fromValue,\n      toValue,\n      damping,\n      stiffness\n    } = this.settings;\n    const {\n      _prevValue = fromValue,\n      _currValue = fromValue\n    } = this;\n    let nextValue = updateSpring(_prevValue, _currValue, toValue, damping, stiffness);\n    const delta = distance(nextValue, toValue);\n    const velocity = distance(nextValue, _currValue);\n\n    if (delta < EPSILON && velocity < EPSILON) {\n      nextValue = toValue;\n      this.end();\n    }\n\n    this._prevValue = _currValue;\n    this._currValue = nextValue;\n  }\n\n}\n//# sourceMappingURL=cpu-spring-transition.js.map","import { normalizeTransitionSettings } from './attribute/attribute-transition-utils';\nimport CPUInterpolationTransition from '../transitions/cpu-interpolation-transition';\nimport CPUSpringTransition from '../transitions/cpu-spring-transition';\nimport log from '../utils/log';\nconst TRANSITION_TYPES = {\n  interpolation: CPUInterpolationTransition,\n  spring: CPUSpringTransition\n};\nexport default class UniformTransitionManager {\n  constructor(timeline) {\n    this.transitions = new Map();\n    this.timeline = timeline;\n  }\n\n  get active() {\n    return this.transitions.size > 0;\n  }\n\n  add(key, fromValue, toValue, settings) {\n    const {\n      transitions\n    } = this;\n\n    if (transitions.has(key)) {\n      const transition = transitions.get(key);\n      const {\n        value = transition.settings.fromValue\n      } = transition;\n      fromValue = value;\n      this.remove(key);\n    }\n\n    settings = normalizeTransitionSettings(settings);\n\n    if (!settings) {\n      return;\n    }\n\n    const TransitionType = TRANSITION_TYPES[settings.type];\n\n    if (!TransitionType) {\n      log.error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n      return;\n    }\n\n    const transition = new TransitionType(this.timeline);\n    transition.start({ ...settings,\n      fromValue,\n      toValue\n    });\n    transitions.set(key, transition);\n  }\n\n  remove(key) {\n    const {\n      transitions\n    } = this;\n\n    if (transitions.has(key)) {\n      transitions.get(key).cancel();\n      transitions.delete(key);\n    }\n  }\n\n  update() {\n    const propsInTransition = {};\n\n    for (const [key, transition] of this.transitions) {\n      transition.update();\n      propsInTransition[key] = transition.value;\n\n      if (!transition.inProgress) {\n        this.remove(key);\n      }\n    }\n\n    return propsInTransition;\n  }\n\n  clear() {\n    for (const key of this.transitions.keys()) {\n      this.remove(key);\n    }\n  }\n\n}\n//# sourceMappingURL=uniform-transition-manager.js.map","import { lerp } from '@math.gl/core';\nimport Transition from './transition';\nexport default class CPUInterpolationTransition extends Transition {\n  get value() {\n    return this._value;\n  }\n\n  _onUpdate() {\n    const {\n      time,\n      settings: {\n        fromValue,\n        toValue,\n        duration,\n        easing\n      }\n    } = this;\n    const t = easing(time / duration);\n    this._value = lerp(fromValue, toValue, t);\n  }\n\n}\n//# sourceMappingURL=cpu-interpolation-transition.js.map","import { COMPONENT_SYMBOL } from './constants';\nexport function validateProps(props) {\n  const propTypes = getPropTypes(props);\n\n  for (const propName in propTypes) {\n    const propType = propTypes[propName];\n    const {\n      validate\n    } = propType;\n\n    if (validate && !validate(props[propName], propType)) {\n      throw new Error(\"Invalid prop \".concat(propName, \": \").concat(props[propName]));\n    }\n  }\n}\nexport function diffProps(props, oldProps) {\n  const propsChangedReason = compareProps({\n    newProps: props,\n    oldProps,\n    propTypes: getPropTypes(props),\n    ignoreProps: {\n      data: null,\n      updateTriggers: null,\n      extensions: null,\n      transitions: null\n    }\n  });\n  const dataChangedReason = diffDataProps(props, oldProps);\n  let updateTriggersChangedReason = false;\n\n  if (!dataChangedReason) {\n    updateTriggersChangedReason = diffUpdateTriggers(props, oldProps);\n  }\n\n  return {\n    dataChanged: dataChangedReason,\n    propsChanged: propsChangedReason,\n    updateTriggersChanged: updateTriggersChangedReason,\n    extensionsChanged: diffExtensions(props, oldProps),\n    transitionsChanged: diffTransitions(props, oldProps)\n  };\n}\n\nfunction diffTransitions(props, oldProps) {\n  if (!props.transitions) {\n    return false;\n  }\n\n  const result = {};\n  const propTypes = getPropTypes(props);\n  let changed = false;\n\n  for (const key in props.transitions) {\n    const propType = propTypes[key];\n    const type = propType && propType.type;\n    const isTransitionable = type === 'number' || type === 'color' || type === 'array';\n\n    if (isTransitionable && comparePropValues(props[key], oldProps[key], propType)) {\n      result[key] = true;\n      changed = true;\n    }\n  }\n\n  return changed ? result : false;\n}\n\nexport function compareProps({\n  newProps,\n  oldProps,\n  ignoreProps = {},\n  propTypes = {},\n  triggerName = 'props'\n}) {\n  if (oldProps === newProps) {\n    return false;\n  }\n\n  if (typeof newProps !== 'object' || newProps === null) {\n    return \"\".concat(triggerName, \" changed shallowly\");\n  }\n\n  if (typeof oldProps !== 'object' || oldProps === null) {\n    return \"\".concat(triggerName, \" changed shallowly\");\n  }\n\n  for (const key of Object.keys(newProps)) {\n    if (!(key in ignoreProps)) {\n      if (!(key in oldProps)) {\n        return \"\".concat(triggerName, \".\").concat(key, \" added\");\n      }\n\n      const changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n\n      if (changed) {\n        return \"\".concat(triggerName, \".\").concat(key, \" \").concat(changed);\n      }\n    }\n  }\n\n  for (const key of Object.keys(oldProps)) {\n    if (!(key in ignoreProps)) {\n      if (!(key in newProps)) {\n        return \"\".concat(triggerName, \".\").concat(key, \" dropped\");\n      }\n\n      if (!Object.hasOwnProperty.call(newProps, key)) {\n        const changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n\n        if (changed) {\n          return \"\".concat(triggerName, \".\").concat(key, \" \").concat(changed);\n        }\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction comparePropValues(newProp, oldProp, propType) {\n  let equal = propType && propType.equal;\n\n  if (equal && !equal(newProp, oldProp, propType)) {\n    return 'changed deeply';\n  }\n\n  if (!equal) {\n    equal = newProp && oldProp && newProp.equals;\n\n    if (equal && !equal.call(newProp, oldProp)) {\n      return 'changed deeply';\n    }\n  }\n\n  if (!equal && oldProp !== newProp) {\n    return 'changed shallowly';\n  }\n\n  return null;\n}\n\nfunction diffDataProps(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  let dataChanged = false;\n  const {\n    dataComparator,\n    _dataDiff\n  } = props;\n\n  if (dataComparator) {\n    if (!dataComparator(props.data, oldProps.data)) {\n      dataChanged = 'Data comparator detected a change';\n    }\n  } else if (props.data !== oldProps.data) {\n    dataChanged = 'A new data container was supplied';\n  }\n\n  if (dataChanged && _dataDiff) {\n    dataChanged = _dataDiff(props.data, oldProps.data) || dataChanged;\n  }\n\n  return dataChanged;\n}\n\nfunction diffUpdateTriggers(props, oldProps) {\n  if (oldProps === null) {\n    return {\n      all: true\n    };\n  }\n\n  if ('all' in props.updateTriggers) {\n    const diffReason = diffUpdateTrigger(props, oldProps, 'all');\n\n    if (diffReason) {\n      return {\n        all: true\n      };\n    }\n  }\n\n  const reason = {};\n  let changed = false;\n\n  for (const triggerName in props.updateTriggers) {\n    if (triggerName !== 'all') {\n      const diffReason = diffUpdateTrigger(props, oldProps, triggerName);\n\n      if (diffReason) {\n        reason[triggerName] = true;\n        changed = true;\n      }\n    }\n  }\n\n  return changed ? reason : false;\n}\n\nfunction diffExtensions(props, oldProps) {\n  if (oldProps === null) {\n    return true;\n  }\n\n  const oldExtensions = oldProps.extensions;\n  const {\n    extensions\n  } = props;\n\n  if (extensions === oldExtensions) {\n    return false;\n  }\n\n  if (!oldExtensions || !extensions) {\n    return true;\n  }\n\n  if (extensions.length !== oldExtensions.length) {\n    return true;\n  }\n\n  for (let i = 0; i < extensions.length; i++) {\n    if (!extensions[i].equals(oldExtensions[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction diffUpdateTrigger(props, oldProps, triggerName) {\n  let newTriggers = props.updateTriggers[triggerName];\n  newTriggers = newTriggers === undefined || newTriggers === null ? {} : newTriggers;\n  let oldTriggers = oldProps.updateTriggers[triggerName];\n  oldTriggers = oldTriggers === undefined || oldTriggers === null ? {} : oldTriggers;\n  const diffReason = compareProps({\n    oldProps: oldTriggers,\n    newProps: newTriggers,\n    triggerName\n  });\n  return diffReason;\n}\n\nfunction getPropTypes(props) {\n  const layer = props[COMPONENT_SYMBOL];\n  const LayerType = layer && layer.constructor;\n  return LayerType ? LayerType._propTypes : {};\n}\n//# sourceMappingURL=props.js.map","const ERR_NOT_OBJECT = 'count(): argument not an object';\nconst ERR_NOT_CONTAINER = 'count(): argument not a container';\nexport function count(container) {\n  if (!isObject(container)) {\n    throw new Error(ERR_NOT_OBJECT);\n  }\n\n  if (typeof container.count === 'function') {\n    return container.count();\n  }\n\n  if (Number.isFinite(container.size)) {\n    return container.size;\n  }\n\n  if (Number.isFinite(container.length)) {\n    return container.length;\n  }\n\n  if (isPlainObject(container)) {\n    return Object.keys(container).length;\n  }\n\n  throw new Error(ERR_NOT_CONTAINER);\n}\n\nfunction isPlainObject(value) {\n  return value !== null && typeof value === 'object' && value.constructor === Object;\n}\n\nfunction isObject(value) {\n  return value !== null && typeof value === 'object';\n}\n//# sourceMappingURL=count.js.map","export function mergeShaders(target, source) {\n  if (!source) {\n    return target;\n  }\n\n  const result = { ...target,\n    ...source\n  };\n\n  if ('defines' in source) {\n    result.defines = { ...target.defines,\n      ...source.defines\n    };\n  }\n\n  if ('modules' in source) {\n    result.modules = (target.modules || []).concat(source.modules);\n\n    if (source.modules.some(module => module.name === 'project64')) {\n      const index = result.modules.findIndex(module => module.name === 'project32');\n\n      if (index >= 0) {\n        result.modules.splice(index, 1);\n      }\n    }\n  }\n\n  if ('inject' in source) {\n    if (!target.inject) {\n      result.inject = source.inject;\n    } else {\n      const mergedInjection = { ...target.inject\n      };\n\n      for (const key in source.inject) {\n        mergedInjection[key] = (mergedInjection[key] || '') + source.inject[key];\n      }\n\n      result.inject = mergedInjection;\n    }\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader.js.map","import { Texture2D } from '@luma.gl/core';\nconst DEFAULT_TEXTURE_PARAMETERS = {\n  [10241]: 9987,\n  [10240]: 9729,\n  [10242]: 33071,\n  [10243]: 33071\n};\nconst internalTextures = {};\nexport function createTexture(layer, image) {\n  const gl = layer.context && layer.context.gl;\n\n  if (!gl || !image) {\n    return null;\n  }\n\n  if (image instanceof Texture2D) {\n    return image;\n  } else if (image.constructor && image.constructor.name !== 'Object') {\n    image = {\n      data: image\n    };\n  }\n\n  let specialTextureParameters = null;\n\n  if (image.compressed) {\n    specialTextureParameters = {\n      [10241]: image.data.length > 1 ? 9985 : 9729\n    };\n  }\n\n  const texture = new Texture2D(gl, { ...image,\n    parameters: { ...DEFAULT_TEXTURE_PARAMETERS,\n      ...specialTextureParameters,\n      ...layer.props.textureParameters\n    }\n  });\n  internalTextures[texture.id] = true;\n  return texture;\n}\nexport function destroyTexture(texture) {\n  if (!texture || !(texture instanceof Texture2D)) {\n    return;\n  }\n\n  if (internalTextures[texture.id]) {\n    texture.delete();\n    delete internalTextures[texture.id];\n  }\n}\n//# sourceMappingURL=texture.js.map","import { createTexture, destroyTexture } from '../utils/texture';\nimport { deepEqual } from '../utils/deep-equal';\nconst TYPE_DEFINITIONS = {\n  boolean: {\n    validate(value, propType) {\n      return true;\n    },\n\n    equal(value1, value2, propType) {\n      return Boolean(value1) === Boolean(value2);\n    }\n\n  },\n  number: {\n    validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n\n  },\n  color: {\n    validate(value, propType) {\n      return propType.optional && !value || isArray(value) && (value.length === 3 || value.length === 4);\n    },\n\n    equal(value1, value2, propType) {\n      return arrayEqual(value1, value2);\n    }\n\n  },\n  accessor: {\n    validate(value, propType) {\n      const valueType = getTypeOf(value);\n      return valueType === 'function' || valueType === getTypeOf(propType.value);\n    },\n\n    equal(value1, value2, propType) {\n      if (typeof value2 === 'function') {\n        return true;\n      }\n\n      return arrayEqual(value1, value2);\n    }\n\n  },\n  array: {\n    validate(value, propType) {\n      return propType.optional && !value || isArray(value);\n    },\n\n    equal(value1, value2, propType) {\n      return propType.compare ? arrayEqual(value1, value2) : value1 === value2;\n    }\n\n  },\n  object: {\n    equal(value1, value2, propType) {\n      return propType.compare ? deepEqual(value1, value2) : value1 === value2;\n    }\n\n  },\n  function: {\n    validate(value, propType) {\n      return propType.optional && !value || typeof value === 'function';\n    },\n\n    equal(value1, value2, propType) {\n      return !propType.compare || value1 === value2;\n    }\n\n  },\n  data: {\n    transform: (value, propType, component) => {\n      const {\n        dataTransform\n      } = component.props;\n      return dataTransform && value ? dataTransform(value) : value;\n    }\n  },\n  image: {\n    transform: (value, propType, component) => {\n      return createTexture(component, value);\n    },\n    release: value => {\n      destroyTexture(value);\n    }\n  }\n};\n\nfunction arrayEqual(array1, array2) {\n  if (array1 === array2) {\n    return true;\n  }\n\n  if (!isArray(array1) || !isArray(array2)) {\n    return false;\n  }\n\n  const len = array1.length;\n\n  if (len !== array2.length) {\n    return false;\n  }\n\n  for (let i = 0; i < len; i++) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function parsePropTypes(propDefs) {\n  const propTypes = {};\n  const defaultProps = {};\n  const deprecatedProps = {};\n\n  for (const [propName, propDef] of Object.entries(propDefs)) {\n    const deprecated = propDef === null || propDef === void 0 ? void 0 : propDef.deprecatedFor;\n\n    if (deprecated) {\n      deprecatedProps[propName] = Array.isArray(deprecated) ? deprecated : [deprecated];\n    } else {\n      const propType = parsePropType(propName, propDef);\n      propTypes[propName] = propType;\n      defaultProps[propName] = propType.value;\n    }\n  }\n\n  return {\n    propTypes,\n    defaultProps,\n    deprecatedProps\n  };\n}\n\nfunction parsePropType(name, propDef) {\n  switch (getTypeOf(propDef)) {\n    case 'object':\n      return normalizePropDefinition(name, propDef);\n\n    case 'array':\n      return normalizePropDefinition(name, {\n        type: 'array',\n        value: propDef,\n        compare: false\n      });\n\n    case 'boolean':\n      return normalizePropDefinition(name, {\n        type: 'boolean',\n        value: propDef\n      });\n\n    case 'number':\n      return normalizePropDefinition(name, {\n        type: 'number',\n        value: propDef\n      });\n\n    case 'function':\n      return normalizePropDefinition(name, {\n        type: 'function',\n        value: propDef,\n        compare: true\n      });\n\n    default:\n      return {\n        name,\n        type: 'unknown',\n        value: propDef\n      };\n  }\n}\n\nfunction normalizePropDefinition(name, propDef) {\n  if (!('type' in propDef)) {\n    if (!('value' in propDef)) {\n      return {\n        name,\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    return {\n      name,\n      type: getTypeOf(propDef.value),\n      ...propDef\n    };\n  }\n\n  return {\n    name,\n    ...TYPE_DEFINITIONS[propDef.type],\n    ...propDef\n  };\n}\n\nfunction isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value);\n}\n\nfunction getTypeOf(value) {\n  if (isArray(value)) {\n    return 'array';\n  }\n\n  if (value === null) {\n    return 'null';\n  }\n\n  return typeof value;\n}\n//# sourceMappingURL=prop-types.js.map","import log from '../utils/log';\nimport { isAsyncIterable } from '../utils/iterable-utils';\nimport { parsePropTypes } from './prop-types';\nimport { COMPONENT_SYMBOL, ASYNC_ORIGINAL_SYMBOL, ASYNC_RESOLVED_SYMBOL, ASYNC_DEFAULTS_SYMBOL } from './constants';\nexport function createProps(component, propObjects) {\n  const propsPrototype = getPropsPrototype(component.constructor);\n  const propsInstance = Object.create(propsPrototype);\n  propsInstance[COMPONENT_SYMBOL] = component;\n  propsInstance[ASYNC_ORIGINAL_SYMBOL] = {};\n  propsInstance[ASYNC_RESOLVED_SYMBOL] = {};\n\n  for (let i = 0; i < propObjects.length; ++i) {\n    const props = propObjects[i];\n\n    for (const key in props) {\n      propsInstance[key] = props[key];\n    }\n  }\n\n  Object.freeze(propsInstance);\n  return propsInstance;\n}\n\nfunction getPropsPrototype(componentClass) {\n  const defaultProps = getOwnProperty(componentClass, '_mergedDefaultProps');\n\n  if (!defaultProps) {\n    createPropsPrototypeAndTypes(componentClass);\n    return componentClass._mergedDefaultProps;\n  }\n\n  return defaultProps;\n}\n\nfunction createPropsPrototypeAndTypes(componentClass) {\n  const parent = componentClass.prototype;\n\n  if (!parent) {\n    return;\n  }\n\n  const parentClass = Object.getPrototypeOf(componentClass);\n  const parentDefaultProps = getPropsPrototype(parentClass);\n  const componentDefaultProps = getOwnProperty(componentClass, 'defaultProps') || {};\n  const componentPropDefs = parsePropTypes(componentDefaultProps);\n  const defaultProps = createPropsPrototype(componentPropDefs.defaultProps, parentDefaultProps, componentClass);\n  const propTypes = { ...parentClass._propTypes,\n    ...componentPropDefs.propTypes\n  };\n  addAsyncPropsToPropPrototype(defaultProps, propTypes);\n  const deprecatedProps = { ...parentClass._deprecatedProps,\n    ...componentPropDefs.deprecatedProps\n  };\n  addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps);\n  componentClass._mergedDefaultProps = defaultProps;\n  componentClass._propTypes = propTypes;\n  componentClass._deprecatedProps = deprecatedProps;\n}\n\nfunction createPropsPrototype(props, parentProps, componentClass) {\n  const defaultProps = Object.create(null);\n  Object.assign(defaultProps, parentProps, props);\n  const id = getComponentName(componentClass);\n  delete props.id;\n  Object.defineProperties(defaultProps, {\n    id: {\n      writable: true,\n      value: id\n    }\n  });\n  return defaultProps;\n}\n\nfunction addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps) {\n  for (const propName in deprecatedProps) {\n    Object.defineProperty(defaultProps, propName, {\n      enumerable: false,\n\n      set(newValue) {\n        const nameStr = \"\".concat(this.id, \": \").concat(propName);\n\n        for (const newPropName of deprecatedProps[propName]) {\n          if (!hasOwnProperty(this, newPropName)) {\n            this[newPropName] = newValue;\n          }\n        }\n\n        log.deprecated(nameStr, deprecatedProps[propName].join('/'))();\n      }\n\n    });\n  }\n}\n\nfunction addAsyncPropsToPropPrototype(defaultProps, propTypes) {\n  const defaultValues = {};\n  const descriptors = {};\n\n  for (const propName in propTypes) {\n    const propType = propTypes[propName];\n    const {\n      name,\n      value\n    } = propType;\n\n    if (propType.async) {\n      defaultValues[name] = value;\n      descriptors[name] = getDescriptorForAsyncProp(name);\n    }\n  }\n\n  defaultProps[ASYNC_DEFAULTS_SYMBOL] = defaultValues;\n  defaultProps[ASYNC_ORIGINAL_SYMBOL] = {};\n  Object.defineProperties(defaultProps, descriptors);\n}\n\nfunction getDescriptorForAsyncProp(name) {\n  return {\n    enumerable: true,\n\n    set(newValue) {\n      if (typeof newValue === 'string' || newValue instanceof Promise || isAsyncIterable(newValue)) {\n        this[ASYNC_ORIGINAL_SYMBOL][name] = newValue;\n      } else {\n        this[ASYNC_RESOLVED_SYMBOL][name] = newValue;\n      }\n    },\n\n    get() {\n      if (this[ASYNC_RESOLVED_SYMBOL]) {\n        if (name in this[ASYNC_RESOLVED_SYMBOL]) {\n          const value = this[ASYNC_RESOLVED_SYMBOL][name];\n          return value || this[ASYNC_DEFAULTS_SYMBOL][name];\n        }\n\n        if (name in this[ASYNC_ORIGINAL_SYMBOL]) {\n          const state = this[COMPONENT_SYMBOL] && this[COMPONENT_SYMBOL].internalState;\n\n          if (state && state.hasAsyncProp(name)) {\n            return state.getAsyncProp(name) || this[ASYNC_DEFAULTS_SYMBOL][name];\n          }\n        }\n      }\n\n      return this[ASYNC_DEFAULTS_SYMBOL][name];\n    }\n\n  };\n}\n\nfunction hasOwnProperty(object, prop) {\n  return Object.prototype.hasOwnProperty.call(object, prop);\n}\n\nfunction getOwnProperty(object, prop) {\n  return hasOwnProperty(object, prop) && object[prop];\n}\n\nfunction getComponentName(componentClass) {\n  const componentName = getOwnProperty(componentClass, 'layerName') || getOwnProperty(componentClass, 'componentName');\n\n  if (!componentName) {\n    log.once(0, \"\".concat(componentClass.name, \".componentName not specified\"))();\n  }\n\n  return componentName || componentClass.name;\n}\n//# sourceMappingURL=create-props.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { COMPONENT_SYMBOL, ASYNC_ORIGINAL_SYMBOL, ASYNC_RESOLVED_SYMBOL, ASYNC_DEFAULTS_SYMBOL } from './constants';\nimport { createProps } from './create-props';\nlet counter = 0;\nexport default class Component {\n  constructor(...propObjects) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"count\", void 0);\n\n    this.props = createProps(this, propObjects);\n    this.id = this.props.id;\n    this.count = counter++;\n  }\n\n  clone(newProps) {\n    const {\n      props\n    } = this;\n    const asyncProps = {};\n\n    for (const key in props[ASYNC_DEFAULTS_SYMBOL]) {\n      if (key in props[ASYNC_RESOLVED_SYMBOL]) {\n        asyncProps[key] = props[ASYNC_RESOLVED_SYMBOL][key];\n      } else if (key in props[ASYNC_ORIGINAL_SYMBOL]) {\n        asyncProps[key] = props[ASYNC_ORIGINAL_SYMBOL][key];\n      }\n    }\n\n    return new this.constructor({ ...props,\n      ...asyncProps,\n      ...newProps\n    });\n  }\n\n}\n\n_defineProperty(Component, \"componentName\", 'Component');\n\n_defineProperty(Component, \"defaultProps\", {});\n//# sourceMappingURL=component.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { isAsyncIterable } from '../utils/iterable-utils';\nimport { ASYNC_ORIGINAL_SYMBOL, ASYNC_RESOLVED_SYMBOL, ASYNC_DEFAULTS_SYMBOL } from './constants';\nconst EMPTY_PROPS = Object.freeze({});\nexport default class ComponentState {\n  constructor(component) {\n    _defineProperty(this, \"component\", void 0);\n\n    _defineProperty(this, \"onAsyncPropUpdated\", void 0);\n\n    _defineProperty(this, \"asyncProps\", void 0);\n\n    _defineProperty(this, \"oldProps\", void 0);\n\n    _defineProperty(this, \"oldAsyncProps\", void 0);\n\n    this.component = component;\n    this.asyncProps = {};\n\n    this.onAsyncPropUpdated = () => {};\n\n    this.oldProps = null;\n    this.oldAsyncProps = null;\n  }\n\n  finalize() {\n    for (const propName in this.asyncProps) {\n      const asyncProp = this.asyncProps[propName];\n\n      if (asyncProp && asyncProp.type && asyncProp.type.release) {\n        asyncProp.type.release(asyncProp.resolvedValue, asyncProp.type, this.component);\n      }\n    }\n  }\n\n  getOldProps() {\n    return this.oldAsyncProps || this.oldProps || EMPTY_PROPS;\n  }\n\n  resetOldProps() {\n    this.oldAsyncProps = null;\n    this.oldProps = this.component.props;\n  }\n\n  hasAsyncProp(propName) {\n    return propName in this.asyncProps;\n  }\n\n  getAsyncProp(propName) {\n    const asyncProp = this.asyncProps[propName];\n    return asyncProp && asyncProp.resolvedValue;\n  }\n\n  isAsyncPropLoading(propName) {\n    if (propName) {\n      const asyncProp = this.asyncProps[propName];\n      return Boolean(asyncProp && asyncProp.pendingLoadCount > 0 && asyncProp.pendingLoadCount !== asyncProp.resolvedLoadCount);\n    }\n\n    for (const key in this.asyncProps) {\n      if (this.isAsyncPropLoading(key)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  reloadAsyncProp(propName, value) {\n    this._watchPromise(propName, Promise.resolve(value));\n  }\n\n  setAsyncProps(props) {\n    const resolvedValues = props[ASYNC_RESOLVED_SYMBOL] || {};\n    const originalValues = props[ASYNC_ORIGINAL_SYMBOL] || props;\n    const defaultValues = props[ASYNC_DEFAULTS_SYMBOL] || {};\n\n    for (const propName in resolvedValues) {\n      const value = resolvedValues[propName];\n\n      this._createAsyncPropData(propName, defaultValues[propName]);\n\n      this._updateAsyncProp(propName, value);\n\n      resolvedValues[propName] = this.getAsyncProp(propName);\n    }\n\n    for (const propName in originalValues) {\n      const value = originalValues[propName];\n\n      this._createAsyncPropData(propName, defaultValues[propName]);\n\n      this._updateAsyncProp(propName, value);\n    }\n  }\n\n  _fetch(propName, url) {\n    return null;\n  }\n\n  _onResolve(propName, value) {}\n\n  _onError(propName, error) {}\n\n  _updateAsyncProp(propName, value) {\n    if (!this._didAsyncInputValueChange(propName, value)) {\n      return;\n    }\n\n    if (typeof value === 'string') {\n      value = this._fetch(propName, value);\n    }\n\n    if (value instanceof Promise) {\n      this._watchPromise(propName, value);\n\n      return;\n    }\n\n    if (isAsyncIterable(value)) {\n      this._resolveAsyncIterable(propName, value);\n\n      return;\n    }\n\n    this._setPropValue(propName, value);\n  }\n\n  _freezeAsyncOldProps() {\n    if (!this.oldAsyncProps && this.oldProps) {\n      this.oldAsyncProps = Object.create(this.oldProps);\n\n      for (const propName in this.asyncProps) {\n        Object.defineProperty(this.oldAsyncProps, propName, {\n          enumerable: true,\n          value: this.oldProps[propName]\n        });\n      }\n    }\n  }\n\n  _didAsyncInputValueChange(propName, value) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (value === asyncProp.resolvedValue || value === asyncProp.lastValue) {\n      return false;\n    }\n\n    asyncProp.lastValue = value;\n    return true;\n  }\n\n  _setPropValue(propName, value) {\n    this._freezeAsyncOldProps();\n\n    const asyncProp = this.asyncProps[propName];\n\n    if (asyncProp) {\n      value = this._postProcessValue(asyncProp, value);\n      asyncProp.resolvedValue = value;\n      asyncProp.pendingLoadCount++;\n      asyncProp.resolvedLoadCount = asyncProp.pendingLoadCount;\n    }\n  }\n\n  _setAsyncPropValue(propName, value, loadCount) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (asyncProp && loadCount >= asyncProp.resolvedLoadCount && value !== undefined) {\n      this._freezeAsyncOldProps();\n\n      asyncProp.resolvedValue = value;\n      asyncProp.resolvedLoadCount = loadCount;\n      this.onAsyncPropUpdated(propName, value);\n    }\n  }\n\n  _watchPromise(propName, promise) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (asyncProp) {\n      asyncProp.pendingLoadCount++;\n      const loadCount = asyncProp.pendingLoadCount;\n      promise.then(data => {\n        data = this._postProcessValue(asyncProp, data);\n\n        this._setAsyncPropValue(propName, data, loadCount);\n\n        this._onResolve(propName, data);\n      }).catch(error => {\n        this._onError(propName, error);\n      });\n    }\n  }\n\n  async _resolveAsyncIterable(propName, iterable) {\n    if (propName !== 'data') {\n      this._setPropValue(propName, iterable);\n\n      return;\n    }\n\n    const asyncProp = this.asyncProps[propName];\n\n    if (!asyncProp) {\n      return;\n    }\n\n    asyncProp.pendingLoadCount++;\n    const loadCount = asyncProp.pendingLoadCount;\n    let data = [];\n    let count = 0;\n\n    for await (const chunk of iterable) {\n      const {\n        dataTransform\n      } = this.component.props;\n\n      if (dataTransform) {\n        data = dataTransform(chunk, data);\n      } else {\n        data = data.concat(chunk);\n      }\n\n      Object.defineProperty(data, '__diff', {\n        enumerable: false,\n        value: [{\n          startRow: count,\n          endRow: data.length\n        }]\n      });\n      count = data.length;\n\n      this._setAsyncPropValue(propName, data, loadCount);\n    }\n\n    this._onResolve(propName, data);\n  }\n\n  _postProcessValue(asyncProp, value) {\n    const propType = asyncProp.type;\n\n    if (propType) {\n      if (propType.release) {\n        propType.release(asyncProp.resolvedValue, propType, this.component);\n      }\n\n      if (propType.transform) {\n        return propType.transform(value, propType, this.component);\n      }\n    }\n\n    return value;\n  }\n\n  _createAsyncPropData(propName, defaultValue) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (!asyncProp) {\n      const propTypes = this.component && this.component.constructor._propTypes;\n      this.asyncProps[propName] = {\n        type: propTypes && propTypes[propName],\n        lastValue: null,\n        resolvedValue: defaultValue,\n        pendingLoadCount: 0,\n        resolvedLoadCount: 0\n      };\n    }\n  }\n\n}\n//# sourceMappingURL=component-state.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport ComponentState from '../lifecycle/component-state';\nexport default class LayerState extends ComponentState {\n  constructor({\n    attributeManager,\n    layer\n  }) {\n    super(layer);\n\n    _defineProperty(this, \"attributeManager\", void 0);\n\n    _defineProperty(this, \"needsRedraw\", void 0);\n\n    _defineProperty(this, \"needsUpdate\", void 0);\n\n    _defineProperty(this, \"subLayers\", void 0);\n\n    _defineProperty(this, \"usesPickingColorCache\", void 0);\n\n    _defineProperty(this, \"changeFlags\", void 0);\n\n    _defineProperty(this, \"viewport\", void 0);\n\n    _defineProperty(this, \"uniformTransitions\", void 0);\n\n    _defineProperty(this, \"propsInTransition\", void 0);\n\n    this.attributeManager = attributeManager;\n    this.needsRedraw = true;\n    this.needsUpdate = true;\n    this.subLayers = null;\n    this.usesPickingColorCache = false;\n  }\n\n  get layer() {\n    return this.component;\n  }\n\n  set layer(layer) {\n    this.component = layer;\n  }\n\n  _fetch(propName, url) {\n    const fetch = this.component.props.fetch;\n\n    if (fetch) {\n      return fetch(url, {\n        propName,\n        layer: this.layer\n      });\n    }\n\n    return super._fetch(propName, url);\n  }\n\n  _onResolve(propName, value) {\n    const onDataLoad = this.component.props.onDataLoad;\n\n    if (propName === 'data' && onDataLoad) {\n      onDataLoad(value, {\n        propName,\n        layer: this.layer\n      });\n    }\n  }\n\n  _onError(propName, error) {\n    this.layer.raiseError(error, \"loading \".concat(propName, \" of \").concat(this.layer));\n  }\n\n}\n//# sourceMappingURL=layer-state.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { COORDINATE_SYSTEM, OPERATION } from './constants';\nimport AttributeManager from './attribute/attribute-manager';\nimport UniformTransitionManager from './uniform-transition-manager';\nimport { diffProps, validateProps } from '../lifecycle/props';\nimport { LIFECYCLE } from '../lifecycle/constants';\nimport { count } from '../utils/count';\nimport log from '../utils/log';\nimport debug from '../debug';\nimport { withParameters, setParameters } from '@luma.gl/core';\nimport assert from '../utils/assert';\nimport memoize from '../utils/memoize';\nimport { mergeShaders } from '../utils/shader';\nimport { projectPosition, getWorldPosition } from '../shaderlib/project/project-functions';\nimport typedArrayManager from '../utils/typed-array-manager';\nimport Component from '../lifecycle/component';\nimport LayerState from './layer-state';\nimport { worldToPixels } from '@math.gl/web-mercator';\nimport { load } from '@loaders.gl/core';\nconst TRACE_CHANGE_FLAG = 'layer.changeFlag';\nconst TRACE_INITIALIZE = 'layer.initialize';\nconst TRACE_UPDATE = 'layer.update';\nconst TRACE_FINALIZE = 'layer.finalize';\nconst TRACE_MATCHED = 'layer.matched';\nconst MAX_PICKING_COLOR_CACHE_SIZE = 2 ** 24 - 1;\nconst EMPTY_ARRAY = Object.freeze([]);\nconst areViewportsEqual = memoize(({\n  oldViewport,\n  viewport\n}) => {\n  return oldViewport.equals(viewport);\n});\nlet pickingColorCache = new Uint8ClampedArray(0);\nconst defaultProps = {\n  data: {\n    type: 'data',\n    value: EMPTY_ARRAY,\n    async: true\n  },\n  dataComparator: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  _dataDiff: {\n    type: 'function',\n    value: data => data && data.__diff,\n    compare: false,\n    optional: true\n  },\n  dataTransform: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDataLoad: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onError: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  fetch: {\n    type: 'function',\n    value: (url, {\n      propName,\n      layer,\n      loaders,\n      loadOptions,\n      signal\n    }) => {\n      const {\n        resourceManager\n      } = layer.context;\n      loadOptions = loadOptions || layer.getLoadOptions();\n      loaders = loaders || layer.props.loaders;\n\n      if (signal) {\n        var _loadOptions;\n\n        loadOptions = { ...loadOptions,\n          fetch: { ...((_loadOptions = loadOptions) === null || _loadOptions === void 0 ? void 0 : _loadOptions.fetch),\n            signal\n          }\n        };\n      }\n\n      let inResourceManager = resourceManager.contains(url);\n\n      if (!inResourceManager && !loadOptions) {\n        resourceManager.add({\n          resourceId: url,\n          data: load(url, loaders),\n          persistent: false\n        });\n        inResourceManager = true;\n      }\n\n      if (inResourceManager) {\n        return resourceManager.subscribe({\n          resourceId: url,\n          onChange: data => {\n            var _layer$internalState;\n\n            return (_layer$internalState = layer.internalState) === null || _layer$internalState === void 0 ? void 0 : _layer$internalState.reloadAsyncProp(propName, data);\n          },\n          consumerId: layer.id,\n          requestId: propName\n        });\n      }\n\n      return load(url, loaders, loadOptions);\n    },\n    compare: false\n  },\n  updateTriggers: {},\n  visible: true,\n  pickable: false,\n  opacity: {\n    type: 'number',\n    min: 0,\n    max: 1,\n    value: 1\n  },\n  operation: OPERATION.DRAW,\n  onHover: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onClick: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDragStart: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDrag: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDragEnd: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  coordinateSystem: COORDINATE_SYSTEM.DEFAULT,\n  coordinateOrigin: {\n    type: 'array',\n    value: [0, 0, 0],\n    compare: true\n  },\n  modelMatrix: {\n    type: 'array',\n    value: null,\n    compare: true,\n    optional: true\n  },\n  wrapLongitude: false,\n  positionFormat: 'XYZ',\n  colorFormat: 'RGBA',\n  parameters: {\n    type: 'object',\n    value: {},\n    optional: true,\n    compare: true\n  },\n  transitions: null,\n  extensions: [],\n  loaders: {\n    type: 'array',\n    value: [],\n    optional: true,\n    compare: true\n  },\n  getPolygonOffset: {\n    type: 'function',\n    value: ({\n      layerIndex\n    }) => [0, -layerIndex * 100],\n    compare: false\n  },\n  highlightedObjectIndex: null,\n  autoHighlight: false,\n  highlightColor: {\n    type: 'accessor',\n    value: [0, 0, 128, 128]\n  }\n};\nexport default class Layer extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"internalState\", null);\n\n    _defineProperty(this, \"lifecycle\", LIFECYCLE.NO_STATE);\n\n    _defineProperty(this, \"context\", void 0);\n\n    _defineProperty(this, \"state\", void 0);\n\n    _defineProperty(this, \"parent\", null);\n  }\n\n  get root() {\n    let layer = this;\n\n    while (layer.parent) {\n      layer = layer.parent;\n    }\n\n    return layer;\n  }\n\n  toString() {\n    const className = this.constructor.layerName || this.constructor.name;\n    return \"\".concat(className, \"({id: '\").concat(this.props.id, \"'})\");\n  }\n\n  project(xyz) {\n    assert(this.internalState);\n    const viewport = this.internalState.viewport || this.context.viewport;\n    const worldPosition = getWorldPosition(xyz, {\n      viewport,\n      modelMatrix: this.props.modelMatrix,\n      coordinateOrigin: this.props.coordinateOrigin,\n      coordinateSystem: this.props.coordinateSystem\n    });\n    const [x, y, z] = worldToPixels(worldPosition, viewport.pixelProjectionMatrix);\n    return xyz.length === 2 ? [x, y] : [x, y, z];\n  }\n\n  unproject(xy) {\n    assert(this.internalState);\n    const viewport = this.internalState.viewport || this.context.viewport;\n    return viewport.unproject(xy);\n  }\n\n  projectPosition(xyz, params) {\n    assert(this.internalState);\n    const viewport = this.internalState.viewport || this.context.viewport;\n    return projectPosition(xyz, {\n      viewport,\n      modelMatrix: this.props.modelMatrix,\n      coordinateOrigin: this.props.coordinateOrigin,\n      coordinateSystem: this.props.coordinateSystem,\n      ...params\n    });\n  }\n\n  get isComposite() {\n    return false;\n  }\n\n  setState(partialState) {\n    this.setChangeFlags({\n      stateChanged: true\n    });\n    Object.assign(this.state, partialState);\n    this.setNeedsRedraw();\n  }\n\n  setNeedsRedraw() {\n    if (this.internalState) {\n      this.internalState.needsRedraw = true;\n    }\n  }\n\n  setNeedsUpdate() {\n    if (this.internalState) {\n      this.context.layerManager.setNeedsUpdate(String(this));\n      this.internalState.needsUpdate = true;\n    }\n  }\n\n  get isLoaded() {\n    return this.internalState ? !this.internalState.isAsyncPropLoading() : false;\n  }\n\n  get wrapLongitude() {\n    return this.props.wrapLongitude;\n  }\n\n  isPickable() {\n    return this.props.pickable && this.props.visible;\n  }\n\n  getModels() {\n    return this.state && (this.state.models || this.state.model && [this.state.model]) || [];\n  }\n\n  setModuleParameters(moduleParameters) {\n    for (const model of this.getModels()) {\n      model.updateModuleSettings(moduleParameters);\n    }\n  }\n\n  getAttributeManager() {\n    return this.internalState && this.internalState.attributeManager;\n  }\n\n  getCurrentLayer() {\n    return this.internalState && this.internalState.layer;\n  }\n\n  getLoadOptions() {\n    return this.props.loadOptions;\n  }\n\n  use64bitPositions() {\n    const {\n      coordinateSystem\n    } = this.props;\n    return coordinateSystem === COORDINATE_SYSTEM.DEFAULT || coordinateSystem === COORDINATE_SYSTEM.LNGLAT || coordinateSystem === COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  onHover(info, pickingEvent) {\n    if (this.props.onHover) {\n      return this.props.onHover(info, pickingEvent) || false;\n    }\n\n    return false;\n  }\n\n  onClick(info, pickingEvent) {\n    if (this.props.onClick) {\n      return this.props.onClick(info, pickingEvent) || false;\n    }\n\n    return false;\n  }\n\n  nullPickingColor() {\n    return [0, 0, 0];\n  }\n\n  encodePickingColor(i, target = []) {\n    target[0] = i + 1 & 255;\n    target[1] = i + 1 >> 8 & 255;\n    target[2] = i + 1 >> 8 >> 8 & 255;\n    return target;\n  }\n\n  decodePickingColor(color) {\n    assert(color instanceof Uint8Array);\n    const [i1, i2, i3] = color;\n    const index = i1 + i2 * 256 + i3 * 65536 - 1;\n    return index;\n  }\n\n  getNumInstances() {\n    if (Number.isFinite(this.props.numInstances)) {\n      return this.props.numInstances;\n    }\n\n    if (this.state && this.state.numInstances !== undefined) {\n      return this.state.numInstances;\n    }\n\n    return count(this.props.data);\n  }\n\n  getStartIndices() {\n    if (this.props.startIndices) {\n      return this.props.startIndices;\n    }\n\n    if (this.state && this.state.startIndices) {\n      return this.state.startIndices;\n    }\n\n    return null;\n  }\n\n  getBounds() {\n    var _ref;\n\n    const attributeManager = this.getAttributeManager();\n    if (!attributeManager) return null;\n    const {\n      positions,\n      instancePositions\n    } = attributeManager.attributes;\n    return (_ref = positions || instancePositions) === null || _ref === void 0 ? void 0 : _ref.getBounds();\n  }\n\n  getShaders(shaders) {\n    for (const extension of this.props.extensions) {\n      shaders = mergeShaders(shaders, extension.getShaders.call(this, extension));\n    }\n\n    return shaders;\n  }\n\n  shouldUpdateState(params) {\n    return params.changeFlags.propsOrDataChanged;\n  }\n\n  updateState(params) {\n    const attributeManager = this.getAttributeManager();\n    const {\n      dataChanged\n    } = params.changeFlags;\n\n    if (dataChanged && attributeManager) {\n      if (Array.isArray(dataChanged)) {\n        for (const dataRange of dataChanged) {\n          attributeManager.invalidateAll(dataRange);\n        }\n      } else {\n        attributeManager.invalidateAll();\n      }\n    }\n\n    const {\n      props,\n      oldProps\n    } = params;\n    const neededPickingBuffer = Number.isInteger(oldProps.highlightedObjectIndex) || oldProps.pickable;\n    const needPickingBuffer = Number.isInteger(props.highlightedObjectIndex) || props.pickable;\n\n    if (neededPickingBuffer !== needPickingBuffer && attributeManager) {\n      const {\n        pickingColors,\n        instancePickingColors\n      } = attributeManager.attributes;\n      const pickingColorsAttribute = pickingColors || instancePickingColors;\n\n      if (pickingColorsAttribute) {\n        if (needPickingBuffer && pickingColorsAttribute.constant) {\n          pickingColorsAttribute.constant = false;\n          attributeManager.invalidate(pickingColorsAttribute.id);\n        }\n\n        if (!pickingColorsAttribute.value && !needPickingBuffer) {\n          pickingColorsAttribute.constant = true;\n          pickingColorsAttribute.value = [0, 0, 0];\n        }\n      }\n    }\n  }\n\n  finalizeState(context) {\n    for (const model of this.getModels()) {\n      model.delete();\n    }\n\n    const attributeManager = this.getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.finalize();\n    }\n\n    if (this.context) {\n      this.context.resourceManager.unsubscribe({\n        consumerId: this.id\n      });\n    }\n\n    if (this.internalState) {\n      this.internalState.uniformTransitions.clear();\n      this.internalState.finalize();\n    }\n  }\n\n  draw(opts) {\n    for (const model of this.getModels()) {\n      model.draw(opts);\n    }\n  }\n\n  getPickingInfo({\n    info,\n    mode,\n    sourceLayer\n  }) {\n    const {\n      index\n    } = info;\n\n    if (index >= 0) {\n      if (Array.isArray(this.props.data)) {\n        info.object = this.props.data[index];\n      }\n    }\n\n    return info;\n  }\n\n  raiseError(error, message) {\n    var _this$props$onError, _this$props;\n\n    if (message) {\n      error.message = \"\".concat(message, \": \").concat(error.message);\n    }\n\n    if (!((_this$props$onError = (_this$props = this.props).onError) !== null && _this$props$onError !== void 0 && _this$props$onError.call(_this$props, error))) {\n      var _this$context, _this$context$onError;\n\n      (_this$context = this.context) === null || _this$context === void 0 ? void 0 : (_this$context$onError = _this$context.onError) === null || _this$context$onError === void 0 ? void 0 : _this$context$onError.call(_this$context, error, this);\n    }\n  }\n\n  getNeedsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    return this._getNeedsRedraw(opts);\n  }\n\n  needsUpdate() {\n    if (!this.internalState) {\n      return false;\n    }\n\n    return this.internalState.needsUpdate || this.hasUniformTransition() || this.shouldUpdateState(this._getUpdateParams());\n  }\n\n  hasUniformTransition() {\n    var _this$internalState;\n\n    return ((_this$internalState = this.internalState) === null || _this$internalState === void 0 ? void 0 : _this$internalState.uniformTransitions.active) || false;\n  }\n\n  activateViewport(viewport) {\n    if (!this.internalState) {\n      return;\n    }\n\n    const oldViewport = this.internalState.viewport;\n    this.internalState.viewport = viewport;\n\n    if (!oldViewport || !areViewportsEqual({\n      oldViewport,\n      viewport\n    })) {\n      this.setChangeFlags({\n        viewportChanged: true\n      });\n\n      if (this.isComposite) {\n        if (this.needsUpdate()) {\n          this.setNeedsUpdate();\n        }\n      } else {\n        this._update();\n      }\n    }\n  }\n\n  invalidateAttribute(name = 'all') {\n    const attributeManager = this.getAttributeManager();\n\n    if (!attributeManager) {\n      return;\n    }\n\n    if (name === 'all') {\n      attributeManager.invalidateAll();\n    } else {\n      attributeManager.invalidate(name);\n    }\n  }\n\n  updateAttributes(changedAttributes) {\n    for (const model of this.getModels()) {\n      this._setModelAttributes(model, changedAttributes);\n    }\n  }\n\n  _updateAttributes() {\n    const attributeManager = this.getAttributeManager();\n\n    if (!attributeManager) {\n      return;\n    }\n\n    const props = this.props;\n    const numInstances = this.getNumInstances();\n    const startIndices = this.getStartIndices();\n    attributeManager.update({\n      data: props.data,\n      numInstances,\n      startIndices,\n      props,\n      transitions: props.transitions,\n      buffers: props.data.attributes,\n      context: this\n    });\n    const changedAttributes = attributeManager.getChangedAttributes({\n      clearChangedFlags: true\n    });\n    this.updateAttributes(changedAttributes);\n  }\n\n  _updateAttributeTransition() {\n    const attributeManager = this.getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.updateTransition();\n    }\n  }\n\n  _updateUniformTransition() {\n    const {\n      uniformTransitions\n    } = this.internalState;\n\n    if (uniformTransitions.active) {\n      const propsInTransition = uniformTransitions.update();\n      const props = Object.create(this.props);\n\n      for (const key in propsInTransition) {\n        Object.defineProperty(props, key, {\n          value: propsInTransition[key]\n        });\n      }\n\n      return props;\n    }\n\n    return this.props;\n  }\n\n  calculateInstancePickingColors(attribute, {\n    numInstances\n  }) {\n    if (attribute.constant) {\n      return;\n    }\n\n    const cacheSize = Math.floor(pickingColorCache.length / 3);\n    this.internalState.usesPickingColorCache = true;\n\n    if (cacheSize < numInstances) {\n      if (numInstances > MAX_PICKING_COLOR_CACHE_SIZE) {\n        log.warn('Layer has too many data objects. Picking might not be able to distinguish all objects.')();\n      }\n\n      pickingColorCache = typedArrayManager.allocate(pickingColorCache, numInstances, {\n        size: 3,\n        copy: true,\n        maxCount: Math.max(numInstances, MAX_PICKING_COLOR_CACHE_SIZE)\n      });\n      const newCacheSize = Math.floor(pickingColorCache.length / 3);\n      const pickingColor = [];\n\n      for (let i = cacheSize; i < newCacheSize; i++) {\n        this.encodePickingColor(i, pickingColor);\n        pickingColorCache[i * 3 + 0] = pickingColor[0];\n        pickingColorCache[i * 3 + 1] = pickingColor[1];\n        pickingColorCache[i * 3 + 2] = pickingColor[2];\n      }\n    }\n\n    attribute.value = pickingColorCache.subarray(0, numInstances * 3);\n  }\n\n  _setModelAttributes(model, changedAttributes) {\n    const attributeManager = this.getAttributeManager();\n    const excludeAttributes = model.userData.excludeAttributes || {};\n    const shaderAttributes = attributeManager.getShaderAttributes(changedAttributes, excludeAttributes);\n    model.setAttributes(shaderAttributes);\n  }\n\n  disablePickingIndex(objectIndex) {\n    this._disablePickingIndex(objectIndex);\n  }\n\n  _disablePickingIndex(objectIndex) {\n    const {\n      pickingColors,\n      instancePickingColors\n    } = this.getAttributeManager().attributes;\n    const colors = pickingColors || instancePickingColors;\n\n    if (!colors) {\n      return;\n    }\n\n    const start = colors.getVertexOffset(objectIndex);\n    const end = colors.getVertexOffset(objectIndex + 1);\n    colors.buffer.subData({\n      data: new Uint8Array(end - start),\n      offset: start\n    });\n  }\n\n  restorePickingColors() {\n    const {\n      pickingColors,\n      instancePickingColors\n    } = this.getAttributeManager().attributes;\n    const colors = pickingColors || instancePickingColors;\n\n    if (!colors) {\n      return;\n    }\n\n    if (this.internalState.usesPickingColorCache && colors.value.buffer !== pickingColorCache.buffer) {\n      colors.value = pickingColorCache.subarray(0, colors.value.length);\n    }\n\n    colors.updateSubBuffer({\n      startOffset: 0\n    });\n  }\n\n  _initialize() {\n    assert(!this.internalState);\n    assert(Number.isFinite(this.props.coordinateSystem));\n    debug(TRACE_INITIALIZE, this);\n\n    const attributeManager = this._getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.addInstanced({\n        instancePickingColors: {\n          type: 5121,\n          size: 3,\n          noAlloc: true,\n          update: this.calculateInstancePickingColors\n        }\n      });\n    }\n\n    this.internalState = new LayerState({\n      attributeManager,\n      layer: this\n    });\n\n    this._clearChangeFlags();\n\n    this.state = {};\n    Object.defineProperty(this.state, 'attributeManager', {\n      get: () => {\n        log.deprecated('layer.state.attributeManager', 'layer.getAttributeManager()')();\n        return attributeManager;\n      }\n    });\n    this.internalState.layer = this;\n    this.internalState.uniformTransitions = new UniformTransitionManager(this.context.timeline);\n    this.internalState.onAsyncPropUpdated = this._onAsyncPropUpdated.bind(this);\n    this.internalState.setAsyncProps(this.props);\n    this.initializeState(this.context);\n\n    for (const extension of this.props.extensions) {\n      extension.initializeState.call(this, this.context, extension);\n    }\n\n    this.setChangeFlags({\n      dataChanged: 'init',\n      propsChanged: 'init',\n      viewportChanged: true,\n      extensionsChanged: true\n    });\n\n    this._update();\n  }\n\n  _transferState(oldLayer) {\n    debug(TRACE_MATCHED, this, this === oldLayer);\n    const {\n      state,\n      internalState\n    } = oldLayer;\n\n    if (this === oldLayer) {\n      return;\n    }\n\n    this.internalState = internalState;\n    this.internalState.layer = this;\n    this.state = state;\n    this.internalState.setAsyncProps(this.props);\n\n    this._diffProps(this.props, this.internalState.getOldProps());\n  }\n\n  _update() {\n    const stateNeedsUpdate = this.needsUpdate();\n    debug(TRACE_UPDATE, this, stateNeedsUpdate);\n\n    if (!stateNeedsUpdate) {\n      return;\n    }\n\n    const currentProps = this.props;\n    const context = this.context;\n    const internalState = this.internalState;\n    const currentViewport = context.viewport;\n\n    const propsInTransition = this._updateUniformTransition();\n\n    internalState.propsInTransition = propsInTransition;\n    context.viewport = internalState.viewport || currentViewport;\n    this.props = propsInTransition;\n\n    try {\n      const updateParams = this._getUpdateParams();\n\n      const oldModels = this.getModels();\n\n      if (context.gl) {\n        this.updateState(updateParams);\n      } else {\n        try {\n          this.updateState(updateParams);\n        } catch (error) {}\n      }\n\n      for (const extension of this.props.extensions) {\n        extension.updateState.call(this, updateParams, extension);\n      }\n\n      const modelChanged = this.getModels()[0] !== oldModels[0];\n\n      this._postUpdate(updateParams, modelChanged);\n    } finally {\n      context.viewport = currentViewport;\n      this.props = currentProps;\n\n      this._clearChangeFlags();\n\n      internalState.needsUpdate = false;\n      internalState.resetOldProps();\n    }\n  }\n\n  _finalize() {\n    debug(TRACE_FINALIZE, this);\n    this.finalizeState(this.context);\n\n    for (const extension of this.props.extensions) {\n      extension.finalizeState.call(this, extension);\n    }\n  }\n\n  _drawLayer({\n    moduleParameters = null,\n    uniforms = {},\n    parameters = {}\n  }) {\n    this._updateAttributeTransition();\n\n    const currentProps = this.props;\n    const context = this.context;\n    this.props = this.internalState.propsInTransition || currentProps;\n    const opacity = this.props.opacity;\n    uniforms.opacity = Math.pow(opacity, 1 / 2.2);\n\n    try {\n      if (moduleParameters) {\n        this.setModuleParameters(moduleParameters);\n      }\n\n      const {\n        getPolygonOffset\n      } = this.props;\n      const offsets = getPolygonOffset && getPolygonOffset(uniforms) || [0, 0];\n      setParameters(context.gl, {\n        polygonOffset: offsets\n      });\n      withParameters(context.gl, parameters, () => {\n        const opts = {\n          moduleParameters,\n          uniforms,\n          parameters,\n          context\n        };\n\n        for (const extension of this.props.extensions) {\n          extension.draw.call(this, opts, extension);\n        }\n\n        this.draw(opts);\n      });\n    } finally {\n      this.props = currentProps;\n    }\n  }\n\n  getChangeFlags() {\n    var _this$internalState2;\n\n    return (_this$internalState2 = this.internalState) === null || _this$internalState2 === void 0 ? void 0 : _this$internalState2.changeFlags;\n  }\n\n  setChangeFlags(flags) {\n    if (!this.internalState) {\n      return;\n    }\n\n    const {\n      changeFlags\n    } = this.internalState;\n\n    for (const key in flags) {\n      if (flags[key]) {\n        let flagChanged = false;\n\n        switch (key) {\n          case 'dataChanged':\n            const dataChangedReason = flags[key];\n            const prevDataChangedReason = changeFlags[key];\n\n            if (dataChangedReason && Array.isArray(prevDataChangedReason)) {\n              changeFlags.dataChanged = Array.isArray(dataChangedReason) ? prevDataChangedReason.concat(dataChangedReason) : dataChangedReason;\n              flagChanged = true;\n            }\n\n          default:\n            if (!changeFlags[key]) {\n              changeFlags[key] = flags[key];\n              flagChanged = true;\n            }\n\n        }\n\n        if (flagChanged) {\n          debug(TRACE_CHANGE_FLAG, this, key, flags);\n        }\n      }\n    }\n\n    const propsOrDataChanged = Boolean(changeFlags.dataChanged || changeFlags.updateTriggersChanged || changeFlags.propsChanged || changeFlags.extensionsChanged);\n    changeFlags.propsOrDataChanged = propsOrDataChanged;\n    changeFlags.somethingChanged = propsOrDataChanged || changeFlags.viewportChanged || changeFlags.stateChanged;\n  }\n\n  _clearChangeFlags() {\n    this.internalState.changeFlags = {\n      dataChanged: false,\n      propsChanged: false,\n      updateTriggersChanged: false,\n      viewportChanged: false,\n      stateChanged: false,\n      extensionsChanged: false,\n      propsOrDataChanged: false,\n      somethingChanged: false\n    };\n  }\n\n  _diffProps(newProps, oldProps) {\n    const changeFlags = diffProps(newProps, oldProps);\n\n    if (changeFlags.updateTriggersChanged) {\n      for (const key in changeFlags.updateTriggersChanged) {\n        if (changeFlags.updateTriggersChanged[key]) {\n          this.invalidateAttribute(key);\n        }\n      }\n    }\n\n    if (changeFlags.transitionsChanged) {\n      for (const key in changeFlags.transitionsChanged) {\n        var _newProps$transitions;\n\n        this.internalState.uniformTransitions.add(key, oldProps[key], newProps[key], (_newProps$transitions = newProps.transitions) === null || _newProps$transitions === void 0 ? void 0 : _newProps$transitions[key]);\n      }\n    }\n\n    return this.setChangeFlags(changeFlags);\n  }\n\n  validateProps() {\n    validateProps(this.props);\n  }\n\n  updateAutoHighlight(info) {\n    if (this.props.autoHighlight && !Number.isInteger(this.props.highlightedObjectIndex)) {\n      this._updateAutoHighlight(info);\n    }\n  }\n\n  _updateAutoHighlight(info) {\n    const pickingModuleParameters = {\n      pickingSelectedColor: info.picked ? info.color : null\n    };\n    const {\n      highlightColor\n    } = this.props;\n\n    if (info.picked && typeof highlightColor === 'function') {\n      pickingModuleParameters.pickingHighlightColor = highlightColor(info);\n    }\n\n    this.setModuleParameters(pickingModuleParameters);\n    this.setNeedsRedraw();\n  }\n\n  _getAttributeManager() {\n    const context = this.context;\n    return new AttributeManager(context.gl, {\n      id: this.props.id,\n      stats: context.stats,\n      timeline: context.timeline\n    });\n  }\n\n  _postUpdate(updateParams, forceUpdate) {\n    const {\n      props,\n      oldProps\n    } = updateParams;\n    this.setNeedsRedraw();\n\n    this._updateAttributes();\n\n    const {\n      model\n    } = this.state;\n    model === null || model === void 0 ? void 0 : model.setInstanceCount(this.getNumInstances());\n    const {\n      autoHighlight,\n      highlightedObjectIndex,\n      highlightColor\n    } = props;\n\n    if (forceUpdate || oldProps.autoHighlight !== autoHighlight || oldProps.highlightedObjectIndex !== highlightedObjectIndex || oldProps.highlightColor !== highlightColor) {\n      const parameters = {};\n\n      if (!autoHighlight) {\n        parameters.pickingSelectedColor = null;\n      }\n\n      if (Array.isArray(highlightColor)) {\n        parameters.pickingHighlightColor = highlightColor;\n      }\n\n      if (Number.isInteger(highlightedObjectIndex)) {\n        parameters.pickingSelectedColor = Number.isFinite(highlightedObjectIndex) && highlightedObjectIndex >= 0 ? this.encodePickingColor(highlightedObjectIndex) : null;\n      }\n\n      this.setModuleParameters(parameters);\n    }\n  }\n\n  _getUpdateParams() {\n    return {\n      props: this.props,\n      oldProps: this.internalState.getOldProps(),\n      context: this.context,\n      changeFlags: this.internalState.changeFlags\n    };\n  }\n\n  _getNeedsRedraw(opts) {\n    if (!this.internalState) {\n      return false;\n    }\n\n    let redraw = false;\n    redraw = redraw || this.internalState.needsRedraw && this.id;\n    this.internalState.needsRedraw = this.internalState.needsRedraw && !opts.clearRedrawFlags;\n    const attributeManager = this.getAttributeManager();\n    const attributeManagerNeedsRedraw = attributeManager ? attributeManager.getNeedsRedraw(opts) : false;\n    redraw = redraw || attributeManagerNeedsRedraw;\n    return redraw;\n  }\n\n  _onAsyncPropUpdated() {\n    this._diffProps(this.props, this.internalState.getOldProps());\n\n    this.setNeedsUpdate();\n  }\n\n}\n\n_defineProperty(Layer, \"defaultProps\", defaultProps);\n\n_defineProperty(Layer, \"layerName\", 'Layer');\n//# sourceMappingURL=layer.js.map"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","out","ARRAY_TYPE","Float32Array","Array","transformMat4$2","a","m","x","y","z","w","createMat4$1","transformVector","matrix","vector","result","transformMat4","b","scale$2","mod$1","divisor","modulus","lerp$2","start","end","step","clamp$1","min","max","Math","hypot","i","arguments","length","sqrt","glMatrix.ARRAY_TYPE","log2","log","LOG2E","invert","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","multiply$1","b0","b1","b2","b3","translate","v","scale$1","rotateX$1","rad","s","sin","c","cos","rotateZ$1","perspective","fovy","aspect","near","far","nf","f","tan","Infinity","ortho","left","right","bottom","top","lr","bt","equals$1","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b12","b13","b14","b15","abs","add$2","scale","negate$1","lerp$1","t","ax","ay","sub","add$1","vec","create","mul","dist","assert$9","condition","message","Error","PI","PI_4","DEGREES_TO_RADIANS","RADIANS_TO_DEGREES","DEFAULT_ALTITUDE","zoomToScale","zoom","pow","scaleToZoom","scale2","lngLatToWorld","lngLat","lng","lat","assert","Number","isFinite","phi2","worldToLngLat","xy","lambda2","atan","exp","getDistanceScales","options","latitude","longitude","highPrecision","latCosine","unitsPerDegreeX","unitsPerDegreeY","altUnitsPerMeter","unitsPerMeter","metersPerUnit","unitsPerDegree","degreesPerUnit","latCosine2","unitsPerDegreeY2","altUnitsPerDegree2","altUnitsPerMeter2","unitsPerDegree2","unitsPerMeter2","addMetersToLngLat","lngLatZ","xyz","z0","unitsPerMeter22","worldspace","newLngLat","newZ","getViewMatrix","height","pitch","bearing","altitude","center","vm","mat4.translate","relativeScale","mat4.scale","vec3.negate","getProjectionParameters","width","offset","nearZMultiplier","farZMultiplier","altitudeToFovy","fovRadians","pitchRadians","focalDistance","fovyToAltitude","cameraToSeaLevelDistance","fovAboveCenter","topHalfSurfaceDistance","clamp","furthestDistance","horizonDistance","fov","getProjectionMatrix$1","mat4.perspective","worldToPixels","pixelProjectionMatrix","pixelsToWorld","pixelUnprojectionMatrix","targetZ","coord0","coord1","z1","vec2.lerp","fitBounds","bounds","minExtent","maxZoom","west","south","east","north","padding","getPaddingObject","nw","se","size","targetSize","scaleX2","scaleY2","offsetX","offsetY","centerLngLat","getBounds","viewport","unproject","unprojectOps","bottomLeft","bottomRight","topLeft","topRight","unprojectOnFarPlane","distanceScales","push","normalizeViewportProps","props","mod","minZoom","halfHeightPixels","minLatitude","maxLatitude","window2","document2","exportName","undefined","assign","VENDOR_PREFIXES","TEST_ELEMENT","createElement","round2","round","now","Date","setTimeoutContext","fn","timeout","context","setTimeout","bindFn","invokeArrayArg","arg","isArray","each","iterator","forEach","call","hasOwnProperty","deprecate","method","name","deprecationMessage","e","stack","replace","log3","console","warn","apply","this","target","TypeError","output","index","source","nextKey","extend","dest","src","merge2","keys","merge","inherit","child","base","properties","childP","baseP","prototype","constructor","_super","boolOrFn","val","args","ifUndefined","val1","val2","addEventListeners","types","handler","splitStr","type","addEventListener","removeEventListeners","removeEventListener","hasParent","node","parent","parentNode","inStr","str","find","indexOf","trim","split","inArray","findByKey","toArray","slice","uniqueArray","sort","results","values","prefixed","property","prefix","prop","camelProp","toUpperCase","_uniqueId","getWindowForElement","element","doc","ownerDocument","defaultView","parentWindow","SUPPORT_TOUCH","SUPPORT_POINTER_EVENTS","SUPPORT_ONLY_TOUCH","test","navigator","userAgent","INPUT_TYPE_TOUCH","INPUT_TYPE_MOUSE","DIRECTION_VERTICAL","DIRECTION_UP","PROPS_XY","PROPS_CLIENT_XY","Input2","manager","callback","self2","inputTarget","domHandler","ev","enable","init","inputHandler","eventType","input","pointersLen","pointers","changedPointersLen","changedPointers","isFirst","isFinal","session","pointersLength","firstInput","simpleCloneInputData","firstMultiple","offsetCenter","getCenter","timeStamp","deltaTime","angle","getAngle","distance","getDistance","offsetDelta","prevDelta","prevInput","deltaX","deltaY","computeDeltaXY","offsetDirection","getDirection","overallVelocity","getVelocity","overallVelocityX","overallVelocityY","rotation","getRotation","maxPointers","velocity","velocityX","velocityY","direction","last","lastInterval","computeIntervalInputData","srcEvent","computeInputData","emit","recognize","clientX","clientY","p1","p2","atan2","evEl","evTarget","evWin","destroy","MOUSE_INPUT_MAP2","mousedown","mousemove","mouseup","MOUSE_ELEMENT_EVENTS","MOUSE_WINDOW_EVENTS","MouseInput","pressed","button","which","pointerType","POINTER_INPUT_MAP","pointerdown","pointermove","pointerup","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","PointerEventInput","store","pointerEvents","MSPointerEvent","PointerEvent","removePointer","eventTypeNormalized","toLowerCase","isTouch","storeIndex","pointerId","splice","SINGLE_TOUCH_INPUT_MAP","touchstart","touchmove","touchend","touchcancel","SINGLE_TOUCH_TARGET_EVENTS","SINGLE_TOUCH_WINDOW_EVENTS","SingleTouchInput","started","normalizeSingleTouches","all","touches","changed","changedTouches","concat","TOUCH_INPUT_MAP","TOUCH_TARGET_EVENTS","TouchInput","targetIds","getTouches","allTouches","identifier","targetTouches","changedTargetTouches","filter","touch","TouchMouseInput","mouse","primaryTouch","lastTouches","recordTouches","eventData","setLastTouch","lastTouch","lts","isSyntheticEvent","dx","dy","inputEvent","inputData","isMouse","sourceCapabilities","firesTouchEvents","PREFIXED_TOUCH_ACTION","style","NATIVE_TOUCH_ACTION","TOUCH_ACTION_COMPUTE","TOUCH_ACTION_AUTO","TOUCH_ACTION_MANIPULATION","TOUCH_ACTION_NONE","TOUCH_ACTION_PAN_X","TOUCH_ACTION_PAN_Y","TOUCH_ACTION_MAP","touchMap","cssSupports","CSS","supports","getTouchActionProps","TouchAction","set","compute","actions","update","touchAction","recognizers","recognizer","getTouchAction","hasPanX","hasPanY","cleanTouchActions","join","preventDefaults","prevented","preventDefault","hasNone","isTapPointer","isTapMovement","isTapTouchTime","DIRECTION_LEFT","preventSrc","STATE_FAILED","Recognizer","defaults","id","state","simultaneous","requireFail","stateStr","directionStr","getRecognizerByNameIfManager","otherRecognizer","get","AttrRecognizer","PanRecognizer","pX","pY","PinchRecognizer","PressRecognizer","_timer","_input","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","count","Hammer","preset","Manager2","handlers","oldCssProps","inputClass","toggleCssProps","item","add","recognizeWith","requireFailure","add2","cssProps","dropRecognizeWith","dropRequireFailure","hasRequireFailures","canRecognizeWith","event","additionalEvent","tryEmit","canEmit","inputDataClone","reset","process","attrTest","optionPointers","isRecognized","isValid","threshold","DIRECTION_HORIZONTAL","directionTest","hasMoved","distance2","inOut","time","validPointers","validMovement","validTime","clearTimeout","taps","interval","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","VERSION","domEvents","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","stop","force","stopped","curRecognizer","existing","remove","on","events","off","data","gestureEvent","createEvent","initEvent","gesture","dispatchEvent","triggerDomEvent","INPUT_START","INPUT_MOVE","INPUT_END","INPUT_CANCEL","STATE_POSSIBLE","STATE_BEGAN","STATE_CHANGED","STATE_ENDED","STATE_RECOGNIZED","STATE_CANCELLED","DIRECTION_NONE","DIRECTION_RIGHT","DIRECTION_DOWN","DIRECTION_ALL","Manager","Input","Tap","Pan","Swipe","Pinch","Rotate","Press","self","module","exports","window","document","MOUSE_INPUT_MAP","oldHandler","array","predict","some","enhancePointerEventInput","hammerjs.PointerEventInput","hammerjs.MouseInput","hammerjs.Manager","__spreadValues","RECOGNIZERS","RECOGNIZER_COMPATIBLE_MAP","tripan","rotate","pinch","pan","doubletap","anytap","RECOGNIZER_FALLBACK_MAP","BASIC_EVENT_ALIASES","INPUT_EVENT_TYPES","KEY_EVENTS","MOUSE_EVENTS","WHEEL_EVENTS","EVENT_RECOGNIZER_MAP","tap","press","pinchin","pinchout","pinchstart","pinchmove","pinchend","pinchcancel","rotatestart","rotatemove","rotateend","rotatecancel","tripanstart","tripanmove","tripanup","tripandown","tripanleft","tripanright","tripanend","tripancancel","panstart","panmove","panup","pandown","panleft","panright","panend","pancancel","swipe","swipeleft","swiperight","swipeup","swipedown","GESTURE_EVENT_ALIASES","click","anyclick","dblclick","mouseover","mouseout","mouseleave","window_","global","passiveSupported","passive","window_$1","err","firefox","WheelInput","super","handleEvent","WheelEvent","deltaMode","DOM_DELTA_PIXEL","devicePixelRatio","DOM_DELTA_LINE","floor","shiftKey","delta","enableEventType","enabled","MoveInput","handleOverEvent","handleOutEvent","handleEnterEvent","handleLeaveEvent","handleMoveEvent","enableMoveEvent","enable2","enableLeaveEvent","enableEnterEvent","enableOutEvent","enableOverEvent","_emit","KeyInput","targetElement","srcElement","tagName","enableDownEvent","enableUpEvent","tabIndex","outline","ContextmenuInput","DEFAULT_OPTIONS","priority","EventRegistrar","eventManager","isEmpty","mjolnirEvent","_normalizeEvent","rootElement","handled","handlersByElement","Map","_active","once","opts","__spreadProps","entries","entry","insertPosition","delete","immediatePropagationStopped","stopPropagation","stopImmediatePropagation","entriesToRemove","getElement","buttons","leftButton","middleButton","rightButton","Boolean","whichButtons","rect","getBoundingClientRect","offsetWidth","offsetHeight","clientLeft","clientTop","getOffsetPosition","recognizerOptions","EventManager","_onBasicInput","alias","_onOtherEvent","setElement","ManagerClass","otherName","recognizerName","recognizerOption","wheelInput","moveInput","keyInput","contextmenuInput","eventAlias","eventRegistrar","_toggleRecognizer","_addEventHandler","watch","_removeEventHandler","fallbackRecognizers","eventName","isRecognizerUsed","eh","assert$8","isBrowser","String","browser","matches","version","exec","parseFloat","assert$7","isMobile","orientation","WorkerJob","jobName","workerThread","Promise","resolve","reject","_resolve","_reject","postMessage","payload","done","isRunning","error","error2","Worker$1","workerURLCache","getLoadableWorkerURL","url","workerURL","startsWith","getLoadableWorkerURLFromSource","workerUrl","getLoadableWorkerURLFromURL","workerSource","blob","Blob","URL","createObjectURL","getTransferList","object","recursive","transfers","transfersSet","Set","isTransferable","buffer","ArrayBuffer","isView","from","MessagePort","ImageBitmap","OffscreenCanvas","NOOP","WorkerThread","isSupported","Worker","NodeWorker","onMessage","onError","worker","_createBrowserWorker","_createNodeWorker","terminate","terminated","transferList","_getErrorFromErrorEvent","lineno","colno","_loadableURL","onmessage","onerror","onmessageerror","includes","eval","code","WorkerPool","setProps","idleQueue","isDestroyed","maxConcurrency","maxMobileConcurrency","reuseWorkers","onDebug","startJob","onMessage2","job","startPromise","onStart","jobQueue","_startQueuedJob","_getAvailableWorker","queuedJob","shift","backlog","returnWorkerToQueue","_getMaxConcurrency","DEFAULT_PROPS","WorkerFarm","getWorkerFarm","_workerFarm","workerPools","workerPool","_getWorkerPoolProps","getWorkerPool","async","parseWithWorker","loader","parseOnMainThread","workerOptions","workerFile","_workerType","version2","versionTag","getWorkerURL","JSON","parse","stringify","bind","isBuffer$1","isBuffer","toArrayBuffer","Uint8Array","byteOffset","bufferToArrayBuffer","byteLength","text","TextEncoder","encode","_toArrayBuffer","concatenateArrayBuffersAsync","asyncIterator","arrayBuffers","chunk","sources","sourceArrays","map","source2","reduce","length2","typedArray","sourceArray","concatenateArrayBuffers","getHiResTimestamp$1","timestamp","performance","hrtime","timeParts","Stat","setSampleSize","samples","sampleSize","incrementCount","addCount","decrementCount","subtractCount","_count","_samples","_checkSampling","addTime","_time","lastTiming","timeStart","_startTime","getHiResTimestamp","_timerPending","timeEnd","getSampleAverageCount","lastSampleCount","getSampleAverageTime","lastSampleTime","getSampleHz","getAverageCount","getAverageTime","getHz","Stats","stats","_initializeStats","seal","_getOrCreate","getTable","table","stat","average","hz","fileAliases","isFunction","isObject","isPureObject","isResponse","Response","arrayBuffer","json","isBlob","isReadableStream","ReadableStream","tee","cancel","getReader","isReadableDOMStream","read","pipe","isBoolean","readable","isReadableNodeStream","DATA_URL_PATTERN","MIME_TYPE_PATTERN","parseMIMEType","mimeString","matches2","parseMIMETypeFromURL","QUERY_STRING_PATTERN","getResourceUrlAndType","resource","stripQueryString","headers","makeResponse","contentLength","getResourceContentLength","initialDataUrl","INITIAL_DATA_LENGTH","blobSlice","reader","FileReader","onload","_event$target","readAsDataURL","base64","binary","bytes","fromCharCode","btoa","arrayBufferToBase64","getInitialDataUrl","response","fetchFile","filename2","replacement","resolvePath","fetchOptions","fetch","isElectron","mockUserAgent","versions","electron","realUserAgent","userAgent2","isBrowser$2","globals","process_","__VERSION__","checkIfBrowser","globalThis","getBrowser","navigator_","isMSIE","isTrident","chrome","safari","mozInnerScreenX","LocalStorage","defaultSettings","storage","setItem","removeItem","getStorage","config","_loadConfiguration","getConfiguration","setConfiguration","configuration","updateConfiguration","serialized","serializedConfiguration","getItem","formatImage","image","maxWidth","imageUrl","COLOR","COLOR2","getColor","color","WHITE","assert$6","_window$performance","_window$performance$n","_process$hrtime","originalConsole","debug","info","DEFAULT_SETTINGS","level","noop$2","cache","ONCE","Log","_storage","userData","predefined","proto","getPrototypeOf","propNames","getOwnPropertyNames","autobind","newLevel","setLevel","getLevel","isEnabled","getTotal","_startTs","toPrecision","getDelta","_deltaTs","newPriority","getPriority","setting","settings","_getLogFunction","deprecated","oldUsage","newUsage","removed","probe","logLevel","_len","_key","columns","noop","tag","getTableHeader","_ref","_shouldLog","_ref3","img","Image","nodeName","toDataURL","logImageInBrowser","_ref2","logImageInNode","group","collapsed","normalizeArguments","groupCollapsed","groupEnd","withGroup","func","trace","normalizeLogLevel","total","string","padLength","repeat","leftPad","ms","formatted","toFixed","formatTime","background","decorateMessage","resolvedLevel","unshift","messageType","title","probeLog","NullLog","DEFAULT_LOADER_OPTIONS","mimeType","nothrow","CDN","_nodeWorkers","limit","_limitMB","batchSize","batchDebounceMs","metadata","transforms","REMOVED_LOADER_OPTIONS","throws","dataType","uri","body","mode","credentials","redirect","referrer","referrerPolicy","integrity","keepalive","signal","getGlobalLoaderState","loaders","_state","getGlobalLoaderOptions","globalOptions","normalizeOptions","validateOptionsObject","idOptions","loaderOptions","deprecatedOptions","validateOptions","loaderDefaultOptions","mergedOptions","baseUri","addUrlOptions","mergeNestedFields","normalizeOptionsInternal","getFetchFunction","defaultOptions","loaderName","isSubOptions","isBaseUriOption","isWorkerUrlOption","suggestion","findSimilarOption","optionKey","lowerCaseOptionKey","bestSuggestion","lowerCaseKey","isLoaderObject","_loader","extensions","normalizeLoader","_loader2","_loader3","parseTextSync","parseText","getGlobalLoaderRegistry","loaderRegistry","EXT_PATTERN","selectLoaderSync","validHTTPResponse","candidateLoaders","ignoreRegisteredLoaders","normalizeLoaders","testUrl","reason","findLoaderByMIMEType","match","extension","loaderExtension","findLoaderByExtension","findLoaderByUrl","testDataAgainstText","testDataAgainstBinary","findLoaderByInitialBytes","getFirstCharacters","fallbackMimeType","selectLoaderInternal","getNoValidLoaderMessage","status","slashIndex","lastIndexOf","substr","path.filename","firstCharacters","mimeTypes","testText","tests","arrayBuffer1","arrayBuffer2","array12","array2","compareArrayBuffers","getMagicString","testBinary","dataView","DataView","magic","getUint8","DEFAULT_CHUNK_SIZE","makeStreamIterator","stream","nextBatchPromise","currentBatchPromise","_streamReadAhead","releaseLock","makeBrowserStreamIterator","makeNodeStreamIterator","makeIterator","chunkSize","textEncoder","chunkLength","makeStringIterator","chunkByteLength","makeArrayBufferIterator","makeBlobIterator","ERR_DATA","getArrayBufferOrStringFromData","isArrayBuffer","TextDecoder","decode","getArrayBufferOrStringFromDataSync","ok","contentType","statusText","getResponseError","checkResponse","Symbol","isAsyncIterable","contextLoaders","getLoadersFromContext","selectLoader","previousContext","resolvedContext","getLoaderContext","coreVersion","workerVersion","validateWorkerVersion","redirected","fromEntries","canParseWithWorker","parseSync","parseWithLoader","load","fetch2","assert$5","_parseImageNode","IMAGE_SUPPORTED","IMAGE_BITMAP_SUPPORTED","NODE_IMAGE_SUPPORTED","DATA_SUPPORTED","getImageType","format","getImageTypeOrNull","SVG_DATA_URL_PATTERN","SVG_URL_PATTERN","isSVG","getBlob","parseToImage","blobOrDataUrl","xmlText","unescape","encodeURIComponent","getBlobOrSVGDataUrl","URL2","webkitURL","objectUrl","loadToImage","revokeObjectURL","EMPTY_OBJECT","imagebitmapOptionsSupported","parseToImageBitmap","imagebitmapOptions","imagebitmap","isEmptyObject","createImageBitmap","safeCreateImageBitmap","getBinaryImageMetadata","binaryData","toDataView","getUint32","getPngMetadata","getUint16","tableMarkers","sofMarkers","getJpegMarkers","marker","has","getJpegMetadata","getGifMetadata","getBmpMetadata","ImageLoader","imageType","getDefaultImageType","isImageTypeSupported","getLoadableImageType","_parseImageNode2","parseToNodeImage","canvas","getContext","drawImage","getImageData","log$2","loggers","arg1","arg2","arg3","deckLog","jsonLoader","firstChar","lastChar","existingVersion","deck","_registerLoggers","normalizedLoader","registeredLoader","registerLoaders","premultiplyAlpha","deckGlobal","assert$4","isWebGL","gl","WebGLRenderingContext","WebGL2RenderingContext","_version","isWebGL2$1","assertWebGLContext","assertWebGL2Context","isWebGL2","glErrorShadow","synthesizeGLError","opt_msg","msg","WebGLVertexArrayObjectOES","ext","isAlive","hasBeenBound","elementArrayBuffer","attribs","maxVertexAttribs","n","attrib","WebGLVertexArrayObjectOES2","VertexAttrib","maxAttrib","normalized","stride","cached","recache","OESVertexArrayObject","getError","parseInt","wrapGLError","original","getParameter","enableVertexAttribArray","disableVertexAttribArray","bindBuffer","getVertexAttrib","vertexAttribPointer","pname","VERTEX_ARRAY_BINDING_OES","currentVertexArrayObject","defaultVertexArrayObject","vao","currentArrayBuffer","indx","instrumentExtension","reset_","vertexArrayObjects","ii","bindVertexArrayOES","createVertexArrayOES","arrayObject","deleteVertexArrayOES","isVertexArrayOES","oldVAO","newVAO","currentBinding","oldAttrib","bufferChanged","getWebGL2ValueOrZero","WEBGL_PARAMETERS","GL_GPU_DISJOINT_EXT","getExtension","GPU_DISJOINT_EXT","UNMASKED_VENDOR_WEBGL","UNMASKED_RENDERER_WEBGL","luma","EXT_texture_filter_anisotropic","MAX_TEXTURE_MAX_ANISOTROPY_EXT","MAX_COLOR_ATTACHMENTS_WEBGL","MAX_DRAW_BUFFERS_WEBGL","WEBGL2_CONTEXT_POLYFILLS","OES_vertex_array_object","meta","suffix","createVertexArray","deleteVertexArray","bindVertexArray","isVertexArray","ANGLE_instanced_arrays","vertexAttribDivisor","location","drawElementsInstanced","drawArraysInstanced","WEBGL_draw_buffers","drawBuffers","EXT_disjoint_timer_query","createQuery","deleteQuery","beginQuery","endQuery","getQuery","handle","getQueryObject","getQueryParameter","WEBGL2_CONTEXT_OVERRIDES","readBuffer","originalFunc","attachment","webgl2","getExtensionData","getProgramParameter","program","getInternalformatParameter","Int32Array","getTexParameter","TEXTURE_MAX_ANISOTROPY_EXT","originalGetParameter","hint","polyfillExtension","target2","extKey","polyfill","polyfillContext","polyfilled","original_getSupportedExtensions","getSupportedExtensions","list","original_getExtension","__OESVertexArrayObject","polyfillVertexArrayObject","EXTENSIONS2","initializeExtensions","polyfills","installPolyfills","installOverrides","GL_PARAMETER_DEFAULTS","disable","pixelStorei","isArray$2","GL_PARAMETER_SETTERS","blendColor","clearColor","colorMask","cullFace","clearDepth","depthFunc","depthRange","depthMask","bindFramebuffer","frontFace","lineWidth","scissor","clearStencil","stencilMaskSeparate","framebuffer","blend","blendEquation","blendEquationSeparate","blendFunc","blendFuncSeparate","cull","depthTest","dither","derivativeHint","mipmapHint","polygonOffsetFill","polygonOffset","sampleCoverage","scissorTest","stencilTest","stencilMask","mask","backMask","stencilFunc","ref","backFunc","backRef","stencilFuncSeparate","stencilOp","sfail","dpfail","dppass","backSfail","backDpfail","backDppass","stencilOpSeparate","getValue","glEnum","cache2","GL_COMPOSITE_PARAMETER_SETTERS","stencilFuncFront","stencilFuncBack","stencilOpFront","stencilOpBack","GL_HOOKED_SETTERS","capability","hint2","r","g","modeRGB","modeAlpha","dst","srcRGB","dstRGB","srcAlpha","dstAlpha","depth","zNear","zFar","face","factor","units","invert2","fail","zfail","zpass","GL_PARAMETER_GETTERS","isObjectEmpty$1","deepArrayEqual","isArrayX","isArrayY","installGetterOverride","functionName","originalGetterFunc","installSetterSpy","setter","originalSetterFunc","params","valueChanged","oldValue","_updateCache","installProgramSpy","originalUseProgram","useProgram","GLState","copyState","stateStack","parameters","getter","parameterKeys","getParameters","pop","oldValues","setParameters","trackContextState","polyfillContext2","popContextState","isObjectEmpty","compositeSetters","glConstant","compositeSetter","withParameters","nocatch","pushContextState","cssToDeviceRatio","clientWidth","canvasSizeInfo","drawingBufferWidth","cssToDevicePixels","cssPixel","yInvert","ratio","drawingBufferHeight","scalePixels","getDevicePixelRatio","useDevicePixels","windowRatio","scalePixels$1","pixel","scaleX","scaleY","xHigh","yHigh","getIsBrowser","isPage","CONTEXT_DEFAULTS","webgl1","throwOnError","manageState","createGLContext","targetCanvas","getCanvas","createBrowserContext","instrumentGLContext","logInfo","_instrumented","getVersion","debug2","makeDebugContext","errorMessage","onCreateError","statusMessage","onContextLost","onContextRestored","readyState","getElementById","insertBefore","firstChild","webGL","vendorMasked","rendererMasked","vendor","renderer","shadingLanguageVersion","getContextDebugInfo","driver","log$1","setDevicePixelRatio","clientHeight","cachedSize","clampedPixelRatio","canvasWidth","canvasHeight","lumaStats","assert$3","getKeyValue","number","isNaN","getKey","modules","nodeIO","uidCounters","uid","count2","isPowerOfTwo","stubRemovedMethods","instance","className","methodNames","upgradeMessage","methodName","ERR_RESOURCE_METHOD_UNDEFINED","Resource$1","toStringTag","gl2","_bound","_handle","_createHandle","_addStats","toString","deleteChildren","children","_deleteHandle","_removeStats","funcOrHandle","_bindHandle","unbind","parameter","PARAMETERS","isWebgl2","webgl1Default","webgl2Default","_getParameter","setParameter","_setParameter","initialize","_getOptsFromHandle","_context","_trackAllocatedMemory","_trackAllocatedMemoryForContext","_trackDeallocatedMemory","_trackDeallocatedMemoryForContext","getGLTypeFromTypedArray","arrayOrType","Uint16Array","Uint32Array","Uint8ClampedArray","Int8Array","Int16Array","getTypedArrayFromGLType","glType","clamped","flipRows","bytesPerPixel","temp","bytesPerRow","topOffset","bottomOffset","subarray","copyWithin","newWidth","newHeight","newData","checkProps","propChecks","removedProps","deprecatedProps","replacedProps","propName","replacementProp","newProps","DEFAULT_ACCESSOR_VALUES","integer","PROP_CHECKS","instanced","isInstanced","Accessor","getBytesPerElement","accessor","BYTES_PER_ELEMENT","getBytesPerVertex","accessors","_len2","_key2","_assign","freeze","BYTES_PER_VERTEX","DEPRECATED_PROPS","PROP_CHECKS_INITIALIZE","PROP_CHECKS_SET_PROPS","Buffer2","Resource","getElementCount","getVertexCount","usage","debugData","setAccessor","_setData","_setByteLength","reallocate","bytesUsed","setData","subData","srcOffset","bufferSubData","_inferType","copyData","sourceBuffer","readOffset","writeOffset","copyBufferSubData","getData","dstData","srcByteOffset","dstOffset","ArrayType","sourceAvailableElementCount","_getAvailableElementCount","dstElementOffset","dstAvailableElementCount","dstElementCount","copyElementCount","getBufferSubData","bindBufferRange","bindBufferBase","getDebugData","invalidateDebugData","_getTarget","bufferData","sourceElementOffset","createBuffer","deleteBuffer","getBufferParameter","setByteLength","updateAccessor","TEXTURE_FORMATS","dataFormat","DATA_FORMAT_CHANNELS","TYPE_SIZES","NPOT_MIN_FILTERS","WebGLBuffer","Texture","linearFiltering","supported","gl1","isFormatSupported","isLinearFilteringSupported","textureUnit","loaded","border","mipmaps","then","resolvedImageData","pixels","isVideo","HTMLVideoElement","HAVE_METADATA","_video","recreate","pixelStore","compressed","_deduceParameters","activeTexture","bindTexture","_isNPOT","_updateForNPOT","setImageData","generateMipmap","video","lastTime","HAVE_CURRENT_DATA","currentTime","setSubImageData","resize","_getDataType","compressedTextureSize","texImage2D","levelIndex","levelData","compressedTexImage2D","levelSize","channels","channelSize","ndarray","shape","compressedTexSubImage2D","texSubImage2D","copyFramebuffer","getActiveUnit","textureFormat","_deduceImageSize","ImageData","HTMLImageElement","naturalWidth","naturalHeight","HTMLCanvasElement","videoWidth","videoHeight","createTexture","deleteTexture","param","_getNPOTParam","texParameterf","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","Texture2D","crossOrigin","FACES","TextureCube","setCubeMapImageData","subImage","mipmapLevel","_subImage","imageDataMap","resolvedFaces","facePixels","lodLevel","setImageDataForFace","imageData","Texture3D","unpackFlipY","texImage3D","EXT_FLOAT_WEBGL2","RENDERBUFFER_FORMATS","bpp","Renderbuffer","formats","getSamplesForFormat","bindRenderbuffer","renderbufferStorageMultisample","renderbufferStorage","createRenderbuffer","deleteRenderbuffer","_syncHandle","getRenderbufferParameter","GL_COLOR","clear","stencil","clearFlags","readPixelsToArray","sourceX","sourceY","sourceFormat","sourceAttachment","sourceWidth","sourceHeight","sourceType","deleteFramebuffer","getFramebuffer","attachments","getPixelArray","prevHandle","readPixels","copyToDataUrl","targetMaxHeight","MAX_SAFE_INTEGER","createImageData","putImageData","copyToTexture","targetMipmaplevel","targetInternalFormat","targetX","targetY","isSubCopy","texture","copyTexSubImage2D","copyTexSubImage3D","copyTexImage2D","getFramebuffer$1","Framebuffer","toFramebuffer","pixelArray","glFormatToComponents","FEATURES","WEBGL2","VERTEX_ARRAY_OBJECT","TIMER_QUERY","INSTANCED_RENDERING","MULTIPLE_RENDER_TARGETS","ELEMENT_INDEX_UINT32","BLEND_EQUATION_MINMAX","FLOAT_BLEND","COLOR_ENCODING_SRGB","TEXTURE_DEPTH","TEXTURE_FLOAT","TEXTURE_HALF_FLOAT","TEXTURE_FILTER_LINEAR_FLOAT","TEXTURE_FILTER_LINEAR_HALF_FLOAT","TEXTURE_FILTER_ANISOTROPIC","COLOR_ATTACHMENT_RGBA32F","COLOR_ATTACHMENT_FLOAT","COLOR_ATTACHMENT_HALF_FLOAT","GLSL_FRAG_DATA","GLSL_FRAG_DEPTH","GLSL_DERIVATIVES","GLSL_TEXTURE_LOD","WEBGL_FEATURES$1","testTexture","testFb","check","getStatus","hasFeature","feature","hasFeatures","hasFeatures$1","features","every","isFeatureSupported","cap","caps","WEBGL_FEATURES","featureDefinition","queryFeature","colorBufferFloat","colorBufferHalfFloat","getDefaultFramebuffer","defaultFramebuffer","MAX_COLOR_ATTACHMENTS","MAX_DRAW_BUFFERS","ownResources","_createDefaultAttachments","clearAttachments","checkStatus","resizeAttachments","attach","_setReadBuffer","_setDrawBuffers","attachmentPoint","newAttachments","descriptor","_attachRenderbuffer","renderbuffer","layer","_attachTexture","_unattach","STATUS","_getFrameBufferStatus","checkFramebufferStatus","drawBuffer","clearBufferiv","clearBufferuiv","clearBufferfv","clearBufferfi","clearBuffer","readPixelsToBuffer","copyToImage","blit","invalidate","invalidateFramebuffer","getAttachmentParameter","_getAttachmentParameterFallback","getFramebufferAttachmentParameter","getAttachmentParameters","ATTACHMENT_PARAMETERS","attachmentName","show","open","defaultAttachments","oldAttachment","framebufferRenderbuffer","framebufferTexture2D","_ref4","_ref5","framebufferTextureLayer","mapIndexToCubeMapFace","drawBuffersWEBGL","getFeatures","EXT_sRGB","createFramebuffer","cloneTextureFrom","refTexture","overrides","TextureType","getShaderName$1","shader","defaultName","SHADER_NAME_REGEXP","parseGLSLCompilerError","errLog","shaderType","shaderName","errorStrings","errors","warnings","getShaderName","shaderDescription","getShaderTypeName","errorString","segments","line","lines","delim","maxDigits","lineNumber","digits","padLeft","addLineNumbers","formatErrors","column","substring","getShaderVersion","words","Shader","getTypeName","_compile","getShaderParameter","getName","getSource","getShaderSource","getTranslatedSource","getTranslatedShaderSource","shaderSource","compileShader","infoLog","getShaderInfoLog","deleteShader","VertexShader","createShader","FragmentShader","UNIFORM_SETTERS","getArraySetter","toFloatArray","setVectorUniform","toIntArray","setMatrixUniform","getSamplerSetter","toUIntArray","FLOAT_ARRAY","INT_ARRAY","UINT_ARRAY","array1","toTypedArray","uniformLength","Type","getUniformSetter","parseUniformName","checkUniformValue","checkLength","checkUniformArray","copyUniform","uniforms","len","uniform1i","uniformSetter","cacheLength","arrayValue","COMPOSITE_GL_TYPES","decomposeCompositeGLType","compositeGLType","typeAndSize","components","getCompositeGLType","compType","compComponents","ProgramConfiguration","attributeInfos","attributeInfosByName","attributeInfosByLocation","varyingInfos","varyingInfosByName","_readAttributesFromProgram","_readVaryingsFromProgram","getAttributeInfo","locationOrName","getAttributeLocation","attributeInfo","getAttributeAccessor","getVaryingInfo","getVaryingIndex","varying","getVaryingAccessor","getActiveAttrib","getAttribLocation","_addAttribute","getTransformFeedbackVarying","_addVarying","compositeType","_inferProperties","GL_SEPARATE_ATTRIBS","V6_DEPRECATED_METHODS","Program","_isCached","_setId","hash","vs","vs2","fs","fs2","varyings","bufferMode","_textureUniforms","transformFeedbackVaryings","_compileAndLink","_readUniformLocationsFromLinkedProgram","setUniforms","draw","logPriority","drawMode","vertexCount","isIndexed","indexType","instanceCount","vertexArray","transformFeedback","samplers","fb","_areTexturesRenderable","bindForDraw","primitiveMode","getPrimitiveDrawMode","begin","_bindTextures","drawRangeElements","drawElements","drawArrays","uniformMap","uniformName","checkUniformValues","_uniformSetters","uniform","textureUpdate","textureIndex","_textureIndexCounter","texturesRenderable","createProgram","deleteProgram","_getOptionsFromHandle","shaderHandles","getAttachedShaders","shaderHandle","programName","_getName","attachShader","linkProgram","getProgramInfoLog","validateProgram","_uniformCount","getActiveUniform","getUniformLocation","l","getActiveUniforms","uniformIndices","getUniformBlockIndex","blockName","getActiveUniformBlockParameter","blockIndex","uniformBlockBinding","blockBinding","Query","hasTimerQuery","_queryPending","_pollingPromise","beginTimeElapsedQuery","beginOcclusionQuery","conservative","beginTransformFeedbackQuery","isResultAvailable","resultAvailable","isTimerDisjoint","getResult","getTimerMilliseconds","createPoll","POSITIVE_INFINITY","counter2","poll","requestAnimationFrame","TransformFeedback","buffers","unused","bindOnUse","_unbindBuffers","setBuffers","bufferName","setBuffer","bufferOrParams","_getVaryingIndex","byteSize","_getBufferParams","_bindBuffer","bindTransformFeedback","_bindBuffers","beginTransformFeedback","endTransformFeedback","_getVaryingInfo","bufferIndex","createTransformFeedback","deleteTransformFeedback","getScratchArray","VertexArrayObject","constantAttributeZero","getDefaultArray","defaultVertexArray","isDefaultArray","getMaxAttributes","MAX_ATTRIBUTES","setConstant","_setConstantFloatArray","_setConstantIntArray","_setConstantUintArray","bufferValue","setElementBuffer","elementBuffer","vertexAttribIPointer","getConstantBuffer","elementCount","constantValue","_normalizeConstantArrayValue","updateNeeded","_compareConstantArrayValues","copied","fillArray$1","v1","v2","vertexAttrib1fv","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttribI1iv","vertexAttribI2iv","vertexAttribI3iv","vertexAttribI4iv","vertexAttribI1uiv","vertexAttribI2uiv","vertexAttribI3uiv","vertexAttribI4uiv","elements","getVertexAttribOffset","MULTI_LOCATION_ATTRIBUTE_REGEXP","DEPRECATIONS_V6","VertexArray","elementsAccessor","drawParams","attributes","vertexArrayObject","fill","setAttributes","clearDrawParams","getDrawParams","_updateDrawParams","_setAttribute","appAccessor","_resolveLocationAndAccessor","unbindBuffers","bindBuffers","_setConstantAttributes","valueAccessor","INVALID_RESULT","_getAttributeIndex","accessInfo","_getAttributeInfo","currentAccessor","attributeName","multiLocation","locationOffset","constant","_setConstantAttributeZero","_setConstantAttribute","indexCount","_updateDrawParamsForLocation","indexOffset","setElements","formatArrayValue","maxElts","formatValue","terminator","formatValue$1","EPSILON2","isInteger","decimal","getDebugTableForUniforms","header","undefinedOnly","PROJECT_MODULE_UNIFORM_REGEXP","uniformLocations","uniformNames","addUniformToTable","unusedCount","unusedTable","isDefined","isUniformDefined","getDebugTableRow","attribute","verts","getGLSLDeclaration$1","typeAndName","getGLSLDeclaration","statIdCounter","AnimationLoop","onCreateContext","onAddHTML","onInitialize","onRender","onFinalize","glOptions","autoResizeViewport","autoResizeDrawingBuffer","useDevicePixelRatio","needsRedraw","timeline","cpuTime","gpuTime","frameRate","_initialized","_running","_animationFrameId","_nextFramePromise","_resolveNextFrame","_cpuStartTime","_pageLoadPromise","_onMousemove","_onMouseleave","_setDisplay","setNeedsRedraw","_getPageLoadPromise","_createWebGLContext","_createFramebuffer","_startEventHandling","_initializeCallbackData","_updateCallbackData","_resizeCanvasDrawingBuffer","_resizeViewport","_gpuTimeQuery","animationProps","appContext","_addCallbackData","_startLoop","catch","redraw","isContextLost","_beginTimers","_setupFrame","_renderFrame","_clearNeedsRedraw","offScreen","commit","_endTimers","_finalizeCallbackData","_cancelAnimationFrame","attachTimeline","detachTimeline","waitForRender","getHTMLControlValue","defaultValue","setViewParameters","renderFrame","_requestAnimationFrame","display","animationLoop","animationFrameId","cancelAnimationFrame","timerId","renderFrameCallback","_resizeFramebuffer","startTime","engineTime","tick","tock","_timeline","_loop","_animationLoop","_mousePosition","_getSizeAndAspect","getTime","_offScreen","_createInfoDiv","wrapperDiv","appendChild","position","div","html","innerHTML","resizeGLContext","assert$2","TYPE_DEFINITIONS","validate","propType","parsePropType$1","propDef","getTypeOf","getTypeOf$1","ShaderModule","dependencies","getUniforms","getUniforms2","deprecations","defines","defines2","inject","vertexShader","fragmentShader","getModuleUniforms","_parseDeprecationDefinitions","injections","hook","injection","stage","order","normalizeInjections","propDefs","propTypes","parsePropType","parsePropTypes","getModuleSource","moduleSource","_defaultGetUniforms","getDefines","checkDeprecations","def","regex","old","new","RegExp","private","resolveModules","moduleMap","moduleDepth","getDependencyGraph","getShaderDependencies","instantiateModules","seen","isOldIE","navigator2","compiledGlslExtensions","canCompileGLGSExtension","extensionName","behavior","canCompile","getFeature","MODULE_INJECTORS","REGEX_START_OF_MAIN","REGEX_END_OF_MAIN","fragments","injectShader","injectStandardStubs","isVertex","fragmentData","fragmentString","combineInjects","injects","testVariable","qualifier","ES300_REPLACEMENTS","ES300_VERTEX_REPLACEMENTS","ES300_FRAGMENT_REPLACEMENTS","ES100_REPLACEMENTS","ES100_VERTEX_REPLACEMENTS","ES100_FRAGMENT_REPLACEMENTS","ES300_FRAGMENT_OUTPUT_REGEX","transpileShader","targetGLSLVersion","convertShader","outputMatch","outputName","convertFragmentShaderTo300","convertFragmentShaderTo100","replacements","pattern","INJECT_SHADER_DECLARATIONS","SHADER_TYPE","assembleShader","hookFunctions","transpileToGLSL100","prologue","sourceLines","glslVersion","versionLine","coreSource","allDefines","assembledSource","getShaderType","gpuVendor","identifyGPUVendor","getContextInfo","getPlatformShaderDefines","isFragment","versionDefines","getVersionDefines","sourceText","define","getApplicationDefines","hookFunctionMap","signature","normalizeHookFunctions","hookInjections","declInjections","mainInjections","injectionType","hookName","hookFunction","footer","getHookFunctions","assembleGetUniforms","moduleUniforms","FS100","FS_GLES","FS300","getQualifierDetails","qualifiers","definition","getPassthroughFS","inputType","outputValue","convertToVec4","variable","fp32","assert$1","EPSILON","precision","printTypes","printDegrees","printRowMajor","isArray$1","clone","duplicateArray","value2","lerp","ai","equals","epsilon","oldEpsilon","MathArray","cls","ExtendableBuiltin","Reflect","construct","setPrototypeOf","__proto__","_extendableBuiltin","copy","fromArray","ELEMENTS","targetArray","arrayOrObject","fromObject","to","toObject","toTarget","toFloat32Array","formatString","exactEquals","negate","minVector","maxVector","vectors","subtract","multiplyByScalar","scalar","valid","setScalar","addScalar","subScalar","multiplyScalar","divideScalar","clampScalar","checkNumber","checkVector","callerName","validateVector","Vector","lengthSquared","magnitude","magnitudeSquared","mathArray","distanceSquared","dist2","dot","product","normalize","multiply","divide","lengthSq","distanceTo","distanceToSquared","getComponent","setComponent","addVectors","subVectors","multiplyVectors","addScaledVector","vec3_transformMat4AsVector","ORIGIN","ZERO","Vector3","ZERO$1","az","bx","by","bz","mag","cosine","acos","cross","vec3.cross","rotateX","radians","origin","p","rotateY","rotateZ","transform","matrix4","transformAsPoint","vec3.transformMat4","transformAsVector","transformByMatrix3","matrix3","vec3.transformMat3","transformByMatrix2","matrix2","vec3_transformMat2","transformByQuaternion","quaternion","q","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","vec3.transformQuat","Matrix","row","RANK","col","getElementIndex","getColumn","columnIndex","firstIndex","setColumn","columnVector","INDICES","INDICES2","DEFAULT_FOVY","DEFAULT_ASPECT","DEFAULT_NEAR","DEFAULT_FAR","IDENTITY_MATRIX","Matrix4","IDENTITY","getIdentityMatrix","getZeroMatrix","identity","m00","m10","m20","m30","m01","m11","m21","m31","m02","m12","m22","m32","m03","m13","m23","m33","setRowMajor","toRowMajor","fromQuaternion","x2","y2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","mat4.fromQuat","frustum","view","column0Row0","column1Row1","column2Row0","column2Row1","column2Row2","column2Row3","column3Row2","computeInfinitePerspectiveOffCenter","rl","tb","mat4.frustum","lookAt","eye","up","x0","x1","y0","y1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","mat4.ortho","orthographic","checkRadians","halfY","determinant","getScale","getTranslation","scaleResult","inverseScale0","inverseScale1","inverseScale2","getRotationMatrix3","transpose","mat4.transpose","mat4.invert","multiplyLeft","mat4.multiply","multiplyRight","mat4.rotateX","mat4.rotateY","mat4.rotateZ","rotateXYZ","angleXYZ","rotateAxis","axis","b20","b21","b22","vec4.transformMat4","vec2.transformMat4","vec2_transformMat4AsVector","transformPoint","transformDirection","makeRotationX","makeTranslation","possiblyDegrees","DEFAULT_MODULE_OPTIONS","pickingSelectedColor","pickingHighlightColor","pickingActive","pickingAttribute","picking","selectedColor","picking_uSelectedColorValid","picking_uSelectedColor","picking_uHighlightColor","picking_uActive","picking_uAttribute","ProgramManager","getDefaultProgramManager","defaultProgramManager","_programCache","_getUniforms","_registeredModules","_hookFunctions","_defaultModules","_hashes","_hashCounter","stateHash","_useCounts","addDefaultModule","removeDefaultModule","moduleName","addShaderHook","_getModuleList","vsHash","_getHash","fsHash","moduleHashes","varyingHashes","defineKeys","injectKeys","defineHashes","injectHashes","assembled","assembleShaders","release","appModules","GLTF_TO_LUMA_ATTRIBUTE_MAP","POSITION","NORMAL","COLOR_0","TEXCOORD_0","TEXCOORD_1","TEXCOORD_2","mapAttributeName","attributeMap","inferAttributeAccessor","category","DRAW_PARAMS","Model","lastLogTime","animated","programManager","_programManagerState","_managedProgram","programProps","_programDirty","_attributes","pickable","_checkProgram","moduleSettings","geometryBuffers","_setModelProps","geometry","_deleteGeometryBuffers","getDrawMode","getInstanceCount","getAttributes","getProgram","setProgram","setDrawMode","setVertexCount","setInstanceCount","setGeometry","geometry2","indices","remappedName","getBuffersFromGeometry","normalizedAttributes","updateModuleSettings","_logDrawCallStart","vertexArrayInstanced","onBeforeRender","onAfterRender","didDraw","_logDrawCallEnd","discard","feedbackBuffers","unbindModels","_setFeedbackBuffers","model","render","_feedbackBuffers","_setAnimationProps","logDrawTimeout","attributeTable","ELEMENT_ARRAY_BUFFER","attributeLocation","rowHeader","getDebugTableForVertexArray","uniformTable","missingTable","missingCount","configTable","config2","glslDeclaration","varyingInfo","getDebugTableForProgramConfiguration","BufferTransform","currentIndex","feedbackMap","bindings","resources","_initialize","setupResources","binding","_setupTransformFeedback","updateModelProps","getDrawOptions","sourceBuffers","swap","_getNextIndex","_setupBuffers","getBuffer","varyingName","_getFeedbackBuffers","sourceName","feedbackName","bufferOrRef","_createNewBuffer","_updateBindings","_updateBinding","_swapBuffers","nextIndex","srcName","dstName","updateForTextures","sourceTextureMap","targetTextureVarying","targetTexture","sourceCount","targetTextureType","samplerTextureMap","updatedVs","finalInject","vsLines","updateVsLines","updated","textureMap","attributeData","getAttributeDefinition","updatedLine","samplerName","sizeName","uniformDeclerations","textureName","getSamplerDeclerations","typeToChannelSuffix","sampleInstruction","processAttributeDefinition","qualaiferDetails","getVaryingType","uniformDeclaration","posInstructions","SRC_TEX_PARAMETER_OVERRIDES","TextureTransform","_swapTexture","updatedModelProps","_processVertexShader","sourceTextures","hasSourceTextures","hasTargetTexture","transform_elementID","elementIDBuffer","sampler","_setSourceTextureParameters","sizeUniforms","getSizeUniforms","_setupTextures","getTargetTexture","packed","channelCount","typeToChannelCount","packedPixels","packCount","j","ownTexture","_targetTextureVarying","_createTargetTexture","textureOrReference","_targetRefTexName","_createNewTexture","_sourceTextures","_targetTexture","_updateElementIDBuffer","elementIds","_","_swapTextures","combinedInject","_fs","transformModule","Transform","bufferTransform","textureTransform","run","clearRenderTarget","updatedOpts","_updateDrawOptions","swapped","resourceTransforms","resourceTransform","_buildResourceTransforms","_updateModelProps","updatedProps","canCreateBufferTransform","canCreateTextureTransform","DRAW_MODE","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","Geometry","_setAttributes","_calculateVertexCount","_print","channelHandles","animationHandles","Timeline","animations","playing","lastEngineTime","addChannel","delay","duration","rate","channel","_setChannelTime","removeChannel","animationHandle","animation","detachAnimation","isFinished","setTime","animationData","play","pause","attachAnimation","channelHandle","offsetTime","COORDINATE_SYSTEM","DEFAULT","LNGLAT","METER_OFFSETS","LNGLAT_OFFSETS","CARTESIAN","PROJECTION_MODE","WEB_MERCATOR","GLOBE","WEB_MERCATOR_AUTO_OFFSET","UNIT","common","meters","EVENTS","OPERATION","COORDINATE_SYSTEM_GLSL_CONSTANTS","PROJECTION_MODE_GLSL_CONSTANTS","UNIT_GLSL_CONSTANTS","projectShader","isEqual","memoize","cachedResult","cachedArgs","ZERO_VECTOR","VECTOR_TO_POINT_MATRIX","DEFAULT_PIXELS_PER_UNIT2","DEFAULT_COORDINATE_ORIGIN","getMemoizedViewportUniforms","coordinateSystem","coordinateOrigin","projectionCenter","viewProjectionMatrix","originCommon","cameraPosCommon","shaderCoordinateOrigin","geospatialOrigin","viewMatrixUncentered","projectionMatrix","viewMatrix","viewMatrix2","cameraPosition","offsetMode","getOffsetOrigin","projectPosition","calculateMatrixAndOffset","viewportSize","project_uCoordinateSystem","project_uProjectionMode","projectionMode","project_uCoordinateOrigin","project_uCommonOrigin","project_uCenter","project_uPseudoMeters","_pseudoMeters","project_uViewportSize","project_uDevicePixelRatio","project_uFocalDistance","project_uCommonUnitsPerMeter","project_uCommonUnitsPerWorldUnit","project_uCommonUnitsPerWorldUnit2","project_uScale","project_uWrapLongitude","project_uViewProjectionMatrix","project_uModelMatrix","project_uCameraPosition","distanceScalesAtOrigin","isGeospatial","fround","unprojectPosition","INITIAL_MODULE_OPTIONS","project","modelMatrix","autoWrapLongitude","getUniformsFromViewport","project32","getMemoizedViewportCenterPosition","getMemoizedViewProjectionMatrices","shadowMatrices","projectionMatrices","farZ","corners","coord","screenToCommonSpace","shadowMatrix","positions","corner","DEFAULT_SHADOW_COLOR","shadow","drawToShadowMap","shadowMaps","shadowEnabled","shadow_uDrawShadowMap","shadow_uUseShadowMap","shadow_uColor","shadowColor","shadow_uLightId","shadowLightId","shadow_uLightCount","projectCenters","viewProjectionMatrices","viewProjectionMatrixCentered","dummyShadowMap","createShadowUniforms","DEFAULT_MODULES","SHADER_HOOKS","createProgramManager","shaderModule","shaderHook","DEFAULT_LIGHT_COLOR","DEFAULT_LIGHT_INTENSITY","idCount","AmbientLight","intensity","DEFAULT_LIGHT_DIRECTION","DirectionalLight","_shadow","getProjectedLight","LayersPass","cleanup","_drawLayers","moduleParameters","viewports","views","onViewportActive","clearStack","clearCanvas","pass","clearGLCanvas","_lastRenderIndex","renderStats","drawLayerParams","_getDrawLayerParams","subViewports","subViewport","_drawLayersInViewport","layers","layerFilter","cullRect","effects","indexResolver","layerIndexResolver","drawContext","isPicking","renderPass","layerFilterCache","layerIndex","shouldDrawLayer","_shouldDrawLayer","layerParam","layerRenderIndex","_getModuleParameters","layerParameters","getLayerParameters","globalModuleParameters","glViewport","useTarget","pixelRatio","dimensions","getGLViewport","clearOpts","renderStatus","totalCount","visibleCount","compositeCount","pickableCount","isComposite","_drawLayer","raiseError","getModuleParameters","visible","filterSubLayer","rootLayerId","activateViewport","_layer$internalState","internalState","propsInTransition","wrapLongitude","mousePosition","effect","_effect$getModulePara","startIndex","layerIndices","resolvers","resolveLayerIndex","isDrawn","indexOverride","_offset","layerId","parentId","resolver","ShadowPass","shadowMap","depthBuffer","fbo","DEFAULT_AMBIENT_LIGHT_PROPS","DEFAULT_DIRECTIONAL_LIGHT_PROPS","LightingEffect","lightSource","ambientLight","directionalLights","pointLights","_applyDefaultLights","light","preRender","_calculateMatrices","shadowPasses","_createShadowPasses","lightSources","directionalLight","pointLight","shadowPass","lightMatrices","defaultTypedArrayManager","overAlloc","poolSize","setOptions","allocate","maxCount","newSize","maxSize","newArray","_allocate","_release","sizeToAllocate","ceil","pool","_pool","findIndex","scratchVector","getFrustumPlane","d","L","normal","scratchArray","toDoublePrecisionArray","endIndex","typedArrayManager","sourceIndex","targetIndex","DEFAULT_DISTANCE_SCALES","Viewport","displayName","_initProps","_initMatrices","projectFlat","unprojectFlat","metersPerPixel","targetZWorld","X","Y","Z","unprojectOption","containsPixel","getFrustumPlanes","_frustumPlanes","panByPosition","coords","getMeterZoom","meterOffset","fovyRadians","createProjectionMatrix","vpm","viewMatrixInverse","viewportMatrix","WebMercatorViewport","worldOffset","legacyMeterSizes","projectionParameters","_subViewports","minOffset","maxOffset","offsetViewport","fromLocation","translate2","vec2.add","vec2.negate","newCenter","lngLatZToWorldPosition","getWorldPosition","fromCoordinateSystem","fromCoordinateOrigin","normalizeParameters","worldPosition","positionCommonSpace","vec3.sub","LIFECYCLE","COMPONENT_SYMBOL","for","ASYNC_DEFAULTS_SYMBOL","ASYNC_ORIGINAL_SYMBOL","ASYNC_RESOLVED_SYMBOL","flatten","flattenArray","fillArray","subscribe","consumer","_subscribers","unsubscribe","inUse","isLoaded","_error","_content","forceUpdate","_data","loadCount","_loadCount","subscriber","onChange","ResourceManager","protocol","resourceManager","_resources","_consumers","_pruneRequest","contains","resourceId","persistent","res","consumerId","requestId","request","prune","_track","_prune","finalize","consumers","oldResource","LayerManager","_viewport","layerManager","_finalizeLayer","clearRedrawFlags","_needsRedraw","layerNeedsRedraw","getNeedsRedraw","needsUpdate","_nextLayers","_lastRenderedLayers","_needsUpdate","setNeedsUpdate","getLayers","layerIds","_debug","setLayers","newLayers","flatLayers","_updateLayers","updateLayers","_handleError","oldLayers","oldLayerMap","oldLayer","generatedLayers","_updateSublayersRecursively","_finalizeOldLayers","hasUniformTransition","newLayer","sublayers","validateProps","_transferLayerState","_updateLayer","_initializeLayer","getSubLayers","lifecycle","_transferState","_update","_finalize","deepEqual","aValue","bValue","ViewManager","viewState","controllers","_viewports","_viewportMap","_isUpdating","_eventManager","_eventCallbacks","onViewStateChange","onInteractionStateChange","controller","updateViewStates","viewId","updateTransition","getViewports","getViews","viewMap","getView","getViewState","viewOrViewId","getViewStateId","filterViewState","getViewport","_setViews","_setViewState","_setSize","_rebuildViewports","_diffViews","_onViewStateChange","_createController","Controller2","onStateChange","makeViewport","_this$getView","_updateController","controllerProps","resolvedProps","oldControllers","invalidateControllers","oldController","hasController","_buildViewportMap","newViews","oldViews","PERCENT_OR_PIXELS_REGEX","parsePosition","relative","getPosition","extent","View","viewportInstance","_x","_y","_width","_height","_padding","ViewportType","viewportDimensions","getDimensions","newViewState","ControllerType","Transition","_inProgress","inProgress","_this$settings$onStar","_this$settings","_this$settings$onEnd","_this$settings2","onEnd","_this$settings$onInte","_this$settings3","onInterrupt","_this$settings$onUpda","_this$settings4","_onUpdate","onUpdate","TRANSITION_EVENTS","DEFAULT_EASING","DEFAULT_INTERRUPTION","TransitionManager","transition","interpolator","startProps","endProps","easing","interpolateProps","getControllerState","getViewportProps","oldViewState","getViewportInTransition","processViewStateChange","nextProps","transitionTriggered","currentProps","_shouldIgnoreViewportChange","_isTransitionEnabled","interruption","_triggerTransition","transitionDuration","transitionInterpolator","_isUpdateDueToCurrentTransition","arePropsEqual","startViewstate","endViewStateProps","shortestPathFrom","getDuration","initialProps","initializeProps","transitionSettings","transitionEasing","transitionInterruption","onTransitionStart","_onTransitionUpdate","_onTransitionEnd","onTransitionInterrupt","onTransitionEnd","inTransition","isZooming","isPanning","isRotating","DEFAULT_REQUIRED_PROPS","LinearInterpolator","compare","extract","required","_propsToCompare","_propsToExtract","_requiredProps","startViewStateProps","_checkRequiredProps","transitionProps","normalizedOpts","around","startViewport","endViewport","aroundPosition","NO_TRANSITION_PROPS","INERTIA_EASING","EVENT_TYPES","pinchEventWorkaround","Controller","isDragging","transitionManager","ControllerState","_onTransition","_setInteractionState","customEvents","toggleEvents","_customEvents","_events","_this$eventManager","_controllerState","eventStartBlocked","_eventStartBlocked","_onPanStart","_onPan","_onPanEnd","_onPinchStart","_onPinch","_onPinchEnd","_onTriplePanStart","_onTriplePan","_onTriplePanEnd","_onDoubleTap","_onWheel","_onKeyDown","controllerState","isPointInBounds","pos","inside","isFunctionKeyPressed","metaKey","altKey","ctrlKey","_interactionState","blockEvents","timer","dragMode","_getTransitionProps","inertia","scrollZoom","dragPan","dragRotate","doubleClickZoom","touchZoom","touchRotate","keyboard","isInteractive","eventNames","updateViewport","newControllerState","extraProps","interactionState","getState","newStates","alternateMode","invertPan","_panMove","_onPanMove","_onPanRotate","_onPanMoveEnd","_onPanRotateEnd","endPos","panEnd","rotateEnd","speed","smooth","rotateStart","zoomStart","_startPinchRotation","_lastPinchEvent","deltaAngleX","velocityZ","endScale","zoomEnd","isZoomOut","funcKey","zoomSpeed","moveSpeed","rotateSpeedX","rotateSpeedY","zoomOut","zoomIn","rotateLeft","moveLeft","rotateRight","moveRight","rotateUp","moveUp","rotateDown","moveDown","ViewState","_viewportProps","applyConstraints","MapState","maxPitch","minPitch","startPanLngLat","startZoomLngLat","startRotatePos","startBearing","startPitch","startZoom","panStart","_getUpdatedState","_unproject","startPos","deltaAngleY","newRotation","_getNewRotation","zoomedViewport","_zoomFromCenter","_panFromCenter","fromProps","centerY","startY","deltaScaleX","deltaScaleY","MapController","oldProps","MapView","MaskPass","mapSize","maskMap","operation","getProjectionMatrix","OrthographicViewport","flipY","zoomX","zoomY","zoom_","OrbitState","rotationX","rotationOrbit","minRotationX","maxRotationX","startPanPosition","startRotationX","startRotationOrbit","startZoomPosition","startPosition","newZoom","_calculateNewZoom","OrthographicState","zoomAxis","deltaZoom","newZoomX","newZoomY","OrthographicController","OrthographicView","MaskEffect","dummyMaskMap","maskLayers","masks","maskPass","channelMap","_sortMaskChannels","viewportChanged","lastViewport","maskId","_renderChannel","channelInfo","oldChannelInfo","maskChanged","layerBounds","maskBounds","subLayerBounds","viewportBounds","paddedBounds","_doubleBounds","getMaskBounds","maskViewport","getMaskViewport","root","maskChannels","DEFAULT_LIGHTING_EFFECT","EffectManager","_internalEffects","setEffects","getEffects","DrawLayersPass","PICKING_PARAMETERS","PickLayersPass","pickingFBO","_drawPickingBuffer","deviceRect","pickZ","encodedColors","byLayer","byAlpha","_colors","useInPicking","decodePickingColor","decodeColor","pickParameters","encoded","encodeColor","pickedColor","pickedLayer","pickedViewports","pickedObjectIndex","DeckRenderer","drawPickingColors","drawLayersPass","pickLayersPass","renderCount","renderBuffers","lastPostProcessEffect","renderLayers","layerPass","_preRender","outputBuffer","_postRender","postRender","_resizeRenderBuffers","inputBuffer","swapBuffer","NO_PICKED_OBJECT","getClosestObject","pickedColors","deviceX","deviceY","deviceRadius","minSquareDistanceToCenter","closestPixelIndex","dy2","d2","pickedObject","pickedX","pickedY","getEmptyPickingInfo","pickInfo","coordinate","pickedViewport","getViewportFromCoordinates","point","picked","devicePixel","processPickInfo","lastPickedInfo","affectedLayers","lastPickedPixelIndex","lastPickedLayerId","pickedLayerId","lastPickedLayer","baseInfo","infos","getLayerPickingInfo","rootLayer","updateAutoHighlight","sourceLayer","getPickingInfo","DeckPicker","_pickable","depthFBO","pickObject","_pickClosestObject","pickObjects","_pickVisibleObjects","getLastPickedObject","lastPickedViewportId","_resizeBuffer","_this$pickingFBO","_this$depthFBO","_getPickable","pickableLayers","isPickable","radius","unproject3D","emptyInfo","devicePixelRange","_getPickingRect","deviceWidth","deviceHeight","pickedResult","_drawAndSample","disablePickingIndex","restorePickingColors","maxObjects","leftTop","deviceLeft","deviceTop","rightBottom","deviceRight","deviceBottom","pickInfos","uniqueColors","colorKey","getUniqueObjects","uniqueInfos","isMaxObjects","defaultStyle","zIndex","backgroundColor","Tooltip","canvasParent","parentElement","el","setTooltip","displayInfo","innerText","isVisible","defaultProps","initialViewState","pickingRadius","eventRecognizerOptions","_framebuffer","_animate","_typedArrayManagerProps","_customRender","onWebGLInitialized","onResize","onLoad","onHover","onClick","onDragStart","onDrag","onDragEnd","_onMetrics","getCursor","getTooltip","Deck","_pickRequest","eventOptions","deckPicker","_lastPointerDownInfo","layerHandler","rootHandler","pickedInfo","_pick","cursorState","isHovering","_createCanvas","_createAnimationLoop","metrics","fps","setPropsTime","updateAttributesTime","framesRedrawn","pickTime","pickCount","gpuTimePerFrame","cpuTimePerFrame","bufferMemory","textureMemory","renderbufferMemory","gpuMemory","_metricsCounter","_this$layerManager","_this$viewManager","_this$effectManager","_this$deckRenderer","_this$deckPicker","_this$tooltip","_this$canvas$parentEl","viewManager","effectManager","deckRenderer","tooltip","removeChild","_setCanvasSize","_getViews","_getViewState","viewManagerNeedsRedraw","layerManagerNeedsRedraw","effectManagerNeedsRedraw","deckRendererNeedsRedraw","redrawReason","isInitialized","pickMultipleObjects","_addResources","_removeResources","resourceIds","statKey","cssWidth","_props$style","cssHeight","_updateCanvasSize","_this$viewManager2","_onContextLost","_setGLContext","_onRenderFrame","_pickAndCallback","_info$layer","_updateCursor","container","cursor","_onPointerDown","_onPointerMove","pointerleave","_onEvent","_onInteractionStateChange","renderOptions","_getFrameStats","_getMetrics","animationLoopStats","memoryStats","ShaderAttribute","dataColumn","getAccessor","elementOffset","getStride","bytesPerElement","resolveShaderAttribute","baseAccessor","shaderAttributeOptions","vertexOffset","EMPTY_ARRAY","placeholderArray","createIterable","startRow","endRow","iterable","objectInfo","getAccessorFromBuffer","startIndices","nested","elementStride","EMPTY","FULL","padArrayChunk","sourceLength","targetLength","datum","DEFAULT_TRANSITION_SETTINGS","interpolation","spring","stiffness","damping","normalizeTransitionSettings","userSettings","layerSettings","getSourceBufferAttribute","getAttributeTypeFromSize","cycleBuffers","getAttributeBufferLength","numInstances","doublePrecision","multiplier","Float64Array","noAlloc","padBuffer","fromLength","fromStartIndices","precisionMultiplier","toStartIndices","hasStartIndices","toLength","isConstant","toData","normalizeConstant","getMissingData","sourceStartIndices","targetStartIndices","getChunkData","nextSourceIndex","nextTargetIndex","padArray","Attribute","logicalType","bufferType","defaultType","glArrayFromType","fp64","externalBuffer","bufferAccessor","allocatedValue","_buffer","getShaderAttributes","shaderAttributes","isBuffer64Bit","doubleShaderAttributeDefs","resolvedOptions","high","low","resolveDoublePrecisionShaderAttributes","shaderAttributeDef","_normalizeValue","_areValuesEqual","_checkExternalBuffer","requiredBufferSize","updateSubBuffer","startOffset","endOffset","illegalArrayType","value1","lastExternalBuffer","binaryValue","binaryAccessor","updateRanges","range.FULL","_autoUpdater","_validateAttributeUpdaters","layout","clearChangedFlags","getUpdateTriggers","supportsTransition","getTransitionSetting","dataRange","rangeList","range","newRangeList","range0","range.add","clearNeedsUpdate","range.EMPTY","updateBuffer","getVertexOffset","_checkAttributeArray","setConstantValue","setExternalBuffer","setBinaryValue","needsNormalize","shaderAttributeDefs","shaderAttributeName","transform2","accessorFunc","objectValue","numVertices","TRANSITION_TYPES","attributeInTransition","currentStartIndices","currentLength","attributeType","ATTRIBUTE_TYPE","getTransform","bufferOpts","padBufferOpts","enter","aFrom","aTo","vCurrent","getTexture","aPrev","aCur","vNext","AttributeTransitionManager","transitions","_removeTransition","_updateAttribute","hasAttribute","animatedAttributes","isNew","TransitionType","AttributeManager","updateTriggers","attributeTransitionManager","_add","addInstanced","attributeNameArray","triggerName","_invalidateTrigger","invalidateAll","accessorName","transitionUpdated","getChangedAttributes","changedAttributes","excludeAttributes","_createAttribute","_mapUpdateTriggersToAttributes","triggers","invalidatedAttributes","updateSpringElement","prev","cur","distanceSquare","_value","fromValue","toValue","_currValue","_prevValue","nextValue","next","updateSpring","UniformTransitionManager","active","transition2","diffProps","propsChangedReason","compareProps","getPropTypes","ignoreProps","dataChangedReason","dataChanged","dataComparator","_dataDiff","diffDataProps","updateTriggersChangedReason","diffUpdateTrigger","diffUpdateTriggers","propsChanged","updateTriggersChanged","extensionsChanged","diffExtensions","transitionsChanged","diffTransitions","comparePropValues","newProp","oldProp","equal","oldExtensions","newTriggers","oldTriggers","LayerType","_propTypes","isPlainObject","mergeShaders","mergedInjection","DEFAULT_TEXTURE_PARAMETERS","internalTextures","boolean","optional","arrayEqual","valueType","function","component","dataTransform","specialTextureParameters","textureParameters","normalizePropDefinition","getPropsPrototype","componentClass","defaultProps2","getOwnProperty","parentClass","parentDefaultProps","componentPropDefs","deprecatedFor","parentProps","componentName","getComponentName","defineProperties","createPropsPrototype","defaultValues","descriptors","getDescriptorForAsyncProp","addAsyncPropsToPropPrototype","_deprecatedProps","newValue","nameStr","newPropName","addDeprecatedPropsToPropPrototype","_mergedDefaultProps","createPropsPrototypeAndTypes","hasAsyncProp","getAsyncProp","counter","Component","propObjects","propsPrototype","propsInstance","createProps","asyncProps","EMPTY_PROPS","LayerState","onAsyncPropUpdated","oldAsyncProps","asyncProp","resolvedValue","getOldProps","resetOldProps","isAsyncPropLoading","pendingLoadCount","resolvedLoadCount","reloadAsyncProp","_watchPromise","setAsyncProps","resolvedValues","originalValues","_createAsyncPropData","_updateAsyncProp","_fetch","_onResolve","_onError","_didAsyncInputValueChange","_resolveAsyncIterable","_setPropValue","_freezeAsyncOldProps","lastValue","_postProcessValue","_setAsyncPropValue","promise","attributeManager","subLayers","usesPickingColorCache","onDataLoad","areViewportsEqual","oldViewport","pickingColorCache","__diff","loadOptions","_loadOptions","getLoadOptions","inResourceManager","opacity","positionFormat","colorFormat","getPolygonOffset","highlightedObjectIndex","autoHighlight","highlightColor","Layer","layerName","setState","partialState","setChangeFlags","stateChanged","getModels","models","setModuleParameters","getAttributeManager","getCurrentLayer","use64bitPositions","pickingEvent","nullPickingColor","encodePickingColor","i1","i2","i3","getNumInstances","getStartIndices","instancePositions","getShaders","shaders","shouldUpdateState","changeFlags","propsOrDataChanged","updateState","neededPickingBuffer","needPickingBuffer","pickingColors","instancePickingColors","pickingColorsAttribute","finalizeState","uniformTransitions","_this$props$onError","_this$props","_this$context","_this$context$onError","_getNeedsRedraw","_getUpdateParams","_this$internalState","invalidateAttribute","updateAttributes","_setModelAttributes","_updateAttributes","_updateAttributeTransition","_updateUniformTransition","calculateInstancePickingColors","cacheSize","newCacheSize","pickingColor","objectIndex","_disablePickingIndex","colors","_getAttributeManager","_clearChangeFlags","_onAsyncPropUpdated","initializeState","_diffProps","stateNeedsUpdate","currentViewport","updateParams","oldModels","modelChanged","_postUpdate","offsets","getChangeFlags","_this$internalState2","flags","flagChanged","prevDataChangedReason","somethingChanged","_newProps$transitions","_updateAutoHighlight","pickingModuleParameters","attributeManagerNeedsRedraw"],"mappings":"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"}