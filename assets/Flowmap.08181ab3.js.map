{"version":3,"file":"Flowmap.08181ab3.js","sources":["../../node_modules/d3-array/src/extent.js","../../node_modules/d3-scale/node_modules/d3-array/src/ticks.js","../../node_modules/d3-interpolate/src/basis.js","../../node_modules/d3-interpolate/src/constant.js","../../node_modules/d3-interpolate/src/color.js","../../node_modules/d3-interpolate/src/rgb.js","../../node_modules/d3-interpolate/src/numberArray.js","../../node_modules/d3-interpolate/src/array.js","../../node_modules/d3-interpolate/src/date.js","../../node_modules/d3-interpolate/src/number.js","../../node_modules/d3-interpolate/src/object.js","../../node_modules/d3-interpolate/src/string.js","../../node_modules/d3-interpolate/src/value.js","../../node_modules/d3-interpolate/src/round.js","../../node_modules/d3-interpolate/src/cubehelix.js","../../node_modules/d3-scale/src/number.js","../../node_modules/d3-scale/src/continuous.js","../../node_modules/d3-scale/src/constant.js","../../node_modules/d3-scale/src/tickFormat.js","../../node_modules/d3-scale/src/linear.js","../../node_modules/d3-scale/src/pow.js","../../node_modules/d3-scale/src/sequential.js","../../node_modules/seedrandom/lib/alea.js","../../node_modules/seedrandom/lib/xor128.js","../../node_modules/seedrandom/lib/xorwow.js","../../node_modules/seedrandom/lib/xorshift7.js","../../node_modules/seedrandom/lib/xor4096.js","../../node_modules/seedrandom/lib/tychei.js","../../node_modules/seedrandom/seedrandom.js","../../node_modules/seedrandom/index.js","../../node_modules/vue-class-component/dist/vue-class-component.esm.js","../../node_modules/vue-property-decorator/lib/helpers/metadata.js","../../node_modules/vue-property-decorator/lib/decorators/Prop.js","../../node_modules/@flowmap.gl/layers/dist/AnimatedFlowLinesLayer/AnimatedFlowLinesLayer.js","../../node_modules/@flowmap.gl/layers/dist/AnimatedFlowLinesLayer/AnimatedFlowLinesLayerVertex.glsl.js","../../node_modules/@flowmap.gl/layers/dist/AnimatedFlowLinesLayer/AnimatedFlowLinesLayerFragment.glsl.js","../../node_modules/@flowmap.gl/layers/dist/FlowLinesLayer/FlowLinesLayer.js","../../node_modules/@flowmap.gl/layers/dist/FlowLinesLayer/FlowLinesLayerVertex.glsl.js","../../node_modules/@flowmap.gl/layers/dist/FlowLinesLayer/FlowLinesLayerFragment.glsl.js","../../node_modules/@flowmap.gl/layers/dist/FlowCirclesLayer/FlowCirclesLayer.js","../../node_modules/@flowmap.gl/layers/dist/FlowCirclesLayer/FlowCirclesLayerVertex.glsl.js","../../node_modules/@flowmap.gl/layers/dist/FlowCirclesLayer/FlowCirclesLayerFragment.glsl.js","../../node_modules/@flowmap.gl/data/dist/types.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/colors.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/ramp.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-single/Blues.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-single/Greens.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-single/Greys.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-single/Purples.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-single/Reds.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js","../../node_modules/@flowmap.gl/data/node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js","../../node_modules/@flowmap.gl/data/dist/colors.js","../../node_modules/kdbush/src/sort.js","../../node_modules/kdbush/src/within.js","../../node_modules/kdbush/src/index.js","../../node_modules/kdbush/src/range.js","../../node_modules/reselect/es/defaultMemoize.js","../../node_modules/reselect/es/index.js","../../node_modules/@flowmap.gl/data/dist/cluster/cluster.js","../../node_modules/@flowmap.gl/data/dist/FlowmapAggregateAccessors.js","../../node_modules/@flowmap.gl/data/dist/selector-functions.js","../../node_modules/@flowmap.gl/data/dist/time.js","../../node_modules/@flowmap.gl/data/dist/FlowmapSelectors.js","../../node_modules/@flowmap.gl/data/dist/cluster/ClusterIndex.js","../../node_modules/@flowmap.gl/data/node_modules/d3-geo/src/math.js","../../node_modules/@flowmap.gl/data/node_modules/d3-geo/src/noop.js","../../node_modules/@flowmap.gl/data/node_modules/d3-geo/src/stream.js","../../node_modules/@flowmap.gl/data/node_modules/d3-geo/src/area.js","../../node_modules/@flowmap.gl/data/node_modules/d3-geo/src/bounds.js","../../node_modules/@flowmap.gl/data/node_modules/d3-geo/src/cartesian.js","../../node_modules/@flowmap.gl/data/dist/getViewStateForLocations.js","../../node_modules/@flowmap.gl/data/dist/provider/LocalFlowmapDataProvider.js","../../node_modules/@flowmap.gl/layers/dist/types.js","../../node_modules/@flowmap.gl/layers/dist/FlowmapLayer.js","../../node_modules/@flowmap.gl/data/dist/provider/FlowmapDataProvider.js","../../src/plugins/flowmap/Flowmap.vue","../../node_modules/vue-property-decorator/lib/decorators/Watch.js","../../src/layers/FlowMapLayer.tsx","../../src/plugins/flowmap/Flowmap.vue?vue&type=template&lang.js"],"sourcesContent":["export default function extent(values, valueof) {\n  let min;\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  }\n  return [min, max];\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","import {linearish} from \"./linear.js\";\nimport {copy, identity, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformPow(exponent) {\n  return function(x) {\n    return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n  };\n}\n\nfunction transformSqrt(x) {\n  return x < 0 ? -Math.sqrt(-x) : Math.sqrt(x);\n}\n\nfunction transformSquare(x) {\n  return x < 0 ? -x * x : x * x;\n}\n\nexport function powish(transform) {\n  var scale = transform(identity, identity),\n      exponent = 1;\n\n  function rescale() {\n    return exponent === 1 ? transform(identity, identity)\n        : exponent === 0.5 ? transform(transformSqrt, transformSquare)\n        : transform(transformPow(exponent), transformPow(1 / exponent));\n  }\n\n  scale.exponent = function(_) {\n    return arguments.length ? (exponent = +_, rescale()) : exponent;\n  };\n\n  return linearish(scale);\n}\n\nexport default function pow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, pow()).exponent(scale.exponent());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n\nexport function sqrt() {\n  return pow.apply(null, arguments).exponent(0.5);\n}\n","import {interpolate, interpolateRound} from \"d3-interpolate\";\nimport {identity} from \"./continuous.js\";\nimport {initInterpolator} from \"./init.js\";\nimport {linearish} from \"./linear.js\";\nimport {loggish} from \"./log.js\";\nimport {symlogish} from \"./symlog.js\";\nimport {powish} from \"./pow.js\";\n\nfunction transformer() {\n  var x0 = 0,\n      x1 = 1,\n      t0,\n      t1,\n      k10,\n      transform,\n      interpolator = identity,\n      clamp = false,\n      unknown;\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : interpolator(k10 === 0 ? 0.5 : (x = (transform(x) - t0) * k10, clamp ? Math.max(0, Math.min(1, x)) : x));\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? ([x0, x1] = _, t0 = transform(x0 = +x0), t1 = transform(x1 = +x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0), scale) : [x0, x1];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  function range(interpolate) {\n    return function(_) {\n      var r0, r1;\n      return arguments.length ? ([r0, r1] = _, interpolator = interpolate(r0, r1), scale) : [interpolator(0), interpolator(1)];\n    };\n  }\n\n  scale.range = range(interpolate);\n\n  scale.rangeRound = range(interpolateRound);\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t) {\n    transform = t, t0 = t(x0), t1 = t(x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0);\n    return scale;\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .interpolator(source.interpolator())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport default function sequential() {\n  var scale = linearish(transformer()(identity));\n\n  scale.copy = function() {\n    return copy(scale, sequential());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialLog() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, sequentialLog()).base(scale.base());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSymlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialSymlog()).constant(scale.constant());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialPow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialPow()).exponent(scale.exponent());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSqrt() {\n  return sequentialPow.apply(null, arguments).exponent(0.5);\n}\n","// A port of an algorithm by Johannes Baagøe <baagoe@baagoe.com>, 2010\n// http://baagoe.com/en/RandomMusings/javascript/\n// https://github.com/nquinlan/better-random-numbers-for-javascript-mirror\n// Original work is under MIT license -\n\n// Copyright (C) 2010 by Johannes Baagøe <baagoe@baagoe.org>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n(function(global, module, define) {\n\nfunction Alea(seed) {\n  var me = this, mash = Mash();\n\n  me.next = function() {\n    var t = 2091639 * me.s0 + me.c * 2.3283064365386963e-10; // 2^-32\n    me.s0 = me.s1;\n    me.s1 = me.s2;\n    return me.s2 = t - (me.c = t | 0);\n  };\n\n  // Apply the seeding algorithm from Baagoe.\n  me.c = 1;\n  me.s0 = mash(' ');\n  me.s1 = mash(' ');\n  me.s2 = mash(' ');\n  me.s0 -= mash(seed);\n  if (me.s0 < 0) { me.s0 += 1; }\n  me.s1 -= mash(seed);\n  if (me.s1 < 0) { me.s1 += 1; }\n  me.s2 -= mash(seed);\n  if (me.s2 < 0) { me.s2 += 1; }\n  mash = null;\n}\n\nfunction copy(f, t) {\n  t.c = f.c;\n  t.s0 = f.s0;\n  t.s1 = f.s1;\n  t.s2 = f.s2;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new Alea(seed),\n      state = opts && opts.state,\n      prng = xg.next;\n  prng.int32 = function() { return (xg.next() * 0x100000000) | 0; }\n  prng.double = function() {\n    return prng() + (prng() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53\n  };\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nfunction Mash() {\n  var n = 0xefc8249d;\n\n  var mash = function(data) {\n    data = String(data);\n    for (var i = 0; i < data.length; i++) {\n      n += data.charCodeAt(i);\n      var h = 0.02519603282416938 * n;\n      n = h >>> 0;\n      h -= n;\n      h *= n;\n      n = h >>> 0;\n      h -= n;\n      n += h * 0x100000000; // 2^32\n    }\n    return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n  };\n\n  return mash;\n}\n\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.alea = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"xor128\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n\n  // Set up generator function.\n  me.next = function() {\n    var t = me.x ^ (me.x << 11);\n    me.x = me.y;\n    me.y = me.z;\n    me.z = me.w;\n    return me.w ^= (me.w >>> 19) ^ t ^ (t >>> 8);\n  };\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor128 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"xorwow\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var t = (me.x ^ (me.x >>> 2));\n    me.x = me.y; me.y = me.z; me.z = me.w; me.w = me.v;\n    return (me.d = (me.d + 362437 | 0)) +\n       (me.v = (me.v ^ (me.v << 4)) ^ (t ^ (t << 1))) | 0;\n  };\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n  me.v = 0;\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    if (k == strseed.length) {\n      me.d = me.x << 10 ^ me.x >>> 4;\n    }\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  t.v = f.v;\n  t.d = f.d;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorwow = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"xorshift7\" algorithm by\n// François Panneton and Pierre L'ecuyer:\n// \"On the Xorgshift Random Number Generators\"\n// http://saluc.engr.uconn.edu/refs/crypto/rng/panneton05onthexorshift.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    // Update xor generator.\n    var X = me.x, i = me.i, t, v, w;\n    t = X[i]; t ^= (t >>> 7); v = t ^ (t << 24);\n    t = X[(i + 1) & 7]; v ^= t ^ (t >>> 10);\n    t = X[(i + 3) & 7]; v ^= t ^ (t >>> 3);\n    t = X[(i + 4) & 7]; v ^= t ^ (t << 7);\n    t = X[(i + 7) & 7]; t = t ^ (t << 13); v ^= t ^ (t << 9);\n    X[i] = v;\n    me.i = (i + 1) & 7;\n    return v;\n  };\n\n  function init(me, seed) {\n    var j, w, X = [];\n\n    if (seed === (seed | 0)) {\n      // Seed state array using a 32-bit integer.\n      w = X[0] = seed;\n    } else {\n      // Seed state using a string.\n      seed = '' + seed;\n      for (j = 0; j < seed.length; ++j) {\n        X[j & 7] = (X[j & 7] << 15) ^\n            (seed.charCodeAt(j) + X[(j + 1) & 7] << 13);\n      }\n    }\n    // Enforce an array length of 8, not all zeroes.\n    while (X.length < 8) X.push(0);\n    for (j = 0; j < 8 && X[j] === 0; ++j);\n    if (j == 8) w = X[7] = -1; else w = X[j];\n\n    me.x = X;\n    me.i = 0;\n\n    // Discard an initial 256 values.\n    for (j = 256; j > 0; --j) {\n      me.next();\n    }\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.x = f.x.slice();\n  t.i = f.i;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.x) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorshift7 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n","// A Javascript implementaion of Richard Brent's Xorgens xor4096 algorithm.\n//\n// This fast non-cryptographic random number generator is designed for\n// use in Monte-Carlo algorithms. It combines a long-period xorshift\n// generator with a Weyl generator, and it passes all common batteries\n// of stasticial tests for randomness while consuming only a few nanoseconds\n// for each prng generated.  For background on the generator, see Brent's\n// paper: \"Some long-period random number generators using shifts and xors.\"\n// http://arxiv.org/pdf/1004.3115v1.pdf\n//\n// Usage:\n//\n// var xor4096 = require('xor4096');\n// random = xor4096(1);                        // Seed with int32 or string.\n// assert.equal(random(), 0.1520436450538547); // (0, 1) range, 53 bits.\n// assert.equal(random.int32(), 1806534897);   // signed int32, 32 bits.\n//\n// For nonzero numeric keys, this impelementation provides a sequence\n// identical to that by Brent's xorgens 3 implementaion in C.  This\n// implementation also provides for initalizing the generator with\n// string seeds, or for saving and restoring the state of the generator.\n//\n// On Chrome, this prng benchmarks about 2.1 times slower than\n// Javascript's built-in Math.random().\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    var w = me.w,\n        X = me.X, i = me.i, t, v;\n    // Update Weyl generator.\n    me.w = w = (w + 0x61c88647) | 0;\n    // Update xor generator.\n    v = X[(i + 34) & 127];\n    t = X[i = ((i + 1) & 127)];\n    v ^= v << 13;\n    t ^= t << 17;\n    v ^= v >>> 15;\n    t ^= t >>> 12;\n    // Update Xor generator array state.\n    v = X[i] = v ^ t;\n    me.i = i;\n    // Result is the combination.\n    return (v + (w ^ (w >>> 16))) | 0;\n  };\n\n  function init(me, seed) {\n    var t, v, i, j, w, X = [], limit = 128;\n    if (seed === (seed | 0)) {\n      // Numeric seeds initialize v, which is used to generates X.\n      v = seed;\n      seed = null;\n    } else {\n      // String seeds are mixed into v and X one character at a time.\n      seed = seed + '\\0';\n      v = 0;\n      limit = Math.max(limit, seed.length);\n    }\n    // Initialize circular array and weyl value.\n    for (i = 0, j = -32; j < limit; ++j) {\n      // Put the unicode characters into the array, and shuffle them.\n      if (seed) v ^= seed.charCodeAt((j + 32) % seed.length);\n      // After 32 shuffles, take v as the starting w value.\n      if (j === 0) w = v;\n      v ^= v << 10;\n      v ^= v >>> 15;\n      v ^= v << 4;\n      v ^= v >>> 13;\n      if (j >= 0) {\n        w = (w + 0x61c88647) | 0;     // Weyl.\n        t = (X[j & 127] ^= (v + w));  // Combine xor and weyl to init array.\n        i = (0 == t) ? i + 1 : 0;     // Count zeroes.\n      }\n    }\n    // We have detected all zeroes; make the key nonzero.\n    if (i >= 128) {\n      X[(seed && seed.length || 0) & 127] = -1;\n    }\n    // Run the generator 512 times to further mix the state before using it.\n    // Factoring this as a function slows the main generator, so it is just\n    // unrolled here.  The weyl generator is not advanced while warming up.\n    i = 127;\n    for (j = 4 * 128; j > 0; --j) {\n      v = X[(i + 34) & 127];\n      t = X[i = ((i + 1) & 127)];\n      v ^= v << 13;\n      t ^= t << 17;\n      v ^= v >>> 15;\n      t ^= t >>> 12;\n      X[i] = v ^ t;\n    }\n    // Storing state as object members is faster than using closure variables.\n    me.w = w;\n    me.X = X;\n    me.i = i;\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.i = f.i;\n  t.w = f.w;\n  t.X = f.X.slice();\n  return t;\n};\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.X) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor4096 = impl;\n}\n\n})(\n  this,                                     // window object or global\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n","// A Javascript implementaion of the \"Tyche-i\" prng algorithm by\n// Samuel Neves and Filipe Araujo.\n// See https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var b = me.b, c = me.c, d = me.d, a = me.a;\n    b = (b << 25) ^ (b >>> 7) ^ c;\n    c = (c - d) | 0;\n    d = (d << 24) ^ (d >>> 8) ^ a;\n    a = (a - b) | 0;\n    me.b = b = (b << 20) ^ (b >>> 12) ^ c;\n    me.c = c = (c - d) | 0;\n    me.d = (d << 16) ^ (c >>> 16) ^ a;\n    return me.a = (a - b) | 0;\n  };\n\n  /* The following is non-inverted tyche, which has better internal\n   * bit diffusion, but which is about 25% slower than tyche-i in JS.\n  me.next = function() {\n    var a = me.a, b = me.b, c = me.c, d = me.d;\n    a = (me.a + me.b | 0) >>> 0;\n    d = me.d ^ a; d = d << 16 ^ d >>> 16;\n    c = me.c + d | 0;\n    b = me.b ^ c; b = b << 12 ^ d >>> 20;\n    me.a = a = a + b | 0;\n    d = d ^ a; me.d = d = d << 8 ^ d >>> 24;\n    me.c = c = c + d | 0;\n    b = b ^ c;\n    return me.b = (b << 7 ^ b >>> 25);\n  }\n  */\n\n  me.a = 0;\n  me.b = 0;\n  me.c = 2654435769 | 0;\n  me.d = 1367130551;\n\n  if (seed === Math.floor(seed)) {\n    // Integer seed.\n    me.a = (seed / 0x100000000) | 0;\n    me.b = seed | 0;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 20; k++) {\n    me.b ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.a = f.a;\n  t.b = f.b;\n  t.c = f.c;\n  t.d = f.d;\n  return t;\n};\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.tychei = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","/*\nCopyright 2019 David Bau.\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\n(function (global, pool, math) {\n//\n// The following constants are related to IEEE 754 limits.\n//\n\nvar width = 256,        // each RC4 output is 0 <= x < 256\n    chunks = 6,         // at least six RC4 outputs for each double\n    digits = 52,        // there are 52 significant digits in a double\n    rngname = 'random', // rngname: name for Math.random and Math.seedrandom\n    startdenom = math.pow(width, chunks),\n    significance = math.pow(2, digits),\n    overflow = significance * 2,\n    mask = width - 1,\n    nodecrypto;         // node.js crypto module, initialized at the bottom.\n\n//\n// seedrandom()\n// This is the seedrandom function described above.\n//\nfunction seedrandom(seed, options, callback) {\n  var key = [];\n  options = (options == true) ? { entropy: true } : (options || {});\n\n  // Flatten the seed string or build one from local entropy if needed.\n  var shortseed = mixkey(flatten(\n    options.entropy ? [seed, tostring(pool)] :\n    (seed == null) ? autoseed() : seed, 3), key);\n\n  // Use the seed to initialize an ARC4 generator.\n  var arc4 = new ARC4(key);\n\n  // This function returns a random double in [0, 1) that contains\n  // randomness in every bit of the mantissa of the IEEE 754 value.\n  var prng = function() {\n    var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\n        d = startdenom,                 //   and denominator d = 2 ^ 48.\n        x = 0;                          //   and no 'extra last byte'.\n    while (n < significance) {          // Fill up all significant digits by\n      n = (n + x) * width;              //   shifting numerator and\n      d *= width;                       //   denominator and generating a\n      x = arc4.g(1);                    //   new least-significant-byte.\n    }\n    while (n >= overflow) {             // To avoid rounding up, before adding\n      n /= 2;                           //   last byte, shift everything\n      d /= 2;                           //   right using integer math until\n      x >>>= 1;                         //   we have exactly the desired bits.\n    }\n    return (n + x) / d;                 // Form the number within [0, 1).\n  };\n\n  prng.int32 = function() { return arc4.g(4) | 0; }\n  prng.quick = function() { return arc4.g(4) / 0x100000000; }\n  prng.double = prng;\n\n  // Mix the randomness into accumulated entropy.\n  mixkey(tostring(arc4.S), pool);\n\n  // Calling convention: what to return as a function of prng, seed, is_math.\n  return (options.pass || callback ||\n      function(prng, seed, is_math_call, state) {\n        if (state) {\n          // Load the arc4 state from the given state if it has an S array.\n          if (state.S) { copy(state, arc4); }\n          // Only provide the .state method if requested via options.state.\n          prng.state = function() { return copy(arc4, {}); }\n        }\n\n        // If called as a method of Math (Math.seedrandom()), mutate\n        // Math.random because that is how seedrandom.js has worked since v1.0.\n        if (is_math_call) { math[rngname] = prng; return seed; }\n\n        // Otherwise, it is a newer calling convention, so return the\n        // prng directly.\n        else return prng;\n      })(\n  prng,\n  shortseed,\n  'global' in options ? options.global : (this == math),\n  options.state);\n}\n\n//\n// ARC4\n//\n// An ARC4 implementation.  The constructor takes a key in the form of\n// an array of at most (width) integers that should be 0 <= x < (width).\n//\n// The g(count) method returns a pseudorandom integer that concatenates\n// the next (count) outputs from ARC4.  Its return value is a number x\n// that is in the range 0 <= x < (width ^ count).\n//\nfunction ARC4(key) {\n  var t, keylen = key.length,\n      me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\n\n  // The empty key [] is treated as [0].\n  if (!keylen) { key = [keylen++]; }\n\n  // Set up S using the standard key scheduling algorithm.\n  while (i < width) {\n    s[i] = i++;\n  }\n  for (i = 0; i < width; i++) {\n    s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\n    s[j] = t;\n  }\n\n  // The \"g\" method returns the next (count) outputs as one number.\n  (me.g = function(count) {\n    // Using instance members instead of closure state nearly doubles speed.\n    var t, r = 0,\n        i = me.i, j = me.j, s = me.S;\n    while (count--) {\n      t = s[i = mask & (i + 1)];\n      r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\n    }\n    me.i = i; me.j = j;\n    return r;\n    // For robust unpredictability, the function call below automatically\n    // discards an initial batch of values.  This is called RC4-drop[256].\n    // See http://google.com/search?q=rsa+fluhrer+response&btnI\n  })(width);\n}\n\n//\n// copy()\n// Copies internal state of ARC4 to or from a plain object.\n//\nfunction copy(f, t) {\n  t.i = f.i;\n  t.j = f.j;\n  t.S = f.S.slice();\n  return t;\n};\n\n//\n// flatten()\n// Converts an object tree to nested arrays of strings.\n//\nfunction flatten(obj, depth) {\n  var result = [], typ = (typeof obj), prop;\n  if (depth && typ == 'object') {\n    for (prop in obj) {\n      try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\n    }\n  }\n  return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\n}\n\n//\n// mixkey()\n// Mixes a string seed into a key that is an array of integers, and\n// returns a shortened string seed that is equivalent to the result key.\n//\nfunction mixkey(seed, key) {\n  var stringseed = seed + '', smear, j = 0;\n  while (j < stringseed.length) {\n    key[mask & j] =\n      mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\n  }\n  return tostring(key);\n}\n\n//\n// autoseed()\n// Returns an object for autoseeding, using window.crypto and Node crypto\n// module if available.\n//\nfunction autoseed() {\n  try {\n    var out;\n    if (nodecrypto && (out = nodecrypto.randomBytes)) {\n      // The use of 'out' to remember randomBytes makes tight minified code.\n      out = out(width);\n    } else {\n      out = new Uint8Array(width);\n      (global.crypto || global.msCrypto).getRandomValues(out);\n    }\n    return tostring(out);\n  } catch (e) {\n    var browser = global.navigator,\n        plugins = browser && browser.plugins;\n    return [+new Date, global, plugins, global.screen, tostring(pool)];\n  }\n}\n\n//\n// tostring()\n// Converts an array of charcodes to a string\n//\nfunction tostring(a) {\n  return String.fromCharCode.apply(0, a);\n}\n\n//\n// When seedrandom.js is loaded, we immediately mix a few bits\n// from the built-in RNG into the entropy pool.  Because we do\n// not want to interfere with deterministic PRNG state later,\n// seedrandom will not call math.random on its own again after\n// initialization.\n//\nmixkey(math.random(), pool);\n\n//\n// Nodejs and AMD support: export the implementation as a module using\n// either convention.\n//\nif ((typeof module) == 'object' && module.exports) {\n  module.exports = seedrandom;\n  // When in node.js, try using crypto package for autoseeding.\n  try {\n    nodecrypto = require('crypto');\n  } catch (ex) {}\n} else if ((typeof define) == 'function' && define.amd) {\n  define(function() { return seedrandom; });\n} else {\n  // When included as a plain script, set up Math.seedrandom global.\n  math['seed' + rngname] = seedrandom;\n}\n\n\n// End anonymous scope, and pass initial values.\n})(\n  // global: `self` in browsers (including strict mode and web workers),\n  // otherwise `this` in Node and other environments\n  (typeof self !== 'undefined') ? self : this,\n  [],     // pool: entropy pool starts empty\n  Math    // math: package containing random, pow, and seedrandom\n);\n","// A library of seedable RNGs implemented in Javascript.\n//\n// Usage:\n//\n// var seedrandom = require('seedrandom');\n// var random = seedrandom(1); // or any seed.\n// var x = random();       // 0 <= x < 1.  Every bit is random.\n// var x = random.quick(); // 0 <= x < 1.  32 bits of randomness.\n\n// alea, a 53-bit multiply-with-carry generator by Johannes Baagøe.\n// Period: ~2^116\n// Reported to pass all BigCrush tests.\nvar alea = require('./lib/alea');\n\n// xor128, a pure xor-shift generator by George Marsaglia.\n// Period: 2^128-1.\n// Reported to fail: MatrixRank and LinearComp.\nvar xor128 = require('./lib/xor128');\n\n// xorwow, George Marsaglia's 160-bit xor-shift combined plus weyl.\n// Period: 2^192-2^32\n// Reported to fail: CollisionOver, SimpPoker, and LinearComp.\nvar xorwow = require('./lib/xorwow');\n\n// xorshift7, by François Panneton and Pierre L'ecuyer, takes\n// a different approach: it adds robustness by allowing more shifts\n// than Marsaglia's original three.  It is a 7-shift generator\n// with 256 bits, that passes BigCrush with no systmatic failures.\n// Period 2^256-1.\n// No systematic BigCrush failures reported.\nvar xorshift7 = require('./lib/xorshift7');\n\n// xor4096, by Richard Brent, is a 4096-bit xor-shift with a\n// very long period that also adds a Weyl generator. It also passes\n// BigCrush with no systematic failures.  Its long period may\n// be useful if you have many generators and need to avoid\n// collisions.\n// Period: 2^4128-2^32.\n// No systematic BigCrush failures reported.\nvar xor4096 = require('./lib/xor4096');\n\n// Tyche-i, by Samuel Neves and Filipe Araujo, is a bit-shifting random\n// number generator derived from ChaCha, a modern stream cipher.\n// https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n// Period: ~2^127\n// No systematic BigCrush failures reported.\nvar tychei = require('./lib/tychei');\n\n// The original ARC4-based prng included in this library.\n// Period: ~2^1600\nvar sr = require('./seedrandom');\n\nsr.alea = alea;\nsr.xor128 = xor128;\nsr.xorwow = xorwow;\nsr.xorshift7 = xorshift7;\nsr.xor4096 = xor4096;\nsr.tychei = tychei;\n\nmodule.exports = sr;\n","/**\n  * vue-class-component v7.2.6\n  * (c) 2015-present Evan You\n  * @license MIT\n  */\nimport Vue from 'vue';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\n// The rational behind the verbose Reflect-feature check below is the fact that there are polyfills\n// which add an implementation for Reflect.defineMetadata but not for Reflect.getOwnMetadataKeys.\n// Without this check consumers will encounter hard to track down runtime errors.\nfunction reflectionIsSupported() {\n  return typeof Reflect !== 'undefined' && Reflect.defineMetadata && Reflect.getOwnMetadataKeys;\n}\nfunction copyReflectionMetadata(to, from) {\n  forwardMetadata(to, from);\n  Object.getOwnPropertyNames(from.prototype).forEach(function (key) {\n    forwardMetadata(to.prototype, from.prototype, key);\n  });\n  Object.getOwnPropertyNames(from).forEach(function (key) {\n    forwardMetadata(to, from, key);\n  });\n}\n\nfunction forwardMetadata(to, from, propertyKey) {\n  var metaKeys = propertyKey ? Reflect.getOwnMetadataKeys(from, propertyKey) : Reflect.getOwnMetadataKeys(from);\n  metaKeys.forEach(function (metaKey) {\n    var metadata = propertyKey ? Reflect.getOwnMetadata(metaKey, from, propertyKey) : Reflect.getOwnMetadata(metaKey, from);\n\n    if (propertyKey) {\n      Reflect.defineMetadata(metaKey, metadata, to, propertyKey);\n    } else {\n      Reflect.defineMetadata(metaKey, metadata, to);\n    }\n  });\n}\n\nvar fakeArray = {\n  __proto__: []\n};\nvar hasProto = fakeArray instanceof Array;\nfunction createDecorator(factory) {\n  return function (target, key, index) {\n    var Ctor = typeof target === 'function' ? target : target.constructor;\n\n    if (!Ctor.__decorators__) {\n      Ctor.__decorators__ = [];\n    }\n\n    if (typeof index !== 'number') {\n      index = undefined;\n    }\n\n    Ctor.__decorators__.push(function (options) {\n      return factory(options, key, index);\n    });\n  };\n}\nfunction mixins() {\n  for (var _len = arguments.length, Ctors = new Array(_len), _key = 0; _key < _len; _key++) {\n    Ctors[_key] = arguments[_key];\n  }\n\n  return Vue.extend({\n    mixins: Ctors\n  });\n}\nfunction isPrimitive(value) {\n  var type = _typeof(value);\n\n  return value == null || type !== 'object' && type !== 'function';\n}\nfunction warn(message) {\n  if (typeof console !== 'undefined') {\n    console.warn('[vue-class-component] ' + message);\n  }\n}\n\nfunction collectDataFromConstructor(vm, Component) {\n  // override _init to prevent to init as Vue instance\n  var originalInit = Component.prototype._init;\n\n  Component.prototype._init = function () {\n    var _this = this;\n\n    // proxy to actual vm\n    var keys = Object.getOwnPropertyNames(vm); // 2.2.0 compat (props are no longer exposed as self properties)\n\n    if (vm.$options.props) {\n      for (var key in vm.$options.props) {\n        if (!vm.hasOwnProperty(key)) {\n          keys.push(key);\n        }\n      }\n    }\n\n    keys.forEach(function (key) {\n      Object.defineProperty(_this, key, {\n        get: function get() {\n          return vm[key];\n        },\n        set: function set(value) {\n          vm[key] = value;\n        },\n        configurable: true\n      });\n    });\n  }; // should be acquired class property values\n\n\n  var data = new Component(); // restore original _init to avoid memory leak (#209)\n\n  Component.prototype._init = originalInit; // create plain data object\n\n  var plainData = {};\n  Object.keys(data).forEach(function (key) {\n    if (data[key] !== undefined) {\n      plainData[key] = data[key];\n    }\n  });\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (!(Component.prototype instanceof Vue) && Object.keys(plainData).length > 0) {\n      warn('Component class must inherit Vue or its descendant class ' + 'when class property is used.');\n    }\n  }\n\n  return plainData;\n}\n\nvar $internalHooks = ['data', 'beforeCreate', 'created', 'beforeMount', 'mounted', 'beforeDestroy', 'destroyed', 'beforeUpdate', 'updated', 'activated', 'deactivated', 'render', 'errorCaptured', 'serverPrefetch' // 2.6\n];\nfunction componentFactory(Component) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  options.name = options.name || Component._componentTag || Component.name; // prototype props.\n\n  var proto = Component.prototype;\n  Object.getOwnPropertyNames(proto).forEach(function (key) {\n    if (key === 'constructor') {\n      return;\n    } // hooks\n\n\n    if ($internalHooks.indexOf(key) > -1) {\n      options[key] = proto[key];\n      return;\n    }\n\n    var descriptor = Object.getOwnPropertyDescriptor(proto, key);\n\n    if (descriptor.value !== void 0) {\n      // methods\n      if (typeof descriptor.value === 'function') {\n        (options.methods || (options.methods = {}))[key] = descriptor.value;\n      } else {\n        // typescript decorated data\n        (options.mixins || (options.mixins = [])).push({\n          data: function data() {\n            return _defineProperty({}, key, descriptor.value);\n          }\n        });\n      }\n    } else if (descriptor.get || descriptor.set) {\n      // computed properties\n      (options.computed || (options.computed = {}))[key] = {\n        get: descriptor.get,\n        set: descriptor.set\n      };\n    }\n  });\n  (options.mixins || (options.mixins = [])).push({\n    data: function data() {\n      return collectDataFromConstructor(this, Component);\n    }\n  }); // decorate options\n\n  var decorators = Component.__decorators__;\n\n  if (decorators) {\n    decorators.forEach(function (fn) {\n      return fn(options);\n    });\n    delete Component.__decorators__;\n  } // find super\n\n\n  var superProto = Object.getPrototypeOf(Component.prototype);\n  var Super = superProto instanceof Vue ? superProto.constructor : Vue;\n  var Extended = Super.extend(options);\n  forwardStaticMembers(Extended, Component, Super);\n\n  if (reflectionIsSupported()) {\n    copyReflectionMetadata(Extended, Component);\n  }\n\n  return Extended;\n}\nvar reservedPropertyNames = [// Unique id\n'cid', // Super Vue constructor\n'super', // Component options that will be used by the component\n'options', 'superOptions', 'extendOptions', 'sealedOptions', // Private assets\n'component', 'directive', 'filter'];\nvar shouldIgnore = {\n  prototype: true,\n  arguments: true,\n  callee: true,\n  caller: true\n};\n\nfunction forwardStaticMembers(Extended, Original, Super) {\n  // We have to use getOwnPropertyNames since Babel registers methods as non-enumerable\n  Object.getOwnPropertyNames(Original).forEach(function (key) {\n    // Skip the properties that should not be overwritten\n    if (shouldIgnore[key]) {\n      return;\n    } // Some browsers does not allow reconfigure built-in properties\n\n\n    var extendedDescriptor = Object.getOwnPropertyDescriptor(Extended, key);\n\n    if (extendedDescriptor && !extendedDescriptor.configurable) {\n      return;\n    }\n\n    var descriptor = Object.getOwnPropertyDescriptor(Original, key); // If the user agent does not support `__proto__` or its family (IE <= 10),\n    // the sub class properties may be inherited properties from the super class in TypeScript.\n    // We need to exclude such properties to prevent to overwrite\n    // the component options object which stored on the extended constructor (See #192).\n    // If the value is a referenced value (object or function),\n    // we can check equality of them and exclude it if they have the same reference.\n    // If it is a primitive value, it will be forwarded for safety.\n\n    if (!hasProto) {\n      // Only `cid` is explicitly exluded from property forwarding\n      // because we cannot detect whether it is a inherited property or not\n      // on the no `__proto__` environment even though the property is reserved.\n      if (key === 'cid') {\n        return;\n      }\n\n      var superDescriptor = Object.getOwnPropertyDescriptor(Super, key);\n\n      if (!isPrimitive(descriptor.value) && superDescriptor && superDescriptor.value === descriptor.value) {\n        return;\n      }\n    } // Warn if the users manually declare reserved properties\n\n\n    if (process.env.NODE_ENV !== 'production' && reservedPropertyNames.indexOf(key) >= 0) {\n      warn(\"Static property name '\".concat(key, \"' declared on class '\").concat(Original.name, \"' \") + 'conflicts with reserved property name of Vue internal. ' + 'It may cause unexpected behavior of the component. Consider renaming the property.');\n    }\n\n    Object.defineProperty(Extended, key, descriptor);\n  });\n}\n\nfunction Component(options) {\n  if (typeof options === 'function') {\n    return componentFactory(options);\n  }\n\n  return function (Component) {\n    return componentFactory(Component, options);\n  };\n}\n\nComponent.registerHooks = function registerHooks(keys) {\n  $internalHooks.push.apply($internalHooks, _toConsumableArray(keys));\n};\n\nexport default Component;\nexport { createDecorator, mixins };\n","/** @see {@link https://github.com/vuejs/vue-class-component/blob/master/src/reflect.ts} */\nvar reflectMetadataIsSupported = typeof Reflect !== 'undefined' && typeof Reflect.getMetadata !== 'undefined';\nexport function applyMetadata(options, target, key) {\n    if (reflectMetadataIsSupported) {\n        if (!Array.isArray(options) &&\n            typeof options !== 'function' &&\n            !options.hasOwnProperty('type') &&\n            typeof options.type === 'undefined') {\n            var type = Reflect.getMetadata('design:type', target, key);\n            if (type !== Object) {\n                options.type = type;\n            }\n        }\n    }\n}\n","import { createDecorator } from 'vue-class-component';\nimport { applyMetadata } from '../helpers/metadata';\n/**\n * decorator of a prop\n * @param  options the options for the prop\n * @return PropertyDecorator | void\n */\nexport function Prop(options) {\n    if (options === void 0) { options = {}; }\n    return function (target, key) {\n        applyMetadata(options, target, key);\n        createDecorator(function (componentOptions, k) {\n            ;\n            (componentOptions.props || (componentOptions.props = {}))[k] = options;\n        })(target, key);\n    };\n}\n","/*\n * Copyright 2022 FlowmapBlue\n * Copyright 2018-2020 Teralytics, modified by FlowmapBlue\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nimport { Layer, picking, project32 } from '@deck.gl/core';\nimport GL from '@luma.gl/constants';\nimport { Geometry, Model } from '@luma.gl/core';\nimport FragmentShader from './AnimatedFlowLinesLayerFragment.glsl';\nimport VertexShader from './AnimatedFlowLinesLayerVertex.glsl';\nconst DEFAULT_COLOR = [0, 132, 193, 255];\nconst loopLength = 1800;\nconst animationSpeed = 20;\nconst loopTime = loopLength / animationSpeed;\nexport default class AnimatedFlowLinesLayer extends Layer {\n    constructor(props) {\n        super(props);\n    }\n    getShaders() {\n        return super.getShaders({\n            vs: VertexShader,\n            fs: FragmentShader,\n            modules: [project32, picking],\n            shaderCache: this.context.shaderCache,\n        });\n    }\n    initializeState() {\n        const attributeManager = this.getAttributeManager();\n        /* eslint-disable max-len */\n        attributeManager.addInstanced({\n            instanceSourcePositions: {\n                size: 3,\n                type: GL.DOUBLE,\n                transition: true,\n                accessor: 'getSourcePosition',\n            },\n            instanceTargetPositions: {\n                size: 3,\n                type: GL.DOUBLE,\n                transition: true,\n                accessor: 'getTargetPosition',\n            },\n            instanceColors: {\n                size: 4,\n                type: GL.UNSIGNED_BYTE,\n                transition: true,\n                accessor: 'getColor',\n                defaultValue: [0, 0, 0, 255],\n            },\n            instanceWidths: {\n                size: 1,\n                transition: true,\n                accessor: 'getThickness',\n                defaultValue: 1,\n            },\n            instanceStaggering: {\n                accessor: 'getStaggering',\n                size: 1,\n                transition: false,\n            },\n            instancePickable: {\n                accessor: 'getPickable',\n                size: 1,\n                transition: false,\n            },\n        });\n        /* eslint-enable max-len */\n    }\n    getNeedsRedraw() {\n        return true;\n    }\n    updateState({ props, oldProps, changeFlags }) {\n        var _a;\n        super.updateState({ props, oldProps, changeFlags });\n        if (changeFlags.extensionsChanged) {\n            const { gl } = this.context;\n            (_a = this.state.model) === null || _a === void 0 ? void 0 : _a.delete();\n            this.state.model = this._getModel(gl);\n            this.getAttributeManager().invalidateAll();\n        }\n    }\n    draw({ uniforms }) {\n        const { thicknessUnit, animationTailLength } = this.props;\n        const timestamp = Date.now() / 1000;\n        const animationTime = ((timestamp % loopTime) / loopTime) * loopLength;\n        this.state.model\n            .setUniforms(Object.assign(Object.assign({}, uniforms), { thicknessUnit: thicknessUnit * 4, animationTailLength, currentTime: animationTime }))\n            .draw();\n    }\n    _getModel(gl) {\n        /*\n         *  (0, -1)-------------_(1, -1)\n         *       |          _,-\"  |\n         *       o      _,-\"      o\n         *       |  _,-\"          |\n         *   (0, 1)\"-------------(1, 1)\n         */\n        const positions = [0, -1, 0, 0, 1, 0, 1, -1, 0, 1, 1, 0];\n        return new Model(gl, Object.assign({}, this.getShaders(), {\n            id: this.props.id,\n            geometry: new Geometry({\n                drawMode: GL.TRIANGLE_STRIP,\n                attributes: {\n                    positions: new Float32Array(positions),\n                },\n            }),\n            isInstanced: true,\n        }));\n    }\n}\nAnimatedFlowLinesLayer.defaultProps = {\n    currentTime: 0,\n    animationTailLength: 0.7,\n    getSourcePosition: { type: 'accessor', value: (d) => [0, 0] },\n    getTargetPosition: { type: 'accessor', value: (d) => [0, 0] },\n    getPickable: { type: 'accessor', value: (d) => 1.0 },\n    getStaggering: {\n        type: 'accessor',\n        value: (d, { index }) => Math.random(),\n    },\n    getColor: { type: 'accessor', value: DEFAULT_COLOR },\n    getThickness: { type: 'accessor', value: 1 },\n    thicknessUnit: 15 * 2,\n    parameters: {\n        depthTest: false,\n    },\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQW5pbWF0ZWRGbG93TGluZXNMYXllci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9BbmltYXRlZEZsb3dMaW5lc0xheWVyL0FuaW1hdGVkRmxvd0xpbmVzTGF5ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7R0FnQkc7QUFFSCxPQUFPLEVBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDeEQsT0FBTyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDcEMsT0FBTyxFQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDOUMsT0FBTyxjQUFjLE1BQU0sdUNBQXVDLENBQUM7QUFDbkUsT0FBTyxZQUFZLE1BQU0scUNBQXFDLENBQUM7QUErQi9ELE1BQU0sYUFBYSxHQUFTLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDL0MsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQ3hCLE1BQU0sY0FBYyxHQUFHLEVBQUUsQ0FBQztBQUMxQixNQUFNLFFBQVEsR0FBRyxVQUFVLEdBQUcsY0FBYyxDQUFDO0FBRTdDLE1BQU0sQ0FBQyxPQUFPLE9BQU8sc0JBQTBCLFNBQVEsS0FBSztJQW1CMUQsWUFBWSxLQUFlO1FBQ3pCLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNmLENBQUM7SUFFRCxVQUFVO1FBQ1IsT0FBTyxLQUFLLENBQUMsVUFBVSxDQUFDO1lBQ3RCLEVBQUUsRUFBRSxZQUFZO1lBQ2hCLEVBQUUsRUFBRSxjQUFjO1lBQ2xCLE9BQU8sRUFBRSxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUM7WUFDN0IsV0FBVyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVztTQUN0QyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsZUFBZTtRQUNiLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxD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QVksRUFBRSxFQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBQztJQUMxQyxhQUFhLEVBQUUsRUFBRSxHQUFHLENBQUM7SUFDckIsVUFBVSxFQUFFO1FBQ1YsU0FBUyxFQUFFLEtBQUs7S0FDakI7Q0FDRixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAyMDIyIEZsb3dtYXBCbHVlXG4gKiBDb3B5cmlnaHQgMjAxOC0yMDIwIFRlcmFseXRpY3MsIG1vZGlmaWVkIGJ5IEZsb3dtYXBCbHVlXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKlxuICovXG5cbmltcG9ydCB7TGF5ZXIsIHBpY2tpbmcsIHByb2plY3QzMn0gZnJvbSAnQGRlY2suZ2wvY29yZSc7XG5pbXBvcnQgR0wgZnJvbSAnQGx1bWEuZ2wvY29uc3RhbnRzJztcbmltcG9ydCB7R2VvbWV0cnksIE1vZGVsfSBmcm9tICdAbHVtYS5nbC9jb3JlJztcbmltcG9ydCBGcmFnbWVudFNoYWRlciBmcm9tICcuL0FuaW1hdGVkRmxvd0xpbmVzTGF5ZXJGcmFnbWVudC5nbHNsJztcbmltcG9ydCBWZXJ0ZXhTaGFkZXIgZnJvbSAnLi9BbmltYXRlZEZsb3dMaW5lc0xheWVyVmVydGV4Lmdsc2wnO1xuaW1wb3J0IHtGbG93TGluZXNMYXllckF0dHJpYnV0ZXMsIFJHQkF9IGZyb20gJ0BmbG93bWFwLmdsL2RhdGEnO1xuaW1wb3J0IHtMYXllclByb3BzfSBmcm9tICcuLi90eXBlcyc7XG5leHBvcnQgaW50ZXJmYWNlIFByb3BzPEY+IGV4dGVuZHMgTGF5ZXJQcm9wcyB7XG4gIGlkOiBzdHJpbmc7XG4gIG9wYWNpdHk/OiBudW1iZXI7XG4gIHBpY2thYmxlPzogYm9vbGVhbjtcbiAgdXBkYXRlVHJpZ2dlcnM/OiB7W2tleTogc3RyaW5nXTogUmVjb3JkPHN0cmluZywgdW5rbm93bj59O1xuICBkYXRhOiBGW10gfCBGbG93TGluZXNMYXllckF0dHJpYnV0ZXM7XG4gIGRyYXdPdXRsaW5lOiBib29sZWFuO1xuICBvdXRsaW5lQ29sb3I/OiBSR0JBO1xuICBvdXRsaW5lVGhpY2tuZXNzPzogbnVtYmVyO1xuICBjdXJyZW50VGltZT86IG51bWJlcjtcbiAgdGhpY2tuZXNzVW5pdD86IG51bWJlcjtcbiAgYW5pbWF0aW9uVGFpbExlbmd0aD86IG51bWJlcjtcbiAgZ2V0U291cmNlUG9zaXRpb24/OiAoZDogRikgPT4gW251bWJlciwgbnVtYmVyXTtcbiAgZ2V0VGFyZ2V0UG9zaXRpb24/OiAoZDogRikgPT4gW251bWJlciwgbnVtYmVyXTtcbiAgZ2V0U3RhZ2dlcmluZz86IChkOiBGLCBpbmZvOiBBY2Nlc3Nvck9iamVjdEluZm8pID0+IG51bWJlcjtcbiAgZ2V0UGlja2FibGU/OiAoZDogRiwge2luZGV4fToge2luZGV4OiBudW1iZXJ9KSA9PiBudW1iZXI7IC8vID49IDEuMCAtPiB0cnVlXG4gIGdldENvbG9yPzogKGQ6IEYpID0+IFJHQkE7XG4gIGdldFRoaWNrbmVzcz86IChkOiBGKSA9PiBudW1iZXI7XG4gIGdldEVuZHBvaW50T2Zmc2V0cz86IChkOiBGKSA9PiBbbnVtYmVyLCBudW1iZXJdO1xufVxuXG4vLyBodHRwczovL2RlY2suZ2wvIy9kb2N1bWVudGF0aW9uL2RldmVsb3Blci1ndWlkZS91c2luZy1sYXllcnM/c2VjdGlvbj1hY2Nlc3NvcnNcbmV4cG9ydCBpbnRlcmZhY2UgQWNjZXNzb3JPYmplY3RJbmZvIHtcbiAgaW5kZXg6IG51bWJlcjtcbiAgZGF0YTogYW55O1xuICB0YXJnZXQ6IGFueTtcbn1cblxuY29uc3QgREVGQVVMVF9DT0xPUjogUkdCQSA9IFswLCAxMzIsIDE5MywgMjU1XTtcbmNvbnN0IGxvb3BMZW5ndGggPSAxODAwO1xuY29uc3QgYW5pbWF0aW9uU3BlZWQgPSAyMDtcbmNvbnN0IGxvb3BUaW1lID0gbG9vcExlbmd0aCAvIGFuaW1hdGlvblNwZWVkO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbmltYXRlZEZsb3dMaW5lc0xheWVyPEY+IGV4dGVuZHMgTGF5ZXIge1xuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGN1cnJlbnRUaW1lOiAwLFxuICAgIGFuaW1hdGlvblRhaWxMZW5ndGg6IDAuNyxcbiAgICBnZXRTb3VyY2VQb3NpdGlvbjoge3R5cGU6ICdhY2Nlc3NvcicsIHZhbHVlOiAoZDogYW55KSA9PiBbMCwgMF19LFxuICAgIGdldFRhcmdldFBvc2l0aW9uOiB7dHlwZTogJ2FjY2Vzc29yJywgdmFsdWU6IChkOiBhbnkpID0+IFswLCAwXX0sXG4gICAgZ2V0UGlja2FibGU6IHt0eXBlOiAnYWNjZXNzb3InLCB2YWx1ZTogKGQ6IGFueSkgPT4gMS4wfSxcbiAgICBnZXRTdGFnZ2VyaW5nOiB7XG4gICAgICB0eXBlOiAnYWNjZXNzb3InLFxuICAgICAgdmFsdWU6IChkOiBhbnksIHtpbmRleH06IHtpbmRleDogbnVtYmVyfSkgPT4gTWF0aC5yYW5kb20oKSxcbiAgICB9LFxuICAgIGdldENvbG9yOiB7dHlwZTogJ2FjY2Vzc29yJywgdmFsdWU6IERFRkFVTFRfQ09MT1J9LFxuICAgIGdldFRoaWNrbmVzczoge3R5cGU6ICdhY2Nlc3NvcicsIHZhbHVlOiAxfSxcbiAgICB0aGlja25lc3NVbml0OiAxNSAqIDIsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgZGVwdGhUZXN0OiBmYWxzZSxcbiAgICB9LFxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wczxGPikge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgfVxuXG4gIGdldFNoYWRlcnMoKTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4ge1xuICAgIHJldHVybiBzdXBlci5nZXRTaGFkZXJzKHtcbiAgICAgIHZzOiBWZXJ0ZXhTaGFkZXIsXG4gICAgICBmczogRnJhZ21lbnRTaGFkZXIsXG4gICAgICBtb2R1bGVzOiBbcHJvamVjdDMyLCBwaWNraW5nXSxcbiAgICAgIHNoYWRlckNhY2hlOiB0aGlzLmNvbnRleHQuc2hhZGVyQ2FjaGUsXG4gICAgfSk7XG4gIH1cblxuICBpbml0aWFsaXplU3RhdGUoKTogdm9pZCB7XG4gICAgY29uc3QgYXR0cmlidXRlTWFuYWdlciA9IHRoaXMuZ2V0QXR0cmlidXRlTWFuYWdlcigpO1xuXG4gICAgLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuICAgIGF0dHJpYnV0ZU1hbmFnZXIuYWRkSW5zdGFuY2VkKHtcbiAgICAgIGluc3RhbmNlU291cmNlUG9zaXRpb25zOiB7XG4gICAgICAgIHNpemU6IDMsXG4gICAgICAgIHR5cGU6IEdMLkRPVUJMRSxcbiAgICAgICAgdHJhbnNpdGlvbjogdHJ1ZSxcbiAgICAgICAgYWNjZXNzb3I6ICdnZXRTb3VyY2VQb3NpdGlvbicsXG4gICAgICB9LFxuICAgICAgaW5zdGFuY2VUYXJnZXRQb3NpdGlvbnM6IHtcbiAgICAgICAgc2l6ZTogMyxcbiAgICAgICAgdHlwZTogR0wuRE9VQkxFLFxuICAgICAgICB0cmFuc2l0aW9uOiB0cnVlLFxuICAgICAgICBhY2Nlc3NvcjogJ2dldFRhcmdldFBvc2l0aW9uJyxcbiAgICAgIH0sXG4gICAgICBpbnN0YW5jZUNvbG9yczoge1xuICAgICAgICBzaXplOiA0LFxuICAgICAgICB0eXBlOiBHTC5VTlNJR05FRF9CWVRFLFxuICAgICAgICB0cmFuc2l0aW9uOiB0cnVlLFxuICAgICAgICBhY2Nlc3NvcjogJ2dldENvbG9yJyxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBbMCwgMCwgMCwgMjU1XSxcbiAgICAgIH0sXG4gICAgICBpbnN0YW5jZVdpZHRoczoge1xuICAgICAgICBzaXplOiAxLFxuICAgICAgICB0cmFuc2l0aW9uOiB0cnVlLFxuICAgICAgICBhY2Nlc3NvcjogJ2dldFRoaWNrbmVzcycsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogMSxcbiAgICAgIH0sXG4gICAgICBpbnN0YW5jZVN0YWdnZXJpbmc6IHtcbiAgICAgICAgYWNjZXNzb3I6ICdnZXRTdGFnZ2VyaW5nJyxcbiAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgdHJhbnNpdGlvbjogZmFsc2UsXG4gICAgICB9LFxuICAgICAgaW5zdGFuY2VQaWNrYWJsZToge1xuICAgICAgICBhY2Nlc3NvcjogJ2dldFBpY2thYmxlJyxcbiAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgdHJhbnNpdGlvbjogZmFsc2UsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIC8qIGVzbGludC1lbmFibGUgbWF4LWxlbiAqL1xuICB9XG5cbiAgZ2V0TmVlZHNSZWRyYXcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICB1cGRhdGVTdGF0ZSh7cHJvcHMsIG9sZFByb3BzLCBjaGFuZ2VGbGFnc306IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkIHtcbiAgICBzdXBlci51cGRhdGVTdGF0ZSh7cHJvcHMsIG9sZFByb3BzLCBjaGFuZ2VGbGFnc30pO1xuXG4gICAgaWYgKGNoYW5nZUZsYWdzLmV4dGVuc2lvbnNDaGFuZ2VkKSB7XG4gICAgICBjb25zdCB7Z2x9ID0gdGhpcy5jb250ZXh0O1xuICAgICAgdGhpcy5zdGF0ZS5tb2RlbD8uZGVsZXRlKCk7XG4gICAgICB0aGlzLnN0YXRlLm1vZGVsID0gdGhpcy5fZ2V0TW9kZWwoZ2wpO1xuICAgICAgdGhpcy5nZXRBdHRyaWJ1dGVNYW5hZ2VyKCkuaW52YWxpZGF0ZUFsbCgpO1xuICAgIH1cbiAgfVxuXG4gIGRyYXcoe3VuaWZvcm1zfTogUmVjb3JkPHN0cmluZywgYW55Pik6IHZvaWQge1xuICAgIGNvbnN0IHt0aGlja25lc3NVbml0LCBhbmltYXRpb25UYWlsTGVuZ3RofSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKSAvIDEwMDA7XG4gICAgY29uc3QgYW5pbWF0aW9uVGltZSA9ICgodGltZXN0YW1wICUgbG9vcFRpbWUpIC8gbG9vcFRpbWUpICogbG9vcExlbmd0aDtcblxuICAgIHRoaXMuc3RhdGUubW9kZWxcbiAgICAgIC5zZXRVbmlmb3Jtcyh7XG4gICAgICAgIC4uLnVuaWZvcm1zLFxuICAgICAgICB0aGlja25lc3NVbml0OiB0aGlja25lc3NVbml0ICogNCxcbiAgICAgICAgYW5pbWF0aW9uVGFpbExlbmd0aCxcbiAgICAgICAgY3VycmVudFRpbWU6IGFuaW1hdGlvblRpbWUsXG4gICAgICB9KVxuICAgICAgLmRyYXcoKTtcbiAgfVxuXG4gIF9nZXRNb2RlbChnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4ge1xuICAgIC8qXG4gICAgICogICgwLCAtMSktLS0tLS0tLS0tLS0tXygxLCAtMSlcbiAgICAgKiAgICAgICB8ICAgICAgICAgIF8sLVwiICB8XG4gICAgICogICAgICAgbyAgICAgIF8sLVwiICAgICAgb1xuICAgICAqICAgICAgIHwgIF8sLVwiICAgICAgICAgIHxcbiAgICAgKiAgICgwLCAxKVwiLS0tLS0tLS0tLS0tLSgxLCAxKVxuICAgICAqL1xuICAgIGNvbnN0IHBvc2l0aW9ucyA9IFswLCAtMSwgMCwgMCwgMSwgMCwgMSwgLTEsIDAsIDEsIDEsIDBdO1xuXG4gICAgcmV0dXJuIG5ldyBNb2RlbChcbiAgICAgIGdsLFxuICAgICAgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5nZXRTaGFkZXJzKCksIHtcbiAgICAgICAgaWQ6IHRoaXMucHJvcHMuaWQsXG4gICAgICAgIGdlb21ldHJ5OiBuZXcgR2VvbWV0cnkoe1xuICAgICAgICAgIGRyYXdNb2RlOiBHTC5UUklBTkdMRV9TVFJJUCxcbiAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICBwb3NpdGlvbnM6IG5ldyBGbG9hdDMyQXJyYXkocG9zaXRpb25zKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICAgICAgaXNJbnN0YW5jZWQ6IHRydWUsXG4gICAgICB9KSxcbiAgICApO1xuICB9XG59XG4iXX0=","/*\n * Copyright 2022 FlowmapBlue\n * Copyright 2018-2020 Teralytics, modified by FlowmapBlue\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nexport default `\\\n#define SHADER_NAME animated-flow-lines-layer-vertex-shader\n#define SPEED 0.015\n#define NUM_PARTS 5.0\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\nattribute float instancePickable;\nattribute float instanceStaggering;\n\nuniform float opacity;\nuniform float currentTime;\nuniform float thicknessUnit;\n    \nvarying vec4 vColor;\nvarying float sourceToTarget;\nvarying vec2 uv;\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  // Position\n  vec4 source_commonspace;\n  vec4 target_commonspace;\n  vec4 source = project_position_to_clipspace(instanceSourcePositions, instanceSourcePositions64Low, vec3(0.), source_commonspace);\n  vec4 target = project_position_to_clipspace(instanceTargetPositions, instanceTargetPositions64Low, vec3(0.), target_commonspace);\n\n  float widthPixels = instanceWidths * thicknessUnit;\n  \n  \n  // linear interpolation of source & target to pick right coord\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);\n  uv = positions.xy;\n  geometry.uv = uv;\n  if (instancePickable > 0.5) {\n    geometry.pickingColor = instancePickingColors;\n  }\n  \n  // extrude\n  vec3 offset = vec3(\n    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  // Color\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  sourceToTarget = positions.x * length(source - target) * NUM_PARTS - currentTime * SPEED + instanceStaggering; \n}\n`;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQW5pbWF0ZWRGbG93TGluZXNMYXllclZlcnRleC5nbHNsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL0FuaW1hdGVkRmxvd0xpbmVzTGF5ZXIvQW5pbWF0ZWRGbG93TGluZXNMYXllclZlcnRleC5nbHNsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7O0dBZ0JHO0FBQ0gsZUFBZTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBd0VkLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMjIgRmxvd21hcEJsdWVcbiAqIENvcHlyaWdodCAyMDE4LTIwMjAgVGVyYWx5dGljcywgbW9kaWZpZWQgYnkgRmxvd21hcEJsdWVcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGBcXFxuI2RlZmluZSBTSEFERVJfTkFNRSBhbmltYXRlZC1mbG93LWxpbmVzLWxheWVyLXZlcnRleC1zaGFkZXJcbiNkZWZpbmUgU1BFRUQgMC4wMTVcbiNkZWZpbmUgTlVNX1BBUlRTIDUuMFxuXG5hdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbnM7XG5hdHRyaWJ1dGUgdmVjMyBpbnN0YW5jZVNvdXJjZVBvc2l0aW9ucztcbmF0dHJpYnV0ZSB2ZWMzIGluc3RhbmNlVGFyZ2V0UG9zaXRpb25zO1xuYXR0cmlidXRlIHZlYzMgaW5zdGFuY2VTb3VyY2VQb3NpdGlvbnM2NExvdztcbmF0dHJpYnV0ZSB2ZWMzIGluc3RhbmNlVGFyZ2V0UG9zaXRpb25zNjRMb3c7XG5hdHRyaWJ1dGUgdmVjNCBpbnN0YW5jZUNvbG9ycztcbmF0dHJpYnV0ZSB2ZWMzIGluc3RhbmNlUGlja2luZ0NvbG9ycztcbmF0dHJpYnV0ZSBmbG9hdCBpbnN0YW5jZVdpZHRocztcbmF0dHJpYnV0ZSBmbG9hdCBpbnN0YW5jZVBpY2thYmxlO1xuYXR0cmlidXRlIGZsb2F0IGluc3RhbmNlU3RhZ2dlcmluZztcblxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xudW5pZm9ybSBmbG9hdCBjdXJyZW50VGltZTtcbnVuaWZvcm0gZmxvYXQgdGhpY2tuZXNzVW5pdDtcbiAgICBcbnZhcnlpbmcgdmVjNCB2Q29sb3I7XG52YXJ5aW5nIGZsb2F0IHNvdXJjZVRvVGFyZ2V0O1xudmFyeWluZyB2ZWMyIHV2O1xuXG4vLyBvZmZzZXQgdmVjdG9yIGJ5IHN0cm9rZVdpZHRoIHBpeGVsc1xuLy8gb2Zmc2V0X2RpcmVjdGlvbiBpcyAtMSAobGVmdCkgb3IgMSAocmlnaHQpXG52ZWMyIGdldEV4dHJ1c2lvbk9mZnNldCh2ZWMyIGxpbmVfY2xpcHNwYWNlLCBmbG9hdCBvZmZzZXRfZGlyZWN0aW9uLCBmbG9hdCB3aWR0aCkge1xuICAvLyBub3JtYWxpemVkIGRpcmVjdGlvbiBvZiB0aGUgbGluZVxuICB2ZWMyIGRpcl9zY3JlZW5zcGFjZSA9IG5vcm1hbGl6ZShsaW5lX2NsaXBzcGFjZSAqIHByb2plY3RfdVZpZXdwb3J0U2l6ZSk7XG4gIC8vIHJvdGF0ZSBieSA5MCBkZWdyZWVzXG4gIGRpcl9zY3JlZW5zcGFjZSA9IHZlYzIoLWRpcl9zY3JlZW5zcGFjZS55LCBkaXJfc2NyZWVuc3BhY2UueCk7XG5cbiAgcmV0dXJuIGRpcl9zY3JlZW5zcGFjZSAqIG9mZnNldF9kaXJlY3Rpb24gKiB3aWR0aCAvIDIuMDtcbn1cblxudm9pZCBtYWluKHZvaWQpIHtcbiAgZ2VvbWV0cnkud29ybGRQb3NpdGlvbiA9IGluc3RhbmNlU291cmNlUG9zaXRpb25zO1xuICBnZW9tZXRyeS53b3JsZFBvc2l0aW9uQWx0ID0gaW5zdGFuY2VUYXJnZXRQb3NpdGlvbnM7XG5cbiAgLy8gUG9zaXRpb25cbiAgdmVjNCBzb3VyY2VfY29tbW9uc3BhY2U7XG4gIHZlYzQgdGFyZ2V0X2NvbW1vbnNwYWNlO1xuICB2ZWM0IHNvdXJjZSA9IHByb2plY3RfcG9zaXRpb25fdG9fY2xpcHNwYWNlKGluc3RhbmNlU291cmNlUG9zaXRpb25zLCBpbnN0YW5jZVNvdXJjZVBvc2l0aW9uczY0TG93LCB2ZWMzKDAuKSwgc291cmNlX2NvbW1vbnNwYWNlKTtcbiAgdmVjNCB0YXJnZXQgPSBwcm9qZWN0X3Bvc2l0aW9uX3RvX2NsaXBzcGFjZShpbnN0YW5jZVRhcmdldFBvc2l0aW9ucywgaW5zdGFuY2VUYXJnZXRQb3NpdGlvbnM2NExvdywgdmVjMygwLiksIHRhcmdldF9jb21tb25zcGFjZSk7XG5cbiAgZmxvYXQgd2lkdGhQaXhlbHMgPSBpbnN0YW5jZVdpZHRocyAqIHRoaWNrbmVzc1VuaXQ7XG4gIFxuICBcbiAgLy8gbGluZWFyIGludGVycG9sYXRpb24gb2Ygc291cmNlICYgdGFyZ2V0IHRvIHBpY2sgcmlnaHQgY29vcmRcbiAgZmxvYXQgc2VnbWVudEluZGV4ID0gcG9zaXRpb25zLng7XG4gIHZlYzQgcCA9IG1peChzb3VyY2UsIHRhcmdldCwgc2VnbWVudEluZGV4KTtcbiAgZ2VvbWV0cnkucG9zaXRpb24gPSBtaXgoc291cmNlX2NvbW1vbnNwYWNlLCB0YXJnZXRfY29tbW9uc3BhY2UsIHNlZ21lbnRJbmRleCk7XG4gIHV2ID0gcG9zaXRpb25zLnh5O1xuICBnZW9tZXRyeS51diA9IHV2O1xuICBpZiAoaW5zdGFuY2VQaWNrYWJsZSA+IDAuNSkge1xuICAgIGdlb21ldHJ5LnBpY2tpbmdDb2xvciA9IGluc3RhbmNlUGlja2luZ0NvbG9ycztcbiAgfVxuICBcbiAgLy8gZXh0cnVkZVxuICB2ZWMzIG9mZnNldCA9IHZlYzMoXG4gICAgZ2V0RXh0cnVzaW9uT2Zmc2V0KHRhcmdldC54eSAtIHNvdXJjZS54eSwgcG9zaXRpb25zLnksIHdpZHRoUGl4ZWxzKSxcbiAgICAwLjApO1xuICBERUNLR0xfRklMVEVSX1NJWkUob2Zmc2V0LCBnZW9tZXRyeSk7XG4gIGdsX1Bvc2l0aW9uID0gcCArIHZlYzQocHJvamVjdF9waXhlbF9zaXplX3RvX2NsaXBzcGFjZShvZmZzZXQueHkpLCAwLjAsIDAuMCk7XG4gIERFQ0tHTF9GSUxURVJfR0xfUE9TSVRJT04oZ2xfUG9zaXRpb24sIGdlb21ldHJ5KTtcblxuICAvLyBDb2xvclxuICB2Q29sb3IgPSB2ZWM0KGluc3RhbmNlQ29sb3JzLnJnYiwgaW5zdGFuY2VDb2xvcnMuYSAqIG9wYWNpdHkpIC8gMjU1LjtcbiAgREVDS0dMX0ZJTFRFUl9DT0xPUih2Q29sb3IsIGdlb21ldHJ5KTtcblxuICBzb3VyY2VUb1RhcmdldCA9IHBvc2l0aW9ucy54ICogbGVuZ3RoKHNvdXJjZSAtIHRhcmdldCkgKiBOVU1fUEFSVFMgLSBjdXJyZW50VGltZSAqIFNQRUVEICsgaW5zdGFuY2VTdGFnZ2VyaW5nOyBcbn1cbmA7XG4iXX0=","/*\n * Copyright 2022 FlowmapBlue\n * Copyright 2018-2020 Teralytics, modified by FlowmapBlue\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nexport default `\\\n#define SHADER_NAME animated-flow-lines-layer-fragment-shader\n\nprecision highp float;\n\nuniform float animationTailLength;\n\nvarying vec4 vColor;\nvarying float sourceToTarget;\nvarying vec2 uv;\n                                   \nvoid main(void) {\n  geometry.uv = uv;\n\n  gl_FragColor = vec4(vColor.xyz, vColor.w * smoothstep(1.0 - animationTailLength, 1.0, fract(sourceToTarget)));\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n`;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQW5pbWF0ZWRGbG93TGluZXNMYXllckZyYWdtZW50Lmdsc2wuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvQW5pbWF0ZWRGbG93TGluZXNMYXllci9BbmltYXRlZEZsb3dMaW5lc0xheWVyRnJhZ21lbnQuZ2xzbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7OztHQWdCRztBQUVILGVBQWU7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQWtCZCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAyMDIyIEZsb3dtYXBCbHVlXG4gKiBDb3B5cmlnaHQgMjAxOC0yMDIwIFRlcmFseXRpY3MsIG1vZGlmaWVkIGJ5IEZsb3dtYXBCbHVlXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKlxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGBcXFxuI2RlZmluZSBTSEFERVJfTkFNRSBhbmltYXRlZC1mbG93LWxpbmVzLWxheWVyLWZyYWdtZW50LXNoYWRlclxuXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG5cbnVuaWZvcm0gZmxvYXQgYW5pbWF0aW9uVGFpbExlbmd0aDtcblxudmFyeWluZyB2ZWM0IHZDb2xvcjtcbnZhcnlpbmcgZmxvYXQgc291cmNlVG9UYXJnZXQ7XG52YXJ5aW5nIHZlYzIgdXY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxudm9pZCBtYWluKHZvaWQpIHtcbiAgZ2VvbWV0cnkudXYgPSB1djtcblxuICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHZDb2xvci54eXosIHZDb2xvci53ICogc21vb3Roc3RlcCgxLjAgLSBhbmltYXRpb25UYWlsTGVuZ3RoLCAxLjAsIGZyYWN0KHNvdXJjZVRvVGFyZ2V0KSkpO1xuXG4gIERFQ0tHTF9GSUxURVJfQ09MT1IoZ2xfRnJhZ0NvbG9yLCBnZW9tZXRyeSk7XG59XG5gO1xuIl19","/*\n * Copyright 2022 FlowmapBlue\n * Copyright 2018-2020 Teralytics, modified by FlowmapBlue\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nimport { Layer, picking, project32 } from '@deck.gl/core';\nimport GL from '@luma.gl/constants';\nimport { Geometry, Model } from '@luma.gl/core';\nimport FragmentShader from './FlowLinesLayerFragment.glsl';\nimport VertexShader from './FlowLinesLayerVertex.glsl';\nconst DEFAULT_COLOR = [0, 132, 193, 255];\nconst INNER_SIDE_OUTLINE_THICKNESS = 1;\n// source_target_mix, perpendicular_offset_in_thickness_units, direction_of_travel_offset_in_thickness_units\n// prettier-ignore\nconst POSITIONS = [\n    1, 0, 0,\n    1, 2, -3,\n    1, 1, -3,\n    1, 0, 0,\n    1, 1, -3,\n    0, 1, 0,\n    1, 0, 0,\n    0, 1, 0,\n    0, 0, 0, // 4\n];\n/**\n                                    1\n                                    ··\n                                    · ··\n                                    ·    ··\n     3                            2 ·      ··\n      ·······························        ··\n      · ·······                       ····      ··\n      ·       ········                   ·····     ··\n      ·               ···············        ·····   ··\n      ·                             ········      ········\n      ·                                     ················\n    4 ························································  0\n\n */\nfunction getOutlinePixelOffsets(tout, tin) {\n    // perpendicular_offset_in_pixels, direction_of_travel_offset_in_pixels, fill_outline_color_mix\n    // prettier-ignore\n    return ([\n        -tin, 2 * tout, 1,\n        2 * tout, -tout, 1,\n        tout, -tout, 1,\n        -tin, 2 * tout, 1,\n        tout, -tout, 1,\n        tout, -tout, 1,\n        -tin, 2 * tout, 1,\n        tout, -tout, 1,\n        -tin, -tout, 1, // 4\n    ]);\n}\n// prettier-ignore\nconst ZEROES = [\n    0, 0, 0,\n    0, 0, 0,\n    0, 0, 0,\n    0, 0, 0,\n    0, 0, 0,\n    0, 0, 0,\n    0, 0, 0,\n    0, 0, 0,\n    0, 0, 0,\n];\nclass FlowLinesLayer extends Layer {\n    // props!: Props;\n    constructor(props) {\n        super(props);\n    }\n    getShaders() {\n        return super.getShaders({\n            vs: VertexShader,\n            fs: FragmentShader,\n            modules: [project32, picking],\n            shaderCache: this.context.shaderCache,\n        });\n    }\n    initializeState() {\n        const { attributeManager } = this.state;\n        attributeManager.addInstanced({\n            instanceSourcePositions: {\n                accessor: 'getSourcePosition',\n                size: 3,\n                transition: false,\n                type: GL.DOUBLE,\n            },\n            instanceTargetPositions: {\n                accessor: 'getTargetPosition',\n                size: 3,\n                transition: false,\n                type: GL.DOUBLE,\n            },\n            instanceThickness: {\n                accessor: 'getThickness',\n                size: 1,\n                transition: false,\n            },\n            instanceEndpointOffsets: {\n                accessor: 'getEndpointOffsets',\n                size: 2,\n                transition: false,\n            },\n            instanceColors: {\n                accessor: 'getColor',\n                size: 4,\n                type: GL.UNSIGNED_BYTE,\n                transition: false,\n            },\n            instancePickable: {\n                accessor: 'getPickable',\n                size: 1,\n                transition: false,\n            },\n        });\n    }\n    updateState({ props, oldProps, changeFlags }) {\n        super.updateState({ props, oldProps, changeFlags });\n        if (changeFlags.extensionsChanged) {\n            const { gl } = this.context;\n            if (this.state.model) {\n                this.state.model.delete();\n            }\n            this.setState({ model: this._getModel(gl) });\n            this.getAttributeManager().invalidateAll();\n        }\n    }\n    draw({ uniforms }) {\n        const { gl } = this.context;\n        const { outlineColor, thicknessUnit } = this.props;\n        gl.lineWidth(1);\n        this.state.model\n            .setUniforms(Object.assign(Object.assign({}, uniforms), { outlineColor: outlineColor.map((x) => x / 255), \n            // outlineColor: [1, 0, 0, 1],\n            thicknessUnit: thicknessUnit * 2.0, gap: 0.5 }))\n            .draw();\n    }\n    _getModel(gl) {\n        let positions = [];\n        let pixelOffsets = [];\n        const { drawOutline, outlineThickness } = this.props;\n        if (drawOutline) {\n            // source_target_mix, perpendicular_offset_in_thickness_units, direction_of_travel_offset_in_thickness_units\n            positions = positions.concat(POSITIONS);\n            const tout = outlineThickness;\n            const tin = INNER_SIDE_OUTLINE_THICKNESS; // the outline shouldn't cover the opposite arrow\n            pixelOffsets = pixelOffsets.concat(getOutlinePixelOffsets(tout, tin));\n        }\n        positions = positions.concat(POSITIONS);\n        pixelOffsets = pixelOffsets.concat(ZEROES);\n        return new Model(gl, Object.assign(Object.assign({ id: this.props.id }, this.getShaders()), { geometry: new Geometry({\n                drawMode: GL.TRIANGLES,\n                attributes: {\n                    positions: new Float32Array(positions),\n                    normals: new Float32Array(pixelOffsets),\n                },\n            }), isInstanced: true, shaderCache: this.context.shaderCache }));\n    }\n}\nFlowLinesLayer.layerName = 'FlowLinesLayer';\nFlowLinesLayer.defaultProps = {\n    getSourcePosition: { type: 'accessor', value: (d) => [0, 0] },\n    getTargetPosition: { type: 'accessor', value: (d) => [0, 0] },\n    getColor: { type: 'accessor', value: DEFAULT_COLOR },\n    getThickness: { type: 'accessor', value: (d) => d.count },\n    getPickable: { type: 'accessor', value: (d) => 1.0 },\n    drawOutline: true,\n    thicknessUnit: 12,\n    outlineThickness: 1,\n    outlineColor: [255, 255, 255, 255],\n    parameters: {\n        depthTest: false,\n    },\n};\nexport default FlowLinesLayer;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmxvd0xpbmVzTGF5ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvRmxvd0xpbmVzTGF5ZXIvRmxvd0xpbmVzTGF5ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7R0FnQkc7QUFFSCxPQUFPLEVBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDeEQsT0FBTyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDcEMsT0FBTyxFQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDOUMsT0FBTyxjQUFjLE1BQU0sK0JBQStCLENBQUM7QUFDM0QsT0FBTyxZQUFZLE1BQU0sNkJBQTZCLENBQUM7QUFzQnZELE1BQU0sYUFBYSxHQUFTLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDL0MsTUFBTSw0QkFBNEIsR0FBRyxDQUFDLENBQUM7QUFFdkMsNEdBQTRHO0FBQzVHLGtCQUFrQjtBQUNsQixNQUFNLFNBQVMsR0FBRztJQUNoQixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDUCxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNSLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBR1IsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO0lBQ1AsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDUixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFHUCxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDUCxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDUCxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRyxJQUFJO0NBQ2YsQ0FBQztBQUNGOzs7Ozs7Ozs7Ozs7OztHQWNHO0FBRUgsU0FBUyxzQkFBc0IsQ0FBQyxJQUFZLEVBQUUsR0FBVztJQUN2RCwrRkFBK0Y7SUFDL0Ysa0JBQWtCO0lBQ2xCLE9BQU8sQ0FBQztRQUVOLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNmLENBQUMsR0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNoQixJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUVkLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNmLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ2QsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7UUFFZCxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUMsSUFBSSxFQUFFLENBQUM7UUFDZixJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNkLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRyxJQUFJO0tBQ3RCLENBQUMsQ0FBQztBQUNMLENBQUM7QUFFRCxrQkFBa0I7QUFDbEIsTUFBTSxNQUFNLEdBQUc7SUFDYixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDUCxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDUCxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDUCxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDUCxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDUCxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDUCxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDUCxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDUCxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7Q0FDUixDQUFDO0FBRUYsTUFBTSxjQUFrQixTQUFRLEtBQUs7SUFnQm5DLGlCQUFpQjtJQUVqQixZQUFZLEtBQWU7UUFDekIsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2YsQ0FBQztJQUVELFVBQVU7UUFDUixPQUFPLEtBQUssQ0FBQyxVQUFVLENBQUM7WUFDdEIsRUFBRSxFQUFFLFlBQVk7WUFDaEIsRUFBRSxFQUFFLGNBQWM7WUFDbEIsT0FBTyxFQUFFLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQztZQUM3QixXQUFXLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXO1NBQ3RDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxlQUFlO1FBQ2IsTUFBTSxFQUFDLGdCQUFnQixFQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztRQUV0QyxnQkFBZ0IsQ0FBQyxZQUFZLENBQUM7WUFDNUIsdUJBQXVCLEVBQUU7Z0JBQ3ZCLFFBQVEsRUFBRSxtQkFBbUI7Z0JBQzdCLElBQUksRUFBRSxDQUFDO2dCQUNQLFVBQVUsRUFBRSxLQUFLO2dCQUNqQixJQUFJLEVBQUUsRUFBRSxDQUFDLE1BQU07YUFDaEI7WUFDRCx1QkFBdUIsRUFBRTtnQkFDdkIsUUFBUSxFQUFFLG1CQUFtQjtnQkFDN0IsSUFBSSxFQUFFLENBQUM7Z0JBQ1AsVUFBVSxFQUFFLEtBQUs7Z0JBQ2pCLElBQUksRUFBRSxFQUFFLENBQUMsTUFBTTthQUNoQjtZQUNELGlCQUFpQixFQUFFO2dCQUNqQixRQUFRLEVBQUUsY0FBYztnQkFDeEIsSUFBSSxFQUFFLENBQUM7Z0JBQ1AsVUFBVSxFQUFFLEtBQUs7YUFDbEI7WUFDRCx1QkFBdUIsRUFBRTtnQkFDdkIsUUFBUSxFQUFFLG9CQUFvQjtnQkFDOUIsSUFBSSxFQUFFLENBQUM7Z0JBQ1AsVUFBVSxFQUFFLEtBQUs7YUFDbEI7WUFDRCxjQUFjLEVBQUU7Z0JBQ2QsUUFBUSxFQUFFLFVBQVU7Z0JBQ3BCLElBQUksRUFBRSxDQUFDO2dCQUNQLElBQUksRUFBRSxFQUFFLENBQUMsYUFBYTtnQkFDdEIsVUFBVSxFQUFFLEtBQUs7YUFDbEI7WUFDRCxnQkFBZ0IsRUFBRTtnQkFDaEIsUUFBUSxFQUFFLGFBQWE7Z0JBQ3ZCLElBQUksRUFBRSxDQUFDO2dCQUNQLFVBQVUsRUFBRSxLQUFLO2FBQ2xCO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELFdBQVcsQ0FBQyxFQUFDLEtBQUssRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFzQjtRQUM3RCxLQUFLLENBQUMsV0FBVyxDQUFDLEVBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUMsQ0FBQyxDQUFDO1FBRWxELElBQUksV0FBVyxDQUFDLGlCQUFpQixFQUFFO1lBQ2pDLE1BQU0sRUFBQyxFQUFFLEVBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQzFCLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUU7Z0JBQ3BCLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO2FBQzNCO1lBQ0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxFQUFDLENBQUMsQ0FBQztZQUMzQyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxhQUFhLEVBQUUsQ0FBQztTQUM1QztJQUNILENBQUM7SUFFRCxJQUFJLENBQUMsRUFBQyxRQUFRLEVBQXNCO1FBQ2xDLE1BQU0sRUFBQyxFQUFFLEVBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQzFCLE1BQU0sRUFBQyxZQUFZLEVBQUUsYUFBYSxFQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztRQUNqRCxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2hCLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSzthQUNiLFdBQVcsaUNBQ1AsUUFBUSxLQUNYLFlBQVksRUFBRSxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBUyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO1lBQ3RELDhCQUE4QjtZQUM5QixhQUFhLEVBQUUsYUFBYSxHQUFHLEdBQUcsRUFDbEMsR0FBRyxFQUFFLEdBQUcsSUFDUjthQUNELElBQUksRUFBRSxDQUFDO0lBQ1osQ0FBQztJQUVELFNBQVMsQ0FBQyxFQUF5QjtRQUNqQyxJQUFJLFNBQVMsR0FBYSxFQUFFLENBQUM7UUFDN0IsSUFBSSxZQUFZLEdBQWEsRUFBRSxDQUFDO1FBRWhDLE1BQU0sRUFBQyxXQUFXLEVBQUUsZ0JBQWdCLEVBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ25ELElBQUksV0FBVyxFQUFFO1lBQ2YsNEdBQTRHO1lBQzVHLFNBQVMsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3hDLE1BQU0sSUFBSSxHQUFHLGdCQUFnQixDQUFDO1lBQzlCLE1BQU0sR0FBRyxHQUFHLDRCQUE0QixDQUFDLENBQUMsaURBQWlEO1lBQzNGLFlBQVksR0FBRyxZQUFZLENBQUMsTUFBTSxDQUFDLHNCQUFzQixDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQ3ZFO1FBRUQsU0FBUyxHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDeEMsWUFBWSxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7UUFFM0MsT0FBTyxJQUFJLEtBQUssQ0FBQyxFQUFFLGdDQUNqQixFQUFFLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLElBQ2QsSUFBSSxDQUFDLFVBQVUsRUFBRSxLQUNwQixRQUFRLEVBQUUsSUFBSSxRQUFRLENBQUM7Z0JBQ3JCLFFBQVEsRUFBRSxFQUFFLENBQUMsU0FBUztnQkFDdEIsVUFBVSxFQUFFO29CQUNWLFNBQVMsRUFBRSxJQUFJLFlBQVksQ0FBQyxTQUFTLENBQUM7b0JBQ3RDLE9BQU8sRUFBRSxJQUFJLFlBQVksQ0FBQyxZQUFZLENBQUM7aUJBQ3hDO2FBQ0YsQ0FBQyxFQUNGLFdBQVcsRUFBRSxJQUFJLEVBQ2pCLFdBQVcsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsSUFDckMsQ0FBQztJQUNMLENBQUM7O0FBL0hNLHdCQUFTLEdBQUcsZ0JBQWdCLENBQUM7QUFDN0IsMkJBQVksR0FBRztJQUNwQixpQkFBaUIsRUFBRSxFQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBQztJQUNoRSxpQkFBaUIsRUFBRSxFQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBQztJQUNoRSxRQUFRLEVBQUUsRUFBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxhQUFhLEVBQUM7SUFDbEQsWUFBWSxFQUFFLEVBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUM7SUFDNUQsV0FBVyxFQUFFLEVBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLEdBQUcsRUFBQztJQUN2RCxXQUFXLEVBQUUsSUFBSTtJQUNqQixhQUFhLEVBQUUsRUFBRTtJQUNqQixnQkFBZ0IsRUFBRSxDQUFDO0lBQ25CLFlBQVksRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztJQUNsQyxVQUFVLEVBQUU7UUFDVixTQUFTLEVBQUUsS0FBSztLQUNqQjtDQUNGLENBQUM7QUFvSEosZUFBZSxjQUFjLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMjIgRmxvd21hcEJsdWVcbiAqIENvcHlyaWdodCAyMDE4LTIwMjAgVGVyYWx5dGljcywgbW9kaWZpZWQgYnkgRmxvd21hcEJsdWVcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqXG4gKi9cblxuaW1wb3J0IHtMYXllciwgcGlja2luZywgcHJvamVjdDMyfSBmcm9tICdAZGVjay5nbC9jb3JlJztcbmltcG9ydCBHTCBmcm9tICdAbHVtYS5nbC9jb25zdGFudHMnO1xuaW1wb3J0IHtHZW9tZXRyeSwgTW9kZWx9IGZyb20gJ0BsdW1hLmdsL2NvcmUnO1xuaW1wb3J0IEZyYWdtZW50U2hhZGVyIGZyb20gJy4vRmxvd0xpbmVzTGF5ZXJGcmFnbWVudC5nbHNsJztcbmltcG9ydCBWZXJ0ZXhTaGFkZXIgZnJvbSAnLi9GbG93TGluZXNMYXllclZlcnRleC5nbHNsJztcbmltcG9ydCB7Rmxvd0xpbmVzTGF5ZXJBdHRyaWJ1dGVzLCBSR0JBfSBmcm9tICdAZmxvd21hcC5nbC9kYXRhJztcbmltcG9ydCB7TGF5ZXJQcm9wc30gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzPEY+IGV4dGVuZHMgTGF5ZXJQcm9wcyB7XG4gIGlkOiBzdHJpbmc7XG4gIG9wYWNpdHk/OiBudW1iZXI7XG4gIHBpY2thYmxlPzogYm9vbGVhbjtcbiAgdXBkYXRlVHJpZ2dlcnM/OiB7W2tleTogc3RyaW5nXTogUmVjb3JkPHN0cmluZywgdW5rbm93bj59O1xuICBkYXRhOiBGW10gfCBGbG93TGluZXNMYXllckF0dHJpYnV0ZXM7XG4gIGRyYXdPdXRsaW5lOiBib29sZWFuO1xuICBvdXRsaW5lQ29sb3I/OiBSR0JBO1xuICBvdXRsaW5lVGhpY2tuZXNzPzogbnVtYmVyO1xuICB0aGlja25lc3NVbml0PzogbnVtYmVyO1xuICBnZXRTb3VyY2VQb3NpdGlvbj86IChkOiBGKSA9PiBbbnVtYmVyLCBudW1iZXJdO1xuICBnZXRUYXJnZXRQb3NpdGlvbj86IChkOiBGKSA9PiBbbnVtYmVyLCBudW1iZXJdO1xuICBnZXRDb2xvcj86IChkOiBGKSA9PiBSR0JBO1xuICBnZXRUaGlja25lc3M/OiAoZDogRikgPT4gbnVtYmVyO1xuICBnZXRQaWNrYWJsZT86IChkOiBGLCB7aW5kZXh9OiB7aW5kZXg6IG51bWJlcn0pID0+IG51bWJlcjsgLy8gPj0gMS4wIC0+IHRydWVcbiAgZ2V0RW5kcG9pbnRPZmZzZXRzPzogKGQ6IEYpID0+IFtudW1iZXIsIG51bWJlcl07XG59XG5cbmNvbnN0IERFRkFVTFRfQ09MT1I6IFJHQkEgPSBbMCwgMTMyLCAxOTMsIDI1NV07XG5jb25zdCBJTk5FUl9TSURFX09VVExJTkVfVEhJQ0tORVNTID0gMTtcblxuLy8gc291cmNlX3RhcmdldF9taXgsIHBlcnBlbmRpY3VsYXJfb2Zmc2V0X2luX3RoaWNrbmVzc191bml0cywgZGlyZWN0aW9uX29mX3RyYXZlbF9vZmZzZXRfaW5fdGhpY2tuZXNzX3VuaXRzXG4vLyBwcmV0dGllci1pZ25vcmVcbmNvbnN0IFBPU0lUSU9OUyA9IFtcbiAgMSwgMCwgMCwgIC8vIDBcbiAgMSwgMiwgLTMsIC8vIDFcbiAgMSwgMSwgLTMsIC8vIDJcblxuXG4gIDEsIDAsIDAsICAvLyAwXG4gIDEsIDEsIC0zLCAvLyAyXG4gIDAsIDEsIDAsICAvLyAzXG5cblxuICAxLCAwLCAwLCAgLy8gMFxuICAwLCAxLCAwLCAgLy8gM1xuICAwLCAwLCAwLCAgLy8gNFxuXTtcbi8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgwrfCt1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgwrcgwrfCt1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgwrcgICAgwrfCt1xuICAgICAzICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIgwrcgICAgICDCt8K3XG4gICAgICDCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCtyAgICAgICAgwrfCt1xuICAgICAgwrcgwrfCt8K3wrfCt8K3wrcgICAgICAgICAgICAgICAgICAgICAgIMK3wrfCt8K3ICAgICAgwrfCt1xuICAgICAgwrcgICAgICAgwrfCt8K3wrfCt8K3wrfCtyAgICAgICAgICAgICAgICAgICDCt8K3wrfCt8K3ICAgICDCt8K3XG4gICAgICDCtyAgICAgICAgICAgICAgIMK3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCtyAgICAgICAgwrfCt8K3wrfCtyAgIMK3wrdcbiAgICAgIMK3ICAgICAgICAgICAgICAgICAgICAgICAgICAgICDCt8K3wrfCt8K3wrfCt8K3ICAgICAgwrfCt8K3wrfCt8K3wrfCt1xuICAgICAgwrcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgwrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrdcbiAgICA0IMK3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrfCt8K3wrcgIDBcblxuICovXG5cbmZ1bmN0aW9uIGdldE91dGxpbmVQaXhlbE9mZnNldHModG91dDogbnVtYmVyLCB0aW46IG51bWJlcikge1xuICAvLyBwZXJwZW5kaWN1bGFyX29mZnNldF9pbl9waXhlbHMsIGRpcmVjdGlvbl9vZl90cmF2ZWxfb2Zmc2V0X2luX3BpeGVscywgZmlsbF9vdXRsaW5lX2NvbG9yX21peFxuICAvLyBwcmV0dGllci1pZ25vcmVcbiAgcmV0dXJuIChbXG5cbiAgICAtdGluLCAyKnRvdXQsIDEsICAgLy8gMFxuICAgIDIqdG91dCwgLXRvdXQsIDEsICAvLyAxXG4gICAgdG91dCwgLXRvdXQsIDEsICAgLy8gMlxuXG4gICAgLXRpbiwgMip0b3V0LCAxLCAvLyAwXG4gICAgdG91dCwgLXRvdXQsIDEsICAvLyAyXG4gICAgdG91dCwgLXRvdXQsIDEsICAvLyAzXG5cbiAgICAtdGluLCAyKnRvdXQsIDEsIC8vIDBcbiAgICB0b3V0LCAtdG91dCwgMSwgIC8vIDNcbiAgICAtdGluLCAtdG91dCwgMSwgIC8vIDRcbiAgXSk7XG59XG5cbi8vIHByZXR0aWVyLWlnbm9yZVxuY29uc3QgWkVST0VTID0gW1xuICAwLCAwLCAwLFxuICAwLCAwLCAwLFxuICAwLCAwLCAwLFxuICAwLCAwLCAwLFxuICAwLCAwLCAwLFxuICAwLCAwLCAwLFxuICAwLCAwLCAwLFxuICAwLCAwLCAwLFxuICAwLCAwLCAwLFxuXTtcblxuY2xhc3MgRmxvd0xpbmVzTGF5ZXI8Rj4gZXh0ZW5kcyBMYXllciB7XG4gIHN0YXRpYyBsYXllck5hbWUgPSAnRmxvd0xpbmVzTGF5ZXInO1xuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGdldFNvdXJjZVBvc2l0aW9uOiB7dHlwZTogJ2FjY2Vzc29yJywgdmFsdWU6IChkOiBhbnkpID0+IFswLCAwXX0sXG4gICAgZ2V0VGFyZ2V0UG9zaXRpb246IHt0eXBlOiAnYWNjZXNzb3InLCB2YWx1ZTogKGQ6IGFueSkgPT4gWzAsIDBdfSxcbiAgICBnZXRDb2xvcjoge3R5cGU6ICdhY2Nlc3NvcicsIHZhbHVlOiBERUZBVUxUX0NPTE9SfSxcbiAgICBnZXRUaGlja25lc3M6IHt0eXBlOiAnYWNjZXNzb3InLCB2YWx1ZTogKGQ6IGFueSkgPT4gZC5jb3VudH0sIC8vIDAuLjAuNVxuICAgIGdldFBpY2thYmxlOiB7dHlwZTogJ2FjY2Vzc29yJywgdmFsdWU6IChkOiBhbnkpID0+IDEuMH0sXG4gICAgZHJhd091dGxpbmU6IHRydWUsXG4gICAgdGhpY2tuZXNzVW5pdDogMTIsXG4gICAgb3V0bGluZVRoaWNrbmVzczogMSxcbiAgICBvdXRsaW5lQ29sb3I6IFsyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIGRlcHRoVGVzdDogZmFsc2UsXG4gICAgfSxcbiAgfTtcbiAgLy8gcHJvcHMhOiBQcm9wcztcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHM8Rj4pIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gIH1cblxuICBnZXRTaGFkZXJzKCk6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHtcbiAgICByZXR1cm4gc3VwZXIuZ2V0U2hhZGVycyh7XG4gICAgICB2czogVmVydGV4U2hhZGVyLFxuICAgICAgZnM6IEZyYWdtZW50U2hhZGVyLFxuICAgICAgbW9kdWxlczogW3Byb2plY3QzMiwgcGlja2luZ10sXG4gICAgICBzaGFkZXJDYWNoZTogdGhpcy5jb250ZXh0LnNoYWRlckNhY2hlLFxuICAgIH0pO1xuICB9XG5cbiAgaW5pdGlhbGl6ZVN0YXRlKCk6IHZvaWQge1xuICAgIGNvbnN0IHthdHRyaWJ1dGVNYW5hZ2VyfSA9IHRoaXMuc3RhdGU7XG5cbiAgICBhdHRyaWJ1dGVNYW5hZ2VyLmFkZEluc3RhbmNlZCh7XG4gICAgICBpbnN0YW5jZVNvdXJjZVBvc2l0aW9uczoge1xuICAgICAgICBhY2Nlc3NvcjogJ2dldFNvdXJjZVBvc2l0aW9uJyxcbiAgICAgICAgc2l6ZTogMyxcbiAgICAgICAgdHJhbnNpdGlvbjogZmFsc2UsXG4gICAgICAgIHR5cGU6IEdMLkRPVUJMRSxcbiAgICAgIH0sXG4gICAgICBpbnN0YW5jZVRhcmdldFBvc2l0aW9uczoge1xuICAgICAgICBhY2Nlc3NvcjogJ2dldFRhcmdldFBvc2l0aW9uJyxcbiAgICAgICAgc2l6ZTogMyxcbiAgICAgICAgdHJhbnNpdGlvbjogZmFsc2UsXG4gICAgICAgIHR5cGU6IEdMLkRPVUJMRSxcbiAgICAgIH0sXG4gICAgICBpbnN0YW5jZVRoaWNrbmVzczoge1xuICAgICAgICBhY2Nlc3NvcjogJ2dldFRoaWNrbmVzcycsXG4gICAgICAgIHNpemU6IDEsXG4gICAgICAgIHRyYW5zaXRpb246IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGluc3RhbmNlRW5kcG9pbnRPZmZzZXRzOiB7XG4gICAgICAgIGFjY2Vzc29yOiAnZ2V0RW5kcG9pbnRPZmZzZXRzJyxcbiAgICAgICAgc2l6ZTogMixcbiAgICAgICAgdHJhbnNpdGlvbjogZmFsc2UsXG4gICAgICB9LFxuICAgICAgaW5zdGFuY2VDb2xvcnM6IHtcbiAgICAgICAgYWNjZXNzb3I6ICdnZXRDb2xvcicsXG4gICAgICAgIHNpemU6IDQsXG4gICAgICAgIHR5cGU6IEdMLlVOU0lHTkVEX0JZVEUsXG4gICAgICAgIHRyYW5zaXRpb246IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGluc3RhbmNlUGlja2FibGU6IHtcbiAgICAgICAgYWNjZXNzb3I6ICdnZXRQaWNrYWJsZScsXG4gICAgICAgIHNpemU6IDEsXG4gICAgICAgIHRyYW5zaXRpb246IGZhbHNlLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZVN0YXRlKHtwcm9wcywgb2xkUHJvcHMsIGNoYW5nZUZsYWdzfTogUmVjb3JkPHN0cmluZywgYW55Pik6IHZvaWQge1xuICAgIHN1cGVyLnVwZGF0ZVN0YXRlKHtwcm9wcywgb2xkUHJvcHMsIGNoYW5nZUZsYWdzfSk7XG5cbiAgICBpZiAoY2hhbmdlRmxhZ3MuZXh0ZW5zaW9uc0NoYW5nZWQpIHtcbiAgICAgIGNvbnN0IHtnbH0gPSB0aGlzLmNvbnRleHQ7XG4gICAgICBpZiAodGhpcy5zdGF0ZS5tb2RlbCkge1xuICAgICAgICB0aGlzLnN0YXRlLm1vZGVsLmRlbGV0ZSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7bW9kZWw6IHRoaXMuX2dldE1vZGVsKGdsKX0pO1xuICAgICAgdGhpcy5nZXRBdHRyaWJ1dGVNYW5hZ2VyKCkuaW52YWxpZGF0ZUFsbCgpO1xuICAgIH1cbiAgfVxuXG4gIGRyYXcoe3VuaWZvcm1zfTogUmVjb3JkPHN0cmluZywgYW55Pik6IHZvaWQge1xuICAgIGNvbnN0IHtnbH0gPSB0aGlzLmNvbnRleHQ7XG4gICAgY29uc3Qge291dGxpbmVDb2xvciwgdGhpY2tuZXNzVW5pdH0gPSB0aGlzLnByb3BzO1xuICAgIGdsLmxpbmVXaWR0aCgxKTtcbiAgICB0aGlzLnN0YXRlLm1vZGVsXG4gICAgICAuc2V0VW5pZm9ybXMoe1xuICAgICAgICAuLi51bmlmb3JtcyxcbiAgICAgICAgb3V0bGluZUNvbG9yOiBvdXRsaW5lQ29sb3IubWFwKCh4OiBudW1iZXIpID0+IHggLyAyNTUpLFxuICAgICAgICAvLyBvdXRsaW5lQ29sb3I6IFsxLCAwLCAwLCAxXSxcbiAgICAgICAgdGhpY2tuZXNzVW5pdDogdGhpY2tuZXNzVW5pdCAqIDIuMCxcbiAgICAgICAgZ2FwOiAwLjUsXG4gICAgICB9KVxuICAgICAgLmRyYXcoKTtcbiAgfVxuXG4gIF9nZXRNb2RlbChnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KTogUmVjb3JkPHN0cmluZywgYW55PiB7XG4gICAgbGV0IHBvc2l0aW9uczogbnVtYmVyW10gPSBbXTtcbiAgICBsZXQgcGl4ZWxPZmZzZXRzOiBudW1iZXJbXSA9IFtdO1xuXG4gICAgY29uc3Qge2RyYXdPdXRsaW5lLCBvdXRsaW5lVGhpY2tuZXNzfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKGRyYXdPdXRsaW5lKSB7XG4gICAgICAvLyBzb3VyY2VfdGFyZ2V0X21peCwgcGVycGVuZGljdWxhcl9vZmZzZXRfaW5fdGhpY2tuZXNzX3VuaXRzLCBkaXJlY3Rpb25fb2ZfdHJhdmVsX29mZnNldF9pbl90aGlja25lc3NfdW5pdHNcbiAgICAgIHBvc2l0aW9ucyA9IHBvc2l0aW9ucy5jb25jYXQoUE9TSVRJT05TKTtcbiAgICAgIGNvbnN0IHRvdXQgPSBvdXRsaW5lVGhpY2tuZXNzO1xuICAgICAgY29uc3QgdGluID0gSU5ORVJfU0lERV9PVVRMSU5FX1RISUNLTkVTUzsgLy8gdGhlIG91dGxpbmUgc2hvdWxkbid0IGNvdmVyIHRoZSBvcHBvc2l0ZSBhcnJvd1xuICAgICAgcGl4ZWxPZmZzZXRzID0gcGl4ZWxPZmZzZXRzLmNvbmNhdChnZXRPdXRsaW5lUGl4ZWxPZmZzZXRzKHRvdXQsIHRpbikpO1xuICAgIH1cblxuICAgIHBvc2l0aW9ucyA9IHBvc2l0aW9ucy5jb25jYXQoUE9TSVRJT05TKTtcbiAgICBwaXhlbE9mZnNldHMgPSBwaXhlbE9mZnNldHMuY29uY2F0KFpFUk9FUyk7XG5cbiAgICByZXR1cm4gbmV3IE1vZGVsKGdsLCB7XG4gICAgICBpZDogdGhpcy5wcm9wcy5pZCxcbiAgICAgIC4uLnRoaXMuZ2V0U2hhZGVycygpLFxuICAgICAgZ2VvbWV0cnk6IG5ldyBHZW9tZXRyeSh7XG4gICAgICAgIGRyYXdNb2RlOiBHTC5UUklBTkdMRVMsXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICBwb3NpdGlvbnM6IG5ldyBGbG9hdDMyQXJyYXkocG9zaXRpb25zKSxcbiAgICAgICAgICBub3JtYWxzOiBuZXcgRmxvYXQzMkFycmF5KHBpeGVsT2Zmc2V0cyksXG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICAgIGlzSW5zdGFuY2VkOiB0cnVlLFxuICAgICAgc2hhZGVyQ2FjaGU6IHRoaXMuY29udGV4dC5zaGFkZXJDYWNoZSxcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGbG93TGluZXNMYXllcjtcbiJdfQ==","/*\n * Copyright 2022 FlowmapBlue\n * Copyright 2018-2020 Teralytics, modified by FlowmapBlue\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nexport default `\\\n#define SHADER_NAME flow-line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 instanceColors;\nattribute float instanceThickness;    // 0..0.5\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceEndpointOffsets;\nattribute float instancePickable;\n\nuniform vec4 outlineColor;\nuniform float thicknessUnit;\nuniform float gap;\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n  \n  // Position\n  vec4 source_commonspace;    \n  vec4 target_commonspace;\n  vec4 source = project_position_to_clipspace(instanceSourcePositions, instanceSourcePositions64Low, vec3(0.), source_commonspace);\n  vec4 target = project_position_to_clipspace(instanceTargetPositions, instanceTargetPositions64Low, vec3(0.), target_commonspace);\n\n  // linear interpolation of source & target to pick right coord\n  float sourceOrTarget = positions.x;\n  geometry.position = mix(source_commonspace, target_commonspace, sourceOrTarget);\n  uv = positions.xy;\n  geometry.uv = uv;\n  if (instancePickable > 0.5) {\n    geometry.pickingColor = instancePickingColors;\n  }\n  \n  // set the clamp limits in pixel size \n  float lengthCommon = length(target_commonspace - source_commonspace);    \n  vec2 offsetDistances = project_pixel_size(positions.yz) * thicknessUnit;\n  \n  vec2 limitedOffsetDistances = clamp(   \n    project_pixel_size(positions.yz) * thicknessUnit,\n    -lengthCommon*.8, lengthCommon*.8\n  );\n  float startOffsetCommon = project_pixel_size(instanceEndpointOffsets[0]);\n  float endOffsetCommon = project_pixel_size(instanceEndpointOffsets[1]);\n  float endpointOffset = mix(\n    clamp(startOffsetCommon, 0.0, lengthCommon*.2),\n    -clamp(endOffsetCommon, 0.0, lengthCommon*.2),\n    positions.x\n  );\n\n  vec2 flowlineDir = normalize(target_commonspace.xy - source_commonspace.xy);\n  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x);\n  vec2 normalsCommon = project_pixel_size(normals.xy);\n  float gapCommon = project_pixel_size(gap);\n  vec3 offsetCommon = vec3(\n    flowlineDir * (instanceThickness * limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -\n    perpendicularDir * (instanceThickness * limitedOffsetDistances[0] + gapCommon + normalsCommon.x),\n    0.0\n  );\n  \n  DECKGL_FILTER_SIZE(offsetCommon, geometry);\n  vec4 position_commonspace = mix(source_commonspace, target_commonspace, sourceOrTarget);\n  vec4 offset_commonspace = vec4(offsetCommon, 0.0);\n  gl_Position = project_common_position_to_clipspace(position_commonspace + offset_commonspace);\n      \n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  \n  vec4 fillColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  vColor = mix(fillColor, vec4(outlineColor.xyz, outlineColor.w * fillColor.w), normals.z);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmxvd0xpbmVzTGF5ZXJWZXJ0ZXguZ2xzbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9GbG93TGluZXNMYXllci9GbG93TGluZXNMYXllclZlcnRleC5nbHNsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7O0dBZ0JHO0FBQ0gsZUFBZTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQStFZCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAyMDIyIEZsb3dtYXBCbHVlXG4gKiBDb3B5cmlnaHQgMjAxOC0yMDIwIFRlcmFseXRpY3MsIG1vZGlmaWVkIGJ5IEZsb3dtYXBCbHVlXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKlxuICovXG5leHBvcnQgZGVmYXVsdCBgXFxcbiNkZWZpbmUgU0hBREVSX05BTUUgZmxvdy1saW5lLWxheWVyLXZlcnRleC1zaGFkZXJcblxuYXR0cmlidXRlIHZlYzMgcG9zaXRpb25zO1xuYXR0cmlidXRlIHZlYzMgbm9ybWFscztcbmF0dHJpYnV0ZSB2ZWM0IGluc3RhbmNlQ29sb3JzO1xuYXR0cmlidXRlIGZsb2F0IGluc3RhbmNlVGhpY2tuZXNzOyAgICAvLyAwLi4wLjVcbmF0dHJpYnV0ZSB2ZWMzIGluc3RhbmNlU291cmNlUG9zaXRpb25zO1xuYXR0cmlidXRlIHZlYzMgaW5zdGFuY2VUYXJnZXRQb3NpdGlvbnM7XG5hdHRyaWJ1dGUgdmVjMyBpbnN0YW5jZVNvdXJjZVBvc2l0aW9uczY0TG93O1xuYXR0cmlidXRlIHZlYzMgaW5zdGFuY2VUYXJnZXRQb3NpdGlvbnM2NExvdztcbmF0dHJpYnV0ZSB2ZWMzIGluc3RhbmNlUGlja2luZ0NvbG9ycztcbmF0dHJpYnV0ZSB2ZWMyIGluc3RhbmNlRW5kcG9pbnRPZmZzZXRzO1xuYXR0cmlidXRlIGZsb2F0IGluc3RhbmNlUGlja2FibGU7XG5cbnVuaWZvcm0gdmVjNCBvdXRsaW5lQ29sb3I7XG51bmlmb3JtIGZsb2F0IHRoaWNrbmVzc1VuaXQ7XG51bmlmb3JtIGZsb2F0IGdhcDtcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcblxudmFyeWluZyB2ZWM0IHZDb2xvcjtcbnZhcnlpbmcgdmVjMiB1djtcblxudm9pZCBtYWluKHZvaWQpIHtcbiAgZ2VvbWV0cnkud29ybGRQb3NpdGlvbiA9IGluc3RhbmNlU291cmNlUG9zaXRpb25zO1xuICBnZW9tZXRyeS53b3JsZFBvc2l0aW9uQWx0ID0gaW5zdGFuY2VUYXJnZXRQb3NpdGlvbnM7XG4gIFxuICAvLyBQb3NpdGlvblxuICB2ZWM0IHNvdXJjZV9jb21tb25zcGFjZTsgICAgXG4gIHZlYzQgdGFyZ2V0X2NvbW1vbnNwYWNlO1xuICB2ZWM0IHNvdXJjZSA9IHByb2plY3RfcG9zaXRpb25fdG9fY2xpcHNwYWNlKGluc3RhbmNlU291cmNlUG9zaXRpb25zLCBpbnN0YW5jZVNvdXJjZVBvc2l0aW9uczY0TG93LCB2ZWMzKDAuKSwgc291cmNlX2NvbW1vbnNwYWNlKTtcbiAgdmVjNCB0YXJnZXQgPSBwcm9qZWN0X3Bvc2l0aW9uX3RvX2NsaXBzcGFjZShpbnN0YW5jZVRhcmdldFBvc2l0aW9ucywgaW5zdGFuY2VUYXJnZXRQb3NpdGlvbnM2NExvdywgdmVjMygwLiksIHRhcmdldF9jb21tb25zcGFjZSk7XG5cbiAgLy8gbGluZWFyIGludGVycG9sYXRpb24gb2Ygc291cmNlICYgdGFyZ2V0IHRvIHBpY2sgcmlnaHQgY29vcmRcbiAgZmxvYXQgc291cmNlT3JUYXJnZXQgPSBwb3NpdGlvbnMueDtcbiAgZ2VvbWV0cnkucG9zaXRpb24gPSBtaXgoc291cmNlX2NvbW1vbnNwYWNlLCB0YXJnZXRfY29tbW9uc3BhY2UsIHNvdXJjZU9yVGFyZ2V0KTtcbiAgdXYgPSBwb3NpdGlvbnMueHk7XG4gIGdlb21ldHJ5LnV2ID0gdXY7XG4gIGlmIChpbnN0YW5jZVBpY2thYmxlID4gMC41KSB7XG4gICAgZ2VvbWV0cnkucGlja2luZ0NvbG9yID0gaW5zdGFuY2VQaWNraW5nQ29sb3JzO1xuICB9XG4gIFxuICAvLyBzZXQgdGhlIGNsYW1wIGxpbWl0cyBpbiBwaXhlbCBzaXplIFxuICBmbG9hdCBsZW5ndGhDb21tb24gPSBsZW5ndGgodGFyZ2V0X2NvbW1vbnNwYWNlIC0gc291cmNlX2NvbW1vbnNwYWNlKTsgICAgXG4gIHZlYzIgb2Zmc2V0RGlzdGFuY2VzID0gcHJvamVjdF9waXhlbF9zaXplKHBvc2l0aW9ucy55eikgKiB0aGlja25lc3NVbml0O1xuICBcbiAgdmVjMiBsaW1pdGVkT2Zmc2V0RGlzdGFuY2VzID0gY2xhbXAoICAgXG4gICAgcHJvamVjdF9waXhlbF9zaXplKHBvc2l0aW9ucy55eikgKiB0aGlja25lc3NVbml0LFxuICAgIC1sZW5ndGhDb21tb24qLjgsIGxlbmd0aENvbW1vbiouOFxuICApO1xuICBmbG9hdCBzdGFydE9mZnNldENvbW1vbiA9IHByb2plY3RfcGl4ZWxfc2l6ZShpbnN0YW5jZUVuZHBvaW50T2Zmc2V0c1swXSk7XG4gIGZsb2F0IGVuZE9mZnNldENvbW1vbiA9IHByb2plY3RfcGl4ZWxfc2l6ZShpbnN0YW5jZUVuZHBvaW50T2Zmc2V0c1sxXSk7XG4gIGZsb2F0IGVuZHBvaW50T2Zmc2V0ID0gbWl4KFxuICAgIGNsYW1wKHN0YXJ0T2Zmc2V0Q29tbW9uLCAwLjAsIGxlbmd0aENvbW1vbiouMiksXG4gICAgLWNsYW1wKGVuZE9mZnNldENvbW1vbiwgMC4wLCBsZW5ndGhDb21tb24qLjIpLFxuICAgIHBvc2l0aW9ucy54XG4gICk7XG5cbiAgdmVjMiBmbG93bGluZURpciA9IG5vcm1hbGl6ZSh0YXJnZXRfY29tbW9uc3BhY2UueHkgLSBzb3VyY2VfY29tbW9uc3BhY2UueHkpO1xuICB2ZWMyIHBlcnBlbmRpY3VsYXJEaXIgPSB2ZWMyKC1mbG93bGluZURpci55LCBmbG93bGluZURpci54KTtcbiAgdmVjMiBub3JtYWxzQ29tbW9uID0gcHJvamVjdF9waXhlbF9zaXplKG5vcm1hbHMueHkpO1xuICBmbG9hdCBnYXBDb21tb24gPSBwcm9qZWN0X3BpeGVsX3NpemUoZ2FwKTtcbiAgdmVjMyBvZmZzZXRDb21tb24gPSB2ZWMzKFxuICAgIGZsb3dsaW5lRGlyICogKGluc3RhbmNlVGhpY2tuZXNzICogbGltaXRlZE9mZnNldERpc3RhbmNlc1sxXSArIG5vcm1hbHNDb21tb24ueSArIGVuZHBvaW50T2Zmc2V0ICogMS4wNSkgLVxuICAgIHBlcnBlbmRpY3VsYXJEaXIgKiAoaW5zdGFuY2VUaGlja25lc3MgKiBsaW1pdGVkT2Zmc2V0RGlzdGFuY2VzWzBdICsgZ2FwQ29tbW9uICsgbm9ybWFsc0NvbW1vbi54KSxcbiAgICAwLjBcbiAgKTtcbiAgXG4gIERFQ0tHTF9GSUxURVJfU0laRShvZmZzZXRDb21tb24sIGdlb21ldHJ5KTtcbiAgdmVjNCBwb3NpdGlvbl9jb21tb25zcGFjZSA9IG1peChzb3VyY2VfY29tbW9uc3BhY2UsIHRhcmdldF9jb21tb25zcGFjZSwgc291cmNlT3JUYXJnZXQpO1xuICB2ZWM0IG9mZnNldF9jb21tb25zcGFjZSA9IHZlYzQob2Zmc2V0Q29tbW9uLCAwLjApO1xuICBnbF9Qb3NpdGlvbiA9IHByb2plY3RfY29tbW9uX3Bvc2l0aW9uX3RvX2NsaXBzcGFjZShwb3NpdGlvbl9jb21tb25zcGFjZSArIG9mZnNldF9jb21tb25zcGFjZSk7XG4gICAgICBcbiAgREVDS0dMX0ZJTFRFUl9HTF9QT1NJVElPTihnbF9Qb3NpdGlvbiwgZ2VvbWV0cnkpO1xuICBcbiAgdmVjNCBmaWxsQ29sb3IgPSB2ZWM0KGluc3RhbmNlQ29sb3JzLnJnYiwgaW5zdGFuY2VDb2xvcnMuYSAqIG9wYWNpdHkpIC8gMjU1LjtcbiAgdkNvbG9yID0gbWl4KGZpbGxDb2xvciwgdmVjNChvdXRsaW5lQ29sb3IueHl6LCBvdXRsaW5lQ29sb3IudyAqIGZpbGxDb2xvci53KSwgbm9ybWFscy56KTtcbiAgREVDS0dMX0ZJTFRFUl9DT0xPUih2Q29sb3IsIGdlb21ldHJ5KTtcbn1cbmA7XG4iXX0=","/*\n * Copyright 2022 FlowmapBlue\n * Copyright 2018-2020 Teralytics, modified by FlowmapBlue\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nexport default `\\\n#define SHADER_NAME flow-line-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\n\nvoid main(void) {\n  if (vColor.a == 0.0) {\n    discard;\n  }\n\n  geometry.uv = uv;\n  gl_FragColor = vColor;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n`;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmxvd0xpbmVzTGF5ZXJGcmFnbWVudC5nbHNsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL0Zsb3dMaW5lc0xheWVyL0Zsb3dMaW5lc0xheWVyRnJhZ21lbnQuZ2xzbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7OztHQWdCRztBQUNILGVBQWU7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBaUJkLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMjIgRmxvd21hcEJsdWVcbiAqIENvcHlyaWdodCAyMDE4LTIwMjAgVGVyYWx5dGljcywgbW9kaWZpZWQgYnkgRmxvd21hcEJsdWVcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGBcXFxuI2RlZmluZSBTSEFERVJfTkFNRSBmbG93LWxpbmUtbGF5ZXItZnJhZ21lbnQtc2hhZGVyXG5cbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcblxudmFyeWluZyB2ZWM0IHZDb2xvcjtcbnZhcnlpbmcgdmVjMiB1djtcblxudm9pZCBtYWluKHZvaWQpIHtcbiAgaWYgKHZDb2xvci5hID09IDAuMCkge1xuICAgIGRpc2NhcmQ7XG4gIH1cblxuICBnZW9tZXRyeS51diA9IHV2O1xuICBnbF9GcmFnQ29sb3IgPSB2Q29sb3I7XG4gIERFQ0tHTF9GSUxURVJfQ09MT1IoZ2xfRnJhZ0NvbG9yLCBnZW9tZXRyeSk7XG59XG5gO1xuIl19","/*\n * Copyright 2022 FlowmapBlue\n * Copyright 2018-2020 Teralytics, modified by FlowmapBlue\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nimport { Layer, picking, project32 } from '@deck.gl/core';\nimport GL from '@luma.gl/constants';\nimport { Geometry, Model } from '@luma.gl/core';\nimport FragmentShader from './FlowCirclesLayerFragment.glsl';\nimport VertexShader from './FlowCirclesLayerVertex.glsl';\nconst DEFAULT_COLOR = [0, 0, 0, 255];\nconst DEFAULT_EMPTY_COLOR = [255, 255, 255, 255];\nconst DEFAULT_OUTLINE_EMPTY_MIX = 0.4;\nclass FlowCirclesLayer extends Layer {\n    // props!: Props;\n    constructor(props) {\n        super(props);\n    }\n    getShaders() {\n        return super.getShaders({\n            vs: VertexShader,\n            fs: FragmentShader,\n            modules: [project32, picking],\n        });\n    }\n    initializeState() {\n        this.getAttributeManager().addInstanced({\n            instancePositions: {\n                size: 3,\n                type: GL.DOUBLE,\n                fp64: this.use64bitPositions(),\n                transition: true,\n                accessor: 'getPosition',\n            },\n            instanceInRadius: {\n                size: 1,\n                transition: true,\n                accessor: 'getInRadius',\n                defaultValue: 1,\n            },\n            instanceOutRadius: {\n                size: 1,\n                transition: true,\n                accessor: 'getOutRadius',\n                defaultValue: 1,\n            },\n            instanceColors: {\n                size: 4,\n                transition: true,\n                type: GL.UNSIGNED_BYTE,\n                accessor: 'getColor',\n                defaultValue: DEFAULT_COLOR,\n            },\n        });\n    }\n    updateState({ props, oldProps, changeFlags }) {\n        super.updateState({ props, oldProps, changeFlags });\n        if (changeFlags.extensionsChanged) {\n            const { gl } = this.context;\n            if (this.state.model) {\n                this.state.model.delete();\n            }\n            this.setState({ model: this._getModel(gl) });\n            this.getAttributeManager().invalidateAll();\n        }\n    }\n    draw({ uniforms }) {\n        const { emptyColor, outlineEmptyMix } = this.props;\n        this.state.model\n            .setUniforms(Object.assign(Object.assign({}, uniforms), { emptyColor,\n            outlineEmptyMix }))\n            .draw();\n    }\n    _getModel(gl) {\n        // a square that minimally cover the unit circle\n        const positions = [-1, -1, 0, 1, -1, 0, 1, 1, 0, -1, 1, 0];\n        return new Model(gl, Object.assign(this.getShaders(), {\n            id: this.props.id,\n            geometry: new Geometry({\n                drawMode: GL.TRIANGLE_FAN,\n                vertexCount: 4,\n                attributes: {\n                    positions: { size: 3, value: new Float32Array(positions) },\n                },\n            }),\n            isInstanced: true,\n        }));\n    }\n}\nFlowCirclesLayer.layerName = 'FlowCirclesLayer';\nFlowCirclesLayer.defaultProps = {\n    getColor: { type: 'accessor', value: DEFAULT_COLOR },\n    emptyColor: { type: 'accessor', value: DEFAULT_EMPTY_COLOR },\n    outlineEmptyMix: { type: 'accessor', value: DEFAULT_OUTLINE_EMPTY_MIX },\n    getPosition: { type: 'accessor', value: (d) => d.position },\n    getInRadius: { type: 'accessor', value: 1 },\n    getOutRadius: { type: 'accessor', value: 1 },\n    parameters: {\n        depthTest: false,\n    },\n};\nexport default FlowCirclesLayer;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmxvd0NpcmNsZXNMYXllci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9GbG93Q2lyY2xlc0xheWVyL0Zsb3dDaXJjbGVzTGF5ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7R0FnQkc7QUFFSCxPQUFPLEVBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDeEQsT0FBTyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDcEMsT0FBTyxFQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDOUMsT0FBTyxjQUFjLE1BQU0saUNBQWlDLENBQUM7QUFDN0QsT0FBTyxZQUFZLE1BQU0sK0JBQStCLENBQUM7QUFvQnpELE1BQU0sYUFBYSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDckMsTUFBTSxtQkFBbUIsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ2pELE1BQU0seUJBQXlCLEdBQUcsR0FBRyxDQUFDO0FBRXRDLE1BQU0sZ0JBQWlCLFNBQVEsS0FBSztJQWNsQyxpQkFBaUI7SUFFakIsWUFBWSxLQUFZO1FBQ3RCLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNmLENBQUM7SUFFRCxVQUFVO1FBQ1IsT0FBTyxLQUFLLENBQUMsVUFBVSxDQUFDO1lBQ3RCLEVBQUUsRUFBRSxZQUFZO1lBQ2hCLEVBQUUsRUFBRSxjQUFjO1lBQ2xCLE9BQU8sRUFBRSxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUM7U0FDOUIsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELGVBQWU7UUFDYixJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxZQUFZLENBQUM7WUFDdEMsaUJBQWlCLEVBQUU7Z0JBQ2pCLElBQUksRUFBRSxDQUFDO2dCQUNQ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QUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsYUFBYSxFQUFDO0lBQ2xELFVBQVUsRUFBRSxFQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLG1CQUFtQixFQUFDO0lBQzFELGVBQWUsRUFBRSxFQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLHlCQUF5QixFQUFDO0lBQ3JFLFdBQVcsRUFBRSxFQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBbUIsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBQztJQUMzRSxXQUFXLEVBQUUsRUFBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUM7SUFDekMsWUFBWSxFQUFFLEVBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFDO0lBQzFDLFVBQVUsRUFBRTtRQUNWLFNBQVMsRUFBRSxLQUFLO0tBQ2pCO0NBQ0YsQ0FBQztBQTBGSixlQUFlLGdCQUFnQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAyMDIyIEZsb3dtYXBCbHVlXG4gKiBDb3B5cmlnaHQgMjAxOC0yMDIwIFRlcmFseXRpY3MsIG1vZGlmaWVkIGJ5IEZsb3dtYXBCbHVlXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKlxuICovXG5cbmltcG9ydCB7TGF5ZXIsIHBpY2tpbmcsIHByb2plY3QzMn0gZnJvbSAnQGRlY2suZ2wvY29yZSc7XG5pbXBvcnQgR0wgZnJvbSAnQGx1bWEuZ2wvY29uc3RhbnRzJztcbmltcG9ydCB7R2VvbWV0cnksIE1vZGVsfSBmcm9tICdAbHVtYS5nbC9jb3JlJztcbmltcG9ydCBGcmFnbWVudFNoYWRlciBmcm9tICcuL0Zsb3dDaXJjbGVzTGF5ZXJGcmFnbWVudC5nbHNsJztcbmltcG9ydCBWZXJ0ZXhTaGFkZXIgZnJvbSAnLi9GbG93Q2lyY2xlc0xheWVyVmVydGV4Lmdsc2wnO1xuaW1wb3J0IHtGbG93Q2lyY2xlc0xheWVyQXR0cmlidXRlcywgUkdCQX0gZnJvbSAnQGZsb3dtYXAuZ2wvZGF0YSc7XG5pbXBvcnQge0xheWVyUHJvcHN9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IHR5cGUgRmxvd0NpcmNsZXNEYXR1bSA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIGV4dGVuZHMgTGF5ZXJQcm9wcyB7XG4gIGlkOiBzdHJpbmc7XG4gIG9wYWNpdHk/OiBudW1iZXI7XG4gIHBpY2thYmxlPzogYm9vbGVhbjtcbiAgZW1wdHlDb2xvcj86IFJHQkE7XG4gIG91dGxpbmVFbXB0eU1peD86IG51bWJlcjtcbiAgZ2V0Q29sb3I/OiAoZDogRmxvd0NpcmNsZXNEYXR1bSkgPT4gUkdCQTtcbiAgZ2V0UG9zaXRpb24/OiAoZDogRmxvd0NpcmNsZXNEYXR1bSkgPT4gW251bWJlciwgbnVtYmVyXTtcbiAgZ2V0SW5SYWRpdXM/OiAoZDogRmxvd0NpcmNsZXNEYXR1bSkgPT4gbnVtYmVyO1xuICBnZXRPdXRSYWRpdXM/OiAoZDogRmxvd0NpcmNsZXNEYXR1bSkgPT4gbnVtYmVyO1xuICBkYXRhOiBGbG93Q2lyY2xlc0RhdHVtW10gfCBGbG93Q2lyY2xlc0xheWVyQXR0cmlidXRlcztcbiAgdXBkYXRlVHJpZ2dlcnM/OiB7W2tleTogc3RyaW5nXTogUmVjb3JkPHN0cmluZywgdW5rbm93bj59O1xufVxuXG5jb25zdCBERUZBVUxUX0NPTE9SID0gWzAsIDAsIDAsIDI1NV07XG5jb25zdCBERUZBVUxUX0VNUFRZX0NPTE9SID0gWzI1NSwgMjU1LCAyNTUsIDI1NV07XG5jb25zdCBERUZBVUxUX09VVExJTkVfRU1QVFlfTUlYID0gMC40O1xuXG5jbGFzcyBGbG93Q2lyY2xlc0xheWVyIGV4dGVuZHMgTGF5ZXIge1xuICBzdGF0aWMgbGF5ZXJOYW1lID0gJ0Zsb3dDaXJjbGVzTGF5ZXInO1xuXG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgZ2V0Q29sb3I6IHt0eXBlOiAnYWNjZXNzb3InLCB2YWx1ZTogREVGQVVMVF9DT0xPUn0sXG4gICAgZW1wdHlDb2xvcjoge3R5cGU6ICdhY2Nlc3NvcicsIHZhbHVlOiBERUZBVUxUX0VNUFRZX0NPTE9SfSxcbiAgICBvdXRsaW5lRW1wdHlNaXg6IHt0eXBlOiAnYWNjZXNzb3InLCB2YWx1ZTogREVGQVVMVF9PVVRMSU5FX0VNUFRZX01JWH0sXG4gICAgZ2V0UG9zaXRpb246IHt0eXBlOiAnYWNjZXNzb3InLCB2YWx1ZTogKGQ6IEZsb3dDaXJjbGVzRGF0dW0pID0+IGQucG9zaXRpb259LFxuICAgIGdldEluUmFkaXVzOiB7dHlwZTogJ2FjY2Vzc29yJywgdmFsdWU6IDF9LFxuICAgIGdldE91dFJhZGl1czoge3R5cGU6ICdhY2Nlc3NvcicsIHZhbHVlOiAxfSxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICBkZXB0aFRlc3Q6IGZhbHNlLFxuICAgIH0sXG4gIH07XG4gIC8vIHByb3BzITogUHJvcHM7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICB9XG5cbiAgZ2V0U2hhZGVycygpIHtcbiAgICByZXR1cm4gc3VwZXIuZ2V0U2hhZGVycyh7XG4gICAgICB2czogVmVydGV4U2hhZGVyLFxuICAgICAgZnM6IEZyYWdtZW50U2hhZGVyLFxuICAgICAgbW9kdWxlczogW3Byb2plY3QzMiwgcGlja2luZ10sXG4gICAgfSk7XG4gIH1cblxuICBpbml0aWFsaXplU3RhdGUoKSB7XG4gICAgdGhpcy5nZXRBdHRyaWJ1dGVNYW5hZ2VyKCkuYWRkSW5zdGFuY2VkKHtcbiAgICAgIGluc3RhbmNlUG9zaXRpb25zOiB7XG4gICAgICAgIHNpemU6IDMsXG4gICAgICAgIHR5cGU6IEdMLkRPVUJMRSxcbiAgICAgICAgZnA2NDogdGhpcy51c2U2NGJpdFBvc2l0aW9ucygpLFxuICAgICAgICB0cmFuc2l0aW9uOiB0cnVlLFxuICAgICAgICBhY2Nlc3NvcjogJ2dldFBvc2l0aW9uJyxcbiAgICAgIH0sXG4gICAgICBpbnN0YW5jZUluUmFkaXVzOiB7XG4gICAgICAgIHNpemU6IDEsXG4gICAgICAgIHRyYW5zaXRpb246IHRydWUsXG4gICAgICAgIGFjY2Vzc29yOiAnZ2V0SW5SYWRpdXMnLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IDEsXG4gICAgICB9LFxuICAgICAgaW5zdGFuY2VPdXRSYWRpdXM6IHtcbiAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgdHJhbnNpdGlvbjogdHJ1ZSxcbiAgICAgICAgYWNjZXNzb3I6ICdnZXRPdXRSYWRpdXMnLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IDEsXG4gICAgICB9LFxuICAgICAgaW5zdGFuY2VDb2xvcnM6IHtcbiAgICAgICAgc2l6ZTogNCxcbiAgICAgICAgdHJhbnNpdGlvbjogdHJ1ZSxcbiAgICAgICAgdHlwZTogR0wuVU5TSUdORURfQllURSxcbiAgICAgICAgYWNjZXNzb3I6ICdnZXRDb2xvcicsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogREVGQVVMVF9DT0xPUixcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVTdGF0ZSh7cHJvcHMsIG9sZFByb3BzLCBjaGFuZ2VGbGFnc306IGFueSkge1xuICAgIHN1cGVyLnVwZGF0ZVN0YXRlKHtwcm9wcywgb2xkUHJvcHMsIGNoYW5nZUZsYWdzfSk7XG4gICAgaWYgKGNoYW5nZUZsYWdzLmV4dGVuc2lvbnNDaGFuZ2VkKSB7XG4gICAgICBjb25zdCB7Z2x9ID0gdGhpcy5jb250ZXh0O1xuICAgICAgaWYgKHRoaXMuc3RhdGUubW9kZWwpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5tb2RlbC5kZWxldGUoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0U3RhdGUoe21vZGVsOiB0aGlzLl9nZXRNb2RlbChnbCl9KTtcbiAgICAgIHRoaXMuZ2V0QXR0cmlidXRlTWFuYWdlcigpLmludmFsaWRhdGVBbGwoKTtcbiAgICB9XG4gIH1cblxuICBkcmF3KHt1bmlmb3Jtc306IGFueSkge1xuICAgIGNvbnN0IHtlbXB0eUNvbG9yLCBvdXRsaW5lRW1wdHlNaXh9ID0gdGhpcy5wcm9wcztcbiAgICB0aGlzLnN0YXRlLm1vZGVsXG4gICAgICAuc2V0VW5pZm9ybXMoe1xuICAgICAgICAuLi51bmlmb3JtcyxcbiAgICAgICAgZW1wdHlDb2xvcixcbiAgICAgICAgb3V0bGluZUVtcHR5TWl4LFxuICAgICAgfSlcbiAgICAgIC5kcmF3KCk7XG4gIH1cblxuICBfZ2V0TW9kZWwoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCkge1xuICAgIC8vIGEgc3F1YXJlIHRoYXQgbWluaW1hbGx5IGNvdmVyIHRoZSB1bml0IGNpcmNsZVxuICAgIGNvbnN0IHBvc2l0aW9ucyA9IFstMSwgLTEsIDAsIDEsIC0xLCAwLCAxLCAxLCAwLCAtMSwgMSwgMF07XG5cbiAgICByZXR1cm4gbmV3IE1vZGVsKFxuICAgICAgZ2wsXG4gICAgICBPYmplY3QuYXNzaWduKHRoaXMuZ2V0U2hhZGVycygpLCB7XG4gICAgICAgIGlkOiB0aGlzLnByb3BzLmlkLFxuICAgICAgICBnZW9tZXRyeTogbmV3IEdlb21ldHJ5KHtcbiAgICAgICAgICBkcmF3TW9kZTogR0wuVFJJQU5HTEVfRkFOLFxuICAgICAgICAgIHZlcnRleENvdW50OiA0LFxuICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgIHBvc2l0aW9uczoge3NpemU6IDMsIHZhbHVlOiBuZXcgRmxvYXQzMkFycmF5KHBvc2l0aW9ucyl9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgICBpc0luc3RhbmNlZDogdHJ1ZSxcbiAgICAgIH0pLFxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRmxvd0NpcmNsZXNMYXllcjtcbiJdfQ==","/*\n * Copyright 2022 FlowmapBlue\n * Copyright 2018-2020 Teralytics, modified by FlowmapBlue\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nexport default `\\\n#define SHADER_NAME flow-circles-layer-vertex-shader\n#define radiusScale 100\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceInRadius;\nattribute float instanceOutRadius;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform vec4 emptyColor;\nuniform float outlineEmptyMix;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\nvarying float unitInRadius;\nvarying float unitOutRadius;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n\n  float outerRadiusPixels = max(instanceInRadius, instanceOutRadius);\n  unitInRadius = instanceInRadius / outerRadiusPixels; \n  unitOutRadius = instanceOutRadius / outerRadiusPixels; \n\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n                                                                                                    \n  // Find the center of the point and add the current vertex\n  vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n                            \n  // Apply opacity to instance color, or return instance picking color\n  vColor = vec4(instanceColors.rgb / 255., instanceColors.a / 255. * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmxvd0NpcmNsZXNMYXllclZlcnRleC5nbHNsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL0Zsb3dDaXJjbGVzTGF5ZXIvRmxvd0NpcmNsZXNMYXllclZlcnRleC5nbHNsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7O0dBZ0JHO0FBQ0gsZUFBZTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0E0Q2QsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgMjAyMiBGbG93bWFwQmx1ZVxuICogQ29weXJpZ2h0IDIwMTgtMjAyMCBUZXJhbHl0aWNzLCBtb2RpZmllZCBieSBGbG93bWFwQmx1ZVxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICpcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYFxcXG4jZGVmaW5lIFNIQURFUl9OQU1FIGZsb3ctY2lyY2xlcy1sYXllci12ZXJ0ZXgtc2hhZGVyXG4jZGVmaW5lIHJhZGl1c1NjYWxlIDEwMFxuXG5hdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbnM7XG5cbmF0dHJpYnV0ZSB2ZWMzIGluc3RhbmNlUG9zaXRpb25zO1xuYXR0cmlidXRlIHZlYzMgaW5zdGFuY2VQb3NpdGlvbnM2NExvdztcbmF0dHJpYnV0ZSBmbG9hdCBpbnN0YW5jZUluUmFkaXVzO1xuYXR0cmlidXRlIGZsb2F0IGluc3RhbmNlT3V0UmFkaXVzO1xuYXR0cmlidXRlIHZlYzQgaW5zdGFuY2VDb2xvcnM7XG5hdHRyaWJ1dGUgdmVjMyBpbnN0YW5jZVBpY2tpbmdDb2xvcnM7XG5cbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcbnVuaWZvcm0gdmVjNCBlbXB0eUNvbG9yO1xudW5pZm9ybSBmbG9hdCBvdXRsaW5lRW1wdHlNaXg7XG5cbnZhcnlpbmcgdmVjNCB2Q29sb3I7XG52YXJ5aW5nIHZlYzIgdW5pdFBvc2l0aW9uO1xudmFyeWluZyBmbG9hdCB1bml0SW5SYWRpdXM7XG52YXJ5aW5nIGZsb2F0IHVuaXRPdXRSYWRpdXM7XG5cbnZvaWQgbWFpbih2b2lkKSB7XG4gIGdlb21ldHJ5LndvcmxkUG9zaXRpb24gPSBpbnN0YW5jZVBvc2l0aW9ucztcblxuICBmbG9hdCBvdXRlclJhZGl1c1BpeGVscyA9IG1heChpbnN0YW5jZUluUmFkaXVzLCBpbnN0YW5jZU91dFJhZGl1cyk7XG4gIHVuaXRJblJhZGl1cyA9IGluc3RhbmNlSW5SYWRpdXMgLyBvdXRlclJhZGl1c1BpeGVsczsgXG4gIHVuaXRPdXRSYWRpdXMgPSBpbnN0YW5jZU91dFJhZGl1cyAvIG91dGVyUmFkaXVzUGl4ZWxzOyBcblxuICAvLyBwb3NpdGlvbiBvbiB0aGUgY29udGFpbmluZyBzcXVhcmUgaW4gWy0xLCAxXSBzcGFjZVxuICB1bml0UG9zaXRpb24gPSBwb3NpdGlvbnMueHk7XG4gIGdlb21ldHJ5LnV2ID0gdW5pdFBvc2l0aW9uO1xuICBnZW9tZXRyeS5waWNraW5nQ29sb3IgPSBpbnN0YW5jZVBpY2tpbmdDb2xvcnM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gIC8vIEZpbmQgdGhlIGNlbnRlciBvZiB0aGUgcG9pbnQgYW5kIGFkZCB0aGUgY3VycmVudCB2ZXJ0ZXhcbiAgdmVjMyBvZmZzZXQgPSBwb3NpdGlvbnMgKiBwcm9qZWN0X3BpeGVsX3NpemUob3V0ZXJSYWRpdXNQaXhlbHMpO1xuICBERUNLR0xfRklMVEVSX1NJWkUob2Zmc2V0LCBnZW9tZXRyeSk7XG4gIGdsX1Bvc2l0aW9uID0gcHJvamVjdF9wb3NpdGlvbl90b19jbGlwc3BhY2UoaW5zdGFuY2VQb3NpdGlvbnMsIGluc3RhbmNlUG9zaXRpb25zNjRMb3csIG9mZnNldCwgZ2VvbWV0cnkucG9zaXRpb24pO1xuICBERUNLR0xfRklMVEVSX0dMX1BPU0lUSU9OKGdsX1Bvc2l0aW9uLCBnZW9tZXRyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gIC8vIEFwcGx5IG9wYWNpdHkgdG8gaW5zdGFuY2UgY29sb3IsIG9yIHJldHVybiBpbnN0YW5jZSBwaWNraW5nIGNvbG9yXG4gIHZDb2xvciA9IHZlYzQoaW5zdGFuY2VDb2xvcnMucmdiIC8gMjU1LiwgaW5zdGFuY2VDb2xvcnMuYSAvIDI1NS4gKiBvcGFjaXR5KTtcbiAgREVDS0dMX0ZJTFRFUl9DT0xPUih2Q29sb3IsIGdlb21ldHJ5KTtcbn1cbmA7XG4iXX0=","/*\n * Copyright 2022 FlowmapBlue\n * Copyright 2018-2020 Teralytics, modified by FlowmapBlue\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nexport default `\\\n#define SHADER_NAME flow-circles-layer-fragment-shader\n#define SOFT_OUTLINE 0.05\n#define EPS 0.05\nprecision highp float;\n\nuniform vec4 emptyColor;\nuniform float outlineEmptyMix;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\nvarying float unitInRadius;\nvarying float unitOutRadius;\n\nfloat when_gt(float x, float y) {\n  return max(sign(x - y), 0.0);\n}\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n  float distToCenter = length(unitPosition);\n  if (distToCenter > 1.0) {\n    discard;\n  }\n\n  // See https://stackoverflow.com/questions/47285778\n  vec4 ringColor = mix(\n    emptyColor / 255., vColor,\n    when_gt(unitInRadius, unitOutRadius)\n  );\n  vec4 outlineColor = mix(\n    mix(vColor, emptyColor / 255., outlineEmptyMix),\n    vColor,\n    when_gt(unitInRadius, unitOutRadius)\n  );\n  \n  float innerR = min(unitInRadius, unitOutRadius) * (1.0 - SOFT_OUTLINE);\n  \n  // Inner circle\n  float step2 = innerR - 2.0 * EPS; \n  float step3 = innerR - EPS;\n  \n  // Ring\n  float step4 = innerR;\n  // float step5 = 1.0 - SOFT_OUTLINE - EPS;\n  // float step6 = 1.0 - SOFT_OUTLINE;\n  float step5 = 1.0 - 5.0 * EPS;\n  float step6 = 1.0;\n  \n  gl_FragColor = vColor;\n  gl_FragColor = mix(gl_FragColor, emptyColor / 255., smoothstep(step2, step3, distToCenter));\n  gl_FragColor = mix(gl_FragColor, ringColor, smoothstep(step3, step4, distToCenter));\n  gl_FragColor = mix(gl_FragColor, outlineColor, smoothstep(step5, step6, distToCenter));\n  // gl_FragColor = mix(gl_FragColor, emptyColor / 255., smoothstep(step6, 1.0, distToCenter));\n  gl_FragColor.a = vColor.a;\n  gl_FragColor.a *= smoothstep(0.0, SOFT_OUTLINE, 1.0 - distToCenter);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n`;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmxvd0NpcmNsZXNMYXllckZyYWdtZW50Lmdsc2wuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvRmxvd0NpcmNsZXNMYXllci9GbG93Q2lyY2xlc0xheWVyRnJhZ21lbnQuZ2xzbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7OztHQWdCRztBQUNILGVBQWU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0EwRGQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgMjAyMiBGbG93bWFwQmx1ZVxuICogQ29weXJpZ2h0IDIwMTgtMjAyMCBUZXJhbHl0aWNzLCBtb2RpZmllZCBieSBGbG93bWFwQmx1ZVxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICpcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYFxcXG4jZGVmaW5lIFNIQURFUl9OQU1FIGZsb3ctY2lyY2xlcy1sYXllci1mcmFnbWVudC1zaGFkZXJcbiNkZWZpbmUgU09GVF9PVVRMSU5FIDAuMDVcbiNkZWZpbmUgRVBTIDAuMDVcbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcblxudW5pZm9ybSB2ZWM0IGVtcHR5Q29sb3I7XG51bmlmb3JtIGZsb2F0IG91dGxpbmVFbXB0eU1peDtcblxudmFyeWluZyB2ZWM0IHZDb2xvcjtcbnZhcnlpbmcgdmVjMiB1bml0UG9zaXRpb247XG52YXJ5aW5nIGZsb2F0IHVuaXRJblJhZGl1cztcbnZhcnlpbmcgZmxvYXQgdW5pdE91dFJhZGl1cztcblxuZmxvYXQgd2hlbl9ndChmbG9hdCB4LCBmbG9hdCB5KSB7XG4gIHJldHVybiBtYXgoc2lnbih4IC0geSksIDAuMCk7XG59XG5cbnZvaWQgbWFpbih2b2lkKSB7XG4gIGdlb21ldHJ5LnV2ID0gdW5pdFBvc2l0aW9uO1xuICBmbG9hdCBkaXN0VG9DZW50ZXIgPSBsZW5ndGgodW5pdFBvc2l0aW9uKTtcbiAgaWYgKGRpc3RUb0NlbnRlciA+IDEuMCkge1xuICAgIGRpc2NhcmQ7XG4gIH1cblxuICAvLyBTZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDcyODU3NzhcbiAgdmVjNCByaW5nQ29sb3IgPSBtaXgoXG4gICAgZW1wdHlDb2xvciAvIDI1NS4sIHZDb2xvcixcbiAgICB3aGVuX2d0KHVuaXRJblJhZGl1cywgdW5pdE91dFJhZGl1cylcbiAgKTtcbiAgdmVjNCBvdXRsaW5lQ29sb3IgPSBtaXgoXG4gICAgbWl4KHZDb2xvciwgZW1wdHlDb2xvciAvIDI1NS4sIG91dGxpbmVFbXB0eU1peCksXG4gICAgdkNvbG9yLFxuICAgIHdoZW5fZ3QodW5pdEluUmFkaXVzLCB1bml0T3V0UmFkaXVzKVxuICApO1xuICBcbiAgZmxvYXQgaW5uZXJSID0gbWluKHVuaXRJblJhZGl1cywgdW5pdE91dFJhZGl1cykgKiAoMS4wIC0gU09GVF9PVVRMSU5FKTtcbiAgXG4gIC8vIElubmVyIGNpcmNsZVxuICBmbG9hdCBzdGVwMiA9IGlubmVyUiAtIDIuMCAqIEVQUzsgXG4gIGZsb2F0IHN0ZXAzID0gaW5uZXJSIC0gRVBTO1xuICBcbiAgLy8gUmluZ1xuICBmbG9hdCBzdGVwNCA9IGlubmVyUjtcbiAgLy8gZmxvYXQgc3RlcDUgPSAxLjAgLSBTT0ZUX09VVExJTkUgLSBFUFM7XG4gIC8vIGZsb2F0IHN0ZXA2ID0gMS4wIC0gU09GVF9PVVRMSU5FO1xuICBmbG9hdCBzdGVwNSA9IDEuMCAtIDUuMCAqIEVQUztcbiAgZmxvYXQgc3RlcDYgPSAxLjA7XG4gIFxuICBnbF9GcmFnQ29sb3IgPSB2Q29sb3I7XG4gIGdsX0ZyYWdDb2xvciA9IG1peChnbF9GcmFnQ29sb3IsIGVtcHR5Q29sb3IgLyAyNTUuLCBzbW9vdGhzdGVwKHN0ZXAyLCBzdGVwMywgZGlzdFRvQ2VudGVyKSk7XG4gIGdsX0ZyYWdDb2xvciA9IG1peChnbF9GcmFnQ29sb3IsIHJpbmdDb2xvciwgc21vb3Roc3RlcChzdGVwMywgc3RlcDQsIGRpc3RUb0NlbnRlcikpO1xuICBnbF9GcmFnQ29sb3IgPSBtaXgoZ2xfRnJhZ0NvbG9yLCBvdXRsaW5lQ29sb3IsIHNtb290aHN0ZXAoc3RlcDUsIHN0ZXA2LCBkaXN0VG9DZW50ZXIpKTtcbiAgLy8gZ2xfRnJhZ0NvbG9yID0gbWl4KGdsX0ZyYWdDb2xvciwgZW1wdHlDb2xvciAvIDI1NS4sIHNtb290aHN0ZXAoc3RlcDYsIDEuMCwgZGlzdFRvQ2VudGVyKSk7XG4gIGdsX0ZyYWdDb2xvci5hID0gdkNvbG9yLmE7XG4gIGdsX0ZyYWdDb2xvci5hICo9IHNtb290aHN0ZXAoMC4wLCBTT0ZUX09VVExJTkUsIDEuMCAtIGRpc3RUb0NlbnRlcik7XG4gIERFQ0tHTF9GSUxURVJfQ09MT1IoZ2xfRnJhZ0NvbG9yLCBnZW9tZXRyeSk7XG59XG5gO1xuIl19","export function isCluster(c) {\n    const { children } = c;\n    return children && children.length > 0;\n}\nexport function isLocationClusterNode(l) {\n    const { zoom } = l;\n    return zoom !== undefined;\n}\nexport function isAggregateFlow(flow) {\n    return (flow &&\n        // flow.origin !== undefined &&\n        // flow.dest !== undefined &&\n        // flow.count !== undefined &&\n        (flow.aggregate ? true : false));\n}\nexport var LocationFilterMode;\n(function (LocationFilterMode) {\n    LocationFilterMode[\"ALL\"] = \"ALL\";\n    LocationFilterMode[\"INCOMING\"] = \"INCOMING\";\n    LocationFilterMode[\"OUTGOING\"] = \"OUTGOING\";\n    LocationFilterMode[\"BETWEEN\"] = \"BETWEEN\";\n})(LocationFilterMode || (LocationFilterMode = {}));\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHlwZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvdHlwZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBZ0dBLE1BQU0sVUFBVSxTQUFTLENBQUMsQ0FBYztJQUN0QyxNQUFNLEVBQUMsUUFBUSxFQUFDLEdBQUcsQ0FBWSxDQUFDO0lBQ2hDLE9BQU8sUUFBUSxJQUFJLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBQ3pDLENBQUM7QUFFRCxNQUFNLFVBQVUscUJBQXFCLENBQUksQ0FBa0I7SUFDekQsTUFBTSxFQUFDLElBQUksRUFBQyxHQUFHLENBQWdCLENBQUM7SUFDaEMsT0FBTyxJQUFJLEtBQUssU0FBUyxDQUFDO0FBQzVCLENBQUM7QUFTRCxNQUFNLFVBQVUsZUFBZSxDQUM3QixJQUF5QjtJQUV6QixPQUFPLENBQ0wsSUFBSTtRQUNKLCtCQUErQjtRQUMvQiw2QkFBNkI7UUFDN0IsOEJBQThCO1FBQzlCLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FDaEMsQ0FBQztBQUNKLENBQUM7QUFPRCxNQUFNLENBQU4sSUFBWSxrQkFLWDtBQUxELFdBQVksa0JBQWtCO0lBQzVCLGlDQUFXLENBQUE7SUFDWCwyQ0FBcUIsQ0FBQTtJQUNyQiwyQ0FBcUIsQ0FBQTtJQUNyQix5Q0FBbUIsQ0FBQTtBQUNyQixDQUFDLEVBTFcsa0JBQWtCLEtBQWxCLGtCQUFrQixRQUs3QiIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIEZsb3dtYXBEYXRhPEwsIEY+ID0ge1xuICBsb2NhdGlvbnM6IEl0ZXJhYmxlPEw+IHwgdW5kZWZpbmVkO1xuICBmbG93czogSXRlcmFibGU8Rj4gfCB1bmRlZmluZWQ7XG4gIGNsdXN0ZXJMZXZlbHM/OiBDbHVzdGVyTGV2ZWxzO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBWaWV3U3RhdGUge1xuICBsYXRpdHVkZTogbnVtYmVyO1xuICBsb25naXR1ZGU6IG51bWJlcjtcbiAgem9vbTogbnVtYmVyO1xuICBiZWFyaW5nPzogbnVtYmVyO1xuICBwaXRjaD86IG51bWJlcjtcbiAgYWx0aXR1ZGU/OiBudW1iZXI7XG59XG5cbmV4cG9ydCB0eXBlIEZsb3dBY2Nlc3NvcjxGLCBUPiA9IChmbG93OiBGKSA9PiBUOyAvLyBvYmplY3RJbmZvPzogQWNjZXNzb3JPYmplY3RJbmZvLFxuZXhwb3J0IHR5cGUgTG9jYXRpb25BY2Nlc3NvcjxMLCBUPiA9IChsb2NhdGlvbjogTCkgPT4gVDtcblxuZXhwb3J0IGludGVyZmFjZSBGbG93QWNjZXNzb3JzPEY+IHtcbiAgZ2V0Rmxvd09yaWdpbklkOiBGbG93QWNjZXNzb3I8Riwgc3RyaW5nIHwgbnVtYmVyPjtcbiAgZ2V0Rmxvd0Rlc3RJZDogRmxvd0FjY2Vzc29yPEYsIHN0cmluZyB8IG51bWJlcj47XG4gIGdldEZsb3dNYWduaXR1ZGU6IEZsb3dBY2Nlc3NvcjxGLCBudW1iZXI+O1xuICBnZXRGbG93VGltZT86IEZsb3dBY2Nlc3NvcjxGLCBEYXRlPjsgLy8gVE9ETzogdXNlIG51bWJlciBpbnN0ZWFkIG9mIERhdGVcbiAgLy8gZ2V0Rmxvd0NvbG9yPzogRmxvd0FjY2Vzc29yPHN0cmluZyB8IHVuZGVmaW5lZD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9jYXRpb25BY2Nlc3NvcnM8TD4ge1xuICBnZXRMb2NhdGlvbklkOiBMb2NhdGlvbkFjY2Vzc29yPEwsIHN0cmluZyB8IG51bWJlcj47XG4gIGdldExvY2F0aW9uTmFtZT86IExvY2F0aW9uQWNjZXNzb3I8TCwgc3RyaW5nPjtcbiAgZ2V0TG9jYXRpb25MYXQ6IExvY2F0aW9uQWNjZXNzb3I8TCwgbnVtYmVyPjtcbiAgZ2V0TG9jYXRpb25Mb246IExvY2F0aW9uQWNjZXNzb3I8TCwgbnVtYmVyPjtcbiAgZ2V0TG9jYXRpb25DbHVzdGVyTmFtZT86IChsb2NhdGlvbklkczogKHN0cmluZyB8IG51bWJlcilbXSkgPT4gc3RyaW5nO1xuICAvLyBnZXRMb2NhdGlvblRvdGFsSW4/OiBMb2NhdGlvbkFjY2Vzc29yPG51bWJlcj47XG4gIC8vIGdldExvY2F0aW9uVG90YWxPdXQ/OiBMb2NhdGlvbkFjY2Vzc29yPG51bWJlcj47XG4gIC8vIGdldExvY2F0aW9uVG90YWxJbnRlcm5hbD86IExvY2F0aW9uQWNjZXNzb3I8bnVtYmVyPjtcbn1cblxuZXhwb3J0IHR5cGUgRmxvd21hcERhdGFBY2Nlc3NvcnM8TCwgRj4gPSBMb2NhdGlvbkFjY2Vzc29yczxMPiAmXG4gIEZsb3dBY2Nlc3NvcnM8Rj47XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9jYXRpb25Ub3RhbHMge1xuICBpbmNvbWluZ0NvdW50OiBudW1iZXI7XG4gIG91dGdvaW5nQ291bnQ6IG51bWJlcjtcbiAgaW50ZXJuYWxDb3VudDogbnVtYmVyO1xufVxuXG4vLyBleHBvcnQgaW50ZXJmYWNlIExvY2F0aW9uc1RvdGFscyB7XG4vLyAgIGluY29taW5nOiB7W2lkOiBzdHJpbmddOiBudW1iZXJ9O1xuLy8gICBvdXRnb2luZzoge1tpZDogc3RyaW5nXTogbnVtYmVyfTtcbi8vICAgaW50ZXJuYWw6IHtbaWQ6IHN0cmluZ106IG51bWJlcn07XG4vLyB9XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ291bnRCeVRpbWUge1xuICB0aW1lOiBEYXRlO1xuICBjb3VudDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZpZXdwb3J0UHJvcHMge1xuICB3aWR0aDogbnVtYmVyO1xuICBoZWlnaHQ6IG51bWJlcjtcbiAgbGF0aXR1ZGU6IG51bWJlcjtcbiAgbG9uZ2l0dWRlOiBudW1iZXI7XG4gIHpvb20/OiBudW1iZXI7XG4gIGJlYXJpbmc/OiBudW1iZXI7XG4gIHBpdGNoPzogbnVtYmVyO1xuICBhbHRpdHVkZT86IG51bWJlcjtcbiAgbWF4Wm9vbT86IG51bWJlcjtcbiAgbWluWm9vbT86IG51bWJlcjtcbiAgbWF4UGl0Y2g/OiBudW1iZXI7XG4gIG1pblBpdGNoPzogbnVtYmVyO1xuICB0cmFuc2l0aW9uRHVyYXRpb24/OiBudW1iZXIgfCAnYXV0byc7XG4gIHRyYW5zaXRpb25JbnRlcnBvbGF0b3I/OiBhbnk7XG4gIHRyYW5zaXRpb25JbnRlcnJ1cHRpb24/OiBhbnk7XG4gIHRyYW5zaXRpb25FYXNpbmc/OiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2x1c3Rlck5vZGUge1xuICBpZDogc3RyaW5nIHwgbnVtYmVyO1xuICB6b29tOiBudW1iZXI7XG4gIGxhdDogbnVtYmVyO1xuICBsb246IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDbHVzdGVyTGV2ZWwge1xuICB6b29tOiBudW1iZXI7XG4gIG5vZGVzOiBDbHVzdGVyTm9kZVtdO1xufVxuXG5leHBvcnQgdHlwZSBDbHVzdGVyTGV2ZWxzID0gQ2x1c3RlckxldmVsW107XG5cbi8vIG5vbi1sZWFmIGNsdXN0ZXIgbm9kZVxuZXhwb3J0IGludGVyZmFjZSBDbHVzdGVyIGV4dGVuZHMgQ2x1c3Rlck5vZGUge1xuICBuYW1lPzogc3RyaW5nO1xuICBjaGlsZHJlbjogc3RyaW5nW107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0NsdXN0ZXIoYzogQ2x1c3Rlck5vZGUpOiBjIGlzIENsdXN0ZXIge1xuICBjb25zdCB7Y2hpbGRyZW59ID0gYyBhcyBDbHVzdGVyO1xuICByZXR1cm4gY2hpbGRyZW4gJiYgY2hpbGRyZW4ubGVuZ3RoID4gMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTG9jYXRpb25DbHVzdGVyTm9kZTxMPihsOiBMIHwgQ2x1c3Rlck5vZGUpOiBsIGlzIENsdXN0ZXJOb2RlIHtcbiAgY29uc3Qge3pvb219ID0gbCBhcyBDbHVzdGVyTm9kZTtcbiAgcmV0dXJuIHpvb20gIT09IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZ2dyZWdhdGVGbG93IHtcbiAgb3JpZ2luOiBzdHJpbmcgfCBudW1iZXI7XG4gIGRlc3Q6IHN0cmluZyB8IG51bWJlcjtcbiAgY291bnQ6IG51bWJlcjtcbiAgYWdncmVnYXRlOiB0cnVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNBZ2dyZWdhdGVGbG93KFxuICBmbG93OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuKTogZmxvdyBpcyBBZ2dyZWdhdGVGbG93IHtcbiAgcmV0dXJuIChcbiAgICBmbG93ICYmXG4gICAgLy8gZmxvdy5vcmlnaW4gIT09IHVuZGVmaW5lZCAmJlxuICAgIC8vIGZsb3cuZGVzdCAhPT0gdW5kZWZpbmVkICYmXG4gICAgLy8gZmxvdy5jb3VudCAhPT0gdW5kZWZpbmVkICYmXG4gICAgKGZsb3cuYWdncmVnYXRlID8gdHJ1ZSA6IGZhbHNlKVxuICApO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZsb3dDb3VudHNNYXBSZWR1Y2U8RiwgVCA9IGFueT4ge1xuICBtYXA6IChmbG93OiBGKSA9PiBUO1xuICByZWR1Y2U6IChhY2N1bXVsYXRlZDogVCwgdmFsOiBUKSA9PiBUO1xufVxuXG5leHBvcnQgZW51bSBMb2NhdGlvbkZpbHRlck1vZGUge1xuICBBTEwgPSAnQUxMJyxcbiAgSU5DT01JTkcgPSAnSU5DT01JTkcnLFxuICBPVVRHT0lORyA9ICdPVVRHT0lORycsXG4gIEJFVFdFRU4gPSAnQkVUV0VFTicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxvd0NpcmNsZXNMYXllckF0dHJpYnV0ZXMge1xuICBsZW5ndGg6IG51bWJlcjtcbiAgYXR0cmlidXRlczoge1xuICAgIGdldFBvc2l0aW9uOiBMYXllcnNEYXRhQXR0clZhbHVlczxGbG9hdDMyQXJyYXk+O1xuICAgIGdldENvbG9yOiBMYXllcnNEYXRhQXR0clZhbHVlczxVaW50OEFycmF5PjtcbiAgICBnZXRJblJhZGl1czogTGF5ZXJzRGF0YUF0dHJWYWx1ZXM8RmxvYXQzMkFycmF5PjtcbiAgICBnZXRPdXRSYWRpdXM6IExheWVyc0RhdGFBdHRyVmFsdWVzPEZsb2F0MzJBcnJheT47XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxvd0xpbmVzTGF5ZXJBdHRyaWJ1dGVzIHtcbiAgbGVuZ3RoOiBudW1iZXI7XG4gIGF0dHJpYnV0ZXM6IHtcbiAgICBnZXRTb3VyY2VQb3NpdGlvbjogTGF5ZXJzRGF0YUF0dHJWYWx1ZXM8RmxvYXQzMkFycmF5PjtcbiAgICBnZXRUYXJnZXRQb3NpdGlvbjogTGF5ZXJzRGF0YUF0dHJWYWx1ZXM8RmxvYXQzMkFycmF5PjtcbiAgICBnZXRUaGlja25lc3M6IExheWVyc0RhdGFBdHRyVmFsdWVzPEZsb2F0MzJBcnJheT47XG4gICAgZ2V0Q29sb3I6IExheWVyc0RhdGFBdHRyVmFsdWVzPFVpbnQ4QXJyYXk+O1xuICAgIGdldEVuZHBvaW50T2Zmc2V0czogTGF5ZXJzRGF0YUF0dHJWYWx1ZXM8RmxvYXQzMkFycmF5PjtcbiAgICBnZXRTdGFnZ2VyaW5nPzogTGF5ZXJzRGF0YUF0dHJWYWx1ZXM8RmxvYXQzMkFycmF5PjtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMYXllcnNEYXRhIHtcbiAgY2lyY2xlQXR0cmlidXRlczogRmxvd0NpcmNsZXNMYXllckF0dHJpYnV0ZXM7XG4gIGxpbmVBdHRyaWJ1dGVzOiBGbG93TGluZXNMYXllckF0dHJpYnV0ZXM7XG4gIGxvY2F0aW9uTGFiZWxzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCB0eXBlIExheWVyc0RhdGFBdHRyVmFsdWVzPFQ+ID0ge3ZhbHVlOiBUOyBzaXplOiBudW1iZXJ9O1xuIl19","export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n","import {interpolateRgbBasis} from \"d3-interpolate\";\n\nexport default scheme => interpolateRgbBasis(scheme[scheme.length - 1]);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5f999d8c92ca25f\",\n  \"edf8fbb2e2e266c2a4238b45\",\n  \"edf8fbb2e2e266c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0ecf49ebcda8856a7\",\n  \"edf8fbb3cde38c96c688419d\",\n  \"edf8fbb3cde38c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0f3dba8ddb543a2ca\",\n  \"f0f9e8bae4bc7bccc42b8cbe\",\n  \"f0f9e8bae4bc7bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee8c8fdbb84e34a33\",\n  \"fef0d9fdcc8afc8d59d7301f\",\n  \"fef0d9fdcc8afc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece2f0a6bddb1c9099\",\n  \"f6eff7bdc9e167a9cf02818a\",\n  \"f6eff7bdc9e167a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece7f2a6bddb2b8cbe\",\n  \"f1eef6bdc9e174a9cf0570b0\",\n  \"f1eef6bdc9e174a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e7e1efc994c7dd1c77\",\n  \"f1eef6d7b5d8df65b0ce1256\",\n  \"f1eef6d7b5d8df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fde0ddfa9fb5c51b8a\",\n  \"feebe2fbb4b9f768a1ae017e\",\n  \"feebe2fbb4b9f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"edf8b17fcdbb2c7fb8\",\n  \"ffffcca1dab441b6c4225ea8\",\n  \"ffffcca1dab441b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f7fcb9addd8e31a354\",\n  \"ffffccc2e69978c679238443\",\n  \"ffffccc2e69978c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fff7bcfec44fd95f0e\",\n  \"ffffd4fed98efe9929cc4c02\",\n  \"ffffd4fed98efe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ffeda0feb24cf03b20\",\n  \"ffffb2fecc5cfd8d3ce31a1c\",\n  \"ffffb2fecc5cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"deebf79ecae13182bd\",\n  \"eff3ffbdd7e76baed62171b5\",\n  \"eff3ffbdd7e76baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5e0a1d99b31a354\",\n  \"edf8e9bae4b374c476238b45\",\n  \"edf8e9bae4b374c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f0f0f0bdbdbd636363\",\n  \"f7f7f7cccccc969696525252\",\n  \"f7f7f7cccccc969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"efedf5bcbddc756bb1\",\n  \"f2f0f7cbc9e29e9ac86a51a3\",\n  \"f2f0f7cbc9e29e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee0d2fc9272de2d26\",\n  \"fee5d9fcae91fb6a4acb181d\",\n  \"fee5d9fcae91fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee6cefdae6be6550d\",\n  \"feeddefdbe85fd8d3cd94701\",\n  \"feeddefdbe85fd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\"\n).map(colors);\n\nexport default ramp(scheme);\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar c = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  c.h = 360 * t - 100;\n  c.s = 1.5 - 1.5 * ts;\n  c.l = 0.8 - 0.9 * ts;\n  return c + \"\";\n}\n","import colors from \"../colors.js\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","import { interpolateCool, interpolateInferno, interpolateMagma, interpolatePlasma, interpolateViridis, interpolateWarm, schemeBlues, schemeBuGn, schemeBuPu, schemeGnBu, schemeGreens, schemeGreys, schemeOranges, schemeOrRd, schemePuBu, schemePuBuGn, schemePuRd, schemePurples, schemeRdPu, schemeReds, schemeYlGn, schemeYlGnBu, schemeYlOrBr, schemeYlOrRd, } from 'd3-scale-chromatic';\nimport { range } from 'd3-array';\nimport { scalePow, scaleSequential, scaleSequentialPow } from 'd3-scale';\nimport { interpolateBasis, interpolateRgbBasis } from 'd3-interpolate';\nimport { color as d3color, hcl, rgb as colorRgb } from 'd3-color';\nconst DEFAULT_OUTLINE_COLOR = '#fff';\nconst DEFAULT_DIMMED_OPACITY = 0.4;\nconst DEFAULT_FLOW_MIN_COLOR = 'rgba(240,240,240,0.5)';\nconst DEFAULT_FLOW_COLOR_SCHEME = [DEFAULT_FLOW_MIN_COLOR, '#137CBD'];\nconst DEFAULT_LOCATION_AREA_COLOR = 'rgba(220,220,220,0.5)';\nconst DEFAULT_FLOW_COLOR_SCHEME_POSITIVE = [DEFAULT_FLOW_MIN_COLOR, '#f6654e'];\nconst DEFAULT_FLOW_COLOR_SCHEME_NEGATIVE = [DEFAULT_FLOW_MIN_COLOR, '#00a9cc'];\nconst FALLBACK_COLOR_RGBA = [255, 255, 255, 255];\nexport function opacityFloatToInteger(opacity) {\n    return Math.round(opacity * 255);\n}\nexport function opacifyHex(hexCode, opacity) {\n    const c = d3color(hexCode);\n    if (!c) {\n        console.warn('Invalid color: ', hexCode);\n        return `rgba(255, 255, 255, ${opacity})`;\n    }\n    const col = c.rgb();\n    return `rgba(${col.r}, ${col.g}, ${col.b}, ${opacity})`;\n}\nexport function colorAsRgba(color) {\n    if (Array.isArray(color)) {\n        return color;\n    }\n    const col = d3color(color);\n    if (!col) {\n        console.warn('Invalid color: ', color);\n        return FALLBACK_COLOR_RGBA;\n    }\n    const rgbColor = col.rgb();\n    return [\n        Math.floor(rgbColor.r),\n        Math.floor(rgbColor.g),\n        Math.floor(rgbColor.b),\n        opacityFloatToInteger(col.opacity),\n    ];\n}\nfunction colorAsRgbaOr(color, defaultColor) {\n    if (color) {\n        return colorAsRgba(color);\n    }\n    if (typeof defaultColor === 'string') {\n        return colorAsRgba(defaultColor);\n    }\n    return defaultColor;\n}\nconst asScheme = (scheme) => scheme[scheme.length - 1];\nexport var ColorScheme;\n(function (ColorScheme) {\n    ColorScheme[\"primary\"] = \"#162d3c\";\n})(ColorScheme || (ColorScheme = {}));\nconst SCALE_NUM_STEPS = 20;\nconst getColorSteps = (interpolate) => range(0, SCALE_NUM_STEPS + 1)\n    .map((i) => interpolate(i / SCALE_NUM_STEPS))\n    .reverse();\nconst FLOW_MIN_COLOR = 'rgba(240,240,240,0.5)';\nexport const GRAYISH = [FLOW_MIN_COLOR, ColorScheme.primary];\nconst schemeBluYl = [\n    '#f7feae',\n    '#b7e6a5',\n    '#7ccba2',\n    '#46aea0',\n    '#089099',\n    '#00718b',\n    '#045275',\n];\nconst schemeEmrld = [\n    '#d3f2a3',\n    '#97e196',\n    '#6cc08b',\n    '#4c9b82',\n    '#217a79',\n    '#105965',\n    '#074050',\n];\nexport const schemeTeal = [\n    '#d1eeea',\n    '#a8dbd9',\n    '#85c4c9',\n    '#68abb8',\n    '#4f90a6',\n    '#3b738f',\n    '#2a5674',\n];\nexport const DEFAULT_COLOR_SCHEME = schemeTeal;\nexport const COLOR_SCHEMES = {\n    Blues: asScheme(schemeBlues),\n    BluGrn: [\n        '#c4e6c3',\n        '#96d2a4',\n        '#6dbc90',\n        '#4da284',\n        '#36877a',\n        '#266b6e',\n        '#1d4f60',\n    ],\n    BluYl: schemeBluYl,\n    BrwnYl: [\n        '#ede5cf',\n        '#e0c2a2',\n        '#d39c83',\n        '#c1766f',\n        '#a65461',\n        '#813753',\n        '#541f3f',\n    ],\n    BuGn: asScheme(schemeBuGn),\n    BuPu: asScheme(schemeBuPu),\n    Burg: [\n        '#ffc6c4',\n        '#f4a3a8',\n        '#e38191',\n        '#cc607d',\n        '#ad466c',\n        '#8b3058',\n        '#672044',\n    ],\n    BurgYl: [\n        '#fbe6c5',\n        '#f5ba98',\n        '#ee8a82',\n        '#dc7176',\n        '#c8586c',\n        '#9c3f5d',\n        '#70284a',\n    ],\n    Cool: getColorSteps(interpolateCool),\n    DarkMint: [\n        '#d2fbd4',\n        '#a5dbc2',\n        '#7bbcb0',\n        '#559c9e',\n        '#3a7c89',\n        '#235d72',\n        '#123f5a',\n    ],\n    Emrld: schemeEmrld,\n    GnBu: asScheme(schemeGnBu),\n    Grayish: GRAYISH,\n    Greens: asScheme(schemeGreens),\n    Greys: asScheme(schemeGreys),\n    Inferno: getColorSteps(interpolateInferno),\n    Magenta: [\n        '#f3cbd3',\n        '#eaa9bd',\n        '#dd88ac',\n        '#ca699d',\n        '#b14d8e',\n        '#91357d',\n        '#6c2167',\n    ],\n    Magma: getColorSteps(interpolateMagma),\n    Mint: [\n        '#e4f1e1',\n        '#b4d9cc',\n        '#89c0b6',\n        '#63a6a0',\n        '#448c8a',\n        '#287274',\n        '#0d585f',\n    ],\n    Oranges: asScheme(schemeOranges),\n    OrRd: asScheme(schemeOrRd),\n    OrYel: [\n        '#ecda9a',\n        '#efc47e',\n        '#f3ad6a',\n        '#f7945d',\n        '#f97b57',\n        '#f66356',\n        '#ee4d5a',\n    ],\n    Peach: [\n        '#fde0c5',\n        '#facba6',\n        '#f8b58b',\n        '#f59e72',\n        '#f2855d',\n        '#ef6a4c',\n        '#eb4a40',\n    ],\n    Plasma: getColorSteps(interpolatePlasma),\n    PinkYl: [\n        '#fef6b5',\n        '#ffdd9a',\n        '#ffc285',\n        '#ffa679',\n        '#fa8a76',\n        '#f16d7a',\n        '#e15383',\n    ],\n    PuBu: asScheme(schemePuBu),\n    PuBuGn: asScheme(schemePuBuGn),\n    PuRd: asScheme(schemePuRd),\n    Purp: [\n        '#f3e0f7',\n        '#e4c7f1',\n        '#d1afe8',\n        '#b998dd',\n        '#9f82ce',\n        '#826dba',\n        '#63589f',\n    ],\n    Purples: asScheme(schemePurples),\n    PurpOr: [\n        '#f9ddda',\n        '#f2b9c4',\n        '#e597b9',\n        '#ce78b3',\n        '#ad5fad',\n        '#834ba0',\n        '#573b88',\n    ],\n    RdPu: asScheme(schemeRdPu),\n    RedOr: [\n        '#f6d2a9',\n        '#f5b78e',\n        '#f19c7c',\n        '#ea8171',\n        '#dd686c',\n        '#ca5268',\n        '#b13f64',\n    ],\n    Reds: asScheme(schemeReds),\n    Sunset: [\n        '#f3e79b',\n        '#fac484',\n        '#f8a07e',\n        '#eb7f86',\n        '#ce6693',\n        '#a059a0',\n        '#5c53a5',\n    ],\n    SunsetDark: [\n        '#fcde9c',\n        '#faa476',\n        '#f0746e',\n        '#e34f6f',\n        '#dc3977',\n        '#b9257a',\n        '#7c1d6f',\n    ],\n    Teal: schemeTeal,\n    TealGrn: [\n        '#b0f2bc',\n        '#89e8ac',\n        '#67dba5',\n        '#4cc8a3',\n        '#38b2a3',\n        '#2c98a0',\n        '#257d98',\n    ],\n    Viridis: getColorSteps(interpolateViridis),\n    Warm: getColorSteps(interpolateWarm),\n    YlGn: asScheme(schemeYlGn),\n    YlGnBu: asScheme(schemeYlGnBu),\n    YlOrBr: asScheme(schemeYlOrBr),\n    YlOrRd: asScheme(schemeYlOrRd),\n};\nexport const COLOR_SCHEME_KEYS = Object.keys(COLOR_SCHEMES);\nconst complementary = '#f52020';\nconst baseDiffColor = '#17a5be';\nconst diffColors = {\n    negative: {\n        flows: {\n            scheme: [FLOW_MIN_COLOR, baseDiffColor],\n        },\n    },\n    positive: {\n        flows: {\n            scheme: [FLOW_MIN_COLOR, complementary],\n        },\n    },\n    locationAreas: {\n        outline: 'rgba(92,112,128,0.5)',\n        normal: 'rgba(220,220,220,0.5)',\n    },\n    outlineColor: 'rgb(230,233,237)',\n};\nexport function getFlowmapColors(settings) {\n    return getColors(false, // TODO: diffMode\n    settings.colorScheme, settings.darkMode, settings.fadeEnabled, settings.fadeOpacityEnabled, settings.fadeAmount, settings.animationEnabled);\n}\nexport function getColors(diffMode, colorScheme, darkMode, fadeEnabled, fadeOpacityEnabled, fadeAmount, animate) {\n    if (diffMode) {\n        return diffColors;\n    }\n    let scheme;\n    if (Array.isArray(colorScheme)) {\n        scheme = colorScheme;\n    }\n    else {\n        scheme =\n            (colorScheme && COLOR_SCHEMES[colorScheme]) || DEFAULT_COLOR_SCHEME;\n        if (darkMode) {\n            scheme = scheme.slice().reverse();\n        }\n    }\n    // if (animate)\n    // if (fadeAmount > 0)\n    {\n        const indices = range(0, Math.max(10, scheme.length));\n        const N = indices.length - 1;\n        const colorScale = scaleSequential(interpolateRgbBasis(scheme)).domain([\n            0,\n            N,\n        ]);\n        if (!fadeEnabled || fadeAmount === 0) {\n            scheme = indices.map((c, i) => colorScale(i));\n        }\n        else {\n            const amount = scalePow()\n                // .exponent(animate ? 1 : 1/2.5)\n                // .exponent(animate ? 100 : 50)\n                // .exponent(animate ? 20 : 5)\n                // .exponent(1/2.5)\n                .exponent(1.5)\n                .domain([N, 0])\n                // .range([fadeAmount/100*(animate?2:1), 0])\n                // .range([0, fadeAmount/100*(animate?2:1)])\n                // .range(darkMode ? [1-fadeAmount/100, 1] : [1, 1 - fadeAmount/100])\n                // .range(darkMode ? [1 - fadeAmount/100, 1] : [fadeAmount/100, 0])\n                // .range([1 - fadeAmount/100, 1])\n                .range([0, (2 * fadeAmount) / 100]);\n            scheme = indices.map((c, i) => {\n                const color = colorScale(i);\n                const a = amount(i);\n                if (color == null || a == null)\n                    return '#000';\n                const col = hcl(color);\n                col.l = darkMode ? col.l - col.l * a : col.l + (100 - col.l) * a;\n                col.c = col.c - col.c * (a / 4);\n                if (fadeOpacityEnabled) {\n                    col.opacity = col.opacity * (1.0 - a);\n                }\n                return col.toString();\n            });\n        }\n    }\n    return {\n        darkMode,\n        flows: {\n            scheme,\n        },\n        locationCircles: {\n            outgoing: darkMode ? '#000' : '#fff',\n        },\n        outlineColor: darkMode ? '#000' : 'rgba(255, 255, 255, 0.5)',\n    };\n}\nfunction interpolateRgbaBasis(colors) {\n    const spline = interpolateBasis;\n    const n = colors.length;\n    let r = new Array(n), g = new Array(n), b = new Array(n), opacity = new Array(n), i, color;\n    for (i = 0; i < n; ++i) {\n        color = colorRgb(colors[i]);\n        r[i] = color.r || 0;\n        g[i] = color.g || 0;\n        b[i] = color.b || 0;\n        opacity[i] = color.opacity || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    opacity = spline(opacity);\n    // color.opacity = 1;\n    return function (t) {\n        color.r = r(t);\n        color.g = g(t);\n        color.b = b(t);\n        color.opacity = opacity(t);\n        return color + '';\n    };\n}\nexport function createFlowColorScale(domain, scheme, animate) {\n    const scale = scaleSequentialPow(interpolateRgbaBasis(scheme))\n        // @ts-ignore\n        .exponent(animate ? 1 / 2 : 1 / 3)\n        .domain(domain);\n    return (value) => colorAsRgba(scale(value));\n}\nexport function getFlowColorScale(colors, magnitudeExtent, animate) {\n    const minMagnitude = magnitudeExtent ? magnitudeExtent[0] : 0;\n    const maxMagnitude = magnitudeExtent ? magnitudeExtent[1] : 0;\n    if (isDiffColorsRGBA(colors)) {\n        const posScale = createFlowColorScale([0, maxMagnitude], colors.positive.flows.scheme, animate);\n        const negScale = createFlowColorScale([0, minMagnitude], colors.negative.flows.scheme, animate);\n        return (magnitude) => magnitude >= 0 ? posScale(magnitude) : negScale(magnitude);\n    }\n    const scale = createFlowColorScale([0, maxMagnitude || 0], colors.flows.scheme, animate);\n    return (magnitude) => scale(magnitude);\n}\nexport function isDiffColors(colors) {\n    return colors.positive !== undefined;\n}\nexport function isDiffColorsRGBA(colors) {\n    return colors.positive !== undefined;\n}\nfunction getLocationAreaColorsRGBA(colors, darkMode) {\n    const normalColor = (colors && colors.normal) || DEFAULT_LOCATION_AREA_COLOR;\n    const normalColorHcl = hcl(normalColor);\n    const locationAreasNormal = colorAsRgba(normalColor);\n    return {\n        normal: locationAreasNormal,\n        connected: colorAsRgbaOr(colors && colors.connected, locationAreasNormal),\n        highlighted: colorAsRgbaOr(colors && colors.highlighted, opacifyHex(normalColorHcl[darkMode ? 'brighter' : 'darker'](1).toString(), 0.5)),\n        selected: colorAsRgbaOr(colors && colors.selected, opacifyHex(normalColorHcl[darkMode ? 'brighter' : 'darker'](2).toString(), 0.8)),\n        outline: colorAsRgbaOr(colors && colors.outline, colorAsRgba(normalColorHcl[darkMode ? 'brighter' : 'darker'](4).toString())),\n    };\n}\nfunction getFlowAndCircleColors(inputColors, defaultFlowColorScheme, darkMode) {\n    var _a, _b, _c;\n    const flowColorScheme = (inputColors && inputColors.flows && inputColors.flows.scheme) ||\n        defaultFlowColorScheme;\n    const maxFlowColorHcl = hcl(flowColorScheme[flowColorScheme.length - 1]);\n    const flowColorHighlighted = colorAsRgbaOr(inputColors && inputColors.flows && inputColors.flows.highlighted, colorAsRgba(maxFlowColorHcl[darkMode ? 'brighter' : 'darker'](0.7).toString()));\n    const emptyColor = colorAsRgbaOr((_a = inputColors === null || inputColors === void 0 ? void 0 : inputColors.locationCircles) === null || _a === void 0 ? void 0 : _a.empty, darkMode ? '#000' : '#fff');\n    const innerColor = colorAsRgbaOr(inputColors &&\n        inputColors.locationCircles &&\n        inputColors.locationCircles.inner, maxFlowColorHcl.toString());\n    return {\n        flows: {\n            scheme: flowColorScheme,\n            highlighted: flowColorHighlighted,\n        },\n        locationCircles: {\n            inner: innerColor,\n            outgoing: colorAsRgbaOr(inputColors &&\n                inputColors.locationCircles &&\n                inputColors.locationCircles.outgoing, darkMode ? '#000' : '#fff'),\n            incoming: colorAsRgbaOr(inputColors &&\n                inputColors.locationCircles &&\n                inputColors.locationCircles.incoming, maxFlowColorHcl[darkMode ? 'brighter' : 'darker'](1.25).toString()),\n            highlighted: colorAsRgbaOr(inputColors &&\n                inputColors.locationCircles &&\n                inputColors.locationCircles.highlighted, flowColorHighlighted),\n            empty: emptyColor,\n            outlineEmptyMix: (_c = (_b = inputColors === null || inputColors === void 0 ? void 0 : inputColors.locationCircles) === null || _b === void 0 ? void 0 : _b.outlineEmptyMix) !== null && _c !== void 0 ? _c : 0.4,\n        },\n    };\n}\nfunction getBaseColorsRGBA(colors) {\n    const darkMode = colors && colors.darkMode ? true : false;\n    return {\n        darkMode,\n        locationAreas: getLocationAreaColorsRGBA(colors && colors.locationAreas, darkMode),\n        outlineColor: colorAsRgba((colors && colors.outlineColor) || DEFAULT_OUTLINE_COLOR),\n        dimmedOpacity: colors && colors.dimmedOpacity != null\n            ? colors.dimmedOpacity\n            : DEFAULT_DIMMED_OPACITY,\n    };\n}\nexport function getColorsRGBA(colors) {\n    const baseColorsRGBA = getBaseColorsRGBA(colors);\n    return Object.assign(Object.assign({}, baseColorsRGBA), getFlowAndCircleColors(colors, DEFAULT_FLOW_COLOR_SCHEME, baseColorsRGBA.darkMode));\n}\nexport function getDiffColorsRGBA(colors) {\n    const baseColorsRGBA = getBaseColorsRGBA(colors);\n    return Object.assign(Object.assign({}, baseColorsRGBA), { positive: getFlowAndCircleColors(colors && colors.positive, DEFAULT_FLOW_COLOR_SCHEME_POSITIVE, baseColorsRGBA.darkMode), negative: getFlowAndCircleColors(colors && colors.negative, DEFAULT_FLOW_COLOR_SCHEME_NEGATIVE, baseColorsRGBA.darkMode) });\n}\nexport function rgbaAsString(color) {\n    return `rgba(${color.join(',')})`;\n}\nexport function midpoint(a, b, zeroToOne) {\n    return a + (b - a) * zeroToOne;\n}\nexport function mixColorsRGBA(color1, color2, zeroToOne) {\n    return color1.map((v, i) => midpoint(v, color2[i], zeroToOne));\n}\nexport default getColors;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sb3JzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2NvbG9ycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsZUFBZSxFQUNmLGtCQUFrQixFQUNsQixnQkFBZ0IsRUFDaEIsaUJBQWlCLEVBQ2pCLGtCQUFrQixFQUNsQixlQUFlLEVBQ2YsV0FBVyxFQUNYLFVBQVUsRUFDVixVQUFVLEVBQ1YsVUFBVSxFQUNWLFlBQVksRUFDWixXQUFXLEVBQ1gsYUFBYSxFQUNiLFVBQVUsRUFDVixVQUFVLEVBQ1YsWUFBWSxFQUNaLFVBQVUsRUFDVixhQUFhLEVBQ2IsVUFBVSxFQUNWLFVBQVUsRUFDVixVQUFVLEVBQ1YsWUFBWSxFQUNaLFlBQVksRUFDWixZQUFZLEdBQ2IsTUFBTSxvQkFBb0IsQ0FBQztBQUM1QixPQUFPLEVBQUMsS0FBSyxFQUFDLE1BQU0sVUFBVSxDQUFDO0FBQy9CLE9BQU8sRUFBQyxRQUFRLEVBQUUsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sVUFBVSxDQUFDO0FBQ3ZFLE9BQU8sRUFBQyxnQkFBZ0IsRUFBRSxtQkFBbUIsRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBQ3JFLE9BQU8sRUFBQyxLQUFLLElBQUksT0FBTyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksUUFBUSxFQUFDLE1BQU0sVUFBVSxDQUFDO0FBR2hFLE1BQU0scUJBQXFCLEdBQUcsTUFBTSxDQUFDO0FBQ3JDLE1BQU0sc0JBQXNCLEdBQUcsR0FBRyxDQUFDO0FBQ25DLE1BQU0sc0JBQXNCLEdBQUcsdUJBQXVCLENBQUM7QUFDdkQsTUFBTSx5QkFBeUIsR0FBRyxDQUFDLHNCQUFzQixFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQ3RFLE1BQU0sMkJBQTJCLEdBQUcsdUJBQXVCLENBQUM7QUFFNUQsTUFBTSxrQ0FBa0MsR0FBRyxDQUFDLHNCQUFzQixFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQy9FLE1BQU0sa0NBQWtDLEdBQUcsQ0FB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O0FBRUQsTUFBTSxVQUFVLGlCQUFpQixDQUMvQixNQUE4QjtJQUU5QixNQUFNLGNBQWMsR0FBRyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNqRCx1Q0FDSyxjQUFjLEtBQ2pCLFFBQVEsRUFBRSxzQkFBc0IsQ0FDOUIsTUFBTSxJQUFJLE1BQU0sQ0FBQyxRQUFRLEVBQ3pCLGtDQUFrQyxFQUNsQyxjQUFjLENBQUMsUUFBUSxDQUN4QixFQUNELFFBQVEsRUFBRSxzQkFBc0IsQ0FDOUIsTUFBTSxJQUFJLE1BQU0sQ0FBQyxRQUFRLEVBQ3pCLGtDQUFrQyxFQUNsQyxjQUFjLENBQUMsUUFBUSxDQUN4QixJQUNEO0FBQ0osQ0FBQztBQUVELE1BQU0sVUFBVSxZQUFZLENBQUMsS0FBVztJQUN0QyxPQUFPLFFBQVEsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDO0FBQ3BDLENBQUM7QUFFRCxNQUFNLFVBQVUsUUFBUSxDQUFDLENBQVMsRUFBRSxDQUFTLEVBQUUsU0FBaUI7SUFDOUQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDO0FBQ2pDLENBQUM7QUFFRCxNQUFNLFVBQVUsYUFBYSxDQUMzQixNQUFZLEVBQ1osTUFBWSxFQUNaLFNBQWlCO0lBRWpCLE9BQU8sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFTLENBQUM7QUFDekUsQ0FBQztBQUVELGVBQWUsU0FBUyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgaW50ZXJwb2xhdGVDb29sLFxuICBpbnRlcnBvbGF0ZUluZmVybm8sXG4gIGludGVycG9sYXRlTWFnbWEsXG4gIGludGVycG9sYXRlUGxhc21hLFxuICBpbnRlcnBvbGF0ZVZpcmlkaXMsXG4gIGludGVycG9sYXRlV2FybSxcbiAgc2NoZW1lQmx1ZXMsXG4gIHNjaGVtZUJ1R24sXG4gIHNjaGVtZUJ1UHUsXG4gIHNjaGVtZUduQnUsXG4gIHNjaGVtZUdyZWVucyxcbiAgc2NoZW1lR3JleXMsXG4gIHNjaGVtZU9yYW5nZXMsXG4gIHNjaGVtZU9yUmQsXG4gIHNjaGVtZVB1QnUsXG4gIHNjaGVtZVB1QnVHbixcbiAgc2NoZW1lUHVSZCxcbiAgc2NoZW1lUHVycGxlcyxcbiAgc2NoZW1lUmRQdSxcbiAgc2NoZW1lUmVkcyxcbiAgc2NoZW1lWWxHbixcbiAgc2NoZW1lWWxHbkJ1LFxuICBzY2hlbWVZbE9yQnIsXG4gIHNjaGVtZVlsT3JSZCxcbn0gZnJvbSAnZDMtc2NhbGUtY2hyb21hdGljJztcbmltcG9ydCB7cmFuZ2V9IGZyb20gJ2QzLWFycmF5JztcbmltcG9ydCB7c2NhbGVQb3csIHNjYWxlU2VxdWVudGlhbCwgc2NhbGVTZXF1ZW50aWFsUG93fSBmcm9tICdkMy1zY2FsZSc7XG5pbXBvcnQge2ludGVycG9sYXRlQmFzaXMsIGludGVycG9sYXRlUmdiQmFzaXN9IGZyb20gJ2QzLWludGVycG9sYXRlJztcbmltcG9ydCB7Y29sb3IgYXMgZDNjb2xvciwgaGNsLCByZ2IgYXMgY29sb3JSZ2J9IGZyb20gJ2QzLWNvbG9yJztcbmltcG9ydCB7U2V0dGluZ3NTdGF0ZX0gZnJvbSAnLi9GbG93bWFwU3RhdGUnO1xuXG5jb25zdCBERUZBVUxUX09VVExJTkVfQ09MT1IgPSAnI2ZmZic7XG5jb25zdCBERUZBVUxUX0RJTU1FRF9PUEFDSVRZID0gMC40O1xuY29uc3QgREVGQVVMVF9GTE9XX01JTl9DT0xPUiA9ICdyZ2JhKDI0MCwyNDAsMjQwLDAuNSknO1xuY29uc3QgREVGQVVMVF9GTE9XX0NPTE9SX1NDSEVNRSA9IFtERUZBVUxUX0ZMT1dfTUlOX0NPTE9SLCAnIzEzN0NCRCddO1xuY29uc3QgREVGQVVMVF9MT0NBVElPTl9BUkVBX0NPTE9SID0gJ3JnYmEoMjIwLDIyMCwyMjAsMC41KSc7XG5cbmNvbnN0IERFRkFVTFRfRkxPV19DT0xPUl9TQ0hFTUVfUE9TSVRJVkUgPSBbREVGQVVMVF9GTE9XX01JTl9DT0xPUiwgJyNmNjY1NGUnXTtcbmNvbnN0IERFRkFVTFRfRkxPV19DT0xPUl9TQ0hFTUVfTkVHQVRJVkUgPSBbREVGQVVMVF9GTE9XX01JTl9DT0xPUiwgJyMwMGE5Y2MnXTtcblxuZXhwb3J0IHR5cGUgQ29sb3JTY2FsZSA9ICh2YWx1ZTogbnVtYmVyKSA9PiBSR0JBO1xuZXhwb3J0IHR5cGUgUkdCQSA9IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuXG5jb25zdCBGQUxMQkFDS19DT0xPUl9SR0JBOiBSR0JBID0gWzI1NSwgMjU1LCAyNTUsIDI1NV07XG5cbmV4cG9ydCBmdW5jdGlvbiBvcGFjaXR5RmxvYXRUb0ludGVnZXIob3BhY2l0eTogbnVtYmVyKTogbnVtYmVyIHtcbiAgcmV0dXJuIE1hdGgucm91bmQob3BhY2l0eSAqIDI1NSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvcGFjaWZ5SGV4KGhleENvZGU6IHN0cmluZywgb3BhY2l0eTogbnVtYmVyKTogc3RyaW5nIHtcbiAgY29uc3QgYyA9IGQzY29sb3IoaGV4Q29kZSk7XG4gIGlmICghYykge1xuICAgIGNvbnNvbGUud2FybignSW52YWxpZCBjb2xvcjogJywgaGV4Q29kZSk7XG4gICAgcmV0dXJuIGByZ2JhKDI1NSwgMjU1LCAyNTUsICR7b3BhY2l0eX0pYDtcbiAgfVxuICBjb25zdCBjb2wgPSBjLnJnYigpO1xuICByZXR1cm4gYHJnYmEoJHtjb2wucn0sICR7Y29sLmd9LCAke2NvbC5ifSwgJHtvcGFjaXR5fSlgO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29sb3JBc1JnYmEoY29sb3I6IHN0cmluZyB8IG51bWJlcltdKTogUkdCQSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGNvbG9yKSkge1xuICAgIHJldHVybiBjb2xvciBhcyBSR0JBO1xuICB9XG4gIGNvbnN0IGNvbCA9IGQzY29sb3IoY29sb3IpO1xuICBpZiAoIWNvbCkge1xuICAgIGNvbnNvbGUud2FybignSW52YWxpZCBjb2xvcjogJywgY29sb3IpO1xuICAgIHJldHVybiBGQUxMQkFDS19DT0xPUl9SR0JBO1xuICB9XG4gIGNvbnN0IHJnYkNvbG9yID0gY29sLnJnYigpO1xuICByZXR1cm4gW1xuICAgIE1hdGguZmxvb3IocmdiQ29sb3IuciksXG4gICAgTWF0aC5mbG9vcihyZ2JDb2xvci5nKSxcbiAgICBNYXRoLmZsb29yKHJnYkNvbG9yLmIpLFxuICAgIG9wYWNpdHlGbG9hdFRvSW50ZWdlcihjb2wub3BhY2l0eSksXG4gIF07XG59XG5cbmZ1bmN0aW9uIGNvbG9yQXNSZ2JhT3IoXG4gIGNvbG9yOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gIGRlZmF1bHRDb2xvcjogUkdCQSB8IHN0cmluZyxcbik6IFJHQkEge1xuICBpZiAoY29sb3IpIHtcbiAgICByZXR1cm4gY29sb3JBc1JnYmEoY29sb3IpO1xuICB9XG4gIGlmICh0eXBlb2YgZGVmYXVsdENvbG9yID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBjb2xvckFzUmdiYShkZWZhdWx0Q29sb3IpO1xuICB9XG4gIHJldHVybiBkZWZhdWx0Q29sb3I7XG59XG5cbmNvbnN0IGFzU2NoZW1lID0gKHNjaGVtZTogUmVhZG9ubHlBcnJheTxSZWFkb25seUFycmF5PHN0cmluZz4+KSA9PlxuICBzY2hlbWVbc2NoZW1lLmxlbmd0aCAtIDFdIGFzIHN0cmluZ1tdO1xuXG5leHBvcnQgZW51bSBDb2xvclNjaGVtZSB7XG4gIHByaW1hcnkgPSAnIzE2MmQzYycsXG59XG5cbmNvbnN0IFNDQUxFX05VTV9TVEVQUyA9IDIwO1xuY29uc3QgZ2V0Q29sb3JTdGVwcyA9IChpbnRlcnBvbGF0ZTogKHg6IG51bWJlcikgPT4gc3RyaW5nKSA9PlxuICByYW5nZSgwLCBTQ0FMRV9OVU1fU1RFUFMgKyAxKVxuICAgIC5tYXAoKGkpID0+IGludGVycG9sYXRlKGkgLyBTQ0FMRV9OVU1fU1RFUFMpKVxuICAgIC5yZXZlcnNlKCk7XG5cbmNvbnN0IEZMT1dfTUlOX0NPTE9SID0gJ3JnYmEoMjQwLDI0MCwyNDAsMC41KSc7XG5leHBvcnQgY29uc3QgR1JBWUlTSCA9IFtGTE9XX01JTl9DT0xPUiwgQ29sb3JTY2hlbWUucHJpbWFyeV07XG5jb25zdCBzY2hlbWVCbHVZbCA9IFtcbiAgJyNmN2ZlYWUnLFxuICAnI2I3ZTZhNScsXG4gICcjN2NjYmEyJyxcbiAgJyM0NmFlYTAnLFxuICAnIzA4OTA5OScsXG4gICcjMDA3MThiJyxcbiAgJyMwNDUyNzUnLFxuXTtcblxuY29uc3Qgc2NoZW1lRW1ybGQgPSBbXG4gICcjZDNmMmEzJyxcbiAgJyM5N2UxOTYnLFxuICAnIzZjYzA4YicsXG4gICcjNGM5YjgyJyxcbiAgJyMyMTdhNzknLFxuICAnIzEwNTk2NScsXG4gICcjMDc0MDUwJyxcbl07XG5cbmV4cG9ydCBjb25zdCBzY2hlbWVUZWFsID0gW1xuICAnI2QxZWVlYScsXG4gICcjYThkYmQ5JyxcbiAgJyM4NWM0YzknLFxuICAnIzY4YWJiOCcsXG4gICcjNGY5MGE2JyxcbiAgJyMzYjczOGYnLFxuICAnIzJhNTY3NCcsXG5dO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9DT0xPUl9TQ0hFTUUgPSBzY2hlbWVUZWFsO1xuZXhwb3J0IGNvbnN0IENPTE9SX1NDSEVNRVM6IHtba2V5OiBzdHJpbmddOiBzdHJpbmdbXX0gPSB7XG4gIEJsdWVzOiBhc1NjaGVtZShzY2hlbWVCbHVlcyksXG4gIEJsdUdybjogW1xuICAgICcjYzRlNmMzJyxcbiAgICAnIzk2ZDJhNCcsXG4gICAgJyM2ZGJjOTAnLFxuICAgICcjNGRhMjg0JyxcbiAgICAnIzM2ODc3YScsXG4gICAgJyMyNjZiNmUnLFxuICAgICcjMWQ0ZjYwJyxcbiAgXSxcbiAgQmx1WWw6IHNjaGVtZUJsdVlsLFxuICBCcnduWWw6IFtcbiAgICAnI2VkZTVjZicsXG4gICAgJyNlMGMyYTInLFxuICAgICcjZDM5YzgzJyxcbiAgICAnI2MxNzY2ZicsXG4gICAgJyNhNjU0NjEnLFxuICAgICcjODEzNzUzJyxcbiAgICAnIzU0MWYzZicsXG4gIF0sXG4gIEJ1R246IGFzU2NoZW1lKHNjaGVtZUJ1R24pLFxuICBCdVB1OiBhc1NjaGVtZShzY2hlbWVCdVB1KSxcbiAgQnVyZzogW1xuICAgICcjZmZjNmM0JyxcbiAgICAnI2Y0YTNhOCcsXG4gICAgJyNlMzgxOTEnLFxuICAgICcjY2M2MDdkJyxcbiAgICAnI2FkNDY2YycsXG4gICAgJyM4YjMwNTgnLFxuICAgICcjNjcyMDQ0JyxcbiAgXSxcbiAgQnVyZ1lsOiBbXG4gICAgJyNmYmU2YzUnLFxuICAgICcjZjViYTk4JyxcbiAgICAnI2VlOGE4MicsXG4gICAgJyNkYzcxNzYnLFxuICAgICcjYzg1ODZjJyxcbiAgICAnIzljM2Y1ZCcsXG4gICAgJyM3MDI4NGEnLFxuICBdLFxuICBDb29sOiBnZXRDb2xvclN0ZXBzKGludGVycG9sYXRlQ29vbCksXG4gIERhcmtNaW50OiBbXG4gICAgJyNkMmZiZDQnLFxuICAgICcjYTVkYmMyJyxcbiAgICAnIzdiYmNiMCcsXG4gICAgJyM1NTljOWUnLFxuICAgICcjM2E3Yzg5JyxcbiAgICAnIzIzNWQ3MicsXG4gICAgJyMxMjNmNWEnLFxuICBdLFxuICBFbXJsZDogc2NoZW1lRW1ybGQsXG4gIEduQnU6IGFzU2NoZW1lKHNjaGVtZUduQnUpLFxuICBHcmF5aXNoOiBHUkFZSVNILFxuICBHcmVlbnM6IGFzU2NoZW1lKHNjaGVtZUdyZWVucyksXG4gIEdyZXlzOiBhc1NjaGVtZShzY2hlbWVHcmV5cyksXG4gIEluZmVybm86IGdldENvbG9yU3RlcHMoaW50ZXJwb2xhdGVJbmZlcm5vKSxcbiAgTWFnZW50YTogW1xuICAgICcjZjNjYmQzJyxcbiAgICAnI2VhYTliZCcsXG4gICAgJyNkZDg4YWMnLFxuICAgICcjY2E2OTlkJyxcbiAgICAnI2IxNGQ4ZScsXG4gICAgJyM5MTM1N2QnLFxuICAgICcjNmMyMTY3JyxcbiAgXSxcbiAgTWFnbWE6IGdldENvbG9yU3RlcHMoaW50ZXJwb2xhdGVNYWdtYSksXG4gIE1pbnQ6IFtcbiAgICAnI2U0ZjFlMScsXG4gICAgJyNiNGQ5Y2MnLFxuICAgICcjODljMGI2JyxcbiAgICAnIzYzYTZhMCcsXG4gICAgJyM0NDhjOGEnLFxuICAgICcjMjg3Mjc0JyxcbiAgICAnIzBkNTg1ZicsXG4gIF0sXG4gIE9yYW5nZXM6IGFzU2NoZW1lKHNjaGVtZU9yYW5nZXMpLFxuICBPclJkOiBhc1NjaGVtZShzY2hlbWVPclJkKSxcbiAgT3JZZWw6IFtcbiAgICAnI2VjZGE5YScsXG4gICAgJyNlZmM0N2UnLFxuICAgICcjZjNhZDZhJyxcbiAgICAnI2Y3OTQ1ZCcsXG4gICAgJyNmOTdiNTcnLFxuICAgICcjZjY2MzU2JyxcbiAgICAnI2VlNGQ1YScsXG4gIF0sXG4gIFBlYWNoOiBbXG4gICAgJyNmZGUwYzUnLFxuICAgICcjZmFjYmE2JyxcbiAgICAnI2Y4YjU4YicsXG4gICAgJyNmNTllNzInLFxuICAgICcjZjI4NTVkJyxcbiAgICAnI2VmNmE0YycsXG4gICAgJyNlYjRhNDAnLFxuICBdLFxuICBQbGFzbWE6IGdldENvbG9yU3RlcHMoaW50ZXJwb2xhdGVQbGFzbWEpLFxuICBQaW5rWWw6IFtcbiAgICAnI2ZlZjZiNScsXG4gICAgJyNmZmRkOWEnLFxuICAgICcjZmZjMjg1JyxcbiAgICAnI2ZmYTY3OScsXG4gICAgJyNmYThhNzYnLFxuICAgICcjZjE2ZDdhJyxcbiAgICAnI2UxNTM4MycsXG4gIF0sXG4gIFB1QnU6IGFzU2NoZW1lKHNjaGVtZVB1QnUpLFxuICBQdUJ1R246IGFzU2NoZW1lKHNjaGVtZVB1QnVHbiksXG4gIFB1UmQ6IGFzU2NoZW1lKHNjaGVtZVB1UmQpLFxuICBQdXJwOiBbXG4gICAgJyNmM2UwZjcnLFxuICAgICcjZTRjN2YxJyxcbiAgICAnI2QxYWZlOCcsXG4gICAgJyNiOTk4ZGQnLFxuICAgICcjOWY4MmNlJyxcbiAgICAnIzgyNmRiYScsXG4gICAgJyM2MzU4OWYnLFxuICBdLFxuICBQdXJwbGVzOiBhc1NjaGVtZShzY2hlbWVQdXJwbGVzKSxcbiAgUHVycE9yOiBbXG4gICAgJyNmOWRkZGEnLFxuICAgICcjZjJiOWM0JyxcbiAgICAnI2U1OTdiOScsXG4gICAgJyNjZTc4YjMnLFxuICAgICcjYWQ1ZmFkJyxcbiAgICAnIzgzNGJhMCcsXG4gICAgJyM1NzNiODgnLFxuICBdLFxuICBSZFB1OiBhc1NjaGVtZShzY2hlbWVSZFB1KSxcbiAgUmVkT3I6IFtcbiAgICAnI2Y2ZDJhOScsXG4gICAgJyNmNWI3OGUnLFxuICAgICcjZjE5YzdjJyxcbiAgICAnI2VhODE3MScsXG4gICAgJyNkZDY4NmMnLFxuICAgICcjY2E1MjY4JyxcbiAgICAnI2IxM2Y2NCcsXG4gIF0sXG4gIFJlZHM6IGFzU2NoZW1lKHNjaGVtZVJlZHMpLFxuICBTdW5zZXQ6IFtcbiAgICAnI2YzZTc5YicsXG4gICAgJyNmYWM0ODQnLFxuICAgICcjZjhhMDdlJyxcbiAgICAnI2ViN2Y4NicsXG4gICAgJyNjZTY2OTMnLFxuICAgICcjYTA1OWEwJyxcbiAgICAnIzVjNTNhNScsXG4gIF0sXG4gIFN1bnNldERhcms6IFtcbiAgICAnI2ZjZGU5YycsXG4gICAgJyNmYWE0NzYnLFxuICAgICcjZjA3NDZlJyxcbiAgICAnI2UzNGY2ZicsXG4gICAgJyNkYzM5NzcnLFxuICAgICcjYjkyNTdhJyxcbiAgICAnIzdjMWQ2ZicsXG4gIF0sXG4gIFRlYWw6IHNjaGVtZVRlYWwsXG4gIFRlYWxHcm46IFtcbiAgICAnI2IwZjJiYycsXG4gICAgJyM4OWU4YWMnLFxuICAgICcjNjdkYmE1JyxcbiAgICAnIzRjYzhhMycsXG4gICAgJyMzOGIyYTMnLFxuICAgICcjMmM5OGEwJyxcbiAgICAnIzI1N2Q5OCcsXG4gIF0sXG4gIFZpcmlkaXM6IGdldENvbG9yU3RlcHMoaW50ZXJwb2xhdGVWaXJpZGlzKSxcbiAgV2FybTogZ2V0Q29sb3JTdGVwcyhpbnRlcnBvbGF0ZVdhcm0pLFxuICBZbEduOiBhc1NjaGVtZShzY2hlbWVZbEduKSxcbiAgWWxHbkJ1OiBhc1NjaGVtZShzY2hlbWVZbEduQnUpLFxuICBZbE9yQnI6IGFzU2NoZW1lKHNjaGVtZVlsT3JCciksXG4gIFlsT3JSZDogYXNTY2hlbWUoc2NoZW1lWWxPclJkKSxcbn07XG5cbmV4cG9ydCBjb25zdCBDT0xPUl9TQ0hFTUVfS0VZUyA9IE9iamVjdC5rZXlzKENPTE9SX1NDSEVNRVMpO1xuXG5jb25zdCBjb21wbGVtZW50YXJ5ID0gJyNmNTIwMjAnO1xuY29uc3QgYmFzZURpZmZDb2xvciA9ICcjMTdhNWJlJztcblxuY29uc3QgZGlmZkNvbG9yczogRGlmZkNvbG9ycyA9IHtcbiAgbmVnYXRpdmU6IHtcbiAgICBmbG93czoge1xuICAgICAgc2NoZW1lOiBbRkxPV19NSU5fQ09MT1IsIGJhc2VEaWZmQ29sb3JdLFxuICAgIH0sXG4gIH0sXG4gIHBvc2l0aXZlOiB7XG4gICAgZmxvd3M6IHtcbiAgICAgIHNjaGVtZTogW0ZMT1dfTUlOX0NPTE9SLCBjb21wbGVtZW50YXJ5XSxcbiAgICB9LFxuICB9LFxuICBsb2NhdGlvbkFyZWFzOiB7XG4gICAgb3V0bGluZTogJ3JnYmEoOTIsMTEyLDEyOCwwLjUpJyxcbiAgICBub3JtYWw6ICdyZ2JhKDIyMCwyMjAsMjIwLDAuNSknLFxuICB9LFxuICBvdXRsaW5lQ29sb3I6ICdyZ2IoMjMwLDIzMywyMzcpJyxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGbG93bWFwQ29sb3JzKHNldHRpbmdzOiBTZXR0aW5nc1N0YXRlKTogQ29sb3JzIHwgRGlmZkNvbG9ycyB7XG4gIHJldHVybiBnZXRDb2xvcnMoXG4gICAgZmFsc2UsIC8vIFRPRE86IGRpZmZNb2RlXG4gICAgc2V0dGluZ3MuY29sb3JTY2hlbWUsXG4gICAgc2V0dGluZ3MuZGFya01vZGUsXG4gICAgc2V0dGluZ3MuZmFkZUVuYWJsZWQsXG4gICAgc2V0dGluZ3MuZmFkZU9wYWNpdHlFbmFibGVkLFxuICAgIHNldHRpbmdzLmZhZGVBbW91bnQsXG4gICAgc2V0dGluZ3MuYW5pbWF0aW9uRW5hYmxlZCxcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbG9ycyhcbiAgZGlmZk1vZGU6IGJvb2xlYW4sXG4gIGNvbG9yU2NoZW1lOiBzdHJpbmcgfCBzdHJpbmdbXSB8IHVuZGVmaW5lZCxcbiAgZGFya01vZGU6IGJvb2xlYW4sXG4gIGZhZGVFbmFibGVkOiBib29sZWFuLFxuICBmYWRlT3BhY2l0eUVuYWJsZWQ6IGJvb2xlYW4sXG4gIGZhZGVBbW91bnQ6IG51bWJlcixcbiAgYW5pbWF0ZTogYm9vbGVhbixcbik6IENvbG9ycyB8IERpZmZDb2xvcnMge1xuICBpZiAoZGlmZk1vZGUpIHtcbiAgICByZXR1cm4gZGlmZkNvbG9ycztcbiAgfVxuXG4gIGxldCBzY2hlbWU7XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkoY29sb3JTY2hlbWUpKSB7XG4gICAgc2NoZW1lID0gY29sb3JTY2hlbWU7XG4gIH0gZWxzZSB7XG4gICAgc2NoZW1lID1cbiAgICAgIChjb2xvclNjaGVtZSAmJiBDT0xPUl9TQ0hFTUVTW2NvbG9yU2NoZW1lXSkgfHwgREVGQVVMVF9DT0xPUl9TQ0hFTUU7XG4gICAgaWYgKGRhcmtNb2RlKSB7XG4gICAgICBzY2hlbWUgPSBzY2hlbWUuc2xpY2UoKS5yZXZlcnNlKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gaWYgKGFuaW1hdGUpXG4gIC8vIGlmIChmYWRlQW1vdW50ID4gMClcbiAge1xuICAgIGNvbnN0IGluZGljZXMgPSByYW5nZSgwLCBNYXRoLm1heCgxMCwgc2NoZW1lLmxlbmd0aCkpO1xuICAgIGNvbnN0IE4gPSBpbmRpY2VzLmxlbmd0aCAtIDE7XG4gICAgY29uc3QgY29sb3JTY2FsZSA9IHNjYWxlU2VxdWVudGlhbChpbnRlcnBvbGF0ZVJnYkJhc2lzKHNjaGVtZSkpLmRvbWFpbihbXG4gICAgICAwLFxuICAgICAgTixcbiAgICBdKTtcblxuICAgIGlmICghZmFkZUVuYWJsZWQgfHwgZmFkZUFtb3VudCA9PT0gMCkge1xuICAgICAgc2NoZW1lID0gaW5kaWNlcy5tYXAoKGMsIGkpID0+IGNvbG9yU2NhbGUoaSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhbW91bnQgPSBzY2FsZVBvdygpXG4gICAgICAgIC8vIC5leHBvbmVudChhbmltYXRlID8gMSA6IDEvMi41KVxuICAgICAgICAvLyAuZXhwb25lbnQoYW5pbWF0ZSA/IDEwMCA6IDUwKVxuICAgICAgICAvLyAuZXhwb25lbnQoYW5pbWF0ZSA/IDIwIDogNSlcbiAgICAgICAgLy8gLmV4cG9uZW50KDEvMi41KVxuICAgICAgICAuZXhwb25lbnQoMS41KVxuICAgICAgICAuZG9tYWluKFtOLCAwXSlcbiAgICAgICAgLy8gLnJhbmdlKFtmYWRlQW1vdW50LzEwMCooYW5pbWF0ZT8yOjEpLCAwXSlcbiAgICAgICAgLy8gLnJhbmdlKFswLCBmYWRlQW1vdW50LzEwMCooYW5pbWF0ZT8yOjEpXSlcbiAgICAgICAgLy8gLnJhbmdlKGRhcmtNb2RlID8gWzEtZmFkZUFtb3VudC8xMDAsIDFdIDogWzEsIDEgLSBmYWRlQW1vdW50LzEwMF0pXG4gICAgICAgIC8vIC5yYW5nZShkYXJrTW9kZSA/IFsxIC0gZmFkZUFtb3VudC8xMDAsIDFdIDogW2ZhZGVBbW91bnQvMTAwLCAwXSlcbiAgICAgICAgLy8gLnJhbmdlKFsxIC0gZmFkZUFtb3VudC8xMDAsIDFdKVxuICAgICAgICAucmFuZ2UoWzAsICgyICogZmFkZUFtb3VudCkgLyAxMDBdKTtcblxuICAgICAgc2NoZW1lID0gaW5kaWNlcy5tYXAoXG4gICAgICAgIChjLCBpKSA9PiB7XG4gICAgICAgICAgY29uc3QgY29sb3IgPSBjb2xvclNjYWxlKGkpO1xuICAgICAgICAgIGNvbnN0IGEgPSBhbW91bnQoaSk7XG4gICAgICAgICAgaWYgKGNvbG9yID09IG51bGwgfHwgYSA9PSBudWxsKSByZXR1cm4gJyMwMDAnO1xuICAgICAgICAgIGNvbnN0IGNvbCA9IGhjbChjb2xvcik7XG4gICAgICAgICAgY29sLmwgPSBkYXJrTW9kZSA/IGNvbC5sIC0gY29sLmwgKiBhIDogY29sLmwgKyAoMTAwIC0gY29sLmwpICogYTtcbiAgICAgICAgICBjb2wuYyA9IGNvbC5jIC0gY29sLmMgKiAoYSAvIDQpO1xuICAgICAgICAgIGlmIChmYWRlT3BhY2l0eUVuYWJsZWQpIHtcbiAgICAgICAgICAgIGNvbC5vcGFjaXR5ID0gY29sLm9wYWNpdHkgKiAoMS4wIC0gYSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBjb2wudG9TdHJpbmcoKTtcbiAgICAgICAgfSxcbiAgICAgICAgLy8gaW50ZXJwb2xhdGVSZ2JCYXNpcyhbY29sb3JTY2FsZShpKSwgZGFya01vZGUgPyAnIzAwMCcgOiAnI2ZmZiddKShhbW91bnQoaSkpXG4gICAgICAgIC8vIGludGVycG9sYXRlSHNsKGNvbG9yU2NhbGUoaSksIGRhcmtNb2RlID8gJyMwMDAnIDogJyNmZmYnKShhbW91bnQoaSkpLnRvU3RyaW5nKClcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBkYXJrTW9kZSxcbiAgICBmbG93czoge1xuICAgICAgc2NoZW1lLFxuICAgIH0sXG4gICAgbG9jYXRpb25DaXJjbGVzOiB7XG4gICAgICBvdXRnb2luZzogZGFya01vZGUgPyAnIzAwMCcgOiAnI2ZmZicsXG4gICAgfSxcbiAgICBvdXRsaW5lQ29sb3I6IGRhcmtNb2RlID8gJyMwMDAnIDogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC41KScsXG4gIH07XG59XG5cbmZ1bmN0aW9uIGludGVycG9sYXRlUmdiYUJhc2lzKGNvbG9yczogc3RyaW5nW10pIHtcbiAgY29uc3Qgc3BsaW5lID0gaW50ZXJwb2xhdGVCYXNpcztcbiAgY29uc3QgbiA9IGNvbG9ycy5sZW5ndGg7XG4gIGxldCByOiBhbnkgPSBuZXcgQXJyYXkobiksXG4gICAgZzogYW55ID0gbmV3IEFycmF5KG4pLFxuICAgIGI6IGFueSA9IG5ldyBBcnJheShuKSxcbiAgICBvcGFjaXR5OiBhbnkgPSBuZXcgQXJyYXkobiksXG4gICAgaSxcbiAgICBjb2xvcjogYW55O1xuICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgY29sb3IgPSBjb2xvclJnYihjb2xvcnNbaV0pO1xuICAgIHJbaV0gPSBjb2xvci5yIHx8IDA7XG4gICAgZ1tpXSA9IGNvbG9yLmcgfHwgMDtcbiAgICBiW2ldID0gY29sb3IuYiB8fCAwO1xuICAgIG9wYWNpdHlbaV0gPSBjb2xvci5vcGFjaXR5IHx8IDA7XG4gIH1cbiAgciA9IHNwbGluZShyKTtcbiAgZyA9IHNwbGluZShnKTtcbiAgYiA9IHNwbGluZShiKTtcbiAgb3BhY2l0eSA9IHNwbGluZShvcGFjaXR5KTtcbiAgLy8gY29sb3Iub3BhY2l0eSA9IDE7XG4gIHJldHVybiBmdW5jdGlvbiAodDogbnVtYmVyKSB7XG4gICAgY29sb3IuciA9IHIodCk7XG4gICAgY29sb3IuZyA9IGcodCk7XG4gICAgY29sb3IuYiA9IGIodCk7XG4gICAgY29sb3Iub3BhY2l0eSA9IG9wYWNpdHkodCk7XG4gICAgcmV0dXJuIGNvbG9yICsgJyc7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGbG93Q29sb3JTY2FsZShcbiAgZG9tYWluOiBbbnVtYmVyLCBudW1iZXJdLFxuICBzY2hlbWU6IHN0cmluZ1tdLFxuICBhbmltYXRlOiBib29sZWFuIHwgdW5kZWZpbmVkLFxuKTogQ29sb3JTY2FsZSB7XG4gIGNvbnN0IHNjYWxlID0gc2NhbGVTZXF1ZW50aWFsUG93KGludGVycG9sYXRlUmdiYUJhc2lzKHNjaGVtZSkpXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIC5leHBvbmVudChhbmltYXRlID8gMSAvIDIgOiAxIC8gMylcbiAgICAuZG9tYWluKGRvbWFpbik7XG5cbiAgcmV0dXJuICh2YWx1ZTogbnVtYmVyKSA9PiBjb2xvckFzUmdiYShzY2FsZSh2YWx1ZSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rmxvd0NvbG9yU2NhbGUoXG4gIGNvbG9yczogQ29sb3JzUkdCQSB8IERpZmZDb2xvcnNSR0JBLFxuICBtYWduaXR1ZGVFeHRlbnQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQsXG4gIGFuaW1hdGU6IGJvb2xlYW4gfCB1bmRlZmluZWQsXG4pOiAobWFnbml0dWRlOiBudW1iZXIpID0+IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdIHtcbiAgY29uc3QgbWluTWFnbml0dWRlID0gbWFnbml0dWRlRXh0ZW50ID8gbWFnbml0dWRlRXh0ZW50WzBdIDogMDtcbiAgY29uc3QgbWF4TWFnbml0dWRlID0gbWFnbml0dWRlRXh0ZW50ID8gbWFnbml0dWRlRXh0ZW50WzFdIDogMDtcbiAgaWYgKGlzRGlmZkNvbG9yc1JHQkEoY29sb3JzKSkge1xuICAgIGNvbnN0IHBvc1NjYWxlID0gY3JlYXRlRmxvd0NvbG9yU2NhbGUoXG4gICAgICBbMCwgbWF4TWFnbml0dWRlXSxcbiAgICAgIGNvbG9ycy5wb3NpdGl2ZS5mbG93cy5zY2hlbWUsXG4gICAgICBhbmltYXRlLFxuICAgICk7XG4gICAgY29uc3QgbmVnU2NhbGUgPSBjcmVhdGVGbG93Q29sb3JTY2FsZShcbiAgICAgIFswLCBtaW5NYWduaXR1ZGVdLFxuICAgICAgY29sb3JzLm5lZ2F0aXZlLmZsb3dzLnNjaGVtZSxcbiAgICAgIGFuaW1hdGUsXG4gICAgKTtcblxuICAgIHJldHVybiAobWFnbml0dWRlOiBudW1iZXIpID0+XG4gICAgICBtYWduaXR1ZGUgPj0gMCA/IHBvc1NjYWxlKG1hZ25pdHVkZSkgOiBuZWdTY2FsZShtYWduaXR1ZGUpO1xuICB9XG5cbiAgY29uc3Qgc2NhbGUgPSBjcmVhdGVGbG93Q29sb3JTY2FsZShcbiAgICBbMCwgbWF4TWFnbml0dWRlIHx8IDBdLFxuICAgIGNvbG9ycy5mbG93cy5zY2hlbWUsXG4gICAgYW5pbWF0ZSxcbiAgKTtcbiAgcmV0dXJuIChtYWduaXR1ZGU6IG51bWJlcikgPT4gc2NhbGUobWFnbml0dWRlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRGlmZkNvbG9ycyhcbiAgY29sb3JzOiBEaWZmQ29sb3JzIHwgQ29sb3JzLFxuKTogY29sb3JzIGlzIERpZmZDb2xvcnMge1xuICByZXR1cm4gKGNvbG9ycyBhcyBEaWZmQ29sb3JzKS5wb3NpdGl2ZSAhPT0gdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNEaWZmQ29sb3JzUkdCQShcbiAgY29sb3JzOiBEaWZmQ29sb3JzUkdCQSB8IENvbG9yc1JHQkEsXG4pOiBjb2xvcnMgaXMgRGlmZkNvbG9yc1JHQkEge1xuICByZXR1cm4gKGNvbG9ycyBhcyBEaWZmQ29sb3JzUkdCQSkucG9zaXRpdmUgIT09IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gZ2V0TG9jYXRpb25BcmVhQ29sb3JzUkdCQShcbiAgY29sb3JzOiBMb2NhdGlvbkFyZWFDb2xvcnMgfCB1bmRlZmluZWQsXG4gIGRhcmtNb2RlOiBib29sZWFuLFxuKTogTG9jYXRpb25BcmVhQ29sb3JzUkdCQSB7XG4gIGNvbnN0IG5vcm1hbENvbG9yID0gKGNvbG9ycyAmJiBjb2xvcnMubm9ybWFsKSB8fCBERUZBVUxUX0xPQ0FUSU9OX0FSRUFfQ09MT1I7XG4gIGNvbnN0IG5vcm1hbENvbG9ySGNsID0gaGNsKG5vcm1hbENvbG9yKTtcbiAgY29uc3QgbG9jYXRpb25BcmVhc05vcm1hbCA9IGNvbG9yQXNSZ2JhKG5vcm1hbENvbG9yKTtcbiAgcmV0dXJuIHtcbiAgICBub3JtYWw6IGxvY2F0aW9uQXJlYXNOb3JtYWwsXG4gICAgY29ubmVjdGVkOiBjb2xvckFzUmdiYU9yKGNvbG9ycyAmJiBjb2xvcnMuY29ubmVjdGVkLCBsb2NhdGlvbkFyZWFzTm9ybWFsKSxcbiAgICBoaWdobGlnaHRlZDogY29sb3JBc1JnYmFPcihcbiAgICAgIGNvbG9ycyAmJiBjb2xvcnMuaGlnaGxpZ2h0ZWQsXG4gICAgICBvcGFjaWZ5SGV4KFxuICAgICAgICBub3JtYWxDb2xvckhjbFtkYXJrTW9kZSA/ICdicmlnaHRlcicgOiAnZGFya2VyJ10oMSkudG9TdHJpbmcoKSxcbiAgICAgICAgMC41LFxuICAgICAgKSxcbiAgICApLFxuICAgIHNlbGVjdGVkOiBjb2xvckFzUmdiYU9yKFxuICAgICAgY29sb3JzICYmIGNvbG9ycy5zZWxlY3RlZCxcbiAgICAgIG9wYWNpZnlIZXgoXG4gICAgICAgIG5vcm1hbENvbG9ySGNsW2RhcmtNb2RlID8gJ2JyaWdodGVyJyA6ICdkYXJrZXInXSgyKS50b1N0cmluZygpLFxuICAgICAgICAwLjgsXG4gICAgICApLFxuICAgICksXG4gICAgb3V0bGluZTogY29sb3JBc1JnYmFPcihcbiAgICAgIGNvbG9ycyAmJiBjb2xvcnMub3V0bGluZSxcbiAgICAgIGNvbG9yQXNSZ2JhKFxuICAgICAgICBub3JtYWxDb2xvckhjbFtkYXJrTW9kZSA/ICdicmlnaHRlcicgOiAnZGFya2VyJ10oNCkudG9TdHJpbmcoKSxcbiAgICAgICksXG4gICAgKSxcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGbG93Q29sb3JzIHtcbiAgc2NoZW1lPzogc3RyaW5nW107XG4gIGhpZ2hsaWdodGVkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExvY2F0aW9uQ2lyY2xlQ29sb3JzIHtcbiAgaW5uZXI/OiBzdHJpbmc7XG4gIG91dGdvaW5nPzogc3RyaW5nO1xuICBpbmNvbWluZz86IHN0cmluZztcbiAgaGlnaGxpZ2h0ZWQ/OiBzdHJpbmc7XG4gIGVtcHR5Pzogc3RyaW5nO1xuICBvdXRsaW5lRW1wdHlNaXg/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9jYXRpb25BcmVhQ29sb3JzIHtcbiAgb3V0bGluZT86IHN0cmluZztcbiAgbm9ybWFsPzogc3RyaW5nO1xuICBzZWxlY3RlZD86IHN0cmluZztcbiAgaGlnaGxpZ2h0ZWQ/OiBzdHJpbmc7XG4gIGNvbm5lY3RlZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXNlQ29sb3JzIHtcbiAgZGFya01vZGU/OiBib29sZWFuO1xuICBsb2NhdGlvbkFyZWFzPzogTG9jYXRpb25BcmVhQ29sb3JzO1xuICBkaW1tZWRPcGFjaXR5PzogbnVtYmVyO1xuICBvdXRsaW5lQ29sb3I/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29sb3JzIGV4dGVuZHMgQmFzZUNvbG9ycyB7XG4gIGZsb3dzPzogRmxvd0NvbG9ycztcbiAgbG9jYXRpb25DaXJjbGVzPzogTG9jYXRpb25DaXJjbGVDb2xvcnM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxvd0FuZENpcmNsZUNvbG9ycyB7XG4gIGZsb3dzPzogRmxvd0NvbG9ycztcbiAgbG9jYXRpb25DaXJjbGVzPzogTG9jYXRpb25DaXJjbGVDb2xvcnM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGlmZkNvbG9ycyBleHRlbmRzIEJhc2VDb2xvcnMge1xuICBwb3NpdGl2ZT86IEZsb3dBbmRDaXJjbGVDb2xvcnM7XG4gIG5lZ2F0aXZlPzogRmxvd0FuZENpcmNsZUNvbG9ycztcbn1cblxuLy8gVGhlIHh4eENvbG9yc1JHQkEgb2JqZWN0cyBhcmUgbWlycm9yaW5nIHRoZSBpbnB1dCBjb2xvcnMnIG9iamVjdHMsXG4vLyBidXQgY29udmVydGVkIHRvIFJHQkEgYW5kIHdpdGggYWxsIHRoZSBvbWl0dGVkIG9uZXMgc2V0IHRvIGRlZmF1bHRzXG4vLyBvciBkZXJpdmVkLlxuZXhwb3J0IGludGVyZmFjZSBGbG93Q29sb3JzUkdCQSB7XG4gIHNjaGVtZTogc3RyaW5nW107XG4gIGhpZ2hsaWdodGVkOiBSR0JBO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExvY2F0aW9uQ2lyY2xlQ29sb3JzUkdCQSB7XG4gIGlubmVyOiBSR0JBO1xuICBvdXRnb2luZzogUkdCQTtcbiAgaW5jb21pbmc6IFJHQkE7XG4gIGhpZ2hsaWdodGVkOiBSR0JBO1xuICBlbXB0eTogUkdCQTtcbiAgb3V0bGluZUVtcHR5TWl4OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9jYXRpb25BcmVhQ29sb3JzUkdCQSB7XG4gIG91dGxpbmU6IFJHQkE7XG4gIG5vcm1hbDogUkdCQTtcbiAgc2VsZWN0ZWQ6IFJHQkE7XG4gIGhpZ2hsaWdodGVkOiBSR0JBO1xuICBjb25uZWN0ZWQ6IFJHQkE7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZUNvbG9yc1JHQkEge1xuICBkYXJrTW9kZTogYm9vbGVhbjtcbiAgbG9jYXRpb25BcmVhczogTG9jYXRpb25BcmVhQ29sb3JzUkdCQTtcbiAgZGltbWVkT3BhY2l0eTogbnVtYmVyO1xuICBvdXRsaW5lQ29sb3I6IFJHQkE7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29sb3JzUkdCQSBleHRlbmRzIEJhc2VDb2xvcnNSR0JBIHtcbiAgZmxvd3M6IEZsb3dDb2xvcnNSR0JBO1xuICBsb2NhdGlvbkNpcmNsZXM6IExvY2F0aW9uQ2lyY2xlQ29sb3JzUkdCQTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGbG93QW5kQ2lyY2xlQ29sb3JzUkdCQSB7XG4gIGZsb3dzOiBGbG93Q29sb3JzUkdCQTtcbiAgbG9jYXRpb25DaXJjbGVzOiBMb2NhdGlvbkNpcmNsZUNvbG9yc1JHQkE7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGlmZkNvbG9yc1JHQkEgZXh0ZW5kcyBCYXNlQ29sb3JzUkdCQSB7XG4gIHBvc2l0aXZlOiBGbG93QW5kQ2lyY2xlQ29sb3JzUkdCQTtcbiAgbmVnYXRpdmU6IEZsb3dBbmRDaXJjbGVDb2xvcnNSR0JBO1xufVxuXG5mdW5jdGlvbiBnZXRGbG93QW5kQ2lyY2xlQ29sb3JzKFxuICBpbnB1dENvbG9yczogRmxvd0FuZENpcmNsZUNvbG9ycyB8IHVuZGVmaW5lZCxcbiAgZGVmYXVsdEZsb3dDb2xvclNjaGVtZTogc3RyaW5nW10sXG4gIGRhcmtNb2RlOiBib29sZWFuLFxuKTogRmxvd0FuZENpcmNsZUNvbG9yc1JHQkEge1xuICBjb25zdCBmbG93Q29sb3JTY2hlbWUgPVxuICAgIChpbnB1dENvbG9ycyAmJiBpbnB1dENvbG9ycy5mbG93cyAmJiBpbnB1dENvbG9ycy5mbG93cy5zY2hlbWUpIHx8XG4gICAgZGVmYXVsdEZsb3dDb2xvclNjaGVtZTtcbiAgY29uc3QgbWF4Rmxvd0NvbG9ySGNsID0gaGNsKGZsb3dDb2xvclNjaGVtZVtmbG93Q29sb3JTY2hlbWUubGVuZ3RoIC0gMV0pO1xuICBjb25zdCBmbG93Q29sb3JIaWdobGlnaHRlZCA9IGNvbG9yQXNSZ2JhT3IoXG4gICAgaW5wdXRDb2xvcnMgJiYgaW5wdXRDb2xvcnMuZmxvd3MgJiYgaW5wdXRDb2xvcnMuZmxvd3MuaGlnaGxpZ2h0ZWQsXG4gICAgY29sb3JBc1JnYmEoXG4gICAgICBtYXhGbG93Q29sb3JIY2xbZGFya01vZGUgPyAnYnJpZ2h0ZXInIDogJ2RhcmtlciddKDAuNykudG9TdHJpbmcoKSxcbiAgICApLFxuICApO1xuXG4gIGNvbnN0IGVtcHR5Q29sb3IgPSBjb2xvckFzUmdiYU9yKFxuICAgIGlucHV0Q29sb3JzPy5sb2NhdGlvbkNpcmNsZXM/LmVtcHR5LFxuICAgIGRhcmtNb2RlID8gJyMwMDAnIDogJyNmZmYnLFxuICApO1xuICBjb25zdCBpbm5lckNvbG9yID0gY29sb3JBc1JnYmFPcihcbiAgICBpbnB1dENvbG9ycyAmJlxuICAgICAgaW5wdXRDb2xvcnMubG9jYXRpb25DaXJjbGVzICYmXG4gICAgICBpbnB1dENvbG9ycy5sb2NhdGlvbkNpcmNsZXMuaW5uZXIsXG4gICAgbWF4Rmxvd0NvbG9ySGNsLnRvU3RyaW5nKCksXG4gICk7XG4gIHJldHVybiB7XG4gICAgZmxvd3M6IHtcbiAgICAgIHNjaGVtZTogZmxvd0NvbG9yU2NoZW1lLFxuICAgICAgaGlnaGxpZ2h0ZWQ6IGZsb3dDb2xvckhpZ2hsaWdodGVkLFxuICAgIH0sXG4gICAgbG9jYXRpb25DaXJjbGVzOiB7XG4gICAgICBpbm5lcjogaW5uZXJDb2xvcixcbiAgICAgIG91dGdvaW5nOiBjb2xvckFzUmdiYU9yKFxuICAgICAgICBpbnB1dENvbG9ycyAmJlxuICAgICAgICAgIGlucHV0Q29sb3JzLmxvY2F0aW9uQ2lyY2xlcyAmJlxuICAgICAgICAgIGlucHV0Q29sb3JzLmxvY2F0aW9uQ2lyY2xlcy5vdXRnb2luZyxcbiAgICAgICAgZGFya01vZGUgPyAnIzAwMCcgOiAnI2ZmZicsXG4gICAgICApLFxuICAgICAgaW5jb21pbmc6IGNvbG9yQXNSZ2JhT3IoXG4gICAgICAgIGlucHV0Q29sb3JzICYmXG4gICAgICAgICAgaW5wdXRDb2xvcnMubG9jYXRpb25DaXJjbGVzICYmXG4gICAgICAgICAgaW5wdXRDb2xvcnMubG9jYXRpb25DaXJjbGVzLmluY29taW5nLFxuICAgICAgICBtYXhGbG93Q29sb3JIY2xbZGFya01vZGUgPyAnYnJpZ2h0ZXInIDogJ2RhcmtlciddKDEuMjUpLnRvU3RyaW5nKCksXG4gICAgICApLFxuICAgICAgaGlnaGxpZ2h0ZWQ6IGNvbG9yQXNSZ2JhT3IoXG4gICAgICAgIGlucHV0Q29sb3JzICYmXG4gICAgICAgICAgaW5wdXRDb2xvcnMubG9jYXRpb25DaXJjbGVzICYmXG4gICAgICAgICAgaW5wdXRDb2xvcnMubG9jYXRpb25DaXJjbGVzLmhpZ2hsaWdodGVkLFxuICAgICAgICBmbG93Q29sb3JIaWdobGlnaHRlZCxcbiAgICAgICksXG4gICAgICBlbXB0eTogZW1wdHlDb2xvcixcbiAgICAgIG91dGxpbmVFbXB0eU1peDogaW5wdXRDb2xvcnM/LmxvY2F0aW9uQ2lyY2xlcz8ub3V0bGluZUVtcHR5TWl4ID8/IDAuNCxcbiAgICB9LFxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRCYXNlQ29sb3JzUkdCQShcbiAgY29sb3JzOiBDb2xvcnMgfCBEaWZmQ29sb3JzIHwgdW5kZWZpbmVkLFxuKTogQmFzZUNvbG9yc1JHQkEge1xuICBjb25zdCBkYXJrTW9kZSA9IGNvbG9ycyAmJiBjb2xvcnMuZGFya01vZGUgPyB0cnVlIDogZmFsc2U7XG4gIHJldHVybiB7XG4gICAgZGFya01vZGUsXG4gICAgbG9jYXRpb25BcmVhczogZ2V0TG9jYXRpb25BcmVhQ29sb3JzUkdCQShcbiAgICAgIGNvbG9ycyAmJiBjb2xvcnMubG9jYXRpb25BcmVhcyxcbiAgICAgIGRhcmtNb2RlLFxuICAgICksXG4gICAgb3V0bGluZUNvbG9yOiBjb2xvckFzUmdiYShcbiAgICAgIChjb2xvcnMgJiYgY29sb3JzLm91dGxpbmVDb2xvcikgfHwgREVGQVVMVF9PVVRMSU5FX0NPTE9SLFxuICAgICksXG4gICAgZGltbWVkT3BhY2l0eTpcbiAgICAgIGNvbG9ycyAmJiBjb2xvcnMuZGltbWVkT3BhY2l0eSAhPSBudWxsXG4gICAgICAgID8gY29sb3JzLmRpbW1lZE9wYWNpdHlcbiAgICAgICAgOiBERUZBVUxUX0RJTU1FRF9PUEFDSVRZLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29sb3JzUkdCQShjb2xvcnM6IENvbG9ycyB8IHVuZGVmaW5lZCk6IENvbG9yc1JHQkEge1xuICBjb25zdCBiYXNlQ29sb3JzUkdCQSA9IGdldEJhc2VDb2xvcnNSR0JBKGNvbG9ycyk7XG4gIHJldHVybiB7XG4gICAgLi4uYmFzZUNvbG9yc1JHQkEsXG4gICAgLi4uZ2V0Rmxvd0FuZENpcmNsZUNvbG9ycyhcbiAgICAgIGNvbG9ycyxcbiAgICAgIERFRkFVTFRfRkxPV19DT0xPUl9TQ0hFTUUsXG4gICAgICBiYXNlQ29sb3JzUkdCQS5kYXJrTW9kZSxcbiAgICApLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGlmZkNvbG9yc1JHQkEoXG4gIGNvbG9yczogRGlmZkNvbG9ycyB8IHVuZGVmaW5lZCxcbik6IERpZmZDb2xvcnNSR0JBIHtcbiAgY29uc3QgYmFzZUNvbG9yc1JHQkEgPSBnZXRCYXNlQ29sb3JzUkdCQShjb2xvcnMpO1xuICByZXR1cm4ge1xuICAgIC4uLmJhc2VDb2xvcnNSR0JBLFxuICAgIHBvc2l0aXZlOiBnZXRGbG93QW5kQ2lyY2xlQ29sb3JzKFxuICAgICAgY29sb3JzICYmIGNvbG9ycy5wb3NpdGl2ZSxcbiAgICAgIERFRkFVTFRfRkxPV19DT0xPUl9TQ0hFTUVfUE9TSVRJVkUsXG4gICAgICBiYXNlQ29sb3JzUkdCQS5kYXJrTW9kZSxcbiAgICApLFxuICAgIG5lZ2F0aXZlOiBnZXRGbG93QW5kQ2lyY2xlQ29sb3JzKFxuICAgICAgY29sb3JzICYmIGNvbG9ycy5uZWdhdGl2ZSxcbiAgICAgIERFRkFVTFRfRkxPV19DT0xPUl9TQ0hFTUVfTkVHQVRJVkUsXG4gICAgICBiYXNlQ29sb3JzUkdCQS5kYXJrTW9kZSxcbiAgICApLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmdiYUFzU3RyaW5nKGNvbG9yOiBSR0JBKTogc3RyaW5nIHtcbiAgcmV0dXJuIGByZ2JhKCR7Y29sb3Iuam9pbignLCcpfSlgO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWlkcG9pbnQoYTogbnVtYmVyLCBiOiBudW1iZXIsIHplcm9Ub09uZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgcmV0dXJuIGEgKyAoYiAtIGEpICogemVyb1RvT25lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWl4Q29sb3JzUkdCQShcbiAgY29sb3IxOiBSR0JBLFxuICBjb2xvcjI6IFJHQkEsXG4gIHplcm9Ub09uZTogbnVtYmVyLFxuKTogUkdCQSB7XG4gIHJldHVybiBjb2xvcjEubWFwKCh2LCBpKSA9PiBtaWRwb2ludCh2LCBjb2xvcjJbaV0sIHplcm9Ub09uZSkpIGFzIFJHQkE7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGdldENvbG9ycztcbiJdfQ==","\nexport default function sortKD(ids, coords, nodeSize, left, right, depth) {\n    if (right - left <= nodeSize) return;\n\n    const m = (left + right) >> 1;\n\n    select(ids, coords, m, left, right, depth % 2);\n\n    sortKD(ids, coords, nodeSize, left, m - 1, depth + 1);\n    sortKD(ids, coords, nodeSize, m + 1, right, depth + 1);\n}\n\nfunction select(ids, coords, k, left, right, inc) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            const n = right - left + 1;\n            const m = k - left + 1;\n            const z = Math.log(n);\n            const s = 0.5 * Math.exp(2 * z / 3);\n            const sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            const newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            const newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            select(ids, coords, k, newLeft, newRight, inc);\n        }\n\n        const t = coords[2 * k + inc];\n        let i = left;\n        let j = right;\n\n        swapItem(ids, coords, left, k);\n        if (coords[2 * right + inc] > t) swapItem(ids, coords, left, right);\n\n        while (i < j) {\n            swapItem(ids, coords, i, j);\n            i++;\n            j--;\n            while (coords[2 * i + inc] < t) i++;\n            while (coords[2 * j + inc] > t) j--;\n        }\n\n        if (coords[2 * left + inc] === t) swapItem(ids, coords, left, j);\n        else {\n            j++;\n            swapItem(ids, coords, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\nfunction swapItem(ids, coords, i, j) {\n    swap(ids, i, j);\n    swap(coords, 2 * i, 2 * j);\n    swap(coords, 2 * i + 1, 2 * j + 1);\n}\n\nfunction swap(arr, i, j) {\n    const tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n","\nexport default function within(ids, coords, qx, qy, r, nodeSize) {\n    const stack = [0, ids.length - 1, 0];\n    const result = [];\n    const r2 = r * r;\n\n    while (stack.length) {\n        const axis = stack.pop();\n        const right = stack.pop();\n        const left = stack.pop();\n\n        if (right - left <= nodeSize) {\n            for (let i = left; i <= right; i++) {\n                if (sqDist(coords[2 * i], coords[2 * i + 1], qx, qy) <= r2) result.push(ids[i]);\n            }\n            continue;\n        }\n\n        const m = Math.floor((left + right) / 2);\n\n        const x = coords[2 * m];\n        const y = coords[2 * m + 1];\n\n        if (sqDist(x, y, qx, qy) <= r2) result.push(ids[m]);\n\n        const nextAxis = (axis + 1) % 2;\n\n        if (axis === 0 ? qx - r <= x : qy - r <= y) {\n            stack.push(left);\n            stack.push(m - 1);\n            stack.push(nextAxis);\n        }\n        if (axis === 0 ? qx + r >= x : qy + r >= y) {\n            stack.push(m + 1);\n            stack.push(right);\n            stack.push(nextAxis);\n        }\n    }\n\n    return result;\n}\n\nfunction sqDist(ax, ay, bx, by) {\n    const dx = ax - bx;\n    const dy = ay - by;\n    return dx * dx + dy * dy;\n}\n","\nimport sort from './sort';\nimport range from './range';\nimport within from './within';\n\nconst defaultGetX = p => p[0];\nconst defaultGetY = p => p[1];\n\nexport default class KDBush {\n    constructor(points, getX = defaultGetX, getY = defaultGetY, nodeSize = 64, ArrayType = Float64Array) {\n        this.nodeSize = nodeSize;\n        this.points = points;\n\n        const IndexArrayType = points.length < 65536 ? Uint16Array : Uint32Array;\n\n        const ids = this.ids = new IndexArrayType(points.length);\n        const coords = this.coords = new ArrayType(points.length * 2);\n\n        for (let i = 0; i < points.length; i++) {\n            ids[i] = i;\n            coords[2 * i] = getX(points[i]);\n            coords[2 * i + 1] = getY(points[i]);\n        }\n\n        sort(ids, coords, nodeSize, 0, ids.length - 1, 0);\n    }\n\n    range(minX, minY, maxX, maxY) {\n        return range(this.ids, this.coords, minX, minY, maxX, maxY, this.nodeSize);\n    }\n\n    within(x, y, r) {\n        return within(this.ids, this.coords, x, y, r, this.nodeSize);\n    }\n}\n","\nexport default function range(ids, coords, minX, minY, maxX, maxY, nodeSize) {\n    const stack = [0, ids.length - 1, 0];\n    const result = [];\n    let x, y;\n\n    while (stack.length) {\n        const axis = stack.pop();\n        const right = stack.pop();\n        const left = stack.pop();\n\n        if (right - left <= nodeSize) {\n            for (let i = left; i <= right; i++) {\n                x = coords[2 * i];\n                y = coords[2 * i + 1];\n                if (x >= minX && x <= maxX && y >= minY && y <= maxY) result.push(ids[i]);\n            }\n            continue;\n        }\n\n        const m = Math.floor((left + right) / 2);\n\n        x = coords[2 * m];\n        y = coords[2 * m + 1];\n\n        if (x >= minX && x <= maxX && y >= minY && y <= maxY) result.push(ids[m]);\n\n        const nextAxis = (axis + 1) % 2;\n\n        if (axis === 0 ? minX <= x : minY <= y) {\n            stack.push(left);\n            stack.push(m - 1);\n            stack.push(nextAxis);\n        }\n        if (axis === 0 ? maxX >= x : maxY >= y) {\n            stack.push(m + 1);\n            stack.push(right);\n            stack.push(nextAxis);\n        }\n    }\n\n    return result;\n}\n","// Cache implementation based on Erik Rasmussen's `lru-memoize`:\n// https://github.com/erikras/lru-memoize\nvar NOT_FOUND = 'NOT_FOUND';\n\nfunction createSingletonCache(equals) {\n  var entry;\n  return {\n    get: function get(key) {\n      if (entry && equals(entry.key, key)) {\n        return entry.value;\n      }\n\n      return NOT_FOUND;\n    },\n    put: function put(key, value) {\n      entry = {\n        key: key,\n        value: value\n      };\n    },\n    getEntries: function getEntries() {\n      return entry ? [entry] : [];\n    },\n    clear: function clear() {\n      entry = undefined;\n    }\n  };\n}\n\nfunction createLruCache(maxSize, equals) {\n  var entries = [];\n\n  function get(key) {\n    var cacheIndex = entries.findIndex(function (entry) {\n      return equals(key, entry.key);\n    }); // We found a cached entry\n\n    if (cacheIndex > -1) {\n      var entry = entries[cacheIndex]; // Cached entry not at top of cache, move it to the top\n\n      if (cacheIndex > 0) {\n        entries.splice(cacheIndex, 1);\n        entries.unshift(entry);\n      }\n\n      return entry.value;\n    } // No entry found in cache, return sentinel\n\n\n    return NOT_FOUND;\n  }\n\n  function put(key, value) {\n    if (get(key) === NOT_FOUND) {\n      // TODO Is unshift slow?\n      entries.unshift({\n        key: key,\n        value: value\n      });\n\n      if (entries.length > maxSize) {\n        entries.pop();\n      }\n    }\n  }\n\n  function getEntries() {\n    return entries;\n  }\n\n  function clear() {\n    entries = [];\n  }\n\n  return {\n    get: get,\n    put: put,\n    getEntries: getEntries,\n    clear: clear\n  };\n}\n\nexport var defaultEqualityCheck = function defaultEqualityCheck(a, b) {\n  return a === b;\n};\nexport function createCacheKeyComparator(equalityCheck) {\n  return function areArgumentsShallowlyEqual(prev, next) {\n    if (prev === null || next === null || prev.length !== next.length) {\n      return false;\n    } // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n\n\n    var length = prev.length;\n\n    for (var i = 0; i < length; i++) {\n      if (!equalityCheck(prev[i], next[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n}\n// defaultMemoize now supports a configurable cache size with LRU behavior,\n// and optional comparison of the result value with existing values\nexport function defaultMemoize(func, equalityCheckOrOptions) {\n  var providedOptions = typeof equalityCheckOrOptions === 'object' ? equalityCheckOrOptions : {\n    equalityCheck: equalityCheckOrOptions\n  };\n  var _providedOptions$equa = providedOptions.equalityCheck,\n      equalityCheck = _providedOptions$equa === void 0 ? defaultEqualityCheck : _providedOptions$equa,\n      _providedOptions$maxS = providedOptions.maxSize,\n      maxSize = _providedOptions$maxS === void 0 ? 1 : _providedOptions$maxS,\n      resultEqualityCheck = providedOptions.resultEqualityCheck;\n  var comparator = createCacheKeyComparator(equalityCheck);\n  var cache = maxSize === 1 ? createSingletonCache(comparator) : createLruCache(maxSize, comparator); // we reference arguments instead of spreading them for performance reasons\n\n  function memoized() {\n    var value = cache.get(arguments);\n\n    if (value === NOT_FOUND) {\n      // @ts-ignore\n      value = func.apply(null, arguments);\n\n      if (resultEqualityCheck) {\n        var entries = cache.getEntries();\n        var matchingEntry = entries.find(function (entry) {\n          return resultEqualityCheck(entry.value, value);\n        });\n\n        if (matchingEntry) {\n          value = matchingEntry.value;\n        }\n      }\n\n      cache.put(arguments, value);\n    }\n\n    return value;\n  }\n\n  memoized.clearCache = function () {\n    return cache.clear();\n  };\n\n  return memoized;\n}","import { defaultMemoize, defaultEqualityCheck } from './defaultMemoize';\nexport { defaultMemoize, defaultEqualityCheck };\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep === 'function' ? \"function \" + (dep.name || 'unnamed') + \"()\" : typeof dep;\n    }).join(', ');\n    throw new Error(\"createSelector expects all input-selectors to be functions, but received the following types: [\" + dependencyTypes + \"]\");\n  }\n\n  return dependencies;\n}\n\nexport function createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptionsFromArgs = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptionsFromArgs[_key - 1] = arguments[_key];\n  }\n\n  var createSelector = function createSelector() {\n    for (var _len2 = arguments.length, funcs = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var _recomputations = 0;\n\n    var _lastResult; // Due to the intricacies of rest params, we can't do an optional arg after `...funcs`.\n    // So, start by declaring the default value here.\n    // (And yes, the words 'memoize' and 'options' appear too many times in this next sequence.)\n\n\n    var directlyPassedOptions = {\n      memoizeOptions: undefined\n    }; // Normally, the result func or \"output selector\" is the last arg\n\n    var resultFunc = funcs.pop(); // If the result func is actually an _object_, assume it's our options object\n\n    if (typeof resultFunc === 'object') {\n      directlyPassedOptions = resultFunc; // and pop the real result func off\n\n      resultFunc = funcs.pop();\n    }\n\n    if (typeof resultFunc !== 'function') {\n      throw new Error(\"createSelector expects an output function after the inputs, but received: [\" + typeof resultFunc + \"]\");\n    } // Determine which set of options we're using. Prefer options passed directly,\n    // but fall back to options given to createSelectorCreator.\n\n\n    var _directlyPassedOption = directlyPassedOptions,\n        _directlyPassedOption2 = _directlyPassedOption.memoizeOptions,\n        memoizeOptions = _directlyPassedOption2 === void 0 ? memoizeOptionsFromArgs : _directlyPassedOption2; // Simplifying assumption: it's unlikely that the first options arg of the provided memoizer\n    // is an array. In most libs I've looked at, it's an equality function or options object.\n    // Based on that, if `memoizeOptions` _is_ an array, we assume it's a full\n    // user-provided array of options. Otherwise, it must be just the _first_ arg, and so\n    // we wrap it in an array so we can apply it.\n\n    var finalMemoizeOptions = Array.isArray(memoizeOptions) ? memoizeOptions : [memoizeOptions];\n    var dependencies = getDependencies(funcs);\n    var memoizedResultFunc = memoize.apply(void 0, [function recomputationWrapper() {\n      _recomputations++; // apply arguments instead of spreading for performance.\n\n      return resultFunc.apply(null, arguments);\n    }].concat(finalMemoizeOptions)); // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n\n    var selector = memoize(function dependenciesChecker() {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        // @ts-ignore\n        params.push(dependencies[i].apply(null, arguments));\n      } // apply arguments instead of spreading for performance.\n\n\n      _lastResult = memoizedResultFunc.apply(null, params);\n      return _lastResult;\n    });\n    Object.assign(selector, {\n      resultFunc: resultFunc,\n      memoizedResultFunc: memoizedResultFunc,\n      dependencies: dependencies,\n      lastResult: function lastResult() {\n        return _lastResult;\n      },\n      recomputations: function recomputations() {\n        return _recomputations;\n      },\n      resetRecomputations: function resetRecomputations() {\n        return _recomputations = 0;\n      }\n    });\n    return selector;\n  }; // @ts-ignore\n\n\n  return createSelector;\n}\nexport var createSelector = /* #__PURE__ */createSelectorCreator(defaultMemoize);\n// Manual definition of state and output arguments\nexport var createStructuredSelector = function createStructuredSelector(selectors, selectorCreator) {\n  if (selectorCreator === void 0) {\n    selectorCreator = createSelector;\n  }\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + (\"where each property is a selector, instead received a \" + typeof selectors));\n  }\n\n  var objectKeys = Object.keys(selectors);\n  var resultSelector = selectorCreator( // @ts-ignore\n  objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n  return resultSelector;\n};","/*\n * Copyright 2022 FlowmapBlue\n * Copyright 2018-2020 Teralytics, modified by FlowmapBlue\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n/**\n * The code in this file is a based on https://github.com/mapbox/supercluster\n */\n// ISC License\n//\n// Copyright (c) 2016, Mapbox\n//\n// Permission to use, copy, modify, and/or distribute this software for any purpose\n// with or without fee is hereby granted, provided that the above copyright notice\n// and this permission notice appear in all copies.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n// REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND\n// FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n// INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS\n// OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER\n// TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF\n// THIS SOFTWARE.\nimport { min, rollup } from 'd3-array';\nimport KDBush from 'kdbush';\nconst defaultOptions = {\n    minZoom: 0,\n    maxZoom: 16,\n    radius: 40,\n    extent: 512,\n    nodeSize: 64,\n    makeClusterName: (id, numPoints) => undefined,\n    makeClusterId: (id) => `{[${id}]}`,\n};\nexport function isLeafPoint(p) {\n    const { index } = p;\n    return index != null;\n}\nexport function isClusterPoint(p) {\n    const { id } = p;\n    return id != null;\n}\nexport function clusterLocations(locations, locationAccessors, getLocationWeight, options) {\n    const { getLocationLon, getLocationLat, getLocationId } = locationAccessors;\n    const opts = Object.assign(Object.assign({}, defaultOptions), options);\n    const { minZoom, maxZoom, nodeSize, makeClusterName, makeClusterId } = opts;\n    const trees = new Array(maxZoom + 1);\n    // generate a cluster object for each point and index input points into a KD-tree\n    let clusters = new Array();\n    let locationsCount = 0;\n    for (const location of locations) {\n        const x = getLocationLon(location);\n        const y = getLocationLat(location);\n        clusters.push({\n            x: lngX(x),\n            y: latY(y),\n            weight: getLocationWeight(getLocationId(location)),\n            zoom: Infinity,\n            index: locationsCount,\n            parentId: -1,\n            location,\n        });\n        locationsCount++;\n    }\n    // cluster points on max zoom, then cluster the results on previous zoom, etc.;\n    // results in a cluster hierarchy across zoom levels\n    trees[maxZoom + 1] = new KDBush(clusters, getX, getY, nodeSize, Float32Array);\n    let prevZoom = maxZoom + 1;\n    for (let z = maxZoom; z >= minZoom; z--) {\n        // create a new set of clusters for the zoom and index them with a KD-tree\n        const _clusters = cluster(clusters, z, trees[prevZoom], opts);\n        if (_clusters.length === clusters.length) {\n            // same number of clusters => move the higher level clusters up\n            // no need to keep the same data on multiple levels\n            trees[z] = trees[prevZoom];\n            trees[prevZoom] = undefined;\n            prevZoom = z;\n            clusters = _clusters;\n        }\n        else {\n            prevZoom = z;\n            clusters = _clusters;\n            trees[z] = new KDBush(clusters, getX, getY, nodeSize, Float32Array);\n        }\n    }\n    if (trees.length === 0) {\n        return [];\n    }\n    const numbersOfClusters = trees.map((d) => d === null || d === void 0 ? void 0 : d.points.length);\n    const minClusters = min(numbersOfClusters.filter((d) => d > 0));\n    const maxClusters = getMaxNumberOfClusters(locations, locationAccessors);\n    let maxAvailZoom = numbersOfClusters.indexOf(maxClusters);\n    if (maxClusters < locationsCount) {\n        maxAvailZoom++;\n        if (maxAvailZoom < maxZoom + 1) {\n            trees[maxAvailZoom] = trees[maxZoom + 1];\n            trees[maxZoom + 1] = undefined;\n        }\n    }\n    const minAvailZoom = Math.min(maxAvailZoom, numbersOfClusters.lastIndexOf(minClusters));\n    const clusterLevels = new Array();\n    prevZoom = NaN;\n    for (let zoom = maxAvailZoom; zoom >= minAvailZoom; zoom--) {\n        let childrenByParent;\n        const tree = trees[zoom];\n        if (!tree)\n            continue;\n        if (zoom < maxAvailZoom) {\n            childrenByParent = rollup(trees[prevZoom].points, (points) => points.map((p) => p.id ? makeClusterId(p.id) : getLocationId(p.location)), (point) => point.parentId);\n        }\n        const nodes = [];\n        for (const point of tree.points) {\n            const { x, y, numPoints, location } = point;\n            if (isLeafPoint(point)) {\n                nodes.push({\n                    id: getLocationId(location),\n                    zoom,\n                    lat: getLocationLat(location),\n                    lon: getLocationLon(location),\n                });\n            }\n            else if (isClusterPoint(point)) {\n                const { id } = point;\n                const children = childrenByParent && childrenByParent.get(id);\n                if (!children) {\n                    throw new Error(`Cluster ${id} doesn't have children`);\n                }\n                nodes.push({\n                    id: makeClusterId(id),\n                    name: makeClusterName(id, numPoints),\n                    zoom,\n                    lat: yLat(y),\n                    lon: xLng(x),\n                    children,\n                });\n            }\n        }\n        clusterLevels.push({\n            zoom,\n            nodes,\n        });\n        prevZoom = zoom;\n    }\n    return clusterLevels;\n}\nfunction createCluster(x, y, id, numPoints, weight) {\n    return {\n        x,\n        y,\n        zoom: Infinity,\n        id,\n        parentId: -1,\n        numPoints,\n        weight,\n    };\n}\nfunction cluster(points, zoom, tree, options) {\n    const clusters = [];\n    const { radius, extent } = options;\n    const r = radius / (extent * Math.pow(2, zoom));\n    // loop through each point\n    for (let i = 0; i < points.length; i++) {\n        const p = points[i];\n        // if we've already visited the point at this zoom level, skip it\n        if (p.zoom <= zoom) {\n            continue;\n        }\n        p.zoom = zoom;\n        // find all nearby points\n        const neighborIds = tree.within(p.x, p.y, r);\n        let weight = p.weight || 1;\n        let numPoints = isClusterPoint(p) ? p.numPoints : 1;\n        let wx = p.x * weight;\n        let wy = p.y * weight;\n        // encode both zoom and point index on which the cluster originated\n        const id = (i << 5) + (zoom + 1);\n        for (const neighborId of neighborIds) {\n            const b = tree.points[neighborId];\n            // filter out neighbors that are already processed\n            if (b.zoom <= zoom) {\n                continue;\n            }\n            b.zoom = zoom; // save the zoom (so it doesn't get processed twice)\n            const weight2 = b.weight || 1;\n            const numPoints2 = b.numPoints || 1;\n            wx += b.x * weight2; // accumulate coordinates for calculating weighted center\n            wy += b.y * weight2;\n            weight += weight2;\n            numPoints += numPoints2;\n            b.parentId = id;\n        }\n        if (numPoints === 1) {\n            clusters.push(p);\n        }\n        else {\n            p.parentId = id;\n            clusters.push(createCluster(wx / weight, wy / weight, id, numPoints, weight));\n        }\n    }\n    return clusters;\n}\n// spherical mercator to longitude/latitude\nfunction xLng(x) {\n    return (x - 0.5) * 360;\n}\nfunction yLat(y) {\n    const y2 = ((180 - y * 360) * Math.PI) / 180;\n    return (360 * Math.atan(Math.exp(y2))) / Math.PI - 90;\n}\n// longitude/latitude to spherical mercator in [0..1] range\nfunction lngX(lng) {\n    return lng / 360 + 0.5;\n}\nfunction latY(lat) {\n    const sin = Math.sin((lat * Math.PI) / 180);\n    const y = 0.5 - (0.25 * Math.log((1 + sin) / (1 - sin))) / Math.PI;\n    return y < 0 ? 0 : y > 1 ? 1 : y;\n}\nfunction getX(p) {\n    return p.x;\n}\nfunction getY(p) {\n    return p.y;\n}\n/**\n * Finds groups of locations which share the same positions.\n * They will always be clustered together at any zoom level\n * which can lead to having too many zooms.\n */\nfunction getMaxNumberOfClusters(locations, locationAccessors) {\n    const { getLocationLon, getLocationLat } = locationAccessors;\n    const countByLatLon = new Map();\n    let numLocations = 0;\n    for (const loc of locations) {\n        const lon = getLocationLon(loc);\n        const lat = getLocationLat(loc);\n        const key = `${lon},${lat}`;\n        const prev = countByLatLon.get(key);\n        countByLatLon.set(key, prev ? prev + 1 : 1);\n        numLocations++;\n    }\n    let numSame = 0;\n    for (const [key, count] of countByLatLon) {\n        if (count > 1) {\n            numSame++;\n        }\n    }\n    return numLocations - numSame;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2x1c3Rlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jbHVzdGVyL2NsdXN0ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7R0FnQkc7QUFFSDs7R0FFRztBQUVILGNBQWM7QUFDZCxFQUFFO0FBQ0YsNkJBQTZCO0FBQzdCLEVBQUU7QUFDRixtRkFBbUY7QUFDbkYsa0ZBQWtGO0FBQ2xGLG1EQUFtRDtBQUNuRCxFQUFFO0FBQ0YsZ0ZBQWdGO0FBQ2hGLGtGQUFrRjtBQUNsRiwyRUFBMkU7QUFDM0UsbUZBQW1GO0FBQ25GLGlGQUFpRjtBQUNqRixrRkFBa0Y7QUFDbEYsaUJBQWlCO0FBRWpCLE9BQU8sRUFBQyxHQUFHLEVBQUUsTUFBTSxFQUFDLE1BQU0sVUFBVSxDQUFDO0FBQ3JDLE9BQU8sTUFBTSxNQUFNLFFBQVEsQ0FBQztBQWM1QixNQUFNLGNBQWMsR0FBWTtJQUM5QixPQUFPLEVBQUUsQ0FBQztJQUNWLE9BQU8sRUFBRSxFQUFFO0lBQ1gsTUFBTSxFQUFFLEVBQUU7SUFDVixNQUFNLEVBQUUsR0FBRztJQUNYLFFBQVEsRUFBRSxFQUFFO0lBQ1osZUFBZSxFQUFFLENBQUMsRUFBVSxFQUFFLFNBQWlCLEVBQUUsRUFBRSxDQUFDLFNBQVM7SUFDN0QsYUFBYSxFQUFFLENBQUMsRUFBVSxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsSUFBSTtDQUMzQyxDQUFDO0FBc0JGLE1BQU0sVUFBVSxXQUFXLENBQUksQ0FBVztJQUN4QyxNQUFNLEVBQUMsS0FBSyxFQUFDLEdBQUcsQ0FBaUIsQ0FBQztJQUNsQyxPQUFPLEtBQUssSUFBSSxJQUFJLENBQUM7QUFDdkIsQ0FBQztBQUVELE1BQU0sVUFBVSxjQUFjLENBQUksQ0FBVztJQUMzQyxNQUFNLEVBQUMsRUFBRSxFQUFDLEdBQUcsQ0FBaUIsQ0FBQztJQUMvQixPQUFPLEVBQUUsSUFBSSxJQUFJLENBQUM7QUFDcEIsQ0FBQztBQUlELE1BQU0s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Q0FBQyxDQUFDO1FBQzVDLFlBQVksRUFBRSxDQUFDO0tBQ2hCO0lBRUQsSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDO0lBQ2hCLEtBQUssTUFBTSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsSUFBSSxhQUFhLEVBQUU7UUFDeEMsSUFBSSxLQUFLLEdBQUcsQ0FBQyxFQUFFO1lBQ2IsT0FBTyxFQUFFLENBQUM7U0FDWDtLQUNGO0lBQ0QsT0FBTyxZQUFZLEdBQUcsT0FBTyxDQUFDO0FBQ2hDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMjIgRmxvd21hcEJsdWVcbiAqIENvcHlyaWdodCAyMDE4LTIwMjAgVGVyYWx5dGljcywgbW9kaWZpZWQgYnkgRmxvd21hcEJsdWVcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqXG4gKi9cblxuLyoqXG4gKiBUaGUgY29kZSBpbiB0aGlzIGZpbGUgaXMgYSBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L3N1cGVyY2x1c3RlclxuICovXG5cbi8vIElTQyBMaWNlbnNlXG4vL1xuLy8gQ29weXJpZ2h0IChjKSAyMDE2LCBNYXBib3hcbi8vXG4vLyBQZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZVxuLy8gd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZCwgcHJvdmlkZWQgdGhhdCB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZVxuLy8gYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2UgYXBwZWFyIGluIGFsbCBjb3BpZXMuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxuLy8gUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORFxuLy8gRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXG4vLyBJTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST00gTE9TU1xuLy8gT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SIE9USEVSXG4vLyBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SIFBFUkZPUk1BTkNFIE9GXG4vLyBUSElTIFNPRlRXQVJFLlxuXG5pbXBvcnQge21pbiwgcm9sbHVwfSBmcm9tICdkMy1hcnJheSc7XG5pbXBvcnQgS0RCdXNoIGZyb20gJ2tkYnVzaCc7XG5pbXBvcnQge0xvY2F0aW9uV2VpZ2h0R2V0dGVyfSBmcm9tICcuL0NsdXN0ZXJJbmRleCc7XG5pbXBvcnQge0NsdXN0ZXIsIENsdXN0ZXJMZXZlbCwgQ2x1c3Rlck5vZGUsIExvY2F0aW9uQWNjZXNzb3JzfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3B0aW9ucyB7XG4gIG1pblpvb206IG51bWJlcjsgLy8gbWluIHpvb20gdG8gZ2VuZXJhdGUgY2x1c3RlcnMgb25cbiAgbWF4Wm9vbTogbnVtYmVyOyAvLyBtYXggem9vbSBsZXZlbCB0byBjbHVzdGVyIHRoZSBwb2ludHMgb25cbiAgcmFkaXVzOiBudW1iZXI7IC8vIGNsdXN0ZXIgcmFkaXVzIGluIHBpeGVsc1xuICBleHRlbnQ6IG51bWJlcjsgLy8gdGlsZSBleHRlbnQgKHJhZGl1cyBpcyBjYWxjdWxhdGVkIHJlbGF0aXZlIHRvIGl0KVxuICBub2RlU2l6ZTogbnVtYmVyOyAvLyBzaXplIG9mIHRoZSBLRC10cmVlIGxlYWYgbm9kZSwgYWZmZWN0cyBwZXJmb3JtYW5jZVxuICBtYWtlQ2x1c3Rlck5hbWU6IChpZDogbnVtYmVyLCBudW1Qb2ludHM6IG51bWJlcikgPT4gc3RyaW5nIHwgdW5kZWZpbmVkO1xuICBtYWtlQ2x1c3RlcklkOiAoaWQ6IG51bWJlcikgPT4gc3RyaW5nO1xufVxuXG5jb25zdCBkZWZhdWx0T3B0aW9uczogT3B0aW9ucyA9IHtcbiAgbWluWm9vbTogMCxcbiAgbWF4Wm9vbTogMTYsXG4gIHJhZGl1czogNDAsXG4gIGV4dGVudDogNTEyLFxuICBub2RlU2l6ZTogNjQsXG4gIG1ha2VDbHVzdGVyTmFtZTogKGlkOiBudW1iZXIsIG51bVBvaW50czogbnVtYmVyKSA9PiB1bmRlZmluZWQsXG4gIG1ha2VDbHVzdGVySWQ6IChpZDogbnVtYmVyKSA9PiBge1ske2lkfV19YCxcbn07XG5cbmludGVyZmFjZSBCYXNlUG9pbnQge1xuICB4OiBudW1iZXI7IC8vIHByb2plY3RlZCBwb2ludCBjb29yZGluYXRlc1xuICB5OiBudW1iZXI7XG4gIHdlaWdodDogbnVtYmVyO1xuICB6b29tOiBudW1iZXI7IC8vIHRoZSBsYXN0IHpvb20gdGhlIHBvaW50IHdhcyBwcm9jZXNzZWQgYXRcbiAgcGFyZW50SWQ6IG51bWJlcjsgLy8gcGFyZW50IGNsdXN0ZXIgaWRcbn1cblxuaW50ZXJmYWNlIExlYWZQb2ludDxMPiBleHRlbmRzIEJhc2VQb2ludCB7XG4gIGluZGV4OiBudW1iZXI7IC8vIGluZGV4IG9mIHRoZSBzb3VyY2UgZmVhdHVyZSBpbiB0aGUgb3JpZ2luYWwgaW5wdXQgYXJyYXksXG4gIGxvY2F0aW9uOiBMO1xufVxuXG5pbnRlcmZhY2UgQ2x1c3RlclBvaW50IGV4dGVuZHMgQmFzZVBvaW50IHtcbiAgaWQ6IG51bWJlcjtcbiAgbnVtUG9pbnRzOiBudW1iZXI7XG59XG5cbnR5cGUgUG9pbnQ8TD4gPSBMZWFmUG9pbnQ8TD4gfCBDbHVzdGVyUG9pbnQ7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0xlYWZQb2ludDxMPihwOiBQb2ludDxMPik6IHAgaXMgTGVhZlBvaW50PEw+IHtcbiAgY29uc3Qge2luZGV4fSA9IHAgYXMgTGVhZlBvaW50PEw+O1xuICByZXR1cm4gaW5kZXggIT0gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ2x1c3RlclBvaW50PEw+KHA6IFBvaW50PEw+KTogcCBpcyBDbHVzdGVyUG9pbnQge1xuICBjb25zdCB7aWR9ID0gcCBhcyBDbHVzdGVyUG9pbnQ7XG4gIHJldHVybiBpZCAhPSBudWxsO1xufVxuXG50eXBlIFpvb21MZXZlbEtEQnVzaCA9IGFueTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNsdXN0ZXJMb2NhdGlvbnM8TD4oXG4gIGxvY2F0aW9uczogSXRlcmFibGU8TD4sXG4gIGxvY2F0aW9uQWNjZXNzb3JzOiBMb2NhdGlvbkFjY2Vzc29yczxMPixcbiAgZ2V0TG9jYXRpb25XZWlnaHQ6IExvY2F0aW9uV2VpZ2h0R2V0dGVyLFxuICBvcHRpb25zPzogUGFydGlhbDxPcHRpb25zPixcbik6IENsdXN0ZXJMZXZlbFtdIHtcbiAgY29uc3Qge2dldExvY2F0aW9uTG9uLCBnZXRMb2NhdGlvbkxhdCwgZ2V0TG9jYXRpb25JZH0gPSBsb2NhdGlvbkFjY2Vzc29ycztcbiAgY29uc3Qgb3B0cyA9IHtcbiAgICAuLi5kZWZhdWx0T3B0aW9ucyxcbiAgICAuLi5vcHRpb25zLFxuICB9O1xuICBjb25zdCB7bWluWm9vbSwgbWF4Wm9vbSwgbm9kZVNpemUsIG1ha2VDbHVzdGVyTmFtZSwgbWFrZUNsdXN0ZXJJZH0gPSBvcHRzO1xuXG4gIGNvbnN0IHRyZWVzID0gbmV3IEFycmF5PFpvb21MZXZlbEtEQnVzaD4obWF4Wm9vbSArIDEpO1xuXG4gIC8vIGdlbmVyYXRlIGEgY2x1c3RlciBvYmplY3QgZm9yIGVhY2ggcG9pbnQgYW5kIGluZGV4IGlucHV0IHBvaW50cyBpbnRvIGEgS0QtdHJlZVxuICBsZXQgY2x1c3RlcnMgPSBuZXcgQXJyYXk8UG9pbnQ8TD4+KCk7XG4gIGxldCBsb2NhdGlvbnNDb3VudCA9IDA7XG4gIGZvciAoY29uc3QgbG9jYXRpb24gb2YgbG9jYXRpb25zKSB7XG4gICAgY29uc3QgeCA9IGdldExvY2F0aW9uTG9uKGxvY2F0aW9uKTtcbiAgICBjb25zdCB5ID0gZ2V0TG9jYXRpb25MYXQobG9jYXRpb24pO1xuICAgIGNsdXN0ZXJzLnB1c2goe1xuICAgICAgeDogbG5nWCh4KSwgLy8gcHJvamVjdGVkIHBvaW50IGNvb3JkaW5hdGVzXG4gICAgICB5OiBsYXRZKHkpLFxuICAgICAgd2VpZ2h0OiBnZXRMb2NhdGlvbldlaWdodChnZXRMb2NhdGlvbklkKGxvY2F0aW9uKSksXG4gICAgICB6b29tOiBJbmZpbml0eSwgLy8gdGhlIGxhc3Qgem9vbSB0aGUgcG9pbnQgd2FzIHByb2Nlc3NlZCBhdFxuICAgICAgaW5kZXg6IGxvY2F0aW9uc0NvdW50LCAvLyBpbmRleCBvZiB0aGUgc291cmNlIGZlYXR1cmUgaW4gdGhlIG9yaWdpbmFsIGlucHV0IGFycmF5LFxuICAgICAgcGFyZW50SWQ6IC0xLCAvLyBwYXJlbnQgY2x1c3RlciBpZFxuICAgICAgbG9jYXRpb24sXG4gICAgfSk7XG4gICAgbG9jYXRpb25zQ291bnQrKztcbiAgfVxuXG4gIC8vIGNsdXN0ZXIgcG9pbnRzIG9uIG1heCB6b29tLCB0aGVuIGNsdXN0ZXIgdGhlIHJlc3VsdHMgb24gcHJldmlvdXMgem9vbSwgZXRjLjtcbiAgLy8gcmVzdWx0cyBpbiBhIGNsdXN0ZXIgaGllcmFyY2h5IGFjcm9zcyB6b29tIGxldmVsc1xuICB0cmVlc1ttYXhab29tICsgMV0gPSBuZXcgS0RCdXNoKGNsdXN0ZXJzLCBnZXRYLCBnZXRZLCBub2RlU2l6ZSwgRmxvYXQzMkFycmF5KTtcbiAgbGV0IHByZXZab29tID0gbWF4Wm9vbSArIDE7XG5cbiAgZm9yIChsZXQgeiA9IG1heFpvb207IHogPj0gbWluWm9vbTsgei0tKSB7XG4gICAgLy8gY3JlYXRlIGEgbmV3IHNldCBvZiBjbHVzdGVycyBmb3IgdGhlIHpvb20gYW5kIGluZGV4IHRoZW0gd2l0aCBhIEtELXRyZWVcbiAgICBjb25zdCBfY2x1c3RlcnMgPSBjbHVzdGVyKGNsdXN0ZXJzLCB6LCB0cmVlc1twcmV2Wm9vbV0sIG9wdHMpO1xuICAgIGlmIChfY2x1c3RlcnMubGVuZ3RoID09PSBjbHVzdGVycy5sZW5ndGgpIHtcbiAgICAgIC8vIHNhbWUgbnVtYmVyIG9mIGNsdXN0ZXJzID0+IG1vdmUgdGhlIGhpZ2hlciBsZXZlbCBjbHVzdGVycyB1cFxuICAgICAgLy8gbm8gbmVlZCB0byBrZWVwIHRoZSBzYW1lIGRhdGEgb24gbXVsdGlwbGUgbGV2ZWxzXG4gICAgICB0cmVlc1t6XSA9IHRyZWVzW3ByZXZab29tXTtcbiAgICAgIHRyZWVzW3ByZXZab29tXSA9IHVuZGVmaW5lZDtcbiAgICAgIHByZXZab29tID0gejtcbiAgICAgIGNsdXN0ZXJzID0gX2NsdXN0ZXJzO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcmV2Wm9vbSA9IHo7XG4gICAgICBjbHVzdGVycyA9IF9jbHVzdGVycztcbiAgICAgIHRyZWVzW3pdID0gbmV3IEtEQnVzaChjbHVzdGVycywgZ2V0WCwgZ2V0WSwgbm9kZVNpemUsIEZsb2F0MzJBcnJheSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRyZWVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGNvbnN0IG51bWJlcnNPZkNsdXN0ZXJzID0gdHJlZXMubWFwKChkKSA9PiBkPy5wb2ludHMubGVuZ3RoKTtcbiAgY29uc3QgbWluQ2x1c3RlcnMgPSBtaW4obnVtYmVyc09mQ2x1c3RlcnMuZmlsdGVyKChkKSA9PiBkID4gMCkpO1xuICBjb25zdCBtYXhDbHVzdGVycyA9IGdldE1heE51bWJlck9mQ2x1c3RlcnMobG9jYXRpb25zLCBsb2NhdGlvbkFjY2Vzc29ycyk7XG5cbiAgbGV0IG1heEF2YWlsWm9vbSA9IG51bWJlcnNPZkNsdXN0ZXJzLmluZGV4T2YobWF4Q2x1c3RlcnMpO1xuICBpZiAobWF4Q2x1c3RlcnMgPCBsb2NhdGlvbnNDb3VudCkge1xuICAgIG1heEF2YWlsWm9vbSsrO1xuICAgIGlmIChtYXhBdmFpbFpvb20gPCBtYXhab29tICsgMSkge1xuICAgICAgdHJlZXNbbWF4QXZhaWxab29tXSA9IHRyZWVzW21heFpvb20gKyAxXTtcbiAgICAgIHRyZWVzW21heFpvb20gKyAxXSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbiAgY29uc3QgbWluQXZhaWxab29tID0gTWF0aC5taW4oXG4gICAgbWF4QXZhaWxab29tLFxuICAgIG51bWJlcnNPZkNsdXN0ZXJzLmxhc3RJbmRleE9mKG1pbkNsdXN0ZXJzKSxcbiAgKTtcblxuICBjb25zdCBjbHVzdGVyTGV2ZWxzID0gbmV3IEFycmF5PENsdXN0ZXJMZXZlbD4oKTtcbiAgcHJldlpvb20gPSBOYU47XG4gIGZvciAobGV0IHpvb20gPSBtYXhBdmFpbFpvb207IHpvb20gPj0gbWluQXZhaWxab29tOyB6b29tLS0pIHtcbiAgICBsZXQgY2hpbGRyZW5CeVBhcmVudDogTWFwPG51bWJlciwgKHN0cmluZyB8IG51bWJlcilbXT4gfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgdHJlZSA9IHRyZWVzW3pvb21dO1xuICAgIGlmICghdHJlZSkgY29udGludWU7XG4gICAgaWYgKHpvb20gPCBtYXhBdmFpbFpvb20pIHtcbiAgICAgIGNoaWxkcmVuQnlQYXJlbnQgPSByb2xsdXA8UG9pbnQ8TD4sIChzdHJpbmcgfCBudW1iZXIpW10sIG51bWJlcj4oXG4gICAgICAgIHRyZWVzW3ByZXZab29tXS5wb2ludHMsXG4gICAgICAgIChwb2ludHM6IGFueVtdKSA9PlxuICAgICAgICAgIHBvaW50cy5tYXAoKHA6IGFueSkgPT5cbiAgICAgICAgICAgIHAuaWQgPyBtYWtlQ2x1c3RlcklkKHAuaWQpIDogZ2V0TG9jYXRpb25JZChwLmxvY2F0aW9uKSxcbiAgICAgICAgICApLFxuICAgICAgICAocG9pbnQ6IGFueSkgPT4gcG9pbnQucGFyZW50SWQsXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IG5vZGVzOiBDbHVzdGVyTm9kZVtdID0gW107XG4gICAgZm9yIChjb25zdCBwb2ludCBvZiB0cmVlLnBvaW50cykge1xuICAgICAgY29uc3Qge3gsIHksIG51bVBvaW50cywgbG9jYXRpb259ID0gcG9pbnQ7XG4gICAgICBpZiAoaXNMZWFmUG9pbnQocG9pbnQpKSB7XG4gICAgICAgIG5vZGVzLnB1c2goe1xuICAgICAgICAgIGlkOiBnZXRMb2NhdGlvbklkKGxvY2F0aW9uKSxcbiAgICAgICAgICB6b29tLFxuICAgICAgICAgIGxhdDogZ2V0TG9jYXRpb25MYXQobG9jYXRpb24pLFxuICAgICAgICAgIGxvbjogZ2V0TG9jYXRpb25Mb24obG9jYXRpb24pLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoaXNDbHVzdGVyUG9pbnQocG9pbnQpKSB7XG4gICAgICAgIGNvbnN0IHtpZH0gPSBwb2ludDtcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBjaGlsZHJlbkJ5UGFyZW50ICYmIGNoaWxkcmVuQnlQYXJlbnQuZ2V0KGlkKTtcbiAgICAgICAgaWYgKCFjaGlsZHJlbikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2x1c3RlciAke2lkfSBkb2Vzbid0IGhhdmUgY2hpbGRyZW5gKTtcbiAgICAgICAgfVxuICAgICAgICBub2Rlcy5wdXNoKHtcbiAgICAgICAgICBpZDogbWFrZUNsdXN0ZXJJZChpZCksXG4gICAgICAgICAgbmFtZTogbWFrZUNsdXN0ZXJOYW1lKGlkLCBudW1Qb2ludHMpLFxuICAgICAgICAgIHpvb20sXG4gICAgICAgICAgbGF0OiB5TGF0KHkpLFxuICAgICAgICAgIGxvbjogeExuZyh4KSxcbiAgICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgfSBhcyBDbHVzdGVyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY2x1c3RlckxldmVscy5wdXNoKHtcbiAgICAgIHpvb20sXG4gICAgICBub2RlcyxcbiAgICB9KTtcbiAgICBwcmV2Wm9vbSA9IHpvb207XG4gIH1cbiAgcmV0dXJuIGNsdXN0ZXJMZXZlbHM7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNsdXN0ZXIoXG4gIHg6IG51bWJlcixcbiAgeTogbnVtYmVyLFxuICBpZDogbnVtYmVyLFxuICBudW1Qb2ludHM6IG51bWJlcixcbiAgd2VpZ2h0OiBudW1iZXIsXG4pOiBDbHVzdGVyUG9pbnQge1xuICByZXR1cm4ge1xuICAgIHgsIC8vIHdlaWdodGVkIGNsdXN0ZXIgY2VudGVyXG4gICAgeSxcbiAgICB6b29tOiBJbmZpbml0eSwgLy8gdGhlIGxhc3Qgem9vbSB0aGUgY2x1c3RlciB3YXMgcHJvY2Vzc2VkIGF0XG4gICAgaWQsIC8vIGVuY29kZXMgaW5kZXggb2YgdGhlIGZpcnN0IGNoaWxkIG9mIHRoZSBjbHVzdGVyIGFuZCBpdHMgem9vbSBsZXZlbFxuICAgIHBhcmVudElkOiAtMSwgLy8gcGFyZW50IGNsdXN0ZXIgaWRcbiAgICBudW1Qb2ludHMsXG4gICAgd2VpZ2h0LFxuICB9O1xufVxuXG5mdW5jdGlvbiBjbHVzdGVyPEw+KFxuICBwb2ludHM6IFBvaW50PEw+W10sXG4gIHpvb206IG51bWJlcixcbiAgdHJlZTogWm9vbUxldmVsS0RCdXNoLFxuICBvcHRpb25zOiBPcHRpb25zLFxuKSB7XG4gIGNvbnN0IGNsdXN0ZXJzOiBQb2ludDxMPltdID0gW107XG4gIGNvbnN0IHtyYWRpdXMsIGV4dGVudH0gPSBvcHRpb25zO1xuICBjb25zdCByID0gcmFkaXVzIC8gKGV4dGVudCAqIE1hdGgucG93KDIsIHpvb20pKTtcblxuICAvLyBsb29wIHRocm91Z2ggZWFjaCBwb2ludFxuICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHAgPSBwb2ludHNbaV07XG4gICAgLy8gaWYgd2UndmUgYWxyZWFkeSB2aXNpdGVkIHRoZSBwb2ludCBhdCB0aGlzIHpvb20gbGV2ZWwsIHNraXAgaXRcbiAgICBpZiAocC56b29tIDw9IHpvb20pIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBwLnpvb20gPSB6b29tO1xuXG4gICAgLy8gZmluZCBhbGwgbmVhcmJ5IHBvaW50c1xuICAgIGNvbnN0IG5laWdoYm9ySWRzID0gdHJlZS53aXRoaW4ocC54LCBwLnksIHIpO1xuXG4gICAgbGV0IHdlaWdodCA9IHAud2VpZ2h0IHx8IDE7XG4gICAgbGV0IG51bVBvaW50cyA9IGlzQ2x1c3RlclBvaW50KHApID8gcC5udW1Qb2ludHMgOiAxO1xuICAgIGxldCB3eCA9IHAueCAqIHdlaWdodDtcbiAgICBsZXQgd3kgPSBwLnkgKiB3ZWlnaHQ7XG5cbiAgICAvLyBlbmNvZGUgYm90aCB6b29tIGFuZCBwb2ludCBpbmRleCBvbiB3aGljaCB0aGUgY2x1c3RlciBvcmlnaW5hdGVkXG4gICAgY29uc3QgaWQgPSAoaSA8PCA1KSArICh6b29tICsgMSk7XG5cbiAgICBmb3IgKGNvbnN0IG5laWdoYm9ySWQgb2YgbmVpZ2hib3JJZHMpIHtcbiAgICAgIGNvbnN0IGIgPSB0cmVlLnBvaW50c1tuZWlnaGJvcklkXTtcbiAgICAgIC8vIGZpbHRlciBvdXQgbmVpZ2hib3JzIHRoYXQgYXJlIGFscmVhZHkgcHJvY2Vzc2VkXG4gICAgICBpZiAoYi56b29tIDw9IHpvb20pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBiLnpvb20gPSB6b29tOyAvLyBzYXZlIHRoZSB6b29tIChzbyBpdCBkb2Vzbid0IGdldCBwcm9jZXNzZWQgdHdpY2UpXG5cbiAgICAgIGNvbnN0IHdlaWdodDIgPSBiLndlaWdodCB8fCAxO1xuICAgICAgY29uc3QgbnVtUG9pbnRzMiA9IGIubnVtUG9pbnRzIHx8IDE7XG4gICAgICB3eCArPSBiLnggKiB3ZWlnaHQyOyAvLyBhY2N1bXVsYXRlIGNvb3JkaW5hdGVzIGZvciBjYWxjdWxhdGluZyB3ZWlnaHRlZCBjZW50ZXJcbiAgICAgIHd5ICs9IGIueSAqIHdlaWdodDI7XG5cbiAgICAgIHdlaWdodCArPSB3ZWlnaHQyO1xuICAgICAgbnVtUG9pbnRzICs9IG51bVBvaW50czI7XG4gICAgICBiLnBhcmVudElkID0gaWQ7XG4gICAgfVxuXG4gICAgaWYgKG51bVBvaW50cyA9PT0gMSkge1xuICAgICAgY2x1c3RlcnMucHVzaChwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcC5wYXJlbnRJZCA9IGlkO1xuICAgICAgY2x1c3RlcnMucHVzaChcbiAgICAgICAgY3JlYXRlQ2x1c3Rlcih3eCAvIHdlaWdodCwgd3kgLyB3ZWlnaHQsIGlkLCBudW1Qb2ludHMsIHdlaWdodCksXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjbHVzdGVycztcbn1cblxuLy8gc3BoZXJpY2FsIG1lcmNhdG9yIHRvIGxvbmdpdHVkZS9sYXRpdHVkZVxuZnVuY3Rpb24geExuZyh4OiBudW1iZXIpIHtcbiAgcmV0dXJuICh4IC0gMC41KSAqIDM2MDtcbn1cblxuZnVuY3Rpb24geUxhdCh5OiBudW1iZXIpIHtcbiAgY29uc3QgeTIgPSAoKDE4MCAtIHkgKiAzNjApICogTWF0aC5QSSkgLyAxODA7XG4gIHJldHVybiAoMzYwICogTWF0aC5hdGFuKE1hdGguZXhwKHkyKSkpIC8gTWF0aC5QSSAtIDkwO1xufVxuXG4vLyBsb25naXR1ZGUvbGF0aXR1ZGUgdG8gc3BoZXJpY2FsIG1lcmNhdG9yIGluIFswLi4xXSByYW5nZVxuZnVuY3Rpb24gbG5nWChsbmc6IG51bWJlcikge1xuICByZXR1cm4gbG5nIC8gMzYwICsgMC41O1xufVxuXG5mdW5jdGlvbiBsYXRZKGxhdDogbnVtYmVyKSB7XG4gIGNvbnN0IHNpbiA9IE1hdGguc2luKChsYXQgKiBNYXRoLlBJKSAvIDE4MCk7XG4gIGNvbnN0IHkgPSAwLjUgLSAoMC4yNSAqIE1hdGgubG9nKCgxICsgc2luKSAvICgxIC0gc2luKSkpIC8gTWF0aC5QSTtcbiAgcmV0dXJuIHkgPCAwID8gMCA6IHkgPiAxID8gMSA6IHk7XG59XG5cbmZ1bmN0aW9uIGdldFg8TD4ocDogUG9pbnQ8TD4pIHtcbiAgcmV0dXJuIHAueDtcbn1cblxuZnVuY3Rpb24gZ2V0WTxMPihwOiBQb2ludDxMPikge1xuICByZXR1cm4gcC55O1xufVxuXG4vKipcbiAqIEZpbmRzIGdyb3VwcyBvZiBsb2NhdGlvbnMgd2hpY2ggc2hhcmUgdGhlIHNhbWUgcG9zaXRpb25zLlxuICogVGhleSB3aWxsIGFsd2F5cyBiZSBjbHVzdGVyZWQgdG9nZXRoZXIgYXQgYW55IHpvb20gbGV2ZWxcbiAqIHdoaWNoIGNhbiBsZWFkIHRvIGhhdmluZyB0b28gbWFueSB6b29tcy5cbiAqL1xuZnVuY3Rpb24gZ2V0TWF4TnVtYmVyT2ZDbHVzdGVyczxMPihcbiAgbG9jYXRpb25zOiBJdGVyYWJsZTxMPixcbiAgbG9jYXRpb25BY2Nlc3NvcnM6IExvY2F0aW9uQWNjZXNzb3JzPEw+LFxuKSB7XG4gIGNvbnN0IHtnZXRMb2NhdGlvbkxvbiwgZ2V0TG9jYXRpb25MYXR9ID0gbG9jYXRpb25BY2Nlc3NvcnM7XG4gIGNvbnN0IGNvdW50QnlMYXRMb24gPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuICBsZXQgbnVtTG9jYXRpb25zID0gMDtcbiAgZm9yIChjb25zdCBsb2Mgb2YgbG9jYXRpb25zKSB7XG4gICAgY29uc3QgbG9uID0gZ2V0TG9jYXRpb25Mb24obG9jKTtcbiAgICBjb25zdCBsYXQgPSBnZXRMb2NhdGlvbkxhdChsb2MpO1xuICAgIGNvbnN0IGtleSA9IGAke2xvbn0sJHtsYXR9YDtcbiAgICBjb25zdCBwcmV2ID0gY291bnRCeUxhdExvbi5nZXQoa2V5KTtcbiAgICBjb3VudEJ5TGF0TG9uLnNldChrZXksIHByZXYgPyBwcmV2ICsgMSA6IDEpO1xuICAgIG51bUxvY2F0aW9ucysrO1xuICB9XG5cbiAgbGV0IG51bVNhbWUgPSAwO1xuICBmb3IgKGNvbnN0IFtrZXksIGNvdW50XSBvZiBjb3VudEJ5TGF0TG9uKSB7XG4gICAgaWYgKGNvdW50ID4gMSkge1xuICAgICAgbnVtU2FtZSsrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVtTG9jYXRpb25zIC0gbnVtU2FtZTtcbn1cbiJdfQ==","import { isAggregateFlow, isCluster, isLocationClusterNode, } from './types';\nexport default class FlowmapAggregateAccessors {\n    constructor(accessors) {\n        this.getLocationId = (location) => isLocationClusterNode(location)\n            ? location.id\n            : this.accessors.getLocationId(location);\n        this.getLocationName = (location) => {\n            let name;\n            if (isLocationClusterNode(location) && isCluster(location)) {\n                name = location.name;\n            }\n            else if (this.accessors.getLocationName) {\n                name = this.accessors.getLocationName(location);\n            }\n            if (!name)\n                name = `${this.getLocationId(location)}`;\n            return name;\n        };\n        this.getLocationLat = (location) => isLocationClusterNode(location)\n            ? location.lat\n            : this.accessors.getLocationLat(location);\n        this.getLocationLon = (location) => isLocationClusterNode(location)\n            ? location.lon\n            : this.accessors.getLocationLon(location);\n        this.getFlowOriginId = (f) => {\n            return isAggregateFlow(f) ? f.origin : this.accessors.getFlowOriginId(f);\n        };\n        this.getFlowDestId = (f) => {\n            return isAggregateFlow(f) ? f.dest : this.accessors.getFlowDestId(f);\n        };\n        this.getFlowMagnitude = (f) => {\n            return isAggregateFlow(f) ? f.count : this.accessors.getFlowMagnitude(f);\n        };\n        // Note: Aggregate flows have no time\n        this.getFlowTime = (f) => {\n            const { getFlowTime } = this.accessors;\n            return getFlowTime ? getFlowTime(f) : undefined;\n        };\n        this.accessors = accessors;\n    }\n    setAccessors(accessors) {\n        this.accessors = accessors;\n    }\n    getFlowmapDataAccessors() {\n        return this.accessors;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmxvd21hcEFnZ3JlZ2F0ZUFjY2Vzc29ycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9GbG93bWFwQWdncmVnYXRlQWNjZXNzb3JzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFJTCxlQUFlLEVBQ2YsU0FBUyxFQUNULHFCQUFxQixHQUN0QixNQUFNLFNBQVMsQ0FBQztBQUVqQixNQUFNLENBQUMsT0FBTyxPQUFPLHlCQUF5QjtJQUU1QyxZQUFZLFNBQXFDO1FBWWpELGtCQUFhLEdBQUcsQ0FBQyxRQUF5QixFQUFtQixFQUFFLENBQzdELHFCQUFxQixDQUFDLFFBQVEsQ0FBQztZQUM3QixDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDYixDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFN0Msb0JBQWUsR0FBRyxDQUFDLFFBQXlCLEVBQVUsRUFBRTtZQUN0RCxJQUFJLElBQUksQ0FBQztZQUNULElBQUkscUJBQXFCLENBQUMsUUFBUSxDQUFDLElBQUksU0FBUyxDQUFDLFFBQVEsQ0FBQyxFQUFFO2dCQUMxRCxJQUFJLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQzthQUN0QjtpQkFBTSxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsZUFBZSxFQUFFO2dCQUN6QyxJQUFJLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsUUFBYSxDQUFDLENBQUM7YUFDdEQ7WUFDRCxJQUFJLENBQUMsSUFBSTtnQkFBRSxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUM7WUFDcEQsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDLENBQUM7UUFFRixtQkFBYyxHQUFHLENBQUMsUUFBeUIsRUFBVSxFQUFFLENBQ3JELHFCQUFxQixDQUFDLFFBQVEsQ0FBQztZQUM3QixDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUc7WUFDZCxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFOUMsbUJBQWMsR0FBRyxDQUFDLFFBQXlCLEVBQVUsRUFBRSxDQUNyRCxxQkFBcUIsQ0FBQyxRQUFRLENBQUM7WUFDN0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHO1lBQ2QsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBRTlDLG9CQUFlLEdBQUcsQ0FBQyxDQUFvQixFQUFFLEVBQUU7WUFDekMsT0FBTyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNFLENBQUMsQ0FBQztRQUVGLGtCQUFhLEdBQUcsQ0FBQyxDQUFvQixFQUFFLEVBQUU7WUFDdkMsT0FBTyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZFLENBQUMsQ0FBQztRQUVGLHFCQUFnQixHQUFHLENBQUMsQ0FBb0IsRUFBRSxFQUFFO1lBQzFDLE9BQU8sZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNFLENBQUMsQ0FBQztRQUVGLHFDQUFxQztRQUNyQyxnQkFBVyxHQUFHLENBQUMsQ0FBSSxFQUFFLEVBQUU7WUFDckIsTUFBTSxFQUFDLFdBQVcsRUFBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDckMsT0FBTyxXQUFXLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO1FBQ2xELENBQUMsQ0FBQztRQXJEQSxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztJQUM3QixDQUFDO0lBRUQsWUFBWSxDQUFDLFNBQXFDO1FBQ2hELElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0lBQzdCLENBQUM7SUFFRCx1QkFBdUI7UUFDckIsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQ3hCLENBQUM7Q0E2Q0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBZ2dyZWdhdGVGbG93LFxuICBDbHVzdGVyTm9kZSxcbiAgRmxvd21hcERhdGFBY2Nlc3NvcnMsXG4gIGlzQWdncmVnYXRlRmxvdyxcbiAgaXNDbHVzdGVyLFxuICBpc0xvY2F0aW9uQ2x1c3Rlck5vZGUsXG59IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGbG93bWFwQWdncmVnYXRlQWNjZXNzb3JzPEwsIEY+IHtcbiAgcHJpdmF0ZSBhY2Nlc3NvcnM6IEZsb3dtYXBEYXRhQWNjZXNzb3JzPEwsIEY+O1xuICBjb25zdHJ1Y3RvcihhY2Nlc3NvcnM6IEZsb3dtYXBEYXRhQWNjZXNzb3JzPEwsIEY+KSB7XG4gICAgdGhpcy5hY2Nlc3NvcnMgPSBhY2Nlc3NvcnM7XG4gIH1cblxuICBzZXRBY2Nlc3NvcnMoYWNjZXNzb3JzOiBGbG93bWFwRGF0YUFjY2Vzc29yczxMLCBGPikge1xuICAgIHRoaXMuYWNjZXNzb3JzID0gYWNjZXNzb3JzO1xuICB9XG5cbiAgZ2V0Rmxvd21hcERhdGFBY2Nlc3NvcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWNjZXNzb3JzO1xuICB9XG5cbiAgZ2V0TG9jYXRpb25JZCA9IChsb2NhdGlvbjogTCB8IENsdXN0ZXJOb2RlKTogc3RyaW5nIHwgbnVtYmVyID0+XG4gICAgaXNMb2NhdGlvbkNsdXN0ZXJOb2RlKGxvY2F0aW9uKVxuICAgICAgPyBsb2NhdGlvbi5pZFxuICAgICAgOiB0aGlzLmFjY2Vzc29ycy5nZXRMb2NhdGlvbklkKGxvY2F0aW9uKTtcblxuICBnZXRMb2NhdGlvbk5hbWUgPSAobG9jYXRpb246IEwgfCBDbHVzdGVyTm9kZSk6IHN0cmluZyA9PiB7XG4gICAgbGV0IG5hbWU7XG4gICAgaWYgKGlzTG9jYXRpb25DbHVzdGVyTm9kZShsb2NhdGlvbikgJiYgaXNDbHVzdGVyKGxvY2F0aW9uKSkge1xuICAgICAgbmFtZSA9IGxvY2F0aW9uLm5hbWU7XG4gICAgfSBlbHNlIGlmICh0aGlzLmFjY2Vzc29ycy5nZXRMb2NhdGlvbk5hbWUpIHtcbiAgICAgIG5hbWUgPSB0aGlzLmFjY2Vzc29ycy5nZXRMb2NhdGlvbk5hbWUobG9jYXRpb24gYXMgTCk7XG4gICAgfVxuICAgIGlmICghbmFtZSkgbmFtZSA9IGAke3RoaXMuZ2V0TG9jYXRpb25JZChsb2NhdGlvbil9YDtcbiAgICByZXR1cm4gbmFtZTtcbiAgfTtcblxuICBnZXRMb2NhdGlvbkxhdCA9IChsb2NhdGlvbjogTCB8IENsdXN0ZXJOb2RlKTogbnVtYmVyID0+XG4gICAgaXNMb2NhdGlvbkNsdXN0ZXJOb2RlKGxvY2F0aW9uKVxuICAgICAgPyBsb2NhdGlvbi5sYXRcbiAgICAgIDogdGhpcy5hY2Nlc3NvcnMuZ2V0TG9jYXRpb25MYXQobG9jYXRpb24pO1xuXG4gIGdldExvY2F0aW9uTG9uID0gKGxvY2F0aW9uOiBMIHwgQ2x1c3Rlck5vZGUpOiBudW1iZXIgPT5cbiAgICBpc0xvY2F0aW9uQ2x1c3Rlck5vZGUobG9jYXRpb24pXG4gICAgICA/IGxvY2F0aW9uLmxvblxuICAgICAgOiB0aGlzLmFjY2Vzc29ycy5nZXRMb2NhdGlvbkxvbihsb2NhdGlvbik7XG5cbiAgZ2V0Rmxvd09yaWdpbklkID0gKGY6IEYgfCBBZ2dyZWdhdGVGbG93KSA9PiB7XG4gICAgcmV0dXJuIGlzQWdncmVnYXRlRmxvdyhmKSA/IGYub3JpZ2luIDogdGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd09yaWdpbklkKGYpO1xuICB9O1xuXG4gIGdldEZsb3dEZXN0SWQgPSAoZjogRiB8IEFnZ3JlZ2F0ZUZsb3cpID0+IHtcbiAgICByZXR1cm4gaXNBZ2dyZWdhdGVGbG93KGYpID8gZi5kZXN0IDogdGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd0Rlc3RJZChmKTtcbiAgfTtcblxuICBnZXRGbG93TWFnbml0dWRlID0gKGY6IEYgfCBBZ2dyZWdhdGVGbG93KSA9PiB7XG4gICAgcmV0dXJuIGlzQWdncmVnYXRlRmxvdyhmKSA/IGYuY291bnQgOiB0aGlzLmFjY2Vzc29ycy5nZXRGbG93TWFnbml0dWRlKGYpO1xuICB9O1xuXG4gIC8vIE5vdGU6IEFnZ3JlZ2F0ZSBmbG93cyBoYXZlIG5vIHRpbWVcbiAgZ2V0Rmxvd1RpbWUgPSAoZjogRikgPT4ge1xuICAgIGNvbnN0IHtnZXRGbG93VGltZX0gPSB0aGlzLmFjY2Vzc29ycztcbiAgICByZXR1cm4gZ2V0Rmxvd1RpbWUgPyBnZXRGbG93VGltZShmKSA6IHVuZGVmaW5lZDtcbiAgfTtcbn1cbiJdfQ==","import { WebMercatorViewport } from '@math.gl/web-mercator';\nimport { isCluster, } from './types';\nimport { scaleLinear } from 'd3-scale';\nimport { descending } from 'd3-array';\n// TODO: use re-reselect\nexport const getViewportBoundingBox = (viewport, maxLocationCircleSize = 0) => {\n    const pad = maxLocationCircleSize;\n    const bounds = new WebMercatorViewport(Object.assign(Object.assign({}, viewport), { width: viewport.width + pad * 2, height: viewport.height + pad * 2 })).getBounds();\n    return [bounds[0][0], bounds[0][1], bounds[1][0], bounds[1][1]];\n};\nexport const getFlowThicknessScale = (magnitudeExtent) => {\n    if (!magnitudeExtent)\n        return undefined;\n    return scaleLinear()\n        .range([0.025, 0.5])\n        .domain([\n        0,\n        // should support diff mode too\n        Math.max.apply(null, magnitudeExtent.map((x) => Math.abs(x || 0))),\n    ]);\n};\n/**\n * Adding meaningful cluster names.\n * NOTE: this will mutate the nodes in clusterIndex\n */\nexport function addClusterNames(clusterIndex, clusterLevels, locationsById, locationAccessors, getLocationWeight) {\n    const { getLocationId, getLocationName, getLocationClusterName } = locationAccessors;\n    const getName = (id) => {\n        const loc = locationsById.get(id);\n        if (loc) {\n            return getLocationName ? getLocationName(loc) : getLocationId(loc) || id;\n        }\n        return `\"${id}\"`;\n    };\n    for (const level of clusterLevels) {\n        for (const node of level.nodes) {\n            // Here mutating the nodes (adding names)\n            if (isCluster(node)) {\n                const leaves = clusterIndex.expandCluster(node);\n                leaves.sort((a, b) => descending(getLocationWeight(a), getLocationWeight(b)));\n                if (getLocationClusterName) {\n                    node.name = getLocationClusterName(leaves);\n                }\n                else {\n                    const topId = leaves[0];\n                    const otherId = leaves.length === 2 ? leaves[1] : undefined;\n                    node.name = `\"${getName(topId)}\" and ${otherId ? `\"${getName(otherId)}\"` : `${leaves.length - 1} others`}`;\n                }\n            }\n            else {\n                node.name = getName(node.id);\n            }\n        }\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0b3ItZnVuY3Rpb25zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3NlbGVjdG9yLWZ1bmN0aW9ucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUMsbUJBQW1CLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUMxRCxPQUFPLEVBRUwsU0FBUyxHQUdWLE1BQU0sU0FBUyxDQUFDO0FBQ2pCLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxVQUFVLENBQUM7QUFFckMsT0FBTyxFQUFDLFVBQVUsRUFBQyxNQUFNLFVBQVUsQ0FBQztBQUVwQyx3QkFBd0I7QUFFeEIsTUFBTSxDQUFDLE1BQU0sc0JBQXNCLEdBQUcsQ0FDcEMsUUFBdUIsRUFDdkIscUJBQXFCLEdBQUcsQ0FBQyxFQUNTLEVBQUU7SUFDcEMsTUFBTSxHQUFHLEdBQUcscUJBQXFCLENBQUM7SUFDbEMsTUFBTSxNQUFNLEdBQUcsSUFBSSxtQkFBbUIsaUNBQ2pDLFFBQVEsS0FDWCxLQUFLLEVBQUUsUUFBUSxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsQ0FBQyxFQUMvQixNQUFNLEVBQUUsUUFBUSxDQUFDLE1BQU0sR0FBRyxHQUFHLEdBQUcsQ0FBQyxJQUNqQyxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ2YsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xFLENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLHFCQUFxQixHQUFHLENBQ25DLGVBQTZDLEVBQzdDLEVBQUU7SUFDRixJQUFJLENBQUMsZUFBZTtRQUFFLE9BQU8sU0FBUyxDQUFDO0lBQ3ZDLE9BQU8sV0FBVyxFQUFFO1NBQ2pCLEtBQUssQ0FBQyxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztTQUNuQixNQUFNLENBQUM7UUFDTixDQUFDO1FBQ0QsK0JBQStCO1FBQy9CLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUNaLElBQUksRUFDSixlQUFlLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBcUIsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FDakU7S0FDRixDQUFDLENBQUM7QUFDUCxDQUFDLENBQUM7QUFFRjs7O0dBR0c7QUFDSCxNQUFNLFVBQVUsZUFBZSxDQUM3QixZQUE2QixFQUM3QixhQUE2QixFQUM3QixhQUFzQyxFQUN0QyxpQkFBdUMsRUFDdkMsaUJBQXVDO0lBRXZDLE1BQU0sRUFBQyxhQUFhLEVBQUUsZUFBZSxFQUFFLHNCQUFzQixFQUFDLEdBQzVELGlCQUFpQixDQUFDO0lBQ3BCLE1BQU0sT0FBTyxHQUFHLENBQUMsRUFBbUIsRUFBRSxFQUFFO1FBQ3RDLE1BQU0sR0FBRyxHQUFHLGFBQWEsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDbEMsSUFBSSxHQUFHLEVBQUU7WUFDUCxPQUFPLGVBQWUsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO1NBQzFFO1FBQ0QsT0FBTyxJQUFJLEVBQUUsR0FBRyxDQUFDO0lBQ25CLENBQUMsQ0FBQztJQUNGLEtBQUssTUFBTSxLQUFLLElBQUksYUFBYSxFQUFFO1FBQ2pDLEtBQUssTUFBTSxJQUFJLElBQUksS0FBSyxDQUFDLEtBQUssRUFBRTtZQUM5Qix5Q0FBeUM7WUFDekMsSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQ25CLE1BQU0sTUFBTSxHQUFHLFlBQVksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBRWhELE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FDbkIsVUFBVSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxFQUFFLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQ3ZELENBQUM7Z0JBRUYsSUFBSSxzQkFBc0IsRUFBRTtvQkFDMUIsSUFBSSxDQUFDLElBQUksR0FBRyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztpQkFDNUM7cUJBQU07b0JBQ0wsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUN4QixNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7b0JBQzVELElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLFNBQzVCLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsU0FDMUQsRUFBRSxDQUFDO2lCQUNKO2FBQ0Y7aUJBQU07Z0JBQ0osSUFBWSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2FBQ3ZDO1NBQ0Y7S0FDRjtBQUNILENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1dlYk1lcmNhdG9yVmlld3BvcnR9IGZyb20gJ0BtYXRoLmdsL3dlYi1tZXJjYXRvcic7XG5pbXBvcnQge1xuICBDbHVzdGVyTGV2ZWwsXG4gIGlzQ2x1c3RlcixcbiAgTG9jYXRpb25BY2Nlc3NvcnMsXG4gIFZpZXdwb3J0UHJvcHMsXG59IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtzY2FsZUxpbmVhcn0gZnJvbSAnZDMtc2NhbGUnO1xuaW1wb3J0IHtDbHVzdGVySW5kZXgsIExvY2F0aW9uV2VpZ2h0R2V0dGVyfSBmcm9tICcuL2NsdXN0ZXIvQ2x1c3RlckluZGV4JztcbmltcG9ydCB7ZGVzY2VuZGluZ30gZnJvbSAnZDMtYXJyYXknO1xuXG4vLyBUT0RPOiB1c2UgcmUtcmVzZWxlY3RcblxuZXhwb3J0IGNvbnN0IGdldFZpZXdwb3J0Qm91bmRpbmdCb3ggPSAoXG4gIHZpZXdwb3J0OiBWaWV3cG9ydFByb3BzLFxuICBtYXhMb2NhdGlvbkNpcmNsZVNpemUgPSAwLFxuKTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPT4ge1xuICBjb25zdCBwYWQgPSBtYXhMb2NhdGlvbkNpcmNsZVNpemU7XG4gIGNvbnN0IGJvdW5kcyA9IG5ldyBXZWJNZXJjYXRvclZpZXdwb3J0KHtcbiAgICAuLi52aWV3cG9ydCxcbiAgICB3aWR0aDogdmlld3BvcnQud2lkdGggKyBwYWQgKiAyLFxuICAgIGhlaWdodDogdmlld3BvcnQuaGVpZ2h0ICsgcGFkICogMixcbiAgfSkuZ2V0Qm91bmRzKCk7XG4gIHJldHVybiBbYm91bmRzWzBdWzBdLCBib3VuZHNbMF1bMV0sIGJvdW5kc1sxXVswXSwgYm91bmRzWzFdWzFdXTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRGbG93VGhpY2tuZXNzU2NhbGUgPSAoXG4gIG1hZ25pdHVkZUV4dGVudDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZCxcbikgPT4ge1xuICBpZiAoIW1hZ25pdHVkZUV4dGVudCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgcmV0dXJuIHNjYWxlTGluZWFyKClcbiAgICAucmFuZ2UoWzAuMDI1LCAwLjVdKVxuICAgIC5kb21haW4oW1xuICAgICAgMCxcbiAgICAgIC8vIHNob3VsZCBzdXBwb3J0IGRpZmYgbW9kZSB0b29cbiAgICAgIE1hdGgubWF4LmFwcGx5KFxuICAgICAgICBudWxsLFxuICAgICAgICBtYWduaXR1ZGVFeHRlbnQubWFwKCh4OiBudW1iZXIgfCB1bmRlZmluZWQpID0+IE1hdGguYWJzKHggfHwgMCkpLFxuICAgICAgKSxcbiAgICBdKTtcbn07XG5cbi8qKlxuICogQWRkaW5nIG1lYW5pbmdmdWwgY2x1c3RlciBuYW1lcy5cbiAqIE5PVEU6IHRoaXMgd2lsbCBtdXRhdGUgdGhlIG5vZGVzIGluIGNsdXN0ZXJJbmRleFxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2x1c3Rlck5hbWVzPEwsIEY+KFxuICBjbHVzdGVySW5kZXg6IENsdXN0ZXJJbmRleDxGPixcbiAgY2x1c3RlckxldmVsczogQ2x1c3RlckxldmVsW10sXG4gIGxvY2F0aW9uc0J5SWQ6IE1hcDxzdHJpbmcgfCBudW1iZXIsIEw+LFxuICBsb2NhdGlvbkFjY2Vzc29yczogTG9jYXRpb25BY2Nlc3NvcnM8TD4sXG4gIGdldExvY2F0aW9uV2VpZ2h0OiBMb2NhdGlvbldlaWdodEdldHRlcixcbik6IHZvaWQge1xuICBjb25zdCB7Z2V0TG9jYXRpb25JZCwgZ2V0TG9jYXRpb25OYW1lLCBnZXRMb2NhdGlvbkNsdXN0ZXJOYW1lfSA9XG4gICAgbG9jYXRpb25BY2Nlc3NvcnM7XG4gIGNvbnN0IGdldE5hbWUgPSAoaWQ6IHN0cmluZyB8IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IGxvYyA9IGxvY2F0aW9uc0J5SWQuZ2V0KGlkKTtcbiAgICBpZiAobG9jKSB7XG4gICAgICByZXR1cm4gZ2V0TG9jYXRpb25OYW1lID8gZ2V0TG9jYXRpb25OYW1lKGxvYykgOiBnZXRMb2NhdGlvbklkKGxvYykgfHwgaWQ7XG4gICAgfVxuICAgIHJldHVybiBgXCIke2lkfVwiYDtcbiAgfTtcbiAgZm9yIChjb25zdCBsZXZlbCBvZiBjbHVzdGVyTGV2ZWxzKSB7XG4gICAgZm9yIChjb25zdCBub2RlIG9mIGxldmVsLm5vZGVzKSB7XG4gICAgICAvLyBIZXJlIG11dGF0aW5nIHRoZSBub2RlcyAoYWRkaW5nIG5hbWVzKVxuICAgICAgaWYgKGlzQ2x1c3Rlcihub2RlKSkge1xuICAgICAgICBjb25zdCBsZWF2ZXMgPSBjbHVzdGVySW5kZXguZXhwYW5kQ2x1c3Rlcihub2RlKTtcblxuICAgICAgICBsZWF2ZXMuc29ydCgoYSwgYikgPT5cbiAgICAgICAgICBkZXNjZW5kaW5nKGdldExvY2F0aW9uV2VpZ2h0KGEpLCBnZXRMb2NhdGlvbldlaWdodChiKSksXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGdldExvY2F0aW9uQ2x1c3Rlck5hbWUpIHtcbiAgICAgICAgICBub2RlLm5hbWUgPSBnZXRMb2NhdGlvbkNsdXN0ZXJOYW1lKGxlYXZlcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgdG9wSWQgPSBsZWF2ZXNbMF07XG4gICAgICAgICAgY29uc3Qgb3RoZXJJZCA9IGxlYXZlcy5sZW5ndGggPT09IDIgPyBsZWF2ZXNbMV0gOiB1bmRlZmluZWQ7XG4gICAgICAgICAgbm9kZS5uYW1lID0gYFwiJHtnZXROYW1lKHRvcElkKX1cIiBhbmQgJHtcbiAgICAgICAgICAgIG90aGVySWQgPyBgXCIke2dldE5hbWUob3RoZXJJZCl9XCJgIDogYCR7bGVhdmVzLmxlbmd0aCAtIDF9IG90aGVyc2BcbiAgICAgICAgICB9YDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKG5vZGUgYXMgYW55KS5uYW1lID0gZ2V0TmFtZShub2RlLmlkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ==","import { timeFormat, timeParse } from 'd3-time-format';\nimport { timeDay, timeHour, timeMinute, timeMonth, timeSecond, timeWeek, timeYear, } from 'd3-time';\nconst dateParsers = [\n    timeParse('%Y-%m-%d'),\n    timeParse('%Y-%m-%d %H:%M'),\n    timeParse('%Y-%m-%d %H:%M:%S'),\n    timeParse('%Y'),\n    timeParse('%Y-%m'),\n];\nexport function parseTime(input) {\n    if (input != null) {\n        if (input instanceof Date) {\n            return input;\n        }\n        for (const parse of dateParsers) {\n            const date = parse(input);\n            if (date) {\n                return date;\n            }\n        }\n    }\n    return undefined;\n}\nexport var TimeGranularityKey;\n(function (TimeGranularityKey) {\n    TimeGranularityKey[\"SECOND\"] = \"SECOND\";\n    TimeGranularityKey[\"MINUTE\"] = \"MINUTE\";\n    TimeGranularityKey[\"HOUR\"] = \"HOUR\";\n    TimeGranularityKey[\"DAY\"] = \"DAY\";\n    TimeGranularityKey[\"MONTH\"] = \"MONTH\";\n    TimeGranularityKey[\"YEAR\"] = \"YEAR\";\n})(TimeGranularityKey || (TimeGranularityKey = {}));\n// const preferredLocale = navigator.languages ? navigator.languages[0] : 'en';\nconst formatMillisecond = timeFormat('.%L'), formatSecond = timeFormat(':%S'), formatMinute = timeFormat('%I:%M'), \n// formatHour = (d: Date) => d.toLocaleString(preferredLocale, { hour: 'numeric' }),\nformatHour = timeFormat('%I %p'), formatDay = timeFormat('%a %d'), formatWeek = timeFormat('%b %d'), formatMonth = timeFormat('%b'), formatYear = timeFormat('%Y');\nexport function tickMultiFormat(date) {\n    return (timeSecond(date) < date\n        ? formatMillisecond\n        : timeMinute(date) < date\n            ? formatSecond\n            : timeHour(date) < date\n                ? formatMinute\n                : timeDay(date) < date\n                    ? formatHour\n                    : timeMonth(date) < date\n                        ? timeWeek(date) < date\n                            ? formatDay\n                            : formatWeek\n                        : timeYear(date) < date\n                            ? formatMonth\n                            : formatYear)(date);\n}\nexport const TIME_GRANULARITIES = [\n    {\n        order: 0,\n        key: TimeGranularityKey.SECOND,\n        interval: timeSecond,\n        format: formatSecond,\n        formatFull: timeFormat('%Y-%m-%d %H:%M:%S'),\n    },\n    {\n        order: 1,\n        key: TimeGranularityKey.MINUTE,\n        interval: timeMinute,\n        format: formatMinute,\n        formatFull: timeFormat('%Y-%m-%d %H:%M'),\n    },\n    {\n        order: 2,\n        key: TimeGranularityKey.HOUR,\n        interval: timeHour,\n        // format: (d: Date) => d.toLocaleString(preferredLocale, { hour: 'numeric', minute: '2-digit' }),\n        format: formatHour,\n        formatFull: timeFormat('%a %d %b %Y, %I %p'),\n    },\n    {\n        order: 3,\n        key: TimeGranularityKey.DAY,\n        interval: timeDay,\n        format: formatDay,\n        formatFull: timeFormat('%a %d %b %Y'),\n    },\n    {\n        order: 4,\n        key: TimeGranularityKey.MONTH,\n        interval: timeMonth,\n        format: formatMonth,\n        formatFull: timeFormat('%b %Y'),\n    },\n    {\n        order: 5,\n        key: TimeGranularityKey.YEAR,\n        interval: timeYear,\n        format: formatYear,\n        formatFull: timeFormat('%Y'),\n    },\n];\nexport function getTimeGranularityByKey(key) {\n    return TIME_GRANULARITIES.find((s) => s.key === key);\n}\nexport function getTimeGranularityByOrder(order) {\n    return TIME_GRANULARITIES.find((s) => s.order === order);\n}\nexport function getTimeGranularityForDate(date) {\n    let prev = undefined;\n    for (const current of TIME_GRANULARITIES) {\n        const { interval } = current;\n        const floored = interval(date);\n        if (floored < date) {\n            if (!prev)\n                return current;\n            return prev;\n        }\n        prev = current;\n    }\n    return TIME_GRANULARITIES[TIME_GRANULARITIES.length - 1];\n}\nexport function areRangesEqual(a, b) {\n    if (!a && !b)\n        return true;\n    if (!a || !b)\n        return false;\n    return a[0] === b[0] && a[1] === b[1];\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy90aW1lLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyxVQUFVLEVBQUUsU0FBUyxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFDckQsT0FBTyxFQUNMLE9BQU8sRUFDUCxRQUFRLEVBRVIsVUFBVSxFQUNWLFNBQVMsRUFDVCxVQUFVLEVBQ1YsUUFBUSxFQUNSLFFBQVEsR0FDVCxNQUFNLFNBQVMsQ0FBQztBQUVqQixNQUFNLFdBQVcsR0FBRztJQUNsQixTQUFTLENBQUMsVUFBVSxDQUFDO0lBQ3JCLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQztJQUMzQixTQUFTLENBQUMsbUJBQW1CLENBQUM7SUFDOUIsU0FBUyxDQUFDLElBQUksQ0FBQztJQUNmLFNBQVMsQ0FBQyxPQUFPLENBQUM7Q0FDbkIsQ0FBQztBQUVGLE1BQU0sVUFBVSxTQUFTLENBQUMsS0FBZ0M7SUFDeEQsSUFBSSxLQUFLLElBQUksSUFBSSxFQUFFO1FBQ2pCLElBQUksS0FBSyxZQUFZLElBQUksRUFBRTtZQUN6QixPQUFPLEtBQUssQ0FBQztTQUNkO1FBQ0QsS0FBSyxNQUFNLEtBQUssSUFBSSxXQUFXLEVBQUU7WUFDL0IsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzFCLElBQUksSUFBSSxFQUFFO2dCQUNSLE9BQU8sSUFBSSxDQUFDO2FBQ2I7U0FDRjtLQUNGO0lBQ0QsT0FBTyxTQUFTLENBQUM7QUFDbkIsQ0FBQztBQUVELE1BQU0sQ0FBTixJQUFZLGtCQU9YO0FBUEQsV0FBWSxrQkFBa0I7SUFDNUIsdUNBQWlCLENBQUE7SUFDakIsdUNBQWlCLENBQUE7SUFDakIsbUNBQWEsQ0FBQTtJQUNiLGlDQUFXLENBQUE7SUFDWCxxQ0FBZSxDQUFBO0lBQ2YsbUNBQWEsQ0FBQTtBQUNmLENBQUMsRUFQVyxrQkFBa0IsS0FBbEIsa0JBQWtCLFFBTzdCO0FBVUQsK0VBQStF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QUMsQ0FBQyxDQUFDO0FBQ3hDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3RpbWVGb3JtYXQsIHRpbWVQYXJzZX0gZnJvbSAnZDMtdGltZS1mb3JtYXQnO1xuaW1wb3J0IHtcbiAgdGltZURheSxcbiAgdGltZUhvdXIsXG4gIFRpbWVJbnRlcnZhbCxcbiAgdGltZU1pbnV0ZSxcbiAgdGltZU1vbnRoLFxuICB0aW1lU2Vjb25kLFxuICB0aW1lV2VlayxcbiAgdGltZVllYXIsXG59IGZyb20gJ2QzLXRpbWUnO1xuXG5jb25zdCBkYXRlUGFyc2VycyA9IFtcbiAgdGltZVBhcnNlKCclWS0lbS0lZCcpLFxuICB0aW1lUGFyc2UoJyVZLSVtLSVkICVIOiVNJyksXG4gIHRpbWVQYXJzZSgnJVktJW0tJWQgJUg6JU06JVMnKSxcbiAgdGltZVBhcnNlKCclWScpLFxuICB0aW1lUGFyc2UoJyVZLSVtJyksXG5dO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VUaW1lKGlucHV0OiBzdHJpbmcgfCBEYXRlIHwgdW5kZWZpbmVkKTogRGF0ZSB8IHVuZGVmaW5lZCB7XG4gIGlmIChpbnB1dCAhPSBudWxsKSB7XG4gICAgaWYgKGlucHV0IGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHBhcnNlIG9mIGRhdGVQYXJzZXJzKSB7XG4gICAgICBjb25zdCBkYXRlID0gcGFyc2UoaW5wdXQpO1xuICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBlbnVtIFRpbWVHcmFudWxhcml0eUtleSB7XG4gIFNFQ09ORCA9ICdTRUNPTkQnLFxuICBNSU5VVEUgPSAnTUlOVVRFJyxcbiAgSE9VUiA9ICdIT1VSJyxcbiAgREFZID0gJ0RBWScsXG4gIE1PTlRIID0gJ01PTlRIJyxcbiAgWUVBUiA9ICdZRUFSJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUaW1lR3JhbnVsYXJpdHkge1xuICBrZXk6IFRpbWVHcmFudWxhcml0eUtleTtcbiAgb3JkZXI6IG51bWJlcjtcbiAgaW50ZXJ2YWw6IFRpbWVJbnRlcnZhbDtcbiAgZm9ybWF0OiAoZGF0ZTogRGF0ZSkgPT4gc3RyaW5nO1xuICBmb3JtYXRGdWxsOiAoZGF0ZTogRGF0ZSkgPT4gc3RyaW5nO1xufVxuXG4vLyBjb25zdCBwcmVmZXJyZWRMb2NhbGUgPSBuYXZpZ2F0b3IubGFuZ3VhZ2VzID8gbmF2aWdhdG9yLmxhbmd1YWdlc1swXSA6ICdlbic7XG5cbmNvbnN0IGZvcm1hdE1pbGxpc2Vjb25kID0gdGltZUZvcm1hdCgnLiVMJyksXG4gIGZvcm1hdFNlY29uZCA9IHRpbWVGb3JtYXQoJzolUycpLFxuICBmb3JtYXRNaW51dGUgPSB0aW1lRm9ybWF0KCclSTolTScpLFxuICAvLyBmb3JtYXRIb3VyID0gKGQ6IERhdGUpID0+IGQudG9Mb2NhbGVTdHJpbmcocHJlZmVycmVkTG9jYWxlLCB7IGhvdXI6ICdudW1lcmljJyB9KSxcbiAgZm9ybWF0SG91ciA9IHRpbWVGb3JtYXQoJyVJICVwJyksXG4gIGZvcm1hdERheSA9IHRpbWVGb3JtYXQoJyVhICVkJyksXG4gIGZvcm1hdFdlZWsgPSB0aW1lRm9ybWF0KCclYiAlZCcpLFxuICBmb3JtYXRNb250aCA9IHRpbWVGb3JtYXQoJyViJyksXG4gIGZvcm1hdFllYXIgPSB0aW1lRm9ybWF0KCclWScpO1xuXG5leHBvcnQgZnVuY3Rpb24gdGlja011bHRpRm9ybWF0KGRhdGU6IERhdGUpIHtcbiAgcmV0dXJuIChcbiAgICB0aW1lU2Vjb25kKGRhdGUpIDwgZGF0ZVxuICAgICAgPyBmb3JtYXRNaWxsaXNlY29uZFxuICAgICAgOiB0aW1lTWludXRlKGRhdGUpIDwgZGF0ZVxuICAgICAgPyBmb3JtYXRTZWNvbmRcbiAgICAgIDogdGltZUhvdXIoZGF0ZSkgPCBkYXRlXG4gICAgICA/IGZvcm1hdE1pbnV0ZVxuICAgICAgOiB0aW1lRGF5KGRhdGUpIDwgZGF0ZVxuICAgICAgPyBmb3JtYXRIb3VyXG4gICAgICA6IHRpbWVNb250aChkYXRlKSA8IGRhdGVcbiAgICAgID8gdGltZVdlZWsoZGF0ZSkgPCBkYXRlXG4gICAgICAgID8gZm9ybWF0RGF5XG4gICAgICAgIDogZm9ybWF0V2Vla1xuICAgICAgOiB0aW1lWWVhcihkYXRlKSA8IGRhdGVcbiAgICAgID8gZm9ybWF0TW9udGhcbiAgICAgIDogZm9ybWF0WWVhclxuICApKGRhdGUpO1xufVxuXG5leHBvcnQgY29uc3QgVElNRV9HUkFOVUxBUklUSUVTOiBUaW1lR3JhbnVsYXJpdHlbXSA9IFtcbiAge1xuICAgIG9yZGVyOiAwLFxuICAgIGtleTogVGltZUdyYW51bGFyaXR5S2V5LlNFQ09ORCxcbiAgICBpbnRlcnZhbDogdGltZVNlY29uZCxcbiAgICBmb3JtYXQ6IGZvcm1hdFNlY29uZCxcbiAgICBmb3JtYXRGdWxsOiB0aW1lRm9ybWF0KCclWS0lbS0lZCAlSDolTTolUycpLFxuICB9LFxuICB7XG4gICAgb3JkZXI6IDEsXG4gICAga2V5OiBUaW1lR3JhbnVsYXJpdHlLZXkuTUlOVVRFLFxuICAgIGludGVydmFsOiB0aW1lTWludXRlLFxuICAgIGZvcm1hdDogZm9ybWF0TWludXRlLFxuICAgIGZvcm1hdEZ1bGw6IHRpbWVGb3JtYXQoJyVZLSVtLSVkICVIOiVNJyksXG4gIH0sXG4gIHtcbiAgICBvcmRlcjogMixcbiAgICBrZXk6IFRpbWVHcmFudWxhcml0eUtleS5IT1VSLFxuICAgIGludGVydmFsOiB0aW1lSG91cixcbiAgICAvLyBmb3JtYXQ6IChkOiBEYXRlKSA9PiBkLnRvTG9jYWxlU3RyaW5nKHByZWZlcnJlZExvY2FsZSwgeyBob3VyOiAnbnVtZXJpYycsIG1pbnV0ZTogJzItZGlnaXQnIH0pLFxuICAgIGZvcm1hdDogZm9ybWF0SG91cixcbiAgICBmb3JtYXRGdWxsOiB0aW1lRm9ybWF0KCclYSAlZCAlYiAlWSwgJUkgJXAnKSxcbiAgfSxcbiAge1xuICAgIG9yZGVyOiAzLFxuICAgIGtleTogVGltZUdyYW51bGFyaXR5S2V5LkRBWSxcbiAgICBpbnRlcnZhbDogdGltZURheSxcbiAgICBmb3JtYXQ6IGZvcm1hdERheSxcbiAgICBmb3JtYXRGdWxsOiB0aW1lRm9ybWF0KCclYSAlZCAlYiAlWScpLFxuICB9LFxuICB7XG4gICAgb3JkZXI6IDQsXG4gICAga2V5OiBUaW1lR3JhbnVsYXJpdHlLZXkuTU9OVEgsXG4gICAgaW50ZXJ2YWw6IHRpbWVNb250aCxcbiAgICBmb3JtYXQ6IGZvcm1hdE1vbnRoLFxuICAgIGZvcm1hdEZ1bGw6IHRpbWVGb3JtYXQoJyViICVZJyksXG4gIH0sXG4gIHtcbiAgICBvcmRlcjogNSxcbiAgICBrZXk6IFRpbWVHcmFudWxhcml0eUtleS5ZRUFSLFxuICAgIGludGVydmFsOiB0aW1lWWVhcixcbiAgICBmb3JtYXQ6IGZvcm1hdFllYXIsXG4gICAgZm9ybWF0RnVsbDogdGltZUZvcm1hdCgnJVknKSxcbiAgfSxcbl07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaW1lR3JhbnVsYXJpdHlCeUtleShrZXk6IFRpbWVHcmFudWxhcml0eUtleSkge1xuICByZXR1cm4gVElNRV9HUkFOVUxBUklUSUVTLmZpbmQoKHMpID0+IHMua2V5ID09PSBrZXkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGltZUdyYW51bGFyaXR5QnlPcmRlcihvcmRlcjogbnVtYmVyKSB7XG4gIHJldHVybiBUSU1FX0dSQU5VTEFSSVRJRVMuZmluZCgocykgPT4gcy5vcmRlciA9PT0gb3JkZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGltZUdyYW51bGFyaXR5Rm9yRGF0ZShkYXRlOiBEYXRlKTogVGltZUdyYW51bGFyaXR5IHtcbiAgbGV0IHByZXYgPSB1bmRlZmluZWQ7XG4gIGZvciAoY29uc3QgY3VycmVudCBvZiBUSU1FX0dSQU5VTEFSSVRJRVMpIHtcbiAgICBjb25zdCB7aW50ZXJ2YWx9ID0gY3VycmVudDtcbiAgICBjb25zdCBmbG9vcmVkID0gaW50ZXJ2YWwoZGF0ZSk7XG4gICAgaWYgKGZsb29yZWQgPCBkYXRlKSB7XG4gICAgICBpZiAoIXByZXYpIHJldHVybiBjdXJyZW50O1xuICAgICAgcmV0dXJuIHByZXY7XG4gICAgfVxuICAgIHByZXYgPSBjdXJyZW50O1xuICB9XG4gIHJldHVybiBUSU1FX0dSQU5VTEFSSVRJRVNbVElNRV9HUkFOVUxBUklUSUVTLmxlbmd0aCAtIDFdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXJlUmFuZ2VzRXF1YWwoXG4gIGE6IFtEYXRlLCBEYXRlXSB8IHVuZGVmaW5lZCxcbiAgYjogW0RhdGUsIERhdGVdIHwgdW5kZWZpbmVkLFxuKTogYm9vbGVhbiB7XG4gIGlmICghYSAmJiAhYikgcmV0dXJuIHRydWU7XG4gIGlmICghYSB8fCAhYikgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gYVswXSA9PT0gYlswXSAmJiBhWzFdID09PSBiWzFdO1xufVxuIl19","/*\n * Copyright 2022 FlowmapBlue\n * Copyright 2018-2020 Teralytics, modified by FlowmapBlue\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nimport { ascending, descending, extent, min, rollup } from 'd3-array';\nimport { scaleSqrt } from 'd3-scale';\nimport KDBush from 'kdbush';\nimport { createSelector, createSelectorCreator, defaultMemoize, } from 'reselect';\nimport { alea } from 'seedrandom';\nimport { clusterLocations } from './cluster/cluster';\nimport { buildIndex, findAppropriateZoomLevel, makeLocationWeightGetter, } from './cluster/ClusterIndex';\nimport getColors, { getColorsRGBA, getDiffColorsRGBA, getFlowColorScale, isDiffColors, isDiffColorsRGBA, } from './colors';\nimport FlowmapAggregateAccessors from './FlowmapAggregateAccessors';\nimport { addClusterNames, getFlowThicknessScale, getViewportBoundingBox, } from './selector-functions';\nimport { getTimeGranularityByKey, getTimeGranularityByOrder, getTimeGranularityForDate, } from './time';\nimport { isLocationClusterNode, LocationFilterMode, } from './types';\nconst MAX_CLUSTER_ZOOM_LEVEL = 20;\nexport default class FlowmapSelectors {\n    constructor(accessors) {\n        this.getFlowsFromProps = (state, props) => props.flows;\n        this.getLocationsFromProps = (state, props) => props.locations;\n        this.getClusterLevelsFromProps = (state, props) => {\n            return props.clusterLevels;\n        };\n        this.getMaxTopFlowsDisplayNum = (state, props) => state.settings.maxTopFlowsDisplayNum;\n        this.getSelectedLocations = (state, props) => { var _a; return (_a = state.filter) === null || _a === void 0 ? void 0 : _a.selectedLocations; };\n        this.getLocationFilterMode = (state, props) => { var _a; return (_a = state.filter) === null || _a === void 0 ? void 0 : _a.locationFilterMode; };\n        this.getClusteringEnabled = (state, props) => state.settings.clusteringEnabled;\n        this.getLocationTotalsEnabled = (state, props) => state.settings.locationTotalsEnabled;\n        this.getLocationLabelsEnabled = (state, props) => state.settings.locationLabelsEnabled;\n        this.getZoom = (state, props) => state.viewport.zoom;\n        this.getViewport = (state, props) => state.viewport;\n        this.getSelectedTimeRange = (state, props) => { var _a; return (_a = state.filter) === null || _a === void 0 ? void 0 : _a.selectedTimeRange; };\n        this.getColorScheme = (state, props) => state.settings.colorScheme;\n        this.getDarkMode = (state, props) => state.settings.darkMode;\n        this.getFadeEnabled = (state, props) => state.settings.fadeEnabled;\n        this.getFadeOpacityEnabled = (state, props) => state.settings.fadeOpacityEnabled;\n        this.getFadeAmount = (state, props) => state.settings.fadeAmount;\n        this.getAnimate = (state, props) => state.settings.animationEnabled;\n        this.getInvalidLocationIds = createSelector(this.getLocationsFromProps, (locations) => {\n            if (!locations)\n                return undefined;\n            const invalid = [];\n            for (const location of locations) {\n                const id = this.accessors.getLocationId(location);\n                const lon = this.accessors.getLocationLon(location);\n                const lat = this.accessors.getLocationLat(location);\n                if (!(-90 <= lat && lat <= 90) || !(-180 <= lon && lon <= 180)) {\n                    invalid.push(id);\n                }\n            }\n            return invalid.length > 0 ? invalid : undefined;\n        });\n        this.getLocations = createSelector(this.getLocationsFromProps, this.getInvalidLocationIds, (locations, invalidIds) => {\n            if (!locations)\n                return undefined;\n            if (!invalidIds || invalidIds.length === 0)\n                return locations;\n            const invalid = new Set(invalidIds);\n            const filtered = [];\n            for (const location of locations) {\n                const id = this.accessors.getLocationId(location);\n                if (!invalid.has(id)) {\n                    filtered.push(location);\n                }\n            }\n            return filtered;\n        });\n        this.getLocationIds = createSelector(this.getLocations, (locations) => {\n            if (!locations)\n                return undefined;\n            const ids = new Set();\n            for (const id of locations) {\n                ids.add(this.accessors.getLocationId(id));\n            }\n            return ids;\n        });\n        this.getSelectedLocationsSet = createSelector(this.getSelectedLocations, (ids) => ids && ids.length > 0 ? new Set(ids) : undefined);\n        this.getSortedFlowsForKnownLocations = createSelector(this.getFlowsFromProps, this.getLocationIds, (flows, ids) => {\n            if (!ids || !flows)\n                return undefined;\n            const filtered = [];\n            for (const flow of flows) {\n                const srcId = this.accessors.getFlowOriginId(flow);\n                const dstId = this.accessors.getFlowDestId(flow);\n                if (ids.has(srcId) && ids.has(dstId)) {\n                    filtered.push(flow);\n                }\n            }\n            return filtered.sort((a, b) => descending(Math.abs(this.accessors.getFlowMagnitude(a)), Math.abs(this.accessors.getFlowMagnitude(b))));\n        });\n        this.getActualTimeExtent = createSelector(this.getSortedFlowsForKnownLocations, (flows) => {\n            if (!flows)\n                return undefined;\n            let start = null;\n            let end = null;\n            for (const flow of flows) {\n                const time = this.accessors.getFlowTime(flow);\n                if (time) {\n                    if (start == null || start > time)\n                        start = time;\n                    if (end == null || end < time)\n                        end = time;\n                }\n            }\n            if (!start || !end)\n                return undefined;\n            return [start, end];\n        });\n        this.getTimeGranularityKey = createSelector(this.getSortedFlowsForKnownLocations, this.getActualTimeExtent, (flows, timeExtent) => {\n            if (!flows || !timeExtent)\n                return undefined;\n            const minOrder = min(flows, (d) => {\n                const t = this.accessors.getFlowTime(d);\n                return t ? getTimeGranularityForDate(t).order : null;\n            });\n            if (minOrder == null)\n                return undefined;\n            const timeGranularity = getTimeGranularityByOrder(minOrder);\n            return timeGranularity ? timeGranularity.key : undefined;\n        });\n        this.getTimeExtent = createSelector(this.getActualTimeExtent, this.getTimeGranularityKey, (timeExtent, timeGranularityKey) => {\n            const timeGranularity = timeGranularityKey\n                ? getTimeGranularityByKey(timeGranularityKey)\n                : undefined;\n            if (!timeExtent || !(timeGranularity === null || timeGranularity === void 0 ? void 0 : timeGranularity.interval))\n                return undefined;\n            const { interval } = timeGranularity;\n            return [timeExtent[0], interval.offset(interval.floor(timeExtent[1]), 1)];\n        });\n        this.getSortedFlowsForKnownLocationsFilteredByTime = createSelector(this.getSortedFlowsForKnownLocations, this.getTimeExtent, this.getSelectedTimeRange, (flows, timeExtent, timeRange) => {\n            if (!flows)\n                return undefined;\n            if (!timeExtent ||\n                !timeRange ||\n                (timeExtent[0] === timeRange[0] && timeExtent[1] === timeRange[1])) {\n                return flows;\n            }\n            return flows.filter((flow) => {\n                const time = this.accessors.getFlowTime(flow);\n                return time && timeRange[0] <= time && time < timeRange[1];\n            });\n        });\n        this.getLocationsHavingFlows = createSelector(this.getSortedFlowsForKnownLocations, this.getLocations, (flows, locations) => {\n            if (!locations || !flows)\n                return locations;\n            const withFlows = new Set();\n            for (const flow of flows) {\n                withFlows.add(this.accessors.getFlowOriginId(flow));\n                withFlows.add(this.accessors.getFlowDestId(flow));\n            }\n            const filtered = [];\n            for (const location of locations) {\n                if (withFlows.has(this.accessors.getLocationId(location))) {\n                    filtered.push(location);\n                }\n            }\n            return filtered;\n        });\n        this.getLocationsById = createSelector(this.getLocationsHavingFlows, (locations) => {\n            if (!locations)\n                return undefined;\n            const locationsById = new Map();\n            for (const location of locations) {\n                locationsById.set(this.accessors.getLocationId(location), location);\n            }\n            return locationsById;\n        });\n        this.getLocationWeightGetter = createSelector(this.getSortedFlowsForKnownLocations, (flows) => {\n            if (!flows)\n                return undefined;\n            const getLocationWeight = makeLocationWeightGetter(flows, this.accessors.getFlowmapDataAccessors());\n            return getLocationWeight;\n        });\n        this.getClusterLevels = createSelector(this.getClusterLevelsFromProps, this.getLocationsHavingFlows, this.getLocationWeightGetter, (clusterLevelsFromProps, locations, getLocationWeight) => {\n            if (clusterLevelsFromProps)\n                return clusterLevelsFromProps;\n            if (!locations || !getLocationWeight)\n                return undefined;\n            const clusterLevels = clusterLocations(locations, this.accessors.getFlowmapDataAccessors(), getLocationWeight, {\n                maxZoom: MAX_CLUSTER_ZOOM_LEVEL,\n            });\n            return clusterLevels;\n        });\n        this.getClusterIndex = createSelector(this.getLocationsById, this.getLocationWeightGetter, this.getClusterLevels, (locationsById, getLocationWeight, clusterLevels) => {\n            if (!locationsById || !getLocationWeight || !clusterLevels)\n                return undefined;\n            const clusterIndex = buildIndex(clusterLevels);\n            // Adding meaningful names\n            addClusterNames(clusterIndex, clusterLevels, locationsById, this.accessors.getFlowmapDataAccessors(), getLocationWeight);\n            return clusterIndex;\n        });\n        this.getAvailableClusterZoomLevels = createSelector(this.getClusterIndex, this.getSelectedLocations, (clusterIndex, selectedLocations) => {\n            if (!clusterIndex) {\n                return undefined;\n            }\n            let maxZoom = Number.POSITIVE_INFINITY;\n            let minZoom = Number.NEGATIVE_INFINITY;\n            const adjust = (zoneId) => {\n                const cluster = clusterIndex.getClusterById(zoneId);\n                if (cluster) {\n                    minZoom = Math.max(minZoom, cluster.zoom);\n                    maxZoom = Math.min(maxZoom, cluster.zoom);\n                }\n                else {\n                    const zoom = clusterIndex.getMinZoomForLocation(zoneId);\n                    minZoom = Math.max(minZoom, zoom);\n                }\n            };\n            if (selectedLocations) {\n                for (const id of selectedLocations) {\n                    adjust(id);\n                }\n            }\n            return clusterIndex.availableZoomLevels.filter((level) => minZoom <= level && level <= maxZoom);\n        });\n        this._getClusterZoom = createSelector(this.getClusterIndex, this.getZoom, this.getAvailableClusterZoomLevels, (clusterIndex, mapZoom, availableClusterZoomLevels) => {\n            if (!clusterIndex)\n                return undefined;\n            if (!availableClusterZoomLevels || mapZoom == null) {\n                return undefined;\n            }\n            const clusterZoom = findAppropriateZoomLevel(availableClusterZoomLevels, mapZoom);\n            return clusterZoom;\n        });\n        this.getClusterZoom = (state, props) => {\n            const { settings } = state;\n            if (!settings.clusteringEnabled)\n                return undefined;\n            if (settings.clusteringAuto || settings.clusteringLevel == null) {\n                return this._getClusterZoom(state, props);\n            }\n            return settings.clusteringLevel;\n        };\n        this.getLocationsForSearchBox = createSelector(this.getClusteringEnabled, this.getLocationsHavingFlows, this.getSelectedLocations, this.getClusterZoom, this.getClusterIndex, (clusteringEnabled, locations, selectedLocations, clusterZoom, clusterIndex) => {\n            if (!locations)\n                return undefined;\n            let result = Array.from(locations);\n            // if (clusteringEnabled) {\n            //   if (clusterIndex) {\n            //     const zoomItems = clusterIndex.getClusterNodesFor(clusterZoom);\n            //     if (zoomItems) {\n            //       result = result.concat(zoomItems.filter(isCluster));\n            //     }\n            //   }\n            // }\n            if (clusterIndex && selectedLocations) {\n                const toAppend = [];\n                for (const id of selectedLocations) {\n                    const cluster = clusterIndex.getClusterById(id);\n                    if (cluster &&\n                        !result.find((d) => (isLocationClusterNode(d)\n                            ? d.id\n                            : this.accessors.getLocationId(d)) === id)) {\n                        toAppend.push(cluster);\n                    }\n                }\n                if (toAppend.length > 0) {\n                    result = result.concat(toAppend);\n                }\n            }\n            return result;\n        });\n        this.getDiffMode = createSelector(this.getFlowsFromProps, (flows) => {\n            if (flows) {\n                for (const f of flows) {\n                    if (this.accessors.getFlowMagnitude(f) < 0) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        });\n        this._getFlowmapColors = createSelector(this.getDiffMode, this.getColorScheme, this.getDarkMode, this.getFadeEnabled, this.getFadeOpacityEnabled, this.getFadeAmount, this.getAnimate, getColors);\n        this.getFlowmapColorsRGBA = createSelector(this._getFlowmapColors, (flowmapColors) => {\n            return isDiffColors(flowmapColors)\n                ? getDiffColorsRGBA(flowmapColors)\n                : getColorsRGBA(flowmapColors);\n        });\n        this.getUnknownLocations = createSelector(this.getLocationIds, this.getFlowsFromProps, this.getSortedFlowsForKnownLocations, (ids, flows, flowsForKnownLocations) => {\n            if (!ids || !flows)\n                return undefined;\n            if (flowsForKnownLocations\n            // && flows.length === flowsForKnownLocations.length\n            )\n                return undefined;\n            const missing = new Set();\n            for (const flow of flows) {\n                if (!ids.has(this.accessors.getFlowOriginId(flow)))\n                    missing.add(this.accessors.getFlowOriginId(flow));\n                if (!ids.has(this.accessors.getFlowDestId(flow)))\n                    missing.add(this.accessors.getFlowDestId(flow));\n            }\n            return missing;\n        });\n        this.getSortedAggregatedFilteredFlows = createSelector(this.getClusterIndex, this.getClusteringEnabled, this.getSortedFlowsForKnownLocationsFilteredByTime, this.getClusterZoom, this.getTimeExtent, (clusterTree, isClusteringEnabled, flows, clusterZoom, timeExtent) => {\n            if (!flows)\n                return undefined;\n            let aggregated;\n            if (isClusteringEnabled && clusterTree && clusterZoom != null) {\n                aggregated = clusterTree.aggregateFlows(\n                // TODO: aggregate across time\n                // timeExtent != null\n                //   ? aggregateFlows(flows) // clusterTree.aggregateFlows won't aggregate unclustered across time\n                //   : flows,\n                flows, clusterZoom, this.accessors.getFlowmapDataAccessors());\n            }\n            else {\n                aggregated = aggregateFlows(flows, this.accessors.getFlowmapDataAccessors());\n            }\n            aggregated.sort((a, b) => descending(Math.abs(this.accessors.getFlowMagnitude(a)), Math.abs(this.accessors.getFlowMagnitude(b))));\n            return aggregated;\n        });\n        this.getExpandedSelectedLocationsSet = createSelector(this.getClusteringEnabled, this.getSelectedLocationsSet, this.getClusterIndex, (clusteringEnabled, selectedLocations, clusterIndex) => {\n            if (!selectedLocations || !clusterIndex) {\n                return selectedLocations;\n            }\n            const result = new Set();\n            for (const locationId of selectedLocations) {\n                const cluster = clusterIndex.getClusterById(locationId);\n                if (cluster) {\n                    const expanded = clusterIndex.expandCluster(cluster);\n                    for (const id of expanded) {\n                        result.add(id);\n                    }\n                }\n                else {\n                    result.add(locationId);\n                }\n            }\n            return result;\n        });\n        this.getTotalCountsByTime = createSelector(this.getSortedFlowsForKnownLocations, this.getTimeGranularityKey, this.getTimeExtent, this.getExpandedSelectedLocationsSet, this.getLocationFilterMode, (flows, timeGranularityKey, timeExtent, selectedLocationSet, locationFilterMode) => {\n            const timeGranularity = timeGranularityKey\n                ? getTimeGranularityByKey(timeGranularityKey)\n                : undefined;\n            if (!flows || !timeGranularity || !timeExtent)\n                return undefined;\n            const byTime = flows.reduce((m, flow) => {\n                var _a;\n                if (this.isFlowInSelection(flow, selectedLocationSet, locationFilterMode)) {\n                    const key = timeGranularity\n                        .interval(this.accessors.getFlowTime(flow))\n                        .getTime();\n                    m.set(key, ((_a = m.get(key)) !== null && _a !== void 0 ? _a : 0) + this.accessors.getFlowMagnitude(flow));\n                }\n                return m;\n            }, new Map());\n            return Array.from(byTime.entries()).map(([millis, count]) => ({\n                time: new Date(millis),\n                count,\n            }));\n        });\n        this.getMaxLocationCircleSize = createSelector(this.getLocationTotalsEnabled, (locationTotalsEnabled) => (locationTotalsEnabled ? 17 : 1));\n        this.getViewportBoundingBox = createSelector(this.getViewport, this.getMaxLocationCircleSize, getViewportBoundingBox);\n        this.getLocationsForZoom = createSelector(this.getClusteringEnabled, this.getLocationsHavingFlows, this.getClusterIndex, this.getClusterZoom, (clusteringEnabled, locationsHavingFlows, clusterIndex, clusterZoom) => {\n            if (clusteringEnabled && clusterIndex) {\n                return clusterIndex.getClusterNodesFor(clusterZoom);\n            }\n            else {\n                return locationsHavingFlows;\n            }\n        });\n        this.getLocationTotals = createSelector(this.getLocationsForZoom, this.getSortedAggregatedFilteredFlows, this.getSelectedLocationsSet, this.getLocationFilterMode, (locations, flows, selectedLocationsSet, locationFilterMode) => {\n            if (!flows)\n                return undefined;\n            const totals = new Map();\n            const add = (id, d) => {\n                var _a;\n                const rv = (_a = totals.get(id)) !== null && _a !== void 0 ? _a : {\n                    incomingCount: 0,\n                    outgoingCount: 0,\n                    internalCount: 0,\n                };\n                if (d.incomingCount != null)\n                    rv.incomingCount += d.incomingCount;\n                if (d.outgoingCount != null)\n                    rv.outgoingCount += d.outgoingCount;\n                if (d.internalCount != null)\n                    rv.internalCount += d.internalCount;\n                return rv;\n            };\n            for (const f of flows) {\n                if (this.isFlowInSelection(f, selectedLocationsSet, locationFilterMode)) {\n                    const originId = this.accessors.getFlowOriginId(f);\n                    const destId = this.accessors.getFlowDestId(f);\n                    const count = this.accessors.getFlowMagnitude(f);\n                    if (originId === destId) {\n                        totals.set(originId, add(originId, { internalCount: count }));\n                    }\n                    else {\n                        totals.set(originId, add(originId, { outgoingCount: count }));\n                        totals.set(destId, add(destId, { incomingCount: count }));\n                    }\n                }\n            }\n            return totals;\n        });\n        this.getLocationsTree = createSelector(this.getLocationsForZoom, (locations) => {\n            if (!locations) {\n                return undefined;\n            }\n            return new KDBush(\n            // @ts-ignore\n            locations, (location) => lngX(this.accessors.getLocationLon(location)), (location) => latY(this.accessors.getLocationLat(location)));\n        });\n        this._getLocationIdsInViewport = createSelector(this.getLocationsTree, this.getViewportBoundingBox, (tree, bbox) => {\n            const ids = this._getLocationsInBboxIndices(tree, bbox);\n            if (ids) {\n                return new Set(ids.map((idx) => tree.points[idx].id));\n            }\n            return undefined;\n        });\n        this.getLocationIdsInViewport = createSelectorCreator(defaultMemoize, \n        // @ts-ignore\n        (s1, s2, index) => {\n            if (s1 === s2)\n                return true;\n            if (s1 == null || s2 == null)\n                return false;\n            if (s1.size !== s2.size)\n                return false;\n            for (const item of s1)\n                if (!s2.has(item))\n                    return false;\n            return true;\n        })(this._getLocationIdsInViewport, (locationIds) => {\n            if (!locationIds)\n                return undefined;\n            return locationIds;\n        });\n        this.getTotalUnfilteredCount = createSelector(this.getSortedFlowsForKnownLocations, (flows) => {\n            if (!flows)\n                return undefined;\n            return flows.reduce((m, flow) => m + this.accessors.getFlowMagnitude(flow), 0);\n        });\n        this.getTotalFilteredCount = createSelector(this.getSortedAggregatedFilteredFlows, this.getSelectedLocationsSet, this.getLocationFilterMode, (flows, selectedLocationSet, locationFilterMode) => {\n            if (!flows)\n                return undefined;\n            const count = flows.reduce((m, flow) => {\n                if (this.isFlowInSelection(flow, selectedLocationSet, locationFilterMode)) {\n                    return m + this.accessors.getFlowMagnitude(flow);\n                }\n                return m;\n            }, 0);\n            return count;\n        });\n        this._getLocationTotalsExtent = createSelector(this.getLocationTotals, (locationTotals) => calcLocationTotalsExtent(locationTotals, undefined));\n        this._getLocationTotalsForViewportExtent = createSelector(this.getLocationTotals, this.getLocationIdsInViewport, (locationTotals, locationsInViewport) => calcLocationTotalsExtent(locationTotals, locationsInViewport));\n        this.getLocationTotalsExtent = (state, props) => {\n            if (state.settings.adaptiveScalesEnabled) {\n                return this._getLocationTotalsForViewportExtent(state, props);\n            }\n            else {\n                return this._getLocationTotalsExtent(state, props);\n            }\n        };\n        this.getFlowsForFlowmapLayer = createSelector(this.getSortedAggregatedFilteredFlows, this.getLocationIdsInViewport, this.getSelectedLocationsSet, this.getLocationFilterMode, this.getMaxTopFlowsDisplayNum, (flows, locationIdsInViewport, selectedLocationsSet, locationFilterMode, maxTopFlowsDisplayNum) => {\n            if (!flows || !locationIdsInViewport)\n                return undefined;\n            const picked = [];\n            let pickedCount = 0;\n            for (const flow of flows) {\n                const origin = this.accessors.getFlowOriginId(flow);\n                const dest = this.accessors.getFlowDestId(flow);\n                if (locationIdsInViewport.has(origin) ||\n                    locationIdsInViewport.has(dest)) {\n                    if (this.isFlowInSelection(flow, selectedLocationsSet, locationFilterMode)) {\n                        if (origin !== dest) {\n                            // exclude self-loops\n                            picked.push(flow);\n                            pickedCount++;\n                        }\n                    }\n                }\n                // Only keep top\n                if (pickedCount > maxTopFlowsDisplayNum)\n                    break;\n            }\n            // assuming they are sorted in descending order,\n            // we need ascending for rendering\n            return picked.reverse();\n        });\n        this._getFlowMagnitudeExtent = createSelector(this.getSortedAggregatedFilteredFlows, this.getSelectedLocationsSet, this.getLocationFilterMode, (flows, selectedLocationsSet, locationFilterMode) => {\n            if (!flows)\n                return undefined;\n            let rv = undefined;\n            for (const f of flows) {\n                if (this.accessors.getFlowOriginId(f) !==\n                    this.accessors.getFlowDestId(f) &&\n                    this.isFlowInSelection(f, selectedLocationsSet, locationFilterMode)) {\n                    const count = this.accessors.getFlowMagnitude(f);\n                    if (rv == null) {\n                        rv = [count, count];\n                    }\n                    else {\n                        if (count < rv[0])\n                            rv[0] = count;\n                        if (count > rv[1])\n                            rv[1] = count;\n                    }\n                }\n            }\n            return rv;\n        });\n        this._getAdaptiveFlowMagnitudeExtent = createSelector(this.getFlowsForFlowmapLayer, (flows) => {\n            if (!flows)\n                return undefined;\n            const rv = extent(flows, this.accessors.getFlowMagnitude);\n            return rv[0] !== undefined && rv[1] !== undefined ? rv : undefined;\n        });\n        this.getFlowMagnitudeExtent = (state, props) => {\n            if (state.settings.adaptiveScalesEnabled) {\n                return this._getAdaptiveFlowMagnitudeExtent(state, props);\n            }\n            else {\n                return this._getFlowMagnitudeExtent(state, props);\n            }\n        };\n        this.getLocationMaxAbsTotalGetter = createSelector(this.getLocationTotals, (locationTotals) => {\n            return (locationId) => {\n                const total = locationTotals === null || locationTotals === void 0 ? void 0 : locationTotals.get(locationId);\n                if (!total)\n                    return undefined;\n                return Math.max(Math.abs(total.incomingCount + total.internalCount), Math.abs(total.outgoingCount + total.internalCount));\n            };\n        });\n        this.getFlowThicknessScale = createSelector(this.getFlowMagnitudeExtent, getFlowThicknessScale);\n        this.getCircleSizeScale = createSelector(this.getMaxLocationCircleSize, this.getLocationTotalsEnabled, this.getLocationTotalsExtent, (maxLocationCircleSize, locationTotalsEnabled, locationTotalsExtent) => {\n            if (!locationTotalsEnabled) {\n                return () => maxLocationCircleSize;\n            }\n            if (!locationTotalsExtent)\n                return undefined;\n            return scaleSqrt()\n                .range([0, maxLocationCircleSize])\n                .domain([\n                0,\n                // should support diff mode too\n                Math.max.apply(null, locationTotalsExtent.map((x) => Math.abs(x || 0))),\n            ]);\n        });\n        this.getInCircleSizeGetter = createSelector(this.getCircleSizeScale, this.getLocationTotals, (circleSizeScale, locationTotals) => {\n            return (locationId) => {\n                const total = locationTotals === null || locationTotals === void 0 ? void 0 : locationTotals.get(locationId);\n                if (total && circleSizeScale) {\n                    return (circleSizeScale(Math.abs(total.incomingCount + total.internalCount)) || 0);\n                }\n                return 0;\n            };\n        });\n        this.getOutCircleSizeGetter = createSelector(this.getCircleSizeScale, this.getLocationTotals, (circleSizeScale, locationTotals) => {\n            return (locationId) => {\n                const total = locationTotals === null || locationTotals === void 0 ? void 0 : locationTotals.get(locationId);\n                if (total && circleSizeScale) {\n                    return (circleSizeScale(Math.abs(total.outgoingCount + total.internalCount)) || 0);\n                }\n                return 0;\n            };\n        });\n        this.getSortedLocationsForZoom = createSelector(this.getLocationsForZoom, this.getInCircleSizeGetter, this.getOutCircleSizeGetter, (locations, getInCircleSize, getOutCircleSize) => {\n            if (!locations)\n                return undefined;\n            const nextLocations = [...locations];\n            return nextLocations.sort((a, b) => {\n                const idA = this.accessors.getLocationId(a);\n                const idB = this.accessors.getLocationId(b);\n                return ascending(Math.max(getInCircleSize(idA), getOutCircleSize(idA)), Math.max(getInCircleSize(idB), getOutCircleSize(idB)));\n            });\n        });\n        this.getLocationsForFlowmapLayer = createSelector(this.getSortedLocationsForZoom, \n        // this.getLocationIdsInViewport,\n        (locations) => {\n            // if (!locations) return undefined;\n            // if (!locationIdsInViewport) return locations;\n            // if (locationIdsInViewport.size === locations.length) return locations;\n            // const filtered = [];\n            // for (const loc of locations) {\n            //   if (locationIdsInViewport.has(loc.id)) {\n            //     filtered.push(loc);\n            //   }\n            // }\n            // return filtered;\n            // @ts-ignore\n            // return locations.filter(\n            //   (loc: L | ClusterNode) => locationIdsInViewport!.has(loc.id)\n            // );\n            // TODO: return location in viewport + \"connected\" ones\n            return locations;\n        });\n        this.getLocationsForFlowmapLayerById = createSelector(this.getLocationsForFlowmapLayer, (locations) => {\n            if (!locations)\n                return undefined;\n            return locations.reduce((m, d) => (m.set(this.accessors.getLocationId(d), d), m), new Map());\n        });\n        this.getLocationOrClusterByIdGetter = createSelector(this.getClusterIndex, this.getLocationsById, (clusterIndex, locationsById) => {\n            return (id) => { var _a; return (_a = clusterIndex === null || clusterIndex === void 0 ? void 0 : clusterIndex.getClusterById(id)) !== null && _a !== void 0 ? _a : locationsById === null || locationsById === void 0 ? void 0 : locationsById.get(id); };\n        });\n        this.getLayersData = createSelector(this.getLocationsForFlowmapLayer, this.getFlowsForFlowmapLayer, this.getFlowmapColorsRGBA, this.getLocationsForFlowmapLayerById, this.getLocationIdsInViewport, this.getInCircleSizeGetter, this.getOutCircleSizeGetter, this.getFlowThicknessScale, this.getAnimate, this.getLocationLabelsEnabled, (locations, flows, flowmapColors, locationsById, locationIdsInViewport, getInCircleSize, getOutCircleSize, flowThicknessScale, animationEnabled, locationLabelsEnabled) => {\n            return this._prepareLayersData(locations, flows, flowmapColors, locationsById, locationIdsInViewport, getInCircleSize, getOutCircleSize, flowThicknessScale, animationEnabled, locationLabelsEnabled);\n        });\n        this.accessors = new FlowmapAggregateAccessors(accessors);\n        this.setAccessors(accessors);\n    }\n    setAccessors(accessors) {\n        this.accessors = new FlowmapAggregateAccessors(accessors);\n    }\n    getAggregateAccessors() {\n        return this.accessors;\n    }\n    prepareLayersData(state, props) {\n        const locations = this.getLocationsForFlowmapLayer(state, props) || [];\n        const flows = this.getFlowsForFlowmapLayer(state, props) || [];\n        const flowmapColors = this.getFlowmapColorsRGBA(state, props);\n        const locationsById = this.getLocationsForFlowmapLayerById(state, props);\n        const locationIdsInViewport = this.getLocationIdsInViewport(state, props);\n        const getInCircleSize = this.getInCircleSizeGetter(state, props);\n        const getOutCircleSize = this.getOutCircleSizeGetter(state, props);\n        const flowThicknessScale = this.getFlowThicknessScale(state, props);\n        const locationLabelsEnabled = this.getLocationLabelsEnabled(state, props);\n        return this._prepareLayersData(locations, flows, flowmapColors, locationsById, locationIdsInViewport, getInCircleSize, getOutCircleSize, flowThicknessScale, state.settings.animationEnabled, locationLabelsEnabled);\n    }\n    _prepareLayersData(locations, flows, flowmapColors, locationsById, locationIdsInViewport, getInCircleSize, getOutCircleSize, flowThicknessScale, animationEnabled, locationLabelsEnabled) {\n        if (!locations)\n            locations = [];\n        if (!flows)\n            flows = [];\n        const { getFlowOriginId, getFlowDestId, getFlowMagnitude, getLocationId, getLocationLon, getLocationLat, getLocationName, } = this.accessors;\n        const flowMagnitudeExtent = extent(flows, (f) => getFlowMagnitude(f));\n        const flowColorScale = getFlowColorScale(flowmapColors, flowMagnitudeExtent, false);\n        // Using a generator here helps to avoid creating intermediary arrays\n        const circlePositions = Float32Array.from((function* () {\n            for (const location of locations) {\n                yield getLocationLon(location);\n                yield getLocationLat(location);\n            }\n        })());\n        // TODO: diff mode\n        const circleColor = isDiffColorsRGBA(flowmapColors)\n            ? flowmapColors.positive.locationCircles.inner\n            : flowmapColors.locationCircles.inner;\n        const circleColors = Uint8Array.from((function* () {\n            for (const location of locations) {\n                yield* circleColor;\n            }\n        })());\n        const inCircleRadii = Float32Array.from((function* () {\n            for (const location of locations) {\n                const id = getLocationId(location);\n                yield (locationIdsInViewport === null || locationIdsInViewport === void 0 ? void 0 : locationIdsInViewport.has(id)) ? getInCircleSize(id) : 1.0;\n            }\n        })());\n        const outCircleRadii = Float32Array.from((function* () {\n            for (const location of locations) {\n                const id = getLocationId(location);\n                yield (locationIdsInViewport === null || locationIdsInViewport === void 0 ? void 0 : locationIdsInViewport.has(id)) ? getOutCircleSize(id) : 1.0;\n            }\n        })());\n        const sourcePositions = Float32Array.from((function* () {\n            for (const flow of flows) {\n                const loc = locationsById === null || locationsById === void 0 ? void 0 : locationsById.get(getFlowOriginId(flow));\n                yield loc ? getLocationLon(loc) : 0;\n                yield loc ? getLocationLat(loc) : 0;\n            }\n        })());\n        const targetPositions = Float32Array.from((function* () {\n            for (const flow of flows) {\n                const loc = locationsById === null || locationsById === void 0 ? void 0 : locationsById.get(getFlowDestId(flow));\n                yield loc ? getLocationLon(loc) : 0;\n                yield loc ? getLocationLat(loc) : 0;\n            }\n        })());\n        const thicknesses = Float32Array.from((function* () {\n            for (const flow of flows) {\n                yield flowThicknessScale\n                    ? flowThicknessScale(getFlowMagnitude(flow)) || 0\n                    : 0;\n            }\n        })());\n        const endpointOffsets = Float32Array.from((function* () {\n            for (const flow of flows) {\n                const originId = getFlowOriginId(flow);\n                const destId = getFlowDestId(flow);\n                yield Math.max(getInCircleSize(originId), getOutCircleSize(originId));\n                yield Math.max(getInCircleSize(destId), getOutCircleSize(destId));\n            }\n        })());\n        const flowLineColors = Uint8Array.from((function* () {\n            for (const flow of flows) {\n                yield* flowColorScale(getFlowMagnitude(flow));\n            }\n        })());\n        const staggeringValues = animationEnabled\n            ? Float32Array.from((function* () {\n                for (const f of flows) {\n                    // @ts-ignore\n                    yield new alea(`${getFlowOriginId(f)}-${getFlowDestId(f)}`)();\n                }\n            })())\n            : undefined;\n        return Object.assign({ circleAttributes: {\n                length: locations.length,\n                attributes: {\n                    getPosition: { value: circlePositions, size: 2 },\n                    getColor: { value: circleColors, size: 4 },\n                    getInRadius: { value: inCircleRadii, size: 1 },\n                    getOutRadius: { value: outCircleRadii, size: 1 },\n                },\n            }, lineAttributes: {\n                length: flows.length,\n                attributes: Object.assign({ getSourcePosition: { value: sourcePositions, size: 2 }, getTargetPosition: { value: targetPositions, size: 2 }, getThickness: { value: thicknesses, size: 1 }, getColor: { value: flowLineColors, size: 4 }, getEndpointOffsets: { value: endpointOffsets, size: 2 } }, (staggeringValues\n                    ? { getStaggering: { value: staggeringValues, size: 1 } }\n                    : {})),\n            } }, (locationLabelsEnabled\n            ? { locationLabels: locations.map(getLocationName) }\n            : undefined));\n    }\n    getLocationsInBbox(tree, bbox) {\n        if (!tree)\n            return undefined;\n        return this._getLocationsInBboxIndices(tree, bbox).map((idx) => tree.points[idx]);\n    }\n    _getLocationsInBboxIndices(tree, bbox) {\n        if (!tree)\n            return undefined;\n        const [lon1, lat1, lon2, lat2] = bbox;\n        const [x1, y1, x2, y2] = [lngX(lon1), latY(lat1), lngX(lon2), latY(lat2)];\n        return tree.range(Math.min(x1, x2), Math.min(y1, y2), Math.max(x1, x2), Math.max(y1, y2));\n    }\n    isFlowInSelection(flow, selectedLocationsSet, locationFilterMode) {\n        const origin = this.accessors.getFlowOriginId(flow);\n        const dest = this.accessors.getFlowDestId(flow);\n        if (selectedLocationsSet) {\n            switch (locationFilterMode) {\n                case LocationFilterMode.ALL:\n                    return (selectedLocationsSet.has(origin) || selectedLocationsSet.has(dest));\n                case LocationFilterMode.BETWEEN:\n                    return (selectedLocationsSet.has(origin) && selectedLocationsSet.has(dest));\n                case LocationFilterMode.INCOMING:\n                    return selectedLocationsSet.has(dest);\n                case LocationFilterMode.OUTGOING:\n                    return selectedLocationsSet.has(origin);\n            }\n        }\n        return true;\n    }\n}\nfunction calcLocationTotalsExtent(locationTotals, locationIdsInViewport) {\n    if (!locationTotals)\n        return undefined;\n    let rv = undefined;\n    for (const [id, { incomingCount, outgoingCount, internalCount },] of locationTotals.entries()) {\n        if (locationIdsInViewport == null || locationIdsInViewport.has(id)) {\n            const lo = Math.min(incomingCount + internalCount, outgoingCount + internalCount, internalCount);\n            const hi = Math.max(incomingCount + internalCount, outgoingCount + internalCount, internalCount);\n            if (!rv) {\n                rv = [lo, hi];\n            }\n            else {\n                if (lo < rv[0])\n                    rv[0] = lo;\n                if (hi > rv[1])\n                    rv[1] = hi;\n            }\n        }\n    }\n    return rv;\n}\n// longitude/latitude to spherical mercator in [0..1] range\nfunction lngX(lng) {\n    return lng / 360 + 0.5;\n}\nfunction latY(lat) {\n    const sin = Math.sin((lat * Math.PI) / 180);\n    const y = 0.5 - (0.25 * Math.log((1 + sin) / (1 - sin))) / Math.PI;\n    return y < 0 ? 0 : y > 1 ? 1 : y;\n}\nfunction aggregateFlows(flows, flowAccessors) {\n    // Sum up flows with same origin, dest\n    const byOriginDest = rollup(flows, (ff) => {\n        const origin = flowAccessors.getFlowOriginId(ff[0]);\n        const dest = flowAccessors.getFlowDestId(ff[0]);\n        // const color = ff[0].color;\n        const rv = {\n            aggregate: true,\n            origin,\n            dest,\n            count: ff.reduce((m, f) => {\n                const count = flowAccessors.getFlowMagnitude(f);\n                if (count) {\n                    if (!isNaN(count) && isFinite(count))\n                        return m + count;\n                }\n                return m;\n            }, 0),\n            // time: undefined,\n        };\n        // if (color) rv.color = color;\n        return rv;\n    }, flowAccessors.getFlowOriginId, flowAccessors.getFlowDestId);\n    const rv = [];\n    for (const values of byOriginDest.values()) {\n        for (const value of values.values()) {\n            rv.push(value);\n        }\n    }\n    return rv;\n}\n/**\n * This is used to augment hover picking info so that we can displace location tooltip\n * @param circleAttributes\n * @param index\n */\nexport function getOuterCircleRadiusByIndex(circleAttributes, index) {\n    const { getInRadius, getOutRadius } = circleAttributes.attributes;\n    return Math.max(getInRadius.value[index], getOutRadius.value[index]);\n}\nexport function getLocationCoordsByIndex(circleAttributes, index) {\n    const { getPosition } = circleAttributes.attributes;\n    return [getPosition.value[index * 2], getPosition.value[index * 2 + 1]];\n}\nexport function getFlowLineAttributesByIndex(lineAttributes, index) {\n    const { getColor, getEndpointOffsets, getSourcePosition, getTargetPosition, getThickness, getStaggering, } = lineAttributes.attributes;\n    return {\n        length: 1,\n        attributes: Object.assign({ getColor: {\n                value: getColor.value.subarray(index * 4, (index + 1) * 4),\n                size: 4,\n            }, getEndpointOffsets: {\n                value: getEndpointOffsets.value.subarray(index * 2, (index + 1) * 2),\n                size: 2,\n            }, getSourcePosition: {\n                value: getSourcePosition.value.subarray(index * 2, (index + 1) * 2),\n                size: 2,\n            }, getTargetPosition: {\n                value: getTargetPosition.value.subarray(index * 2, (index + 1) * 2),\n                size: 2,\n            }, getThickness: {\n                value: getThickness.value.subarray(index, index + 1),\n                size: 1,\n            } }, (getStaggering\n            ? {\n                getStaggering: {\n                    value: getStaggering.value.subarray(index, index + 1),\n                    size: 1,\n                },\n            }\n            : undefined)),\n    };\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmxvd21hcFNlbGVjdG9ycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9GbG93bWFwU2VsZWN0b3JzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7O0dBZ0JHO0FBRUgsT0FBTyxFQUFDLFNBQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUMsTUFBTSxVQUFVLENBQUM7QUFDcEUsT0FBTyxFQUFjLFNBQVMsRUFBQyxNQUFNLFVBQVUsQ0FBQztBQUNoRCxPQUFPLE1BQU0sTUFBTSxRQUFRLENBQUM7QUFDNUIsT0FBTyxFQUNMLGNBQWMsRUFDZCxxQkFBcUIsRUFDckIsY0FBYyxHQUVmLE1BQU0sVUFBVSxDQUFDO0FBQ2xCLE9BQU8sRUFBQyxJQUFJLEVBQUMsTUFBTSxZQUFZLENBQUM7QUFDaEMsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sbUJBQW1CLENBQUM7QUFDbkQsT0FBTyxFQUNMLFVBQVUsRUFFVix3QkFBd0IsRUFFeEIsd0JBQXdCLEdBQ3pCLE1BQU0sd0JBQXdCLENBQUM7QUFDaEMsT0FBTyxTQUFTLEVBQUUsRUFHaEIsYUFBYSxFQUNiLGlCQUFpQixFQUNqQixpQkFBaUIsRUFDakIsWUFBWSxFQUNaLGdCQUFnQixHQUNqQixNQUFNLFVBQVUsQ0FBQztBQUNsQixPQUFPLHlCQUF5QixNQUFNLDZCQUE2QixDQUFDO0FBRXBFLE9BQU8sRUFDTCxlQUFlLEVBQ2YscUJBQXFCLEVBQ3JCLHNCQUFzQixHQUN2QixNQUFNLHNCQUFzQixDQUFDO0FBQzlCLE9BQU8sRUFDTCx1QkFBdUIsRUFDdkIseUJBQXlCLEVBQ3pCLHlCQUF5QixHQUUxQixNQUFNLFFBQVEsQ0FBQztBQUNoQixPQUFPLEVBWUwscUJBQXFCLEVBRXJCLGtCQUFrQixHQUVuQixNQUFNLFNBQVMsQ0FBQztBQUVqQixNQUFNLHNCQUFzQixHQUFHLEVBQUUsQ0FBQztBQVNsQyxNQUFNLENBQUMs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RUFBRSxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxDQUFDLEVBQUUsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNuRSxJQUFJLEVBQUUsQ0FBQzthQUNSLEVBQ0QsaUJBQWlCLEVBQUU7Z0JBQ2pCLEtBQUssRUFBRSxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxDQUFDLEVBQUUsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNuRSxJQUFJLEVBQUUsQ0FBQzthQUNSLEVBQ0QsWUFBWSxFQUFFO2dCQUNaLEtBQUssRUFBRSxZQUFZLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsS0FBSyxHQUFHLENBQUMsQ0FBQztnQkFDcEQsSUFBSSxFQUFFLENBQUM7YUFDUixJQUNFLENBQUMsYUFBYTtZQUNmLENBQUMsQ0FBQztnQkFDRSxhQUFhLEVBQUU7b0JBQ2IsS0FBSyxFQUFFLGFBQWEsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxLQUFLLEdBQUcsQ0FBQyxDQUFDO29CQUNyRCxJQUFJLEVBQUUsQ0FBQztpQkFDUjthQUNGO1lBQ0gsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUNmO0tBQ0YsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMjIgRmxvd21hcEJsdWVcbiAqIENvcHlyaWdodCAyMDE4LTIwMjAgVGVyYWx5dGljcywgbW9kaWZpZWQgYnkgRmxvd21hcEJsdWVcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqXG4gKi9cblxuaW1wb3J0IHthc2NlbmRpbmcsIGRlc2NlbmRpbmcsIGV4dGVudCwgbWluLCByb2xsdXB9IGZyb20gJ2QzLWFycmF5JztcbmltcG9ydCB7U2NhbGVMaW5lYXIsIHNjYWxlU3FydH0gZnJvbSAnZDMtc2NhbGUnO1xuaW1wb3J0IEtEQnVzaCBmcm9tICdrZGJ1c2gnO1xuaW1wb3J0IHtcbiAgY3JlYXRlU2VsZWN0b3IsXG4gIGNyZWF0ZVNlbGVjdG9yQ3JlYXRvcixcbiAgZGVmYXVsdE1lbW9pemUsXG4gIFBhcmFtZXRyaWNTZWxlY3Rvcixcbn0gZnJvbSAncmVzZWxlY3QnO1xuaW1wb3J0IHthbGVhfSBmcm9tICdzZWVkcmFuZG9tJztcbmltcG9ydCB7Y2x1c3RlckxvY2F0aW9uc30gZnJvbSAnLi9jbHVzdGVyL2NsdXN0ZXInO1xuaW1wb3J0IHtcbiAgYnVpbGRJbmRleCxcbiAgQ2x1c3RlckluZGV4LFxuICBmaW5kQXBwcm9wcmlhdGVab29tTGV2ZWwsXG4gIExvY2F0aW9uV2VpZ2h0R2V0dGVyLFxuICBtYWtlTG9jYXRpb25XZWlnaHRHZXR0ZXIsXG59IGZyb20gJy4vY2x1c3Rlci9DbHVzdGVySW5kZXgnO1xuaW1wb3J0IGdldENvbG9ycywge1xuICBDb2xvcnNSR0JBLFxuICBEaWZmQ29sb3JzUkdCQSxcbiAgZ2V0Q29sb3JzUkdCQSxcbiAgZ2V0RGlmZkNvbG9yc1JHQkEsXG4gIGdldEZsb3dDb2xvclNjYWxlLFxuICBpc0RpZmZDb2xvcnMsXG4gIGlzRGlmZkNvbG9yc1JHQkEsXG59IGZyb20gJy4vY29sb3JzJztcbmltcG9ydCBGbG93bWFwQWdncmVnYXRlQWNjZXNzb3JzIGZyb20gJy4vRmxvd21hcEFnZ3JlZ2F0ZUFjY2Vzc29ycyc7XG5pbXBvcnQge0Zsb3dtYXBTdGF0ZX0gZnJvbSAnLi9GbG93bWFwU3RhdGUnO1xuaW1wb3J0IHtcbiAgYWRkQ2x1c3Rlck5hbWVzLFxuICBnZXRGbG93VGhpY2tuZXNzU2NhbGUsXG4gIGdldFZpZXdwb3J0Qm91bmRpbmdCb3gsXG59IGZyb20gJy4vc2VsZWN0b3ItZnVuY3Rpb25zJztcbmltcG9ydCB7XG4gIGdldFRpbWVHcmFudWxhcml0eUJ5S2V5LFxuICBnZXRUaW1lR3JhbnVsYXJpdHlCeU9yZGVyLFxuICBnZXRUaW1lR3JhbnVsYXJpdHlGb3JEYXRlLFxuICBUaW1lR3JhbnVsYXJpdHlLZXksXG59IGZyb20gJy4vdGltZSc7XG5pbXBvcnQge1xuICBBZ2dyZWdhdGVGbG93LFxuICBDbHVzdGVyLFxuICBDbHVzdGVyTGV2ZWxzLFxuICBDbHVzdGVyTm9kZSxcbiAgQ291bnRCeVRpbWUsXG4gIEZsb3dBY2Nlc3NvcnMsXG4gIEZsb3dDaXJjbGVzTGF5ZXJBdHRyaWJ1dGVzLFxuICBGbG93TGluZXNMYXllckF0dHJpYnV0ZXMsXG4gIEZsb3dtYXBEYXRhLFxuICBGbG93bWFwRGF0YUFjY2Vzc29ycyxcbiAgaXNDbHVzdGVyLFxuICBpc0xvY2F0aW9uQ2x1c3Rlck5vZGUsXG4gIExheWVyc0RhdGEsXG4gIExvY2F0aW9uRmlsdGVyTW9kZSxcbiAgTG9jYXRpb25Ub3RhbHMsXG59IGZyb20gJy4vdHlwZXMnO1xuXG5jb25zdCBNQVhfQ0xVU1RFUl9aT09NX0xFVkVMID0gMjA7XG50eXBlIEtEQnVzaFRyZWUgPSBhbnk7XG5cbmV4cG9ydCB0eXBlIFNlbGVjdG9yPEwsIEYsIFQ+ID0gUGFyYW1ldHJpY1NlbGVjdG9yPFxuICBGbG93bWFwU3RhdGUsXG4gIEZsb3dtYXBEYXRhPEwsIEY+LFxuICBUXG4+O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGbG93bWFwU2VsZWN0b3JzPEwsIEY+IHtcbiAgYWNjZXNzb3JzOiBGbG93bWFwQWdncmVnYXRlQWNjZXNzb3JzPEwsIEY+O1xuXG4gIGNvbnN0cnVjdG9yKGFjY2Vzc29yczogRmxvd21hcERhdGFBY2Nlc3NvcnM8TCwgRj4pIHtcbiAgICB0aGlzLmFjY2Vzc29ycyA9IG5ldyBGbG93bWFwQWdncmVnYXRlQWNjZXNzb3JzKGFjY2Vzc29ycyk7XG4gICAgdGhpcy5zZXRBY2Nlc3NvcnMoYWNjZXNzb3JzKTtcbiAgfVxuXG4gIHNldEFjY2Vzc29ycyhhY2Nlc3NvcnM6IEZsb3dtYXBEYXRhQWNjZXNzb3JzPEwsIEY+KSB7XG4gICAgdGhpcy5hY2Nlc3NvcnMgPSBuZXcgRmxvd21hcEFnZ3JlZ2F0ZUFjY2Vzc29ycyhhY2Nlc3NvcnMpO1xuICB9XG5cbiAgZ2V0QWdncmVnYXRlQWNjZXNzb3JzKCk6IEZsb3dtYXBBZ2dyZWdhdGVBY2Nlc3NvcnM8TCwgRj4ge1xuICAgIHJldHVybiB0aGlzLmFjY2Vzc29ycztcbiAgfVxuXG4gIGdldEZsb3dzRnJvbVByb3BzID0gKHN0YXRlOiBGbG93bWFwU3RhdGUsIHByb3BzOiBGbG93bWFwRGF0YTxMLCBGPikgPT5cbiAgICBwcm9wcy5mbG93cztcbiAgZ2V0TG9jYXRpb25zRnJvbVByb3BzID0gKHN0YXRlOiBGbG93bWFwU3RhdGUsIHByb3BzOiBGbG93bWFwRGF0YTxMLCBGPikgPT5cbiAgICBwcm9wcy5sb2NhdGlvbnM7XG4gIGdldENsdXN0ZXJMZXZlbHNGcm9tUHJvcHMgPSAoXG4gICAgc3RhdGU6IEZsb3dtYXBTdGF0ZSxcbiAgICBwcm9wczogRmxvd21hcERhdGE8TCwgRj4sXG4gICkgPT4ge1xuICAgIHJldHVybiBwcm9wcy5jbHVzdGVyTGV2ZWxzO1xuICB9O1xuICBnZXRNYXhUb3BGbG93c0Rpc3BsYXlOdW0gPSAoc3RhdGU6IEZsb3dtYXBTdGF0ZSwgcHJvcHM6IEZsb3dtYXBEYXRhPEwsIEY+KSA9PlxuICAgIHN0YXRlLnNldHRpbmdzLm1heFRvcEZsb3dzRGlzcGxheU51bTtcbiAgZ2V0U2VsZWN0ZWRMb2NhdGlvbnMgPSAoc3RhdGU6IEZsb3dtYXBTdGF0ZSwgcHJvcHM6IEZsb3dtYXBEYXRhPEwsIEY+KSA9PlxuICAgIHN0YXRlLmZpbHRlcj8uc2VsZWN0ZWRMb2NhdGlvbnM7XG4gIGdldExvY2F0aW9uRmlsdGVyTW9kZSA9IChzdGF0ZTogRmxvd21hcFN0YXRlLCBwcm9wczogRmxvd21hcERhdGE8TCwgRj4pID0+XG4gICAgc3RhdGUuZmlsdGVyPy5sb2NhdGlvbkZpbHRlck1vZGU7XG4gIGdldENsdXN0ZXJpbmdFbmFibGVkID0gKHN0YXRlOiBGbG93bWFwU3RhdGUsIHByb3BzOiBGbG93bWFwRGF0YTxMLCBGPikgPT5cbiAgICBzdGF0ZS5zZXR0aW5ncy5jbHVzdGVyaW5nRW5hYmxlZDtcbiAgZ2V0TG9jYXRpb25Ub3RhbHNFbmFibGVkID0gKHN0YXRlOiBGbG93bWFwU3RhdGUsIHByb3BzOiBGbG93bWFwRGF0YTxMLCBGPikgPT5cbiAgICBzdGF0ZS5zZXR0aW5ncy5sb2NhdGlvblRvdGFsc0VuYWJsZWQ7XG4gIGdldExvY2F0aW9uTGFiZWxzRW5hYmxlZCA9IChzdGF0ZTogRmxvd21hcFN0YXRlLCBwcm9wczogRmxvd21hcERhdGE8TCwgRj4pID0+XG4gICAgc3RhdGUuc2V0dGluZ3MubG9jYXRpb25MYWJlbHNFbmFibGVkO1xuICBnZXRab29tID0gKHN0YXRlOiBGbG93bWFwU3RhdGUsIHByb3BzOiBGbG93bWFwRGF0YTxMLCBGPikgPT5cbiAgICBzdGF0ZS52aWV3cG9ydC56b29tO1xuICBnZXRWaWV3cG9ydCA9IChzdGF0ZTogRmxvd21hcFN0YXRlLCBwcm9wczogRmxvd21hcERhdGE8TCwgRj4pID0+XG4gICAgc3RhdGUudmlld3BvcnQ7XG4gIGdldFNlbGVjdGVkVGltZVJhbmdlID0gKHN0YXRlOiBGbG93bWFwU3RhdGUsIHByb3BzOiBGbG93bWFwRGF0YTxMLCBGPikgPT5cbiAgICBzdGF0ZS5maWx0ZXI/LnNlbGVjdGVkVGltZVJhbmdlO1xuXG4gIGdldENvbG9yU2NoZW1lOiBTZWxlY3RvcjxMLCBGLCBzdHJpbmcgfCBzdHJpbmdbXSB8IHVuZGVmaW5lZD4gPSAoXG4gICAgc3RhdGU6IEZsb3dtYXBTdGF0ZSxcbiAgICBwcm9wczogRmxvd21hcERhdGE8TCwgRj4sXG4gICkgPT4gc3RhdGUuc2V0dGluZ3MuY29sb3JTY2hlbWU7XG5cbiAgZ2V0RGFya01vZGU6IFNlbGVjdG9yPEwsIEYsIGJvb2xlYW4+ID0gKFxuICAgIHN0YXRlOiBGbG93bWFwU3RhdGUsXG4gICAgcHJvcHM6IEZsb3dtYXBEYXRhPEwsIEY+LFxuICApID0+IHN0YXRlLnNldHRpbmdzLmRhcmtNb2RlO1xuXG4gIGdldEZhZGVFbmFibGVkOiBTZWxlY3RvcjxMLCBGLCBib29sZWFuPiA9IChcbiAgICBzdGF0ZTogRmxvd21hcFN0YXRlLFxuICAgIHByb3BzOiBGbG93bWFwRGF0YTxMLCBGPixcbiAgKSA9PiBzdGF0ZS5zZXR0aW5ncy5mYWRlRW5hYmxlZDtcblxuICBnZXRGYWRlT3BhY2l0eUVuYWJsZWQ6IFNlbGVjdG9yPEwsIEYsIGJvb2xlYW4+ID0gKFxuICAgIHN0YXRlOiBGbG93bWFwU3RhdGUsXG4gICAgcHJvcHM6IEZsb3dtYXBEYXRhPEwsIEY+LFxuICApID0+IHN0YXRlLnNldHRpbmdzLmZhZGVPcGFjaXR5RW5hYmxlZDtcblxuICBnZXRGYWRlQW1vdW50OiBTZWxlY3RvcjxMLCBGLCBudW1iZXI+ID0gKFxuICAgIHN0YXRlOiBGbG93bWFwU3RhdGUsXG4gICAgcHJvcHM6IEZsb3dtYXBEYXRhPEwsIEY+LFxuICApID0+IHN0YXRlLnNldHRpbmdzLmZhZGVBbW91bnQ7XG5cbiAgZ2V0QW5pbWF0ZTogU2VsZWN0b3I8TCwgRiwgYm9vbGVhbj4gPSAoXG4gICAgc3RhdGU6IEZsb3dtYXBTdGF0ZSxcbiAgICBwcm9wczogRmxvd21hcERhdGE8TCwgRj4sXG4gICkgPT4gc3RhdGUuc2V0dGluZ3MuYW5pbWF0aW9uRW5hYmxlZDtcblxuICBnZXRJbnZhbGlkTG9jYXRpb25JZHM6IFNlbGVjdG9yPEwsIEYsIChzdHJpbmcgfCBudW1iZXIpW10gfCB1bmRlZmluZWQ+ID1cbiAgICBjcmVhdGVTZWxlY3Rvcih0aGlzLmdldExvY2F0aW9uc0Zyb21Qcm9wcywgKGxvY2F0aW9ucykgPT4ge1xuICAgICAgaWYgKCFsb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICBjb25zdCBpbnZhbGlkID0gW107XG4gICAgICBmb3IgKGNvbnN0IGxvY2F0aW9uIG9mIGxvY2F0aW9ucykge1xuICAgICAgICBjb25zdCBpZCA9IHRoaXMuYWNjZXNzb3JzLmdldExvY2F0aW9uSWQobG9jYXRpb24pO1xuICAgICAgICBjb25zdCBsb24gPSB0aGlzLmFjY2Vzc29ycy5nZXRMb2NhdGlvbkxvbihsb2NhdGlvbik7XG4gICAgICAgIGNvbnN0IGxhdCA9IHRoaXMuYWNjZXNzb3JzLmdldExvY2F0aW9uTGF0KGxvY2F0aW9uKTtcbiAgICAgICAgaWYgKCEoLTkwIDw9IGxhdCAmJiBsYXQgPD0gOTApIHx8ICEoLTE4MCA8PSBsb24gJiYgbG9uIDw9IDE4MCkpIHtcbiAgICAgICAgICBpbnZhbGlkLnB1c2goaWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gaW52YWxpZC5sZW5ndGggPiAwID8gaW52YWxpZCA6IHVuZGVmaW5lZDtcbiAgICB9KTtcblxuICBnZXRMb2NhdGlvbnM6IFNlbGVjdG9yPEwsIEYsIEl0ZXJhYmxlPEw+IHwgdW5kZWZpbmVkPiA9IGNyZWF0ZVNlbGVjdG9yKFxuICAgIHRoaXMuZ2V0TG9jYXRpb25zRnJvbVByb3BzLFxuICAgIHRoaXMuZ2V0SW52YWxpZExvY2F0aW9uSWRzLFxuICAgIChsb2NhdGlvbnMsIGludmFsaWRJZHMpID0+IHtcbiAgICAgIGlmICghbG9jYXRpb25zKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgaWYgKCFpbnZhbGlkSWRzIHx8IGludmFsaWRJZHMubGVuZ3RoID09PSAwKSByZXR1cm4gbG9jYXRpb25zO1xuICAgICAgY29uc3QgaW52YWxpZCA9IG5ldyBTZXQoaW52YWxpZElkcyk7XG4gICAgICBjb25zdCBmaWx0ZXJlZDogTFtdID0gW107XG4gICAgICBmb3IgKGNvbnN0IGxvY2F0aW9uIG9mIGxvY2F0aW9ucykge1xuICAgICAgICBjb25zdCBpZCA9IHRoaXMuYWNjZXNzb3JzLmdldExvY2F0aW9uSWQobG9jYXRpb24pO1xuICAgICAgICBpZiAoIWludmFsaWQuaGFzKGlkKSkge1xuICAgICAgICAgIGZpbHRlcmVkLnB1c2gobG9jYXRpb24pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmlsdGVyZWQ7XG4gICAgfSxcbiAgKTtcblxuICBnZXRMb2NhdGlvbklkczogU2VsZWN0b3I8TCwgRiwgU2V0PHN0cmluZyB8IG51bWJlcj4gfCB1bmRlZmluZWQ+ID1cbiAgICBjcmVhdGVTZWxlY3Rvcih0aGlzLmdldExvY2F0aW9ucywgKGxvY2F0aW9ucykgPT4ge1xuICAgICAgaWYgKCFsb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICBjb25zdCBpZHMgPSBuZXcgU2V0PHN0cmluZyB8IG51bWJlcj4oKTtcbiAgICAgIGZvciAoY29uc3QgaWQgb2YgbG9jYXRpb25zKSB7XG4gICAgICAgIGlkcy5hZGQodGhpcy5hY2Nlc3NvcnMuZ2V0TG9jYXRpb25JZChpZCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGlkcztcbiAgICB9KTtcblxuICBnZXRTZWxlY3RlZExvY2F0aW9uc1NldDogU2VsZWN0b3I8TCwgRiwgU2V0PHN0cmluZyB8IG51bWJlcj4gfCB1bmRlZmluZWQ+ID1cbiAgICBjcmVhdGVTZWxlY3Rvcih0aGlzLmdldFNlbGVjdGVkTG9jYXRpb25zLCAoaWRzKSA9PlxuICAgICAgaWRzICYmIGlkcy5sZW5ndGggPiAwID8gbmV3IFNldChpZHMpIDogdW5kZWZpbmVkLFxuICAgICk7XG5cbiAgZ2V0U29ydGVkRmxvd3NGb3JLbm93bkxvY2F0aW9uczogU2VsZWN0b3I8TCwgRiwgRltdIHwgdW5kZWZpbmVkPiA9XG4gICAgY3JlYXRlU2VsZWN0b3IoXG4gICAgICB0aGlzLmdldEZsb3dzRnJvbVByb3BzLFxuICAgICAgdGhpcy5nZXRMb2NhdGlvbklkcyxcbiAgICAgIChmbG93cywgaWRzKSA9PiB7XG4gICAgICAgIGlmICghaWRzIHx8ICFmbG93cykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBmbG93IG9mIGZsb3dzKSB7XG4gICAgICAgICAgY29uc3Qgc3JjSWQgPSB0aGlzLmFjY2Vzc29ycy5nZXRGbG93T3JpZ2luSWQoZmxvdyk7XG4gICAgICAgICAgY29uc3QgZHN0SWQgPSB0aGlzLmFjY2Vzc29ycy5nZXRGbG93RGVzdElkKGZsb3cpO1xuICAgICAgICAgIGlmIChpZHMuaGFzKHNyY0lkKSAmJiBpZHMuaGFzKGRzdElkKSkge1xuICAgICAgICAgICAgZmlsdGVyZWQucHVzaChmbG93KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkLnNvcnQoKGE6IEYsIGI6IEYpID0+XG4gICAgICAgICAgZGVzY2VuZGluZyhcbiAgICAgICAgICAgIE1hdGguYWJzKHRoaXMuYWNjZXNzb3JzLmdldEZsb3dNYWduaXR1ZGUoYSkpLFxuICAgICAgICAgICAgTWF0aC5hYnModGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd01hZ25pdHVkZShiKSksXG4gICAgICAgICAgKSxcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgKTtcblxuICBnZXRBY3R1YWxUaW1lRXh0ZW50OiBTZWxlY3RvcjxMLCBGLCBbRGF0ZSwgRGF0ZV0gfCB1bmRlZmluZWQ+ID1cbiAgICBjcmVhdGVTZWxlY3Rvcih0aGlzLmdldFNvcnRlZEZsb3dzRm9yS25vd25Mb2NhdGlvbnMsIChmbG93cykgPT4ge1xuICAgICAgaWYgKCFmbG93cykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIGxldCBzdGFydCA9IG51bGw7XG4gICAgICBsZXQgZW5kID0gbnVsbDtcbiAgICAgIGZvciAoY29uc3QgZmxvdyBvZiBmbG93cykge1xuICAgICAgICBjb25zdCB0aW1lID0gdGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd1RpbWUoZmxvdyk7XG4gICAgICAgIGlmICh0aW1lKSB7XG4gICAgICAgICAgaWYgKHN0YXJ0ID09IG51bGwgfHwgc3RhcnQgPiB0aW1lKSBzdGFydCA9IHRpbWU7XG4gICAgICAgICAgaWYgKGVuZCA9PSBudWxsIHx8IGVuZCA8IHRpbWUpIGVuZCA9IHRpbWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghc3RhcnQgfHwgIWVuZCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIHJldHVybiBbc3RhcnQsIGVuZF07XG4gICAgfSk7XG5cbiAgZ2V0VGltZUdyYW51bGFyaXR5S2V5OiBTZWxlY3RvcjxMLCBGLCBUaW1lR3JhbnVsYXJpdHlLZXkgfCB1bmRlZmluZWQ+ID1cbiAgICBjcmVhdGVTZWxlY3RvcihcbiAgICAgIHRoaXMuZ2V0U29ydGVkRmxvd3NGb3JLbm93bkxvY2F0aW9ucyxcbiAgICAgIHRoaXMuZ2V0QWN0dWFsVGltZUV4dGVudCxcbiAgICAgIChmbG93cywgdGltZUV4dGVudCkgPT4ge1xuICAgICAgICBpZiAoIWZsb3dzIHx8ICF0aW1lRXh0ZW50KSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgICAgIGNvbnN0IG1pbk9yZGVyID0gbWluKGZsb3dzLCAoZCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmFjY2Vzc29ycy5nZXRGbG93VGltZShkKTtcbiAgICAgICAgICByZXR1cm4gdCA/IGdldFRpbWVHcmFudWxhcml0eUZvckRhdGUodCkub3JkZXIgOiBudWxsO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG1pbk9yZGVyID09IG51bGwpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IHRpbWVHcmFudWxhcml0eSA9IGdldFRpbWVHcmFudWxhcml0eUJ5T3JkZXIobWluT3JkZXIpO1xuICAgICAgICByZXR1cm4gdGltZUdyYW51bGFyaXR5ID8gdGltZUdyYW51bGFyaXR5LmtleSA6IHVuZGVmaW5lZDtcbiAgICAgIH0sXG4gICAgKTtcblxuICBnZXRUaW1lRXh0ZW50OiBTZWxlY3RvcjxMLCBGLCBbRGF0ZSwgRGF0ZV0gfCB1bmRlZmluZWQ+ID0gY3JlYXRlU2VsZWN0b3IoXG4gICAgdGhpcy5nZXRBY3R1YWxUaW1lRXh0ZW50LFxuICAgIHRoaXMuZ2V0VGltZUdyYW51bGFyaXR5S2V5LFxuICAgICh0aW1lRXh0ZW50LCB0aW1lR3JhbnVsYXJpdHlLZXkpID0+IHtcbiAgICAgIGNvbnN0IHRpbWVHcmFudWxhcml0eSA9IHRpbWVHcmFudWxhcml0eUtleVxuICAgICAgICA/IGdldFRpbWVHcmFudWxhcml0eUJ5S2V5KHRpbWVHcmFudWxhcml0eUtleSlcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoIXRpbWVFeHRlbnQgfHwgIXRpbWVHcmFudWxhcml0eT8uaW50ZXJ2YWwpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICBjb25zdCB7aW50ZXJ2YWx9ID0gdGltZUdyYW51bGFyaXR5O1xuICAgICAgcmV0dXJuIFt0aW1lRXh0ZW50WzBdLCBpbnRlcnZhbC5vZmZzZXQoaW50ZXJ2YWwuZmxvb3IodGltZUV4dGVudFsxXSksIDEpXTtcbiAgICB9LFxuICApO1xuXG4gIGdldFNvcnRlZEZsb3dzRm9yS25vd25Mb2NhdGlvbnNGaWx0ZXJlZEJ5VGltZTogU2VsZWN0b3I8XG4gICAgTCxcbiAgICBGLFxuICAgIEZbXSB8IHVuZGVmaW5lZFxuICA+ID0gY3JlYXRlU2VsZWN0b3IoXG4gICAgdGhpcy5nZXRTb3J0ZWRGbG93c0Zvcktub3duTG9jYXRpb25zLFxuICAgIHRoaXMuZ2V0VGltZUV4dGVudCxcbiAgICB0aGlzLmdldFNlbGVjdGVkVGltZVJhbmdlLFxuICAgIChmbG93cywgdGltZUV4dGVudCwgdGltZVJhbmdlKSA9PiB7XG4gICAgICBpZiAoIWZsb3dzKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgaWYgKFxuICAgICAgICAhdGltZUV4dGVudCB8fFxuICAgICAgICAhdGltZVJhbmdlIHx8XG4gICAgICAgICh0aW1lRXh0ZW50WzBdID09PSB0aW1lUmFuZ2VbMF0gJiYgdGltZUV4dGVudFsxXSA9PT0gdGltZVJhbmdlWzFdKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmbG93cztcbiAgICAgIH1cbiAgICAgIHJldHVybiBmbG93cy5maWx0ZXIoKGZsb3cpID0+IHtcbiAgICAgICAgY29uc3QgdGltZSA9IHRoaXMuYWNjZXNzb3JzLmdldEZsb3dUaW1lKGZsb3cpO1xuICAgICAgICByZXR1cm4gdGltZSAmJiB0aW1lUmFuZ2VbMF0gPD0gdGltZSAmJiB0aW1lIDwgdGltZVJhbmdlWzFdO1xuICAgICAgfSk7XG4gICAgfSxcbiAgKTtcblxuICBnZXRMb2NhdGlvbnNIYXZpbmdGbG93czogU2VsZWN0b3I8TCwgRiwgSXRlcmFibGU8TD4gfCB1bmRlZmluZWQ+ID1cbiAgICBjcmVhdGVTZWxlY3RvcihcbiAgICAgIHRoaXMuZ2V0U29ydGVkRmxvd3NGb3JLbm93bkxvY2F0aW9ucyxcbiAgICAgIHRoaXMuZ2V0TG9jYXRpb25zLFxuICAgICAgKGZsb3dzLCBsb2NhdGlvbnMpID0+IHtcbiAgICAgICAgaWYgKCFsb2NhdGlvbnMgfHwgIWZsb3dzKSByZXR1cm4gbG9jYXRpb25zO1xuICAgICAgICBjb25zdCB3aXRoRmxvd3MgPSBuZXcgU2V0KCk7XG4gICAgICAgIGZvciAoY29uc3QgZmxvdyBvZiBmbG93cykge1xuICAgICAgICAgIHdpdGhGbG93cy5hZGQodGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd09yaWdpbklkKGZsb3cpKTtcbiAgICAgICAgICB3aXRoRmxvd3MuYWRkKHRoaXMuYWNjZXNzb3JzLmdldEZsb3dEZXN0SWQoZmxvdykpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkID0gW107XG4gICAgICAgIGZvciAoY29uc3QgbG9jYXRpb24gb2YgbG9jYXRpb25zKSB7XG4gICAgICAgICAgaWYgKHdpdGhGbG93cy5oYXModGhpcy5hY2Nlc3NvcnMuZ2V0TG9jYXRpb25JZChsb2NhdGlvbikpKSB7XG4gICAgICAgICAgICBmaWx0ZXJlZC5wdXNoKGxvY2F0aW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkO1xuICAgICAgfSxcbiAgICApO1xuXG4gIGdldExvY2F0aW9uc0J5SWQ6IFNlbGVjdG9yPEwsIEYsIE1hcDxzdHJpbmcgfCBudW1iZXIsIEw+IHwgdW5kZWZpbmVkPiA9XG4gICAgY3JlYXRlU2VsZWN0b3IodGhpcy5nZXRMb2NhdGlvbnNIYXZpbmdGbG93cywgKGxvY2F0aW9ucykgPT4ge1xuICAgICAgaWYgKCFsb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICBjb25zdCBsb2NhdGlvbnNCeUlkID0gbmV3IE1hcDxzdHJpbmcgfCBudW1iZXIsIEw+KCk7XG4gICAgICBmb3IgKGNvbnN0IGxvY2F0aW9uIG9mIGxvY2F0aW9ucykge1xuICAgICAgICBsb2NhdGlvbnNCeUlkLnNldCh0aGlzLmFjY2Vzc29ycy5nZXRMb2NhdGlvbklkKGxvY2F0aW9uKSwgbG9jYXRpb24pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGxvY2F0aW9uc0J5SWQ7XG4gICAgfSk7XG5cbiAgZ2V0TG9jYXRpb25XZWlnaHRHZXR0ZXI6IFNlbGVjdG9yPEwsIEYsIExvY2F0aW9uV2VpZ2h0R2V0dGVyIHwgdW5kZWZpbmVkPiA9XG4gICAgY3JlYXRlU2VsZWN0b3IodGhpcy5nZXRTb3J0ZWRGbG93c0Zvcktub3duTG9jYXRpb25zLCAoZmxvd3MpID0+IHtcbiAgICAgIGlmICghZmxvd3MpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICBjb25zdCBnZXRMb2NhdGlvbldlaWdodCA9IG1ha2VMb2NhdGlvbldlaWdodEdldHRlcihcbiAgICAgICAgZmxvd3MsXG4gICAgICAgIHRoaXMuYWNjZXNzb3JzLmdldEZsb3dtYXBEYXRhQWNjZXNzb3JzKCksXG4gICAgICApO1xuICAgICAgcmV0dXJuIGdldExvY2F0aW9uV2VpZ2h0O1xuICAgIH0pO1xuXG4gIGdldENsdXN0ZXJMZXZlbHM6IFNlbGVjdG9yPEwsIEYsIENsdXN0ZXJMZXZlbHMgfCB1bmRlZmluZWQ+ID0gY3JlYXRlU2VsZWN0b3IoXG4gICAgdGhpcy5nZXRDbHVzdGVyTGV2ZWxzRnJvbVByb3BzLFxuICAgIHRoaXMuZ2V0TG9jYXRpb25zSGF2aW5nRmxvd3MsXG4gICAgdGhpcy5nZXRMb2NhdGlvbldlaWdodEdldHRlcixcbiAgICAoY2x1c3RlckxldmVsc0Zyb21Qcm9wcywgbG9jYXRpb25zLCBnZXRMb2NhdGlvbldlaWdodCkgPT4ge1xuICAgICAgaWYgKGNsdXN0ZXJMZXZlbHNGcm9tUHJvcHMpIHJldHVybiBjbHVzdGVyTGV2ZWxzRnJvbVByb3BzO1xuICAgICAgaWYgKCFsb2NhdGlvbnMgfHwgIWdldExvY2F0aW9uV2VpZ2h0KSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgY29uc3QgY2x1c3RlckxldmVscyA9IGNsdXN0ZXJMb2NhdGlvbnMoXG4gICAgICAgIGxvY2F0aW9ucyxcbiAgICAgICAgdGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd21hcERhdGFBY2Nlc3NvcnMoKSxcbiAgICAgICAgZ2V0TG9jYXRpb25XZWlnaHQsXG4gICAgICAgIHtcbiAgICAgICAgICBtYXhab29tOiBNQVhfQ0xVU1RFUl9aT09NX0xFVkVMLFxuICAgICAgICB9LFxuICAgICAgKTtcbiAgICAgIHJldHVybiBjbHVzdGVyTGV2ZWxzO1xuICAgIH0sXG4gICk7XG5cbiAgZ2V0Q2x1c3RlckluZGV4OiBTZWxlY3RvcjxMLCBGLCBDbHVzdGVySW5kZXg8Rj4gfCB1bmRlZmluZWQ+ID0gY3JlYXRlU2VsZWN0b3IoXG4gICAgdGhpcy5nZXRMb2NhdGlvbnNCeUlkLFxuICAgIHRoaXMuZ2V0TG9jYXRpb25XZWlnaHRHZXR0ZXIsXG4gICAgdGhpcy5nZXRDbHVzdGVyTGV2ZWxzLFxuICAgIChsb2NhdGlvbnNCeUlkLCBnZXRMb2NhdGlvbldlaWdodCwgY2x1c3RlckxldmVscykgPT4ge1xuICAgICAgaWYgKCFsb2NhdGlvbnNCeUlkIHx8ICFnZXRMb2NhdGlvbldlaWdodCB8fCAhY2x1c3RlckxldmVscylcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgICAgY29uc3QgY2x1c3RlckluZGV4ID0gYnVpbGRJbmRleDxGPihjbHVzdGVyTGV2ZWxzKTtcbiAgICAgIC8vIEFkZGluZyBtZWFuaW5nZnVsIG5hbWVzXG4gICAgICBhZGRDbHVzdGVyTmFtZXMoXG4gICAgICAgIGNsdXN0ZXJJbmRleCxcbiAgICAgICAgY2x1c3RlckxldmVscyxcbiAgICAgICAgbG9jYXRpb25zQnlJZCxcbiAgICAgICAgdGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd21hcERhdGFBY2Nlc3NvcnMoKSxcbiAgICAgICAgZ2V0TG9jYXRpb25XZWlnaHQsXG4gICAgICApO1xuICAgICAgcmV0dXJuIGNsdXN0ZXJJbmRleDtcbiAgICB9LFxuICApO1xuXG4gIGdldEF2YWlsYWJsZUNsdXN0ZXJab29tTGV2ZWxzID0gY3JlYXRlU2VsZWN0b3IoXG4gICAgdGhpcy5nZXRDbHVzdGVySW5kZXgsXG4gICAgdGhpcy5nZXRTZWxlY3RlZExvY2F0aW9ucyxcbiAgICAoY2x1c3RlckluZGV4LCBzZWxlY3RlZExvY2F0aW9ucyk6IG51bWJlcltdIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGlmICghY2x1c3RlckluZGV4KSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIGxldCBtYXhab29tID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICAgICAgbGV0IG1pblpvb20gPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XG5cbiAgICAgIGNvbnN0IGFkanVzdCA9ICh6b25lSWQ6IHN0cmluZyB8IG51bWJlcikgPT4ge1xuICAgICAgICBjb25zdCBjbHVzdGVyID0gY2x1c3RlckluZGV4LmdldENsdXN0ZXJCeUlkKHpvbmVJZCk7XG4gICAgICAgIGlmIChjbHVzdGVyKSB7XG4gICAgICAgICAgbWluWm9vbSA9IE1hdGgubWF4KG1pblpvb20sIGNsdXN0ZXIuem9vbSk7XG4gICAgICAgICAgbWF4Wm9vbSA9IE1hdGgubWluKG1heFpvb20sIGNsdXN0ZXIuem9vbSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgem9vbSA9IGNsdXN0ZXJJbmRleC5nZXRNaW5ab29tRm9yTG9jYXRpb24oem9uZUlkKTtcbiAgICAgICAgICBtaW5ab29tID0gTWF0aC5tYXgobWluWm9vbSwgem9vbSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGlmIChzZWxlY3RlZExvY2F0aW9ucykge1xuICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIHNlbGVjdGVkTG9jYXRpb25zKSB7XG4gICAgICAgICAgYWRqdXN0KGlkKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2x1c3RlckluZGV4LmF2YWlsYWJsZVpvb21MZXZlbHMuZmlsdGVyKFxuICAgICAgICAobGV2ZWwpID0+IG1pblpvb20gPD0gbGV2ZWwgJiYgbGV2ZWwgPD0gbWF4Wm9vbSxcbiAgICAgICk7XG4gICAgfSxcbiAgKTtcblxuICBfZ2V0Q2x1c3Rlclpvb206IFNlbGVjdG9yPEwsIEYsIG51bWJlciB8IHVuZGVmaW5lZD4gPSBjcmVhdGVTZWxlY3RvcihcbiAgICB0aGlzLmdldENsdXN0ZXJJbmRleCxcbiAgICB0aGlzLmdldFpvb20sXG4gICAgdGhpcy5nZXRBdmFpbGFibGVDbHVzdGVyWm9vbUxldmVscyxcbiAgICAoY2x1c3RlckluZGV4LCBtYXBab29tLCBhdmFpbGFibGVDbHVzdGVyWm9vbUxldmVscykgPT4ge1xuICAgICAgaWYgKCFjbHVzdGVySW5kZXgpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICBpZiAoIWF2YWlsYWJsZUNsdXN0ZXJab29tTGV2ZWxzIHx8IG1hcFpvb20gPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjbHVzdGVyWm9vbSA9IGZpbmRBcHByb3ByaWF0ZVpvb21MZXZlbChcbiAgICAgICAgYXZhaWxhYmxlQ2x1c3Rlclpvb21MZXZlbHMsXG4gICAgICAgIG1hcFpvb20sXG4gICAgICApO1xuICAgICAgcmV0dXJuIGNsdXN0ZXJab29tO1xuICAgIH0sXG4gICk7XG5cbiAgZ2V0Q2x1c3Rlclpvb20gPSAoc3RhdGU6IEZsb3dtYXBTdGF0ZSwgcHJvcHM6IEZsb3dtYXBEYXRhPEwsIEY+KSA9PiB7XG4gICAgY29uc3Qge3NldHRpbmdzfSA9IHN0YXRlO1xuICAgIGlmICghc2V0dGluZ3MuY2x1c3RlcmluZ0VuYWJsZWQpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgaWYgKHNldHRpbmdzLmNsdXN0ZXJpbmdBdXRvIHx8IHNldHRpbmdzLmNsdXN0ZXJpbmdMZXZlbCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZ2V0Q2x1c3Rlclpvb20oc3RhdGUsIHByb3BzKTtcbiAgICB9XG4gICAgcmV0dXJuIHNldHRpbmdzLmNsdXN0ZXJpbmdMZXZlbDtcbiAgfTtcblxuICBnZXRMb2NhdGlvbnNGb3JTZWFyY2hCb3g6IFNlbGVjdG9yPEwsIEYsIChMIHwgQ2x1c3RlcilbXSB8IHVuZGVmaW5lZD4gPVxuICAgIGNyZWF0ZVNlbGVjdG9yKFxuICAgICAgdGhpcy5nZXRDbHVzdGVyaW5nRW5hYmxlZCxcbiAgICAgIHRoaXMuZ2V0TG9jYXRpb25zSGF2aW5nRmxvd3MsXG4gICAgICB0aGlzLmdldFNlbGVjdGVkTG9jYXRpb25zLFxuICAgICAgdGhpcy5nZXRDbHVzdGVyWm9vbSxcbiAgICAgIHRoaXMuZ2V0Q2x1c3RlckluZGV4LFxuICAgICAgKFxuICAgICAgICBjbHVzdGVyaW5nRW5hYmxlZCxcbiAgICAgICAgbG9jYXRpb25zLFxuICAgICAgICBzZWxlY3RlZExvY2F0aW9ucyxcbiAgICAgICAgY2x1c3Rlclpvb20sXG4gICAgICAgIGNsdXN0ZXJJbmRleCxcbiAgICAgICkgPT4ge1xuICAgICAgICBpZiAoIWxvY2F0aW9ucykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHJlc3VsdDogKEwgfCBDbHVzdGVyKVtdID0gQXJyYXkuZnJvbShsb2NhdGlvbnMpO1xuICAgICAgICAvLyBpZiAoY2x1c3RlcmluZ0VuYWJsZWQpIHtcbiAgICAgICAgLy8gICBpZiAoY2x1c3RlckluZGV4KSB7XG4gICAgICAgIC8vICAgICBjb25zdCB6b29tSXRlbXMgPSBjbHVzdGVySW5kZXguZ2V0Q2x1c3Rlck5vZGVzRm9yKGNsdXN0ZXJab29tKTtcbiAgICAgICAgLy8gICAgIGlmICh6b29tSXRlbXMpIHtcbiAgICAgICAgLy8gICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdCh6b29tSXRlbXMuZmlsdGVyKGlzQ2x1c3RlcikpO1xuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyAgIH1cbiAgICAgICAgLy8gfVxuXG4gICAgICAgIGlmIChjbHVzdGVySW5kZXggJiYgc2VsZWN0ZWRMb2NhdGlvbnMpIHtcbiAgICAgICAgICBjb25zdCB0b0FwcGVuZCA9IFtdO1xuICAgICAgICAgIGZvciAoY29uc3QgaWQgb2Ygc2VsZWN0ZWRMb2NhdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsdXN0ZXIgPSBjbHVzdGVySW5kZXguZ2V0Q2x1c3RlckJ5SWQoaWQpO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBjbHVzdGVyICYmXG4gICAgICAgICAgICAgICFyZXN1bHQuZmluZChcbiAgICAgICAgICAgICAgICAoZCkgPT5cbiAgICAgICAgICAgICAgICAgIChpc0xvY2F0aW9uQ2x1c3Rlck5vZGUoZClcbiAgICAgICAgICAgICAgICAgICAgPyBkLmlkXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5hY2Nlc3NvcnMuZ2V0TG9jYXRpb25JZChkKSkgPT09IGlkLFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgdG9BcHBlbmQucHVzaChjbHVzdGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRvQXBwZW5kLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQodG9BcHBlbmQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSxcbiAgICApO1xuXG4gIGdldERpZmZNb2RlOiBTZWxlY3RvcjxMLCBGLCBib29sZWFuPiA9IGNyZWF0ZVNlbGVjdG9yKFxuICAgIHRoaXMuZ2V0Rmxvd3NGcm9tUHJvcHMsXG4gICAgKGZsb3dzKSA9PiB7XG4gICAgICBpZiAoZmxvd3MpIHtcbiAgICAgICAgZm9yIChjb25zdCBmIG9mIGZsb3dzKSB7XG4gICAgICAgICAgaWYgKHRoaXMuYWNjZXNzb3JzLmdldEZsb3dNYWduaXR1ZGUoZikgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuICApO1xuXG4gIF9nZXRGbG93bWFwQ29sb3JzID0gY3JlYXRlU2VsZWN0b3IoXG4gICAgdGhpcy5nZXREaWZmTW9kZSxcbiAgICB0aGlzLmdldENvbG9yU2NoZW1lLFxuICAgIHRoaXMuZ2V0RGFya01vZGUsXG4gICAgdGhpcy5nZXRGYWRlRW5hYmxlZCxcbiAgICB0aGlzLmdldEZhZGVPcGFjaXR5RW5hYmxlZCxcbiAgICB0aGlzLmdldEZhZGVBbW91bnQsXG4gICAgdGhpcy5nZXRBbmltYXRlLFxuICAgIGdldENvbG9ycyxcbiAgKTtcblxuICBnZXRGbG93bWFwQ29sb3JzUkdCQSA9IGNyZWF0ZVNlbGVjdG9yKFxuICAgIHRoaXMuX2dldEZsb3dtYXBDb2xvcnMsXG4gICAgKGZsb3dtYXBDb2xvcnMpID0+IHtcbiAgICAgIHJldHVybiBpc0RpZmZDb2xvcnMoZmxvd21hcENvbG9ycylcbiAgICAgICAgPyBnZXREaWZmQ29sb3JzUkdCQShmbG93bWFwQ29sb3JzKVxuICAgICAgICA6IGdldENvbG9yc1JHQkEoZmxvd21hcENvbG9ycyk7XG4gICAgfSxcbiAgKTtcblxuICBnZXRVbmtub3duTG9jYXRpb25zOiBTZWxlY3RvcjxMLCBGLCBTZXQ8c3RyaW5nIHwgbnVtYmVyPiB8IHVuZGVmaW5lZD4gPVxuICAgIGNyZWF0ZVNlbGVjdG9yKFxuICAgICAgdGhpcy5nZXRMb2NhdGlvbklkcyxcbiAgICAgIHRoaXMuZ2V0Rmxvd3NGcm9tUHJvcHMsXG4gICAgICB0aGlzLmdldFNvcnRlZEZsb3dzRm9yS25vd25Mb2NhdGlvbnMsXG4gICAgICAoaWRzLCBmbG93cywgZmxvd3NGb3JLbm93bkxvY2F0aW9ucykgPT4ge1xuICAgICAgICBpZiAoIWlkcyB8fCAhZmxvd3MpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBmbG93c0Zvcktub3duTG9jYXRpb25zXG4gICAgICAgICAgLy8gJiYgZmxvd3MubGVuZ3RoID09PSBmbG93c0Zvcktub3duTG9jYXRpb25zLmxlbmd0aFxuICAgICAgICApXG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgbWlzc2luZyA9IG5ldyBTZXQ8c3RyaW5nIHwgbnVtYmVyPigpO1xuICAgICAgICBmb3IgKGNvbnN0IGZsb3cgb2YgZmxvd3MpIHtcbiAgICAgICAgICBpZiAoIWlkcy5oYXModGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd09yaWdpbklkKGZsb3cpKSlcbiAgICAgICAgICAgIG1pc3NpbmcuYWRkKHRoaXMuYWNjZXNzb3JzLmdldEZsb3dPcmlnaW5JZChmbG93KSk7XG4gICAgICAgICAgaWYgKCFpZHMuaGFzKHRoaXMuYWNjZXNzb3JzLmdldEZsb3dEZXN0SWQoZmxvdykpKVxuICAgICAgICAgICAgbWlzc2luZy5hZGQodGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd0Rlc3RJZChmbG93KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pc3Npbmc7XG4gICAgICB9LFxuICAgICk7XG5cbiAgZ2V0U29ydGVkQWdncmVnYXRlZEZpbHRlcmVkRmxvd3M6IFNlbGVjdG9yPFxuICAgIEwsXG4gICAgRixcbiAgICAoRiB8IEFnZ3JlZ2F0ZUZsb3cpW10gfCB1bmRlZmluZWRcbiAgPiA9IGNyZWF0ZVNlbGVjdG9yKFxuICAgIHRoaXMuZ2V0Q2x1c3RlckluZGV4LFxuICAgIHRoaXMuZ2V0Q2x1c3RlcmluZ0VuYWJsZWQsXG4gICAgdGhpcy5nZXRTb3J0ZWRGbG93c0Zvcktub3duTG9jYXRpb25zRmlsdGVyZWRCeVRpbWUsXG4gICAgdGhpcy5nZXRDbHVzdGVyWm9vbSxcbiAgICB0aGlzLmdldFRpbWVFeHRlbnQsXG4gICAgKGNsdXN0ZXJUcmVlLCBpc0NsdXN0ZXJpbmdFbmFibGVkLCBmbG93cywgY2x1c3Rlclpvb20sIHRpbWVFeHRlbnQpID0+IHtcbiAgICAgIGlmICghZmxvd3MpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICBsZXQgYWdncmVnYXRlZDogKEYgfCBBZ2dyZWdhdGVGbG93KVtdO1xuICAgICAgaWYgKGlzQ2x1c3RlcmluZ0VuYWJsZWQgJiYgY2x1c3RlclRyZWUgJiYgY2x1c3Rlclpvb20gIT0gbnVsbCkge1xuICAgICAgICBhZ2dyZWdhdGVkID0gY2x1c3RlclRyZWUuYWdncmVnYXRlRmxvd3MoXG4gICAgICAgICAgLy8gVE9ETzogYWdncmVnYXRlIGFjcm9zcyB0aW1lXG4gICAgICAgICAgLy8gdGltZUV4dGVudCAhPSBudWxsXG4gICAgICAgICAgLy8gICA/IGFnZ3JlZ2F0ZUZsb3dzKGZsb3dzKSAvLyBjbHVzdGVyVHJlZS5hZ2dyZWdhdGVGbG93cyB3b24ndCBhZ2dyZWdhdGUgdW5jbHVzdGVyZWQgYWNyb3NzIHRpbWVcbiAgICAgICAgICAvLyAgIDogZmxvd3MsXG4gICAgICAgICAgZmxvd3MsXG4gICAgICAgICAgY2x1c3Rlclpvb20sXG4gICAgICAgICAgdGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd21hcERhdGFBY2Nlc3NvcnMoKSxcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFnZ3JlZ2F0ZWQgPSBhZ2dyZWdhdGVGbG93cyhcbiAgICAgICAgICBmbG93cyxcbiAgICAgICAgICB0aGlzLmFjY2Vzc29ycy5nZXRGbG93bWFwRGF0YUFjY2Vzc29ycygpLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgYWdncmVnYXRlZC5zb3J0KChhLCBiKSA9PlxuICAgICAgICBkZXNjZW5kaW5nKFxuICAgICAgICAgIE1hdGguYWJzKHRoaXMuYWNjZXNzb3JzLmdldEZsb3dNYWduaXR1ZGUoYSkpLFxuICAgICAgICAgIE1hdGguYWJzKHRoaXMuYWNjZXNzb3JzLmdldEZsb3dNYWduaXR1ZGUoYikpLFxuICAgICAgICApLFxuICAgICAgKTtcbiAgICAgIHJldHVybiBhZ2dyZWdhdGVkO1xuICAgIH0sXG4gICk7XG5cbiAgZ2V0RXhwYW5kZWRTZWxlY3RlZExvY2F0aW9uc1NldDogU2VsZWN0b3I8XG4gICAgTCxcbiAgICBGLFxuICAgIFNldDxzdHJpbmcgfCBudW1iZXI+IHwgdW5kZWZpbmVkXG4gID4gPSBjcmVhdGVTZWxlY3RvcihcbiAgICB0aGlzLmdldENsdXN0ZXJpbmdFbmFibGVkLFxuICAgIHRoaXMuZ2V0U2VsZWN0ZWRMb2NhdGlvbnNTZXQsXG4gICAgdGhpcy5nZXRDbHVzdGVySW5kZXgsXG4gICAgKGNsdXN0ZXJpbmdFbmFibGVkLCBzZWxlY3RlZExvY2F0aW9ucywgY2x1c3RlckluZGV4KSA9PiB7XG4gICAgICBpZiAoIXNlbGVjdGVkTG9jYXRpb25zIHx8ICFjbHVzdGVySW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkTG9jYXRpb25zO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBuZXcgU2V0PHN0cmluZyB8IG51bWJlcj4oKTtcbiAgICAgIGZvciAoY29uc3QgbG9jYXRpb25JZCBvZiBzZWxlY3RlZExvY2F0aW9ucykge1xuICAgICAgICBjb25zdCBjbHVzdGVyID0gY2x1c3RlckluZGV4LmdldENsdXN0ZXJCeUlkKGxvY2F0aW9uSWQpO1xuICAgICAgICBpZiAoY2x1c3Rlcikge1xuICAgICAgICAgIGNvbnN0IGV4cGFuZGVkID0gY2x1c3RlckluZGV4LmV4cGFuZENsdXN0ZXIoY2x1c3Rlcik7XG4gICAgICAgICAgZm9yIChjb25zdCBpZCBvZiBleHBhbmRlZCkge1xuICAgICAgICAgICAgcmVzdWx0LmFkZChpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdC5hZGQobG9jYXRpb25JZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSxcbiAgKTtcblxuICBnZXRUb3RhbENvdW50c0J5VGltZTogU2VsZWN0b3I8TCwgRiwgQ291bnRCeVRpbWVbXSB8IHVuZGVmaW5lZD4gPVxuICAgIGNyZWF0ZVNlbGVjdG9yKFxuICAgICAgdGhpcy5nZXRTb3J0ZWRGbG93c0Zvcktub3duTG9jYXRpb25zLFxuICAgICAgdGhpcy5nZXRUaW1lR3JhbnVsYXJpdHlLZXksXG4gICAgICB0aGlzLmdldFRpbWVFeHRlbnQsXG4gICAgICB0aGlzLmdldEV4cGFuZGVkU2VsZWN0ZWRMb2NhdGlvbnNTZXQsXG4gICAgICB0aGlzLmdldExvY2F0aW9uRmlsdGVyTW9kZSxcbiAgICAgIChcbiAgICAgICAgZmxvd3MsXG4gICAgICAgIHRpbWVHcmFudWxhcml0eUtleSxcbiAgICAgICAgdGltZUV4dGVudCxcbiAgICAgICAgc2VsZWN0ZWRMb2NhdGlvblNldCxcbiAgICAgICAgbG9jYXRpb25GaWx0ZXJNb2RlLFxuICAgICAgKSA9PiB7XG4gICAgICAgIGNvbnN0IHRpbWVHcmFudWxhcml0eSA9IHRpbWVHcmFudWxhcml0eUtleVxuICAgICAgICAgID8gZ2V0VGltZUdyYW51bGFyaXR5QnlLZXkodGltZUdyYW51bGFyaXR5S2V5KVxuICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBpZiAoIWZsb3dzIHx8ICF0aW1lR3JhbnVsYXJpdHkgfHwgIXRpbWVFeHRlbnQpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGJ5VGltZSA9IGZsb3dzLnJlZHVjZSgobSwgZmxvdykgPT4ge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuaXNGbG93SW5TZWxlY3Rpb24oXG4gICAgICAgICAgICAgIGZsb3csXG4gICAgICAgICAgICAgIHNlbGVjdGVkTG9jYXRpb25TZXQsXG4gICAgICAgICAgICAgIGxvY2F0aW9uRmlsdGVyTW9kZSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHRpbWVHcmFudWxhcml0eVxuICAgICAgICAgICAgICAuaW50ZXJ2YWwodGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd1RpbWUoZmxvdykpXG4gICAgICAgICAgICAgIC5nZXRUaW1lKCk7XG4gICAgICAgICAgICBtLnNldChcbiAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAobS5nZXQoa2V5KSA/PyAwKSArIHRoaXMuYWNjZXNzb3JzLmdldEZsb3dNYWduaXR1ZGUoZmxvdyksXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbTtcbiAgICAgICAgfSwgbmV3IE1hcDxudW1iZXIsIG51bWJlcj4oKSk7XG5cbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oYnlUaW1lLmVudHJpZXMoKSkubWFwKChbbWlsbGlzLCBjb3VudF0pID0+ICh7XG4gICAgICAgICAgdGltZTogbmV3IERhdGUobWlsbGlzKSxcbiAgICAgICAgICBjb3VudCxcbiAgICAgICAgfSkpO1xuICAgICAgfSxcbiAgICApO1xuXG4gIGdldE1heExvY2F0aW9uQ2lyY2xlU2l6ZTogU2VsZWN0b3I8TCwgRiwgbnVtYmVyPiA9IGNyZWF0ZVNlbGVjdG9yKFxuICAgIHRoaXMuZ2V0TG9jYXRpb25Ub3RhbHNFbmFibGVkLFxuICAgIChsb2NhdGlvblRvdGFsc0VuYWJsZWQpID0+IChsb2NhdGlvblRvdGFsc0VuYWJsZWQgPyAxNyA6IDEpLFxuICApO1xuXG4gIGdldFZpZXdwb3J0Qm91bmRpbmdCb3g6IFNlbGVjdG9yPEwsIEYsIFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdPiA9XG4gICAgY3JlYXRlU2VsZWN0b3IoXG4gICAgICB0aGlzLmdldFZpZXdwb3J0LFxuICAgICAgdGhpcy5nZXRNYXhMb2NhdGlvbkNpcmNsZVNpemUsXG4gICAgICBnZXRWaWV3cG9ydEJvdW5kaW5nQm94LFxuICAgICk7XG5cbiAgZ2V0TG9jYXRpb25zRm9yWm9vbTogU2VsZWN0b3I8TCwgRiwgSXRlcmFibGU8TD4gfCBDbHVzdGVyTm9kZVtdIHwgdW5kZWZpbmVkPiA9XG4gICAgY3JlYXRlU2VsZWN0b3IoXG4gICAgICB0aGlzLmdldENsdXN0ZXJpbmdFbmFibGVkLFxuICAgICAgdGhpcy5nZXRMb2NhdGlvbnNIYXZpbmdGbG93cyxcbiAgICAgIHRoaXMuZ2V0Q2x1c3RlckluZGV4LFxuICAgICAgdGhpcy5nZXRDbHVzdGVyWm9vbSxcbiAgICAgIChjbHVzdGVyaW5nRW5hYmxlZCwgbG9jYXRpb25zSGF2aW5nRmxvd3MsIGNsdXN0ZXJJbmRleCwgY2x1c3Rlclpvb20pID0+IHtcbiAgICAgICAgaWYgKGNsdXN0ZXJpbmdFbmFibGVkICYmIGNsdXN0ZXJJbmRleCkge1xuICAgICAgICAgIHJldHVybiBjbHVzdGVySW5kZXguZ2V0Q2x1c3Rlck5vZGVzRm9yKGNsdXN0ZXJab29tKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbG9jYXRpb25zSGF2aW5nRmxvd3M7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgKTtcblxuICBnZXRMb2NhdGlvblRvdGFsczogU2VsZWN0b3I8XG4gICAgTCxcbiAgICBGLFxuICAgIE1hcDxzdHJpbmcgfCBudW1iZXIsIExvY2F0aW9uVG90YWxzPiB8IHVuZGVmaW5lZFxuICA+ID0gY3JlYXRlU2VsZWN0b3IoXG4gICAgdGhpcy5nZXRMb2NhdGlvbnNGb3Jab29tLFxuICAgIHRoaXMuZ2V0U29ydGVkQWdncmVnYXRlZEZpbHRlcmVkRmxvd3MsXG4gICAgdGhpcy5nZXRTZWxlY3RlZExvY2F0aW9uc1NldCxcbiAgICB0aGlzLmdldExvY2F0aW9uRmlsdGVyTW9kZSxcbiAgICAobG9jYXRpb25zLCBmbG93cywgc2VsZWN0ZWRMb2NhdGlvbnNTZXQsIGxvY2F0aW9uRmlsdGVyTW9kZSkgPT4ge1xuICAgICAgaWYgKCFmbG93cykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IHRvdGFscyA9IG5ldyBNYXA8c3RyaW5nIHwgbnVtYmVyLCBMb2NhdGlvblRvdGFscz4oKTtcbiAgICAgIGNvbnN0IGFkZCA9IChcbiAgICAgICAgaWQ6IHN0cmluZyB8IG51bWJlcixcbiAgICAgICAgZDogUGFydGlhbDxMb2NhdGlvblRvdGFscz4sXG4gICAgICApOiBMb2NhdGlvblRvdGFscyA9PiB7XG4gICAgICAgIGNvbnN0IHJ2ID0gdG90YWxzLmdldChpZCkgPz8ge1xuICAgICAgICAgIGluY29taW5nQ291bnQ6IDAsXG4gICAgICAgICAgb3V0Z29pbmdDb3VudDogMCxcbiAgICAgICAgICBpbnRlcm5hbENvdW50OiAwLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoZC5pbmNvbWluZ0NvdW50ICE9IG51bGwpIHJ2LmluY29taW5nQ291bnQgKz0gZC5pbmNvbWluZ0NvdW50O1xuICAgICAgICBpZiAoZC5vdXRnb2luZ0NvdW50ICE9IG51bGwpIHJ2Lm91dGdvaW5nQ291bnQgKz0gZC5vdXRnb2luZ0NvdW50O1xuICAgICAgICBpZiAoZC5pbnRlcm5hbENvdW50ICE9IG51bGwpIHJ2LmludGVybmFsQ291bnQgKz0gZC5pbnRlcm5hbENvdW50O1xuICAgICAgICByZXR1cm4gcnY7XG4gICAgICB9O1xuICAgICAgZm9yIChjb25zdCBmIG9mIGZsb3dzKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLmlzRmxvd0luU2VsZWN0aW9uKGYsIHNlbGVjdGVkTG9jYXRpb25zU2V0LCBsb2NhdGlvbkZpbHRlck1vZGUpXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IG9yaWdpbklkID0gdGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd09yaWdpbklkKGYpO1xuICAgICAgICAgIGNvbnN0IGRlc3RJZCA9IHRoaXMuYWNjZXNzb3JzLmdldEZsb3dEZXN0SWQoZik7XG4gICAgICAgICAgY29uc3QgY291bnQgPSB0aGlzLmFjY2Vzc29ycy5nZXRGbG93TWFnbml0dWRlKGYpO1xuICAgICAgICAgIGlmIChvcmlnaW5JZCA9PT0gZGVzdElkKSB7XG4gICAgICAgICAgICB0b3RhbHMuc2V0KG9yaWdpbklkLCBhZGQob3JpZ2luSWQsIHtpbnRlcm5hbENvdW50OiBjb3VudH0pKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdG90YWxzLnNldChvcmlnaW5JZCwgYWRkKG9yaWdpbklkLCB7b3V0Z29pbmdDb3VudDogY291bnR9KSk7XG4gICAgICAgICAgICB0b3RhbHMuc2V0KGRlc3RJZCwgYWRkKGRlc3RJZCwge2luY29taW5nQ291bnQ6IGNvdW50fSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRvdGFscztcbiAgICB9LFxuICApO1xuXG4gIGdldExvY2F0aW9uc1RyZWU6IFNlbGVjdG9yPEwsIEYsIEtEQnVzaFRyZWU+ID0gY3JlYXRlU2VsZWN0b3IoXG4gICAgdGhpcy5nZXRMb2NhdGlvbnNGb3Jab29tLFxuICAgIChsb2NhdGlvbnMpID0+IHtcbiAgICAgIGlmICghbG9jYXRpb25zKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IEtEQnVzaChcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBsb2NhdGlvbnMsXG4gICAgICAgIChsb2NhdGlvbjogTCB8IENsdXN0ZXJOb2RlKSA9PlxuICAgICAgICAgIGxuZ1godGhpcy5hY2Nlc3NvcnMuZ2V0TG9jYXRpb25Mb24obG9jYXRpb24pKSxcbiAgICAgICAgKGxvY2F0aW9uOiBMIHwgQ2x1c3Rlck5vZGUpID0+XG4gICAgICAgICAgbGF0WSh0aGlzLmFjY2Vzc29ycy5nZXRMb2NhdGlvbkxhdChsb2NhdGlvbikpLFxuICAgICAgKTtcbiAgICB9LFxuICApO1xuXG4gIF9nZXRMb2NhdGlvbklkc0luVmlld3BvcnQ6IFNlbGVjdG9yPEwsIEYsIFNldDxzdHJpbmc+IHwgdW5kZWZpbmVkPiA9XG4gICAgY3JlYXRlU2VsZWN0b3IoXG4gICAgICB0aGlzLmdldExvY2F0aW9uc1RyZWUsXG4gICAgICB0aGlzLmdldFZpZXdwb3J0Qm91bmRpbmdCb3gsXG4gICAgICAodHJlZTogS0RCdXNoVHJlZSwgYmJveDogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0pID0+IHtcbiAgICAgICAgY29uc3QgaWRzID0gdGhpcy5fZ2V0TG9jYXRpb25zSW5CYm94SW5kaWNlcyh0cmVlLCBiYm94KTtcbiAgICAgICAgaWYgKGlkcykge1xuICAgICAgICAgIHJldHVybiBuZXcgU2V0KFxuICAgICAgICAgICAgaWRzLm1hcCgoaWR4OiBudW1iZXIpID0+IHRyZWUucG9pbnRzW2lkeF0uaWQpIGFzIEFycmF5PHN0cmluZz4sXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfSxcbiAgICApO1xuXG4gIGdldExvY2F0aW9uSWRzSW5WaWV3cG9ydDogU2VsZWN0b3I8TCwgRiwgU2V0PHN0cmluZyB8IG51bWJlcj4gfCB1bmRlZmluZWQ+ID1cbiAgICBjcmVhdGVTZWxlY3RvckNyZWF0b3IoXG4gICAgICBkZWZhdWx0TWVtb2l6ZSxcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIChcbiAgICAgICAgczE6IFNldDxzdHJpbmc+IHwgdW5kZWZpbmVkLFxuICAgICAgICBzMjogU2V0PHN0cmluZz4gfCB1bmRlZmluZWQsXG4gICAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgICApID0+IHtcbiAgICAgICAgaWYgKHMxID09PSBzMikgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmIChzMSA9PSBudWxsIHx8IHMyID09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHMxLnNpemUgIT09IHMyLnNpemUpIHJldHVybiBmYWxzZTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHMxKSBpZiAoIXMyLmhhcyhpdGVtKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0sXG4gICAgKShcbiAgICAgIHRoaXMuX2dldExvY2F0aW9uSWRzSW5WaWV3cG9ydCxcbiAgICAgIChsb2NhdGlvbklkczogU2V0PHN0cmluZz4gfCB1bmRlZmluZWQpID0+IHtcbiAgICAgICAgaWYgKCFsb2NhdGlvbklkcykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIGxvY2F0aW9uSWRzO1xuICAgICAgfSxcbiAgICApO1xuXG4gIGdldFRvdGFsVW5maWx0ZXJlZENvdW50OiBTZWxlY3RvcjxMLCBGLCBudW1iZXIgfCB1bmRlZmluZWQ+ID0gY3JlYXRlU2VsZWN0b3IoXG4gICAgdGhpcy5nZXRTb3J0ZWRGbG93c0Zvcktub3duTG9jYXRpb25zLFxuICAgIChmbG93cykgPT4ge1xuICAgICAgaWYgKCFmbG93cykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIHJldHVybiBmbG93cy5yZWR1Y2UoXG4gICAgICAgIChtLCBmbG93KSA9PiBtICsgdGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd01hZ25pdHVkZShmbG93KSxcbiAgICAgICAgMCxcbiAgICAgICk7XG4gICAgfSxcbiAgKTtcblxuICBnZXRUb3RhbEZpbHRlcmVkQ291bnQ6IFNlbGVjdG9yPEwsIEYsIG51bWJlciB8IHVuZGVmaW5lZD4gPSBjcmVhdGVTZWxlY3RvcihcbiAgICB0aGlzLmdldFNvcnRlZEFnZ3JlZ2F0ZWRGaWx0ZXJlZEZsb3dzLFxuICAgIHRoaXMuZ2V0U2VsZWN0ZWRMb2NhdGlvbnNTZXQsXG4gICAgdGhpcy5nZXRMb2NhdGlvbkZpbHRlck1vZGUsXG4gICAgKGZsb3dzLCBzZWxlY3RlZExvY2F0aW9uU2V0LCBsb2NhdGlvbkZpbHRlck1vZGUpID0+IHtcbiAgICAgIGlmICghZmxvd3MpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICBjb25zdCBjb3VudCA9IGZsb3dzLnJlZHVjZSgobSwgZmxvdykgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdGhpcy5pc0Zsb3dJblNlbGVjdGlvbihmbG93LCBzZWxlY3RlZExvY2F0aW9uU2V0LCBsb2NhdGlvbkZpbHRlck1vZGUpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiBtICsgdGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd01hZ25pdHVkZShmbG93KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbTtcbiAgICAgIH0sIDApO1xuICAgICAgcmV0dXJuIGNvdW50O1xuICAgIH0sXG4gICk7XG5cbiAgX2dldExvY2F0aW9uVG90YWxzRXh0ZW50OiBTZWxlY3RvcjxMLCBGLCBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkPiA9XG4gICAgY3JlYXRlU2VsZWN0b3IodGhpcy5nZXRMb2NhdGlvblRvdGFscywgKGxvY2F0aW9uVG90YWxzKSA9PlxuICAgICAgY2FsY0xvY2F0aW9uVG90YWxzRXh0ZW50KGxvY2F0aW9uVG90YWxzLCB1bmRlZmluZWQpLFxuICAgICk7XG5cbiAgX2dldExvY2F0aW9uVG90YWxzRm9yVmlld3BvcnRFeHRlbnQ6IFNlbGVjdG9yPFxuICAgIEwsXG4gICAgRixcbiAgICBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkXG4gID4gPSBjcmVhdGVTZWxlY3RvcihcbiAgICB0aGlzLmdldExvY2F0aW9uVG90YWxzLFxuICAgIHRoaXMuZ2V0TG9jYXRpb25JZHNJblZpZXdwb3J0LFxuICAgIChsb2NhdGlvblRvdGFscywgbG9jYXRpb25zSW5WaWV3cG9ydCkgPT5cbiAgICAgIGNhbGNMb2NhdGlvblRvdGFsc0V4dGVudChsb2NhdGlvblRvdGFscywgbG9jYXRpb25zSW5WaWV3cG9ydCksXG4gICk7XG5cbiAgZ2V0TG9jYXRpb25Ub3RhbHNFeHRlbnQgPSAoXG4gICAgc3RhdGU6IEZsb3dtYXBTdGF0ZSxcbiAgICBwcm9wczogRmxvd21hcERhdGE8TCwgRj4sXG4gICk6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQgPT4ge1xuICAgIGlmIChzdGF0ZS5zZXR0aW5ncy5hZGFwdGl2ZVNjYWxlc0VuYWJsZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9nZXRMb2NhdGlvblRvdGFsc0ZvclZpZXdwb3J0RXh0ZW50KHN0YXRlLCBwcm9wcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLl9nZXRMb2NhdGlvblRvdGFsc0V4dGVudChzdGF0ZSwgcHJvcHMpO1xuICAgIH1cbiAgfTtcblxuICBnZXRGbG93c0ZvckZsb3dtYXBMYXllcjogU2VsZWN0b3I8TCwgRiwgKEYgfCBBZ2dyZWdhdGVGbG93KVtdIHwgdW5kZWZpbmVkPiA9XG4gICAgY3JlYXRlU2VsZWN0b3IoXG4gICAgICB0aGlzLmdldFNvcnRlZEFnZ3JlZ2F0ZWRGaWx0ZXJlZEZsb3dzLFxuICAgICAgdGhpcy5nZXRMb2NhdGlvbklkc0luVmlld3BvcnQsXG4gICAgICB0aGlzLmdldFNlbGVjdGVkTG9jYXRpb25zU2V0LFxuICAgICAgdGhpcy5nZXRMb2NhdGlvbkZpbHRlck1vZGUsXG4gICAgICB0aGlzLmdldE1heFRvcEZsb3dzRGlzcGxheU51bSxcbiAgICAgIChcbiAgICAgICAgZmxvd3MsXG4gICAgICAgIGxvY2F0aW9uSWRzSW5WaWV3cG9ydCxcbiAgICAgICAgc2VsZWN0ZWRMb2NhdGlvbnNTZXQsXG4gICAgICAgIGxvY2F0aW9uRmlsdGVyTW9kZSxcbiAgICAgICAgbWF4VG9wRmxvd3NEaXNwbGF5TnVtLFxuICAgICAgKSA9PiB7XG4gICAgICAgIGlmICghZmxvd3MgfHwgIWxvY2F0aW9uSWRzSW5WaWV3cG9ydCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgcGlja2VkOiAoRiB8IEFnZ3JlZ2F0ZUZsb3cpW10gPSBbXTtcbiAgICAgICAgbGV0IHBpY2tlZENvdW50ID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBmbG93IG9mIGZsb3dzKSB7XG4gICAgICAgICAgY29uc3Qgb3JpZ2luID0gdGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd09yaWdpbklkKGZsb3cpO1xuICAgICAgICAgIGNvbnN0IGRlc3QgPSB0aGlzLmFjY2Vzc29ycy5nZXRGbG93RGVzdElkKGZsb3cpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGxvY2F0aW9uSWRzSW5WaWV3cG9ydC5oYXMob3JpZ2luKSB8fFxuICAgICAgICAgICAgbG9jYXRpb25JZHNJblZpZXdwb3J0LmhhcyhkZXN0KVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICB0aGlzLmlzRmxvd0luU2VsZWN0aW9uKFxuICAgICAgICAgICAgICAgIGZsb3csXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRMb2NhdGlvbnNTZXQsXG4gICAgICAgICAgICAgICAgbG9jYXRpb25GaWx0ZXJNb2RlLFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgaWYgKG9yaWdpbiAhPT0gZGVzdCkge1xuICAgICAgICAgICAgICAgIC8vIGV4Y2x1ZGUgc2VsZi1sb29wc1xuICAgICAgICAgICAgICAgIHBpY2tlZC5wdXNoKGZsb3cpO1xuICAgICAgICAgICAgICAgIHBpY2tlZENvdW50Kys7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gT25seSBrZWVwIHRvcFxuICAgICAgICAgIGlmIChwaWNrZWRDb3VudCA+IG1heFRvcEZsb3dzRGlzcGxheU51bSkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXNzdW1pbmcgdGhleSBhcmUgc29ydGVkIGluIGRlc2NlbmRpbmcgb3JkZXIsXG4gICAgICAgIC8vIHdlIG5lZWQgYXNjZW5kaW5nIGZvciByZW5kZXJpbmdcbiAgICAgICAgcmV0dXJuIHBpY2tlZC5yZXZlcnNlKCk7XG4gICAgICB9LFxuICAgICk7XG5cbiAgX2dldEZsb3dNYWduaXR1ZGVFeHRlbnQ6IFNlbGVjdG9yPEwsIEYsIFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQ+ID1cbiAgICBjcmVhdGVTZWxlY3RvcihcbiAgICAgIHRoaXMuZ2V0U29ydGVkQWdncmVnYXRlZEZpbHRlcmVkRmxvd3MsXG4gICAgICB0aGlzLmdldFNlbGVjdGVkTG9jYXRpb25zU2V0LFxuICAgICAgdGhpcy5nZXRMb2NhdGlvbkZpbHRlck1vZGUsXG4gICAgICAoZmxvd3MsIHNlbGVjdGVkTG9jYXRpb25zU2V0LCBsb2NhdGlvbkZpbHRlck1vZGUpID0+IHtcbiAgICAgICAgaWYgKCFmbG93cykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHJ2OiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKGNvbnN0IGYgb2YgZmxvd3MpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmFjY2Vzc29ycy5nZXRGbG93T3JpZ2luSWQoZikgIT09XG4gICAgICAgICAgICAgIHRoaXMuYWNjZXNzb3JzLmdldEZsb3dEZXN0SWQoZikgJiZcbiAgICAgICAgICAgIHRoaXMuaXNGbG93SW5TZWxlY3Rpb24oZiwgc2VsZWN0ZWRMb2NhdGlvbnNTZXQsIGxvY2F0aW9uRmlsdGVyTW9kZSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gdGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd01hZ25pdHVkZShmKTtcbiAgICAgICAgICAgIGlmIChydiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgIHJ2ID0gW2NvdW50LCBjb3VudF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoY291bnQgPCBydlswXSkgcnZbMF0gPSBjb3VudDtcbiAgICAgICAgICAgICAgaWYgKGNvdW50ID4gcnZbMV0pIHJ2WzFdID0gY291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydjtcbiAgICAgIH0sXG4gICAgKTtcblxuICBfZ2V0QWRhcHRpdmVGbG93TWFnbml0dWRlRXh0ZW50OiBTZWxlY3RvcjxcbiAgICBMLFxuICAgIEYsXG4gICAgW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZFxuICA+ID0gY3JlYXRlU2VsZWN0b3IodGhpcy5nZXRGbG93c0ZvckZsb3dtYXBMYXllciwgKGZsb3dzKSA9PiB7XG4gICAgaWYgKCFmbG93cykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBjb25zdCBydiA9IGV4dGVudChmbG93cywgdGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd01hZ25pdHVkZSk7XG4gICAgcmV0dXJuIHJ2WzBdICE9PSB1bmRlZmluZWQgJiYgcnZbMV0gIT09IHVuZGVmaW5lZCA/IHJ2IDogdW5kZWZpbmVkO1xuICB9KTtcblxuICBnZXRGbG93TWFnbml0dWRlRXh0ZW50ID0gKFxuICAgIHN0YXRlOiBGbG93bWFwU3RhdGUsXG4gICAgcHJvcHM6IEZsb3dtYXBEYXRhPEwsIEY+LFxuICApOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkID0+IHtcbiAgICBpZiAoc3RhdGUuc2V0dGluZ3MuYWRhcHRpdmVTY2FsZXNFbmFibGVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZ2V0QWRhcHRpdmVGbG93TWFnbml0dWRlRXh0ZW50KHN0YXRlLCBwcm9wcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLl9nZXRGbG93TWFnbml0dWRlRXh0ZW50KHN0YXRlLCBwcm9wcyk7XG4gICAgfVxuICB9O1xuXG4gIGdldExvY2F0aW9uTWF4QWJzVG90YWxHZXR0ZXIgPSBjcmVhdGVTZWxlY3RvcihcbiAgICB0aGlzLmdldExvY2F0aW9uVG90YWxzLFxuICAgIChsb2NhdGlvblRvdGFscykgPT4ge1xuICAgICAgcmV0dXJuIChsb2NhdGlvbklkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgdG90YWwgPSBsb2NhdGlvblRvdGFscz8uZ2V0KGxvY2F0aW9uSWQpO1xuICAgICAgICBpZiAoIXRvdGFsKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoXG4gICAgICAgICAgTWF0aC5hYnModG90YWwuaW5jb21pbmdDb3VudCArIHRvdGFsLmludGVybmFsQ291bnQpLFxuICAgICAgICAgIE1hdGguYWJzKHRvdGFsLm91dGdvaW5nQ291bnQgKyB0b3RhbC5pbnRlcm5hbENvdW50KSxcbiAgICAgICAgKTtcbiAgICAgIH07XG4gICAgfSxcbiAgKTtcblxuICBnZXRGbG93VGhpY2tuZXNzU2NhbGUgPSBjcmVhdGVTZWxlY3RvcihcbiAgICB0aGlzLmdldEZsb3dNYWduaXR1ZGVFeHRlbnQsXG4gICAgZ2V0Rmxvd1RoaWNrbmVzc1NjYWxlLFxuICApO1xuXG4gIGdldENpcmNsZVNpemVTY2FsZSA9IGNyZWF0ZVNlbGVjdG9yKFxuICAgIHRoaXMuZ2V0TWF4TG9jYXRpb25DaXJjbGVTaXplLFxuICAgIHRoaXMuZ2V0TG9jYXRpb25Ub3RhbHNFbmFibGVkLFxuICAgIHRoaXMuZ2V0TG9jYXRpb25Ub3RhbHNFeHRlbnQsXG4gICAgKG1heExvY2F0aW9uQ2lyY2xlU2l6ZSwgbG9jYXRpb25Ub3RhbHNFbmFibGVkLCBsb2NhdGlvblRvdGFsc0V4dGVudCkgPT4ge1xuICAgICAgaWYgKCFsb2NhdGlvblRvdGFsc0VuYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuICgpID0+IG1heExvY2F0aW9uQ2lyY2xlU2l6ZTtcbiAgICAgIH1cbiAgICAgIGlmICghbG9jYXRpb25Ub3RhbHNFeHRlbnQpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gc2NhbGVTcXJ0KClcbiAgICAgICAgLnJhbmdlKFswLCBtYXhMb2NhdGlvbkNpcmNsZVNpemVdKVxuICAgICAgICAuZG9tYWluKFtcbiAgICAgICAgICAwLFxuICAgICAgICAgIC8vIHNob3VsZCBzdXBwb3J0IGRpZmYgbW9kZSB0b29cbiAgICAgICAgICBNYXRoLm1heC5hcHBseShcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBsb2NhdGlvblRvdGFsc0V4dGVudC5tYXAoKHg6IG51bWJlciB8IHVuZGVmaW5lZCkgPT5cbiAgICAgICAgICAgICAgTWF0aC5hYnMoeCB8fCAwKSxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgKSxcbiAgICAgICAgXSk7XG4gICAgfSxcbiAgKTtcblxuICBnZXRJbkNpcmNsZVNpemVHZXR0ZXIgPSBjcmVhdGVTZWxlY3RvcihcbiAgICB0aGlzLmdldENpcmNsZVNpemVTY2FsZSxcbiAgICB0aGlzLmdldExvY2F0aW9uVG90YWxzLFxuICAgIChjaXJjbGVTaXplU2NhbGUsIGxvY2F0aW9uVG90YWxzKSA9PiB7XG4gICAgICByZXR1cm4gKGxvY2F0aW9uSWQ6IHN0cmluZyB8IG51bWJlcikgPT4ge1xuICAgICAgICBjb25zdCB0b3RhbCA9IGxvY2F0aW9uVG90YWxzPy5nZXQobG9jYXRpb25JZCk7XG4gICAgICAgIGlmICh0b3RhbCAmJiBjaXJjbGVTaXplU2NhbGUpIHtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgY2lyY2xlU2l6ZVNjYWxlKFxuICAgICAgICAgICAgICBNYXRoLmFicyh0b3RhbC5pbmNvbWluZ0NvdW50ICsgdG90YWwuaW50ZXJuYWxDb3VudCksXG4gICAgICAgICAgICApIHx8IDBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfTtcbiAgICB9LFxuICApO1xuXG4gIGdldE91dENpcmNsZVNpemVHZXR0ZXIgPSBjcmVhdGVTZWxlY3RvcihcbiAgICB0aGlzLmdldENpcmNsZVNpemVTY2FsZSxcbiAgICB0aGlzLmdldExvY2F0aW9uVG90YWxzLFxuICAgIChjaXJjbGVTaXplU2NhbGUsIGxvY2F0aW9uVG90YWxzKSA9PiB7XG4gICAgICByZXR1cm4gKGxvY2F0aW9uSWQ6IHN0cmluZyB8IG51bWJlcikgPT4ge1xuICAgICAgICBjb25zdCB0b3RhbCA9IGxvY2F0aW9uVG90YWxzPy5nZXQobG9jYXRpb25JZCk7XG4gICAgICAgIGlmICh0b3RhbCAmJiBjaXJjbGVTaXplU2NhbGUpIHtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgY2lyY2xlU2l6ZVNjYWxlKFxuICAgICAgICAgICAgICBNYXRoLmFicyh0b3RhbC5vdXRnb2luZ0NvdW50ICsgdG90YWwuaW50ZXJuYWxDb3VudCksXG4gICAgICAgICAgICApIHx8IDBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfTtcbiAgICB9LFxuICApO1xuXG4gIGdldFNvcnRlZExvY2F0aW9uc0Zvclpvb206IFNlbGVjdG9yPEwsIEYsIExbXSB8IENsdXN0ZXJOb2RlW10gfCB1bmRlZmluZWQ+ID1cbiAgICBjcmVhdGVTZWxlY3RvcihcbiAgICAgIHRoaXMuZ2V0TG9jYXRpb25zRm9yWm9vbSxcbiAgICAgIHRoaXMuZ2V0SW5DaXJjbGVTaXplR2V0dGVyLFxuICAgICAgdGhpcy5nZXRPdXRDaXJjbGVTaXplR2V0dGVyLFxuICAgICAgKGxvY2F0aW9ucywgZ2V0SW5DaXJjbGVTaXplLCBnZXRPdXRDaXJjbGVTaXplKSA9PiB7XG4gICAgICAgIGlmICghbG9jYXRpb25zKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBuZXh0TG9jYXRpb25zID0gWy4uLmxvY2F0aW9uc10gYXMgTFtdIHwgQ2x1c3Rlck5vZGVbXTtcbiAgICAgICAgcmV0dXJuIG5leHRMb2NhdGlvbnMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgIGNvbnN0IGlkQSA9IHRoaXMuYWNjZXNzb3JzLmdldExvY2F0aW9uSWQoYSk7XG4gICAgICAgICAgY29uc3QgaWRCID0gdGhpcy5hY2Nlc3NvcnMuZ2V0TG9jYXRpb25JZChiKTtcbiAgICAgICAgICByZXR1cm4gYXNjZW5kaW5nKFxuICAgICAgICAgICAgTWF0aC5tYXgoZ2V0SW5DaXJjbGVTaXplKGlkQSksIGdldE91dENpcmNsZVNpemUoaWRBKSksXG4gICAgICAgICAgICBNYXRoLm1heChnZXRJbkNpcmNsZVNpemUoaWRCKSwgZ2V0T3V0Q2lyY2xlU2l6ZShpZEIpKSxcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgKTtcblxuICBnZXRMb2NhdGlvbnNGb3JGbG93bWFwTGF5ZXI6IFNlbGVjdG9yPFxuICAgIEwsXG4gICAgRixcbiAgICBBcnJheTxMIHwgQ2x1c3Rlck5vZGU+IHwgdW5kZWZpbmVkXG4gID4gPSBjcmVhdGVTZWxlY3RvcihcbiAgICB0aGlzLmdldFNvcnRlZExvY2F0aW9uc0Zvclpvb20sXG4gICAgLy8gdGhpcy5nZXRMb2NhdGlvbklkc0luVmlld3BvcnQsXG4gICAgKFxuICAgICAgbG9jYXRpb25zLFxuICAgICAgLy8gbG9jYXRpb25JZHNJblZpZXdwb3J0XG4gICAgKSA9PiB7XG4gICAgICAvLyBpZiAoIWxvY2F0aW9ucykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIC8vIGlmICghbG9jYXRpb25JZHNJblZpZXdwb3J0KSByZXR1cm4gbG9jYXRpb25zO1xuICAgICAgLy8gaWYgKGxvY2F0aW9uSWRzSW5WaWV3cG9ydC5zaXplID09PSBsb2NhdGlvbnMubGVuZ3RoKSByZXR1cm4gbG9jYXRpb25zO1xuICAgICAgLy8gY29uc3QgZmlsdGVyZWQgPSBbXTtcbiAgICAgIC8vIGZvciAoY29uc3QgbG9jIG9mIGxvY2F0aW9ucykge1xuICAgICAgLy8gICBpZiAobG9jYXRpb25JZHNJblZpZXdwb3J0Lmhhcyhsb2MuaWQpKSB7XG4gICAgICAvLyAgICAgZmlsdGVyZWQucHVzaChsb2MpO1xuICAgICAgLy8gICB9XG4gICAgICAvLyB9XG4gICAgICAvLyByZXR1cm4gZmlsdGVyZWQ7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAvLyByZXR1cm4gbG9jYXRpb25zLmZpbHRlcihcbiAgICAgIC8vICAgKGxvYzogTCB8IENsdXN0ZXJOb2RlKSA9PiBsb2NhdGlvbklkc0luVmlld3BvcnQhLmhhcyhsb2MuaWQpXG4gICAgICAvLyApO1xuICAgICAgLy8gVE9ETzogcmV0dXJuIGxvY2F0aW9uIGluIHZpZXdwb3J0ICsgXCJjb25uZWN0ZWRcIiBvbmVzXG4gICAgICByZXR1cm4gbG9jYXRpb25zO1xuICAgIH0sXG4gICk7XG5cbiAgZ2V0TG9jYXRpb25zRm9yRmxvd21hcExheWVyQnlJZDogU2VsZWN0b3I8XG4gICAgTCxcbiAgICBGLFxuICAgIE1hcDxzdHJpbmcsIEwgfCBDbHVzdGVyTm9kZT4gfCB1bmRlZmluZWRcbiAgPiA9IGNyZWF0ZVNlbGVjdG9yKHRoaXMuZ2V0TG9jYXRpb25zRm9yRmxvd21hcExheWVyLCAobG9jYXRpb25zKSA9PiB7XG4gICAgaWYgKCFsb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIGxvY2F0aW9ucy5yZWR1Y2UoXG4gICAgICAobSwgZCkgPT4gKG0uc2V0KHRoaXMuYWNjZXNzb3JzLmdldExvY2F0aW9uSWQoZCksIGQpLCBtKSxcbiAgICAgIG5ldyBNYXAoKSxcbiAgICApO1xuICB9KTtcblxuICBnZXRMb2NhdGlvbk9yQ2x1c3RlckJ5SWRHZXR0ZXIgPSBjcmVhdGVTZWxlY3RvcihcbiAgICB0aGlzLmdldENsdXN0ZXJJbmRleCxcbiAgICB0aGlzLmdldExvY2F0aW9uc0J5SWQsXG4gICAgKGNsdXN0ZXJJbmRleCwgbG9jYXRpb25zQnlJZCkgPT4ge1xuICAgICAgcmV0dXJuIChpZDogc3RyaW5nIHwgbnVtYmVyKSA9PlxuICAgICAgICBjbHVzdGVySW5kZXg/LmdldENsdXN0ZXJCeUlkKGlkKSA/PyBsb2NhdGlvbnNCeUlkPy5nZXQoaWQpO1xuICAgIH0sXG4gICk7XG5cbiAgZ2V0TGF5ZXJzRGF0YTogU2VsZWN0b3I8TCwgRiwgTGF5ZXJzRGF0YT4gPSBjcmVhdGVTZWxlY3RvcihcbiAgICB0aGlzLmdldExvY2F0aW9uc0ZvckZsb3dtYXBMYXllcixcbiAgICB0aGlzLmdldEZsb3dzRm9yRmxvd21hcExheWVyLFxuICAgIHRoaXMuZ2V0Rmxvd21hcENvbG9yc1JHQkEsXG4gICAgdGhpcy5nZXRMb2NhdGlvbnNGb3JGbG93bWFwTGF5ZXJCeUlkLFxuICAgIHRoaXMuZ2V0TG9jYXRpb25JZHNJblZpZXdwb3J0LFxuICAgIHRoaXMuZ2V0SW5DaXJjbGVTaXplR2V0dGVyLFxuICAgIHRoaXMuZ2V0T3V0Q2lyY2xlU2l6ZUdldHRlcixcbiAgICB0aGlzLmdldEZsb3dUaGlja25lc3NTY2FsZSxcbiAgICB0aGlzLmdldEFuaW1hdGUsXG4gICAgdGhpcy5nZXRMb2NhdGlvbkxhYmVsc0VuYWJsZWQsXG4gICAgKFxuICAgICAgbG9jYXRpb25zLFxuICAgICAgZmxvd3MsXG4gICAgICBmbG93bWFwQ29sb3JzLFxuICAgICAgbG9jYXRpb25zQnlJZCxcbiAgICAgIGxvY2F0aW9uSWRzSW5WaWV3cG9ydCxcbiAgICAgIGdldEluQ2lyY2xlU2l6ZSxcbiAgICAgIGdldE91dENpcmNsZVNpemUsXG4gICAgICBmbG93VGhpY2tuZXNzU2NhbGUsXG4gICAgICBhbmltYXRpb25FbmFibGVkLFxuICAgICAgbG9jYXRpb25MYWJlbHNFbmFibGVkLFxuICAgICkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX3ByZXBhcmVMYXllcnNEYXRhKFxuICAgICAgICBsb2NhdGlvbnMsXG4gICAgICAgIGZsb3dzLFxuICAgICAgICBmbG93bWFwQ29sb3JzLFxuICAgICAgICBsb2NhdGlvbnNCeUlkLFxuICAgICAgICBsb2NhdGlvbklkc0luVmlld3BvcnQsXG4gICAgICAgIGdldEluQ2lyY2xlU2l6ZSxcbiAgICAgICAgZ2V0T3V0Q2lyY2xlU2l6ZSxcbiAgICAgICAgZmxvd1RoaWNrbmVzc1NjYWxlLFxuICAgICAgICBhbmltYXRpb25FbmFibGVkLFxuICAgICAgICBsb2NhdGlvbkxhYmVsc0VuYWJsZWQsXG4gICAgICApO1xuICAgIH0sXG4gICk7XG5cbiAgcHJlcGFyZUxheWVyc0RhdGEoc3RhdGU6IEZsb3dtYXBTdGF0ZSwgcHJvcHM6IEZsb3dtYXBEYXRhPEwsIEY+KTogTGF5ZXJzRGF0YSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gdGhpcy5nZXRMb2NhdGlvbnNGb3JGbG93bWFwTGF5ZXIoc3RhdGUsIHByb3BzKSB8fCBbXTtcbiAgICBjb25zdCBmbG93cyA9IHRoaXMuZ2V0Rmxvd3NGb3JGbG93bWFwTGF5ZXIoc3RhdGUsIHByb3BzKSB8fCBbXTtcbiAgICBjb25zdCBmbG93bWFwQ29sb3JzID0gdGhpcy5nZXRGbG93bWFwQ29sb3JzUkdCQShzdGF0ZSwgcHJvcHMpO1xuICAgIGNvbnN0IGxvY2F0aW9uc0J5SWQgPSB0aGlzLmdldExvY2F0aW9uc0ZvckZsb3dtYXBMYXllckJ5SWQoc3RhdGUsIHByb3BzKTtcbiAgICBjb25zdCBsb2NhdGlvbklkc0luVmlld3BvcnQgPSB0aGlzLmdldExvY2F0aW9uSWRzSW5WaWV3cG9ydChzdGF0ZSwgcHJvcHMpO1xuICAgIGNvbnN0IGdldEluQ2lyY2xlU2l6ZSA9IHRoaXMuZ2V0SW5DaXJjbGVTaXplR2V0dGVyKHN0YXRlLCBwcm9wcyk7XG4gICAgY29uc3QgZ2V0T3V0Q2lyY2xlU2l6ZSA9IHRoaXMuZ2V0T3V0Q2lyY2xlU2l6ZUdldHRlcihzdGF0ZSwgcHJvcHMpO1xuICAgIGNvbnN0IGZsb3dUaGlja25lc3NTY2FsZSA9IHRoaXMuZ2V0Rmxvd1RoaWNrbmVzc1NjYWxlKHN0YXRlLCBwcm9wcyk7XG4gICAgY29uc3QgbG9jYXRpb25MYWJlbHNFbmFibGVkID0gdGhpcy5nZXRMb2NhdGlvbkxhYmVsc0VuYWJsZWQoc3RhdGUsIHByb3BzKTtcbiAgICByZXR1cm4gdGhpcy5fcHJlcGFyZUxheWVyc0RhdGEoXG4gICAgICBsb2NhdGlvbnMsXG4gICAgICBmbG93cyxcbiAgICAgIGZsb3dtYXBDb2xvcnMsXG4gICAgICBsb2NhdGlvbnNCeUlkLFxuICAgICAgbG9jYXRpb25JZHNJblZpZXdwb3J0LFxuICAgICAgZ2V0SW5DaXJjbGVTaXplLFxuICAgICAgZ2V0T3V0Q2lyY2xlU2l6ZSxcbiAgICAgIGZsb3dUaGlja25lc3NTY2FsZSxcbiAgICAgIHN0YXRlLnNldHRpbmdzLmFuaW1hdGlvbkVuYWJsZWQsXG4gICAgICBsb2NhdGlvbkxhYmVsc0VuYWJsZWQsXG4gICAgKTtcbiAgfVxuXG4gIF9wcmVwYXJlTGF5ZXJzRGF0YShcbiAgICBsb2NhdGlvbnM6IChMIHwgQ2x1c3Rlck5vZGUpW10gfCB1bmRlZmluZWQsXG4gICAgZmxvd3M6IChGIHwgQWdncmVnYXRlRmxvdylbXSB8IHVuZGVmaW5lZCxcbiAgICBmbG93bWFwQ29sb3JzOiBEaWZmQ29sb3JzUkdCQSB8IENvbG9yc1JHQkEsXG4gICAgbG9jYXRpb25zQnlJZDogTWFwPHN0cmluZyB8IG51bWJlciwgTCB8IENsdXN0ZXJOb2RlPiB8IHVuZGVmaW5lZCxcbiAgICBsb2NhdGlvbklkc0luVmlld3BvcnQ6IFNldDxzdHJpbmcgfCBudW1iZXI+IHwgdW5kZWZpbmVkLFxuICAgIGdldEluQ2lyY2xlU2l6ZTogKGxvY2F0aW9uSWQ6IHN0cmluZyB8IG51bWJlcikgPT4gbnVtYmVyLFxuICAgIGdldE91dENpcmNsZVNpemU6IChsb2NhdGlvbklkOiBzdHJpbmcgfCBudW1iZXIpID0+IG51bWJlcixcbiAgICBmbG93VGhpY2tuZXNzU2NhbGU6IFNjYWxlTGluZWFyPG51bWJlciwgbnVtYmVyLCBuZXZlcj4gfCB1bmRlZmluZWQsXG4gICAgYW5pbWF0aW9uRW5hYmxlZDogYm9vbGVhbixcbiAgICBsb2NhdGlvbkxhYmVsc0VuYWJsZWQ6IGJvb2xlYW4sXG4gICk6IExheWVyc0RhdGEge1xuICAgIGlmICghbG9jYXRpb25zKSBsb2NhdGlvbnMgPSBbXTtcbiAgICBpZiAoIWZsb3dzKSBmbG93cyA9IFtdO1xuICAgIGNvbnN0IHtcbiAgICAgIGdldEZsb3dPcmlnaW5JZCxcbiAgICAgIGdldEZsb3dEZXN0SWQsXG4gICAgICBnZXRGbG93TWFnbml0dWRlLFxuICAgICAgZ2V0TG9jYXRpb25JZCxcbiAgICAgIGdldExvY2F0aW9uTG9uLFxuICAgICAgZ2V0TG9jYXRpb25MYXQsXG4gICAgICBnZXRMb2NhdGlvbk5hbWUsXG4gICAgfSA9IHRoaXMuYWNjZXNzb3JzO1xuXG4gICAgY29uc3QgZmxvd01hZ25pdHVkZUV4dGVudCA9IGV4dGVudChmbG93cywgKGYpID0+IGdldEZsb3dNYWduaXR1ZGUoZikpIGFzIFtcbiAgICAgIG51bWJlcixcbiAgICAgIG51bWJlcixcbiAgICBdO1xuICAgIGNvbnN0IGZsb3dDb2xvclNjYWxlID0gZ2V0Rmxvd0NvbG9yU2NhbGUoXG4gICAgICBmbG93bWFwQ29sb3JzLFxuICAgICAgZmxvd01hZ25pdHVkZUV4dGVudCxcbiAgICAgIGZhbHNlLFxuICAgICk7XG5cbiAgICAvLyBVc2luZyBhIGdlbmVyYXRvciBoZXJlIGhlbHBzIHRvIGF2b2lkIGNyZWF0aW5nIGludGVybWVkaWFyeSBhcnJheXNcbiAgICBjb25zdCBjaXJjbGVQb3NpdGlvbnMgPSBGbG9hdDMyQXJyYXkuZnJvbShcbiAgICAgIChmdW5jdGlvbiogKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGxvY2F0aW9uIG9mIGxvY2F0aW9ucykge1xuICAgICAgICAgIHlpZWxkIGdldExvY2F0aW9uTG9uKGxvY2F0aW9uKTtcbiAgICAgICAgICB5aWVsZCBnZXRMb2NhdGlvbkxhdChsb2NhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pKCksXG4gICAgKTtcblxuICAgIC8vIFRPRE86IGRpZmYgbW9kZVxuICAgIGNvbnN0IGNpcmNsZUNvbG9yID0gaXNEaWZmQ29sb3JzUkdCQShmbG93bWFwQ29sb3JzKVxuICAgICAgPyBmbG93bWFwQ29sb3JzLnBvc2l0aXZlLmxvY2F0aW9uQ2lyY2xlcy5pbm5lclxuICAgICAgOiBmbG93bWFwQ29sb3JzLmxvY2F0aW9uQ2lyY2xlcy5pbm5lcjtcblxuICAgIGNvbnN0IGNpcmNsZUNvbG9ycyA9IFVpbnQ4QXJyYXkuZnJvbShcbiAgICAgIChmdW5jdGlvbiogKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGxvY2F0aW9uIG9mIGxvY2F0aW9ucykge1xuICAgICAgICAgIHlpZWxkKiBjaXJjbGVDb2xvcjtcbiAgICAgICAgfVxuICAgICAgfSkoKSxcbiAgICApO1xuXG4gICAgY29uc3QgaW5DaXJjbGVSYWRpaSA9IEZsb2F0MzJBcnJheS5mcm9tKFxuICAgICAgKGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGZvciAoY29uc3QgbG9jYXRpb24gb2YgbG9jYXRpb25zKSB7XG4gICAgICAgICAgY29uc3QgaWQgPSBnZXRMb2NhdGlvbklkKGxvY2F0aW9uKTtcbiAgICAgICAgICB5aWVsZCBsb2NhdGlvbklkc0luVmlld3BvcnQ/LmhhcyhpZCkgPyBnZXRJbkNpcmNsZVNpemUoaWQpIDogMS4wO1xuICAgICAgICB9XG4gICAgICB9KSgpLFxuICAgICk7XG4gICAgY29uc3Qgb3V0Q2lyY2xlUmFkaWkgPSBGbG9hdDMyQXJyYXkuZnJvbShcbiAgICAgIChmdW5jdGlvbiogKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGxvY2F0aW9uIG9mIGxvY2F0aW9ucykge1xuICAgICAgICAgIGNvbnN0IGlkID0gZ2V0TG9jYXRpb25JZChsb2NhdGlvbik7XG4gICAgICAgICAgeWllbGQgbG9jYXRpb25JZHNJblZpZXdwb3J0Py5oYXMoaWQpID8gZ2V0T3V0Q2lyY2xlU2l6ZShpZCkgOiAxLjA7XG4gICAgICAgIH1cbiAgICAgIH0pKCksXG4gICAgKTtcblxuICAgIGNvbnN0IHNvdXJjZVBvc2l0aW9ucyA9IEZsb2F0MzJBcnJheS5mcm9tKFxuICAgICAgKGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGZvciAoY29uc3QgZmxvdyBvZiBmbG93cykge1xuICAgICAgICAgIGNvbnN0IGxvYyA9IGxvY2F0aW9uc0J5SWQ/LmdldChnZXRGbG93T3JpZ2luSWQoZmxvdykpO1xuICAgICAgICAgIHlpZWxkIGxvYyA/IGdldExvY2F0aW9uTG9uKGxvYykgOiAwO1xuICAgICAgICAgIHlpZWxkIGxvYyA/IGdldExvY2F0aW9uTGF0KGxvYykgOiAwO1xuICAgICAgICB9XG4gICAgICB9KSgpLFxuICAgICk7XG4gICAgY29uc3QgdGFyZ2V0UG9zaXRpb25zID0gRmxvYXQzMkFycmF5LmZyb20oXG4gICAgICAoZnVuY3Rpb24qICgpIHtcbiAgICAgICAgZm9yIChjb25zdCBmbG93IG9mIGZsb3dzKSB7XG4gICAgICAgICAgY29uc3QgbG9jID0gbG9jYXRpb25zQnlJZD8uZ2V0KGdldEZsb3dEZXN0SWQoZmxvdykpO1xuICAgICAgICAgIHlpZWxkIGxvYyA/IGdldExvY2F0aW9uTG9uKGxvYykgOiAwO1xuICAgICAgICAgIHlpZWxkIGxvYyA/IGdldExvY2F0aW9uTGF0KGxvYykgOiAwO1xuICAgICAgICB9XG4gICAgICB9KSgpLFxuICAgICk7XG4gICAgY29uc3QgdGhpY2tuZXNzZXMgPSBGbG9hdDMyQXJyYXkuZnJvbShcbiAgICAgIChmdW5jdGlvbiogKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGZsb3cgb2YgZmxvd3MpIHtcbiAgICAgICAgICB5aWVsZCBmbG93VGhpY2tuZXNzU2NhbGVcbiAgICAgICAgICAgID8gZmxvd1RoaWNrbmVzc1NjYWxlKGdldEZsb3dNYWduaXR1ZGUoZmxvdykpIHx8IDBcbiAgICAgICAgICAgIDogMDtcbiAgICAgICAgfVxuICAgICAgfSkoKSxcbiAgICApO1xuICAgIGNvbnN0IGVuZHBvaW50T2Zmc2V0cyA9IEZsb2F0MzJBcnJheS5mcm9tKFxuICAgICAgKGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGZvciAoY29uc3QgZmxvdyBvZiBmbG93cykge1xuICAgICAgICAgIGNvbnN0IG9yaWdpbklkID0gZ2V0Rmxvd09yaWdpbklkKGZsb3cpO1xuICAgICAgICAgIGNvbnN0IGRlc3RJZCA9IGdldEZsb3dEZXN0SWQoZmxvdyk7XG4gICAgICAgICAgeWllbGQgTWF0aC5tYXgoZ2V0SW5DaXJjbGVTaXplKG9yaWdpbklkKSwgZ2V0T3V0Q2lyY2xlU2l6ZShvcmlnaW5JZCkpO1xuICAgICAgICAgIHlpZWxkIE1hdGgubWF4KGdldEluQ2lyY2xlU2l6ZShkZXN0SWQpLCBnZXRPdXRDaXJjbGVTaXplKGRlc3RJZCkpO1xuICAgICAgICB9XG4gICAgICB9KSgpLFxuICAgICk7XG4gICAgY29uc3QgZmxvd0xpbmVDb2xvcnMgPSBVaW50OEFycmF5LmZyb20oXG4gICAgICAoZnVuY3Rpb24qICgpIHtcbiAgICAgICAgZm9yIChjb25zdCBmbG93IG9mIGZsb3dzKSB7XG4gICAgICAgICAgeWllbGQqIGZsb3dDb2xvclNjYWxlKGdldEZsb3dNYWduaXR1ZGUoZmxvdykpO1xuICAgICAgICB9XG4gICAgICB9KSgpLFxuICAgICk7XG5cbiAgICBjb25zdCBzdGFnZ2VyaW5nVmFsdWVzID0gYW5pbWF0aW9uRW5hYmxlZFxuICAgICAgPyBGbG9hdDMyQXJyYXkuZnJvbShcbiAgICAgICAgICAoZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZiBvZiBmbG93cykge1xuICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgIHlpZWxkIG5ldyBhbGVhKGAke2dldEZsb3dPcmlnaW5JZChmKX0tJHtnZXRGbG93RGVzdElkKGYpfWApKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkoKSxcbiAgICAgICAgKVxuICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICByZXR1cm4ge1xuICAgICAgY2lyY2xlQXR0cmlidXRlczoge1xuICAgICAgICBsZW5ndGg6IGxvY2F0aW9ucy5sZW5ndGgsXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICBnZXRQb3NpdGlvbjoge3ZhbHVlOiBjaXJjbGVQb3NpdGlvbnMsIHNpemU6IDJ9LFxuICAgICAgICAgIGdldENvbG9yOiB7dmFsdWU6IGNpcmNsZUNvbG9ycywgc2l6ZTogNH0sXG4gICAgICAgICAgZ2V0SW5SYWRpdXM6IHt2YWx1ZTogaW5DaXJjbGVSYWRpaSwgc2l6ZTogMX0sXG4gICAgICAgICAgZ2V0T3V0UmFkaXVzOiB7dmFsdWU6IG91dENpcmNsZVJhZGlpLCBzaXplOiAxfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBsaW5lQXR0cmlidXRlczoge1xuICAgICAgICBsZW5ndGg6IGZsb3dzLmxlbmd0aCxcbiAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgIGdldFNvdXJjZVBvc2l0aW9uOiB7dmFsdWU6IHNvdXJjZVBvc2l0aW9ucywgc2l6ZTogMn0sXG4gICAgICAgICAgZ2V0VGFyZ2V0UG9zaXRpb246IHt2YWx1ZTogdGFyZ2V0UG9zaXRpb25zLCBzaXplOiAyfSxcbiAgICAgICAgICBnZXRUaGlja25lc3M6IHt2YWx1ZTogdGhpY2tuZXNzZXMsIHNpemU6IDF9LFxuICAgICAgICAgIGdldENvbG9yOiB7dmFsdWU6IGZsb3dMaW5lQ29sb3JzLCBzaXplOiA0fSxcbiAgICAgICAgICBnZXRFbmRwb2ludE9mZnNldHM6IHt2YWx1ZTogZW5kcG9pbnRPZmZzZXRzLCBzaXplOiAyfSxcbiAgICAgICAgICAuLi4oc3RhZ2dlcmluZ1ZhbHVlc1xuICAgICAgICAgICAgPyB7Z2V0U3RhZ2dlcmluZzoge3ZhbHVlOiBzdGFnZ2VyaW5nVmFsdWVzLCBzaXplOiAxfX1cbiAgICAgICAgICAgIDoge30pLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIC4uLihsb2NhdGlvbkxhYmVsc0VuYWJsZWRcbiAgICAgICAgPyB7bG9jYXRpb25MYWJlbHM6IGxvY2F0aW9ucy5tYXAoZ2V0TG9jYXRpb25OYW1lKX1cbiAgICAgICAgOiB1bmRlZmluZWQpLFxuICAgIH07XG4gIH1cblxuICBnZXRMb2NhdGlvbnNJbkJib3goXG4gICAgdHJlZTogS0RCdXNoVHJlZSxcbiAgICBiYm94OiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSxcbiAgKTogQXJyYXk8TD4gfCB1bmRlZmluZWQge1xuICAgIGlmICghdHJlZSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICByZXR1cm4gdGhpcy5fZ2V0TG9jYXRpb25zSW5CYm94SW5kaWNlcyh0cmVlLCBiYm94KS5tYXAoXG4gICAgICAoaWR4OiBudW1iZXIpID0+IHRyZWUucG9pbnRzW2lkeF0sXG4gICAgKSBhcyBBcnJheTxMPjtcbiAgfVxuXG4gIF9nZXRMb2NhdGlvbnNJbkJib3hJbmRpY2VzKFxuICAgIHRyZWU6IEtEQnVzaFRyZWUsXG4gICAgYmJveDogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sXG4gICkge1xuICAgIGlmICghdHJlZSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBjb25zdCBbbG9uMSwgbGF0MSwgbG9uMiwgbGF0Ml0gPSBiYm94O1xuICAgIGNvbnN0IFt4MSwgeTEsIHgyLCB5Ml0gPSBbbG5nWChsb24xKSwgbGF0WShsYXQxKSwgbG5nWChsb24yKSwgbGF0WShsYXQyKV07XG4gICAgcmV0dXJuIHRyZWUucmFuZ2UoXG4gICAgICBNYXRoLm1pbih4MSwgeDIpLFxuICAgICAgTWF0aC5taW4oeTEsIHkyKSxcbiAgICAgIE1hdGgubWF4KHgxLCB4MiksXG4gICAgICBNYXRoLm1heCh5MSwgeTIpLFxuICAgICk7XG4gIH1cblxuICBpc0Zsb3dJblNlbGVjdGlvbihcbiAgICBmbG93OiBGIHwgQWdncmVnYXRlRmxvdyxcbiAgICBzZWxlY3RlZExvY2F0aW9uc1NldDogU2V0PHN0cmluZyB8IG51bWJlcj4gfCB1bmRlZmluZWQsXG4gICAgbG9jYXRpb25GaWx0ZXJNb2RlPzogTG9jYXRpb25GaWx0ZXJNb2RlLFxuICApIHtcbiAgICBjb25zdCBvcmlnaW4gPSB0aGlzLmFjY2Vzc29ycy5nZXRGbG93T3JpZ2luSWQoZmxvdyk7XG4gICAgY29uc3QgZGVzdCA9IHRoaXMuYWNjZXNzb3JzLmdldEZsb3dEZXN0SWQoZmxvdyk7XG4gICAgaWYgKHNlbGVjdGVkTG9jYXRpb25zU2V0KSB7XG4gICAgICBzd2l0Y2ggKGxvY2F0aW9uRmlsdGVyTW9kZSkge1xuICAgICAgICBjYXNlIExvY2F0aW9uRmlsdGVyTW9kZS5BTEw6XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHNlbGVjdGVkTG9jYXRpb25zU2V0LmhhcyhvcmlnaW4pIHx8IHNlbGVjdGVkTG9jYXRpb25zU2V0LmhhcyhkZXN0KVxuICAgICAgICAgICk7XG4gICAgICAgIGNhc2UgTG9jYXRpb25GaWx0ZXJNb2RlLkJFVFdFRU46XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHNlbGVjdGVkTG9jYXRpb25zU2V0LmhhcyhvcmlnaW4pICYmIHNlbGVjdGVkTG9jYXRpb25zU2V0LmhhcyhkZXN0KVxuICAgICAgICAgICk7XG4gICAgICAgIGNhc2UgTG9jYXRpb25GaWx0ZXJNb2RlLklOQ09NSU5HOlxuICAgICAgICAgIHJldHVybiBzZWxlY3RlZExvY2F0aW9uc1NldC5oYXMoZGVzdCk7XG4gICAgICAgIGNhc2UgTG9jYXRpb25GaWx0ZXJNb2RlLk9VVEdPSU5HOlxuICAgICAgICAgIHJldHVybiBzZWxlY3RlZExvY2F0aW9uc1NldC5oYXMob3JpZ2luKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBjYWxjTG9jYXRpb25Ub3RhbHMoXG4gIC8vICAgbG9jYXRpb25zOiAoTCB8IENsdXN0ZXJOb2RlKVtdLFxuICAvLyAgIGZsb3dzOiBGW10sXG4gIC8vICk6IExvY2F0aW9uc1RvdGFscyB7XG4gIC8vICAgcmV0dXJuIGZsb3dzLnJlZHVjZShcbiAgLy8gICAgIChhY2M6IExvY2F0aW9uc1RvdGFscywgY3VycikgPT4ge1xuICAvLyAgICAgICBjb25zdCBvcmlnaW5JZCA9IHRoaXMuYWNjZXNzb3JzLmdldEZsb3dPcmlnaW5JZChjdXJyKTtcbiAgLy8gICAgICAgY29uc3QgZGVzdElkID0gdGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd0Rlc3RJZChjdXJyKTtcbiAgLy8gICAgICAgY29uc3QgbWFnbml0dWRlID0gdGhpcy5hY2Nlc3NvcnMuZ2V0Rmxvd01hZ25pdHVkZShjdXJyKTtcbiAgLy8gICAgICAgaWYgKG9yaWdpbklkID09PSBkZXN0SWQpIHtcbiAgLy8gICAgICAgICBhY2MuaW50ZXJuYWxbb3JpZ2luSWRdID0gKGFjYy5pbnRlcm5hbFtvcmlnaW5JZF0gfHwgMCkgKyBtYWduaXR1ZGU7XG4gIC8vICAgICAgIH0gZWxzZSB7XG4gIC8vICAgICAgICAgYWNjLm91dGdvaW5nW29yaWdpbklkXSA9IChhY2Mub3V0Z29pbmdbb3JpZ2luSWRdIHx8IDApICsgbWFnbml0dWRlO1xuICAvLyAgICAgICAgIGFjYy5pbmNvbWluZ1tkZXN0SWRdID0gKGFjYy5pbmNvbWluZ1tkZXN0SWRdIHx8IDApICsgbWFnbml0dWRlO1xuICAvLyAgICAgICB9XG4gIC8vICAgICAgIHJldHVybiBhY2M7XG4gIC8vICAgICB9LFxuICAvLyAgICAge2luY29taW5nOiB7fSwgb3V0Z29pbmc6IHt9LCBpbnRlcm5hbDoge319LFxuICAvLyAgICk7XG4gIC8vIH1cbn1cblxuZnVuY3Rpb24gY2FsY0xvY2F0aW9uVG90YWxzRXh0ZW50KFxuICBsb2NhdGlvblRvdGFsczogTWFwPHN0cmluZyB8IG51bWJlciwgTG9jYXRpb25Ub3RhbHM+IHwgdW5kZWZpbmVkLFxuICBsb2NhdGlvbklkc0luVmlld3BvcnQ6IFNldDxzdHJpbmcgfCBudW1iZXI+IHwgdW5kZWZpbmVkLFxuKSB7XG4gIGlmICghbG9jYXRpb25Ub3RhbHMpIHJldHVybiB1bmRlZmluZWQ7XG4gIGxldCBydjogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgZm9yIChjb25zdCBbXG4gICAgaWQsXG4gICAge2luY29taW5nQ291bnQsIG91dGdvaW5nQ291bnQsIGludGVybmFsQ291bnR9LFxuICBdIG9mIGxvY2F0aW9uVG90YWxzLmVudHJpZXMoKSkge1xuICAgIGlmIChsb2NhdGlvbklkc0luVmlld3BvcnQgPT0gbnVsbCB8fCBsb2NhdGlvbklkc0luVmlld3BvcnQuaGFzKGlkKSkge1xuICAgICAgY29uc3QgbG8gPSBNYXRoLm1pbihcbiAgICAgICAgaW5jb21pbmdDb3VudCArIGludGVybmFsQ291bnQsXG4gICAgICAgIG91dGdvaW5nQ291bnQgKyBpbnRlcm5hbENvdW50LFxuICAgICAgICBpbnRlcm5hbENvdW50LFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGhpID0gTWF0aC5tYXgoXG4gICAgICAgIGluY29taW5nQ291bnQgKyBpbnRlcm5hbENvdW50LFxuICAgICAgICBvdXRnb2luZ0NvdW50ICsgaW50ZXJuYWxDb3VudCxcbiAgICAgICAgaW50ZXJuYWxDb3VudCxcbiAgICAgICk7XG4gICAgICBpZiAoIXJ2KSB7XG4gICAgICAgIHJ2ID0gW2xvLCBoaV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobG8gPCBydlswXSkgcnZbMF0gPSBsbztcbiAgICAgICAgaWYgKGhpID4gcnZbMV0pIHJ2WzFdID0gaGk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBydjtcbn1cblxuLy8gbG9uZ2l0dWRlL2xhdGl0dWRlIHRvIHNwaGVyaWNhbCBtZXJjYXRvciBpbiBbMC4uMV0gcmFuZ2VcbmZ1bmN0aW9uIGxuZ1gobG5nOiBudW1iZXIpIHtcbiAgcmV0dXJuIGxuZyAvIDM2MCArIDAuNTtcbn1cblxuZnVuY3Rpb24gbGF0WShsYXQ6IG51bWJlcikge1xuICBjb25zdCBzaW4gPSBNYXRoLnNpbigobGF0ICogTWF0aC5QSSkgLyAxODApO1xuICBjb25zdCB5ID0gMC41IC0gKDAuMjUgKiBNYXRoLmxvZygoMSArIHNpbikgLyAoMSAtIHNpbikpKSAvIE1hdGguUEk7XG4gIHJldHVybiB5IDwgMCA/IDAgOiB5ID4gMSA/IDEgOiB5O1xufVxuXG5mdW5jdGlvbiBhZ2dyZWdhdGVGbG93czxGPihcbiAgZmxvd3M6IEZbXSxcbiAgZmxvd0FjY2Vzc29yczogRmxvd0FjY2Vzc29yczxGPixcbik6IEFnZ3JlZ2F0ZUZsb3dbXSB7XG4gIC8vIFN1bSB1cCBmbG93cyB3aXRoIHNhbWUgb3JpZ2luLCBkZXN0XG4gIGNvbnN0IGJ5T3JpZ2luRGVzdCA9IHJvbGx1cChcbiAgICBmbG93cyxcbiAgICAoZmY6IEZbXSkgPT4ge1xuICAgICAgY29uc3Qgb3JpZ2luID0gZmxvd0FjY2Vzc29ycy5nZXRGbG93T3JpZ2luSWQoZmZbMF0pO1xuICAgICAgY29uc3QgZGVzdCA9IGZsb3dBY2Nlc3NvcnMuZ2V0Rmxvd0Rlc3RJZChmZlswXSk7XG4gICAgICAvLyBjb25zdCBjb2xvciA9IGZmWzBdLmNvbG9yO1xuICAgICAgY29uc3QgcnY6IEFnZ3JlZ2F0ZUZsb3cgPSB7XG4gICAgICAgIGFnZ3JlZ2F0ZTogdHJ1ZSxcbiAgICAgICAgb3JpZ2luLFxuICAgICAgICBkZXN0LFxuICAgICAgICBjb3VudDogZmYucmVkdWNlKChtLCBmKSA9PiB7XG4gICAgICAgICAgY29uc3QgY291bnQgPSBmbG93QWNjZXNzb3JzLmdldEZsb3dNYWduaXR1ZGUoZik7XG4gICAgICAgICAgaWYgKGNvdW50KSB7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKGNvdW50KSAmJiBpc0Zpbml0ZShjb3VudCkpIHJldHVybiBtICsgY291bnQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBtO1xuICAgICAgICB9LCAwKSxcbiAgICAgICAgLy8gdGltZTogdW5kZWZpbmVkLFxuICAgICAgfTtcbiAgICAgIC8vIGlmIChjb2xvcikgcnYuY29sb3IgPSBjb2xvcjtcbiAgICAgIHJldHVybiBydjtcbiAgICB9LFxuICAgIGZsb3dBY2Nlc3NvcnMuZ2V0Rmxvd09yaWdpbklkLFxuICAgIGZsb3dBY2Nlc3NvcnMuZ2V0Rmxvd0Rlc3RJZCxcbiAgKTtcblxuICBjb25zdCBydjogQWdncmVnYXRlRmxvd1tdID0gW107XG4gIGZvciAoY29uc3QgdmFsdWVzIG9mIGJ5T3JpZ2luRGVzdC52YWx1ZXMoKSkge1xuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzLnZhbHVlcygpKSB7XG4gICAgICBydi5wdXNoKHZhbHVlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJ2O1xufVxuXG4vKipcbiAqIFRoaXMgaXMgdXNlZCB0byBhdWdtZW50IGhvdmVyIHBpY2tpbmcgaW5mbyBzbyB0aGF0IHdlIGNhbiBkaXNwbGFjZSBsb2NhdGlvbiB0b29sdGlwXG4gKiBAcGFyYW0gY2lyY2xlQXR0cmlidXRlc1xuICogQHBhcmFtIGluZGV4XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPdXRlckNpcmNsZVJhZGl1c0J5SW5kZXgoXG4gIGNpcmNsZUF0dHJpYnV0ZXM6IEZsb3dDaXJjbGVzTGF5ZXJBdHRyaWJ1dGVzLFxuICBpbmRleDogbnVtYmVyLFxuKTogbnVtYmVyIHtcbiAgY29uc3Qge2dldEluUmFkaXVzLCBnZXRPdXRSYWRpdXN9ID0gY2lyY2xlQXR0cmlidXRlcy5hdHRyaWJ1dGVzO1xuICByZXR1cm4gTWF0aC5tYXgoZ2V0SW5SYWRpdXMudmFsdWVbaW5kZXhdLCBnZXRPdXRSYWRpdXMudmFsdWVbaW5kZXhdKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExvY2F0aW9uQ29vcmRzQnlJbmRleChcbiAgY2lyY2xlQXR0cmlidXRlczogRmxvd0NpcmNsZXNMYXllckF0dHJpYnV0ZXMsXG4gIGluZGV4OiBudW1iZXIsXG4pOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgY29uc3Qge2dldFBvc2l0aW9ufSA9IGNpcmNsZUF0dHJpYnV0ZXMuYXR0cmlidXRlcztcbiAgcmV0dXJuIFtnZXRQb3NpdGlvbi52YWx1ZVtpbmRleCAqIDJdLCBnZXRQb3NpdGlvbi52YWx1ZVtpbmRleCAqIDIgKyAxXV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGbG93TGluZUF0dHJpYnV0ZXNCeUluZGV4KFxuICBsaW5lQXR0cmlidXRlczogRmxvd0xpbmVzTGF5ZXJBdHRyaWJ1dGVzLFxuICBpbmRleDogbnVtYmVyLFxuKTogRmxvd0xpbmVzTGF5ZXJBdHRyaWJ1dGVzIHtcbiAgY29uc3Qge1xuICAgIGdldENvbG9yLFxuICAgIGdldEVuZHBvaW50T2Zmc2V0cyxcbiAgICBnZXRTb3VyY2VQb3NpdGlvbixcbiAgICBnZXRUYXJnZXRQb3NpdGlvbixcbiAgICBnZXRUaGlja25lc3MsXG4gICAgZ2V0U3RhZ2dlcmluZyxcbiAgfSA9IGxpbmVBdHRyaWJ1dGVzLmF0dHJpYnV0ZXM7XG4gIHJldHVybiB7XG4gICAgbGVuZ3RoOiAxLFxuICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgIGdldENvbG9yOiB7XG4gICAgICAgIHZhbHVlOiBnZXRDb2xvci52YWx1ZS5zdWJhcnJheShpbmRleCAqIDQsIChpbmRleCArIDEpICogNCksXG4gICAgICAgIHNpemU6IDQsXG4gICAgICB9LFxuICAgICAgZ2V0RW5kcG9pbnRPZmZzZXRzOiB7XG4gICAgICAgIHZhbHVlOiBnZXRFbmRwb2ludE9mZnNldHMudmFsdWUuc3ViYXJyYXkoaW5kZXggKiAyLCAoaW5kZXggKyAxKSAqIDIpLFxuICAgICAgICBzaXplOiAyLFxuICAgICAgfSxcbiAgICAgIGdldFNvdXJjZVBvc2l0aW9uOiB7XG4gICAgICAgIHZhbHVlOiBnZXRTb3VyY2VQb3NpdGlvbi52YWx1ZS5zdWJhcnJheShpbmRleCAqIDIsIChpbmRleCArIDEpICogMiksXG4gICAgICAgIHNpemU6IDIsXG4gICAgICB9LFxuICAgICAgZ2V0VGFyZ2V0UG9zaXRpb246IHtcbiAgICAgICAgdmFsdWU6IGdldFRhcmdldFBvc2l0aW9uLnZhbHVlLnN1YmFycmF5KGluZGV4ICogMiwgKGluZGV4ICsgMSkgKiAyKSxcbiAgICAgICAgc2l6ZTogMixcbiAgICAgIH0sXG4gICAgICBnZXRUaGlja25lc3M6IHtcbiAgICAgICAgdmFsdWU6IGdldFRoaWNrbmVzcy52YWx1ZS5zdWJhcnJheShpbmRleCwgaW5kZXggKyAxKSxcbiAgICAgICAgc2l6ZTogMSxcbiAgICAgIH0sXG4gICAgICAuLi4oZ2V0U3RhZ2dlcmluZ1xuICAgICAgICA/IHtcbiAgICAgICAgICAgIGdldFN0YWdnZXJpbmc6IHtcbiAgICAgICAgICAgICAgdmFsdWU6IGdldFN0YWdnZXJpbmcudmFsdWUuc3ViYXJyYXkoaW5kZXgsIGluZGV4ICsgMSksXG4gICAgICAgICAgICAgIHNpemU6IDEsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH1cbiAgICAgICAgOiB1bmRlZmluZWQpLFxuICAgIH0sXG4gIH07XG59XG4iXX0=","/*\n * Copyright 2022 FlowmapBlue\n * Copyright 2018-2020 Teralytics, modified by FlowmapBlue\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nimport { isCluster, } from './../types';\nimport { ascending, bisectLeft, extent } from 'd3-array';\n/**\n * Build ClusterIndex from the given cluster hierarchy\n */\nexport function buildIndex(clusterLevels) {\n    const nodesByZoom = new Map();\n    const clustersById = new Map();\n    const minZoomByLocationId = new Map();\n    for (const { zoom, nodes } of clusterLevels) {\n        nodesByZoom.set(zoom, nodes);\n        for (const node of nodes) {\n            if (isCluster(node)) {\n                clustersById.set(node.id, node);\n            }\n            else {\n                const { id } = node;\n                const mz = minZoomByLocationId.get(id);\n                if (mz == null || mz > zoom) {\n                    minZoomByLocationId.set(id, zoom);\n                }\n            }\n        }\n    }\n    const [minZoom, maxZoom] = extent(clusterLevels, (cl) => cl.zoom);\n    if (minZoom == null || maxZoom == null) {\n        throw new Error('Could not determine minZoom or maxZoom');\n    }\n    const leavesToClustersByZoom = new Map();\n    for (const cluster of clustersById.values()) {\n        const { zoom } = cluster;\n        let leavesToClusters = leavesToClustersByZoom.get(zoom);\n        if (!leavesToClusters) {\n            leavesToClusters = new Map();\n            leavesToClustersByZoom.set(zoom, leavesToClusters);\n        }\n        visitClusterLeaves(cluster, (leafId) => {\n            leavesToClusters === null || leavesToClusters === void 0 ? void 0 : leavesToClusters.set(leafId, cluster);\n        });\n    }\n    function visitClusterLeaves(cluster, visit) {\n        for (const childId of cluster.children) {\n            const child = clustersById.get(childId);\n            if (child) {\n                visitClusterLeaves(child, visit);\n            }\n            else {\n                visit(childId);\n            }\n        }\n    }\n    const expandCluster = (cluster, targetZoom = maxZoom) => {\n        const ids = [];\n        const visit = (c, expandedIds) => {\n            if (targetZoom > c.zoom) {\n                for (const childId of c.children) {\n                    const child = clustersById.get(childId);\n                    if (child) {\n                        visit(child, expandedIds);\n                    }\n                    else {\n                        expandedIds.push(childId);\n                    }\n                }\n            }\n            else {\n                expandedIds.push(c.id);\n            }\n        };\n        visit(cluster, ids);\n        return ids;\n    };\n    function findClusterFor(locationId, zoom) {\n        const leavesToClusters = leavesToClustersByZoom.get(zoom);\n        if (!leavesToClusters) {\n            return undefined;\n        }\n        const cluster = leavesToClusters.get(locationId);\n        return cluster ? cluster.id : undefined;\n    }\n    const availableZoomLevels = clusterLevels\n        .map((cl) => +cl.zoom)\n        .sort((a, b) => ascending(a, b));\n    return {\n        availableZoomLevels,\n        getClusterNodesFor: (zoom) => {\n            if (zoom === undefined) {\n                return undefined;\n            }\n            return nodesByZoom.get(zoom);\n        },\n        getClusterById: (clusterId) => clustersById.get(clusterId),\n        getMinZoomForLocation: (locationId) => minZoomByLocationId.get(locationId) || minZoom,\n        expandCluster,\n        findClusterFor,\n        aggregateFlows: (flows, zoom, { getFlowOriginId, getFlowDestId, getFlowMagnitude }, options = {}) => {\n            if (zoom > maxZoom) {\n                return flows;\n            }\n            const result = [];\n            const aggFlowsByKey = new Map();\n            const makeKey = (origin, dest) => `${origin}:${dest}`;\n            const { flowCountsMapReduce = {\n                map: getFlowMagnitude,\n                reduce: (acc, count) => (acc || 0) + count,\n            }, } = options;\n            for (const flow of flows) {\n                const origin = getFlowOriginId(flow);\n                const dest = getFlowDestId(flow);\n                const originCluster = findClusterFor(origin, zoom) || origin;\n                const destCluster = findClusterFor(dest, zoom) || dest;\n                const key = makeKey(originCluster, destCluster);\n                if (originCluster === origin && destCluster === dest) {\n                    result.push(flow);\n                }\n                else {\n                    let aggregateFlow = aggFlowsByKey.get(key);\n                    if (!aggregateFlow) {\n                        aggregateFlow = {\n                            origin: originCluster,\n                            dest: destCluster,\n                            count: flowCountsMapReduce.map(flow),\n                            aggregate: true,\n                        };\n                        result.push(aggregateFlow);\n                        aggFlowsByKey.set(key, aggregateFlow);\n                    }\n                    else {\n                        aggregateFlow.count = flowCountsMapReduce.reduce(aggregateFlow.count, flowCountsMapReduce.map(flow));\n                    }\n                }\n            }\n            return result;\n        },\n    };\n}\nexport function makeLocationWeightGetter(flows, { getFlowOriginId, getFlowDestId, getFlowMagnitude }) {\n    const locationTotals = {\n        incoming: new Map(),\n        outgoing: new Map(),\n    };\n    for (const flow of flows) {\n        const origin = getFlowOriginId(flow);\n        const dest = getFlowDestId(flow);\n        const count = getFlowMagnitude(flow);\n        locationTotals.incoming.set(dest, (locationTotals.incoming.get(dest) || 0) + count);\n        locationTotals.outgoing.set(origin, (locationTotals.outgoing.get(origin) || 0) + count);\n    }\n    return (id) => Math.max(Math.abs(locationTotals.incoming.get(id) || 0), Math.abs(locationTotals.outgoing.get(id) || 0));\n}\n/**\n * @param availableZoomLevels Must be sorted in ascending order\n * @param targetZoom\n */\nexport function findAppropriateZoomLevel(availableZoomLevels, targetZoom) {\n    if (!availableZoomLevels.length) {\n        throw new Error('No available zoom levels');\n    }\n    return availableZoomLevels[Math.min(bisectLeft(availableZoomLevels, Math.floor(targetZoom)), availableZoomLevels.length - 1)];\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2x1c3RlckluZGV4LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2NsdXN0ZXIvQ2x1c3RlckluZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7O0dBZ0JHO0FBRUgsT0FBTyxFQU9MLFNBQVMsR0FDVixNQUFNLFlBQVksQ0FBQztBQUNwQixPQUFPLEVBQUMsU0FBUyxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUMsTUFBTSxVQUFVLENBQUM7QUEwQ3ZEOztHQUVHO0FBQ0gsTUFBTSxVQUFVLFVBQVUsQ0FBSSxhQUE0QjtJQUN4RCxNQUFNLFdBQVcsR0FBRyxJQUFJLEdBQUcsRUFBeUIsQ0FBQztJQUNyRCxNQUFNLFlBQVksR0FBRyxJQUFJLEdBQUcsRUFBNEIsQ0FBQztJQUN6RCxNQUFNLG1CQUFtQixHQUFHLElBQUksR0FBRyxFQUEyQixDQUFDO0lBQy9ELEtBQUssTUFBTSxFQUFDLElBQUksRUFBRSxLQUFLLEVBQUMsSUFBSSxhQUFhLEVBQUU7UUFDekMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDN0IsS0FBSyxNQUFNLElBQUksSUFBSSxLQUFLLEVBQUU7WUFDeEIsSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQ25CLFlBQVksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQzthQUNqQztpQkFBTTtnQkFDTCxNQUFNLEVBQUMsRUFBRSxFQUFDLEdBQUcsSUFBSSxDQUFDO2dCQUNsQixNQUFNLEVBQUUsR0FBRyxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ3ZDLElBQUksRUFBRSxJQUFJLElBQUksSUFBSSxFQUFFLEdBQUcsSUFBSSxFQUFFO29CQUMzQixtQkFBbUIsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO2lCQUNuQzthQUNGO1NBQ0Y7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LENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQzlDLElBQUksQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQy9DLENBQUM7QUFDTixDQUFDO0FBRUQ7OztHQUdHO0FBQ0gsTUFBTSxVQUFVLHdCQUF3QixDQUN0QyxtQkFBNkIsRUFDN0IsVUFBa0I7SUFFbEIsSUFBSSxDQUFDLG1CQUFtQixDQUFDLE1BQU0sRUFBRTtRQUMvQixNQUFNLElBQUksS0FBSyxDQUFDLDBCQUEwQixDQUFDLENBQUM7S0FDN0M7SUFDRCxPQUFPLG1CQUFtQixDQUN4QixJQUFJLENBQUMsR0FBRyxDQUNOLFVBQVUsQ0FBQyxtQkFBbUIsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQ3ZELG1CQUFtQixDQUFDLE1BQU0sR0FBRyxDQUFDLENBQy9CLENBQ0YsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMjIgRmxvd21hcEJsdWVcbiAqIENvcHlyaWdodCAyMDE4LTIwMjAgVGVyYWx5dGljcywgbW9kaWZpZWQgYnkgRmxvd21hcEJsdWVcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqXG4gKi9cblxuaW1wb3J0IHtcbiAgQWdncmVnYXRlRmxvdyxcbiAgQ2x1c3RlcixcbiAgQ2x1c3RlckxldmVscyxcbiAgQ2x1c3Rlck5vZGUsXG4gIEZsb3dBY2Nlc3NvcnMsXG4gIEZsb3dDb3VudHNNYXBSZWR1Y2UsXG4gIGlzQ2x1c3Rlcixcbn0gZnJvbSAnLi8uLi90eXBlcyc7XG5pbXBvcnQge2FzY2VuZGluZywgYmlzZWN0TGVmdCwgZXh0ZW50fSBmcm9tICdkMy1hcnJheSc7XG5cbmV4cG9ydCB0eXBlIExvY2F0aW9uV2VpZ2h0R2V0dGVyID0gKGlkOiBzdHJpbmcgfCBudW1iZXIpID0+IG51bWJlcjtcblxuLyoqXG4gKiBBIGRhdGEgc3RydWN0dXJlIHJlcHJlc2VudGluZyB0aGUgY2x1c3RlciBsZXZlbHMgZm9yIGVmZmljaWVudCBmbG93IGFnZ3JlZ2F0aW9uLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIENsdXN0ZXJJbmRleDxGPiB7XG4gIGF2YWlsYWJsZVpvb21MZXZlbHM6IG51bWJlcltdO1xuICBnZXRDbHVzdGVyQnlJZDogKGNsdXN0ZXJJZDogc3RyaW5nIHwgbnVtYmVyKSA9PiBDbHVzdGVyIHwgdW5kZWZpbmVkO1xuICAvKipcbiAgICogTGlzdCB0aGUgbm9kZXMgb24gdGhlIGdpdmVuIHpvb20gbGV2ZWwuXG4gICAqL1xuICBnZXRDbHVzdGVyTm9kZXNGb3I6ICh6b29tOiBudW1iZXIgfCB1bmRlZmluZWQpID0+IENsdXN0ZXJOb2RlW10gfCB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBHZXQgdGhlIG1pbiB6b29tIGxldmVsIG9uIHdoaWNoIHRoZSBsb2NhdGlvbiBpcyBub3QgY2x1c3RlcmVkLlxuICAgKi9cbiAgZ2V0TWluWm9vbUZvckxvY2F0aW9uOiAobG9jYXRpb25JZDogc3RyaW5nIHwgbnVtYmVyKSA9PiBudW1iZXI7XG4gIC8qKlxuICAgKiBMaXN0IHRoZSBJRHMgb2YgYWxsIGxvY2F0aW9ucyBpbiB0aGUgY2x1c3RlciAobGVhdmVzIG9mIHRoZSBzdWJ0cmVlIHN0YXJ0aW5nIGluIHRoZSBjbHVzdGVyKS5cbiAgICovXG4gIGV4cGFuZENsdXN0ZXI6IChjbHVzdGVyOiBDbHVzdGVyLCB0YXJnZXRab29tPzogbnVtYmVyKSA9PiBzdHJpbmdbXTtcbiAgLyoqXG4gICAqIEZpbmQgdGhlIGNsdXN0ZXIgdGhlIGdpdmVuIGxvY2F0aW9uIGlzIHJlc2lkaW5nIGluIG9uIHRoZSBzcGVjaWZpZWQgem9vbSBsZXZlbC5cbiAgICovXG4gIGZpbmRDbHVzdGVyRm9yOiAoXG4gICAgbG9jYXRpb25JZDogc3RyaW5nIHwgbnVtYmVyLFxuICAgIHpvb206IG51bWJlcixcbiAgKSA9PiBzdHJpbmcgfCBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBBZ2dyZWdhdGUgZmxvd3MgZm9yIHRoZSBzcGVjaWZpZWQgem9vbSBsZXZlbC5cbiAgICovXG4gIGFnZ3JlZ2F0ZUZsb3dzOiAoXG4gICAgZmxvd3M6IEZbXSxcbiAgICB6b29tOiBudW1iZXIsXG4gICAge2dldEZsb3dPcmlnaW5JZCwgZ2V0Rmxvd0Rlc3RJZCwgZ2V0Rmxvd01hZ25pdHVkZX06IEZsb3dBY2Nlc3NvcnM8Rj4sXG4gICAgb3B0aW9ucz86IHtcbiAgICAgIGZsb3dDb3VudHNNYXBSZWR1Y2U/OiBGbG93Q291bnRzTWFwUmVkdWNlPEY+O1xuICAgIH0sXG4gICkgPT4gKEYgfCBBZ2dyZWdhdGVGbG93KVtdO1xufVxuXG4vKipcbiAqIEJ1aWxkIENsdXN0ZXJJbmRleCBmcm9tIHRoZSBnaXZlbiBjbHVzdGVyIGhpZXJhcmNoeVxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRJbmRleDxGPihjbHVzdGVyTGV2ZWxzOiBDbHVzdGVyTGV2ZWxzKTogQ2x1c3RlckluZGV4PEY+IHtcbiAgY29uc3Qgbm9kZXNCeVpvb20gPSBuZXcgTWFwPG51bWJlciwgQ2x1c3Rlck5vZGVbXT4oKTtcbiAgY29uc3QgY2x1c3RlcnNCeUlkID0gbmV3IE1hcDxzdHJpbmcgfCBudW1iZXIsIENsdXN0ZXI+KCk7XG4gIGNvbnN0IG1pblpvb21CeUxvY2F0aW9uSWQgPSBuZXcgTWFwPHN0cmluZyB8IG51bWJlciwgbnVtYmVyPigpO1xuICBmb3IgKGNvbnN0IHt6b29tLCBub2Rlc30gb2YgY2x1c3RlckxldmVscykge1xuICAgIG5vZGVzQnlab29tLnNldCh6b29tLCBub2Rlcyk7XG4gICAgZm9yIChjb25zdCBub2RlIG9mIG5vZGVzKSB7XG4gICAgICBpZiAoaXNDbHVzdGVyKG5vZGUpKSB7XG4gICAgICAgIGNsdXN0ZXJzQnlJZC5zZXQobm9kZS5pZCwgbm9kZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB7aWR9ID0gbm9kZTtcbiAgICAgICAgY29uc3QgbXogPSBtaW5ab29tQnlMb2NhdGlvbklkLmdldChpZCk7XG4gICAgICAgIGlmIChteiA9PSBudWxsIHx8IG16ID4gem9vbSkge1xuICAgICAgICAgIG1pblpvb21CeUxvY2F0aW9uSWQuc2V0KGlkLCB6b29tKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IFttaW5ab29tLCBtYXhab29tXSA9IGV4dGVudChjbHVzdGVyTGV2ZWxzLCAoY2wpID0+IGNsLnpvb20pO1xuICBpZiAobWluWm9vbSA9PSBudWxsIHx8IG1heFpvb20gPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGRldGVybWluZSBtaW5ab29tIG9yIG1heFpvb20nKTtcbiAgfVxuXG4gIGNvbnN0IGxlYXZlc1RvQ2x1c3RlcnNCeVpvb20gPSBuZXcgTWFwPFxuICAgIG51bWJlcixcbiAgICBNYXA8c3RyaW5nIHwgbnVtYmVyLCBDbHVzdGVyPlxuICA+KCk7XG5cbiAgZm9yIChjb25zdCBjbHVzdGVyIG9mIGNsdXN0ZXJzQnlJZC52YWx1ZXMoKSkge1xuICAgIGNvbnN0IHt6b29tfSA9IGNsdXN0ZXI7XG4gICAgbGV0IGxlYXZlc1RvQ2x1c3RlcnMgPSBsZWF2ZXNUb0NsdXN0ZXJzQnlab29tLmdldCh6b29tKTtcbiAgICBpZiAoIWxlYXZlc1RvQ2x1c3RlcnMpIHtcbiAgICAgIGxlYXZlc1RvQ2x1c3RlcnMgPSBuZXcgTWFwPHN0cmluZywgQ2x1c3Rlcj4oKTtcbiAgICAgIGxlYXZlc1RvQ2x1c3RlcnNCeVpvb20uc2V0KHpvb20sIGxlYXZlc1RvQ2x1c3RlcnMpO1xuICAgIH1cbiAgICB2aXNpdENsdXN0ZXJMZWF2ZXMoY2x1c3RlciwgKGxlYWZJZCkgPT4ge1xuICAgICAgbGVhdmVzVG9DbHVzdGVycz8uc2V0KGxlYWZJZCwgY2x1c3Rlcik7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiB2aXNpdENsdXN0ZXJMZWF2ZXMoY2x1c3RlcjogQ2x1c3RlciwgdmlzaXQ6IChpZDogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgZm9yIChjb25zdCBjaGlsZElkIG9mIGNsdXN0ZXIuY2hpbGRyZW4pIHtcbiAgICAgIGNvbnN0IGNoaWxkID0gY2x1c3RlcnNCeUlkLmdldChjaGlsZElkKTtcbiAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICB2aXNpdENsdXN0ZXJMZWF2ZXMoY2hpbGQsIHZpc2l0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZpc2l0KGNoaWxkSWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGV4cGFuZENsdXN0ZXIgPSAoY2x1c3RlcjogQ2x1c3RlciwgdGFyZ2V0Wm9vbTogbnVtYmVyID0gbWF4Wm9vbSkgPT4ge1xuICAgIGNvbnN0IGlkczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB2aXNpdCA9IChjOiBDbHVzdGVyLCBleHBhbmRlZElkczogKHN0cmluZyB8IG51bWJlcilbXSkgPT4ge1xuICAgICAgaWYgKHRhcmdldFpvb20gPiBjLnpvb20pIHtcbiAgICAgICAgZm9yIChjb25zdCBjaGlsZElkIG9mIGMuY2hpbGRyZW4pIHtcbiAgICAgICAgICBjb25zdCBjaGlsZCA9IGNsdXN0ZXJzQnlJZC5nZXQoY2hpbGRJZCk7XG4gICAgICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgICAgICB2aXNpdChjaGlsZCwgZXhwYW5kZWRJZHMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBleHBhbmRlZElkcy5wdXNoKGNoaWxkSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXhwYW5kZWRJZHMucHVzaChjLmlkKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZpc2l0KGNsdXN0ZXIsIGlkcyk7XG4gICAgcmV0dXJuIGlkcztcbiAgfTtcblxuICBmdW5jdGlvbiBmaW5kQ2x1c3RlckZvcihsb2NhdGlvbklkOiBzdHJpbmcgfCBudW1iZXIsIHpvb206IG51bWJlcikge1xuICAgIGNvbnN0IGxlYXZlc1RvQ2x1c3RlcnMgPSBsZWF2ZXNUb0NsdXN0ZXJzQnlab29tLmdldCh6b29tKTtcbiAgICBpZiAoIWxlYXZlc1RvQ2x1c3RlcnMpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGNsdXN0ZXIgPSBsZWF2ZXNUb0NsdXN0ZXJzLmdldChsb2NhdGlvbklkKTtcbiAgICByZXR1cm4gY2x1c3RlciA/IGNsdXN0ZXIuaWQgOiB1bmRlZmluZWQ7XG4gIH1cblxuICBjb25zdCBhdmFpbGFibGVab29tTGV2ZWxzID0gY2x1c3RlckxldmVsc1xuICAgIC5tYXAoKGNsKSA9PiArY2wuem9vbSlcbiAgICAuc29ydCgoYSwgYikgPT4gYXNjZW5kaW5nKGEsIGIpKTtcblxuICByZXR1cm4ge1xuICAgIGF2YWlsYWJsZVpvb21MZXZlbHMsXG5cbiAgICBnZXRDbHVzdGVyTm9kZXNGb3I6ICh6b29tKSA9PiB7XG4gICAgICBpZiAoem9vbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gbm9kZXNCeVpvb20uZ2V0KHpvb20pO1xuICAgIH0sXG5cbiAgICBnZXRDbHVzdGVyQnlJZDogKGNsdXN0ZXJJZCkgPT4gY2x1c3RlcnNCeUlkLmdldChjbHVzdGVySWQpLFxuXG4gICAgZ2V0TWluWm9vbUZvckxvY2F0aW9uOiAobG9jYXRpb25JZCkgPT5cbiAgICAgIG1pblpvb21CeUxvY2F0aW9uSWQuZ2V0KGxvY2F0aW9uSWQpIHx8IG1pblpvb20sXG5cbiAgICBleHBhbmRDbHVzdGVyLFxuXG4gICAgZmluZENsdXN0ZXJGb3IsXG5cbiAgICBhZ2dyZWdhdGVGbG93czogKFxuICAgICAgZmxvd3MsXG4gICAgICB6b29tLFxuICAgICAge2dldEZsb3dPcmlnaW5JZCwgZ2V0Rmxvd0Rlc3RJZCwgZ2V0Rmxvd01hZ25pdHVkZX0sXG4gICAgICBvcHRpb25zID0ge30sXG4gICAgKSA9PiB7XG4gICAgICBpZiAoem9vbSA+IG1heFpvb20pIHtcbiAgICAgICAgcmV0dXJuIGZsb3dzO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzdWx0OiAoRiB8IEFnZ3JlZ2F0ZUZsb3cpW10gPSBbXTtcbiAgICAgIGNvbnN0IGFnZ0Zsb3dzQnlLZXkgPSBuZXcgTWFwPHN0cmluZywgQWdncmVnYXRlRmxvdz4oKTtcbiAgICAgIGNvbnN0IG1ha2VLZXkgPSAob3JpZ2luOiBzdHJpbmcgfCBudW1iZXIsIGRlc3Q6IHN0cmluZyB8IG51bWJlcikgPT5cbiAgICAgICAgYCR7b3JpZ2lufToke2Rlc3R9YDtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZmxvd0NvdW50c01hcFJlZHVjZSA9IHtcbiAgICAgICAgICBtYXA6IGdldEZsb3dNYWduaXR1ZGUsXG4gICAgICAgICAgcmVkdWNlOiAoYWNjOiBhbnksIGNvdW50OiBudW1iZXIpID0+IChhY2MgfHwgMCkgKyBjb3VudCxcbiAgICAgICAgfSxcbiAgICAgIH0gPSBvcHRpb25zO1xuICAgICAgZm9yIChjb25zdCBmbG93IG9mIGZsb3dzKSB7XG4gICAgICAgIGNvbnN0IG9yaWdpbiA9IGdldEZsb3dPcmlnaW5JZChmbG93KTtcbiAgICAgICAgY29uc3QgZGVzdCA9IGdldEZsb3dEZXN0SWQoZmxvdyk7XG4gICAgICAgIGNvbnN0IG9yaWdpbkNsdXN0ZXIgPSBmaW5kQ2x1c3RlckZvcihvcmlnaW4sIHpvb20pIHx8IG9yaWdpbjtcbiAgICAgICAgY29uc3QgZGVzdENsdXN0ZXIgPSBmaW5kQ2x1c3RlckZvcihkZXN0LCB6b29tKSB8fCBkZXN0O1xuICAgICAgICBjb25zdCBrZXkgPSBtYWtlS2V5KG9yaWdpbkNsdXN0ZXIsIGRlc3RDbHVzdGVyKTtcbiAgICAgICAgaWYgKG9yaWdpbkNsdXN0ZXIgPT09IG9yaWdpbiAmJiBkZXN0Q2x1c3RlciA9PT0gZGVzdCkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGZsb3cpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCBhZ2dyZWdhdGVGbG93ID0gYWdnRmxvd3NCeUtleS5nZXQoa2V5KTtcbiAgICAgICAgICBpZiAoIWFnZ3JlZ2F0ZUZsb3cpIHtcbiAgICAgICAgICAgIGFnZ3JlZ2F0ZUZsb3cgPSB7XG4gICAgICAgICAgICAgIG9yaWdpbjogb3JpZ2luQ2x1c3RlcixcbiAgICAgICAgICAgICAgZGVzdDogZGVzdENsdXN0ZXIsXG4gICAgICAgICAgICAgIGNvdW50OiBmbG93Q291bnRzTWFwUmVkdWNlLm1hcChmbG93KSxcbiAgICAgICAgICAgICAgYWdncmVnYXRlOiB0cnVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGFnZ3JlZ2F0ZUZsb3cpO1xuICAgICAgICAgICAgYWdnRmxvd3NCeUtleS5zZXQoa2V5LCBhZ2dyZWdhdGVGbG93KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWdncmVnYXRlRmxvdy5jb3VudCA9IGZsb3dDb3VudHNNYXBSZWR1Y2UucmVkdWNlKFxuICAgICAgICAgICAgICBhZ2dyZWdhdGVGbG93LmNvdW50LFxuICAgICAgICAgICAgICBmbG93Q291bnRzTWFwUmVkdWNlLm1hcChmbG93KSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlTG9jYXRpb25XZWlnaHRHZXR0ZXI8Rj4oXG4gIGZsb3dzOiBGW10sXG4gIHtnZXRGbG93T3JpZ2luSWQsIGdldEZsb3dEZXN0SWQsIGdldEZsb3dNYWduaXR1ZGV9OiBGbG93QWNjZXNzb3JzPEY+LFxuKTogTG9jYXRpb25XZWlnaHRHZXR0ZXIge1xuICBjb25zdCBsb2NhdGlvblRvdGFscyA9IHtcbiAgICBpbmNvbWluZzogbmV3IE1hcDxzdHJpbmcgfCBudW1iZXIsIG51bWJlcj4oKSxcbiAgICBvdXRnb2luZzogbmV3IE1hcDxzdHJpbmcgfCBudW1iZXIsIG51bWJlcj4oKSxcbiAgfTtcbiAgZm9yIChjb25zdCBmbG93IG9mIGZsb3dzKSB7XG4gICAgY29uc3Qgb3JpZ2luID0gZ2V0Rmxvd09yaWdpbklkKGZsb3cpO1xuICAgIGNvbnN0IGRlc3QgPSBnZXRGbG93RGVzdElkKGZsb3cpO1xuICAgIGNvbnN0IGNvdW50ID0gZ2V0Rmxvd01hZ25pdHVkZShmbG93KTtcbiAgICBsb2NhdGlvblRvdGFscy5pbmNvbWluZy5zZXQoXG4gICAgICBkZXN0LFxuICAgICAgKGxvY2F0aW9uVG90YWxzLmluY29taW5nLmdldChkZXN0KSB8fCAwKSArIGNvdW50LFxuICAgICk7XG4gICAgbG9jYXRpb25Ub3RhbHMub3V0Z29pbmcuc2V0KFxuICAgICAgb3JpZ2luLFxuICAgICAgKGxvY2F0aW9uVG90YWxzLm91dGdvaW5nLmdldChvcmlnaW4pIHx8IDApICsgY291bnQsXG4gICAgKTtcbiAgfVxuICByZXR1cm4gKGlkOiBzdHJpbmcgfCBudW1iZXIpID0+XG4gICAgTWF0aC5tYXgoXG4gICAgICBNYXRoLmFicyhsb2NhdGlvblRvdGFscy5pbmNvbWluZy5nZXQoaWQpIHx8IDApLFxuICAgICAgTWF0aC5hYnMobG9jYXRpb25Ub3RhbHMub3V0Z29pbmcuZ2V0KGlkKSB8fCAwKSxcbiAgICApO1xufVxuXG4vKipcbiAqIEBwYXJhbSBhdmFpbGFibGVab29tTGV2ZWxzIE11c3QgYmUgc29ydGVkIGluIGFzY2VuZGluZyBvcmRlclxuICogQHBhcmFtIHRhcmdldFpvb21cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRBcHByb3ByaWF0ZVpvb21MZXZlbChcbiAgYXZhaWxhYmxlWm9vbUxldmVsczogbnVtYmVyW10sXG4gIHRhcmdldFpvb206IG51bWJlcixcbikge1xuICBpZiAoIWF2YWlsYWJsZVpvb21MZXZlbHMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdObyBhdmFpbGFibGUgem9vbSBsZXZlbHMnKTtcbiAgfVxuICByZXR1cm4gYXZhaWxhYmxlWm9vbUxldmVsc1tcbiAgICBNYXRoLm1pbihcbiAgICAgIGJpc2VjdExlZnQoYXZhaWxhYmxlWm9vbUxldmVscywgTWF0aC5mbG9vcih0YXJnZXRab29tKSksXG4gICAgICBhdmFpbGFibGVab29tTGV2ZWxzLmxlbmd0aCAtIDEsXG4gICAgKVxuICBdO1xufVxuIl19","export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var hypot = Math.hypot;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n","export default function noop() {}\n","function streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function(object, stream) {\n    streamGeometry(object.geometry, stream);\n  },\n  FeatureCollection: function(object, stream) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) streamGeometry(features[i].geometry, stream);\n  }\n};\n\nvar streamGeometryType = {\n  Sphere: function(object, stream) {\n    stream.sphere();\n  },\n  Point: function(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n  },\n  LineString: function(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamLine(coordinates[i], stream, 0);\n  },\n  Polygon: function(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamPolygon(coordinates[i], stream);\n  },\n  GeometryCollection: function(object, stream) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) streamGeometry(geometries[i], stream);\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1, n = coordinates.length - closed, coordinate;\n  stream.lineStart();\n  while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1, n = coordinates.length;\n  stream.polygonStart();\n  while (++i < n) streamLine(coordinates[i], stream, 1);\n  stream.polygonEnd();\n}\n\nexport default function(object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}\n","import {Adder} from \"d3-array\";\nimport {atan2, cos, quarterPi, radians, sin, tau} from \"./math.js\";\nimport noop from \"./noop.js\";\nimport stream from \"./stream.js\";\n\nexport var areaRingSum = new Adder();\n\n// hello?\n\nvar areaSum = new Adder(),\n    lambda00,\n    phi00,\n    lambda0,\n    cosPhi0,\n    sinPhi0;\n\nexport var areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaRingSum = new Adder();\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    var areaRing = +areaRingSum;\n    areaSum.add(areaRing < 0 ? tau + areaRing : areaRing);\n    this.lineStart = this.lineEnd = this.point = noop;\n  },\n  sphere: function() {\n    areaSum.add(tau);\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaRingEnd() {\n  areaPoint(lambda00, phi00);\n}\n\nfunction areaPointFirst(lambda, phi) {\n  areaStream.point = areaPoint;\n  lambda00 = lambda, phi00 = phi;\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, cosPhi0 = cos(phi = phi / 2 + quarterPi), sinPhi0 = sin(phi);\n}\n\nfunction areaPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  phi = phi / 2 + quarterPi; // half the angular distance from south pole\n\n  // Spherical excess E for a spherical triangle with vertices: south pole,\n  // previous point, current point.  Uses a formula derived from Cagnoli’s\n  // theorem.  See Todhunter, Spherical Trig. (1871), Sec. 103, Eq. (2).\n  var dLambda = lambda - lambda0,\n      sdLambda = dLambda >= 0 ? 1 : -1,\n      adLambda = sdLambda * dLambda,\n      cosPhi = cos(phi),\n      sinPhi = sin(phi),\n      k = sinPhi0 * sinPhi,\n      u = cosPhi0 * cosPhi + k * cos(adLambda),\n      v = k * sdLambda * sin(adLambda);\n  areaRingSum.add(atan2(v, u));\n\n  // Advance the previous points.\n  lambda0 = lambda, cosPhi0 = cosPhi, sinPhi0 = sinPhi;\n}\n\nexport default function(object) {\n  areaSum = new Adder();\n  stream(object, areaStream);\n  return areaSum * 2;\n}\n","import {Adder} from \"d3-array\";\nimport {areaStream, areaRingSum} from \"./area.js\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace, spherical} from \"./cartesian.js\";\nimport {abs, degrees, epsilon, radians} from \"./math.js\";\nimport stream from \"./stream.js\";\n\nvar lambda0, phi0, lambda1, phi1, // bounds\n    lambda2, // previous lambda-coordinate\n    lambda00, phi00, // first point\n    p0, // previous 3D point\n    deltaSum,\n    ranges,\n    range;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: boundsLineStart,\n  lineEnd: boundsLineEnd,\n  polygonStart: function() {\n    boundsStream.point = boundsRingPoint;\n    boundsStream.lineStart = boundsRingStart;\n    boundsStream.lineEnd = boundsRingEnd;\n    deltaSum = new Adder();\n    areaStream.polygonStart();\n  },\n  polygonEnd: function() {\n    areaStream.polygonEnd();\n    boundsStream.point = boundsPoint;\n    boundsStream.lineStart = boundsLineStart;\n    boundsStream.lineEnd = boundsLineEnd;\n    if (areaRingSum < 0) lambda0 = -(lambda1 = 180), phi0 = -(phi1 = 90);\n    else if (deltaSum > epsilon) phi1 = 90;\n    else if (deltaSum < -epsilon) phi0 = -90;\n    range[0] = lambda0, range[1] = lambda1;\n  },\n  sphere: function() {\n    lambda0 = -(lambda1 = 180), phi0 = -(phi1 = 90);\n  }\n};\n\nfunction boundsPoint(lambda, phi) {\n  ranges.push(range = [lambda0 = lambda, lambda1 = lambda]);\n  if (phi < phi0) phi0 = phi;\n  if (phi > phi1) phi1 = phi;\n}\n\nfunction linePoint(lambda, phi) {\n  var p = cartesian([lambda * radians, phi * radians]);\n  if (p0) {\n    var normal = cartesianCross(p0, p),\n        equatorial = [normal[1], -normal[0], 0],\n        inflection = cartesianCross(equatorial, normal);\n    cartesianNormalizeInPlace(inflection);\n    inflection = spherical(inflection);\n    var delta = lambda - lambda2,\n        sign = delta > 0 ? 1 : -1,\n        lambdai = inflection[0] * degrees * sign,\n        phii,\n        antimeridian = abs(delta) > 180;\n    if (antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = inflection[1] * degrees;\n      if (phii > phi1) phi1 = phii;\n    } else if (lambdai = (lambdai + 360) % 360 - 180, antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = -inflection[1] * degrees;\n      if (phii < phi0) phi0 = phii;\n    } else {\n      if (phi < phi0) phi0 = phi;\n      if (phi > phi1) phi1 = phi;\n    }\n    if (antimeridian) {\n      if (lambda < lambda2) {\n        if (angle(lambda0, lambda) > angle(lambda0, lambda1)) lambda1 = lambda;\n      } else {\n        if (angle(lambda, lambda1) > angle(lambda0, lambda1)) lambda0 = lambda;\n      }\n    } else {\n      if (lambda1 >= lambda0) {\n        if (lambda < lambda0) lambda0 = lambda;\n        if (lambda > lambda1) lambda1 = lambda;\n      } else {\n        if (lambda > lambda2) {\n          if (angle(lambda0, lambda) > angle(lambda0, lambda1)) lambda1 = lambda;\n        } else {\n          if (angle(lambda, lambda1) > angle(lambda0, lambda1)) lambda0 = lambda;\n        }\n      }\n    }\n  } else {\n    ranges.push(range = [lambda0 = lambda, lambda1 = lambda]);\n  }\n  if (phi < phi0) phi0 = phi;\n  if (phi > phi1) phi1 = phi;\n  p0 = p, lambda2 = lambda;\n}\n\nfunction boundsLineStart() {\n  boundsStream.point = linePoint;\n}\n\nfunction boundsLineEnd() {\n  range[0] = lambda0, range[1] = lambda1;\n  boundsStream.point = boundsPoint;\n  p0 = null;\n}\n\nfunction boundsRingPoint(lambda, phi) {\n  if (p0) {\n    var delta = lambda - lambda2;\n    deltaSum.add(abs(delta) > 180 ? delta + (delta > 0 ? 360 : -360) : delta);\n  } else {\n    lambda00 = lambda, phi00 = phi;\n  }\n  areaStream.point(lambda, phi);\n  linePoint(lambda, phi);\n}\n\nfunction boundsRingStart() {\n  areaStream.lineStart();\n}\n\nfunction boundsRingEnd() {\n  boundsRingPoint(lambda00, phi00);\n  areaStream.lineEnd();\n  if (abs(deltaSum) > epsilon) lambda0 = -(lambda1 = 180);\n  range[0] = lambda0, range[1] = lambda1;\n  p0 = null;\n}\n\n// Finds the left-right distance between two longitudes.\n// This is almost the same as (lambda1 - lambda0 + 360°) % 360°, except that we want\n// the distance between ±180° to be 360°.\nfunction angle(lambda0, lambda1) {\n  return (lambda1 -= lambda0) < 0 ? lambda1 + 360 : lambda1;\n}\n\nfunction rangeCompare(a, b) {\n  return a[0] - b[0];\n}\n\nfunction rangeContains(range, x) {\n  return range[0] <= range[1] ? range[0] <= x && x <= range[1] : x < range[0] || range[1] < x;\n}\n\nexport default function(feature) {\n  var i, n, a, b, merged, deltaMax, delta;\n\n  phi1 = lambda1 = -(lambda0 = phi0 = Infinity);\n  ranges = [];\n  stream(feature, boundsStream);\n\n  // First, sort ranges by their minimum longitudes.\n  if (n = ranges.length) {\n    ranges.sort(rangeCompare);\n\n    // Then, merge any ranges that overlap.\n    for (i = 1, a = ranges[0], merged = [a]; i < n; ++i) {\n      b = ranges[i];\n      if (rangeContains(a, b[0]) || rangeContains(a, b[1])) {\n        if (angle(a[0], b[1]) > angle(a[0], a[1])) a[1] = b[1];\n        if (angle(b[0], a[1]) > angle(a[0], a[1])) a[0] = b[0];\n      } else {\n        merged.push(a = b);\n      }\n    }\n\n    // Finally, find the largest gap between the merged ranges.\n    // The final bounding box will be the inverse of this gap.\n    for (deltaMax = -Infinity, n = merged.length - 1, i = 0, a = merged[n]; i <= n; a = b, ++i) {\n      b = merged[i];\n      if ((delta = angle(a[1], b[0])) > deltaMax) deltaMax = delta, lambda0 = b[0], lambda1 = a[1];\n    }\n  }\n\n  ranges = range = null;\n\n  return lambda0 === Infinity || phi0 === Infinity\n      ? [[NaN, NaN], [NaN, NaN]]\n      : [[lambda0, phi0], [lambda1, phi1]];\n}\n","import {asin, atan2, cos, sin, sqrt} from \"./math.js\";\n\nexport function spherical(cartesian) {\n  return [atan2(cartesian[1], cartesian[0]), asin(cartesian[2])];\n}\n\nexport function cartesian(spherical) {\n  var lambda = spherical[0], phi = spherical[1], cosPhi = cos(phi);\n  return [cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi)];\n}\n\nexport function cartesianDot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function cartesianCross(a, b) {\n  return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\n}\n\n// TODO return a\nexport function cartesianAddInPlace(a, b) {\n  a[0] += b[0], a[1] += b[1], a[2] += b[2];\n}\n\nexport function cartesianScale(vector, k) {\n  return [vector[0] * k, vector[1] * k, vector[2] * k];\n}\n\n// TODO return d\nexport function cartesianNormalizeInPlace(d) {\n  var l = sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n  d[0] /= l, d[1] /= l, d[2] /= l;\n}\n","import { geoBounds } from 'd3-geo';\nimport { fitBounds } from '@math.gl/web-mercator';\nexport function getViewStateForFeatures(featureCollection, size, opts) {\n    const { pad = 0.05, maxZoom = 100 } = opts || {};\n    const bounds = geoBounds(featureCollection);\n    const [[x1, y1], [x2, y2]] = bounds;\n    const paddedBounds = pad\n        ? [\n            [x1 - pad * (x2 - x1), y1 - pad * (y2 - y1)],\n            [x2 + pad * (x2 - x1), y2 + pad * (y2 - y1)],\n        ]\n        : bounds;\n    const [width, height] = size;\n    return Object.assign(Object.assign({}, fitBounds({\n        width,\n        height,\n        bounds: paddedBounds,\n        padding: opts === null || opts === void 0 ? void 0 : opts.padding,\n        // minZoom,\n        maxZoom,\n    })), { width,\n        height, bearing: 0, pitch: 0 });\n}\nexport function getViewStateForLocations(locations, getLocationCoords, size, opts) {\n    const asGeometry = (location) => ({\n        type: 'Point',\n        coordinates: getLocationCoords(location),\n    });\n    let geometries;\n    if (Array.isArray(locations)) {\n        geometries = locations.map(asGeometry);\n    }\n    else {\n        geometries = [];\n        for (const location of locations) {\n            geometries.push(asGeometry(location));\n        }\n    }\n    return getViewStateForFeatures({\n        type: 'GeometryCollection',\n        geometries,\n    }, size, opts);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0Vmlld1N0YXRlRm9yTG9jYXRpb25zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2dldFZpZXdTdGF0ZUZvckxvY2F0aW9ucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0sUUFBUSxDQUFDO0FBQ2pDLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQWtCaEQsTUFBTSxVQUFVLHVCQUF1QixDQUNyQyxpQkFFc0IsRUFDdEIsSUFBc0IsRUFDdEIsSUFBMEI7SUFFMUIsTUFBTSxFQUFDLEdBQUcsR0FBRyxJQUFJLEVBQUUsT0FBTyxHQUFHLEdBQUcsRUFBQyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7SUFDL0MsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLGlCQUF3QixDQUFDLENBQUM7SUFDbkQsTUFBTSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ3BDLE1BQU0sWUFBWSxHQUF5QyxHQUFHO1FBQzVELENBQUMsQ0FBQztZQUNFLENBQUMsRUFBRSxHQUFHLEdBQUcsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEdBQUcsR0FBRyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQzVDLENBQUMsRUFBRSxHQUFHLEdBQUcsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEdBQUcsR0FBRyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1NBQzdDO1FBQ0gsQ0FBQyxDQUFDLE1BQU0sQ0FBQztJQUNYLE1BQU0sQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQzdCLHVDQUNLLFNBQVMsQ0FBQztRQUNYLEtBQUs7UUFDTCxNQUFNO1FBQ04sTUFBTSxFQUFFLFlBQVk7UUFDcEIsT0FBTyxFQUFFLElBQUksYUFBSixJQUFJLHVCQUFKLElBQUksQ0FBRSxPQUFPO1FBQ3RCLFdBQVc7UUFDWCxPQUFPO0tBQ1IsQ0FBQyxLQUNGLEtBQUs7UUFDTCxNQUFNLEVBQ04sT0FBTyxFQUFFLENBQUMsRUFDVixLQUFLLEVBQUUsQ0FBQyxJQUNSO0FBQ0osQ0FBQztBQUVELE1BQU0sVUFBVSx3QkFBd0IsQ0FDdEMsU0FBc0IsRUFDdEIsaUJBQW9ELEVBQ3BELElBQXNCLEVBQ3RCLElBQTBCO0lBRTFCLE1BQU0sVUFBVSxHQUFHLENBQUMsUUFBVyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ25DLElBQUksRUFBRSxPQUFPO1FBQ2IsV0FBVyxFQUFFLGlCQUFpQixDQUFDLFFBQVEsQ0FBQztLQUN6QyxDQUFDLENBQUM7SUFDSCxJQUFJLFVBQVUsQ0FBQztJQUNmLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsRUFBRTtRQUM1QixVQUFVLEdBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztLQUN4QztTQUFNO1FBQ0wsVUFBVSxHQUFHLEVBQUUsQ0FBQztRQUNoQixLQUFLLE1BQU0sUUFBUSxJQUFJLFNBQVMsRUFBRTtZQUNoQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1NBQ3ZDO0tBQ0Y7SUFDRCxPQUFPLHVCQUF1QixDQUM1QjtRQUNFLElBQUksRUFBRSxvQkFBb0I7UUFDMUIsVUFBVTtLQUNKLEVBQ1IsSUFBSSxFQUNKLElBQUksQ0FDTCxDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Z2VvQm91bmRzfSBmcm9tICdkMy1nZW8nO1xuaW1wb3J0IHtmaXRCb3VuZHN9IGZyb20gJ0BtYXRoLmdsL3dlYi1tZXJjYXRvcic7XG5pbXBvcnQgdHlwZSB7XG4gIEZlYXR1cmVDb2xsZWN0aW9uLFxuICBHZW9tZXRyeUNvbGxlY3Rpb24sXG4gIEdlb21ldHJ5T2JqZWN0LFxufSBmcm9tICdnZW9qc29uJztcbmltcG9ydCB0eXBlIHtWaWV3U3RhdGV9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgdHlwZSBMb2NhdGlvblByb3BlcnRpZXMgPSBhbnk7XG5cbmV4cG9ydCB0eXBlIEdldFZpZXdTdGF0ZU9wdGlvbnMgPSB7XG4gIHBhZD86IG51bWJlcjsgLy8gc2l6ZSByYXRpb1xuICBwYWRkaW5nPzoge3RvcDogbnVtYmVyOyBib3R0b206IG51bWJlcjsgbGVmdDogbnVtYmVyOyByaWdodDogbnVtYmVyfTtcbiAgdGlsZVNpemU/OiBudW1iZXI7XG4gIC8vIG1pblpvb20/OiBudW1iZXI7ICAvLyBub3Qgc3VwcG9ydGVkIGJ5IGZpdEJvdW5kc1xuICBtYXhab29tPzogbnVtYmVyO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFZpZXdTdGF0ZUZvckZlYXR1cmVzKFxuICBmZWF0dXJlQ29sbGVjdGlvbjpcbiAgICB8IEZlYXR1cmVDb2xsZWN0aW9uPEdlb21ldHJ5T2JqZWN0LCBMb2NhdGlvblByb3BlcnRpZXM+XG4gICAgfCBHZW9tZXRyeUNvbGxlY3Rpb24sXG4gIHNpemU6IFtudW1iZXIsIG51bWJlcl0sXG4gIG9wdHM/OiBHZXRWaWV3U3RhdGVPcHRpb25zLFxuKTogVmlld1N0YXRlICYge3dpZHRoOiBudW1iZXI7IGhlaWdodDogbnVtYmVyfSB7XG4gIGNvbnN0IHtwYWQgPSAwLjA1LCBtYXhab29tID0gMTAwfSA9IG9wdHMgfHwge307XG4gIGNvbnN0IGJvdW5kcyA9IGdlb0JvdW5kcyhmZWF0dXJlQ29sbGVjdGlvbiBhcyBhbnkpO1xuICBjb25zdCBbW3gxLCB5MV0sIFt4MiwgeTJdXSA9IGJvdW5kcztcbiAgY29uc3QgcGFkZGVkQm91bmRzOiBbW251bWJlciwgbnVtYmVyXSwgW251bWJlciwgbnVtYmVyXV0gPSBwYWRcbiAgICA/IFtcbiAgICAgICAgW3gxIC0gcGFkICogKHgyIC0geDEpLCB5MSAtIHBhZCAqICh5MiAtIHkxKV0sXG4gICAgICAgIFt4MiArIHBhZCAqICh4MiAtIHgxKSwgeTIgKyBwYWQgKiAoeTIgLSB5MSldLFxuICAgICAgXVxuICAgIDogYm91bmRzO1xuICBjb25zdCBbd2lkdGgsIGhlaWdodF0gPSBzaXplO1xuICByZXR1cm4ge1xuICAgIC4uLmZpdEJvdW5kcyh7XG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICAgIGJvdW5kczogcGFkZGVkQm91bmRzLFxuICAgICAgcGFkZGluZzogb3B0cz8ucGFkZGluZyxcbiAgICAgIC8vIG1pblpvb20sXG4gICAgICBtYXhab29tLFxuICAgIH0pLFxuICAgIHdpZHRoLFxuICAgIGhlaWdodCxcbiAgICBiZWFyaW5nOiAwLFxuICAgIHBpdGNoOiAwLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Vmlld1N0YXRlRm9yTG9jYXRpb25zPEw+KFxuICBsb2NhdGlvbnM6IEl0ZXJhYmxlPEw+LFxuICBnZXRMb2NhdGlvbkNvb3JkczogKGxvY2F0aW9uOiBMKSA9PiBbbnVtYmVyLCBudW1iZXJdLFxuICBzaXplOiBbbnVtYmVyLCBudW1iZXJdLFxuICBvcHRzPzogR2V0Vmlld1N0YXRlT3B0aW9ucyxcbik6IFZpZXdTdGF0ZSAmIHt3aWR0aDogbnVtYmVyOyBoZWlnaHQ6IG51bWJlcn0ge1xuICBjb25zdCBhc0dlb21ldHJ5ID0gKGxvY2F0aW9uOiBMKSA9PiAoe1xuICAgIHR5cGU6ICdQb2ludCcsXG4gICAgY29vcmRpbmF0ZXM6IGdldExvY2F0aW9uQ29vcmRzKGxvY2F0aW9uKSxcbiAgfSk7XG4gIGxldCBnZW9tZXRyaWVzO1xuICBpZiAoQXJyYXkuaXNBcnJheShsb2NhdGlvbnMpKSB7XG4gICAgZ2VvbWV0cmllcyA9IGxvY2F0aW9ucy5tYXAoYXNHZW9tZXRyeSk7XG4gIH0gZWxzZSB7XG4gICAgZ2VvbWV0cmllcyA9IFtdO1xuICAgIGZvciAoY29uc3QgbG9jYXRpb24gb2YgbG9jYXRpb25zKSB7XG4gICAgICBnZW9tZXRyaWVzLnB1c2goYXNHZW9tZXRyeShsb2NhdGlvbikpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZ2V0Vmlld1N0YXRlRm9yRmVhdHVyZXMoXG4gICAge1xuICAgICAgdHlwZTogJ0dlb21ldHJ5Q29sbGVjdGlvbicsXG4gICAgICBnZW9tZXRyaWVzLFxuICAgIH0gYXMgYW55LFxuICAgIHNpemUsXG4gICAgb3B0cyxcbiAgKTtcbn1cbiJdfQ==","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport FlowmapSelectors from '../FlowmapSelectors';\nimport { getViewStateForLocations, } from '../getViewStateForLocations';\nexport default class LocalFlowmapDataProvider {\n    constructor(accessors) {\n        // scope selectors to the concrete instance of FlowmapDataProvider\n        this.selectors = new FlowmapSelectors(accessors);\n        this.flowmapData = undefined;\n        this.flowmapState = undefined;\n    }\n    setAccessors(accessors) {\n        this.selectors.setAccessors(accessors);\n    }\n    setFlowmapData(flowmapData) {\n        this.flowmapData = flowmapData;\n    }\n    getSelectors() {\n        return this.selectors;\n    }\n    getFlowmapData() {\n        return this.flowmapData;\n    }\n    setFlowmapState(flowmapState) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.flowmapState = flowmapState;\n        });\n    }\n    getFlowmapState() {\n        return this.flowmapState;\n    }\n    getFlowByIndex(idx) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.flowmapState || !this.flowmapData) {\n                return undefined;\n            }\n            const flows = this.selectors.getFlowsForFlowmapLayer(this.flowmapState, this.flowmapData);\n            return flows === null || flows === void 0 ? void 0 : flows[idx];\n        });\n    }\n    // TODO: this is unreliable, should replace by unqiue ID\n    getLocationByIndex(idx) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.flowmapState || !this.flowmapData) {\n                return undefined;\n            }\n            const locations = this.selectors.getLocationsForFlowmapLayer(this.flowmapState, this.flowmapData);\n            return locations === null || locations === void 0 ? void 0 : locations[idx];\n        });\n    }\n    getLayersData() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.flowmapState || !this.flowmapData) {\n                return undefined;\n            }\n            return this.selectors.getLayersData(this.flowmapState, this.flowmapData);\n        });\n    }\n    getLocationById(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.flowmapState || !this.flowmapData) {\n                return undefined;\n            }\n            const clusterIndex = this.selectors.getClusterIndex(this.flowmapState, this.flowmapData);\n            if (clusterIndex) {\n                const cluster = clusterIndex.getClusterById(id);\n                if (cluster) {\n                    return cluster;\n                }\n            }\n            const locationsById = this.selectors.getLocationsById(this.flowmapState, this.flowmapData);\n            return locationsById === null || locationsById === void 0 ? void 0 : locationsById.get(id);\n        });\n    }\n    getTotalsForLocation(id) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.flowmapState || !this.flowmapData) {\n                return undefined;\n            }\n            return (_a = this.selectors\n                .getLocationTotals(this.flowmapState, this.flowmapData)) === null || _a === void 0 ? void 0 : _a.get(id);\n        });\n    }\n    getViewportForLocations(dims, opts) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!((_a = this.flowmapData) === null || _a === void 0 ? void 0 : _a.locations)) {\n                return undefined;\n            }\n            // @ts-ignore\n            return getViewStateForLocations(this.flowmapData.locations, (loc) => [\n                this.selectors.accessors.getLocationLon(loc),\n                this.selectors.accessors.getLocationLat(loc),\n            ], dims, opts);\n        });\n    }\n    updateLayersData(setLayersData) {\n        return __awaiter(this, void 0, void 0, function* () {\n            setLayersData(yield this.getLayersData());\n        });\n    }\n    getClusterZoom() {\n        return this.flowmapState && this.flowmapData\n            ? this.selectors.getClusterZoom(this.flowmapState, this.flowmapData)\n            : undefined;\n    }\n    getClusterIndex() {\n        return this.flowmapState && this.flowmapData\n            ? this.selectors.getClusterIndex(this.flowmapState, this.flowmapData)\n            : undefined;\n    }\n    getLocationsById() {\n        return this.flowmapState && this.flowmapData\n            ? this.selectors.getLocationsById(this.flowmapState, this.flowmapData)\n            : undefined;\n    }\n    getLocationTotals() {\n        return this.flowmapState && this.flowmapData\n            ? this.selectors.getLocationTotals(this.flowmapState, this.flowmapData)\n            : undefined;\n    }\n    getFlowsForFlowmapLayer() {\n        return this.flowmapState && this.flowmapData\n            ? this.selectors.getFlowsForFlowmapLayer(this.flowmapState, this.flowmapData)\n            : undefined;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTG9jYWxGbG93bWFwRGF0YVByb3ZpZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3Byb3ZpZGVyL0xvY2FsRmxvd21hcERhdGFQcm92aWRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFZQSxPQUFPLGdCQUFnQixNQUFNLHFCQUFxQixDQUFDO0FBQ25ELE9BQU8sRUFFTCx3QkFBd0IsR0FDekIsTUFBTSw2QkFBNkIsQ0FBQztBQUdyQyxNQUFNLENBQUMsT0FBTyxPQUFPLHdCQUF3QjtJQU8zQyxZQUFZLFNBQXFDO1FBQy9DLGtFQUFrRTtRQUNsRSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksZ0JBQWdCLENBQU8sU0FBUyxDQUFDLENBQUM7UUFDdkQsSUFBSSxDQUFDLFdBQVcsR0FBRyxTQUFTLENBQUM7UUFDN0IsSUFBSSxDQUFDLFlBQVksR0FBRyxTQUFTLENBQUM7SUFDaEMsQ0FBQztJQUVELFlBQVksQ0FBQyxTQUFxQztRQUNoRCxJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRUQsY0FBYyxDQUFDLFdBQThCO1FBQzNDLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO0lBQ2pDLENBQUM7SUFFRCxZQUFZO1FBQ1YsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQ3hCLENBQUM7SUFFRCxjQUFjO1FBQ1osT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQzFCLENBQUM7SUFFSyxlQUFlLENBQUMsWUFBMEI7O1lBQzlDLElBQUksQ0FBQyxZQUFZLEdBQUcsWUFBWSxDQUFDO1FBQ25DLENBQUM7S0FBQTtJQUVELGVBQWU7UUFDYixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDM0IsQ0FBQztJQUVLLGNBQWMsQ0FBQyxHQUFXOztZQUM5QixJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEVB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QUMsV0FBVztZQUMxQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyx1QkFBdUIsQ0FDcEMsSUFBSSxDQUFDLFlBQVksRUFDakIsSUFBSSxDQUFDLFdBQVcsQ0FDakI7WUFDSCxDQUFDLENBQUMsU0FBUyxDQUFDO0lBQ2hCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIEZsb3dtYXBEYXRhUHJvdmlkZXIgZnJvbSAnLi9GbG93bWFwRGF0YVByb3ZpZGVyJztcbmltcG9ydCB0eXBlIHtcbiAgQ2x1c3RlcixcbiAgQ2x1c3Rlck5vZGUsXG4gIEZsb3dtYXBEYXRhLFxuICBGbG93bWFwRGF0YUFjY2Vzc29ycyxcbiAgTGF5ZXJzRGF0YSxcbiAgTG9jYXRpb25Ub3RhbHMsXG4gIFZpZXdwb3J0UHJvcHMsXG4gIEFnZ3JlZ2F0ZUZsb3csXG59IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7Rmxvd21hcFN0YXRlfSBmcm9tICcuLi9GbG93bWFwU3RhdGUnO1xuaW1wb3J0IEZsb3dtYXBTZWxlY3RvcnMgZnJvbSAnLi4vRmxvd21hcFNlbGVjdG9ycyc7XG5pbXBvcnQge1xuICBHZXRWaWV3U3RhdGVPcHRpb25zLFxuICBnZXRWaWV3U3RhdGVGb3JMb2NhdGlvbnMsXG59IGZyb20gJy4uL2dldFZpZXdTdGF0ZUZvckxvY2F0aW9ucyc7XG5pbXBvcnQge0NsdXN0ZXJJbmRleH0gZnJvbSAnLi4vY2x1c3Rlci9DbHVzdGVySW5kZXgnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2NhbEZsb3dtYXBEYXRhUHJvdmlkZXI8TCwgRj5cbiAgaW1wbGVtZW50cyBGbG93bWFwRGF0YVByb3ZpZGVyPEwsIEY+XG57XG4gIHByaXZhdGUgc2VsZWN0b3JzOiBGbG93bWFwU2VsZWN0b3JzPEwsIEY+O1xuICBwcml2YXRlIGZsb3dtYXBEYXRhOiBGbG93bWFwRGF0YTxMLCBGPiB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBmbG93bWFwU3RhdGU6IEZsb3dtYXBTdGF0ZSB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihhY2Nlc3NvcnM6IEZsb3dtYXBEYXRhQWNjZXNzb3JzPEwsIEY+KSB7XG4gICAgLy8gc2NvcGUgc2VsZWN0b3JzIHRvIHRoZSBjb25jcmV0ZSBpbnN0YW5jZSBvZiBGbG93bWFwRGF0YVByb3ZpZGVyXG4gICAgdGhpcy5zZWxlY3RvcnMgPSBuZXcgRmxvd21hcFNlbGVjdG9yczxMLCBGPihhY2Nlc3NvcnMpO1xuICAgIHRoaXMuZmxvd21hcERhdGEgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5mbG93bWFwU3RhdGUgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBzZXRBY2Nlc3NvcnMoYWNjZXNzb3JzOiBGbG93bWFwRGF0YUFjY2Vzc29yczxMLCBGPikge1xuICAgIHRoaXMuc2VsZWN0b3JzLnNldEFjY2Vzc29ycyhhY2Nlc3NvcnMpO1xuICB9XG5cbiAgc2V0Rmxvd21hcERhdGEoZmxvd21hcERhdGE6IEZsb3dtYXBEYXRhPEwsIEY+KTogdm9pZCB7XG4gICAgdGhpcy5mbG93bWFwRGF0YSA9IGZsb3dtYXBEYXRhO1xuICB9XG5cbiAgZ2V0U2VsZWN0b3JzKCk6IEZsb3dtYXBTZWxlY3RvcnM8TCwgRj4ge1xuICAgIHJldHVybiB0aGlzLnNlbGVjdG9ycztcbiAgfVxuXG4gIGdldEZsb3dtYXBEYXRhKCk6IEZsb3dtYXBEYXRhPEwsIEY+IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5mbG93bWFwRGF0YTtcbiAgfVxuXG4gIGFzeW5jIHNldEZsb3dtYXBTdGF0ZShmbG93bWFwU3RhdGU6IEZsb3dtYXBTdGF0ZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuZmxvd21hcFN0YXRlID0gZmxvd21hcFN0YXRlO1xuICB9XG5cbiAgZ2V0Rmxvd21hcFN0YXRlKCk6IEZsb3dtYXBTdGF0ZSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuZmxvd21hcFN0YXRlO1xuICB9XG5cbiAgYXN5bmMgZ2V0Rmxvd0J5SW5kZXgoaWR4OiBudW1iZXIpOiBQcm9taXNlPEYgfCBBZ2dyZWdhdGVGbG93IHwgdW5kZWZpbmVkPiB7XG4gICAgaWYgKCF0aGlzLmZsb3dtYXBTdGF0ZSB8fCAhdGhpcy5mbG93bWFwRGF0YSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgZmxvd3MgPSB0aGlzLnNlbGVjdG9ycy5nZXRGbG93c0ZvckZsb3dtYXBMYXllcihcbiAgICAgIHRoaXMuZmxvd21hcFN0YXRlLFxuICAgICAgdGhpcy5mbG93bWFwRGF0YSxcbiAgICApO1xuICAgIHJldHVybiBmbG93cz8uW2lkeF07XG4gIH1cblxuICAvLyBUT0RPOiB0aGlzIGlzIHVucmVsaWFibGUsIHNob3VsZCByZXBsYWNlIGJ5IHVucWl1ZSBJRFxuICBhc3luYyBnZXRMb2NhdGlvbkJ5SW5kZXgoaWR4OiBudW1iZXIpOiBQcm9taXNlPEwgfCBDbHVzdGVyTm9kZSB8IHVuZGVmaW5lZD4ge1xuICAgIGlmICghdGhpcy5mbG93bWFwU3RhdGUgfHwgIXRoaXMuZmxvd21hcERhdGEpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMuc2VsZWN0b3JzLmdldExvY2F0aW9uc0ZvckZsb3dtYXBMYXllcihcbiAgICAgIHRoaXMuZmxvd21hcFN0YXRlLFxuICAgICAgdGhpcy5mbG93bWFwRGF0YSxcbiAgICApO1xuICAgIHJldHVybiBsb2NhdGlvbnM/LltpZHhdO1xuICB9XG5cbiAgYXN5bmMgZ2V0TGF5ZXJzRGF0YSgpOiBQcm9taXNlPExheWVyc0RhdGEgfCB1bmRlZmluZWQ+IHtcbiAgICBpZiAoIXRoaXMuZmxvd21hcFN0YXRlIHx8ICF0aGlzLmZsb3dtYXBEYXRhKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZWxlY3RvcnMuZ2V0TGF5ZXJzRGF0YSh0aGlzLmZsb3dtYXBTdGF0ZSwgdGhpcy5mbG93bWFwRGF0YSk7XG4gIH1cblxuICBhc3luYyBnZXRMb2NhdGlvbkJ5SWQoaWQ6IHN0cmluZyB8IG51bWJlcik6IFByb21pc2U8TCB8IENsdXN0ZXIgfCB1bmRlZmluZWQ+IHtcbiAgICBpZiAoIXRoaXMuZmxvd21hcFN0YXRlIHx8ICF0aGlzLmZsb3dtYXBEYXRhKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBjbHVzdGVySW5kZXggPSB0aGlzLnNlbGVjdG9ycy5nZXRDbHVzdGVySW5kZXgoXG4gICAgICB0aGlzLmZsb3dtYXBTdGF0ZSxcbiAgICAgIHRoaXMuZmxvd21hcERhdGEsXG4gICAgKTtcbiAgICBpZiAoY2x1c3RlckluZGV4KSB7XG4gICAgICBjb25zdCBjbHVzdGVyID0gY2x1c3RlckluZGV4LmdldENsdXN0ZXJCeUlkKGlkKTtcbiAgICAgIGlmIChjbHVzdGVyKSB7XG4gICAgICAgIHJldHVybiBjbHVzdGVyO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBsb2NhdGlvbnNCeUlkID0gdGhpcy5zZWxlY3RvcnMuZ2V0TG9jYXRpb25zQnlJZChcbiAgICAgIHRoaXMuZmxvd21hcFN0YXRlLFxuICAgICAgdGhpcy5mbG93bWFwRGF0YSxcbiAgICApO1xuICAgIHJldHVybiBsb2NhdGlvbnNCeUlkPy5nZXQoaWQpO1xuICB9XG5cbiAgYXN5bmMgZ2V0VG90YWxzRm9yTG9jYXRpb24oXG4gICAgaWQ6IHN0cmluZyB8IG51bWJlcixcbiAgKTogUHJvbWlzZTxMb2NhdGlvblRvdGFscyB8IHVuZGVmaW5lZD4ge1xuICAgIGlmICghdGhpcy5mbG93bWFwU3RhdGUgfHwgIXRoaXMuZmxvd21hcERhdGEpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlbGVjdG9yc1xuICAgICAgLmdldExvY2F0aW9uVG90YWxzKHRoaXMuZmxvd21hcFN0YXRlLCB0aGlzLmZsb3dtYXBEYXRhKVxuICAgICAgPy5nZXQoaWQpO1xuICB9XG5cbiAgYXN5bmMgZ2V0Vmlld3BvcnRGb3JMb2NhdGlvbnMoXG4gICAgZGltczogW251bWJlciwgbnVtYmVyXSxcbiAgICBvcHRzPzogR2V0Vmlld1N0YXRlT3B0aW9ucyxcbiAgKTogUHJvbWlzZTxWaWV3cG9ydFByb3BzIHwgdW5kZWZpbmVkPiB7XG4gICAgaWYgKCF0aGlzLmZsb3dtYXBEYXRhPy5sb2NhdGlvbnMpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICByZXR1cm4gZ2V0Vmlld1N0YXRlRm9yTG9jYXRpb25zKFxuICAgICAgdGhpcy5mbG93bWFwRGF0YS5sb2NhdGlvbnMsXG4gICAgICAobG9jKSA9PiBbXG4gICAgICAgIHRoaXMuc2VsZWN0b3JzLmFjY2Vzc29ycy5nZXRMb2NhdGlvbkxvbihsb2MpLFxuICAgICAgICB0aGlzLnNlbGVjdG9ycy5hY2Nlc3NvcnMuZ2V0TG9jYXRpb25MYXQobG9jKSxcbiAgICAgIF0sXG4gICAgICBkaW1zLFxuICAgICAgb3B0cyxcbiAgICApO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlTGF5ZXJzRGF0YShcbiAgICBzZXRMYXllcnNEYXRhOiAobGF5ZXJzRGF0YTogTGF5ZXJzRGF0YSB8IHVuZGVmaW5lZCkgPT4gdm9pZCxcbiAgKSB7XG4gICAgc2V0TGF5ZXJzRGF0YShhd2FpdCB0aGlzLmdldExheWVyc0RhdGEoKSk7XG4gIH1cblxuICBnZXRDbHVzdGVyWm9vbSgpOiBudW1iZXIgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmZsb3dtYXBTdGF0ZSAmJiB0aGlzLmZsb3dtYXBEYXRhXG4gICAgICA/IHRoaXMuc2VsZWN0b3JzLmdldENsdXN0ZXJab29tKHRoaXMuZmxvd21hcFN0YXRlLCB0aGlzLmZsb3dtYXBEYXRhKVxuICAgICAgOiB1bmRlZmluZWQ7XG4gIH1cblxuICBnZXRDbHVzdGVySW5kZXgoKTogQ2x1c3RlckluZGV4PEY+IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5mbG93bWFwU3RhdGUgJiYgdGhpcy5mbG93bWFwRGF0YVxuICAgICAgPyB0aGlzLnNlbGVjdG9ycy5nZXRDbHVzdGVySW5kZXgodGhpcy5mbG93bWFwU3RhdGUsIHRoaXMuZmxvd21hcERhdGEpXG4gICAgICA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGdldExvY2F0aW9uc0J5SWQoKTogTWFwPHN0cmluZyB8IG51bWJlciwgTD4gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmZsb3dtYXBTdGF0ZSAmJiB0aGlzLmZsb3dtYXBEYXRhXG4gICAgICA/IHRoaXMuc2VsZWN0b3JzLmdldExvY2F0aW9uc0J5SWQodGhpcy5mbG93bWFwU3RhdGUsIHRoaXMuZmxvd21hcERhdGEpXG4gICAgICA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGdldExvY2F0aW9uVG90YWxzKCk6IE1hcDxzdHJpbmcgfCBudW1iZXIsIExvY2F0aW9uVG90YWxzPiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuZmxvd21hcFN0YXRlICYmIHRoaXMuZmxvd21hcERhdGFcbiAgICAgID8gdGhpcy5zZWxlY3RvcnMuZ2V0TG9jYXRpb25Ub3RhbHModGhpcy5mbG93bWFwU3RhdGUsIHRoaXMuZmxvd21hcERhdGEpXG4gICAgICA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGdldEZsb3dzRm9yRmxvd21hcExheWVyKCk6IEFycmF5PEYgfCBBZ2dyZWdhdGVGbG93PiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuZmxvd21hcFN0YXRlICYmIHRoaXMuZmxvd21hcERhdGFcbiAgICAgID8gdGhpcy5zZWxlY3RvcnMuZ2V0Rmxvd3NGb3JGbG93bWFwTGF5ZXIoXG4gICAgICAgICAgdGhpcy5mbG93bWFwU3RhdGUsXG4gICAgICAgICAgdGhpcy5mbG93bWFwRGF0YSxcbiAgICAgICAgKVxuICAgICAgOiB1bmRlZmluZWQ7XG4gIH1cbn1cbiJdfQ==","export var PickingType;\n(function (PickingType) {\n    PickingType[\"LOCATION\"] = \"location\";\n    PickingType[\"FLOW\"] = \"flow\";\n    // LOCATION_AREA = 'location-area',\n})(PickingType || (PickingType = {}));\n// import {FeatureCollection, GeometryObject} from 'geojson';\n// export type LocationProperties = Record<string, unknown>;\n// export type Locations =\n//   | FeatureCollection<GeometryObject, LocationProperties>\n//   | FlowLocation[];\n// export function isFeatureCollection(\n//   locations: Locations,\n// ): locations is FeatureCollection<GeometryObject, LocationProperties> {\n//   return (\n//     (locations as FeatureCollection<GeometryObject, LocationProperties>)\n//       .type === 'FeatureCollection'\n//   );\n// }\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHlwZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvdHlwZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBU0EsTUFBTSxDQUFOLElBQVksV0FJWDtBQUpELFdBQVksV0FBVztJQUNyQixvQ0FBcUIsQ0FBQTtJQUNyQiw0QkFBYSxDQUFBO0lBQ2IsbUNBQW1DO0FBQ3JDLENBQUMsRUFKVyxXQUFXLEtBQVgsV0FBVyxRQUl0QjtBQThDRCw2REFBNkQ7QUFDN0QsNERBQTREO0FBRTVELDBCQUEwQjtBQUMxQiw0REFBNEQ7QUFDNUQsc0JBQXNCO0FBRXRCLHVDQUF1QztBQUN2QywwQkFBMEI7QUFDMUIsMEVBQTBFO0FBQzFFLGFBQWE7QUFDYiwyRUFBMkU7QUFDM0Usc0NBQXNDO0FBQ3RDLE9BQU87QUFDUCxJQUFJIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWdncmVnYXRlRmxvdyxcbiAgQ2x1c3RlcixcbiAgQ2x1c3Rlck5vZGUsXG4gIExvY2F0aW9uVG90YWxzLFxufSBmcm9tICdAZmxvd21hcC5nbC9kYXRhJztcblxuZXhwb3J0IHR5cGUgTGF5ZXJQcm9wcyA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuXG5leHBvcnQgZW51bSBQaWNraW5nVHlwZSB7XG4gIExPQ0FUSU9OID0gJ2xvY2F0aW9uJyxcbiAgRkxPVyA9ICdmbG93JyxcbiAgLy8gTE9DQVRJT05fQVJFQSA9ICdsb2NhdGlvbi1hcmVhJyxcbn1cblxuZXhwb3J0IHR5cGUgRGVja0dMTGF5ZXIgPSBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuXG5leHBvcnQgaW50ZXJmYWNlIFBpY2tpbmdJbmZvPFQ+IHtcbiAgbGF5ZXI6IERlY2tHTExheWVyO1xuICBpbmRleDogbnVtYmVyO1xuICBwaWNrZWQ6IGJvb2xlYW47XG4gIG9iamVjdDogVCB8IHVuZGVmaW5lZDtcbiAgeDogbnVtYmVyO1xuICB5OiBudW1iZXI7XG4gIGNvb3JkaW5hdGU6IFtudW1iZXIsIG51bWJlcl07XG4gIGV2ZW50OiBNb3VzZUV2ZW50IHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExvY2F0aW9uUGlja2luZ0luZm9PYmplY3Q8TD4ge1xuICBpZDogc3RyaW5nIHwgbnVtYmVyO1xuICB0eXBlOiBQaWNraW5nVHlwZS5MT0NBVElPTjtcbiAgbG9jYXRpb246IEwgfCBDbHVzdGVyTm9kZTtcbiAgbmFtZTogc3RyaW5nO1xuICB0b3RhbHM6IExvY2F0aW9uVG90YWxzO1xuICBjaXJjbGVSYWRpdXM6IG51bWJlcjtcbn1cblxuZXhwb3J0IHR5cGUgTG9jYXRpb25QaWNraW5nSW5mbzxMPiA9IFBpY2tpbmdJbmZvPExvY2F0aW9uUGlja2luZ0luZm9PYmplY3Q8TD4+O1xuXG5leHBvcnQgaW50ZXJmYWNlIEZsb3dQaWNraW5nSW5mb09iamVjdDxMLCBGPiB7XG4gIHR5cGU6IFBpY2tpbmdUeXBlLkZMT1c7XG4gIGZsb3c6IEYgfCBBZ2dyZWdhdGVGbG93O1xuICBvcmlnaW46IEwgfCBDbHVzdGVyTm9kZTtcbiAgZGVzdDogTCB8IENsdXN0ZXJOb2RlO1xuICBjb3VudDogbnVtYmVyO1xufVxuXG5leHBvcnQgdHlwZSBGbG93UGlja2luZ0luZm88TCwgRj4gPSBQaWNraW5nSW5mbzxGbG93UGlja2luZ0luZm9PYmplY3Q8TCwgRj4+O1xuXG4vLyBleHBvcnQgaW50ZXJmYWNlIExvY2F0aW9uQXJlYVBpY2tpbmdJbmZvIGV4dGVuZHMgUGlja2luZ0luZm88UGlja2luZ0luZm9EYXRhPiB7XG4vLyAgIHR5cGU6IFBpY2tpbmdUeXBlLkxPQ0FUSU9OX0FSRUE7XG4vLyAgIG9iamVjdDogRmxvd0xvY2F0aW9uO1xuLy8gfVxuXG5leHBvcnQgdHlwZSBGbG93bWFwTGF5ZXJQaWNraW5nSW5mbzxMLCBGPiA9XG4gIHwgTG9jYXRpb25QaWNraW5nSW5mbzxMPlxuICAvLyB8IExvY2F0aW9uQXJlYVBpY2tpbmdJbmZvXG4gIHwgRmxvd1BpY2tpbmdJbmZvPEwsIEY+O1xuXG4vLyBpbXBvcnQge0ZlYXR1cmVDb2xsZWN0aW9uLCBHZW9tZXRyeU9iamVjdH0gZnJvbSAnZ2VvanNvbic7XG4vLyBleHBvcnQgdHlwZSBMb2NhdGlvblByb3BlcnRpZXMgPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcblxuLy8gZXhwb3J0IHR5cGUgTG9jYXRpb25zID1cbi8vICAgfCBGZWF0dXJlQ29sbGVjdGlvbjxHZW9tZXRyeU9iamVjdCwgTG9jYXRpb25Qcm9wZXJ0aWVzPlxuLy8gICB8IEZsb3dMb2NhdGlvbltdO1xuXG4vLyBleHBvcnQgZnVuY3Rpb24gaXNGZWF0dXJlQ29sbGVjdGlvbihcbi8vICAgbG9jYXRpb25zOiBMb2NhdGlvbnMsXG4vLyApOiBsb2NhdGlvbnMgaXMgRmVhdHVyZUNvbGxlY3Rpb248R2VvbWV0cnlPYmplY3QsIExvY2F0aW9uUHJvcGVydGllcz4ge1xuLy8gICByZXR1cm4gKFxuLy8gICAgIChsb2NhdGlvbnMgYXMgRmVhdHVyZUNvbGxlY3Rpb248R2VvbWV0cnlPYmplY3QsIExvY2F0aW9uUHJvcGVydGllcz4pXG4vLyAgICAgICAudHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJ1xuLy8gICApO1xuLy8gfVxuIl19","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/*\n * Copyright 2022 FlowmapBlue\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nimport { CompositeLayer } from '@deck.gl/core';\nimport { ScatterplotLayer, TextLayer } from '@deck.gl/layers';\nimport { colorAsRgba, FlowmapAggregateAccessors, getFlowLineAttributesByIndex, getFlowmapColors, getLocationCoordsByIndex, getOuterCircleRadiusByIndex, isFlowmapData, isFlowmapDataProvider, LocalFlowmapDataProvider, } from '@flowmap.gl/data';\nimport AnimatedFlowLinesLayer from './AnimatedFlowLinesLayer';\nimport FlowCirclesLayer from './FlowCirclesLayer';\nimport FlowLinesLayer from './FlowLinesLayer';\nimport { PickingType, } from './types';\nconst PROPS_TO_CAUSE_LAYER_DATA_UPDATE = [\n    'filter',\n    'locationTotalsEnabled',\n    'locationLabelsEnabled',\n    'adaptiveScalesEnabled',\n    'animationEnabled',\n    'clusteringEnabled',\n    'clusteringLevel',\n    'fadeEnabled',\n    'fadeOpacityEnabled',\n    'clusteringAuto',\n    'darkMode',\n    'fadeAmount',\n    'colorScheme',\n    'highlightColor',\n    'maxTopFlowsDisplayNum',\n];\nvar HighlightType;\n(function (HighlightType) {\n    HighlightType[\"LOCATION\"] = \"location\";\n    HighlightType[\"FLOW\"] = \"flow\";\n})(HighlightType || (HighlightType = {}));\nexport default class FlowmapLayer extends CompositeLayer {\n    constructor(props) {\n        super(Object.assign(Object.assign({}, props), { onHover: (info, event) => {\n                const startTime = Date.now();\n                this.setState({\n                    highlightedObject: this._getHighlightedObject(info),\n                    lastHoverTime: startTime,\n                });\n                const { onHover } = props;\n                if (onHover) {\n                    this._getFlowmapLayerPickingInfo(info).then((info) => {\n                        var _a, _b;\n                        if (((_b = (_a = this.state) === null || _a === void 0 ? void 0 : _a.lastHoverTime) !== null && _b !== void 0 ? _b : 0) <= startTime) {\n                            this.setState({ pickingInfo: info });\n                            onHover(info, event);\n                        }\n                        else {\n                            // Skipping, because this is not the latest hover event\n                        }\n                    });\n                }\n            }, onClick: (info, event) => {\n                const { onClick } = props;\n                const startTime = Date.now();\n                this.setState({\n                    lastClickTime: startTime,\n                });\n                if (onClick) {\n                    this._getFlowmapLayerPickingInfo(info).then((info) => {\n                        var _a, _b;\n                        if (((_b = (_a = this.state) === null || _a === void 0 ? void 0 : _a.lastClickTime) !== null && _b !== void 0 ? _b : 0) <= startTime) {\n                            this.setState({ pickingInfo: info });\n                            if (info) {\n                                onClick(info, event);\n                            }\n                        }\n                        else {\n                            // Skipping, because this is not the latest hover event\n                        }\n                    });\n                }\n            } }));\n    }\n    initializeState() {\n        this.state = {\n            accessors: new FlowmapAggregateAccessors(this.props),\n            dataProvider: this._getOrMakeDataProvider(),\n            layersData: undefined,\n            highlightedObject: undefined,\n            pickingInfo: undefined,\n            lastHoverTime: undefined,\n            lastClickTime: undefined,\n        };\n    }\n    getPickingInfo({ info }) {\n        var _a, _b;\n        // This is for onHover event handlers set on the <DeckGL> component\n        if (!info.object) {\n            const object = (_b = (_a = this.state) === null || _a === void 0 ? void 0 : _a.pickingInfo) === null || _b === void 0 ? void 0 : _b.object;\n            if (object) {\n                return Object.assign(Object.assign({}, info), { object, picked: true });\n            }\n        }\n        return info;\n    }\n    // private _updateAccessors() {\n    //   this.state?.dataProvider?.setAccessors(this.props);\n    //   this.setState({accessors: new FlowmapAggregateAccessors(this.props)});\n    // }\n    _getOrMakeDataProvider() {\n        const { data, dataProvider } = this.props;\n        if (isFlowmapDataProvider(dataProvider)) {\n            return dataProvider;\n        }\n        else if (isFlowmapData(data)) {\n            const dataProvider = new LocalFlowmapDataProvider(this.props);\n            dataProvider.setFlowmapData(data);\n            return dataProvider;\n        }\n        throw new Error('FlowmapLayer: data must be a FlowmapDataProvider or FlowmapData');\n    }\n    _updateDataProvider() {\n        this.setState({ dataProvider: this._getOrMakeDataProvider() });\n    }\n    shouldUpdateState(params) {\n        const { changeFlags } = params;\n        // if (this._viewportChanged()) {\n        //   return true;\n        // }\n        if (changeFlags.viewportChanged) {\n            return true;\n        }\n        return super.shouldUpdateState(params);\n        // TODO: be smarter on when to update\n        // (e.g. ignore viewport changes when adaptiveScalesEnabled and clustering are false)\n    }\n    updateState({ oldProps, props, changeFlags }) {\n        if (changeFlags.propsChanged) {\n            // this._updateAccessors();\n        }\n        if (changeFlags.dataChanged) {\n            this._updateDataProvider();\n        }\n        if (changeFlags.viewportChanged || changeFlags.dataChanged) {\n            this.setState({ highlightedObject: undefined });\n        }\n        if (changeFlags.viewportChanged ||\n            changeFlags.dataChanged ||\n            (changeFlags.propsChanged &&\n                PROPS_TO_CAUSE_LAYER_DATA_UPDATE.some((prop) => oldProps[prop] !== props[prop]))) {\n            const { dataProvider } = this.state || {};\n            if (dataProvider) {\n                dataProvider.setFlowmapState(this._getFlowmapState());\n                dataProvider.updateLayersData((layersData) => {\n                    this.setState({ layersData, highlightedObject: undefined });\n                }, changeFlags);\n            }\n        }\n    }\n    _getSettingsState() {\n        const { locationTotalsEnabled, locationLabelsEnabled, adaptiveScalesEnabled, animationEnabled, clusteringEnabled, clusteringLevel, fadeEnabled, fadeOpacityEnabled, clusteringAuto, darkMode, fadeAmount, colorScheme, highlightColor, maxTopFlowsDisplayNum, } = this.props;\n        return {\n            locationTotalsEnabled,\n            locationLabelsEnabled,\n            adaptiveScalesEnabled,\n            animationEnabled,\n            clusteringEnabled,\n            clusteringLevel,\n            fadeEnabled,\n            fadeOpacityEnabled,\n            clusteringAuto,\n            darkMode,\n            fadeAmount,\n            colorScheme,\n            highlightColor,\n            maxTopFlowsDisplayNum,\n        };\n    }\n    _getFlowmapState() {\n        return {\n            viewport: pickViewportProps(this.context.viewport),\n            filter: this.props.filter,\n            settings: this._getSettingsState(),\n        };\n    }\n    _getFlowmapLayerPickingInfo(info) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { index, sourceLayer } = info;\n            const { dataProvider, accessors } = this.state || {};\n            if (!dataProvider || !accessors) {\n                return undefined;\n            }\n            const commonInfo = Object.assign(Object.assign({}, info), { picked: info.picked, layer: info.layer, index: info.index, x: info.x, y: info.y, coordinate: info.coordinate, event: info.event });\n            if (sourceLayer instanceof FlowLinesLayer ||\n                sourceLayer instanceof AnimatedFlowLinesLayer) {\n                const flow = index === -1 ? undefined : yield dataProvider.getFlowByIndex(index);\n                if (flow) {\n                    const origin = yield dataProvider.getLocationById(accessors.getFlowOriginId(flow));\n                    const dest = yield dataProvider.getLocationById(accessors.getFlowDestId(flow));\n                    if (origin && dest) {\n                        return Object.assign(Object.assign({}, commonInfo), { object: {\n                                type: PickingType.FLOW,\n                                flow,\n                                origin: origin,\n                                dest: dest,\n                                count: accessors.getFlowMagnitude(flow),\n                            } });\n                    }\n                }\n            }\n            else if (sourceLayer instanceof FlowCirclesLayer) {\n                const location = index === -1 ? undefined : yield dataProvider.getLocationByIndex(index);\n                if (location) {\n                    const id = accessors.getLocationId(location);\n                    const name = accessors.getLocationName(location);\n                    const totals = yield dataProvider.getTotalsForLocation(id);\n                    const { circleAttributes } = ((_a = this.state) === null || _a === void 0 ? void 0 : _a.layersData) || {};\n                    if (totals && circleAttributes) {\n                        const circleRadius = getOuterCircleRadiusByIndex(circleAttributes, info.index);\n                        return Object.assign(Object.assign({}, commonInfo), { object: {\n                                type: PickingType.LOCATION,\n                                location,\n                                id,\n                                name,\n                                totals,\n                                circleRadius: circleRadius,\n                            } });\n                    }\n                }\n            }\n            return undefined;\n        });\n    }\n    _getHighlightedObject(info) {\n        var _a, _b;\n        const { index, sourceLayer } = info;\n        if (index < 0)\n            return undefined;\n        if (sourceLayer instanceof FlowLinesLayer ||\n            sourceLayer instanceof AnimatedFlowLinesLayer) {\n            const { lineAttributes } = ((_a = this.state) === null || _a === void 0 ? void 0 : _a.layersData) || {};\n            if (lineAttributes) {\n                let attrs = getFlowLineAttributesByIndex(lineAttributes, index);\n                if (this.props.fadeOpacityEnabled) {\n                    attrs = Object.assign(Object.assign({}, attrs), { attributes: Object.assign(Object.assign({}, attrs.attributes), { getColor: Object.assign(Object.assign({}, attrs.attributes.getColor), { value: new Uint8Array([\n                                    ...attrs.attributes.getColor.value.slice(0, 3),\n                                    255, // the highlight color should be always opaque\n                                ]) }) }) });\n                }\n                return {\n                    type: HighlightType.FLOW,\n                    lineAttributes: attrs,\n                };\n            }\n        }\n        else if (sourceLayer instanceof FlowCirclesLayer) {\n            const { circleAttributes } = ((_b = this.state) === null || _b === void 0 ? void 0 : _b.layersData) || {};\n            if (circleAttributes) {\n                return {\n                    type: HighlightType.LOCATION,\n                    coords: getLocationCoordsByIndex(circleAttributes, index),\n                    radius: getOuterCircleRadiusByIndex(circleAttributes, index),\n                };\n            }\n        }\n        return undefined;\n    }\n    renderLayers() {\n        var _a;\n        const layers = [];\n        if ((_a = this.state) === null || _a === void 0 ? void 0 : _a.layersData) {\n            const { layersData, highlightedObject } = this.state;\n            const { circleAttributes, lineAttributes, locationLabels } = layersData || {};\n            if (circleAttributes && lineAttributes) {\n                const flowmapColors = getFlowmapColors(this._getSettingsState());\n                const outlineColor = colorAsRgba(flowmapColors.outlineColor || (this.props.darkMode ? '#000' : '#fff'));\n                const commonLineLayerProps = {\n                    data: lineAttributes,\n                    parameters: Object.assign(Object.assign({}, this.props.parameters), { \n                        // prevent z-fighting at non-zero bearing/pitch\n                        depthTest: false }),\n                };\n                if (this.props.animationEnabled) {\n                    layers.push(\n                    // @ts-ignore\n                    new AnimatedFlowLinesLayer(Object.assign({}, this.getSubLayerProps(Object.assign(Object.assign({}, commonLineLayerProps), { id: 'animated-flow-lines', drawOutline: false, thicknessUnit: 20 })))));\n                }\n                else {\n                    layers.push(new FlowLinesLayer(Object.assign({}, this.getSubLayerProps(Object.assign(Object.assign({}, commonLineLayerProps), { id: 'flow-lines', drawOutline: true, outlineColor: outlineColor })))));\n                }\n                layers.push(new FlowCirclesLayer(this.getSubLayerProps({\n                    id: 'circles',\n                    data: circleAttributes,\n                    emptyColor: this.props.darkMode\n                        ? [0, 0, 0, 255]\n                        : [255, 255, 255, 255],\n                    outlineEmptyMix: 0.4,\n                })));\n                if (highlightedObject) {\n                    switch (highlightedObject.type) {\n                        case HighlightType.LOCATION:\n                            layers.push(new ScatterplotLayer(Object.assign({}, this.getSubLayerProps({\n                                id: 'location-highlight',\n                                data: [highlightedObject],\n                                pickable: false,\n                                antialiasing: true,\n                                stroked: true,\n                                filled: false,\n                                lineWidthUnits: 'pixels',\n                                getLineWidth: 2,\n                                radiusUnits: 'pixels',\n                                getRadius: (d) => d.radius,\n                                getLineColor: colorAsRgba(this.props.highlightColor),\n                                getPosition: (d) => d.coords,\n                            }))));\n                            break;\n                        case HighlightType.FLOW:\n                            layers.push(new FlowLinesLayer(Object.assign({}, this.getSubLayerProps({\n                                id: 'flow-highlight',\n                                data: highlightedObject.lineAttributes,\n                                drawOutline: true,\n                                pickable: false,\n                                outlineColor: colorAsRgba(this.props.highlightColor),\n                                outlineThickness: 1,\n                                parameters: {\n                                    depthTest: false,\n                                },\n                            }))));\n                            break;\n                    }\n                }\n            }\n            if (locationLabels) {\n                layers.push(new TextLayer(this.getSubLayerProps({\n                    id: 'location-labels',\n                    data: locationLabels,\n                    maxWidth: 1000,\n                    pickable: false,\n                    fontFamily: 'Helvetica',\n                    getPixelOffset: (d, { index }) => {\n                        const r = getOuterCircleRadiusByIndex(circleAttributes, index);\n                        return [0, r + 5];\n                    },\n                    getPosition: (d, { index }) => {\n                        const pos = getLocationCoordsByIndex(circleAttributes, index);\n                        return pos;\n                    },\n                    getText: (d) => d,\n                    getSize: 10,\n                    getColor: [255, 255, 255, 255],\n                    getAngle: 0,\n                    getTextAnchor: 'middle',\n                    getAlignmentBaseline: 'top',\n                })));\n            }\n        }\n        return layers;\n    }\n}\nFlowmapLayer.defaultProps = {\n    darkMode: true,\n    fadeAmount: 50,\n    locationTotalsEnabled: true,\n    locationLabelsEnabled: false,\n    animationEnabled: false,\n    clusteringEnabled: true,\n    fadeEnabled: true,\n    fadeOpacityEnabled: false,\n    clusteringAuto: true,\n    clusteringLevel: undefined,\n    adaptiveScalesEnabled: true,\n    colorScheme: 'Teal',\n    highlightColor: 'orange',\n    maxTopFlowsDisplayNum: 5000,\n};\nfunction pickViewportProps(viewport) {\n    const { width, height, longitude, latitude, zoom, pitch, bearing } = viewport;\n    return {\n        width,\n        height,\n        longitude,\n        latitude,\n        zoom,\n        pitch,\n        bearing,\n    };\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmxvd21hcExheWVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL0Zsb3dtYXBMYXllci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFDSCxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQzdDLE9BQU8sRUFBQyxnQkFBZ0IsRUFBRSxTQUFTLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUM1RCxPQUFPLEVBQ0wsV0FBVyxFQUdYLHlCQUF5QixFQUl6Qiw0QkFBNEIsRUFDNUIsZ0JBQWdCLEVBQ2hCLHdCQUF3QixFQUN4QiwyQkFBMkIsRUFDM0IsYUFBYSxFQUNiLHFCQUFxQixFQUVyQix3QkFBd0IsR0FFekIsTUFBTSxrQkFBa0IsQ0FBQztBQUMxQixPQUFPLHNCQUFzQixNQUFNLDBCQUEwQixDQUFDO0FBQzlELE9BQU8sZ0JBQWdCLE1BQU0sb0JBQW9CLENBQUM7QUFDbEQsT0FBTyxjQUFjLE1BQU0sa0JBQWtCLENBQUM7QUFDOUMsT0FBTyxFQUlMLFdBQVcsR0FDWixNQUFNLFNBQVMsQ0FBQztBQTRCakIsTUFBTSxnQ0FBZ0MsR0FBYTtJQUNqRCxRQUFRO0lBQ1IsdUJBQXVCO0lBQ3ZCLHVCQUF1QjtJQUN2Qix1QkFBdUI7SUFDdkIsa0JBQWtCO0lBQ2xCLG1CQUFtQjtJQUNuQixpQkFBaUI7SUFDakIsYUFBYTtJQUNiLG9CQUFvQjtJQUNwQixnQkFBZ0I7SUFDaEIsVUFBVTtJQUNWLFlBQVk7SUFDWixhQUFhO0lBQ2IsZ0JBQWdCO0lBQ2hCLHVCQUF1QjtDQUN4QixDQUFDO0FBRUYsSUFBSyxhQUdKO0FBSEQsV0FBSyxhQUFhO0lBQ2hCLHNDQUFxQixDQUFBO0lBQ3JCLDhCQUFhLENBQUE7QUFDZixDQUFDLEVBSEksYUFBYSxLQUFiLGFBQWEsUUFHakI7QUEyQkQsTUFBTSxDQUFDLE9BQU8sT0FBTyxZQUFtQixTQUFRLGNBQWM7SUFtQjVELFlBQW1C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SUFDNUIsZ0JBQWdCLEVBQUUsS0FBSztJQUN2QixpQkFBaUIsRUFBRSxJQUFJO0lBQ3ZCLFdBQVcsRUFBRSxJQUFJO0lBQ2pCLGtCQUFrQixFQUFFLEtBQUs7SUFDekIsY0FBYyxFQUFFLElBQUk7SUFDcEIsZUFBZSxFQUFFLFNBQVM7SUFDMUIscUJBQXFCLEVBQUUsSUFBSTtJQUMzQixXQUFXLEVBQUUsTUFBTTtJQUNuQixjQUFjLEVBQUUsUUFBUTtJQUN4QixxQkFBcUIsRUFBRSxJQUFJO0NBQzVCLENBQUM7QUFpYkosU0FBUyxpQkFBaUIsQ0FBQyxRQUE2QjtJQUN0RCxNQUFNLEVBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFDLEdBQUcsUUFBUSxDQUFDO0lBQzVFLE9BQU87UUFDTCxLQUFLO1FBQ0wsTUFBTTtRQUNOLFNBQVM7UUFDVCxRQUFRO1FBQ1IsSUFBSTtRQUNKLEtBQUs7UUFDTCxPQUFPO0tBQ1IsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMjIgRmxvd21hcEJsdWVcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqXG4gKi9cbmltcG9ydCB7Q29tcG9zaXRlTGF5ZXJ9IGZyb20gJ0BkZWNrLmdsL2NvcmUnO1xuaW1wb3J0IHtTY2F0dGVycGxvdExheWVyLCBUZXh0TGF5ZXJ9IGZyb20gJ0BkZWNrLmdsL2xheWVycyc7XG5pbXBvcnQge1xuICBjb2xvckFzUmdiYSxcbiAgRmlsdGVyU3RhdGUsXG4gIEZsb3dMaW5lc0xheWVyQXR0cmlidXRlcyxcbiAgRmxvd21hcEFnZ3JlZ2F0ZUFjY2Vzc29ycyxcbiAgRmxvd21hcERhdGEsXG4gIEZsb3dtYXBEYXRhQWNjZXNzb3JzLFxuICBGbG93bWFwRGF0YVByb3ZpZGVyLFxuICBnZXRGbG93TGluZUF0dHJpYnV0ZXNCeUluZGV4LFxuICBnZXRGbG93bWFwQ29sb3JzLFxuICBnZXRMb2NhdGlvbkNvb3Jkc0J5SW5kZXgsXG4gIGdldE91dGVyQ2lyY2xlUmFkaXVzQnlJbmRleCxcbiAgaXNGbG93bWFwRGF0YSxcbiAgaXNGbG93bWFwRGF0YVByb3ZpZGVyLFxuICBMYXllcnNEYXRhLFxuICBMb2NhbEZsb3dtYXBEYXRhUHJvdmlkZXIsXG4gIFZpZXdwb3J0UHJvcHMsXG59IGZyb20gJ0BmbG93bWFwLmdsL2RhdGEnO1xuaW1wb3J0IEFuaW1hdGVkRmxvd0xpbmVzTGF5ZXIgZnJvbSAnLi9BbmltYXRlZEZsb3dMaW5lc0xheWVyJztcbmltcG9ydCBGbG93Q2lyY2xlc0xheWVyIGZyb20gJy4vRmxvd0NpcmNsZXNMYXllcic7XG5pbXBvcnQgRmxvd0xpbmVzTGF5ZXIgZnJvbSAnLi9GbG93TGluZXNMYXllcic7XG5pbXBvcnQge1xuICBGbG93bWFwTGF5ZXJQaWNraW5nSW5mbyxcbiAgTGF5ZXJQcm9wcyxcbiAgUGlja2luZ0luZm8sXG4gIFBpY2tpbmdUeXBlLFxufSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IHR5cGUgRmxvd21hcExheWVyUHJvcHM8TCwgRj4gPSB7XG4gIGRhdGE/OiBGbG93bWFwRGF0YTxMLCBGPjtcbiAgZGF0YVByb3ZpZGVyPzogRmxvd21hcERhdGFQcm92aWRlcjxMLCBGPjtcbiAgZmlsdGVyPzogRmlsdGVyU3RhdGU7XG4gIGxvY2F0aW9uVG90YWxzRW5hYmxlZD86IGJvb2xlYW47XG4gIGxvY2F0aW9uTGFiZWxzRW5hYmxlZD86IGJvb2xlYW47XG4gIGFkYXB0aXZlU2NhbGVzRW5hYmxlZD86IGJvb2xlYW47XG4gIGFuaW1hdGlvbkVuYWJsZWQ/OiBib29sZWFuO1xuICBjbHVzdGVyaW5nRW5hYmxlZD86IGJvb2xlYW47XG4gIGNsdXN0ZXJpbmdMZXZlbD86IG51bWJlcjtcbiAgZmFkZUVuYWJsZWQ/OiBib29sZWFuO1xuICBmYWRlT3BhY2l0eUVuYWJsZWQ/OiBib29sZWFuO1xuICBjbHVzdGVyaW5nQXV0bz86IGJvb2xlYW47XG4gIGRhcmtNb2RlPzogYm9vbGVhbjtcbiAgZmFkZUFtb3VudD86IG51bWJlcjtcbiAgY29sb3JTY2hlbWU/OiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgaGlnaGxpZ2h0Q29sb3I/OiBzdHJpbmcgfCBudW1iZXJbXTtcbiAgbWF4VG9wRmxvd3NEaXNwbGF5TnVtPzogbnVtYmVyO1xuICBvbkhvdmVyPzogKFxuICAgIGluZm86IEZsb3dtYXBMYXllclBpY2tpbmdJbmZvPEwsIEY+IHwgdW5kZWZpbmVkLFxuICAgIGV2ZW50OiBTb3VyY2VFdmVudCxcbiAgKSA9PiB2b2lkO1xuICBvbkNsaWNrPzogKGluZm86IEZsb3dtYXBMYXllclBpY2tpbmdJbmZvPEwsIEY+LCBldmVudDogU291cmNlRXZlbnQpID0+IHZvaWQ7XG59ICYgUGFydGlhbDxGbG93bWFwRGF0YUFjY2Vzc29yczxMLCBGPj4gJlxuICBMYXllclByb3BzO1xuXG5jb25zdCBQUk9QU19UT19DQVVTRV9MQVlFUl9EQVRBX1VQREFURTogc3RyaW5nW10gPSBbXG4gICdmaWx0ZXInLFxuICAnbG9jYXRpb25Ub3RhbHNFbmFibGVkJyxcbiAgJ2xvY2F0aW9uTGFiZWxzRW5hYmxlZCcsXG4gICdhZGFwdGl2ZVNjYWxlc0VuYWJsZWQnLFxuICAnYW5pbWF0aW9uRW5hYmxlZCcsXG4gICdjbHVzdGVyaW5nRW5hYmxlZCcsXG4gICdjbHVzdGVyaW5nTGV2ZWwnLFxuICAnZmFkZUVuYWJsZWQnLFxuICAnZmFkZU9wYWNpdHlFbmFibGVkJyxcbiAgJ2NsdXN0ZXJpbmdBdXRvJyxcbiAgJ2RhcmtNb2RlJyxcbiAgJ2ZhZGVBbW91bnQnLFxuICAnY29sb3JTY2hlbWUnLFxuICAnaGlnaGxpZ2h0Q29sb3InLFxuICAnbWF4VG9wRmxvd3NEaXNwbGF5TnVtJyxcbl07XG5cbmVudW0gSGlnaGxpZ2h0VHlwZSB7XG4gIExPQ0FUSU9OID0gJ2xvY2F0aW9uJyxcbiAgRkxPVyA9ICdmbG93Jyxcbn1cblxudHlwZSBIaWdobGlnaHRlZExvY2F0aW9uT2JqZWN0ID0ge1xuICB0eXBlOiBIaWdobGlnaHRUeXBlLkxPQ0FUSU9OO1xuICBjb29yZHM6IFtudW1iZXIsIG51bWJlcl07XG4gIHJhZGl1czogbnVtYmVyO1xufTtcblxudHlwZSBIaWdobGlnaHRlZEZsb3dPYmplY3QgPSB7XG4gIHR5cGU6IEhpZ2hsaWdodFR5cGUuRkxPVztcbiAgbGluZUF0dHJpYnV0ZXM6IEZsb3dMaW5lc0xheWVyQXR0cmlidXRlcztcbn07XG5cbnR5cGUgSGlnaGxpZ2h0ZWRPYmplY3QgPSBIaWdobGlnaHRlZExvY2F0aW9uT2JqZWN0IHwgSGlnaGxpZ2h0ZWRGbG93T2JqZWN0O1xuXG50eXBlIFN0YXRlPEwsIEY+ID0ge1xuICBhY2Nlc3NvcnM6IEZsb3dtYXBBZ2dyZWdhdGVBY2Nlc3NvcnM8TCwgRj47XG4gIGRhdGFQcm92aWRlcjogRmxvd21hcERhdGFQcm92aWRlcjxMLCBGPjtcbiAgbGF5ZXJzRGF0YTogTGF5ZXJzRGF0YSB8IHVuZGVmaW5lZDtcbiAgaGlnaGxpZ2h0ZWRPYmplY3Q6IEhpZ2hsaWdodGVkT2JqZWN0IHwgdW5kZWZpbmVkO1xuICBwaWNraW5nSW5mbzogRmxvd21hcExheWVyUGlja2luZ0luZm88TCwgRj4gfCB1bmRlZmluZWQ7XG4gIGxhc3RIb3ZlclRpbWU6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgbGFzdENsaWNrVGltZTogbnVtYmVyIHwgdW5kZWZpbmVkO1xufTtcblxuZXhwb3J0IHR5cGUgU291cmNlRXZlbnQgPSB7c3JjRXZlbnQ6IE1vdXNlRXZlbnR9O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGbG93bWFwTGF5ZXI8TCwgRj4gZXh0ZW5kcyBDb21wb3NpdGVMYXllciB7XG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgZGFya01vZGU6IHRydWUsXG4gICAgZmFkZUFtb3VudDogNTAsXG4gICAgbG9jYXRpb25Ub3RhbHNFbmFibGVkOiB0cnVlLFxuICAgIGxvY2F0aW9uTGFiZWxzRW5hYmxlZDogZmFsc2UsXG4gICAgYW5pbWF0aW9uRW5hYmxlZDogZmFsc2UsXG4gICAgY2x1c3RlcmluZ0VuYWJsZWQ6IHRydWUsXG4gICAgZmFkZUVuYWJsZWQ6IHRydWUsXG4gICAgZmFkZU9wYWNpdHlFbmFibGVkOiBmYWxzZSxcbiAgICBjbHVzdGVyaW5nQXV0bzogdHJ1ZSxcbiAgICBjbHVzdGVyaW5nTGV2ZWw6IHVuZGVmaW5lZCxcbiAgICBhZGFwdGl2ZVNjYWxlc0VuYWJsZWQ6IHRydWUsXG4gICAgY29sb3JTY2hlbWU6ICdUZWFsJyxcbiAgICBoaWdobGlnaHRDb2xvcjogJ29yYW5nZScsXG4gICAgbWF4VG9wRmxvd3NEaXNwbGF5TnVtOiA1MDAwLFxuICB9O1xuICBzdGF0ZTogU3RhdGU8TCwgRj4gfCB1bmRlZmluZWQ7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKHByb3BzOiBGbG93bWFwTGF5ZXJQcm9wczxMLCBGPikge1xuICAgIHN1cGVyKHtcbiAgICAgIC4uLnByb3BzLFxuICAgICAgb25Ib3ZlcjogKGluZm86IFBpY2tpbmdJbmZvPGFueT4sIGV2ZW50OiBTb3VyY2VFdmVudCkgPT4ge1xuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBoaWdobGlnaHRlZE9iamVjdDogdGhpcy5fZ2V0SGlnaGxpZ2h0ZWRPYmplY3QoaW5mbyksXG4gICAgICAgICAgbGFzdEhvdmVyVGltZTogc3RhcnRUaW1lLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB7b25Ib3Zlcn0gPSBwcm9wcztcbiAgICAgICAgaWYgKG9uSG92ZXIpIHtcbiAgICAgICAgICB0aGlzLl9nZXRGbG93bWFwTGF5ZXJQaWNraW5nSW5mbyhpbmZvKS50aGVuKChpbmZvKSA9PiB7XG4gICAgICAgICAgICBpZiAoKHRoaXMuc3RhdGU/Lmxhc3RIb3ZlclRpbWUgPz8gMCkgPD0gc3RhcnRUaW1lKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3BpY2tpbmdJbmZvOiBpbmZvfSk7XG4gICAgICAgICAgICAgIG9uSG92ZXIoaW5mbywgZXZlbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gU2tpcHBpbmcsIGJlY2F1c2UgdGhpcyBpcyBub3QgdGhlIGxhdGVzdCBob3ZlciBldmVudFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25DbGljazogKGluZm86IFBpY2tpbmdJbmZvPGFueT4sIGV2ZW50OiBTb3VyY2VFdmVudCkgPT4ge1xuICAgICAgICBjb25zdCB7b25DbGlja30gPSBwcm9wcztcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgbGFzdENsaWNrVGltZTogc3RhcnRUaW1lLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG9uQ2xpY2spIHtcbiAgICAgICAgICB0aGlzLl9nZXRGbG93bWFwTGF5ZXJQaWNraW5nSW5mbyhpbmZvKS50aGVuKChpbmZvKSA9PiB7XG4gICAgICAgICAgICBpZiAoKHRoaXMuc3RhdGU/Lmxhc3RDbGlja1RpbWUgPz8gMCkgPD0gc3RhcnRUaW1lKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3BpY2tpbmdJbmZvOiBpbmZvfSk7XG4gICAgICAgICAgICAgIGlmIChpbmZvKSB7XG4gICAgICAgICAgICAgICAgb25DbGljayhpbmZvLCBldmVudCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIFNraXBwaW5nLCBiZWNhdXNlIHRoaXMgaXMgbm90IHRoZSBsYXRlc3QgaG92ZXIgZXZlbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIGluaXRpYWxpemVTdGF0ZSgpIHtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgYWNjZXNzb3JzOiBuZXcgRmxvd21hcEFnZ3JlZ2F0ZUFjY2Vzc29yczxMLCBGPih0aGlzLnByb3BzKSxcbiAgICAgIGRhdGFQcm92aWRlcjogdGhpcy5fZ2V0T3JNYWtlRGF0YVByb3ZpZGVyKCksXG4gICAgICBsYXllcnNEYXRhOiB1bmRlZmluZWQsXG4gICAgICBoaWdobGlnaHRlZE9iamVjdDogdW5kZWZpbmVkLFxuICAgICAgcGlja2luZ0luZm86IHVuZGVmaW5lZCxcbiAgICAgIGxhc3RIb3ZlclRpbWU6IHVuZGVmaW5lZCxcbiAgICAgIGxhc3RDbGlja1RpbWU6IHVuZGVmaW5lZCxcbiAgICB9O1xuICB9XG5cbiAgZ2V0UGlja2luZ0luZm8oe2luZm99OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSB7XG4gICAgLy8gVGhpcyBpcyBmb3Igb25Ib3ZlciBldmVudCBoYW5kbGVycyBzZXQgb24gdGhlIDxEZWNrR0w+IGNvbXBvbmVudFxuICAgIGlmICghaW5mby5vYmplY3QpIHtcbiAgICAgIGNvbnN0IG9iamVjdCA9IHRoaXMuc3RhdGU/LnBpY2tpbmdJbmZvPy5vYmplY3Q7XG4gICAgICBpZiAob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uaW5mbyxcbiAgICAgICAgICBvYmplY3QsXG4gICAgICAgICAgcGlja2VkOiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaW5mbztcbiAgfVxuXG4gIC8vIHByaXZhdGUgX3VwZGF0ZUFjY2Vzc29ycygpIHtcbiAgLy8gICB0aGlzLnN0YXRlPy5kYXRhUHJvdmlkZXI/LnNldEFjY2Vzc29ycyh0aGlzLnByb3BzKTtcbiAgLy8gICB0aGlzLnNldFN0YXRlKHthY2Nlc3NvcnM6IG5ldyBGbG93bWFwQWdncmVnYXRlQWNjZXNzb3JzKHRoaXMucHJvcHMpfSk7XG4gIC8vIH1cblxuICBwcml2YXRlIF9nZXRPck1ha2VEYXRhUHJvdmlkZXIoKSB7XG4gICAgY29uc3Qge2RhdGEsIGRhdGFQcm92aWRlcn0gPSB0aGlzLnByb3BzO1xuICAgIGlmIChpc0Zsb3dtYXBEYXRhUHJvdmlkZXI8TCwgRj4oZGF0YVByb3ZpZGVyKSkge1xuICAgICAgcmV0dXJuIGRhdGFQcm92aWRlcjtcbiAgICB9IGVsc2UgaWYgKGlzRmxvd21hcERhdGE8TCwgRj4oZGF0YSkpIHtcbiAgICAgIGNvbnN0IGRhdGFQcm92aWRlciA9IG5ldyBMb2NhbEZsb3dtYXBEYXRhUHJvdmlkZXI8TCwgRj4odGhpcy5wcm9wcyk7XG4gICAgICBkYXRhUHJvdmlkZXIuc2V0Rmxvd21hcERhdGEoZGF0YSk7XG4gICAgICByZXR1cm4gZGF0YVByb3ZpZGVyO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnRmxvd21hcExheWVyOiBkYXRhIG11c3QgYmUgYSBGbG93bWFwRGF0YVByb3ZpZGVyIG9yIEZsb3dtYXBEYXRhJyxcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlRGF0YVByb3ZpZGVyKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2RhdGFQcm92aWRlcjogdGhpcy5fZ2V0T3JNYWtlRGF0YVByb3ZpZGVyKCl9KTtcbiAgfVxuXG4gIHNob3VsZFVwZGF0ZVN0YXRlKHBhcmFtczogUmVjb3JkPHN0cmluZywgYW55Pik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHtjaGFuZ2VGbGFnc30gPSBwYXJhbXM7XG4gICAgLy8gaWYgKHRoaXMuX3ZpZXdwb3J0Q2hhbmdlZCgpKSB7XG4gICAgLy8gICByZXR1cm4gdHJ1ZTtcbiAgICAvLyB9XG4gICAgaWYgKGNoYW5nZUZsYWdzLnZpZXdwb3J0Q2hhbmdlZCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBzdXBlci5zaG91bGRVcGRhdGVTdGF0ZShwYXJhbXMpO1xuICAgIC8vIFRPRE86IGJlIHNtYXJ0ZXIgb24gd2hlbiB0byB1cGRhdGVcbiAgICAvLyAoZS5nLiBpZ25vcmUgdmlld3BvcnQgY2hhbmdlcyB3aGVuIGFkYXB0aXZlU2NhbGVzRW5hYmxlZCBhbmQgY2x1c3RlcmluZyBhcmUgZmFsc2UpXG4gIH1cblxuICB1cGRhdGVTdGF0ZSh7b2xkUHJvcHMsIHByb3BzLCBjaGFuZ2VGbGFnc306IFJlY29yZDxzdHJpbmcsIGFueT4pOiB2b2lkIHtcbiAgICBpZiAoY2hhbmdlRmxhZ3MucHJvcHNDaGFuZ2VkKSB7XG4gICAgICAvLyB0aGlzLl91cGRhdGVBY2Nlc3NvcnMoKTtcbiAgICB9XG4gICAgaWYgKGNoYW5nZUZsYWdzLmRhdGFDaGFuZ2VkKSB7XG4gICAgICB0aGlzLl91cGRhdGVEYXRhUHJvdmlkZXIoKTtcbiAgICB9XG4gICAgaWYgKGNoYW5nZUZsYWdzLnZpZXdwb3J0Q2hhbmdlZCB8fCBjaGFuZ2VGbGFncy5kYXRhQ2hhbmdlZCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7aGlnaGxpZ2h0ZWRPYmplY3Q6IHVuZGVmaW5lZH0pO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGNoYW5nZUZsYWdzLnZpZXdwb3J0Q2hhbmdlZCB8fFxuICAgICAgY2hhbmdlRmxhZ3MuZGF0YUNoYW5nZWQgfHxcbiAgICAgIChjaGFuZ2VGbGFncy5wcm9wc0NoYW5nZWQgJiZcbiAgICAgICAgUFJPUFNfVE9fQ0FVU0VfTEFZRVJfREFUQV9VUERBVEUuc29tZShcbiAgICAgICAgICAocHJvcCkgPT4gb2xkUHJvcHNbcHJvcF0gIT09IHByb3BzW3Byb3BdLFxuICAgICAgICApKVxuICAgICkge1xuICAgICAgY29uc3Qge2RhdGFQcm92aWRlcn0gPSB0aGlzLnN0YXRlIHx8IHt9O1xuICAgICAgaWYgKGRhdGFQcm92aWRlcikge1xuICAgICAgICBkYXRhUHJvdmlkZXIuc2V0Rmxvd21hcFN0YXRlKHRoaXMuX2dldEZsb3dtYXBTdGF0ZSgpKTtcbiAgICAgICAgZGF0YVByb3ZpZGVyLnVwZGF0ZUxheWVyc0RhdGEoKGxheWVyc0RhdGE6IExheWVyc0RhdGEgfCB1bmRlZmluZWQpID0+IHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtsYXllcnNEYXRhLCBoaWdobGlnaHRlZE9iamVjdDogdW5kZWZpbmVkfSk7XG4gICAgICAgIH0sIGNoYW5nZUZsYWdzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9nZXRTZXR0aW5nc1N0YXRlKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGxvY2F0aW9uVG90YWxzRW5hYmxlZCxcbiAgICAgIGxvY2F0aW9uTGFiZWxzRW5hYmxlZCxcbiAgICAgIGFkYXB0aXZlU2NhbGVzRW5hYmxlZCxcbiAgICAgIGFuaW1hdGlvbkVuYWJsZWQsXG4gICAgICBjbHVzdGVyaW5nRW5hYmxlZCxcbiAgICAgIGNsdXN0ZXJpbmdMZXZlbCxcbiAgICAgIGZhZGVFbmFibGVkLFxuICAgICAgZmFkZU9wYWNpdHlFbmFibGVkLFxuICAgICAgY2x1c3RlcmluZ0F1dG8sXG4gICAgICBkYXJrTW9kZSxcbiAgICAgIGZhZGVBbW91bnQsXG4gICAgICBjb2xvclNjaGVtZSxcbiAgICAgIGhpZ2hsaWdodENvbG9yLFxuICAgICAgbWF4VG9wRmxvd3NEaXNwbGF5TnVtLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIHJldHVybiB7XG4gICAgICBsb2NhdGlvblRvdGFsc0VuYWJsZWQsXG4gICAgICBsb2NhdGlvbkxhYmVsc0VuYWJsZWQsXG4gICAgICBhZGFwdGl2ZVNjYWxlc0VuYWJsZWQsXG4gICAgICBhbmltYXRpb25FbmFibGVkLFxuICAgICAgY2x1c3RlcmluZ0VuYWJsZWQsXG4gICAgICBjbHVzdGVyaW5nTGV2ZWwsXG4gICAgICBmYWRlRW5hYmxlZCxcbiAgICAgIGZhZGVPcGFjaXR5RW5hYmxlZCxcbiAgICAgIGNsdXN0ZXJpbmdBdXRvLFxuICAgICAgZGFya01vZGUsXG4gICAgICBmYWRlQW1vdW50LFxuICAgICAgY29sb3JTY2hlbWUsXG4gICAgICBoaWdobGlnaHRDb2xvcixcbiAgICAgIG1heFRvcEZsb3dzRGlzcGxheU51bSxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBfZ2V0Rmxvd21hcFN0YXRlKCkge1xuICAgIHJldHVybiB7XG4gICAgICB2aWV3cG9ydDogcGlja1ZpZXdwb3J0UHJvcHModGhpcy5jb250ZXh0LnZpZXdwb3J0KSxcbiAgICAgIGZpbHRlcjogdGhpcy5wcm9wcy5maWx0ZXIsXG4gICAgICBzZXR0aW5nczogdGhpcy5fZ2V0U2V0dGluZ3NTdGF0ZSgpLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF9nZXRGbG93bWFwTGF5ZXJQaWNraW5nSW5mbyhcbiAgICBpbmZvOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICApOiBQcm9taXNlPEZsb3dtYXBMYXllclBpY2tpbmdJbmZvPEwsIEY+IHwgdW5kZWZpbmVkPiB7XG4gICAgY29uc3Qge2luZGV4LCBzb3VyY2VMYXllcn0gPSBpbmZvO1xuICAgIGNvbnN0IHtkYXRhUHJvdmlkZXIsIGFjY2Vzc29yc30gPSB0aGlzLnN0YXRlIHx8IHt9O1xuICAgIGlmICghZGF0YVByb3ZpZGVyIHx8ICFhY2Nlc3NvcnMpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGNvbW1vbkluZm8gPSB7XG4gICAgICAuLi5pbmZvLFxuICAgICAgcGlja2VkOiBpbmZvLnBpY2tlZCxcbiAgICAgIGxheWVyOiBpbmZvLmxheWVyLFxuICAgICAgaW5kZXg6IGluZm8uaW5kZXgsXG4gICAgICB4OiBpbmZvLngsXG4gICAgICB5OiBpbmZvLnksXG4gICAgICBjb29yZGluYXRlOiBpbmZvLmNvb3JkaW5hdGUsXG4gICAgICBldmVudDogaW5mby5ldmVudCxcbiAgICB9O1xuICAgIGlmIChcbiAgICAgIHNvdXJjZUxheWVyIGluc3RhbmNlb2YgRmxvd0xpbmVzTGF5ZXIgfHxcbiAgICAgIHNvdXJjZUxheWVyIGluc3RhbmNlb2YgQW5pbWF0ZWRGbG93TGluZXNMYXllclxuICAgICkge1xuICAgICAgY29uc3QgZmxvdyA9XG4gICAgICAgIGluZGV4ID09PSAtMSA/IHVuZGVmaW5lZCA6IGF3YWl0IGRhdGFQcm92aWRlci5nZXRGbG93QnlJbmRleChpbmRleCk7XG4gICAgICBpZiAoZmxvdykge1xuICAgICAgICBjb25zdCBvcmlnaW4gPSBhd2FpdCBkYXRhUHJvdmlkZXIuZ2V0TG9jYXRpb25CeUlkKFxuICAgICAgICAgIGFjY2Vzc29ycy5nZXRGbG93T3JpZ2luSWQoZmxvdyksXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGRlc3QgPSBhd2FpdCBkYXRhUHJvdmlkZXIuZ2V0TG9jYXRpb25CeUlkKFxuICAgICAgICAgIGFjY2Vzc29ycy5nZXRGbG93RGVzdElkKGZsb3cpLFxuICAgICAgICApO1xuICAgICAgICBpZiAob3JpZ2luICYmIGRlc3QpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uY29tbW9uSW5mbyxcbiAgICAgICAgICAgIG9iamVjdDoge1xuICAgICAgICAgICAgICB0eXBlOiBQaWNraW5nVHlwZS5GTE9XLFxuICAgICAgICAgICAgICBmbG93LFxuICAgICAgICAgICAgICBvcmlnaW46IG9yaWdpbixcbiAgICAgICAgICAgICAgZGVzdDogZGVzdCxcbiAgICAgICAgICAgICAgY291bnQ6IGFjY2Vzc29ycy5nZXRGbG93TWFnbml0dWRlKGZsb3cpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzb3VyY2VMYXllciBpbnN0YW5jZW9mIEZsb3dDaXJjbGVzTGF5ZXIpIHtcbiAgICAgIGNvbnN0IGxvY2F0aW9uID1cbiAgICAgICAgaW5kZXggPT09IC0xID8gdW5kZWZpbmVkIDogYXdhaXQgZGF0YVByb3ZpZGVyLmdldExvY2F0aW9uQnlJbmRleChpbmRleCk7XG5cbiAgICAgIGlmIChsb2NhdGlvbikge1xuICAgICAgICBjb25zdCBpZCA9IGFjY2Vzc29ycy5nZXRMb2NhdGlvbklkKGxvY2F0aW9uKTtcbiAgICAgICAgY29uc3QgbmFtZSA9IGFjY2Vzc29ycy5nZXRMb2NhdGlvbk5hbWUobG9jYXRpb24pO1xuICAgICAgICBjb25zdCB0b3RhbHMgPSBhd2FpdCBkYXRhUHJvdmlkZXIuZ2V0VG90YWxzRm9yTG9jYXRpb24oaWQpO1xuICAgICAgICBjb25zdCB7Y2lyY2xlQXR0cmlidXRlc30gPSB0aGlzLnN0YXRlPy5sYXllcnNEYXRhIHx8IHt9O1xuICAgICAgICBpZiAodG90YWxzICYmIGNpcmNsZUF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICBjb25zdCBjaXJjbGVSYWRpdXMgPSBnZXRPdXRlckNpcmNsZVJhZGl1c0J5SW5kZXgoXG4gICAgICAgICAgICBjaXJjbGVBdHRyaWJ1dGVzLFxuICAgICAgICAgICAgaW5mby5pbmRleCxcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5jb21tb25JbmZvLFxuICAgICAgICAgICAgb2JqZWN0OiB7XG4gICAgICAgICAgICAgIHR5cGU6IFBpY2tpbmdUeXBlLkxPQ0FUSU9OLFxuICAgICAgICAgICAgICBsb2NhdGlvbixcbiAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgIHRvdGFscyxcbiAgICAgICAgICAgICAgY2lyY2xlUmFkaXVzOiBjaXJjbGVSYWRpdXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgcHJpdmF0ZSBfZ2V0SGlnaGxpZ2h0ZWRPYmplY3QoXG4gICAgaW5mbzogUmVjb3JkPHN0cmluZywgYW55PixcbiAgKTogSGlnaGxpZ2h0ZWRPYmplY3QgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHtpbmRleCwgc291cmNlTGF5ZXJ9ID0gaW5mbztcbiAgICBpZiAoaW5kZXggPCAwKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGlmIChcbiAgICAgIHNvdXJjZUxheWVyIGluc3RhbmNlb2YgRmxvd0xpbmVzTGF5ZXIgfHxcbiAgICAgIHNvdXJjZUxheWVyIGluc3RhbmNlb2YgQW5pbWF0ZWRGbG93TGluZXNMYXllclxuICAgICkge1xuICAgICAgY29uc3Qge2xpbmVBdHRyaWJ1dGVzfSA9IHRoaXMuc3RhdGU/LmxheWVyc0RhdGEgfHwge307XG4gICAgICBpZiAobGluZUF0dHJpYnV0ZXMpIHtcbiAgICAgICAgbGV0IGF0dHJzID0gZ2V0Rmxvd0xpbmVBdHRyaWJ1dGVzQnlJbmRleChsaW5lQXR0cmlidXRlcywgaW5kZXgpO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5mYWRlT3BhY2l0eUVuYWJsZWQpIHtcbiAgICAgICAgICBhdHRycyA9IHtcbiAgICAgICAgICAgIC4uLmF0dHJzLFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAuLi5hdHRycy5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgICBnZXRDb2xvcjoge1xuICAgICAgICAgICAgICAgIC4uLmF0dHJzLmF0dHJpYnV0ZXMuZ2V0Q29sb3IsXG4gICAgICAgICAgICAgICAgdmFsdWU6IG5ldyBVaW50OEFycmF5KFtcbiAgICAgICAgICAgICAgICAgIC4uLmF0dHJzLmF0dHJpYnV0ZXMuZ2V0Q29sb3IudmFsdWUuc2xpY2UoMCwgMyksXG4gICAgICAgICAgICAgICAgICAyNTUsIC8vIHRoZSBoaWdobGlnaHQgY29sb3Igc2hvdWxkIGJlIGFsd2F5cyBvcGFxdWVcbiAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IEhpZ2hsaWdodFR5cGUuRkxPVyxcbiAgICAgICAgICBsaW5lQXR0cmlidXRlczogYXR0cnMsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzb3VyY2VMYXllciBpbnN0YW5jZW9mIEZsb3dDaXJjbGVzTGF5ZXIpIHtcbiAgICAgIGNvbnN0IHtjaXJjbGVBdHRyaWJ1dGVzfSA9IHRoaXMuc3RhdGU/LmxheWVyc0RhdGEgfHwge307XG4gICAgICBpZiAoY2lyY2xlQXR0cmlidXRlcykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IEhpZ2hsaWdodFR5cGUuTE9DQVRJT04sXG4gICAgICAgICAgY29vcmRzOiBnZXRMb2NhdGlvbkNvb3Jkc0J5SW5kZXgoY2lyY2xlQXR0cmlidXRlcywgaW5kZXgpLFxuICAgICAgICAgIHJhZGl1czogZ2V0T3V0ZXJDaXJjbGVSYWRpdXNCeUluZGV4KGNpcmNsZUF0dHJpYnV0ZXMsIGluZGV4KSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHJlbmRlckxheWVycygpOiBBcnJheTxhbnk+IHtcbiAgICBjb25zdCBsYXllcnMgPSBbXTtcbiAgICBpZiAodGhpcy5zdGF0ZT8ubGF5ZXJzRGF0YSkge1xuICAgICAgY29uc3Qge2xheWVyc0RhdGEsIGhpZ2hsaWdodGVkT2JqZWN0fSA9IHRoaXMuc3RhdGU7XG4gICAgICBjb25zdCB7Y2lyY2xlQXR0cmlidXRlcywgbGluZUF0dHJpYnV0ZXMsIGxvY2F0aW9uTGFiZWxzfSA9XG4gICAgICAgIGxheWVyc0RhdGEgfHwge307XG4gICAgICBpZiAoY2lyY2xlQXR0cmlidXRlcyAmJiBsaW5lQXR0cmlidXRlcykge1xuICAgICAgICBjb25zdCBmbG93bWFwQ29sb3JzID0gZ2V0Rmxvd21hcENvbG9ycyh0aGlzLl9nZXRTZXR0aW5nc1N0YXRlKCkpO1xuICAgICAgICBjb25zdCBvdXRsaW5lQ29sb3IgPSBjb2xvckFzUmdiYShcbiAgICAgICAgICBmbG93bWFwQ29sb3JzLm91dGxpbmVDb2xvciB8fCAodGhpcy5wcm9wcy5kYXJrTW9kZSA/ICcjMDAwJyA6ICcjZmZmJyksXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGNvbW1vbkxpbmVMYXllclByb3BzID0ge1xuICAgICAgICAgIGRhdGE6IGxpbmVBdHRyaWJ1dGVzLFxuICAgICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgIC4uLnRoaXMucHJvcHMucGFyYW1ldGVycyxcbiAgICAgICAgICAgIC8vIHByZXZlbnQgei1maWdodGluZyBhdCBub24temVybyBiZWFyaW5nL3BpdGNoXG4gICAgICAgICAgICBkZXB0aFRlc3Q6IGZhbHNlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFuaW1hdGlvbkVuYWJsZWQpIHtcbiAgICAgICAgICBsYXllcnMucHVzaChcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIG5ldyBBbmltYXRlZEZsb3dMaW5lc0xheWVyKHtcbiAgICAgICAgICAgICAgLi4udGhpcy5nZXRTdWJMYXllclByb3BzKHtcbiAgICAgICAgICAgICAgICAuLi5jb21tb25MaW5lTGF5ZXJQcm9wcyxcbiAgICAgICAgICAgICAgICBpZDogJ2FuaW1hdGVkLWZsb3ctbGluZXMnLFxuICAgICAgICAgICAgICAgIGRyYXdPdXRsaW5lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0aGlja25lc3NVbml0OiAyMCxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxheWVycy5wdXNoKFxuICAgICAgICAgICAgbmV3IEZsb3dMaW5lc0xheWVyKHtcbiAgICAgICAgICAgICAgLi4udGhpcy5nZXRTdWJMYXllclByb3BzKHtcbiAgICAgICAgICAgICAgICAuLi5jb21tb25MaW5lTGF5ZXJQcm9wcyxcbiAgICAgICAgICAgICAgICBpZDogJ2Zsb3ctbGluZXMnLFxuICAgICAgICAgICAgICAgIGRyYXdPdXRsaW5lOiB0cnVlLFxuICAgICAgICAgICAgICAgIG91dGxpbmVDb2xvcjogb3V0bGluZUNvbG9yLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgbGF5ZXJzLnB1c2goXG4gICAgICAgICAgbmV3IEZsb3dDaXJjbGVzTGF5ZXIoXG4gICAgICAgICAgICB0aGlzLmdldFN1YkxheWVyUHJvcHMoe1xuICAgICAgICAgICAgICBpZDogJ2NpcmNsZXMnLFxuICAgICAgICAgICAgICBkYXRhOiBjaXJjbGVBdHRyaWJ1dGVzLFxuICAgICAgICAgICAgICBlbXB0eUNvbG9yOiB0aGlzLnByb3BzLmRhcmtNb2RlXG4gICAgICAgICAgICAgICAgPyBbMCwgMCwgMCwgMjU1XVxuICAgICAgICAgICAgICAgIDogWzI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgICAgICAgICAgIG91dGxpbmVFbXB0eU1peDogMC40LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKSxcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGhpZ2hsaWdodGVkT2JqZWN0KSB7XG4gICAgICAgICAgc3dpdGNoIChoaWdobGlnaHRlZE9iamVjdC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIEhpZ2hsaWdodFR5cGUuTE9DQVRJT046XG4gICAgICAgICAgICAgIGxheWVycy5wdXNoKFxuICAgICAgICAgICAgICAgIG5ldyBTY2F0dGVycGxvdExheWVyKHtcbiAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZ2V0U3ViTGF5ZXJQcm9wcyh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAnbG9jYXRpb24taGlnaGxpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogW2hpZ2hsaWdodGVkT2JqZWN0XSxcbiAgICAgICAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBhbnRpYWxpYXNpbmc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGZpbGxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGxpbmVXaWR0aFVuaXRzOiAncGl4ZWxzJyxcbiAgICAgICAgICAgICAgICAgICAgZ2V0TGluZVdpZHRoOiAyLFxuICAgICAgICAgICAgICAgICAgICByYWRpdXNVbml0czogJ3BpeGVscycsXG4gICAgICAgICAgICAgICAgICAgIGdldFJhZGl1czogKGQ6IEhpZ2hsaWdodGVkTG9jYXRpb25PYmplY3QpID0+IGQucmFkaXVzLFxuICAgICAgICAgICAgICAgICAgICBnZXRMaW5lQ29sb3I6IGNvbG9yQXNSZ2JhKHRoaXMucHJvcHMuaGlnaGxpZ2h0Q29sb3IpLFxuICAgICAgICAgICAgICAgICAgICBnZXRQb3NpdGlvbjogKGQ6IEhpZ2hsaWdodGVkTG9jYXRpb25PYmplY3QpID0+IGQuY29vcmRzLFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBIaWdobGlnaHRUeXBlLkZMT1c6XG4gICAgICAgICAgICAgIGxheWVycy5wdXNoKFxuICAgICAgICAgICAgICAgIG5ldyBGbG93TGluZXNMYXllcih7XG4gICAgICAgICAgICAgICAgICAuLi50aGlzLmdldFN1YkxheWVyUHJvcHMoe1xuICAgICAgICAgICAgICAgICAgICBpZDogJ2Zsb3ctaGlnaGxpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogaGlnaGxpZ2h0ZWRPYmplY3QubGluZUF0dHJpYnV0ZXMsXG4gICAgICAgICAgICAgICAgICAgIGRyYXdPdXRsaW5lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBwaWNrYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG91dGxpbmVDb2xvcjogY29sb3JBc1JnYmEodGhpcy5wcm9wcy5oaWdobGlnaHRDb2xvciksXG4gICAgICAgICAgICAgICAgICAgIG91dGxpbmVUaGlja25lc3M6IDEsXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICBkZXB0aFRlc3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGxvY2F0aW9uTGFiZWxzKSB7XG4gICAgICAgIGxheWVycy5wdXNoKFxuICAgICAgICAgIG5ldyBUZXh0TGF5ZXIoXG4gICAgICAgICAgICB0aGlzLmdldFN1YkxheWVyUHJvcHMoe1xuICAgICAgICAgICAgICBpZDogJ2xvY2F0aW9uLWxhYmVscycsXG4gICAgICAgICAgICAgIGRhdGE6IGxvY2F0aW9uTGFiZWxzLFxuICAgICAgICAgICAgICBtYXhXaWR0aDogMTAwMCxcbiAgICAgICAgICAgICAgcGlja2FibGU6IGZhbHNlLFxuICAgICAgICAgICAgICBmb250RmFtaWx5OiAnSGVsdmV0aWNhJyxcbiAgICAgICAgICAgICAgZ2V0UGl4ZWxPZmZzZXQ6IChkOiBzdHJpbmcsIHtpbmRleH06IHtpbmRleDogbnVtYmVyfSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBnZXRPdXRlckNpcmNsZVJhZGl1c0J5SW5kZXgoY2lyY2xlQXR0cmlidXRlcywgaW5kZXgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMCwgciArIDVdO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBnZXRQb3NpdGlvbjogKGQ6IHN0cmluZywge2luZGV4fToge2luZGV4OiBudW1iZXJ9KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcG9zID0gZ2V0TG9jYXRpb25Db29yZHNCeUluZGV4KGNpcmNsZUF0dHJpYnV0ZXMsIGluZGV4KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcG9zO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBnZXRUZXh0OiAoZDogc3RyaW5nKSA9PiBkLFxuICAgICAgICAgICAgICBnZXRTaXplOiAxMCxcbiAgICAgICAgICAgICAgZ2V0Q29sb3I6IFsyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgICAgICAgICAgICBnZXRBbmdsZTogMCxcbiAgICAgICAgICAgICAgZ2V0VGV4dEFuY2hvcjogJ21pZGRsZScsXG4gICAgICAgICAgICAgIGdldEFsaWdubWVudEJhc2VsaW5lOiAndG9wJyxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICksXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxheWVycztcbiAgfVxufVxuXG5mdW5jdGlvbiBwaWNrVmlld3BvcnRQcm9wcyh2aWV3cG9ydDogUmVjb3JkPHN0cmluZywgYW55Pik6IFZpZXdwb3J0UHJvcHMge1xuICBjb25zdCB7d2lkdGgsIGhlaWdodCwgbG9uZ2l0dWRlLCBsYXRpdHVkZSwgem9vbSwgcGl0Y2gsIGJlYXJpbmd9ID0gdmlld3BvcnQ7XG4gIHJldHVybiB7XG4gICAgd2lkdGgsXG4gICAgaGVpZ2h0LFxuICAgIGxvbmdpdHVkZSxcbiAgICBsYXRpdHVkZSxcbiAgICB6b29tLFxuICAgIHBpdGNoLFxuICAgIGJlYXJpbmcsXG4gIH07XG59XG4iXX0=","export function isFlowmapData(data) {\n    return (data && data.locations && data.flows\n    // TODO: test that they are iterable\n    // Array.isArray(data.locations) &&\n    // Array.isArray(data.flows)\n    );\n}\nexport function isFlowmapDataProvider(dataProvider) {\n    return (dataProvider &&\n        typeof dataProvider.setFlowmapState === 'function' &&\n        typeof dataProvider.getViewportForLocations === 'function' &&\n        typeof dataProvider.getFlowByIndex === 'function' &&\n        typeof dataProvider.getLocationById === 'function' &&\n        typeof dataProvider.getLocationByIndex === 'function' &&\n        typeof dataProvider.getLayersData === 'function');\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmxvd21hcERhdGFQcm92aWRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wcm92aWRlci9GbG93bWFwRGF0YVByb3ZpZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW1EQSxNQUFNLFVBQVUsYUFBYSxDQUMzQixJQUF5QjtJQUV6QixPQUFPLENBQ0wsSUFBSSxJQUFJLElBQUksQ0FBQyxTQUFTLElBQUksSUFBSSxDQUFDLEtBQUs7SUFDcEMsb0NBQW9DO0lBQ3BDLG1DQUFtQztJQUNuQyw0QkFBNEI7S0FDN0IsQ0FBQztBQUNKLENBQUM7QUFFRCxNQUFNLFVBQVUscUJBQXFCLENBQ25DLFlBQWlDO0lBRWpDLE9BQU8sQ0FDTCxZQUFZO1FBQ1osT0FBTyxZQUFZLENBQUMsZUFBZSxLQUFLLFVBQVU7UUFDbEQsT0FBTyxZQUFZLENBQUMsdUJBQXVCLEtBQUssVUFBVTtRQUMxRCxPQUFPLFlBQVksQ0FBQyxjQUFjLEtBQUssVUFBVTtRQUNqRCxPQUFPLFlBQVksQ0FBQyxlQUFlLEtBQUssVUFBVTtRQUNsRCxPQUFPLFlBQVksQ0FBQyxrQkFBa0IsS0FBSyxVQUFVO1FBQ3JELE9BQU8sWUFBWSxDQUFDLGFBQWEsS0FBSyxVQUFVLENBQ2pELENBQUM7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtBZ2dyZWdhdGVGbG93LCBDbHVzdGVyLCBMb2NhdGlvbkFjY2Vzc29ycywgTG9jYXRpb25Ub3RhbHN9IGZyb20gJy4uJztcbmltcG9ydCB7Rmxvd21hcFN0YXRlfSBmcm9tICcuLi9GbG93bWFwU3RhdGUnO1xuaW1wb3J0IHtcbiAgQ2x1c3Rlck5vZGUsXG4gIEZsb3dtYXBEYXRhLFxuICBGbG93bWFwRGF0YUFjY2Vzc29ycyxcbiAgTGF5ZXJzRGF0YSxcbiAgVmlld3BvcnRQcm9wcyxcbn0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBpbnRlcmZhY2UgRmxvd21hcERhdGFQcm92aWRlcjxMLCBGPiB7XG4gIHNldEFjY2Vzc29ycyhhY2Nlc3NvcnM6IEZsb3dtYXBEYXRhQWNjZXNzb3JzPEwsIEY+KTogdm9pZDtcblxuICBzZXRGbG93bWFwU3RhdGUoZmxvd21hcFN0YXRlOiBGbG93bWFwU3RhdGUpOiBQcm9taXNlPHZvaWQ+O1xuXG4gIC8vIGNsZWFyRGF0YSgpOiB2b2lkO1xuXG4gIGdldFZpZXdwb3J0Rm9yTG9jYXRpb25zKFxuICAgIGRpbXM6IFtudW1iZXIsIG51bWJlcl0sXG4gICk6IFByb21pc2U8Vmlld3BvcnRQcm9wcyB8IHVuZGVmaW5lZD47XG5cbiAgLy8gZ2V0Rmxvd1RvdGFscygpOiBQcm9taXNlPEZsb3dUb3RhbHM+O1xuXG4gIGdldEZsb3dCeUluZGV4KGluZGV4OiBudW1iZXIpOiBQcm9taXNlPEYgfCBBZ2dyZWdhdGVGbG93IHwgdW5kZWZpbmVkPjtcblxuICBnZXRMb2NhdGlvbkJ5SWQoaWQ6IHN0cmluZyB8IG51bWJlcik6IFByb21pc2U8TCB8IENsdXN0ZXIgfCB1bmRlZmluZWQ+O1xuXG4gIGdldExvY2F0aW9uQnlJbmRleChpZHg6IG51bWJlcik6IFByb21pc2U8TCB8IENsdXN0ZXJOb2RlIHwgdW5kZWZpbmVkPjtcblxuICBnZXRUb3RhbHNGb3JMb2NhdGlvbihcbiAgICBpZDogc3RyaW5nIHwgbnVtYmVyLFxuICApOiBQcm9taXNlPExvY2F0aW9uVG90YWxzIHwgdW5kZWZpbmVkPjtcblxuICAvLyBnZXRMb2NhdGlvbnNJbkJib3goXG4gIC8vICAgYmJveDogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sXG4gIC8vICk6IFByb21pc2U8QXJyYXk8Rmxvd0xvY2F0aW9uIHwgQ2x1c3Rlck5vZGU+IHwgdW5kZWZpbmVkPjtcblxuICAvLyBnZXRMb2NhdGlvbnNGb3JTZWFyY2hCb3goKTogUHJvbWlzZTwoRmxvd0xvY2F0aW9uIHwgQ2x1c3Rlck5vZGUpW10gfCB1bmRlZmluZWQ+O1xuXG4gIGdldExheWVyc0RhdGEoKTogUHJvbWlzZTxMYXllcnNEYXRhIHwgdW5kZWZpbmVkPjtcblxuICAvKipcbiAgICogVGhpcyBpcyB0byBnaXZlIHRoZSBkYXRhIHByb3ZpZGVyIGNvbnRyb2wgb3ZlciB3aGVuL2hvdyBvZnRlbiBsYXllcnNEYXRhXG4gICAqIGlzIHVwZGF0ZWQgd2hpY2ggbGVhZHMgdG8gdGhlIGZsb3dtYXAgYmVpbmcgcmVkcmF3bi5cbiAgICovXG4gIHVwZGF0ZUxheWVyc0RhdGEoXG4gICAgc2V0TGF5ZXJzRGF0YTogKGxheWVyc0RhdGE6IExheWVyc0RhdGEgfCB1bmRlZmluZWQpID0+IHZvaWQsXG4gICAgY2hhbmdlRmxhZ3M6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+LFxuICApOiBQcm9taXNlPHZvaWQ+O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGbG93bWFwRGF0YTxMLCBGPihcbiAgZGF0YTogUmVjb3JkPHN0cmluZywgYW55Pixcbik6IGRhdGEgaXMgRmxvd21hcERhdGE8TCwgRj4ge1xuICByZXR1cm4gKFxuICAgIGRhdGEgJiYgZGF0YS5sb2NhdGlvbnMgJiYgZGF0YS5mbG93c1xuICAgIC8vIFRPRE86IHRlc3QgdGhhdCB0aGV5IGFyZSBpdGVyYWJsZVxuICAgIC8vIEFycmF5LmlzQXJyYXkoZGF0YS5sb2NhdGlvbnMpICYmXG4gICAgLy8gQXJyYXkuaXNBcnJheShkYXRhLmZsb3dzKVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGbG93bWFwRGF0YVByb3ZpZGVyPEwsIEY+KFxuICBkYXRhUHJvdmlkZXI6IFJlY29yZDxzdHJpbmcsIGFueT4sXG4pOiBkYXRhUHJvdmlkZXIgaXMgRmxvd21hcERhdGFQcm92aWRlcjxMLCBGPiB7XG4gIHJldHVybiAoXG4gICAgZGF0YVByb3ZpZGVyICYmXG4gICAgdHlwZW9mIGRhdGFQcm92aWRlci5zZXRGbG93bWFwU3RhdGUgPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgZGF0YVByb3ZpZGVyLmdldFZpZXdwb3J0Rm9yTG9jYXRpb25zID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIGRhdGFQcm92aWRlci5nZXRGbG93QnlJbmRleCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiBkYXRhUHJvdmlkZXIuZ2V0TG9jYXRpb25CeUlkID09PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIGRhdGFQcm92aWRlci5nZXRMb2NhdGlvbkJ5SW5kZXggPT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlb2YgZGF0YVByb3ZpZGVyLmdldExheWVyc0RhdGEgPT09ICdmdW5jdGlvbidcbiAgKTtcbn1cbiJdfQ==","<template lang=\"pug\">\r\n.flowmap(:class=\"{'hide-thumbnail': !thumbnail}\"\r\n        :style='{\"background\": urlThumbnail}'\r\n        oncontextmenu=\"return false\")\r\n\r\n    .map-layout\r\n       flow-map-layer.map-layer(v-if=\"centroids.length\"\r\n        :viewId=\"viewId\"\r\n        :props=\"mapProps\"\r\n        )\r\n\r\n\r\n    .title-panel(v-if=\"vizDetails.title && !thumbnail && !configFromDashboard\")\r\n      h3 {{ vizDetails.title }}\r\n      p {{ vizDetails.description }}\r\n\r\n    zoom-buttons(v-if=\"!thumbnail\")\r\n\r\n    .bottom-panel(v-if=\"!thumbnail\")\r\n\r\n\r\n        b-checkbox.hello(\r\n              v-model=\"vizDetails.animationEnabled\"\r\n            )\r\n        p Animation\r\n\r\n\r\n        b-checkbox.hello(\r\n              v-model=\"vizDetails.locationLabelsEnabled\"\r\n            )\r\n        p Labels\r\n\r\n        b-checkbox.hello(\r\n              v-model=\"vizDetails.clustering\"\r\n            )\r\n        p Clustering\r\n\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Vue, Component, Watch, Prop } from 'vue-property-decorator'\r\nimport * as turf from '@turf/turf'\r\nimport VizConfigurator from '@/components/viz-configurator/VizConfigurator.vue'\r\nimport ZoomButtons from '@/components/ZoomButtons.vue'\r\n\r\nimport { FileSystemConfig, REACT_VIEW_HANDLES, VisualizationPlugin } from '@/Globals'\r\nimport FlowMapLayer from '@/layers/FlowMapLayer'\r\nimport HTTPFileSystem from '@/js/HTTPFileSystem'\r\nimport DashboardDataManager from '@/js/DashboardDataManager'\r\nimport globalStore from '@/store'\r\nimport YAML from 'yaml'\r\nimport util from '@/js/util'\r\n\r\nimport { VuePlugin } from 'vuera'\r\nimport { NumberKeyframeTrack } from 'three'\r\nimport { watch } from 'vue'\r\nVue.use(VuePlugin)\r\n\r\n@Component({ components: { FlowMapLayer, VizConfigurator, ZoomButtons } as any })\r\nexport default class VueComponent extends Vue {\r\n  @Prop({ required: false }) fsConfig!: FileSystemConfig\r\n  @Prop({ required: true }) root!: string\r\n  @Prop({ required: false }) configFromDashboard!: any\r\n  @Prop({ required: false }) thumbnail!: boolean\r\n  @Prop({ required: true }) subfolder!: string\r\n  @Prop({ required: false }) files!: string[] //was required true\r\n  @Prop({ required: false }) yamlConfig!: string\r\n  @Prop({ required: false }) datamanager!: DashboardDataManager\r\n\r\n  private boundaries: any[] = []\r\n\r\n  private fileApi!: HTTPFileSystem\r\n  private fileSystemConfig!: FileSystemConfig\r\n\r\n  //private centroids: { id: any; name?: any; lat: number; lon: number }[] = []\r\n  private centroids: any[] = []\r\n  private flows: any[] = []\r\n\r\n  private viewId = Math.floor(1e12 * Math.random())\r\n  private statusText = 'Loading...'\r\n  private needsInitialMapExtent = true\r\n\r\n  private get mapProps() {\r\n    return {\r\n      locations: this.centroids,\r\n      flows: this.flows,\r\n      dark: this.$store.state.isDarkMode,\r\n      elapsed: this.elapsed,\r\n      vizDetails: this.vizDetails,\r\n    }\r\n  }\r\n\r\n  private vizDetails = {\r\n    title: '',\r\n    description: '',\r\n    thumbnail: '',\r\n    zoom: 9,\r\n    center: null as any | null,\r\n    pitch: 0,\r\n    bearing: 0,\r\n    boundaries: '',\r\n    boundariesJoinCol: '',\r\n    boundariesLabels: '',\r\n    boundariesLabel: '',\r\n    dataset: '',\r\n    origin: '',\r\n    destination: '',\r\n    flow: '',\r\n    colorScheme: 'Teal',\r\n    highlightColor: 'orange',\r\n    fadeEnabled: true,\r\n    fadeAmount: 50,\r\n    animationEnabled: true,\r\n    clustering: true,\r\n    clusteringLevel: null as number | null,\r\n    locationLabelsEnabled: true,\r\n    locationTotalsEnabled: true,\r\n    pickable: true,\r\n    opacity: null as number | null,\r\n    fadeOpacityEnabled: true,\r\n    outlineThickness: 0 as number | null,\r\n    showOnlyTopFlows: null as number | null,\r\n    maxTopFlowsDisplayNum: null as number | null,\r\n  }\r\n\r\n  public myState = {\r\n    statusMessage: '',\r\n    fileApi: undefined as HTTPFileSystem | undefined,\r\n    fileSystem: undefined as FileSystemConfig | undefined,\r\n    subfolder: '',\r\n    yamlConfig: '',\r\n    thumbnail: false,\r\n  }\r\n\r\n  private myDataManager!: DashboardDataManager\r\n\r\n  @Watch('$store.state.viewState') viewMoved() {\r\n    if (!REACT_VIEW_HANDLES[this.viewId]) return\r\n    REACT_VIEW_HANDLES[this.viewId]()\r\n  }\r\n\r\n  private async mounted() {\r\n    try {\r\n      this.$store.commit('setFullScreen', !this.thumbnail)\r\n\r\n      this.myState.thumbnail = this.thumbnail\r\n      this.myState.yamlConfig = this.yamlConfig\r\n\r\n      this.buildFileApi()\r\n\r\n      // DataManager might be passed in from the dashboard; or we might be\r\n      // in single-view mode, in which case we need to create one for ourselves\r\n      this.myDataManager = this.datamanager || new DashboardDataManager(this.root, this.subfolder)\r\n\r\n      await this.getVizDetails()\r\n\r\n      if (this.thumbnail) {\r\n        this.buildThumbnail()\r\n        return\r\n      }\r\n\r\n      if (this.needsInitialMapExtent && (this.vizDetails.center || this.vizDetails.zoom)) {\r\n        this.$store.commit('setMapCamera', {\r\n          center: this.vizDetails.center,\r\n          zoom: this.vizDetails.zoom || 9,\r\n          bearing: this.vizDetails.bearing || 0,\r\n          pitch: this.vizDetails.pitch || 0,\r\n          longitude: this.vizDetails.center ? this.vizDetails.center[0] : 0,\r\n          latitude: this.vizDetails.center ? this.vizDetails.center[1] : 0,\r\n        })\r\n        this.needsInitialMapExtent = false\r\n      }\r\n\r\n      // load the boundaries and the dataset, use promises so we can clear\r\n      // the spinner when things are finished.  MUST be in this order\r\n      // or the flowmap gets sad if dataset loads faster than boundaries do.\r\n      await this.loadBoundaries()\r\n      await this.loadDataset()\r\n\r\n      this.updateChart()\r\n\r\n      this.$emit('isLoaded')\r\n\r\n      this.vizDetails = Object.assign({}, this.vizDetails)\r\n      this.statusText = ''\r\n    } catch (e) {\r\n      this.$store.commit('error', 'Flowmap' + e)\r\n    }\r\n  }\r\n\r\n  private beforeDestroy() {\r\n    if (this.animator) window.cancelAnimationFrame(this.animator)\r\n\r\n    // MUST delete the React view handle to prevent gigantic memory leak!\r\n    delete REACT_VIEW_HANDLES[this.viewId]\r\n  }\r\n\r\n  private startTime = Date.now()\r\n  private elapsed = 0\r\n  private animator: any = null\r\n\r\n  private buildFileApi() {\r\n    const filesystem = this.fsConfig || this.getFileSystem(this.root)\r\n    this.fileApi = new HTTPFileSystem(filesystem, globalStore)\r\n    this.fileSystemConfig = filesystem\r\n  }\r\n\r\n  private thumbnailUrl = \"url('assets/thumbnail.jpg') no-repeat;\"\r\n  private get urlThumbnail() {\r\n    return this.thumbnailUrl\r\n  }\r\n\r\n  private async getVizDetails() {\r\n    // Config was passed in from dashboard:\r\n    if (this.configFromDashboard) {\r\n      console.log('we have a dashboard')\r\n      this.validateYAML()\r\n      this.vizDetails = Object.assign({}, this.configFromDashboard)\r\n      return\r\n    }\r\n\r\n    // Config is in a YAML file which we can parse\r\n    const hasYaml = new RegExp('.*(yml|yaml)$').test(this.myState.yamlConfig)\r\n    if (hasYaml) {\r\n      console.log('has yaml')\r\n      await this.loadStandaloneYAMLConfig()\r\n    }\r\n\r\n    // No config at all; use the default\r\n  }\r\n\r\n  private async buildThumbnail() {\r\n    if (!this.myState.fileApi) return\r\n    if (this.thumbnail && this.vizDetails.thumbnail) {\r\n      try {\r\n        const blob = await this.myState.fileApi.getFileBlob(\r\n          this.myState.subfolder + '/' + this.vizDetails.thumbnail\r\n        )\r\n        const buffer = await blob.arrayBuffer()\r\n        const base64 = util.arrayBufferToBase64(buffer)\r\n        if (base64)\r\n          this.thumbnailUrl = `center / cover no-repeat url(data:image/png;base64,${base64})`\r\n      } catch (e) {\r\n        console.error(e)\r\n      }\r\n    }\r\n  }\r\n\r\n  private async validateYAML() {}\r\n\r\n  private async loadStandaloneYAMLConfig() {\r\n    if (!this.fileApi) return {}\r\n\r\n    const filename =\r\n      this.yamlConfig.indexOf('/') > -1 ? this.yamlConfig : this.subfolder + '/' + this.yamlConfig\r\n\r\n    // 1. First try loading the file directly\r\n    try {\r\n      const text = await this.fileApi.getFileText(filename)\r\n      this.vizDetails = Object.assign({}, YAML.parse(text))\r\n      return\r\n    } catch (err) {\r\n      const message = '' + err\r\n      if (message.startsWith('YAMLSemantic')) {\r\n        this.$store.commit('error', `${filename}: ${message}`)\r\n      }\r\n      console.log(`${filename} not found, trying config folders`)\r\n    }\r\n\r\n    // 2. Try loading from a config folder instead\r\n    const { vizes } = await this.fileApi.findAllYamlConfigs(this.subfolder)\r\n    if (vizes[this.yamlConfig]) {\r\n      try {\r\n        const text = await this.fileApi.getFileText(vizes[this.yamlConfig])\r\n        this.vizDetails = Object.assign({}, YAML.parse(text))\r\n      } catch (err) {\r\n        console.error(`Also failed to load ${vizes[this.yamlConfig]}`)\r\n      }\r\n    }\r\n  }\r\n\r\n  private async loadBoundaries() {\r\n    try {\r\n      if (this.vizDetails.boundaries.startsWith('http')) {\r\n        console.log('in http')\r\n        const boundaries = await fetch(this.vizDetails.boundaries).then(async r => await r.json())\r\n        this.boundaries = boundaries.features\r\n      } else {\r\n        const filepath = `${this.subfolder}/${this.vizDetails.boundaries}`\r\n        const boundaries = await this.fileApi.getFileJson(\r\n          `${this.subfolder}/${this.vizDetails.boundaries}`\r\n        )\r\n\r\n        this.boundaries = boundaries.features\r\n      }\r\n    } catch (e) {\r\n      console.error(e)\r\n      return\r\n    }\r\n    this.calculateCentroids()\r\n    this.setMapCenter()\r\n  }\r\n\r\n  private calculateCentroids() {\r\n    const boundaryLabelField = this.vizDetails.boundariesLabels || this.vizDetails.boundariesLabel\r\n    for (const feature of this.boundaries) {\r\n      const centroid: any = turf.centerOfMass(feature as any)\r\n\r\n      if (feature.properties[boundaryLabelField]) {\r\n        centroid.properties.label = feature.properties[boundaryLabelField]\r\n      }\r\n      centroid.properties.id = '' + feature.properties[this.vizDetails.boundariesJoinCol]\r\n\r\n      this.centroids.push({\r\n        id: `${centroid.properties.id}`,\r\n        lon: centroid.geometry.coordinates[0],\r\n        lat: centroid.geometry.coordinates[1],\r\n      })\r\n    }\r\n    console.log({ centroids: this.centroids })\r\n    // for (const c of this.centroids) console.log(`${c.id},${c.lon},${c.lat}`)\r\n  }\r\n\r\n  private async setMapCenter() {\r\n    // If user gave us the center, use it\r\n    if (this.vizDetails.center) {\r\n      if (typeof this.vizDetails.center == 'string') {\r\n        this.vizDetails.center = this.vizDetails.center.split(',').map(Number)\r\n      }\r\n\r\n      this.$store.commit('setMapCamera', {\r\n        longitude: this.vizDetails.center[0],\r\n        latitude: this.vizDetails.center[1],\r\n        bearing: 0,\r\n        pitch: 0,\r\n        zoom: this.vizDetails.zoom || 10, // use 10 default if we don't have a zoom\r\n        jump: false,\r\n      })\r\n      return\r\n    }\r\n\r\n    // user didn't give us the center, so calculate it\r\n    if (!this.centroids.length) return\r\n\r\n    let samples = 0\r\n    let longitude = 0\r\n    let latitude = 0\r\n\r\n    const numCentroids = this.centroids.length\r\n\r\n    const gap = 256\r\n    for (let i = 0; i < numCentroids; i += gap) {\r\n      longitude += this.centroids[i].lon\r\n      latitude += this.centroids[i].lat\r\n      samples++\r\n    }\r\n\r\n    longitude = longitude / samples\r\n    latitude = latitude / samples\r\n\r\n    const currentView = this.$store.state.viewState\r\n\r\n    if (longitude && latitude) {\r\n      this.$store.commit('setMapCamera', {\r\n        longitude,\r\n        latitude,\r\n        bearing: currentView.bearing,\r\n        pitch: currentView.pitch,\r\n        zoom: this.vizDetails.zoom || currentView.zoom,\r\n        jump: false,\r\n      })\r\n    }\r\n  }\r\n\r\n  private getFileSystem(name: string) {\r\n    const svnProject: FileSystemConfig[] = this.$store.state.svnProjects.filter(\r\n      (a: FileSystemConfig) => a.slug === name\r\n    )\r\n    if (svnProject.length === 0) {\r\n      console.log('no such project')\r\n      throw Error\r\n    }\r\n    return svnProject[0]\r\n  }\r\n\r\n  private async loadDataset() {\r\n    try {\r\n      const dataset = await this.myDataManager.getDataset(this.vizDetails)\r\n      // this.datamanager.addFilterListener(this.config, this.handleFilterChanged)\r\n      console.log('dataset:', dataset)\r\n\r\n      const data = dataset.allRows || ({} as any)\r\n      console.log('data:', data)\r\n\r\n      // assumes flow data has \"origin,destination,count\" columns\r\n      const origin = data.origin.values\r\n      const destination = data.destination.values\r\n      const count = data.count.values\r\n\r\n      console.log('in loadDataset')\r\n\r\n      const flows = [] as any[]\r\n      for (let i = 0; i < origin.length; i++) {\r\n        flows.push({\r\n          o: `${origin[i]}`,\r\n          d: `${destination[i]}`,\r\n          v: count[i],\r\n        })\r\n      }\r\n      this.flows = flows\r\n    } catch (e) {\r\n      const message = '' + e\r\n      console.log(message)\r\n      this.flows = []\r\n    }\r\n    console.log({ flows: this.flows })\r\n  }\r\n\r\n  private updateChart() {\r\n    // nothing, for now\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import '@/styles.scss';\r\n\r\n.flowmap {\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: $thumbnailHeight;\r\n  background: url('assets/thumbnail.jpg') center / cover no-repeat;\r\n  z-index: -1;\r\n}\r\n\r\n.flowmap.hide-thumbnail {\r\n  background: none;\r\n  z-index: 0;\r\n}\r\n\r\n.map-layout {\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.title-panel {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  padding: 0 1rem 0.25rem 2rem;\r\n  background-color: var(--bgPanel);\r\n  filter: $filterShadow;\r\n  z-index: 2;\r\n}\r\n\r\n.bottom-panel {\r\n  grid-column: 1 / 3;\r\n  grid-row: 2 / 3;\r\n  display: flex;\r\n  flex-direction: row;\r\n  font-size: 0.8rem;\r\n  pointer-events: auto;\r\n  margin: auto auto 0rem 0rem;\r\n  padding: 0.25rem;\r\n  filter: drop-shadow(0px 2px 4px #22222233);\r\n  background-color: var(--bgPanel);\r\n  p {\r\n    margin-right: 1rem;\r\n  }\r\n}\r\n\r\n.panel-items {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0.5rem 0.5rem;\r\n  margin-bottom: 5px;\r\n  width: 16rem;\r\n  background-color: var(--bgPanel);\r\n  border-radius: 3px;\r\n  overflow: visible;\r\n  // overflow-x: hidden;\r\n}\r\n\r\n.panel-item {\r\n  h3 {\r\n    line-height: 1.7rem;\r\n  }\r\n\r\n  p {\r\n    font-size: 0.9rem;\r\n  }\r\n}\r\n\r\n.map-layer {\r\n  flex: 1;\r\n}\r\n\r\n.hello {\r\n  margin-left: 0;\r\n  margin-right: 0;\r\n  padding: 0;\r\n}\r\n\r\n@media only screen and (max-width: 640px) {\r\n}\r\n</style>\r\n","import { createDecorator } from 'vue-class-component';\n/**\n * decorator of a watch function\n * @param  path the path or the expression to observe\n * @param  WatchOption\n * @return MethodDecorator\n */\nexport function Watch(path, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.deep, deep = _a === void 0 ? false : _a, _b = options.immediate, immediate = _b === void 0 ? false : _b;\n    return createDecorator(function (componentOptions, handler) {\n        if (typeof componentOptions.watch !== 'object') {\n            componentOptions.watch = Object.create(null);\n        }\n        var watch = componentOptions.watch;\n        if (typeof watch[path] === 'object' && !Array.isArray(watch[path])) {\n            watch[path] = [watch[path]];\n        }\n        else if (typeof watch[path] === 'undefined') {\n            watch[path] = [];\n        }\n        watch[path].push({ handler: handler, deep: deep, immediate: immediate });\n    });\n}\n","import React, { useEffect, useState } from 'react'\r\nimport DeckGL from '@deck.gl/react'\r\nimport { StaticMap } from 'react-map-gl'\r\nimport { FlowmapLayer, FlowmapLayerPickingInfo, PickingType } from '@flowmap.gl/layers'\r\nimport { FlowmapData, getViewStateForLocations } from '@flowmap.gl/data'\r\n\r\nimport { MAPBOX_TOKEN, REACT_VIEW_HANDLES } from '@/Globals'\r\nimport globalStore from '@/store'\r\n\r\nexport default function Layer({\r\n  props = {} as any,\r\n  viewId = 0, // viewId: this must be unique;\r\n}) {\r\n  const { locations, flows, dark, elapsed, vizDetails } = props\r\n\r\n  const [viewState, setViewState] = useState(globalStore.state.viewState)\r\n  const [hoverInfo, setHoverInfo] = useState({})\r\n  // const [data, setData] = useState<FlowmapData<LocationDatum, FlowDatum>>()\r\n\r\n  // register setViewState in global view updater so we can respond to map motion\r\n  REACT_VIEW_HANDLES[viewId] = () => {\r\n    setViewState(globalStore.state.viewState)\r\n  }\r\n\r\n  function handleClick() {\r\n    console.log('click!')\r\n  }\r\n\r\n  function handleHover(hover: any) {\r\n    console.log(hover)\r\n    setHoverInfo(hover)\r\n  }\r\n\r\n  function handleViewState(view: any) {\r\n    setViewState(view)\r\n    view.center = [view.longitude, view.latitude]\r\n    globalStore.commit('setMapCamera', view)\r\n  }\r\n\r\n  const layer = new FlowmapLayer({\r\n    data: props,\r\n    id: 'my-flowmap-' + viewId,\r\n    getLocationId: (location: any) => location.id,\r\n    getLocationLat: (location: any) => location.lat,\r\n    getLocationLon: (location: any) => location.lon,\r\n    getLocationName: (location: any) => location.id,\r\n    getFlowOriginId: (flow: any) => flow.o,\r\n    getFlowDestId: (flow: any) => flow.d,\r\n    getFlowMagnitude: (flow: any) => flow.v || null,\r\n    adaptiveScalesEnabled: true,\r\n    animationEnabled: vizDetails.animationEnabled,\r\n    clusteringEnabled: vizDetails.clustering,\r\n    clusteringAuto: vizDetails.clustering,\r\n    clusteringLevel: vizDetails.clusteringLevel,\r\n    colorScheme: vizDetails.colorScheme,\r\n    darkMode: dark,\r\n    drawOutline: false,\r\n    fadeEnabled: true,\r\n    fadeAmount: 20,\r\n    fadeOpacityEnabled: true,\r\n    locationLabelsEnabled: vizDetails.locationLabelsEnabled,\r\n    locationTotalsEnabled: vizDetails.locationTotalsEnabled,\r\n    onHover: handleHover,\r\n    opacity: 1.0, // vizDetails.opacity,\r\n    outlineThickness: vizDetails.outlineThickness,\r\n    pickable: true,\r\n    // highlightColor: [1, 0.9, 0],\r\n    // showOnlyTopFlows: vizDetails.showOnlyTopFlows,\r\n    // labelsEnabled: vizDetails.labelsEnabled,\r\n    // maxFlowThickness: 15,\r\n    // maxTopFlowsDisplayNum: vizDetails.maxTopFlowsDisplayNum,\r\n    // maxLocationCircleSize: 20,\r\n  })\r\n\r\n  return (\r\n    /*\r\n    //@ts-ignore */\r\n    <DeckGL\r\n      layers={[layer]}\r\n      controller={true}\r\n      viewState={viewState}\r\n      pickingRadius={4}\r\n      getCursor={() => 'pointer'}\r\n      onClick={handleClick}\r\n      onViewStateChange={(e: any) => handleViewState(e.viewState)}\r\n    >\r\n      {\r\n        /*\r\n      // @ts-ignore */\r\n        <StaticMap mapStyle={globalStore.getters.mapStyle} mapboxApiAccessToken={MAPBOX_TOKEN} />\r\n      }\r\n    </DeckGL>\r\n  )\r\n}\r\n","\r\n.flowmap(:class=\"{'hide-thumbnail': !thumbnail}\"\r\n        :style='{\"background\": urlThumbnail}'\r\n        oncontextmenu=\"return false\")\r\n\r\n    .map-layout\r\n       flow-map-layer.map-layer(v-if=\"centroids.length\"\r\n        :viewId=\"viewId\"\r\n        :props=\"mapProps\"\r\n        )\r\n\r\n\r\n    .title-panel(v-if=\"vizDetails.title && !thumbnail && !configFromDashboard\")\r\n      h3 {{ vizDetails.title }}\r\n      p {{ vizDetails.description }}\r\n\r\n    zoom-buttons(v-if=\"!thumbnail\")\r\n\r\n    .bottom-panel(v-if=\"!thumbnail\")\r\n\r\n\r\n        b-checkbox.hello(\r\n              v-model=\"vizDetails.animationEnabled\"\r\n            )\r\n        p Animation\r\n\r\n\r\n        b-checkbox.hello(\r\n              v-model=\"vizDetails.locationLabelsEnabled\"\r\n            )\r\n        p Labels\r\n\r\n        b-checkbox.hello(\r\n              v-model=\"vizDetails.clustering\"\r\n            )\r\n        p Clustering\r\n\r\n"],"names":["extent","values","valueof","min2","max","value","index","e10","Math","sqrt","e5","e2","tickIncrement","start","stop","count","step","power","floor","log","LN10","error","pow","interpolateBasis","n","length","t","i","v1","v2","v0","v3","t1","t2","t3","basis","constant","x","linear$1","a","d","gamma","y","nogamma","b","exponential","isNaN","linear","rgb","color2","rgb2","end","r","colorRgb","g","opacity","rgbGamma","spline","rgbBasis","colors2","Array","numberArray","min","c","slice","genericArray","nb","na","date","Date","setTime","interpolateNumber","object","k","reA","reB","RegExp","source","string","am","bm","bs","bi","lastIndex","s","q","exec","push","number","one","zero","o","i2","join","interpolate","color","ArrayBuffer","isView","DataView","isArray","valueOf","toString","interpolateRound","round","cubehelix","hue2","cubehelix2","h","colorCubehelix","l","cubehelixGamma","cubehelixLong","unit","identity","normalize","NaN","bimap","domain","range2","interpolate2","d0","d1","r0","r1","polymap","j","reverse","bisect","copy$1","target","range","clamp","unknown","transformer$1","transform","untransform","piecewise","output","input","interpolateValue","rescale","scale","map","invert","_","arguments","from","rangeRound","interpolate$1","u","continuous","transformer","tickFormat","specifier","precision","step0","abs","step1","tickStep","formatSpecifier","type","precisionPrefix","formatPrefix","precisionRound","precisionFixed","format","linearish","ticks","ticks2","isFinite","nice","prestep","i0","i1","maxIter","ceil","copy","initRange","apply","transformPow","exponent","transformSqrt","transformSquare","powish","t0","k10","x0","x1","interpolator","sequential","initInterpolator","sequentialPow","global","module2","define","Alea","seed","me","this","mash","data","String","charCodeAt","next","s0","s1","s2","copy2","f","impl","opts","xg","state","prng","int32","double","quick","exports","alea","XorGen","strseed","z","w","result","xor128","v","xorwow","X","me2","seed2","init","xorshift7","limit","xor4096","tychei","pool","math","nodecrypto","width","startdenom","significance","overflow","mask","seedrandom2","options","callback","key","shortseed","mixkey","flatten","entropy","tostring","out","randomBytes","Uint8Array","crypto","msCrypto","getRandomValues","e","browser2","navigator","plugins","screen","autoseed","arc4","ARC4","S","pass","prng2","is_math_call","keylen","j2","obj","depth","prop","typ","smear","stringseed","fromCharCode","random","module","require$$0","ex","self","require$$1","require$$2","require$$3","require$$4","require$$5","sr","require$$6","seedrandom","_typeof","Symbol","iterator","obj2","constructor","prototype","_defineProperty","Object","defineProperty","enumerable","configurable","writable","_toConsumableArray","arr","arr2","_arrayWithoutHoles","iter","call","_iterableToArray","TypeError","_nonIterableSpread","reflectionIsSupported","Reflect","defineMetadata","getOwnMetadataKeys","copyReflectionMetadata","to","forwardMetadata","getOwnPropertyNames","forEach","propertyKey","metaKey","metadata","getOwnMetadata","hasProto","__proto__","createDecorator","factory","Ctor","__decorators__","collectDataFromConstructor","vm","Component2","originalInit","_init","_this","keys","$options","props","hasOwnProperty","key2","get","set","plainData","$internalHooks","componentFactory","name","_componentTag","proto","indexOf","descriptor","getOwnPropertyDescriptor","methods","mixins","computed","decorators","fn","superProto","getPrototypeOf","Super","Vue","Extended","extend","forwardStaticMembers","shouldIgnore","callee","caller","Original","extendedDescriptor","superDescriptor","Component","registerHooks","reflectMetadataIsSupported","getMetadata","Prop","applyMetadata","componentOptions","AnimatedFlowLinesLayer","Layer","super","getShaders","vs","fs","modules","project32","picking","shaderCache","context","initializeState","getAttributeManager","addInstanced","instanceSourcePositions","size","GL","DOUBLE","transition","accessor","instanceTargetPositions","instanceColors","UNSIGNED_BYTE","defaultValue","instanceWidths","instanceStaggering","instancePickable","getNeedsRedraw","updateState","oldProps","changeFlags","_a","extensionsChanged","gl","model","delete","_getModel","invalidateAll","draw","uniforms","thicknessUnit","animationTailLength","animationTime","now","loopLength","setUniforms","assign","currentTime","Model","id","geometry","Geometry","drawMode","TRIANGLE_STRIP","attributes","positions","Float32Array","isInstanced","defaultProps","getSourcePosition","getTargetPosition","getPickable","getStaggering","getColor","getThickness","parameters","depthTest","POSITIONS","ZEROES","FlowLinesLayer","attributeManager","instanceThickness","instanceEndpointOffsets","setState","outlineColor","lineWidth","gap","pixelOffsets","drawOutline","outlineThickness","concat","tout","tin","getOutlinePixelOffsets","TRIANGLES","normals","layerName","DEFAULT_COLOR","FlowCirclesLayer","instancePositions","fp64","use64bitPositions","instanceInRadius","instanceOutRadius","emptyColor","outlineEmptyMix","TRIANGLE_FAN","vertexCount","isCluster","children","isLocationClusterNode","zoom","isAggregateFlow","flow","aggregate","LocationFilterMode","LocationFilterMode2","colors","getPosition","position","getInRadius","getOutRadius","ramp$1","scheme2","interpolateRgbBasis","scheme","ramp","warm","interpolateCubehelixLong","cool","interpolateViridis","magma","inferno","plasma","DEFAULT_FLOW_COLOR_SCHEME","DEFAULT_FLOW_COLOR_SCHEME_POSITIVE","DEFAULT_FLOW_COLOR_SCHEME_NEGATIVE","FALLBACK_COLOR_RGBA","opacifyHex","hexCode","d3color","console","warn","col","colorAsRgba","rgbColor","colorAsRgbaOr","defaultColor","asScheme","ColorScheme","getColorSteps","SCALE_NUM_STEPS","GRAYISH","primary","schemeTeal","DEFAULT_COLOR_SCHEME","COLOR_SCHEMES","Blues","schemeBlues","BluGrn","BluYl","BrwnYl","BuGn","schemeBuGn","BuPu","schemeBuPu","Burg","BurgYl","Cool","interpolateCool","DarkMint","Emrld","GnBu","schemeGnBu","Grayish","Greens","schemeGreens","Greys","schemeGreys","Inferno","interpolateInferno","Magenta","Magma","interpolateMagma","Mint","Oranges","schemeOranges","OrRd","schemeOrRd","OrYel","Peach","Plasma","interpolatePlasma","PinkYl","PuBu","schemePuBu","PuBuGn","schemePuBuGn","PuRd","schemePuRd","Purp","Purples","schemePurples","PurpOr","RdPu","schemeRdPu","RedOr","Reds","schemeReds","Sunset","SunsetDark","Teal","TealGrn","Viridis","Warm","interpolateWarm","YlGn","schemeYlGn","YlGnBu","schemeYlGnBu","YlOrBr","schemeYlOrBr","YlOrRd","schemeYlOrRd","diffColors","negative","flows","positive","locationAreas","outline","normal","getColors","diffMode","colorScheme","darkMode","fadeEnabled","fadeOpacityEnabled","fadeAmount","animate","indices","N","colorScale","scaleSequential","amount","scalePow","hcl","locationCircles","outgoing","createFlowColorScale","scaleSequentialPow","interpolateRgbaBasis","isDiffColorsRGBA","getLocationAreaColorsRGBA","normalColor","normalColorHcl","locationAreasNormal","connected","highlighted","selected","getFlowAndCircleColors","inputColors","defaultFlowColorScheme","_b","_c","flowColorScheme","maxFlowColorHcl","flowColorHighlighted","empty","inner","incoming","getBaseColorsRGBA","dimmedOpacity","sortKD","ids","coords","nodeSize","left","right","m","select","inc","exp","sd","swapItem","swap","tmp","sqDist","ax","ay","bx","by","dx","dy","defaultGetX","p","defaultGetY","KDBush","points","getX2","getY2","ArrayType","Float64Array","IndexArrayType","Uint16Array","Uint32Array","sort","minX","minY","maxX","maxY","stack","axis","pop","nextAxis","within","qx","qy","r2","defaultEqualityCheck","defaultMemoize","func","equalityCheckOrOptions","equals","entry","providedOptions","equalityCheck","_providedOptions$equa","_providedOptions$maxS","maxSize","resultEqualityCheck","comparator","prev","createCacheKeyComparator","cache","put","getEntries","clear","entries","cacheIndex","findIndex","entry2","splice","unshift","createLruCache","memoized","matchingEntry","find","clearCache","getDependencies","funcs","dependencies","every","dep","dependencyTypes","Error","createSelectorCreator","memoize","_len","memoizeOptionsFromArgs","_key","createSelector2","_len2","_key2","_lastResult","_recomputations","directlyPassedOptions","memoizeOptions","resultFunc","_directlyPassedOption","_directlyPassedOption2","finalMemoizeOptions","memoizedResultFunc","selector","params","lastResult","recomputations","resetRecomputations","createSelector","defaultOptions","minZoom","maxZoom","radius","makeClusterName","numPoints","makeClusterId","isLeafPoint","isClusterPoint","clusterLocations","locations","locationAccessors","getLocationWeight","getLocationLon","getLocationLat","getLocationId","trees","clusters","locationsCount","location","lng","latY","weight","Infinity","parentId","getX","getY","prevZoom","_clusters","cluster","numbersOfClusters","minClusters","filter","maxClusters","countByLatLon","Map","numLocations","loc","numSame","getMaxNumberOfClusters","maxAvailZoom","minAvailZoom","lastIndexOf","clusterLevels","childrenByParent","tree","rollup","point","nodes","lat","lon","yLat","xLng","createCluster","extent2","neighborIds","wx","wy","neighborId","weight2","numPoints2","y2","PI","atan","latY$1","sin2","sin","FlowmapAggregateAccessors","accessors","getLocationName","getFlowOriginId","origin","getFlowDestId","dest","getFlowMagnitude","getFlowTime","setAccessors","getFlowmapDataAccessors","getViewportBoundingBox","viewport","maxLocationCircleSize","pad","bounds","WebMercatorViewport","height","getBounds","getFlowThicknessScale","magnitudeExtent","scaleLinear","TimeGranularityKey","TimeGranularityKey2","timeParse","timeFormat","formatSecond","formatMinute","formatHour","formatDay","formatMonth","formatYear","TIME_GRANULARITIES","order","SECOND","interval","timeSecond","formatFull","MINUTE","timeMinute","HOUR","timeHour","DAY","timeDay","MONTH","timeMonth","YEAR","timeYear","getTimeGranularityByKey","FlowmapSelectors","getFlowsFromProps","getLocationsFromProps","getClusterLevelsFromProps","getMaxTopFlowsDisplayNum","settings","maxTopFlowsDisplayNum","getSelectedLocations","selectedLocations","getLocationFilterMode","locationFilterMode","getClusteringEnabled","clusteringEnabled","getLocationTotalsEnabled","locationTotalsEnabled","getLocationLabelsEnabled","locationLabelsEnabled","getZoom","getViewport","getSelectedTimeRange","selectedTimeRange","getColorScheme","getDarkMode","getFadeEnabled","getFadeOpacityEnabled","getFadeAmount","getAnimate","animationEnabled","getInvalidLocationIds","invalid","getLocations","invalidIds","Set","filtered","has","getLocationIds","add","getSelectedLocationsSet","getSortedFlowsForKnownLocations","srcId","dstId","descending","getActualTimeExtent","time","getTimeGranularityKey","timeExtent","minOrder","date2","current","getTimeGranularityForDate","timeGranularity","getTimeExtent","timeGranularityKey","offset","getSortedFlowsForKnownLocationsFilteredByTime","timeRange","getLocationsHavingFlows","withFlows","getLocationsById","locationsById","getLocationWeightGetter","locationTotals","makeLocationWeightGetter","getClusterLevels","clusterLevelsFromProps","getClusterIndex","clusterIndex","nodesByZoom","clustersById","minZoomByLocationId","node","mz","cl","leavesToClustersByZoom","cluster2","leavesToClusters","visitClusterLeaves","leafId","visit","childId","child","findClusterFor","locationId","availableZoomLevels","ascending","getClusterNodesFor","getClusterById","clusterId","getMinZoomForLocation","expandCluster","targetZoom","expandedIds","aggregateFlows","aggFlowsByKey","makeKey","flowCountsMapReduce","reduce","acc","originCluster","destCluster","aggregateFlow","buildIndex","getLocationClusterName","getName","level","leaves","topId","otherId","addClusterNames","getAvailableClusterZoomLevels","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","adjust","zoneId","_getClusterZoom","mapZoom","availableClusterZoomLevels","bisectLeft","findAppropriateZoomLevel","getClusterZoom","clusteringAuto","clusteringLevel","getLocationsForSearchBox","clusterZoom","toAppend","getDiffMode","_getFlowmapColors","getFlowmapColorsRGBA","flowmapColors","baseColorsRGBA","getDiffColorsRGBA","getColorsRGBA","getUnknownLocations","flowsForKnownLocations","missing","getSortedAggregatedFilteredFlows","clusterTree","isClusteringEnabled","aggregated","flowAccessors","byOriginDest","ff","rv","getExpandedSelectedLocationsSet","expanded","getTotalCountsByTime","selectedLocationSet","byTime","isFlowInSelection","getTime","millis","getMaxLocationCircleSize","getLocationsForZoom","locationsHavingFlows","getLocationTotals","selectedLocationsSet","totals","incomingCount","outgoingCount","internalCount","originId","destId","getLocationsTree","lngX","_getLocationIdsInViewport","bbox","_getLocationsInBboxIndices","idx","getLocationIdsInViewport","item","locationIds","getTotalUnfilteredCount","getTotalFilteredCount","_getLocationTotalsExtent","calcLocationTotalsExtent","_getLocationTotalsForViewportExtent","locationsInViewport","getLocationTotalsExtent","adaptiveScalesEnabled","getFlowsForFlowmapLayer","locationIdsInViewport","picked","pickedCount","_getFlowMagnitudeExtent","_getAdaptiveFlowMagnitudeExtent","getFlowMagnitudeExtent","getLocationMaxAbsTotalGetter","total","getCircleSizeScale","locationTotalsExtent","scaleSqrt","getInCircleSizeGetter","circleSizeScale","getOutCircleSizeGetter","getSortedLocationsForZoom","getInCircleSize","getOutCircleSize","idA","idB","getLocationsForFlowmapLayer","getLocationsForFlowmapLayerById","getLocationOrClusterByIdGetter","getLayersData","flowThicknessScale","_prepareLayersData","getAggregateAccessors","prepareLayersData","flowColorScale","minMagnitude","maxMagnitude","posScale","negScale","magnitude","getFlowColorScale","circlePositions","circleColor","circleColors","inCircleRadii","outCircleRadii","sourcePositions","targetPositions","thicknesses","endpointOffsets","flowLineColors","staggeringValues","circleAttributes","lineAttributes","getEndpointOffsets","locationLabels","getLocationsInBbox","lon1","lat1","lon2","lat2","y1","x2","ALL","BETWEEN","INCOMING","OUTGOING","lo","hi","getOuterCircleRadiusByIndex","getLocationCoordsByIndex","pi","halfPi","quarterPi","tau","degrees","radians","atan2","cos","noop","streamGeometry","stream","streamGeometryType","streamObjectType","Feature","object2","FeatureCollection","features","Sphere","sphere","Point","coordinates","MultiPoint","LineString","streamLine","MultiLineString","Polygon","streamPolygon","MultiPolygon","GeometryCollection","geometries","closed","coordinate","lineStart","lineEnd","polygonStart","polygonEnd","lambda00","phi00","lambda0","cosPhi0","sinPhi0","phi0","lambda1","phi1","lambda2","p0","deltaSum","ranges","areaRingSum","Adder","areaSum","areaStream","areaRingStart","areaRingEnd","areaRing","areaPointFirst","areaPoint","lambda","phi","lambda0$1","dLambda","sdLambda","adLambda","cosPhi","sinPhi","cartesianCross","boundsStream","boundsPoint","boundsLineStart","boundsLineEnd","boundsRingPoint","boundsRingStart","boundsRingEnd","linePoint","cartesian2","spherical2","cartesian","inflection","asin","phii","delta","sign","lambdai","antimeridian","angle","lambda02","lambda12","rangeCompare","rangeContains","geoBounds","feature","merged","deltaMax","getViewStateForLocations","getLocationCoords","asGeometry","featureCollection","paddedBounds","fitBounds","padding","bearing","pitch","getViewStateForFeatures","PickingType","PickingType2","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","rejected","done","then","LocalFlowmapDataProvider","selectors","flowmapData","flowmapState","setFlowmapData","getSelectors","getFlowmapData","setFlowmapState","getFlowmapState","getFlowByIndex","getLocationByIndex","getLocationById","getTotalsForLocation","getViewportForLocations","dims","updateLayersData","setLayersData","PROPS_TO_CAUSE_LAYER_DATA_UPDATE","HighlightType","HighlightType2","FlowmapLayer","CompositeLayer","onHover","info","event","startTime","highlightedObject","_getHighlightedObject","lastHoverTime","_getFlowmapLayerPickingInfo","info2","pickingInfo","onClick","lastClickTime","dataProvider","_getOrMakeDataProvider","layersData","getPickingInfo","isFlowmapDataProvider","isFlowmapData","dataProvider2","_updateDataProvider","shouldUpdateState","viewportChanged","propsChanged","dataChanged","some","_getFlowmapState","_getSettingsState","highlightColor","pickViewportProps","sourceLayer","commonInfo","layer","FLOW","circleRadius","LOCATION","attrs","subarray","getFlowLineAttributesByIndex","renderLayers","layers","commonLineLayerProps","getSubLayerProps","ScatterplotLayer","pickable","antialiasing","stroked","filled","lineWidthUnits","getLineWidth","radiusUnits","getRadius","getLineColor","TextLayer","maxWidth","fontFamily","getPixelOffset","getText","getSize","getAngle","getTextAnchor","getAlignmentBaseline","longitude","latitude","use","VuePlugin","VueComponent","__publicField","title","description","thumbnail","center","boundaries","boundariesJoinCol","boundariesLabels","boundariesLabel","dataset","destination","clustering","showOnlyTopFlows","statusMessage","fileApi","fileSystem","subfolder","yamlConfig","mapProps","centroids","dark","$store","isDarkMode","elapsed","vizDetails","viewMoved","REACT_VIEW_HANDLES","viewId","mounted","commit","myState","buildFileApi","myDataManager","datamanager","DashboardDataManager","root","getVizDetails","buildThumbnail","needsInitialMapExtent","loadBoundaries","loadDataset","updateChart","$emit","statusText","beforeDestroy","animator","window","cancelAnimationFrame","filesystem","fsConfig","getFileSystem","HTTPFileSystem","globalStore","fileSystemConfig","urlThumbnail","thumbnailUrl","configFromDashboard","validateYAML","test","loadStandaloneYAMLConfig","blob","getFileBlob","buffer","arrayBuffer","base64","util","arrayBufferToBase64","filename","text","getFileText","YAML","parse","err","message","startsWith","vizes","findAllYamlConfigs","fetch","async","json","getFileJson","calculateCentroids","setMapCenter","boundaryLabelField","centroid","turf.centerOfMass","properties","label","split","jump","samples","numCentroids","currentView","viewState","svnProject","svnProjects","slug","getDataset","allRows","__decorateClass","required","path","deep","immediate","handler","watch","create","Watch","components","FlowMapLayer","setViewState","useState","hoverInfo","setHoverInfo","hover","DeckGL","controller","pickingRadius","getCursor","onViewStateChange","handleViewState","view","StaticMap","mapStyle","getters","mapboxApiAccessToken","MAPBOX_TOKEN","VizConfigurator","ZoomButtons","_vm","_h","$createElement","_self","staticClass","class","style","background","oncontextmenu","_e","_v","_s","$$v","$set","expression"],"mappings":"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X,MAAMC,GAAYzB,GAAWA,EAAOA,EAAOnd,OAAS,GAC7C,IAAI6e,IAGRA,KAA8BA,GAAA,KADJ,QAAA,UAE7B,MACMC,GAAiBhZ,GAAgBW,EAAM,EAAGsY,IAC3C1X,KAAKnH,GAAM4F,EAAY5F,EAFJ,MAGnBmG,UAEQ2Y,GAAU,CADA,wBACiBH,GAAYI,SAmBvCC,GAAa,CACtB,UACA,UACA,UACA,UACA,UACA,UACA,WAESC,GAAuBD,GACvBE,GAAgB,CACzBC,MAAOT,GAASU,IAChBC,OAAQ,CACJ,UACA,UACA,UACA,UACA,UACA,UACA,WAEJC,MAvCgB,CAChB,UACA,UACA,UACA,UACA,UACA,UACA,WAiCAC,OAAQ,CACJ,UACA,UACA,UACA,UACA,UACA,UACA,WAEJC,KAAMd,GAASe,IACfC,KAAMhB,GAASiB,IACfC,KAAM,CACF,UACA,UACA,UACA,UACA,UACA,UACA,WAEJC,OAAQ,CACJ,UACA,UACA,UACA,UACA,UACA,UACA,WAEJC,KAAMlB,GAAcmB,IACpBC,SAAU,CACN,UACA,UACA,UACA,UACA,UACA,UACA,WAEJC,MAtEgB,CAChB,UACA,UACA,UACA,UACA,UACA,UACA,WAgEAC,KAAMxB,GAASyB,IACfC,QAAStB,GACTuB,OAAQ3B,GAAS4B,IACjBC,MAAO7B,GAAS8B,IAChBC,QAAS7B,GAAc8B,IACvBC,QAAS,CACL,UACA,UACA,UACA,UACA,UACA,UACA,WAEJC,MAAOhC,GAAciC,IACrBC,KAAM,CACF,UACA,UACA,UACA,UACA,UACA,UACA,WAEJC,QAASrC,GAASsC,IAClBC,KAAMvC,GAASwC,IACfC,MAAO,CACH,UACA,UACA,UACA,UACA,UACA,UACA,WAEJC,MAAO,CACH,UACA,UACA,UACA,UACA,UACA,UACA,WAEJC,OAAQzC,GAAc0C,IACtBC,OAAQ,CACJ,UACA,UACA,UACA,UACA,UACA,UACA,WAEJC,KAAM9C,GAAS+C,IACfC,OAAQhD,GAASiD,IACjBC,KAAMlD,GAASmD,IACfC,KAAM,CACF,UACA,UACA,UACA,UACA,UACA,UACA,WAEJC,Q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"}