{"version":3,"file":"LegendBox.0a0c86dd.js","sources":["../../src/components/viz-configurator/LegendBox.vue","../../src/components/viz-configurator/LegendBox.vue?vue&type=template&lang.js"],"sourcesContent":["<template lang=\"pug\">\r\n.legend-box(v-if=\"sections.length\")\r\n  .legend-section(v-for=\"section,i in sections\" :key=\"section.section\")\r\n    p(:style=\"{marginBottom: '0.25rem', marginTop: i ? '1rem':''}\"): b {{ sectionTitle(section) }}\r\n    .section-row(v-for=\"row,i of getRowsInSection(section)\" :key=\"i\")\r\n      .row-value(:style=\"getRowStyle(row)\")\r\n      .row-label(:style=\"getLabelStyle(row)\") {{ getRowLabel(row) }}\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nimport type { PropType } from 'vue'\r\nimport LegendStore, { LegendSection } from '@/js/LegendStore'\r\n\r\nexport default defineComponent({\r\n  name: 'LegendBox',\r\n  props: {\r\n    legendStore: { type: Object as PropType<LegendStore>, required: true },\r\n  },\r\n  data: () => {\r\n    return {}\r\n  },\r\n  beforeDestroy() {\r\n    this.legendStore.clear()\r\n  },\r\n  computed: {\r\n    sections(): any {\r\n      return this.legendStore.state.sections\r\n    },\r\n  },\r\n  methods: {\r\n    sectionTitle(section: LegendSection) {\r\n      let title = section.column\r\n\r\n      if (section.normalColumn) title += ` / ${section.normalColumn}`\r\n\r\n      if (section.relative) {\r\n        title += ' (% Diff)'\r\n      } else if (section.diff) {\r\n        title += ' (Diff)'\r\n      }\r\n\r\n      return title\r\n    },\r\n\r\n    getRowsInSection(section: LegendSection) {\r\n      if (!section) return\r\n\r\n      const z = section.values.filter((f: any) => !Number.isNaN(f.label))\r\n      return z\r\n    },\r\n\r\n    getRowLabel(row: { label: string; value: any }) {\r\n      return row.label // || row.value // no label -> it's a line width\r\n    },\r\n\r\n    getRowStyle(row: { label: string; value: any }) {\r\n      if (Array.isArray(row.value)) {\r\n        // it's a 3-color\r\n        const backgroundColor = `rgb(${row.value[0]},${row.value[1]},${row.value[2]})`\r\n        const style = {\r\n          backgroundColor,\r\n          width: '1rem',\r\n          height: '1rem',\r\n          border: '1px solid #88888844',\r\n          // lineHeight: '14px',\r\n        }\r\n        return style\r\n      } else {\r\n        const style = {\r\n          backgroundColor: '#779',\r\n          width: '2rem',\r\n          height: `${row.value / 2}px`,\r\n          margin: 'auto 0 4px 0',\r\n        }\r\n        return style\r\n      }\r\n      return {}\r\n    },\r\n\r\n    getLabelStyle(row: { label: string; value: any }) {\r\n      if (Array.isArray(row.value)) {\r\n        // colors\r\n        return {\r\n          marginLeft: '4px',\r\n        }\r\n      } else {\r\n        // widths\r\n        return {\r\n          display: 'flex',\r\n          flexDirection: 'column-reverse',\r\n          marginLeft: '4px',\r\n          marginBottom: '-2px',\r\n        }\r\n      }\r\n    },\r\n  },\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import '@/styles.scss';\r\n\r\n.legend-box {\r\n  font-size: 0.85rem;\r\n  padding: 0.5rem 0.75rem;\r\n  height: 100%;\r\n  min-height: 100%;\r\n  // border: var(--borderThin);\r\n}\r\n\r\n.section-row {\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\nb {\r\n  font-size: 1rem;\r\n  line-height: 1rem;\r\n}\r\n</style>\r\n","\r\n.legend-box(v-if=\"sections.length\")\r\n  .legend-section(v-for=\"section,i in sections\" :key=\"section.section\")\r\n    p(:style=\"{marginBottom: '0.25rem', marginTop: i ? '1rem':''}\"): b {{ sectionTitle(section) }}\r\n    .section-row(v-for=\"row,i of getRowsInSection(section)\" :key=\"i\")\r\n      .row-value(:style=\"getRowStyle(row)\")\r\n      .row-label(:style=\"getLabelStyle(row)\") {{ getRowLabel(row) }}\r\n"],"names":["__vue2_script","defineComponent","name","props","legendStore","type","Object","required","data","beforeDestroy","this","clear","computed","sections","state","methods","sectionTitle","section","title","column","normalColumn","relative","diff","getRowsInSection","values","filter","f","Number","isNaN","label","getRowLabel","row","getRowStyle","Array","isArray","value","backgroundColor","width","height","border","margin","getLabelStyle","marginLeft","display","flexDirection","marginBottom","_vm","_h","$createElement","_c","_self","length","staticClass","_l","i","key","style","marginTop","_v","_s","i2","_e"],"mappings":"iFAcA,IAAAA,EAAAC,EAAA,CACAC,KAAA,YACAC,MAAA,CACAC,YAAA,CAAAC,KAAAC,OAAAC,UAAA,IAEAC,KAAA,KACA,IAEAC,gBACAC,KAAAN,YAAAO,SAEAC,SAAA,CACAC,WACA,OAAAH,KAAAN,YAAAU,MAAAD,WAGAE,QAAA,CACAC,aAAAC,GACA,IAAAC,EAAAD,EAAAE,OAUA,OARAF,EAAAG,eAAAF,GAAA,MAAAD,EAAAG,gBAEAH,EAAAI,SACAH,GAAA,YACAD,EAAAK,OACAJ,GAAA,WAGAA,GAGAK,iBAAAN,GACA,IAAAA,EAAA,OAGA,OADAA,EAAAO,OAAAC,QAAAC,IAAAC,OAAAC,MAAAF,EAAAG,UAIAC,YAAAC,GACAA,EAAAF,MAGAG,YAAAD,GACA,GAAAE,MAAAC,QAAAH,EAAAI,OAAA,CAUA,MAPA,CACAC,gBAFA,OAAAL,EAAAI,MAAA,MAAAJ,EAAAI,MAAA,MAAAJ,EAAAI,MAAA,MAGAE,MAAA,OACAC,OAAA,OACAC,OAAA,uBAWA,MANA,CACAH,gBAAA,OACAC,MAAA,OACAC,OAAAP,EAAAI,MAAA,EAAA,KACAK,OAAA,iBAOAC,cAAAV,GACAE,MAAAC,QAAAH,EAAAI,OAEA,CACAO,WAAA,OAIA,CACAC,QAAA,OACAC,cAAA,iBACAF,WAAA,MACAG,aAAA,iCC5Fa,WACX,IAAIC,EAAIpC,KACJqC,EAAGD,EAAIE,eACPC,EAAGH,EAAII,MAAMD,IAAIF,EAErB,OAAOD,EAAIjC,SAASsC,OAASF,EAAG,MAAO,CACrCG,YAAa,cACZN,EAAIO,GAAGP,EAAIjC,UAAU,SAAUI,EAASqC,GACzC,OAAOL,EAAG,MAAO,CACfM,IAAKtC,EAAQA,QACbmC,YAAa,kBACZ,CAACH,EAAG,IAAK,CACVO,MAAO,CACLX,aAAc,UACdY,UAAWH,EAAI,OAAS,KAEzB,CAACL,EAAG,IAAK,CAACH,EAAIY,GAAGZ,EAAIa,GAAGb,EAAI9B,aAAaC,SAAgB6B,EAAIO,GAAGP,EAAIvB,iBAAiBN,IAAU,SAAUc,EAAK6B,GAC/G,OAAOX,EAAG,MAAO,CACfM,IAAKK,EACLR,YAAa,eACZ,CAACH,EAAG,MAAO,CACZG,YAAa,YACbI,MAAOV,EAAId,YAAYD,KACrBkB,EAAG,MAAO,CACZG,YAAa,YACbI,MAAOV,EAAIL,cAAcV,IACxB,CAACe,EAAIY,GAAGZ,EAAIa,GAAGb,EAAIhB,YAAYC,aAC/B,MACH,GAAKe,EAAIe,OAGO"}