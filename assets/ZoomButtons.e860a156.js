import{d as t}from"./vendor.e9c367ae.js";import{g as e,n as a}from"./index.2deacc07.js";const o=[{pixels:1e4,factor:.01,length:10,label:"m"},{pixels:5e3,factor:.02,length:20,label:"m"},{pixels:2e3,factor:.05,length:50,label:"m"},{pixels:1e3,factor:.1,length:100,label:"m"},{pixels:500,factor:.2,length:200,label:"m"},{pixels:250,factor:.5,length:500,label:"m"},{pixels:100,factor:1,length:1,label:"km"},{pixels:50,factor:2,length:2,label:"km"},{pixels:20,factor:5,length:5,label:"km"},{pixels:8,factor:10,length:10,label:"km"},{pixels:4,factor:20,length:20,label:"km"},{pixels:2,factor:50,length:50,label:"km"},{pixels:1,factor:100,length:100,label:"km"}],s=[{pixels:2e4,factor:.003787878,length:20,label:"ft"},{pixels:1e4,factor:.00946969696,length:50,label:"ft"},{pixels:5e3,factor:.0189393939,length:100,label:"ft"},{pixels:2500,factor:.04734848,length:250,label:"ft"},{pixels:1e3,factor:.09469696,length:500,label:"ft"},{pixels:500,factor:.18939393,length:1e3,label:"ft"},{pixels:300,factor:.25,length:.25,label:"mi"},{pixels:180,factor:.5,length:.5,label:"mi"},{pixels:80,factor:1,length:1,label:"mi"},{pixels:40,factor:2,length:2,label:"mi"},{pixels:20,factor:5,length:5,label:"mi"},{pixels:8,factor:10,length:10,label:"mi"},{pixels:4,factor:25,length:25,label:"mi"},{pixels:1.5,factor:50,length:50,label:"mi"}];var l=t({name:"MapScale",data:()=>({globalState:e.state,showScale:!1,metric:{pixels:100,length:1e3,label:"m"},miles:{pixels:100,length:1e3,label:"mi"}}),mounted(){this.zoomChanged()},watch:{"globalState.viewState.zoom"(){this.zoomChanged()},"globalState.viewState.pitch"(){this.zoomChanged()},"globalState.viewState.latitude"(){this.zoomChanged()}},methods:{zoomChanged(){if(this.globalState.viewState.pitch>15||this.globalState.viewState.zoom<5)return void(this.showScale=!1);this.showScale=!0;const t=Math.PI/180*this.globalState.viewState.latitude,e=this.globalState.viewState.zoom,a=156543.03*Math.cos(t)/2**e,o=1e3*window.devicePixelRatio/a;this.calculateBestMeasurements(o)},calculateBestMeasurements(t){let e={pixels:t/200,length:5,label:"m"};for(let s=0;s<o.length;s++){const a=o[s];if(t>a.pixels)break;e={pixels:t*a.factor,length:a.length,label:a.label}}const a=1.609344*t;let l={pixels:10*a/5280,length:10,label:"ft"};for(let o=0;o<s.length;o++){const t=s[o];if(a>t.pixels)break;l={pixels:a*t.factor,length:t.length,label:t.label}}this.metric=e,this.miles=l}}});const i={};var n=a(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.showScale,expression:"showScale"}],staticClass:"map-scale"},[a("div",{staticClass:"feet",style:{width:`${t.miles.pixels}px`}},[a("p",[t._v(t._s(t.miles.length)+" "+t._s(t.miles.label))])]),a("div",{staticClass:"meters",style:{width:`${t.metric.pixels}px`}},[a("p",[t._v(t._s(t.metric.length)+" "+t._s(t.metric.label))])])])}),[],!1,r,"84bbe3fe",null,null);function r(t){for(let e in i)this[e]=i[e]}var c=function(){return n.exports}();var m,h;(h=m||(m={}))[h.TOP=0]="TOP",h[h.BOTTOM=1]="BOTTOM";var g=t({name:"ZoomButtons",i18n:{messages:{en:{in:"Zoom in",out:"Zoom out",center:"North"},de:{in:"Einzoomen",out:"Auszoomen",center:"Norden"}}},components:{MapScale:c},props:{corner:String},data:()=>({globalState:e.state,zoomInFactor:.5,zoomOutFactor:.5,maxZoomIn:20,maxZoomOut:0,arrowRotation:0,location:0,smooth:[.0125,.025,.05,.1,.15,.2,.3,.4,.6,.7,.8,.85,.9,.95,.975,.9875,1]}),mounted(){this.corner&&this.corner.startsWith("top")&&(this.location=0),this.corner&&this.corner.startsWith("bottom")&&(this.location=1)},watch:{"globalState.viewState.bearing"(){this.updateNorthArrow()}},computed:{cornerSettings(){let t={display:"flex",right:"7px"};return 0==this.location&&(t=Object.assign(t,{flexDirection:"row",top:"5px"})),1==this.location&&(t=Object.assign(t,{flexDirection:"column-reverse",bottom:"32px"})),t}},methods:{setNorth(){const t=e.state.viewState;for(let a=0;a<this.smooth.length;a++)setTimeout((()=>{const o=Object.assign({},t,{bearing:t.bearing-this.smooth[a]*t.bearing,pitch:t.pitch-this.smooth[a]*t.pitch});e.commit("setMapCamera",o)}),24*a)},zoomIn(){let t=e.state.viewState.zoom;if(t+this.zoomInFactor<=this.maxZoomIn)for(let a=0;a<this.smooth.length;a++)setTimeout((()=>{const o={zoom:t+this.smooth[a]*this.zoomInFactor},s=e.state.viewState,l=Object.assign({},s,o);e.commit("setMapCamera",l)}),16.67*a)},zoomOut(){var t=e.state.viewState.zoom;if(t-this.zoomOutFactor>=this.maxZoomOut)for(let a=0;a<this.smooth.length;a++)setTimeout((()=>{const o={zoom:t-this.smooth[a]*this.zoomInFactor},s=e.state.viewState,l=Object.assign({},s,o);e.commit("setMapCamera",l)}),16.67*a)},updateNorthArrow(){this.arrowRotation=-1*this.globalState.viewState.bearing}}});const p={};var b=a(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map-complications",style:t.cornerSettings},[a("map-scale",{staticClass:"map-scale"}),a("div",{staticClass:"zoom-buttons"},[a("div",{staticClass:"button-single button-top"},[t.globalState.isDarkMode?a("img",{staticClass:"img-button",attrs:{title:t.$t("in"),src:"/simwrapper/assets/sw_plus_dm.addc2ce2.jpg"},on:{click:function(e){return t.zoomIn()}}}):a("img",{staticClass:"img-button",attrs:{title:t.$t("in"),src:"/simwrapper/assets/sw_plus.c32d0b8a.jpg"},on:{click:function(e){return t.zoomIn()}}})]),a("div",{staticClass:"button-single"},[t.globalState.isDarkMode?a("img",{staticClass:"img-button",attrs:{title:t.$t("out"),src:"/simwrapper/assets/sw_minus_dm.92f86065.jpg"},on:{click:function(e){return t.zoomOut()}}}):a("img",{staticClass:"img-button",attrs:{title:t.$t("out"),src:"/simwrapper/assets/sw_minus.5b756579.jpg"},on:{click:function(e){return t.zoomOut()}}})]),t.globalState.isDarkMode?a("div",{staticClass:"button-single button-bottom",style:{background:"rgb(43,60,78)",border:"1px solid rgb(119,119,119)"}},[t.globalState.isDarkMode?a("img",{staticClass:"img-button",style:{transform:`rotate(${t.arrowRotation}deg)`,background:"rgb(43,60,78)",height:"21px"},attrs:{title:t.$t("center"),src:"/simwrapper/assets/sw_north_arrow_dm.aa6d011c.png"},on:{click:function(e){return t.setNorth()}}}):t._e()]):t._e(),t.globalState.isDarkMode?t._e():a("div",{staticClass:"button-single button-bottom",style:{border:"1px solid rgb(224,224,224)"}},[a("img",{staticClass:"img-button",style:{transform:`rotate(${t.arrowRotation}deg)`,height:"21px"},attrs:{title:t.$t("center"),src:"/simwrapper/assets/sw_north_arrow.5b7b9814.png"},on:{click:function(e){return t.setNorth()}}})])])],1)}),[],!1,u,"5846d3bc",null,null);function u(t){for(let e in p)this[e]=p[e]}var f=function(){return b.exports}();export{f as Z};
//# sourceMappingURL=ZoomButtons.e860a156.js.map
