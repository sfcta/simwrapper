{"version":3,"file":"index.028cf17b.js","sources":["../../node_modules/array-source/index.js","../../node_modules/path-source/fetch.js","../../node_modules/path-source/request.js","../../node_modules/path-source/index.js","../../node_modules/stream-source/index.js","../../node_modules/array-source/read.js","../../node_modules/array-source/cancel.js","../../node_modules/slice-source/empty.js","../../node_modules/slice-source/concat.js","../../node_modules/slice-source/index.js","../../node_modules/shapefile/dbf/number.js","../../node_modules/slice-source/read.js","../../node_modules/slice-source/slice.js","../../node_modules/slice-source/cancel.js","../../node_modules/shapefile/dbf/read.js","../../node_modules/shapefile/dbf/string.js","../../node_modules/shapefile/dbf/date.js","../../node_modules/shapefile/dbf/boolean.js","../../node_modules/shapefile/view.js","../../node_modules/shapefile/dbf/index.js","../../node_modules/shapefile/shp/multipoint.js","../../node_modules/shapefile/shp/point.js","../../node_modules/shapefile/shp/polygon.js","../../node_modules/shapefile/shp/polyline.js","../../node_modules/shapefile/shp/concat.js","../../node_modules/shapefile/dbf/cancel.js","../../node_modules/shapefile/shp/index.js","../../node_modules/shapefile/shp/null.js","../../node_modules/shapefile/shapefile/cancel.js","../../node_modules/shapefile/shapefile/index.js","../../node_modules/shapefile/shp/read.js","../../node_modules/shapefile/shp/cancel.js","../../node_modules/shapefile/index.js","../../node_modules/shapefile/shapefile/read.js"],"sourcesContent":["import array_cancel from \"./cancel\";\nimport array_read from \"./read\";\n\nexport default function array(array) {\n  return new ArraySource(array instanceof Uint8Array ? array : new Uint8Array(array));\n}\n\nfunction ArraySource(array) {\n  this._array = array;\n}\n\nArraySource.prototype.read = array_read;\nArraySource.prototype.cancel = array_cancel;\n","import array from \"array-source\";\n\nexport default function(url) {\n  return fetch(url).then(function(response) {\n    return response.body && response.body.getReader\n        ? response.body.getReader()\n        : response.arrayBuffer().then(array);\n  });\n}\n","import array from \"array-source\";\n\nexport default function(url) {\n  return new Promise(function(resolve, reject) {\n    var request = new XMLHttpRequest;\n    request.responseType = \"arraybuffer\";\n    request.onload = function() { resolve(array(request.response)); };\n    request.onerror = reject;\n    request.ontimeout = reject;\n    request.open(\"GET\", url, true);\n    request.send();\n  });\n}\n","import fetchPath from \"./fetch\";\nimport requestPath from \"./request\";\n\nexport default function path(path) {\n  return (typeof fetch === \"function\" ? fetchPath : requestPath)(path);\n}\n","export default function stream(source) {\n  return typeof source.read === \"function\" ? source : source.getReader();\n}\n","export default function() {\n  var array = this._array;\n  this._array = null;\n  return Promise.resolve(array ? {done: false, value: array} : {done: true, value: undefined});\n}\n","export default function() {\n  this._array = null;\n  return Promise.resolve();\n}\n","export default new Uint8Array(0);\n","export default function concat(a, b) {\n  if (!a.length) return b;\n  if (!b.length) return a;\n  var c = new Uint8Array(a.length + b.length);\n  c.set(a);\n  c.set(b, a.length);\n  return c;\n}\n","import empty from \"./empty\";\nimport slice_cancel from \"./cancel\";\nimport slice_read from \"./read\";\nimport slice_slice from \"./slice\";\n\nexport default function slice(source) {\n  return typeof source.slice === \"function\" ? source :\n      new SliceSource(typeof source.read === \"function\" ? source\n          : source.getReader());\n}\n\nfunction SliceSource(source) {\n  this._source = source;\n  this._array = empty;\n  this._index = 0;\n}\n\nSliceSource.prototype.read = slice_read;\nSliceSource.prototype.slice = slice_slice;\nSliceSource.prototype.cancel = slice_cancel;\n","export default function(value) {\n  return !(value = value.trim()) || isNaN(value = +value) ? null : value;\n}\n","import concat from \"./concat\";\nimport empty from \"./empty\";\n\nexport default function() {\n  var that = this, array = that._array.subarray(that._index);\n  return that._source.read().then(function(result) {\n    that._array = empty;\n    that._index = 0;\n    return result.done ? (array.length > 0\n        ? {done: false, value: array}\n        : {done: true, value: undefined})\n        : {done: false, value: concat(array, result.value)};\n  });\n}\n","import empty from \"./empty\";\n\nexport default function(length) {\n  if ((length |= 0) < 0) throw new Error(\"invalid length\");\n  var that = this, index = this._array.length - this._index;\n\n  // If the request fits within the remaining buffer, resolve it immediately.\n  if (this._index + length <= this._array.length) {\n    return Promise.resolve(this._array.subarray(this._index, this._index += length));\n  }\n\n  // Otherwise, read chunks repeatedly until the request is fulfilled.\n  var array = new Uint8Array(length);\n  array.set(this._array.subarray(this._index));\n  return (function read() {\n    return that._source.read().then(function(result) {\n\n      // When done, it’s possible the request wasn’t fully fullfilled!\n      // If so, the pre-allocated array is too big and needs slicing.\n      if (result.done) {\n        that._array = empty;\n        that._index = 0;\n        return index > 0 ? array.subarray(0, index) : null;\n      }\n\n      // If this chunk fulfills the request, return the resulting array.\n      if (index + result.value.length >= length) {\n        that._array = result.value;\n        that._index = length - index;\n        array.set(result.value.subarray(0, length - index), index);\n        return array;\n      }\n\n      // Otherwise copy this chunk into the array, then read the next chunk.\n      array.set(result.value, index);\n      index += result.value.length;\n      return read();\n    });\n  })();\n}\n","export default function() {\n  return this._source.cancel();\n}\n","import readBoolean from \"./boolean\";\nimport readDate from \"./date\";\nimport readNumber from \"./number\";\nimport readString from \"./string\";\n\nvar types = {\n  B: readNumber,\n  C: readString,\n  D: readDate,\n  F: readNumber,\n  L: readBoolean,\n  M: readNumber,\n  N: readNumber\n};\n\nexport default function() {\n  var that = this, i = 1;\n  return that._source.slice(that._recordLength).then(function(value) {\n    return value && (value[0] !== 0x1a) ? {done: false, value: that._fields.reduce(function(p, f) {\n      p[f.name] = types[f.type](that._decode(value.subarray(i, i += f.length)));\n      return p;\n    }, {})} : {done: true, value: undefined};\n  });\n}\n","export default function(value) {\n  return value.trim() || null;\n}\n","export default function(value) {\n  return new Date(+value.substring(0, 4), value.substring(4, 6) - 1, +value.substring(6, 8));\n}\n","export default function(value) {\n  return /^[nf]$/i.test(value) ? false\n      : /^[yt]$/i.test(value) ? true\n      : null;\n}\n","export default function(array) {\n  return new DataView(array.buffer, array.byteOffset, array.byteLength);\n}\n","import slice from \"slice-source\";\nimport dbf_cancel from \"./cancel\";\nimport dbf_read from \"./read\";\nimport view from \"../view\";\n\nexport default function(source, decoder) {\n  source = slice(source);\n  return source.slice(32).then(function(array) {\n    var head = view(array);\n    return source.slice(head.getUint16(8, true) - 32).then(function(array) {\n      return new Dbf(source, decoder, head, view(array));\n    });\n  });\n}\n\nfunction Dbf(source, decoder, head, body) {\n  this._source = source;\n  this._decode = decoder.decode.bind(decoder);\n  this._recordLength = head.getUint16(10, true);\n  this._fields = [];\n  for (var n = 0; body.getUint8(n) !== 0x0d; n += 32) {\n    for (var j = 0; j < 11; ++j) if (body.getUint8(n + j) === 0) break;\n    this._fields.push({\n      name: this._decode(new Uint8Array(body.buffer, body.byteOffset + n, j)),\n      type: String.fromCharCode(body.getUint8(n + 11)),\n      length: body.getUint8(n + 16)\n    });\n  }\n}\n\nvar prototype = Dbf.prototype;\nprototype.read = dbf_read;\nprototype.cancel = dbf_cancel;\n","export default function(record) {\n  var i = 40, j, n = record.getInt32(36, true), coordinates = new Array(n);\n  for (j = 0; j < n; ++j, i += 16) coordinates[j] = [record.getFloat64(i, true), record.getFloat64(i + 8, true)];\n  return {type: \"MultiPoint\", coordinates: coordinates};\n};\n","export default function(record) {\n  return {type: \"Point\", coordinates: [record.getFloat64(4, true), record.getFloat64(12, true)]};\n};\n","export default function(record) {\n  var i = 44, j, n = record.getInt32(36, true), m = record.getInt32(40, true), parts = new Array(n), points = new Array(m), polygons = [], holes = [];\n  for (j = 0; j < n; ++j, i += 4) parts[j] = record.getInt32(i, true);\n  for (j = 0; j < m; ++j, i += 16) points[j] = [record.getFloat64(i, true), record.getFloat64(i + 8, true)];\n\n  parts.forEach(function(i, j) {\n    var ring = points.slice(i, parts[j + 1]);\n    if (ringClockwise(ring)) polygons.push([ring]);\n    else holes.push(ring);\n  });\n\n  holes.forEach(function(hole) {\n    polygons.some(function(polygon) {\n      if (ringContainsSome(polygon[0], hole)) {\n        polygon.push(hole);\n        return true;\n      }\n    }) || polygons.push([hole]);\n  });\n\n  return polygons.length === 1\n      ? {type: \"Polygon\", coordinates: polygons[0]}\n      : {type: \"MultiPolygon\", coordinates: polygons};\n};\n\nfunction ringClockwise(ring) {\n  if ((n = ring.length) < 4) return false;\n  var i = 0, n, area = ring[n - 1][1] * ring[0][0] - ring[n - 1][0] * ring[0][1];\n  while (++i < n) area += ring[i - 1][1] * ring[i][0] - ring[i - 1][0] * ring[i][1];\n  return area >= 0;\n}\n\nfunction ringContainsSome(ring, hole) {\n  var i = -1, n = hole.length, c;\n  while (++i < n) {\n    if (c = ringContains(ring, hole[i])) {\n      return c > 0;\n    }\n  }\n  return false;\n}\n\nfunction ringContains(ring, point) {\n  var x = point[0], y = point[1], contains = -1;\n  for (var i = 0, n = ring.length, j = n - 1; i < n; j = i++) {\n    var pi = ring[i], xi = pi[0], yi = pi[1],\n        pj = ring[j], xj = pj[0], yj = pj[1];\n    if (segmentContains(pi, pj, point)) {\n      return 0;\n    }\n    if (((yi > y) !== (yj > y)) && ((x < (xj - xi) * (y - yi) / (yj - yi) + xi))) {\n      contains = -contains;\n    }\n  }\n  return contains;\n}\n\nfunction segmentContains(p0, p1, p2) {\n  var x20 = p2[0] - p0[0], y20 = p2[1] - p0[1];\n  if (x20 === 0 && y20 === 0) return true;\n  var x10 = p1[0] - p0[0], y10 = p1[1] - p0[1];\n  if (x10 === 0 && y10 === 0) return false;\n  var t = (x20 * x10 + y20 * y10) / (x10 * x10 + y10 * y10);\n  return t < 0 || t > 1 ? false : t === 0 || t === 1 ? true : t * x10 === x20 && t * y10 === y20;\n}\n","export default function(record) {\n  var i = 44, j, n = record.getInt32(36, true), m = record.getInt32(40, true), parts = new Array(n), points = new Array(m);\n  for (j = 0; j < n; ++j, i += 4) parts[j] = record.getInt32(i, true);\n  for (j = 0; j < m; ++j, i += 16) points[j] = [record.getFloat64(i, true), record.getFloat64(i + 8, true)];\n  return n === 1\n      ? {type: \"LineString\", coordinates: points}\n      : {type: \"MultiLineString\", coordinates: parts.map(function(i, j) { return points.slice(i, parts[j + 1]); })};\n};\n","export default function(a, b) {\n  var ab = new Uint8Array(a.length + b.length);\n  ab.set(a, 0);\n  ab.set(b, a.length);\n  return ab;\n}\n","export default function() {\n  return this._source.cancel();\n}\n","import slice from \"slice-source\";\nimport view from \"../view\";\nimport shp_cancel from \"./cancel\";\nimport parseMultiPoint from \"./multipoint\";\nimport parseNull from \"./null\";\nimport parsePoint from \"./point\";\nimport parsePolygon from \"./polygon\";\nimport parsePolyLine from \"./polyline\";\nimport shp_read from \"./read\";\n\nvar parsers = {\n  0: parseNull,\n  1: parsePoint,\n  3: parsePolyLine,\n  5: parsePolygon,\n  8: parseMultiPoint,\n  11: parsePoint, // PointZ\n  13: parsePolyLine, // PolyLineZ\n  15: parsePolygon, // PolygonZ\n  18: parseMultiPoint, // MultiPointZ\n  21: parsePoint, // PointM\n  23: parsePolyLine, // PolyLineM\n  25: parsePolygon, // PolygonM\n  28: parseMultiPoint // MultiPointM\n};\n\nexport default function(source) {\n  source = slice(source);\n  return source.slice(100).then(function(array) {\n    return new Shp(source, view(array));\n  });\n};\n\nfunction Shp(source, header) {\n  var type = header.getInt32(32, true);\n  if (!(type in parsers)) throw new Error(\"unsupported shape type: \" + type);\n  this._source = source;\n  this._type = type;\n  this._index = 0;\n  this._parse = parsers[type];\n  this.bbox = [header.getFloat64(36, true), header.getFloat64(44, true), header.getFloat64(52, true), header.getFloat64(60, true)];\n}\n\nvar prototype = Shp.prototype;\nprototype.read = shp_read;\nprototype.cancel = shp_cancel;\n","export default function() {\n  return null;\n};\n","function noop() {}\n\nexport default function() {\n  return Promise.all([\n    this._dbf && this._dbf.cancel(),\n    this._shp.cancel()\n  ]).then(noop);\n}\n","import dbf from \"../dbf/index\";\nimport shp from \"../shp/index\";\nimport shapefile_cancel from \"./cancel\";\nimport shapefile_read from \"./read\";\n\nexport default function(shpSource, dbfSource, decoder) {\n  return Promise.all([\n    shp(shpSource),\n    dbfSource && dbf(dbfSource, decoder)\n  ]).then(function(sources) {\n    return new Shapefile(sources[0], sources[1]);\n  });\n}\n\nfunction Shapefile(shp, dbf) {\n  this._shp = shp;\n  this._dbf = dbf;\n  this.bbox = shp.bbox;\n}\n\nvar prototype = Shapefile.prototype;\nprototype.read = shapefile_read;\nprototype.cancel = shapefile_cancel;\n","import concat from \"./concat\";\nimport view from \"../view\";\n\nexport default function() {\n  var that = this;\n  ++that._index;\n  return that._source.slice(12).then(function(array) {\n    if (array == null) return {done: true, value: undefined};\n    var header = view(array);\n\n    // If the record starts with an invalid shape type (see #36), scan ahead in\n    // four-byte increments to find the next valid record, identified by the\n    // expected index, a non-empty content length and a valid shape type.\n    function skip() {\n      return that._source.slice(4).then(function(chunk) {\n        if (chunk == null) return {done: true, value: undefined};\n        header = view(array = concat(array.slice(4), chunk));\n        return header.getInt32(0, false) !== that._index ? skip() : read();\n      });\n    }\n\n    // All records should have at least four bytes (for the record shape type),\n    // so an invalid content length indicates corruption.\n    function read() {\n      var length = header.getInt32(4, false) * 2 - 4, type = header.getInt32(8, true);\n      return length < 0 || (type && type !== that._type) ? skip() : that._source.slice(length).then(function(chunk) {\n        return {done: false, value: type ? that._parse(view(concat(array.slice(8), chunk))) : null};\n      });\n    }\n\n    return read();\n  });\n}\n","export default function cancel() {\n  return this._source.cancel();\n}\n","import path from \"path-source\";\nimport array from \"array-source\";\nimport stream from \"stream-source\";\nimport dbf from \"./dbf/index\";\nimport shapefile from \"./shapefile/index\";\nimport shp from \"./shp/index\";\n\nexport function open(shp, dbf, options) {\n  if (typeof dbf === \"string\") {\n    if (!/\\.dbf$/.test(dbf)) dbf += \".dbf\";\n    dbf = path(dbf, options);\n  } else if (dbf instanceof ArrayBuffer || dbf instanceof Uint8Array) {\n    dbf = array(dbf);\n  } else if (dbf != null) {\n    dbf = stream(dbf);\n  }\n  if (typeof shp === \"string\") {\n    if (!/\\.shp$/.test(shp)) shp += \".shp\";\n    if (dbf === undefined) dbf = path(shp.substring(0, shp.length - 4) + \".dbf\", options).catch(function() {});\n    shp = path(shp, options);\n  } else if (shp instanceof ArrayBuffer || shp instanceof Uint8Array) {\n    shp = array(shp);\n  } else {\n    shp = stream(shp);\n  }\n  return Promise.all([shp, dbf]).then(function(sources) {\n    var shp = sources[0], dbf = sources[1], encoding = \"windows-1252\";\n    if (options && options.encoding != null) encoding = options.encoding;\n    return shapefile(shp, dbf, dbf && new TextDecoder(encoding));\n  });\n}\n\nexport function openShp(source, options) {\n  if (typeof source === \"string\") {\n    if (!/\\.shp$/.test(source)) source += \".shp\";\n    source = path(source, options);\n  } else if (source instanceof ArrayBuffer || source instanceof Uint8Array) {\n    source = array(source);\n  } else {\n    source = stream(source);\n  }\n  return Promise.resolve(source).then(shp);\n}\n\nexport function openDbf(source, options) {\n  var encoding = \"windows-1252\";\n  if (options && options.encoding != null) encoding = options.encoding;\n  encoding = new TextDecoder(encoding);\n  if (typeof source === \"string\") {\n    if (!/\\.dbf$/.test(source)) source += \".dbf\";\n    source = path(source, options);\n  } else if (source instanceof ArrayBuffer || source instanceof Uint8Array) {\n    source = array(source);\n  } else {\n    source = stream(source);\n  }\n  return Promise.resolve(source).then(function(source) {\n    return dbf(source, encoding);\n  });\n}\n\nexport function read(shp, dbf, options) {\n  return open(shp, dbf, options).then(function(source) {\n    var features = [], collection = {type: \"FeatureCollection\", features: features, bbox: source.bbox};\n    return source.read().then(function read(result) {\n      if (result.done) return collection;\n      features.push(result.value);\n      return source.read().then(read);\n    });\n  });\n}\n","export default function() {\n  var that = this;\n  return Promise.all([\n    that._dbf ? that._dbf.read() : {value: {}},\n    that._shp.read()\n  ]).then(function(results) {\n    var dbf = results[0], shp = results[1];\n    return shp.done ? shp : {\n      done: false,\n      value: {\n        type: \"Feature\",\n        properties: dbf.value,\n        geometry: shp.value\n      }\n    };\n  });\n};\n"],"names":["array","array2","ArraySource","Uint8Array","this","_array","fetchPath","url","fetch","then","response","body","getReader","arrayBuffer","requestPath","Promise","resolve","reject","request","XMLHttpRequest","responseType","onload","onerror","ontimeout","open","send","path","path2","stream","source","read","prototype","done","value","cancel","empty","concat$1","a","b","length","c","set","slice","SliceSource","_source","_index","readNumber","trim","isNaN","that","subarray","result","concat","Error","index","read2","types","B","C","D","Date","substring","F","L","test","M","N","view","DataView","buffer","byteOffset","byteLength","dbf","decoder","head","getUint16","array3","Dbf","_decode","decode","bind","_recordLength","_fields","n","getUint8","j","push","name","type","String","fromCharCode","parseMultiPoint","record","i","getInt32","coordinates","Array","getFloat64","parsePoint","parsePolygon","m","parts","points","polygons","holes","forEach","i2","j2","ring","area","ringClockwise","hole","some","polygon","ringContains","ringContainsSome","point","x","y","contains","pi","xi","yi","pj","xj","yj","segmentContains","p0","p1","p2","x20","y20","x10","y10","t","parsePolyLine","map","ab","reduce","p","f","parsers","Shp","header","_type","_parse","bbox","noop","Shapefile","shp2","dbf2","_shp","_dbf","skip","chunk","options","ArrayBuffer","catch","all","sources","shpSource","dbfSource","shp3","dbf3","encoding","TextDecoder","features","collection","results","properties","geometry"],"mappings":"AAGe,SAAAA,EAAeC,GAC5B,OAAO,IAAIC,EAAYD,aAAiBE,WAAaF,EAAQ,IAAIE,WAAWF,IAG9E,SAAAC,EAAqBD,GACnBG,KAAKC,OAASJ,ECND,SAAAK,EAASC,GACtB,OAAOC,MAAMD,GAAKE,MAAK,SAASC,GACvB,OAAAA,EAASC,MAAQD,EAASC,KAAKC,UAChCF,EAASC,KAAKC,YACdF,EAASG,cAAcJ,KAAKT,MCJvB,SAAAc,EAASP,GACtB,OAAO,IAAIQ,SAAQ,SAASC,EAASC,GACnC,IAAIC,EAAU,IAAIC,eAClBD,EAAQE,aAAe,cACvBF,EAAQG,OAAS,WAAaL,EAAQhB,EAAMkB,EAAQR,YACpDQ,EAAQI,QAAUL,EAClBC,EAAQK,UAAYN,EACZC,EAAAM,KAAK,MAAOjB,GAAK,GACjBW,EAAAO,UCPG,SAAAC,EAAcC,GAC3B,OAAyB,mBAAVnB,MAAuBF,EAAYQ,GAAaa,GCJlD,SAAAC,EAAgBC,GAC7B,MAA8B,mBAAhBA,EAAOC,KAAsBD,EAASA,EAAOjB,YJU7DV,EAAY6B,UAAUD,KKXP,WACb,IAAI7B,EAAQG,KAAKC,OAEV,OADPD,KAAKC,OAAS,KACPU,QAAQC,QAAQf,EAAQ,CAAC+B,MAAM,EAAOC,MAAOhC,GAAS,CAAC+B,MAAM,EAAMC,WAAO,KLSnF/B,EAAY6B,UAAUG,OMZP,WAEb,OADA9B,KAAKC,OAAS,KACPU,QAAQC,WCFjB,IAAAmB,EAAe,IAAIhC,WAAW,GCAf,SAAAiC,EAAgBC,EAAGC,GAChC,IAAKD,EAAEE,OAAe,OAAAD,EACtB,IAAKA,EAAEC,OAAe,OAAAF,EACtB,IAAIG,EAAI,IAAIrC,WAAWkC,EAAEE,OAASD,EAAEC,QAG7B,OAFPC,EAAEC,IAAIJ,GACJG,EAAAC,IAAIH,EAAGD,EAAEE,QACJC,ECDM,SAAAE,EAAeb,GAC5B,MAA+B,mBAAjBA,EAAOa,MAAuBb,EACxC,IAAIc,EAAmC,mBAAhBd,EAAOC,KAAsBD,EAC9CA,EAAOjB,aAGnB,SAAA+B,EAAqBd,GACnBzB,KAAKwC,QAAUf,EACfzB,KAAKC,OAAS8B,EACd/B,KAAKyC,OAAS,ECdD,SAAAC,EAASb,GACf,UAAUA,EAAMc,SAAWC,MAAMf,GAASA,GAAS,KAAOA,EDgBnEU,EAAYZ,UAAUD,KEdP,WACb,IAAImB,EAAO7C,KAAMH,EAAQgD,EAAK5C,OAAO6C,SAASD,EAAKJ,QACnD,OAAOI,EAAKL,QAAQd,OAAOrB,MAAK,SAAS0C,GAGhC,OAFPF,EAAK5C,OAAS8B,EACdc,EAAKJ,OAAS,EACPM,EAAOnB,KAAQ/B,EAAMsC,OAAS,EAC/B,CAACP,MAAM,EAAOC,MAAOhC,GACrB,CAAC+B,MAAM,EAAMC,WAAO,GACpB,CAACD,MAAM,EAAOC,MAAOmB,EAAOnD,EAAOkD,EAAOlB,YFOpDU,EAAYZ,UAAUW,MGhBP,SAASH,GACtB,OAAe,GAAK,EAAG,MAAM,IAAIc,MAAM,kBACvC,IAAIJ,EAAO7C,KAAMkD,EAAQlD,KAAKC,OAAOkC,OAASnC,KAAKyC,OAGnD,GAAIzC,KAAKyC,OAASN,GAAUnC,KAAKC,OAAOkC,OAC/B,OAAAxB,QAAQC,QAAQZ,KAAKC,OAAO6C,SAAS9C,KAAKyC,OAAQzC,KAAKyC,QAAUN,IAItE,IAAAtC,EAAQ,IAAIE,WAAWoC,GAE3B,OADAtC,EAAMwC,IAAIrC,KAAKC,OAAO6C,SAAS9C,KAAKyC,SAC5B,SAAgBU,IACtB,OAAON,EAAKL,QAAQd,OAAOrB,MAAK,SAAS0C,GAIvC,OAAIA,EAAOnB,MACTiB,EAAK5C,OAAS8B,EACdc,EAAKJ,OAAS,EACPS,EAAQ,EAAIrD,EAAMiD,SAAS,EAAGI,GAAS,MAI5CA,EAAQH,EAAOlB,MAAMM,QAAUA,GACjCU,EAAK5C,OAAS8C,EAAOlB,MACrBgB,EAAKJ,OAASN,EAASe,EACvBrD,EAAMwC,IAAIU,EAAOlB,MAAMiB,SAAS,EAAGX,EAASe,GAAQA,GAC7CrD,IAIHA,EAAAwC,IAAIU,EAAOlB,MAAOqB,GACxBA,GAASH,EAAOlB,MAAMM,OACfgB,QAtBH,IHKVZ,EAAYZ,UAAUG,OInBP,WACb,OAAO9B,KAAKwC,QAAQV,UCItB,IAAIsB,EAAQ,CACVC,EAAGX,EACHY,ECPa,SAASzB,GACtB,OAAOA,EAAMc,QAAU,MDOvBY,EERa,SAAS1B,GACtB,OAAO,IAAI2B,MAAM3B,EAAM4B,UAAU,EAAG,GAAI5B,EAAM4B,UAAU,EAAG,GAAK,GAAI5B,EAAM4B,UAAU,EAAG,KFQvFC,EAAGhB,EACHiB,EGVa,SAAS9B,GACtB,OAAO,UAAU+B,KAAK/B,OAChB,UAAU+B,KAAK/B,IACf,OHQNgC,EAAGnB,EACHoB,EAAGpB,GIZU,SAAAqB,EAASlE,GACtB,OAAO,IAAImE,SAASnE,EAAMoE,OAAQpE,EAAMqE,WAAYrE,EAAMsE,YCI7C,SAAAC,EAAS3C,EAAQ4C,GAE9B,OADA5C,EAASa,EAAMb,IACDa,MAAM,IAAIjC,MAAK,SAASR,GACpC,IAAIyE,EAAOP,EAAKlE,GACT,OAAA4B,EAAOa,MAAMgC,EAAKC,UAAU,GAAG,GAAQ,IAAIlE,MAAK,SAASmE,GAC9D,OAAO,IAAIC,EAAIhD,EAAQ4C,EAASC,EAAMP,EAAKS,UAKjD,SAAaC,EAAAhD,EAAQ4C,EAASC,EAAM/D,GAClCP,KAAKwC,QAAUf,EACVzB,KAAA0E,QAAUL,EAAQM,OAAOC,KAAKP,GAC9BrE,KAAA6E,cAAgBP,EAAKC,UAAU,IAAI,GACxCvE,KAAK8E,QAAU,GACf,IAAA,IAASC,EAAI,EAAwB,KAArBxE,EAAKyE,SAASD,GAAaA,GAAK,GAAI,CAClD,IAAA,IAASE,EAAI,EAAGA,EAAI,IAAsC,IAAzB1E,EAAKyE,SAASD,EAAIE,KAAzBA,GAC1BjF,KAAK8E,QAAQI,KAAK,CAChBC,KAAMnF,KAAK0E,QAAQ,IAAI3E,WAAWQ,EAAK0D,OAAQ1D,EAAK2D,WAAaa,EAAGE,IACpEG,KAAMC,OAAOC,aAAa/E,EAAKyE,SAASD,EAAI,KAC5C5C,OAAQ5B,EAAKyE,SAASD,EAAI,OAKhC,IAAIpD,EAAY8C,EAAI9C,UC9BL,SAAA4D,EAASC,GAClB,IAAQP,EAARQ,EAAI,GAAOV,EAAIS,EAAOE,SAAS,IAAI,GAAOC,EAAc,IAAIC,MAAMb,GACtE,IAAKE,EAAI,EAAGA,EAAIF,IAAKE,EAAGQ,GAAK,GAAgBE,EAAAV,GAAK,CAACO,EAAOK,WAAWJ,GAAG,GAAOD,EAAOK,WAAWJ,EAAI,GAAG,IACjG,MAAA,CAACL,KAAM,aAAcO,YAAAA,GCHf,SAAAG,EAASN,GACf,MAAA,CAACJ,KAAM,QAASO,YAAa,CAACH,EAAOK,WAAW,GAAG,GAAOL,EAAOK,WAAW,IAAI,KCD1E,SAAAE,EAASP,GAClB,IAAQP,EAARQ,EAAI,GAAOV,EAAIS,EAAOE,SAAS,IAAI,GAAOM,EAAIR,EAAOE,SAAS,IAAI,GAAOO,EAAQ,IAAIL,MAAMb,GAAImB,EAAS,IAAIN,MAAMI,GAAIG,EAAW,GAAIC,EAAQ,GACjJ,IAAKnB,EAAI,EAAGA,EAAIF,IAAKE,EAAGQ,GAAK,EAASQ,EAAAhB,GAAKO,EAAOE,SAASD,GAAG,GAC9D,IAAKR,EAAI,EAAGA,EAAIe,IAAKf,EAAGQ,GAAK,GAAWS,EAAAjB,GAAK,CAACO,EAAOK,WAAWJ,GAAG,GAAOD,EAAOK,WAAWJ,EAAI,GAAG,IAiBnG,OAfMQ,EAAAI,SAAQ,SAASC,EAAGC,GACxB,IAAIC,EAAON,EAAO5D,MAAMgE,EAAGL,EAAMM,EAAI,KAmBzC,SAAuBC,GAChB,IAAAzB,EAAIyB,EAAKrE,QAAU,EAAU,OAAA,EAClC,IAAW4C,EAAPU,EAAI,EAAMgB,EAAOD,EAAKzB,EAAI,GAAG,GAAKyB,EAAK,GAAG,GAAKA,EAAKzB,EAAI,GAAG,GAAKyB,EAAK,GAAG,GAC5E,OAASf,EAAIV,GAAG0B,GAAQD,EAAKf,EAAI,GAAG,GAAKe,EAAKf,GAAG,GAAKe,EAAKf,EAAI,GAAG,GAAKe,EAAKf,GAAG,GAC/E,OAAOgB,GAAQ,EAtBTC,CAAcF,GACbJ,EAAMlB,KAAKsB,GADSL,EAASjB,KAAK,CAACsB,OAIpCJ,EAAAC,SAAQ,SAASM,GACZR,EAAAS,MAAK,SAASC,GACjB,GAmBV,SAA0BL,EAAMG,GAC9B,IAA6BvE,EAAzBqD,GAAI,EAAIV,EAAI4B,EAAKxE,OACd,OAAEsD,EAAIV,GACX,GAAI3C,EAAI0E,EAAaN,EAAMG,EAAKlB,IAC9B,OAAOrD,EAAI,EAGR,OAAA,EA1BC2E,CAAiBF,EAAQ,GAAIF,GAExB,OADPE,EAAQ3B,KAAKyB,IACN,MAELR,EAASjB,KAAK,CAACyB,OAGI,IAApBR,EAAShE,OACV,CAACiD,KAAM,UAAWO,YAAaQ,EAAS,IACxC,CAACf,KAAM,eAAgBO,YAAaQ,GAoB5C,SAAAW,EAAsBN,EAAMQ,GAEjB,IADT,IAAIC,EAAID,EAAM,GAAIE,EAAIF,EAAM,GAAIG,GAAW,EAClC1B,EAAI,EAAGV,EAAIyB,EAAKrE,OAAQ8C,EAAIF,EAAI,EAAGU,EAAIV,EAAGE,EAAIQ,IAAK,CAC1D,IAAI2B,EAAKZ,EAAKf,GAAI4B,EAAKD,EAAG,GAAIE,EAAKF,EAAG,GAClCG,EAAKf,EAAKvB,GAAIuC,EAAKD,EAAG,GAAIE,EAAKF,EAAG,GAClC,GAAAG,EAAgBN,EAAIG,EAAIP,GACnB,OAAA,EAEHM,EAAKJ,GAAQO,EAAKP,GAASD,GAAUO,EAAAH,IAAWH,EAAAI,IAAYG,EAAAH,GAAMD,IACtEF,GAAYA,GAGT,OAAAA,EAGT,SAAyBO,EAAAC,EAAIC,EAAIC,GAC3B,IAAAC,EAAMD,EAAG,GAAKF,EAAG,GAAII,EAAMF,EAAG,GAAKF,EAAG,GACtC,GAAQ,IAARG,GAAqB,IAARC,EAAkB,OAAA,EAC/B,IAAAC,EAAMJ,EAAG,GAAKD,EAAG,GAAIM,EAAML,EAAG,GAAKD,EAAG,GACtC,GAAQ,IAARK,GAAqB,IAARC,EAAkB,OAAA,EACnC,IAAIC,GAAWJ,EAAAE,EAAMD,EAAME,IAAQD,EAAMA,EAAMC,EAAMA,GACrD,QAAOC,EAAI,GAAKA,EAAI,KAAkB,IAANA,GAAiB,IAANA,GAAiBA,EAAIF,IAAQF,GAAOI,EAAID,IAAQF,GC/D9E,SAAAI,EAAS3C,GACtB,IAAYP,EAARQ,EAAI,GAAOV,EAAIS,EAAOE,SAAS,IAAI,GAAOM,EAAIR,EAAOE,SAAS,IAAI,GAAOO,EAAQ,IAAIL,MAAMb,GAAImB,EAAS,IAAIN,MAAMI,GACtH,IAAKf,EAAI,EAAGA,EAAIF,IAAKE,EAAGQ,GAAK,EAASQ,EAAAhB,GAAKO,EAAOE,SAASD,GAAG,GAC9D,IAAKR,EAAI,EAAGA,EAAIe,IAAKf,EAAGQ,GAAK,GAAWS,EAAAjB,GAAK,CAACO,EAAOK,WAAWJ,GAAG,GAAOD,EAAOK,WAAWJ,EAAI,GAAG,IACnG,OAAa,IAANV,EACD,CAACK,KAAM,aAAcO,YAAaO,GAClC,CAACd,KAAM,kBAAmBO,YAAaM,EAAMmC,KAAI,SAAS9B,EAAGC,GAAK,OAAOL,EAAO5D,MAAMgE,EAAGL,EAAMM,EAAI,QCN5F,SAAAvD,EAASf,EAAGC,GACzB,IAAImG,EAAK,IAAItI,WAAWkC,EAAEE,OAASD,EAAEC,QAG9B,OAFPkG,EAAGhG,IAAIJ,EAAG,GACPoG,EAAAhG,IAAIH,EAAGD,EAAEE,QACLkG,EL2BT1G,EAAUD,KLhBK,WACT,IAAAmB,EAAO7C,KAAMyF,EAAI,EACrB,OAAO5C,EAAKL,QAAQF,MAAMO,EAAKgC,eAAexE,MAAK,SAASwB,GAC1D,OAAOA,GAAuB,KAAbA,EAAM,GAAe,CAACD,MAAM,EAAOC,MAAOgB,EAAKiC,QAAQwD,QAAO,SAASC,EAAGC,GAElF,OADLD,EAAAC,EAAErD,MAAQ/B,EAAMoF,EAAEpD,MAAMvC,EAAK6B,QAAQ7C,EAAMiB,SAAS2C,EAAGA,GAAK+C,EAAErG,UACzDoG,IACN,KAAO,CAAC3G,MAAM,EAAMC,WAAO,OKWlCF,EAAUG,OMhCK,WACb,OAAO9B,KAAKwC,QAAQV,UCStB,IAAI2G,EAAU,CACZ,ECXa,WACN,OAAA,MDWP,EAAG3C,EACH,EAAGqC,EACH,EAAGpC,EACH,EAAGR,EACH,GAAIO,EACJ,GAAIqC,EACJ,GAAIpC,EACJ,GAAIR,EACJ,GAAIO,EACJ,GAAIqC,EACJ,GAAIpC,EACJ,GAAIR,GAUN,SAAAmD,EAAajH,EAAQkH,GACf,IAAAvD,EAAOuD,EAAOjD,SAAS,IAAI,GAC/B,KAAcN,KAAAqD,GAAgB,MAAA,IAAIxF,MAAM,2BAA6BmC,GACrEpF,KAAKwC,QAAUf,EACfzB,KAAK4I,MAAQxD,EACbpF,KAAKyC,OAAS,EACdzC,KAAK6I,OAASJ,EAAQrD,GACtBpF,KAAK8I,KAAO,CAACH,EAAO9C,WAAW,IAAI,GAAO8C,EAAO9C,WAAW,IAAI,GAAO8C,EAAO9C,WAAW,IAAI,GAAO8C,EAAO9C,WAAW,IAAI,IAG5H,IAAIlE,EAAY+G,EAAI/G,UE3CpB,SAAgBoH,KCchB,SAAAC,EAAmBC,EAAKC,GACtBlJ,KAAKmJ,KAAOF,EACZjJ,KAAKoJ,KAAOF,EACZlJ,KAAK8I,KAAOG,EAAIH,KH2BlBnH,EAAUD,KIzCK,WACb,IAAImB,EAAO7C,KAEX,QADE6C,EAAKJ,OACAI,EAAKL,QAAQF,MAAM,IAAIjC,MAAK,SAASR,GAC1C,GAAa,MAATA,EAAsB,MAAA,CAAC+B,MAAM,EAAMC,WAAO,GAC9C,IAAI8G,EAAS5E,EAAKlE,GAKF,SAAAwJ,IACd,OAAOxG,EAAKL,QAAQF,MAAM,GAAGjC,MAAK,SAASiJ,GACzC,OAAa,MAATA,EAAsB,CAAC1H,MAAM,EAAMC,WAAO,IAC9C8G,EAAS5E,EAAKlE,EAAQmD,EAAOnD,EAAMyC,MAAM,GAAIgH,KAC/B5D,SAAS,GAAG,KAAW7C,EAAKJ,OAAS4G,IAASlG,OAMhD,SAAAA,IACV,IAAAhB,EAAqC,EAA5BwG,EAAOjD,SAAS,GAAG,GAAa,EAAGN,EAAOuD,EAAOjD,SAAS,GAAG,GAC1E,OAAOvD,EAAS,GAAMiD,GAAQA,IAASvC,EAAK+F,MAASS,IAASxG,EAAKL,QAAQF,MAAMH,GAAQ9B,MAAK,SAASiJ,GACrG,MAAO,CAAC1H,MAAM,EAAOC,MAAOuD,EAAOvC,EAAKgG,OAAO9E,EAAKf,EAAOnD,EAAMyC,MAAM,GAAIgH,KAAW,SAInF,OAAAnG,QJeXxB,EAAUG,OK7CK,WACb,OAAO9B,KAAKwC,QAAQV,UFmBtB,IAAIH,EAAYqH,EAAUrH,UGbnB,SAAcP,EAAA6H,EAAKC,EAAKK,GAkB7B,MAjBmB,iBAARL,GACJ,SAAStF,KAAKsF,KAAaA,GAAA,QAChCA,EAAM5H,EAAK4H,IACFA,aAAeM,aAAeN,aAAenJ,WACtDmJ,EAAMtJ,EAAMsJ,GACI,MAAPA,IACTA,EAAM1H,EAAO0H,IAEI,iBAARD,GACJ,SAASrF,KAAKqF,KAAaA,GAAA,aACpB,IAARC,IAAyBA,EAAA5H,EAAK2H,EAAIxF,UAAU,EAAGwF,EAAI9G,OAAS,GAAK,QAAiBsH,OAAM,gBAC5FR,EAAM3H,EAAK2H,IAEXA,EADSA,aAAeO,aAAeP,aAAelJ,WAChDH,EAAMqJ,GAENzH,EAAOyH,GAERtI,QAAQ+I,IAAI,CAACT,EAAKC,IAAM7I,MAAK,SAASsJ,GAC3C,IHrBoBC,EAAWC,EAAWxF,EHqBtB5C,EMAhBqI,EAAMH,EAAQ,GAAII,EAAMJ,EAAQ,GAAIK,EAAW,eAEnD,OADIT,GAA+B,MAApBA,EAAQS,WAAkBA,EAAWT,EAAQS,UHtBxCJ,EGuBHE,EHvBcD,EGuBTE,EHvBoB1F,EGuBf0F,GAAO,IAAIE,YAAYD,GHtB7CrJ,QAAQ+I,IAAI,EHoBGjI,EGnBhBmI,GHoBNnI,EAASa,EAAMb,IACDa,MAAM,KAAKjC,MAAK,SAASR,GAC9B,OAAA,IAAI6I,EAAIjH,EAAQsC,EAAKlE,QGrB5BgK,GAAazF,EAAIyF,EAAWxF,KAC3BhE,MAAK,SAASsJ,GACf,OAAO,IAAIX,EAAUW,EAAQ,GAAIA,EAAQ,UGmDtC,SAAcjI,EAAAuH,EAAKC,EAAKK,GAC7B,OAAOnI,EAAK6H,EAAKC,EAAKK,GAASlJ,MAAK,SAASoB,GACvC,IAAAyI,EAAW,GAAIC,EAAa,CAAC/E,KAAM,oBAAqB8E,SAAAA,EAAoBpB,KAAMrH,EAAOqH,MAC7F,OAAOrH,EAAOC,OAAOrB,MAAK,SAAA8C,EAAcJ,GACtC,OAAIA,EAAOnB,KAAauI,GACxBD,EAAShF,KAAKnC,EAAOlB,OACdJ,EAAOC,OAAOrB,KAAK8C,UH9ChCxB,EAAUD,KIrBK,WACb,IAAImB,EAAO7C,KACX,OAAOW,QAAQ+I,IAAI,CACjB7G,EAAKuG,KAAOvG,EAAKuG,KAAK1H,OAAS,CAACG,MAAO,IACvCgB,EAAKsG,KAAKzH,SACTrB,MAAK,SAAS+J,GACf,IAAIlB,EAAMkB,EAAQ,GAAInB,EAAMmB,EAAQ,GAC7B,OAAAnB,EAAIrH,KAAOqH,EAAM,CACtBrH,MAAM,EACNC,MAAO,CACLuD,KAAM,UACNiF,WAAYnB,EAAIrH,MAChByI,SAAUrB,EAAIpH,YJUtBF,EAAUG,ODpBK,WACb,OAAOnB,QAAQ+I,IAAI,CACjB1J,KAAKoJ,MAAQpJ,KAAKoJ,KAAKtH,SACvB9B,KAAKmJ,KAAKrH,WACTzB,KAAK0I"}