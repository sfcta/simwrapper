import{d as t}from"./vendor.e9c367ae.js";import{b as i}from"./index.3d2ad359.js";import{g as e,n as s}from"./index.2deacc07.js";import{H as l}from"./HTTPFileSystem.e57ad358.js";import{T as a}from"./TopSheet.2244b18e.js";const o=t({name:"CalculationTable",components:{TopSheet:a},props:{root:{type:String,required:!0},subfolder:{type:String,required:!0},yamlConfig:String,config:Object,thumbnail:Boolean},data:()=>({globalState:e.state,allConfigFiles:{dashboards:{},topsheets:{},vizes:{},configs:{}},files:[],isLoaded:!1,vizDetails:{title:"",description:"",thumbnail:""}}),computed:{fileApi(){return new l(this.fileSystem,e)},fileSystem(){const t=this.$store.state.svnProjects.filter((t=>t.slug===this.root));if(0===t.length)throw console.log("no such project"),Error;return t[0]},urlThumbnail:()=>"url('assets/thumbnail.jpg') no-repeat;"},methods:{async getVizDetails(){if(!this.fileApi)return;console.log(this.yamlConfig);try{const t=await this.fileApi.getFileText(this.subfolder+"/"+this.yamlConfig);this.vizDetails=i.parse(t)}catch(e){console.error("failed")}const t=this.vizDetails.title?this.vizDetails.title:"Table";this.$emit("title",t)}},async mounted(){await this.getVizDetails(),this.allConfigFiles=await this.fileApi.findAllYamlConfigs(this.subfolder);const{files:t}=await this.fileApi.getDirectory(this.subfolder);this.files=t,this.isLoaded=!0,this.thumbnail}});const r={};var n=s(o,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"my-component",class:{"hide-thumbnail":!t.thumbnail},attrs:{oncontextmenu:"return false"}},[t.thumbnail?e("img",{staticClass:"thumb",attrs:{src:"/simwrapper/assets/table.439da6cc.png",width:128}}):t._e(),!t.thumbnail&&t.isLoaded?e("div",{staticClass:"topsheet"},[e("p",{staticClass:"header"},[t._v(t._s(t.subfolder))]),e("h2",[t._v(t._s(t.vizDetails.title))]),e("p",[t._v(t._s(t.vizDetails.description))]),e("hr"),e("TopSheet",{tag:"component",staticClass:"dash-card",attrs:{fileSystemConfig:t.fileSystem,subfolder:t.subfolder,config:t.vizDetails,yaml:t.yamlConfig,files:t.files,cardTitle:t.vizDetails.title,cardId:"table1",allConfigFiles:t.allConfigFiles}})],1):t._e()])}),[],!1,f,"7b398d58",null,null);function f(t){for(let i in r)this[i]=r[i]}var h=function(){return n.exports}();export{h as default};
//# sourceMappingURL=CalculationTable.abaf1087.js.map
