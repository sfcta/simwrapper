var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(t,o,a[o]);if(e)for(var o of e(a))i.call(a,o)&&r(t,o,a[o]);return t};import{j as o,d as s}from"./vendor.e9c367ae.js";import{b as l}from"./index.3d2ad359.js";import{g as u}from"./util.b5d45f97.js";import{n as c,g as f,D as d}from"./index.2deacc07.js";import{H as h}from"./HTTPFileSystem.e57ad358.js";import{W as p}from"./DashboardDataManager.e0d06cdd.js";import{d as v,a as m,S as g,c as C}from"./ColorsAndWidths.e99b2bfb.js";import{d as _}from"./index.39efad9c.js";import{L as y}from"./LegendBox.0a0c86dd.js";var b,w,S={exports:{}};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */b=S,w=S.exports,function(){var t,e="Expected a function",n="__lodash_hash_undefined__",i="__lodash_placeholder__",r=16,a=32,s=64,l=128,u=256,c=1/0,f=9007199254740991,d=NaN,h=4294967295,p=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",r],["flip",512],["partial",a],["partialRight",s],["rearg",u]],v="[object Arguments]",m="[object Array]",g="[object Boolean]",C="[object Date]",_="[object Error]",y="[object Function]",S="[object GeneratorFunction]",x="[object Map]",k="[object Number]",j="[object Object]",O="[object Promise]",D="[object RegExp]",$="[object Set]",L="[object String]",z="[object Symbol]",A="[object WeakMap]",R="[object ArrayBuffer]",I="[object DataView]",F="[object Float32Array]",E="[object Float64Array]",N="[object Int8Array]",P="[object Int16Array]",T="[object Int32Array]",U="[object Uint8Array]",W="[object Uint8ClampedArray]",B="[object Uint16Array]",q="[object Uint32Array]",M=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&(?:amp|lt|gt|quot|#39);/g,J=/[&<>"']/g,G=RegExp(K.source),Z=RegExp(J.source),Y=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,et=/^\w*$/,nt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,it=/[\\^$.*+?()[\]{}|]/g,rt=RegExp(it.source),at=/^\s+/,ot=/\s/,st=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lt=/\{\n\/\* \[wrapped with (.+)\] \*/,ut=/,? & /,ct=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ft=/[()=,{}\[\]\/\s]/,dt=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pt=/\w*$/,vt=/^[-+]0x[0-9a-f]+$/i,mt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,Ct=/^0o[0-7]+$/i,_t=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,wt=/['\n\r\u2028\u2029\\]/g,St="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xt="\\u2700-\\u27bf",kt="a-z\\xdf-\\xf6\\xf8-\\xff",jt="A-Z\\xc0-\\xd6\\xd8-\\xde",Ot="\\ufe0e\\ufe0f",Dt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$t="['’]",Lt="[\\ud800-\\udfff]",zt="["+Dt+"]",At="["+St+"]",Rt="\\d+",It="[\\u2700-\\u27bf]",Ft="["+kt+"]",Et="[^\\ud800-\\udfff"+Dt+Rt+xt+kt+jt+"]",Nt="\\ud83c[\\udffb-\\udfff]",Pt="[^\\ud800-\\udfff]",Tt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ut="[\\ud800-\\udbff][\\udc00-\\udfff]",Wt="["+jt+"]",Bt="(?:"+Ft+"|"+Et+")",qt="(?:"+Wt+"|"+Et+")",Mt="(?:['’](?:d|ll|m|re|s|t|ve))?",Ht="(?:['’](?:D|LL|M|RE|S|T|VE))?",Vt="(?:"+At+"|"+Nt+")?",Kt="[\\ufe0e\\ufe0f]?",Jt=Kt+Vt+"(?:\\u200d(?:"+[Pt,Tt,Ut].join("|")+")"+Kt+Vt+")*",Gt="(?:"+[It,Tt,Ut].join("|")+")"+Jt,Zt="(?:"+[Pt+At+"?",At,Tt,Ut,Lt].join("|")+")",Yt=RegExp($t,"g"),Xt=RegExp(At,"g"),Qt=RegExp(Nt+"(?="+Nt+")|"+Zt+Jt,"g"),te=RegExp([Wt+"?"+Ft+"+"+Mt+"(?="+[zt,Wt,"$"].join("|")+")",qt+"+"+Ht+"(?="+[zt,Wt+Bt,"$"].join("|")+")",Wt+"?"+Bt+"+"+Mt,Wt+"+"+Ht,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Rt,Gt].join("|"),"g"),ee=RegExp("[\\u200d\\ud800-\\udfff"+St+Ot+"]"),ne=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ie=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],re=-1,ae={};ae[F]=ae[E]=ae[N]=ae[P]=ae[T]=ae[U]=ae[W]=ae[B]=ae[q]=!0,ae[v]=ae[m]=ae[R]=ae[g]=ae[I]=ae[C]=ae[_]=ae[y]=ae[x]=ae[k]=ae[j]=ae[D]=ae[$]=ae[L]=ae[A]=!1;var oe={};oe[v]=oe[m]=oe[R]=oe[I]=oe[g]=oe[C]=oe[F]=oe[E]=oe[N]=oe[P]=oe[T]=oe[x]=oe[k]=oe[j]=oe[D]=oe[$]=oe[L]=oe[z]=oe[U]=oe[W]=oe[B]=oe[q]=!0,oe[_]=oe[y]=oe[A]=!1;var se={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},le=parseFloat,ue=parseInt,ce="object"==typeof o&&o&&o.Object===Object&&o,fe="object"==typeof self&&self&&self.Object===Object&&self,de=ce||fe||Function("return this")(),he=w&&!w.nodeType&&w,pe=he&&b&&!b.nodeType&&b,ve=pe&&pe.exports===he,me=ve&&ce.process,ge=function(){try{var t=pe&&pe.require&&pe.require("util").types;return t||me&&me.binding&&me.binding("util")}catch(e){}}(),Ce=ge&&ge.isArrayBuffer,_e=ge&&ge.isDate,ye=ge&&ge.isMap,be=ge&&ge.isRegExp,we=ge&&ge.isSet,Se=ge&&ge.isTypedArray;function xe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ke(t,e,n,i){for(var r=-1,a=null==t?0:t.length;++r<a;){var o=t[r];e(i,o,n(o),t)}return i}function je(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function Oe(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function De(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function $e(t,e){for(var n=-1,i=null==t?0:t.length,r=0,a=[];++n<i;){var o=t[n];e(o,n,t)&&(a[r++]=o)}return a}function Le(t,e){return!(null==t||!t.length)&&Ue(t,e,0)>-1}function ze(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function Ae(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function Re(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function Ie(t,e,n,i){var r=-1,a=null==t?0:t.length;for(i&&a&&(n=t[++r]);++r<a;)n=e(n,t[r],r,t);return n}function Fe(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function Ee(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var Ne=Me("length");function Pe(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function Te(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}function Ue(t,e,n){return e==e?function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):Te(t,Be,n)}function We(t,e,n,i){for(var r=n-1,a=t.length;++r<a;)if(i(t[r],e))return r;return-1}function Be(t){return t!=t}function qe(t,e){var n=null==t?0:t.length;return n?Ke(t,e)/n:d}function Me(e){return function(n){return null==n?t:n[e]}}function He(e){return function(n){return null==e?t:e[n]}}function Ve(t,e,n,i,r){return r(t,(function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)})),n}function Ke(e,n){for(var i,r=-1,a=e.length;++r<a;){var o=n(e[r]);o!==t&&(i=i===t?o:i+o)}return i}function Je(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function Ge(t){return t?t.slice(0,hn(t)+1).replace(at,""):t}function Ze(t){return function(e){return t(e)}}function Ye(t,e){return Ae(e,(function(e){return t[e]}))}function Xe(t,e){return t.has(e)}function Qe(t,e){for(var n=-1,i=t.length;++n<i&&Ue(e,t[n],0)>-1;);return n}function tn(t,e){for(var n=t.length;n--&&Ue(e,t[n],0)>-1;);return n}function en(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}var nn=He({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),rn=He({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(t){return"\\"+se[t]}function on(t){return ee.test(t)}function sn(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function ln(t,e){return function(n){return t(e(n))}}function un(t,e){for(var n=-1,r=t.length,a=0,o=[];++n<r;){var s=t[n];s!==e&&s!==i||(t[n]=i,o[a++]=n)}return o}function cn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function fn(t){return on(t)?function(t){for(var e=Qt.lastIndex=0;Qt.test(t);)++e;return e}(t):Ne(t)}function dn(t){return on(t)?function(t){return t.match(Qt)||[]}(t):function(t){return t.split("")}(t)}function hn(t){for(var e=t.length;e--&&ot.test(t.charAt(e)););return e}var pn=He({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),vn=function o(b){var w,ot=(b=null==b?de:vn.defaults(de.Object(),b,vn.pick(de,ie))).Array,St=b.Date,xt=b.Error,kt=b.Function,jt=b.Math,Ot=b.Object,Dt=b.RegExp,$t=b.String,Lt=b.TypeError,zt=ot.prototype,At=kt.prototype,Rt=Ot.prototype,It=b["__core-js_shared__"],Ft=At.toString,Et=Rt.hasOwnProperty,Nt=0,Pt=(w=/[^.]+$/.exec(It&&It.keys&&It.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",Tt=Rt.toString,Ut=Ft.call(Ot),Wt=de._,Bt=Dt("^"+Ft.call(Et).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qt=ve?b.Buffer:t,Mt=b.Symbol,Ht=b.Uint8Array,Vt=qt?qt.allocUnsafe:t,Kt=ln(Ot.getPrototypeOf,Ot),Jt=Ot.create,Gt=Rt.propertyIsEnumerable,Zt=zt.splice,Qt=Mt?Mt.isConcatSpreadable:t,ee=Mt?Mt.iterator:t,se=Mt?Mt.toStringTag:t,ce=function(){try{var t=da(Ot,"defineProperty");return t({},"",{}),t}catch(e){}}(),fe=b.clearTimeout!==de.clearTimeout&&b.clearTimeout,he=St&&St.now!==de.Date.now&&St.now,pe=b.setTimeout!==de.setTimeout&&b.setTimeout,me=jt.ceil,ge=jt.floor,Ne=Ot.getOwnPropertySymbols,He=qt?qt.isBuffer:t,mn=b.isFinite,gn=zt.join,Cn=ln(Ot.keys,Ot),_n=jt.max,yn=jt.min,bn=St.now,wn=b.parseInt,Sn=jt.random,xn=zt.reverse,kn=da(b,"DataView"),jn=da(b,"Map"),On=da(b,"Promise"),Dn=da(b,"Set"),$n=da(b,"WeakMap"),Ln=da(Ot,"create"),zn=$n&&new $n,An={},Rn=Ba(kn),In=Ba(jn),Fn=Ba(On),En=Ba(Dn),Nn=Ba($n),Pn=Mt?Mt.prototype:t,Tn=Pn?Pn.valueOf:t,Un=Pn?Pn.toString:t;function Wn(t){if(os(t)&&!Go(t)&&!(t instanceof Hn)){if(t instanceof Mn)return t;if(Et.call(t,"__wrapped__"))return qa(t)}return new Mn(t)}var Bn=function(){function e(){}return function(n){if(!as(n))return{};if(Jt)return Jt(n);e.prototype=n;var i=new e;return e.prototype=t,i}}();function qn(){}function Mn(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}function Hn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=h,this.__views__=[]}function Vn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Kn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Jn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Jn;++e<n;)this.add(t[e])}function Zn(t){var e=this.__data__=new Kn(t);this.size=e.size}function Yn(t,e){var n=Go(t),i=!n&&Jo(t),r=!n&&!i&&Qo(t),a=!n&&!i&&!r&&ps(t),o=n||i||r||a,s=o?Je(t.length,$t):[],l=s.length;for(var u in t)!e&&!Et.call(t,u)||o&&("length"==u||r&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||_a(u,l))||s.push(u);return s}function Xn(e){var n=e.length;return n?e[Gi(0,n-1)]:t}function Qn(t,e){return Ea(Lr(t),li(e,0,t.length))}function ti(t){return Ea(Lr(t))}function ei(e,n,i){(i!==t&&!Ho(e[n],i)||i===t&&!(n in e))&&oi(e,n,i)}function ni(e,n,i){var r=e[n];Et.call(e,n)&&Ho(r,i)&&(i!==t||n in e)||oi(e,n,i)}function ii(t,e){for(var n=t.length;n--;)if(Ho(t[n][0],e))return n;return-1}function ri(t,e,n,i){return hi(t,(function(t,r,a){e(i,t,n(t),a)})),i}function ai(t,e){return t&&zr(e,Es(e),t)}function oi(t,e,n){"__proto__"==e&&ce?ce(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function si(e,n){for(var i=-1,r=n.length,a=ot(r),o=null==e;++i<r;)a[i]=o?t:zs(e,n[i]);return a}function li(e,n,i){return e==e&&(i!==t&&(e=e<=i?e:i),n!==t&&(e=e>=n?e:n)),e}function ui(e,n,i,r,a,o){var s,l=1&n,u=2&n,c=4&n;if(i&&(s=a?i(e,r,a,o):i(e)),s!==t)return s;if(!as(e))return e;var f=Go(e);if(f){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Et.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!l)return Lr(e,s)}else{var d=va(e),h=d==y||d==S;if(Qo(e))return xr(e,l);if(d==j||d==v||h&&!a){if(s=u||h?{}:ga(e),!l)return u?function(t,e){return zr(t,pa(t),e)}(e,function(t,e){return t&&zr(e,Ns(e),t)}(s,e)):function(t,e){return zr(t,ha(t),e)}(e,ai(s,e))}else{if(!oe[d])return a?e:{};s=function(t,e,n){var i,r=t.constructor;switch(e){case R:return kr(t);case g:case C:return new r(+t);case I:return function(t,e){var n=e?kr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case F:case E:case N:case P:case T:case U:case W:case B:case q:return jr(t,n);case x:return new r;case k:case L:return new r(t);case D:return function(t){var e=new t.constructor(t.source,pt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case $:return new r;case z:return i=t,Tn?Ot(Tn.call(i)):{}}}(e,d,l)}}o||(o=new Zn);var p=o.get(e);if(p)return p;o.set(e,s),fs(e)?e.forEach((function(t){s.add(ui(t,n,i,t,e,o))})):ss(e)&&e.forEach((function(t,r){s.set(r,ui(t,n,i,r,e,o))}));var m=f?t:(c?u?aa:ra:u?Ns:Es)(e);return je(m||e,(function(t,r){m&&(t=e[r=t]),ni(s,r,ui(t,n,i,r,e,o))})),s}function ci(e,n,i){var r=i.length;if(null==e)return!r;for(e=Ot(e);r--;){var a=i[r],o=n[a],s=e[a];if(s===t&&!(a in e)||!o(s))return!1}return!0}function fi(n,i,r){if("function"!=typeof n)throw new Lt(e);return Aa((function(){n.apply(t,r)}),i)}function di(t,e,n,i){var r=-1,a=Le,o=!0,s=t.length,l=[],u=e.length;if(!s)return l;n&&(e=Ae(e,Ze(n))),i?(a=ze,o=!1):e.length>=200&&(a=Xe,o=!1,e=new Gn(e));t:for(;++r<s;){var c=t[r],f=null==n?c:n(c);if(c=i||0!==c?c:0,o&&f==f){for(var d=u;d--;)if(e[d]===f)continue t;l.push(c)}else a(e,f,i)||l.push(c)}return l}Wn.templateSettings={escape:Y,evaluate:X,interpolate:Q,variable:"",imports:{_:Wn}},Wn.prototype=qn.prototype,Wn.prototype.constructor=Wn,Mn.prototype=Bn(qn.prototype),Mn.prototype.constructor=Mn,Hn.prototype=Bn(qn.prototype),Hn.prototype.constructor=Hn,Vn.prototype.clear=function(){this.__data__=Ln?Ln(null):{},this.size=0},Vn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Vn.prototype.get=function(e){var i=this.__data__;if(Ln){var r=i[e];return r===n?t:r}return Et.call(i,e)?i[e]:t},Vn.prototype.has=function(e){var n=this.__data__;return Ln?n[e]!==t:Et.call(n,e)},Vn.prototype.set=function(e,i){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ln&&i===t?n:i,this},Kn.prototype.clear=function(){this.__data__=[],this.size=0},Kn.prototype.delete=function(t){var e=this.__data__,n=ii(e,t);return!(n<0||(n==e.length-1?e.pop():Zt.call(e,n,1),--this.size,0))},Kn.prototype.get=function(e){var n=this.__data__,i=ii(n,e);return i<0?t:n[i][1]},Kn.prototype.has=function(t){return ii(this.__data__,t)>-1},Kn.prototype.set=function(t,e){var n=this.__data__,i=ii(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},Jn.prototype.clear=function(){this.size=0,this.__data__={hash:new Vn,map:new(jn||Kn),string:new Vn}},Jn.prototype.delete=function(t){var e=ca(this,t).delete(t);return this.size-=e?1:0,e},Jn.prototype.get=function(t){return ca(this,t).get(t)},Jn.prototype.has=function(t){return ca(this,t).has(t)},Jn.prototype.set=function(t,e){var n=ca(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},Gn.prototype.add=Gn.prototype.push=function(t){return this.__data__.set(t,n),this},Gn.prototype.has=function(t){return this.__data__.has(t)},Zn.prototype.clear=function(){this.__data__=new Kn,this.size=0},Zn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Zn.prototype.get=function(t){return this.__data__.get(t)},Zn.prototype.has=function(t){return this.__data__.has(t)},Zn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Kn){var i=n.__data__;if(!jn||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Jn(i)}return n.set(t,e),this.size=n.size,this};var hi=Ir(bi),pi=Ir(wi,!0);function vi(t,e){var n=!0;return hi(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function mi(e,n,i){for(var r=-1,a=e.length;++r<a;){var o=e[r],s=n(o);if(null!=s&&(l===t?s==s&&!hs(s):i(s,l)))var l=s,u=o}return u}function gi(t,e){var n=[];return hi(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function Ci(t,e,n,i,r){var a=-1,o=t.length;for(n||(n=Ca),r||(r=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?Ci(s,e-1,n,i,r):Re(r,s):i||(r[r.length]=s)}return r}var _i=Fr(),yi=Fr(!0);function bi(t,e){return t&&_i(t,e,Es)}function wi(t,e){return t&&yi(t,e,Es)}function Si(t,e){return $e(e,(function(e){return ns(t[e])}))}function xi(e,n){for(var i=0,r=(n=yr(n,e)).length;null!=e&&i<r;)e=e[Wa(n[i++])];return i&&i==r?e:t}function ki(t,e,n){var i=e(t);return Go(t)?i:Re(i,n(t))}function ji(e){return null==e?e===t?"[object Undefined]":"[object Null]":se&&se in Ot(e)?function(e){var n=Et.call(e,se),i=e[se];try{e[se]=t;var r=!0}catch(o){}var a=Tt.call(e);return r&&(n?e[se]=i:delete e[se]),a}(e):function(t){return Tt.call(t)}(e)}function Oi(t,e){return t>e}function Di(t,e){return null!=t&&Et.call(t,e)}function $i(t,e){return null!=t&&e in Ot(t)}function Li(e,n,i){for(var r=i?ze:Le,a=e[0].length,o=e.length,s=o,l=ot(o),u=1/0,c=[];s--;){var f=e[s];s&&n&&(f=Ae(f,Ze(n))),u=yn(f.length,u),l[s]=!i&&(n||a>=120&&f.length>=120)?new Gn(s&&f):t}f=e[0];var d=-1,h=l[0];t:for(;++d<a&&c.length<u;){var p=f[d],v=n?n(p):p;if(p=i||0!==p?p:0,!(h?Xe(h,v):r(c,v,i))){for(s=o;--s;){var m=l[s];if(!(m?Xe(m,v):r(e[s],v,i)))continue t}h&&h.push(v),c.push(p)}}return c}function zi(e,n,i){var r=null==(e=Da(e,n=yr(n,e)))?e:e[Wa(to(n))];return null==r?t:xe(r,e,i)}function Ai(t){return os(t)&&ji(t)==v}function Ri(e,n,i,r,a){return e===n||(null==e||null==n||!os(e)&&!os(n)?e!=e&&n!=n:function(e,n,i,r,a,o){var s=Go(e),l=Go(n),u=s?m:va(e),c=l?m:va(n),f=(u=u==v?j:u)==j,d=(c=c==v?j:c)==j,h=u==c;if(h&&Qo(e)){if(!Qo(n))return!1;s=!0,f=!1}if(h&&!f)return o||(o=new Zn),s||ps(e)?na(e,n,i,r,a,o):function(t,e,n,i,r,a,o){switch(n){case I:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case R:return!(t.byteLength!=e.byteLength||!a(new Ht(t),new Ht(e)));case g:case C:case k:return Ho(+t,+e);case _:return t.name==e.name&&t.message==e.message;case D:case L:return t==e+"";case x:var s=sn;case $:var l=1&i;if(s||(s=cn),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;i|=2,o.set(t,e);var c=na(s(t),s(e),i,r,a,o);return o.delete(t),c;case z:if(Tn)return Tn.call(t)==Tn.call(e)}return!1}(e,n,u,i,r,a,o);if(!(1&i)){var p=f&&Et.call(e,"__wrapped__"),y=d&&Et.call(n,"__wrapped__");if(p||y){var b=p?e.value():e,w=y?n.value():n;return o||(o=new Zn),a(b,w,i,r,o)}}return!!h&&(o||(o=new Zn),function(e,n,i,r,a,o){var s=1&i,l=ra(e),u=l.length,c=ra(n).length;if(u!=c&&!s)return!1;for(var f=u;f--;){var d=l[f];if(!(s?d in n:Et.call(n,d)))return!1}var h=o.get(e),p=o.get(n);if(h&&p)return h==n&&p==e;var v=!0;o.set(e,n),o.set(n,e);for(var m=s;++f<u;){var g=e[d=l[f]],C=n[d];if(r)var _=s?r(C,g,d,n,e,o):r(g,C,d,e,n,o);if(!(_===t?g===C||a(g,C,i,r,o):_)){v=!1;break}m||(m="constructor"==d)}if(v&&!m){var y=e.constructor,b=n.constructor;y==b||!("constructor"in e)||!("constructor"in n)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(v=!1)}return o.delete(e),o.delete(n),v}(e,n,i,r,a,o))}(e,n,i,r,Ri,a))}function Ii(e,n,i,r){var a=i.length,o=a,s=!r;if(null==e)return!o;for(e=Ot(e);a--;){var l=i[a];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<o;){var u=(l=i[a])[0],c=e[u],f=l[1];if(s&&l[2]){if(c===t&&!(u in e))return!1}else{var d=new Zn;if(r)var h=r(c,f,u,e,n,d);if(!(h===t?Ri(f,c,3,r,d):h))return!1}}return!0}function Fi(t){return!(!as(t)||(e=t,Pt&&Pt in e))&&(ns(t)?Bt:gt).test(Ba(t));var e}function Ei(t){return"function"==typeof t?t:null==t?ll:"object"==typeof t?Go(t)?Bi(t[0],t[1]):Wi(t):gl(t)}function Ni(t){if(!xa(t))return Cn(t);var e=[];for(var n in Ot(t))Et.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Pi(t){if(!as(t))return function(t){var e=[];if(null!=t)for(var n in Ot(t))e.push(n);return e}(t);var e=xa(t),n=[];for(var i in t)("constructor"!=i||!e&&Et.call(t,i))&&n.push(i);return n}function Ti(t,e){return t<e}function Ui(t,e){var n=-1,i=Yo(t)?ot(t.length):[];return hi(t,(function(t,r,a){i[++n]=e(t,r,a)})),i}function Wi(t){var e=fa(t);return 1==e.length&&e[0][2]?ja(e[0][0],e[0][1]):function(n){return n===t||Ii(n,t,e)}}function Bi(e,n){return ba(e)&&ka(n)?ja(Wa(e),n):function(i){var r=zs(i,e);return r===t&&r===n?As(i,e):Ri(n,r,3)}}function qi(e,n,i,r,a){e!==n&&_i(n,(function(o,s){if(a||(a=new Zn),as(o))!function(e,n,i,r,a,o,s){var l=La(e,i),u=La(n,i),c=s.get(u);if(c)ei(e,i,c);else{var f=o?o(l,u,i+"",e,n,s):t,d=f===t;if(d){var h=Go(u),p=!h&&Qo(u),v=!h&&!p&&ps(u);f=u,h||p||v?Go(l)?f=l:Xo(l)?f=Lr(l):p?(d=!1,f=xr(u,!0)):v?(d=!1,f=jr(u,!0)):f=[]:us(u)||Jo(u)?(f=l,Jo(l)?f=ws(l):as(l)&&!ns(l)||(f=ga(u))):d=!1}d&&(s.set(u,f),a(f,u,r,o,s),s.delete(u)),ei(e,i,f)}}(e,n,s,i,qi,r,a);else{var l=r?r(La(e,s),o,s+"",e,n,a):t;l===t&&(l=o),ei(e,s,l)}}),Ns)}function Mi(e,n){var i=e.length;if(i)return _a(n+=n<0?i:0,i)?e[n]:t}function Hi(t,e,n){e=e.length?Ae(e,(function(t){return Go(t)?function(e){return xi(e,1===t.length?t[0]:t)}:t})):[ll];var i=-1;return e=Ae(e,Ze(ua())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Ui(t,(function(t,n,r){return{criteria:Ae(e,(function(e){return e(t)})),index:++i,value:t}})),(function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,a=e.criteria,o=r.length,s=n.length;++i<o;){var l=Or(r[i],a[i]);if(l)return i>=s?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)}))}function Vi(t,e,n){for(var i=-1,r=e.length,a={};++i<r;){var o=e[i],s=xi(t,o);n(s,o)&&tr(a,yr(o,t),s)}return a}function Ki(t,e,n,i){var r=i?We:Ue,a=-1,o=e.length,s=t;for(t===e&&(e=Lr(e)),n&&(s=Ae(t,Ze(n)));++a<o;)for(var l=0,u=e[a],c=n?n(u):u;(l=r(s,c,l,i))>-1;)s!==t&&Zt.call(s,l,1),Zt.call(t,l,1);return t}function Ji(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==a){var a=r;_a(r)?Zt.call(t,r,1):dr(t,r)}}return t}function Gi(t,e){return t+ge(Sn()*(e-t+1))}function Zi(t,e){var n="";if(!t||e<1||e>f)return n;do{e%2&&(n+=t),(e=ge(e/2))&&(t+=t)}while(e);return n}function Yi(t,e){return Ra(Oa(t,e,ll),t+"")}function Xi(t){return Xn(Hs(t))}function Qi(t,e){var n=Hs(t);return Ea(n,li(e,0,n.length))}function tr(e,n,i,r){if(!as(e))return e;for(var a=-1,o=(n=yr(n,e)).length,s=o-1,l=e;null!=l&&++a<o;){var u=Wa(n[a]),c=i;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(a!=s){var f=l[u];(c=r?r(f,u,l):t)===t&&(c=as(f)?f:_a(n[a+1])?[]:{})}ni(l,u,c),l=l[u]}return e}var er=zn?function(t,e){return zn.set(t,e),t}:ll,nr=ce?function(t,e){return ce(t,"toString",{configurable:!0,enumerable:!1,value:al(e),writable:!0})}:ll;function ir(t){return Ea(Hs(t))}function rr(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var a=ot(r);++i<r;)a[i]=t[i+e];return a}function ar(t,e){var n;return hi(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function or(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var a=i+r>>>1,o=t[a];null!==o&&!hs(o)&&(n?o<=e:o<e)?i=a+1:r=a}return r}return sr(t,e,ll,n)}function sr(e,n,i,r){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(n=i(n))!=n,l=null===n,u=hs(n),c=n===t;a<o;){var f=ge((a+o)/2),d=i(e[f]),h=d!==t,p=null===d,v=d==d,m=hs(d);if(s)var g=r||v;else g=c?v&&(r||h):l?v&&h&&(r||!p):u?v&&h&&!p&&(r||!m):!p&&!m&&(r?d<=n:d<n);g?a=f+1:o=f}return yn(o,4294967294)}function lr(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var o=t[n],s=e?e(o):o;if(!n||!Ho(s,l)){var l=s;a[r++]=0===o?0:o}}return a}function ur(t){return"number"==typeof t?t:hs(t)?d:+t}function cr(t){if("string"==typeof t)return t;if(Go(t))return Ae(t,cr)+"";if(hs(t))return Un?Un.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function fr(t,e,n){var i=-1,r=Le,a=t.length,o=!0,s=[],l=s;if(n)o=!1,r=ze;else if(a>=200){var u=e?null:Zr(t);if(u)return cn(u);o=!1,r=Xe,l=new Gn}else l=e?[]:s;t:for(;++i<a;){var c=t[i],f=e?e(c):c;if(c=n||0!==c?c:0,o&&f==f){for(var d=l.length;d--;)if(l[d]===f)continue t;e&&l.push(f),s.push(c)}else r(l,f,n)||(l!==s&&l.push(f),s.push(c))}return s}function dr(t,e){return null==(t=Da(t,e=yr(e,t)))||delete t[Wa(to(e))]}function hr(t,e,n,i){return tr(t,e,n(xi(t,e)),i)}function pr(t,e,n,i){for(var r=t.length,a=i?r:-1;(i?a--:++a<r)&&e(t[a],a,t););return n?rr(t,i?0:a,i?a+1:r):rr(t,i?a+1:0,i?r:a)}function vr(t,e){var n=t;return n instanceof Hn&&(n=n.value()),Ie(e,(function(t,e){return e.func.apply(e.thisArg,Re([t],e.args))}),n)}function mr(t,e,n){var i=t.length;if(i<2)return i?fr(t[0]):[];for(var r=-1,a=ot(i);++r<i;)for(var o=t[r],s=-1;++s<i;)s!=r&&(a[r]=di(a[r]||o,t[s],e,n));return fr(Ci(a,1),e,n)}function gr(e,n,i){for(var r=-1,a=e.length,o=n.length,s={};++r<a;){var l=r<o?n[r]:t;i(s,e[r],l)}return s}function Cr(t){return Xo(t)?t:[]}function _r(t){return"function"==typeof t?t:ll}function yr(t,e){return Go(t)?t:ba(t,e)?[t]:Ua(Ss(t))}var br=Yi;function wr(e,n,i){var r=e.length;return i=i===t?r:i,!n&&i>=r?e:rr(e,n,i)}var Sr=fe||function(t){return de.clearTimeout(t)};function xr(t,e){if(e)return t.slice();var n=t.length,i=Vt?Vt(n):new t.constructor(n);return t.copy(i),i}function kr(t){var e=new t.constructor(t.byteLength);return new Ht(e).set(new Ht(t)),e}function jr(t,e){var n=e?kr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Or(e,n){if(e!==n){var i=e!==t,r=null===e,a=e==e,o=hs(e),s=n!==t,l=null===n,u=n==n,c=hs(n);if(!l&&!c&&!o&&e>n||o&&s&&u&&!l&&!c||r&&s&&u||!i&&u||!a)return 1;if(!r&&!o&&!c&&e<n||c&&i&&a&&!r&&!o||l&&i&&a||!s&&a||!u)return-1}return 0}function Dr(t,e,n,i){for(var r=-1,a=t.length,o=n.length,s=-1,l=e.length,u=_n(a-o,0),c=ot(l+u),f=!i;++s<l;)c[s]=e[s];for(;++r<o;)(f||r<a)&&(c[n[r]]=t[r]);for(;u--;)c[s++]=t[r++];return c}function $r(t,e,n,i){for(var r=-1,a=t.length,o=-1,s=n.length,l=-1,u=e.length,c=_n(a-s,0),f=ot(c+u),d=!i;++r<c;)f[r]=t[r];for(var h=r;++l<u;)f[h+l]=e[l];for(;++o<s;)(d||r<a)&&(f[h+n[o]]=t[r++]);return f}function Lr(t,e){var n=-1,i=t.length;for(e||(e=ot(i));++n<i;)e[n]=t[n];return e}function zr(e,n,i,r){var a=!i;i||(i={});for(var o=-1,s=n.length;++o<s;){var l=n[o],u=r?r(i[l],e[l],l,i,e):t;u===t&&(u=e[l]),a?oi(i,l,u):ni(i,l,u)}return i}function Ar(t,e){return function(n,i){var r=Go(n)?ke:ri,a=e?e():{};return r(n,t,ua(i,2),a)}}function Rr(e){return Yi((function(n,i){var r=-1,a=i.length,o=a>1?i[a-1]:t,s=a>2?i[2]:t;for(o=e.length>3&&"function"==typeof o?(a--,o):t,s&&ya(i[0],i[1],s)&&(o=a<3?t:o,a=1),n=Ot(n);++r<a;){var l=i[r];l&&e(n,l,r,o)}return n}))}function Ir(t,e){return function(n,i){if(null==n)return n;if(!Yo(n))return t(n,i);for(var r=n.length,a=e?r:-1,o=Ot(n);(e?a--:++a<r)&&!1!==i(o[a],a,o););return n}}function Fr(t){return function(e,n,i){for(var r=-1,a=Ot(e),o=i(e),s=o.length;s--;){var l=o[t?s:++r];if(!1===n(a[l],l,a))break}return e}}function Er(e){return function(n){var i=on(n=Ss(n))?dn(n):t,r=i?i[0]:n.charAt(0),a=i?wr(i,1).join(""):n.slice(1);return r[e]()+a}}function Nr(t){return function(e){return Ie(nl(Js(e).replace(Yt,"")),t,"")}}function Pr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Bn(t.prototype),i=t.apply(n,e);return as(i)?i:n}}function Tr(e){return function(n,i,r){var a=Ot(n);if(!Yo(n)){var o=ua(i,3);n=Es(n),i=function(t){return o(a[t],t,a)}}var s=e(n,i,r);return s>-1?a[o?n[s]:s]:t}}function Ur(n){return ia((function(i){var r=i.length,a=r,o=Mn.prototype.thru;for(n&&i.reverse();a--;){var s=i[a];if("function"!=typeof s)throw new Lt(e);if(o&&!l&&"wrapper"==sa(s))var l=new Mn([],!0)}for(a=l?a:r;++a<r;){var u=sa(s=i[a]),c="wrapper"==u?oa(s):t;l=c&&wa(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[sa(c[0])].apply(l,c[3]):1==s.length&&wa(s)?l[u]():l.thru(s)}return function(){var t=arguments,e=t[0];if(l&&1==t.length&&Go(e))return l.plant(e).value();for(var n=0,a=r?i[n].apply(this,t):e;++n<r;)a=i[n].call(this,a);return a}}))}function Wr(e,n,i,r,a,o,s,u,c,f){var d=n&l,h=1&n,p=2&n,v=24&n,m=512&n,g=p?t:Pr(e);return function t(){for(var l=arguments.length,C=ot(l),_=l;_--;)C[_]=arguments[_];if(v)var y=la(t),b=en(C,y);if(r&&(C=Dr(C,r,a,v)),o&&(C=$r(C,o,s,v)),l-=b,v&&l<f){var w=un(C,y);return Jr(e,n,Wr,t.placeholder,i,C,w,u,c,f-l)}var S=h?i:this,x=p?S[e]:e;return l=C.length,u?C=$a(C,u):m&&l>1&&C.reverse(),d&&c<l&&(C.length=c),this&&this!==de&&this instanceof t&&(x=g||Pr(x)),x.apply(S,C)}}function Br(t,e){return function(n,i){return function(t,e,n,i){return bi(t,(function(t,r,a){e(i,n(t),r,a)})),i}(n,t,e(i),{})}}function qr(e,n){return function(i,r){var a;if(i===t&&r===t)return n;if(i!==t&&(a=i),r!==t){if(a===t)return r;"string"==typeof i||"string"==typeof r?(i=cr(i),r=cr(r)):(i=ur(i),r=ur(r)),a=e(i,r)}return a}}function Mr(t){return ia((function(e){return e=Ae(e,Ze(ua())),Yi((function(n){var i=this;return t(e,(function(t){return xe(t,i,n)}))}))}))}function Hr(e,n){var i=(n=n===t?" ":cr(n)).length;if(i<2)return i?Zi(n,e):n;var r=Zi(n,me(e/fn(n)));return on(n)?wr(dn(r),0,e).join(""):r.slice(0,e)}function Vr(e){return function(n,i,r){return r&&"number"!=typeof r&&ya(n,i,r)&&(i=r=t),n=Cs(n),i===t?(i=n,n=0):i=Cs(i),function(t,e,n,i){for(var r=-1,a=_n(me((e-t)/(n||1)),0),o=ot(a);a--;)o[i?a:++r]=t,t+=n;return o}(n,i,r=r===t?n<i?1:-1:Cs(r),e)}}function Kr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=bs(e),n=bs(n)),t(e,n)}}function Jr(e,n,i,r,o,l,u,c,f,d){var h=8&n;n|=h?a:s,4&(n&=~(h?s:a))||(n&=-4);var p=[e,n,o,h?l:t,h?u:t,h?t:l,h?t:u,c,f,d],v=i.apply(t,p);return wa(e)&&za(v,p),v.placeholder=r,Ia(v,e,n)}function Gr(t){var e=jt[t];return function(t,n){if(t=bs(t),(n=null==n?0:yn(_s(n),292))&&mn(t)){var i=(Ss(t)+"e").split("e");return+((i=(Ss(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var Zr=Dn&&1/cn(new Dn([,-0]))[1]==c?function(t){return new Dn(t)}:hl;function Yr(t){return function(e){var n=va(e);return n==x?sn(e):n==$?function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}(e):function(t,e){return Ae(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Xr(n,o,c,f,d,h,p,v){var m=2&o;if(!m&&"function"!=typeof n)throw new Lt(e);var g=f?f.length:0;if(g||(o&=-97,f=d=t),p=p===t?p:_n(_s(p),0),v=v===t?v:_s(v),g-=d?d.length:0,o&s){var C=f,_=d;f=d=t}var y=m?t:oa(n),b=[n,o,c,f,d,C,_,h,p,v];if(y&&function(t,e){var n=t[1],r=e[1],a=n|r,o=a<131,s=r==l&&8==n||r==l&&n==u&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],a|=1&n?0:4);var c=e[3];if(c){var f=t[3];t[3]=f?Dr(f,c,e[4]):c,t[4]=f?un(t[3],i):e[4]}(c=e[5])&&(f=t[5],t[5]=f?$r(f,c,e[6]):c,t[6]=f?un(t[5],i):e[6]),(c=e[7])&&(t[7]=c),r&l&&(t[8]=null==t[8]?e[8]:yn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=a}(b,y),n=b[0],o=b[1],c=b[2],f=b[3],d=b[4],!(v=b[9]=b[9]===t?m?0:n.length:_n(b[9]-g,0))&&24&o&&(o&=-25),o&&1!=o)w=8==o||o==r?function(e,n,i){var r=Pr(e);return function a(){for(var o=arguments.length,s=ot(o),l=o,u=la(a);l--;)s[l]=arguments[l];var c=o<3&&s[0]!==u&&s[o-1]!==u?[]:un(s,u);return(o-=c.length)<i?Jr(e,n,Wr,a.placeholder,t,s,c,t,t,i-o):xe(this&&this!==de&&this instanceof a?r:e,this,s)}}(n,o,v):o!=a&&33!=o||d.length?Wr.apply(t,b):function(t,e,n,i){var r=1&e,a=Pr(t);return function e(){for(var o=-1,s=arguments.length,l=-1,u=i.length,c=ot(u+s),f=this&&this!==de&&this instanceof e?a:t;++l<u;)c[l]=i[l];for(;s--;)c[l++]=arguments[++o];return xe(f,r?n:this,c)}}(n,o,c,f);else var w=function(t,e,n){var i=1&e,r=Pr(t);return function e(){return(this&&this!==de&&this instanceof e?r:t).apply(i?n:this,arguments)}}(n,o,c);return Ia((y?er:za)(w,b),n,o)}function Qr(e,n,i,r){return e===t||Ho(e,Rt[i])&&!Et.call(r,i)?n:e}function ta(e,n,i,r,a,o){return as(e)&&as(n)&&(o.set(n,e),qi(e,n,t,ta,o),o.delete(n)),e}function ea(e){return us(e)?t:e}function na(e,n,i,r,a,o){var s=1&i,l=e.length,u=n.length;if(l!=u&&!(s&&u>l))return!1;var c=o.get(e),f=o.get(n);if(c&&f)return c==n&&f==e;var d=-1,h=!0,p=2&i?new Gn:t;for(o.set(e,n),o.set(n,e);++d<l;){var v=e[d],m=n[d];if(r)var g=s?r(m,v,d,n,e,o):r(v,m,d,e,n,o);if(g!==t){if(g)continue;h=!1;break}if(p){if(!Ee(n,(function(t,e){if(!Xe(p,e)&&(v===t||a(v,t,i,r,o)))return p.push(e)}))){h=!1;break}}else if(v!==m&&!a(v,m,i,r,o)){h=!1;break}}return o.delete(e),o.delete(n),h}function ia(e){return Ra(Oa(e,t,Ga),e+"")}function ra(t){return ki(t,Es,ha)}function aa(t){return ki(t,Ns,pa)}var oa=zn?function(t){return zn.get(t)}:hl;function sa(t){for(var e=t.name+"",n=An[e],i=Et.call(An,e)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==t)return r.name}return e}function la(t){return(Et.call(Wn,"placeholder")?Wn:t).placeholder}function ua(){var t=Wn.iteratee||ul;return t=t===ul?Ei:t,arguments.length?t(arguments[0],arguments[1]):t}function ca(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function fa(t){for(var e=Es(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,ka(r)]}return e}function da(e,n){var i=function(e,n){return null==e?t:e[n]}(e,n);return Fi(i)?i:t}var ha=Ne?function(t){return null==t?[]:(t=Ot(t),$e(Ne(t),(function(e){return Gt.call(t,e)})))}:yl,pa=Ne?function(t){for(var e=[];t;)Re(e,ha(t)),t=Kt(t);return e}:yl,va=ji;function ma(t,e,n){for(var i=-1,r=(e=yr(e,t)).length,a=!1;++i<r;){var o=Wa(e[i]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++i!=r?a:!!(r=null==t?0:t.length)&&rs(r)&&_a(o,r)&&(Go(t)||Jo(t))}function ga(t){return"function"!=typeof t.constructor||xa(t)?{}:Bn(Kt(t))}function Ca(t){return Go(t)||Jo(t)||!!(Qt&&t&&t[Qt])}function _a(t,e){var n=typeof t;return!!(e=null==e?f:e)&&("number"==n||"symbol"!=n&&_t.test(t))&&t>-1&&t%1==0&&t<e}function ya(t,e,n){if(!as(n))return!1;var i=typeof e;return!!("number"==i?Yo(n)&&_a(e,n.length):"string"==i&&e in n)&&Ho(n[e],t)}function ba(t,e){if(Go(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!hs(t))||et.test(t)||!tt.test(t)||null!=e&&t in Ot(e)}function wa(t){var e=sa(t),n=Wn[e];if("function"!=typeof n||!(e in Hn.prototype))return!1;if(t===n)return!0;var i=oa(n);return!!i&&t===i[0]}(kn&&va(new kn(new ArrayBuffer(1)))!=I||jn&&va(new jn)!=x||On&&va(On.resolve())!=O||Dn&&va(new Dn)!=$||$n&&va(new $n)!=A)&&(va=function(e){var n=ji(e),i=n==j?e.constructor:t,r=i?Ba(i):"";if(r)switch(r){case Rn:return I;case In:return x;case Fn:return O;case En:return $;case Nn:return A}return n});var Sa=It?ns:bl;function xa(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Rt)}function ka(t){return t==t&&!as(t)}function ja(e,n){return function(i){return null!=i&&i[e]===n&&(n!==t||e in Ot(i))}}function Oa(e,n,i){return n=_n(n===t?e.length-1:n,0),function(){for(var t=arguments,r=-1,a=_n(t.length-n,0),o=ot(a);++r<a;)o[r]=t[n+r];r=-1;for(var s=ot(n+1);++r<n;)s[r]=t[r];return s[n]=i(o),xe(e,this,s)}}function Da(t,e){return e.length<2?t:xi(t,rr(e,0,-1))}function $a(e,n){for(var i=e.length,r=yn(n.length,i),a=Lr(e);r--;){var o=n[r];e[r]=_a(o,i)?a[o]:t}return e}function La(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var za=Fa(er),Aa=pe||function(t,e){return de.setTimeout(t,e)},Ra=Fa(nr);function Ia(t,e,n){var i=e+"";return Ra(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(st,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return je(p,(function(n){var i="_."+n[0];e&n[1]&&!Le(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(lt);return e?e[1].split(ut):[]}(i),n)))}function Fa(e){var n=0,i=0;return function(){var r=bn(),a=16-(r-i);if(i=r,a>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(t,arguments)}}function Ea(e,n){var i=-1,r=e.length,a=r-1;for(n=n===t?r:n;++i<n;){var o=Gi(i,a),s=e[o];e[o]=e[i],e[i]=s}return e.length=n,e}var Na,Pa,Ta,Ua=(Na=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(nt,(function(t,n,i,r){e.push(i?r.replace(dt,"$1"):n||t)})),e},Pa=To(Na,(function(t){return 500===Ta.size&&Ta.clear(),t})),Ta=Pa.cache,Pa);function Wa(t){if("string"==typeof t||hs(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ba(t){if(null!=t){try{return Ft.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function qa(t){if(t instanceof Hn)return t.clone();var e=new Mn(t.__wrapped__,t.__chain__);return e.__actions__=Lr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ma=Yi((function(t,e){return Xo(t)?di(t,Ci(e,1,Xo,!0)):[]})),Ha=Yi((function(e,n){var i=to(n);return Xo(i)&&(i=t),Xo(e)?di(e,Ci(n,1,Xo,!0),ua(i,2)):[]})),Va=Yi((function(e,n){var i=to(n);return Xo(i)&&(i=t),Xo(e)?di(e,Ci(n,1,Xo,!0),t,i):[]}));function Ka(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:_s(n);return r<0&&(r=_n(i+r,0)),Te(t,ua(e,3),r)}function Ja(e,n,i){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return i!==t&&(a=_s(i),a=i<0?_n(r+a,0):yn(a,r-1)),Te(e,ua(n,3),a,!0)}function Ga(t){return null!=t&&t.length?Ci(t,1):[]}function Za(e){return e&&e.length?e[0]:t}var Ya=Yi((function(t){var e=Ae(t,Cr);return e.length&&e[0]===t[0]?Li(e):[]})),Xa=Yi((function(e){var n=to(e),i=Ae(e,Cr);return n===to(i)?n=t:i.pop(),i.length&&i[0]===e[0]?Li(i,ua(n,2)):[]})),Qa=Yi((function(e){var n=to(e),i=Ae(e,Cr);return(n="function"==typeof n?n:t)&&i.pop(),i.length&&i[0]===e[0]?Li(i,t,n):[]}));function to(e){var n=null==e?0:e.length;return n?e[n-1]:t}var eo=Yi(no);function no(t,e){return t&&t.length&&e&&e.length?Ki(t,e):t}var io=ia((function(t,e){var n=null==t?0:t.length,i=si(t,e);return Ji(t,Ae(e,(function(t){return _a(t,n)?+t:t})).sort(Or)),i}));function ro(t){return null==t?t:xn.call(t)}var ao=Yi((function(t){return fr(Ci(t,1,Xo,!0))})),oo=Yi((function(e){var n=to(e);return Xo(n)&&(n=t),fr(Ci(e,1,Xo,!0),ua(n,2))})),so=Yi((function(e){var n=to(e);return n="function"==typeof n?n:t,fr(Ci(e,1,Xo,!0),t,n)}));function lo(t){if(!t||!t.length)return[];var e=0;return t=$e(t,(function(t){if(Xo(t))return e=_n(t.length,e),!0})),Je(e,(function(e){return Ae(t,Me(e))}))}function uo(e,n){if(!e||!e.length)return[];var i=lo(e);return null==n?i:Ae(i,(function(e){return xe(n,t,e)}))}var co=Yi((function(t,e){return Xo(t)?di(t,e):[]})),fo=Yi((function(t){return mr($e(t,Xo))})),ho=Yi((function(e){var n=to(e);return Xo(n)&&(n=t),mr($e(e,Xo),ua(n,2))})),po=Yi((function(e){var n=to(e);return n="function"==typeof n?n:t,mr($e(e,Xo),t,n)})),vo=Yi(lo),mo=Yi((function(e){var n=e.length,i=n>1?e[n-1]:t;return i="function"==typeof i?(e.pop(),i):t,uo(e,i)}));function go(t){var e=Wn(t);return e.__chain__=!0,e}function Co(t,e){return e(t)}var _o=ia((function(e){var n=e.length,i=n?e[0]:0,r=this.__wrapped__,a=function(t){return si(t,e)};return!(n>1||this.__actions__.length)&&r instanceof Hn&&_a(i)?((r=r.slice(i,+i+(n?1:0))).__actions__.push({func:Co,args:[a],thisArg:t}),new Mn(r,this.__chain__).thru((function(e){return n&&!e.length&&e.push(t),e}))):this.thru(a)})),yo=Ar((function(t,e,n){Et.call(t,n)?++t[n]:oi(t,n,1)})),bo=Tr(Ka),wo=Tr(Ja);function So(t,e){return(Go(t)?je:hi)(t,ua(e,3))}function xo(t,e){return(Go(t)?Oe:pi)(t,ua(e,3))}var ko=Ar((function(t,e,n){Et.call(t,n)?t[n].push(e):oi(t,n,[e])})),jo=Yi((function(t,e,n){var i=-1,r="function"==typeof e,a=Yo(t)?ot(t.length):[];return hi(t,(function(t){a[++i]=r?xe(e,t,n):zi(t,e,n)})),a})),Oo=Ar((function(t,e,n){oi(t,n,e)}));function Do(t,e){return(Go(t)?Ae:Ui)(t,ua(e,3))}var $o=Ar((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Lo=Yi((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ya(t,e[0],e[1])?e=[]:n>2&&ya(e[0],e[1],e[2])&&(e=[e[0]]),Hi(t,Ci(e,1),[])})),zo=he||function(){return de.Date.now()};function Ao(e,n,i){return n=i?t:n,n=e&&null==n?e.length:n,Xr(e,l,t,t,t,t,n)}function Ro(n,i){var r;if("function"!=typeof i)throw new Lt(e);return n=_s(n),function(){return--n>0&&(r=i.apply(this,arguments)),n<=1&&(i=t),r}}var Io=Yi((function(t,e,n){var i=1;if(n.length){var r=un(n,la(Io));i|=a}return Xr(t,i,e,n,r)})),Fo=Yi((function(t,e,n){var i=3;if(n.length){var r=un(n,la(Fo));i|=a}return Xr(e,i,t,n,r)}));function Eo(n,i,r){var a,o,s,l,u,c,f=0,d=!1,h=!1,p=!0;if("function"!=typeof n)throw new Lt(e);function v(e){var i=a,r=o;return a=o=t,f=e,l=n.apply(r,i)}function m(t){return f=t,u=Aa(C,i),d?v(t):l}function g(e){var n=e-c;return c===t||n>=i||n<0||h&&e-f>=s}function C(){var t=zo();if(g(t))return _(t);u=Aa(C,function(t){var e=i-(t-c);return h?yn(e,s-(t-f)):e}(t))}function _(e){return u=t,p&&a?v(e):(a=o=t,l)}function y(){var e=zo(),n=g(e);if(a=arguments,o=this,c=e,n){if(u===t)return m(c);if(h)return Sr(u),u=Aa(C,i),v(c)}return u===t&&(u=Aa(C,i)),l}return i=bs(i)||0,as(r)&&(d=!!r.leading,s=(h="maxWait"in r)?_n(bs(r.maxWait)||0,i):s,p="trailing"in r?!!r.trailing:p),y.cancel=function(){u!==t&&Sr(u),f=0,a=c=o=u=t},y.flush=function(){return u===t?l:_(zo())},y}var No=Yi((function(t,e){return fi(t,1,e)})),Po=Yi((function(t,e,n){return fi(t,bs(e)||0,n)}));function To(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new Lt(e);var i=function(){var e=arguments,r=n?n.apply(this,e):e[0],a=i.cache;if(a.has(r))return a.get(r);var o=t.apply(this,e);return i.cache=a.set(r,o)||a,o};return i.cache=new(To.Cache||Jn),i}function Uo(t){if("function"!=typeof t)throw new Lt(e);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}To.Cache=Jn;var Wo=br((function(t,e){var n=(e=1==e.length&&Go(e[0])?Ae(e[0],Ze(ua())):Ae(Ci(e,1),Ze(ua()))).length;return Yi((function(i){for(var r=-1,a=yn(i.length,n);++r<a;)i[r]=e[r].call(this,i[r]);return xe(t,this,i)}))})),Bo=Yi((function(e,n){var i=un(n,la(Bo));return Xr(e,a,t,n,i)})),qo=Yi((function(e,n){var i=un(n,la(qo));return Xr(e,s,t,n,i)})),Mo=ia((function(e,n){return Xr(e,u,t,t,t,n)}));function Ho(t,e){return t===e||t!=t&&e!=e}var Vo=Kr(Oi),Ko=Kr((function(t,e){return t>=e})),Jo=Ai(function(){return arguments}())?Ai:function(t){return os(t)&&Et.call(t,"callee")&&!Gt.call(t,"callee")},Go=ot.isArray,Zo=Ce?Ze(Ce):function(t){return os(t)&&ji(t)==R};function Yo(t){return null!=t&&rs(t.length)&&!ns(t)}function Xo(t){return os(t)&&Yo(t)}var Qo=He||bl,ts=_e?Ze(_e):function(t){return os(t)&&ji(t)==C};function es(t){if(!os(t))return!1;var e=ji(t);return e==_||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!us(t)}function ns(t){if(!as(t))return!1;var e=ji(t);return e==y||e==S||"[object AsyncFunction]"==e||"[object Proxy]"==e}function is(t){return"number"==typeof t&&t==_s(t)}function rs(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=f}function as(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function os(t){return null!=t&&"object"==typeof t}var ss=ye?Ze(ye):function(t){return os(t)&&va(t)==x};function ls(t){return"number"==typeof t||os(t)&&ji(t)==k}function us(t){if(!os(t)||ji(t)!=j)return!1;var e=Kt(t);if(null===e)return!0;var n=Et.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ft.call(n)==Ut}var cs=be?Ze(be):function(t){return os(t)&&ji(t)==D},fs=we?Ze(we):function(t){return os(t)&&va(t)==$};function ds(t){return"string"==typeof t||!Go(t)&&os(t)&&ji(t)==L}function hs(t){return"symbol"==typeof t||os(t)&&ji(t)==z}var ps=Se?Ze(Se):function(t){return os(t)&&rs(t.length)&&!!ae[ji(t)]},vs=Kr(Ti),ms=Kr((function(t,e){return t<=e}));function gs(t){if(!t)return[];if(Yo(t))return ds(t)?dn(t):Lr(t);if(ee&&t[ee])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ee]());var e=va(t);return(e==x?sn:e==$?cn:Hs)(t)}function Cs(t){return t?(t=bs(t))===c||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function _s(t){var e=Cs(t),n=e%1;return e==e?n?e-n:e:0}function ys(t){return t?li(_s(t),0,h):0}function bs(t){if("number"==typeof t)return t;if(hs(t))return d;if(as(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=as(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ge(t);var n=mt.test(t);return n||Ct.test(t)?ue(t.slice(2),n?2:8):vt.test(t)?d:+t}function ws(t){return zr(t,Ns(t))}function Ss(t){return null==t?"":cr(t)}var xs=Rr((function(t,e){if(xa(e)||Yo(e))zr(e,Es(e),t);else for(var n in e)Et.call(e,n)&&ni(t,n,e[n])})),ks=Rr((function(t,e){zr(e,Ns(e),t)})),js=Rr((function(t,e,n,i){zr(e,Ns(e),t,i)})),Os=Rr((function(t,e,n,i){zr(e,Es(e),t,i)})),Ds=ia(si),$s=Yi((function(e,n){e=Ot(e);var i=-1,r=n.length,a=r>2?n[2]:t;for(a&&ya(n[0],n[1],a)&&(r=1);++i<r;)for(var o=n[i],s=Ns(o),l=-1,u=s.length;++l<u;){var c=s[l],f=e[c];(f===t||Ho(f,Rt[c])&&!Et.call(e,c))&&(e[c]=o[c])}return e})),Ls=Yi((function(e){return e.push(t,ta),xe(Ts,t,e)}));function zs(e,n,i){var r=null==e?t:xi(e,n);return r===t?i:r}function As(t,e){return null!=t&&ma(t,e,$i)}var Rs=Br((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Tt.call(e)),t[e]=n}),al(ll)),Is=Br((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Tt.call(e)),Et.call(t,e)?t[e].push(n):t[e]=[n]}),ua),Fs=Yi(zi);function Es(t){return Yo(t)?Yn(t):Ni(t)}function Ns(t){return Yo(t)?Yn(t,!0):Pi(t)}var Ps=Rr((function(t,e,n){qi(t,e,n)})),Ts=Rr((function(t,e,n,i){qi(t,e,n,i)})),Us=ia((function(t,e){var n={};if(null==t)return n;var i=!1;e=Ae(e,(function(e){return e=yr(e,t),i||(i=e.length>1),e})),zr(t,aa(t),n),i&&(n=ui(n,7,ea));for(var r=e.length;r--;)dr(n,e[r]);return n})),Ws=ia((function(t,e){return null==t?{}:function(t,e){return Vi(t,e,(function(e,n){return As(t,n)}))}(t,e)}));function Bs(t,e){if(null==t)return{};var n=Ae(aa(t),(function(t){return[t]}));return e=ua(e),Vi(t,n,(function(t,n){return e(t,n[0])}))}var qs=Yr(Es),Ms=Yr(Ns);function Hs(t){return null==t?[]:Ye(t,Es(t))}var Vs=Nr((function(t,e,n){return e=e.toLowerCase(),t+(n?Ks(e):e)}));function Ks(t){return el(Ss(t).toLowerCase())}function Js(t){return(t=Ss(t))&&t.replace(yt,nn).replace(Xt,"")}var Gs=Nr((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Zs=Nr((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ys=Er("toLowerCase"),Xs=Nr((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Qs=Nr((function(t,e,n){return t+(n?" ":"")+el(e)})),tl=Nr((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),el=Er("toUpperCase");function nl(e,n,i){return e=Ss(e),(n=i?t:n)===t?function(t){return ne.test(t)}(e)?function(t){return t.match(te)||[]}(e):function(t){return t.match(ct)||[]}(e):e.match(n)||[]}var il=Yi((function(e,n){try{return xe(e,t,n)}catch(i){return es(i)?i:new xt(i)}})),rl=ia((function(t,e){return je(e,(function(e){e=Wa(e),oi(t,e,Io(t[e],t))})),t}));function al(t){return function(){return t}}var ol=Ur(),sl=Ur(!0);function ll(t){return t}function ul(t){return Ei("function"==typeof t?t:ui(t,1))}var cl=Yi((function(t,e){return function(n){return zi(n,t,e)}})),fl=Yi((function(t,e){return function(n){return zi(t,n,e)}}));function dl(t,e,n){var i=Es(e),r=Si(e,i);null!=n||as(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=Si(e,Es(e)));var a=!(as(n)&&"chain"in n&&!n.chain),o=ns(t);return je(r,(function(n){var i=e[n];t[n]=i,o&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__),r=n.__actions__=Lr(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,Re([this.value()],arguments))})})),t}function hl(){}var pl=Mr(Ae),vl=Mr(De),ml=Mr(Ee);function gl(t){return ba(t)?Me(Wa(t)):function(t){return function(e){return xi(e,t)}}(t)}var Cl=Vr(),_l=Vr(!0);function yl(){return[]}function bl(){return!1}var wl,Sl=qr((function(t,e){return t+e}),0),xl=Gr("ceil"),kl=qr((function(t,e){return t/e}),1),jl=Gr("floor"),Ol=qr((function(t,e){return t*e}),1),Dl=Gr("round"),$l=qr((function(t,e){return t-e}),0);return Wn.after=function(t,n){if("function"!=typeof n)throw new Lt(e);return t=_s(t),function(){if(--t<1)return n.apply(this,arguments)}},Wn.ary=Ao,Wn.assign=xs,Wn.assignIn=ks,Wn.assignInWith=js,Wn.assignWith=Os,Wn.at=Ds,Wn.before=Ro,Wn.bind=Io,Wn.bindAll=rl,Wn.bindKey=Fo,Wn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Go(t)?t:[t]},Wn.chain=go,Wn.chunk=function(e,n,i){n=(i?ya(e,n,i):n===t)?1:_n(_s(n),0);var r=null==e?0:e.length;if(!r||n<1)return[];for(var a=0,o=0,s=ot(me(r/n));a<r;)s[o++]=rr(e,a,a+=n);return s},Wn.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var a=t[e];a&&(r[i++]=a)}return r},Wn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=ot(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Re(Go(n)?Lr(n):[n],Ci(e,1))},Wn.cond=function(t){var n=null==t?0:t.length,i=ua();return t=n?Ae(t,(function(t){if("function"!=typeof t[1])throw new Lt(e);return[i(t[0]),t[1]]})):[],Yi((function(e){for(var i=-1;++i<n;){var r=t[i];if(xe(r[0],this,e))return xe(r[1],this,e)}}))},Wn.conforms=function(t){return function(t){var e=Es(t);return function(n){return ci(n,t,e)}}(ui(t,1))},Wn.constant=al,Wn.countBy=yo,Wn.create=function(t,e){var n=Bn(t);return null==e?n:ai(n,e)},Wn.curry=function e(n,i,r){var a=Xr(n,8,t,t,t,t,t,i=r?t:i);return a.placeholder=e.placeholder,a},Wn.curryRight=function e(n,i,a){var o=Xr(n,r,t,t,t,t,t,i=a?t:i);return o.placeholder=e.placeholder,o},Wn.debounce=Eo,Wn.defaults=$s,Wn.defaultsDeep=Ls,Wn.defer=No,Wn.delay=Po,Wn.difference=Ma,Wn.differenceBy=Ha,Wn.differenceWith=Va,Wn.drop=function(e,n,i){var r=null==e?0:e.length;return r?rr(e,(n=i||n===t?1:_s(n))<0?0:n,r):[]},Wn.dropRight=function(e,n,i){var r=null==e?0:e.length;return r?rr(e,0,(n=r-(n=i||n===t?1:_s(n)))<0?0:n):[]},Wn.dropRightWhile=function(t,e){return t&&t.length?pr(t,ua(e,3),!0,!0):[]},Wn.dropWhile=function(t,e){return t&&t.length?pr(t,ua(e,3),!0):[]},Wn.fill=function(e,n,i,r){var a=null==e?0:e.length;return a?(i&&"number"!=typeof i&&ya(e,n,i)&&(i=0,r=a),function(e,n,i,r){var a=e.length;for((i=_s(i))<0&&(i=-i>a?0:a+i),(r=r===t||r>a?a:_s(r))<0&&(r+=a),r=i>r?0:ys(r);i<r;)e[i++]=n;return e}(e,n,i,r)):[]},Wn.filter=function(t,e){return(Go(t)?$e:gi)(t,ua(e,3))},Wn.flatMap=function(t,e){return Ci(Do(t,e),1)},Wn.flatMapDeep=function(t,e){return Ci(Do(t,e),c)},Wn.flatMapDepth=function(e,n,i){return i=i===t?1:_s(i),Ci(Do(e,n),i)},Wn.flatten=Ga,Wn.flattenDeep=function(t){return null!=t&&t.length?Ci(t,c):[]},Wn.flattenDepth=function(e,n){return null!=e&&e.length?Ci(e,n=n===t?1:_s(n)):[]},Wn.flip=function(t){return Xr(t,512)},Wn.flow=ol,Wn.flowRight=sl,Wn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},Wn.functions=function(t){return null==t?[]:Si(t,Es(t))},Wn.functionsIn=function(t){return null==t?[]:Si(t,Ns(t))},Wn.groupBy=ko,Wn.initial=function(t){return null!=t&&t.length?rr(t,0,-1):[]},Wn.intersection=Ya,Wn.intersectionBy=Xa,Wn.intersectionWith=Qa,Wn.invert=Rs,Wn.invertBy=Is,Wn.invokeMap=jo,Wn.iteratee=ul,Wn.keyBy=Oo,Wn.keys=Es,Wn.keysIn=Ns,Wn.map=Do,Wn.mapKeys=function(t,e){var n={};return e=ua(e,3),bi(t,(function(t,i,r){oi(n,e(t,i,r),t)})),n},Wn.mapValues=function(t,e){var n={};return e=ua(e,3),bi(t,(function(t,i,r){oi(n,i,e(t,i,r))})),n},Wn.matches=function(t){return Wi(ui(t,1))},Wn.matchesProperty=function(t,e){return Bi(t,ui(e,1))},Wn.memoize=To,Wn.merge=Ps,Wn.mergeWith=Ts,Wn.method=cl,Wn.methodOf=fl,Wn.mixin=dl,Wn.negate=Uo,Wn.nthArg=function(t){return t=_s(t),Yi((function(e){return Mi(e,t)}))},Wn.omit=Us,Wn.omitBy=function(t,e){return Bs(t,Uo(ua(e)))},Wn.once=function(t){return Ro(2,t)},Wn.orderBy=function(e,n,i,r){return null==e?[]:(Go(n)||(n=null==n?[]:[n]),Go(i=r?t:i)||(i=null==i?[]:[i]),Hi(e,n,i))},Wn.over=pl,Wn.overArgs=Wo,Wn.overEvery=vl,Wn.overSome=ml,Wn.partial=Bo,Wn.partialRight=qo,Wn.partition=$o,Wn.pick=Ws,Wn.pickBy=Bs,Wn.property=gl,Wn.propertyOf=function(e){return function(n){return null==e?t:xi(e,n)}},Wn.pull=eo,Wn.pullAll=no,Wn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Ki(t,e,ua(n,2)):t},Wn.pullAllWith=function(e,n,i){return e&&e.length&&n&&n.length?Ki(e,n,t,i):e},Wn.pullAt=io,Wn.range=Cl,Wn.rangeRight=_l,Wn.rearg=Mo,Wn.reject=function(t,e){return(Go(t)?$e:gi)(t,Uo(ua(e,3)))},Wn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],a=t.length;for(e=ua(e,3);++i<a;){var o=t[i];e(o,i,t)&&(n.push(o),r.push(i))}return Ji(t,r),n},Wn.rest=function(n,i){if("function"!=typeof n)throw new Lt(e);return Yi(n,i=i===t?i:_s(i))},Wn.reverse=ro,Wn.sampleSize=function(e,n,i){return n=(i?ya(e,n,i):n===t)?1:_s(n),(Go(e)?Qn:Qi)(e,n)},Wn.set=function(t,e,n){return null==t?t:tr(t,e,n)},Wn.setWith=function(e,n,i,r){return r="function"==typeof r?r:t,null==e?e:tr(e,n,i,r)},Wn.shuffle=function(t){return(Go(t)?ti:ir)(t)},Wn.slice=function(e,n,i){var r=null==e?0:e.length;return r?(i&&"number"!=typeof i&&ya(e,n,i)?(n=0,i=r):(n=null==n?0:_s(n),i=i===t?r:_s(i)),rr(e,n,i)):[]},Wn.sortBy=Lo,Wn.sortedUniq=function(t){return t&&t.length?lr(t):[]},Wn.sortedUniqBy=function(t,e){return t&&t.length?lr(t,ua(e,2)):[]},Wn.split=function(e,n,i){return i&&"number"!=typeof i&&ya(e,n,i)&&(n=i=t),(i=i===t?h:i>>>0)?(e=Ss(e))&&("string"==typeof n||null!=n&&!cs(n))&&!(n=cr(n))&&on(e)?wr(dn(e),0,i):e.split(n,i):[]},Wn.spread=function(t,n){if("function"!=typeof t)throw new Lt(e);return n=null==n?0:_n(_s(n),0),Yi((function(e){var i=e[n],r=wr(e,0,n);return i&&Re(r,i),xe(t,this,r)}))},Wn.tail=function(t){var e=null==t?0:t.length;return e?rr(t,1,e):[]},Wn.take=function(e,n,i){return e&&e.length?rr(e,0,(n=i||n===t?1:_s(n))<0?0:n):[]},Wn.takeRight=function(e,n,i){var r=null==e?0:e.length;return r?rr(e,(n=r-(n=i||n===t?1:_s(n)))<0?0:n,r):[]},Wn.takeRightWhile=function(t,e){return t&&t.length?pr(t,ua(e,3),!1,!0):[]},Wn.takeWhile=function(t,e){return t&&t.length?pr(t,ua(e,3)):[]},Wn.tap=function(t,e){return e(t),t},Wn.throttle=function(t,n,i){var r=!0,a=!0;if("function"!=typeof t)throw new Lt(e);return as(i)&&(r="leading"in i?!!i.leading:r,a="trailing"in i?!!i.trailing:a),Eo(t,n,{leading:r,maxWait:n,trailing:a})},Wn.thru=Co,Wn.toArray=gs,Wn.toPairs=qs,Wn.toPairsIn=Ms,Wn.toPath=function(t){return Go(t)?Ae(t,Wa):hs(t)?[t]:Lr(Ua(Ss(t)))},Wn.toPlainObject=ws,Wn.transform=function(t,e,n){var i=Go(t),r=i||Qo(t)||ps(t);if(e=ua(e,4),null==n){var a=t&&t.constructor;n=r?i?new a:[]:as(t)&&ns(a)?Bn(Kt(t)):{}}return(r?je:bi)(t,(function(t,i,r){return e(n,t,i,r)})),n},Wn.unary=function(t){return Ao(t,1)},Wn.union=ao,Wn.unionBy=oo,Wn.unionWith=so,Wn.uniq=function(t){return t&&t.length?fr(t):[]},Wn.uniqBy=function(t,e){return t&&t.length?fr(t,ua(e,2)):[]},Wn.uniqWith=function(e,n){return n="function"==typeof n?n:t,e&&e.length?fr(e,t,n):[]},Wn.unset=function(t,e){return null==t||dr(t,e)},Wn.unzip=lo,Wn.unzipWith=uo,Wn.update=function(t,e,n){return null==t?t:hr(t,e,_r(n))},Wn.updateWith=function(e,n,i,r){return r="function"==typeof r?r:t,null==e?e:hr(e,n,_r(i),r)},Wn.values=Hs,Wn.valuesIn=function(t){return null==t?[]:Ye(t,Ns(t))},Wn.without=co,Wn.words=nl,Wn.wrap=function(t,e){return Bo(_r(e),t)},Wn.xor=fo,Wn.xorBy=ho,Wn.xorWith=po,Wn.zip=vo,Wn.zipObject=function(t,e){return gr(t||[],e||[],ni)},Wn.zipObjectDeep=function(t,e){return gr(t||[],e||[],tr)},Wn.zipWith=mo,Wn.entries=qs,Wn.entriesIn=Ms,Wn.extend=ks,Wn.extendWith=js,dl(Wn,Wn),Wn.add=Sl,Wn.attempt=il,Wn.camelCase=Vs,Wn.capitalize=Ks,Wn.ceil=xl,Wn.clamp=function(e,n,i){return i===t&&(i=n,n=t),i!==t&&(i=(i=bs(i))==i?i:0),n!==t&&(n=(n=bs(n))==n?n:0),li(bs(e),n,i)},Wn.clone=function(t){return ui(t,4)},Wn.cloneDeep=function(t){return ui(t,5)},Wn.cloneDeepWith=function(e,n){return ui(e,5,n="function"==typeof n?n:t)},Wn.cloneWith=function(e,n){return ui(e,4,n="function"==typeof n?n:t)},Wn.conformsTo=function(t,e){return null==e||ci(t,e,Es(e))},Wn.deburr=Js,Wn.defaultTo=function(t,e){return null==t||t!=t?e:t},Wn.divide=kl,Wn.endsWith=function(e,n,i){e=Ss(e),n=cr(n);var r=e.length,a=i=i===t?r:li(_s(i),0,r);return(i-=n.length)>=0&&e.slice(i,a)==n},Wn.eq=Ho,Wn.escape=function(t){return(t=Ss(t))&&Z.test(t)?t.replace(J,rn):t},Wn.escapeRegExp=function(t){return(t=Ss(t))&&rt.test(t)?t.replace(it,"\\$&"):t},Wn.every=function(e,n,i){var r=Go(e)?De:vi;return i&&ya(e,n,i)&&(n=t),r(e,ua(n,3))},Wn.find=bo,Wn.findIndex=Ka,Wn.findKey=function(t,e){return Pe(t,ua(e,3),bi)},Wn.findLast=wo,Wn.findLastIndex=Ja,Wn.findLastKey=function(t,e){return Pe(t,ua(e,3),wi)},Wn.floor=jl,Wn.forEach=So,Wn.forEachRight=xo,Wn.forIn=function(t,e){return null==t?t:_i(t,ua(e,3),Ns)},Wn.forInRight=function(t,e){return null==t?t:yi(t,ua(e,3),Ns)},Wn.forOwn=function(t,e){return t&&bi(t,ua(e,3))},Wn.forOwnRight=function(t,e){return t&&wi(t,ua(e,3))},Wn.get=zs,Wn.gt=Vo,Wn.gte=Ko,Wn.has=function(t,e){return null!=t&&ma(t,e,Di)},Wn.hasIn=As,Wn.head=Za,Wn.identity=ll,Wn.includes=function(t,e,n,i){t=Yo(t)?t:Hs(t),n=n&&!i?_s(n):0;var r=t.length;return n<0&&(n=_n(r+n,0)),ds(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&Ue(t,e,n)>-1},Wn.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:_s(n);return r<0&&(r=_n(i+r,0)),Ue(t,e,r)},Wn.inRange=function(e,n,i){return n=Cs(n),i===t?(i=n,n=0):i=Cs(i),function(t,e,n){return t>=yn(e,n)&&t<_n(e,n)}(e=bs(e),n,i)},Wn.invoke=Fs,Wn.isArguments=Jo,Wn.isArray=Go,Wn.isArrayBuffer=Zo,Wn.isArrayLike=Yo,Wn.isArrayLikeObject=Xo,Wn.isBoolean=function(t){return!0===t||!1===t||os(t)&&ji(t)==g},Wn.isBuffer=Qo,Wn.isDate=ts,Wn.isElement=function(t){return os(t)&&1===t.nodeType&&!us(t)},Wn.isEmpty=function(t){if(null==t)return!0;if(Yo(t)&&(Go(t)||"string"==typeof t||"function"==typeof t.splice||Qo(t)||ps(t)||Jo(t)))return!t.length;var e=va(t);if(e==x||e==$)return!t.size;if(xa(t))return!Ni(t).length;for(var n in t)if(Et.call(t,n))return!1;return!0},Wn.isEqual=function(t,e){return Ri(t,e)},Wn.isEqualWith=function(e,n,i){var r=(i="function"==typeof i?i:t)?i(e,n):t;return r===t?Ri(e,n,t,i):!!r},Wn.isError=es,Wn.isFinite=function(t){return"number"==typeof t&&mn(t)},Wn.isFunction=ns,Wn.isInteger=is,Wn.isLength=rs,Wn.isMap=ss,Wn.isMatch=function(t,e){return t===e||Ii(t,e,fa(e))},Wn.isMatchWith=function(e,n,i){return i="function"==typeof i?i:t,Ii(e,n,fa(n),i)},Wn.isNaN=function(t){return ls(t)&&t!=+t},Wn.isNative=function(t){if(Sa(t))throw new xt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Fi(t)},Wn.isNil=function(t){return null==t},Wn.isNull=function(t){return null===t},Wn.isNumber=ls,Wn.isObject=as,Wn.isObjectLike=os,Wn.isPlainObject=us,Wn.isRegExp=cs,Wn.isSafeInteger=function(t){return is(t)&&t>=-9007199254740991&&t<=f},Wn.isSet=fs,Wn.isString=ds,Wn.isSymbol=hs,Wn.isTypedArray=ps,Wn.isUndefined=function(e){return e===t},Wn.isWeakMap=function(t){return os(t)&&va(t)==A},Wn.isWeakSet=function(t){return os(t)&&"[object WeakSet]"==ji(t)},Wn.join=function(t,e){return null==t?"":gn.call(t,e)},Wn.kebabCase=Gs,Wn.last=to,Wn.lastIndexOf=function(e,n,i){var r=null==e?0:e.length;if(!r)return-1;var a=r;return i!==t&&(a=(a=_s(i))<0?_n(r+a,0):yn(a,r-1)),n==n?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(e,n,a):Te(e,Be,a,!0)},Wn.lowerCase=Zs,Wn.lowerFirst=Ys,Wn.lt=vs,Wn.lte=ms,Wn.max=function(e){return e&&e.length?mi(e,ll,Oi):t},Wn.maxBy=function(e,n){return e&&e.length?mi(e,ua(n,2),Oi):t},Wn.mean=function(t){return qe(t,ll)},Wn.meanBy=function(t,e){return qe(t,ua(e,2))},Wn.min=function(e){return e&&e.length?mi(e,ll,Ti):t},Wn.minBy=function(e,n){return e&&e.length?mi(e,ua(n,2),Ti):t},Wn.stubArray=yl,Wn.stubFalse=bl,Wn.stubObject=function(){return{}},Wn.stubString=function(){return""},Wn.stubTrue=function(){return!0},Wn.multiply=Ol,Wn.nth=function(e,n){return e&&e.length?Mi(e,_s(n)):t},Wn.noConflict=function(){return de._===this&&(de._=Wt),this},Wn.noop=hl,Wn.now=zo,Wn.pad=function(t,e,n){t=Ss(t);var i=(e=_s(e))?fn(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return Hr(ge(r),n)+t+Hr(me(r),n)},Wn.padEnd=function(t,e,n){t=Ss(t);var i=(e=_s(e))?fn(t):0;return e&&i<e?t+Hr(e-i,n):t},Wn.padStart=function(t,e,n){t=Ss(t);var i=(e=_s(e))?fn(t):0;return e&&i<e?Hr(e-i,n)+t:t},Wn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),wn(Ss(t).replace(at,""),e||0)},Wn.random=function(e,n,i){if(i&&"boolean"!=typeof i&&ya(e,n,i)&&(n=i=t),i===t&&("boolean"==typeof n?(i=n,n=t):"boolean"==typeof e&&(i=e,e=t)),e===t&&n===t?(e=0,n=1):(e=Cs(e),n===t?(n=e,e=0):n=Cs(n)),e>n){var r=e;e=n,n=r}if(i||e%1||n%1){var a=Sn();return yn(e+a*(n-e+le("1e-"+((a+"").length-1))),n)}return Gi(e,n)},Wn.reduce=function(t,e,n){var i=Go(t)?Ie:Ve,r=arguments.length<3;return i(t,ua(e,4),n,r,hi)},Wn.reduceRight=function(t,e,n){var i=Go(t)?Fe:Ve,r=arguments.length<3;return i(t,ua(e,4),n,r,pi)},Wn.repeat=function(e,n,i){return n=(i?ya(e,n,i):n===t)?1:_s(n),Zi(Ss(e),n)},Wn.replace=function(){var t=arguments,e=Ss(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Wn.result=function(e,n,i){var r=-1,a=(n=yr(n,e)).length;for(a||(a=1,e=t);++r<a;){var o=null==e?t:e[Wa(n[r])];o===t&&(r=a,o=i),e=ns(o)?o.call(e):o}return e},Wn.round=Dl,Wn.runInContext=o,Wn.sample=function(t){return(Go(t)?Xn:Xi)(t)},Wn.size=function(t){if(null==t)return 0;if(Yo(t))return ds(t)?fn(t):t.length;var e=va(t);return e==x||e==$?t.size:Ni(t).length},Wn.snakeCase=Xs,Wn.some=function(e,n,i){var r=Go(e)?Ee:ar;return i&&ya(e,n,i)&&(n=t),r(e,ua(n,3))},Wn.sortedIndex=function(t,e){return or(t,e)},Wn.sortedIndexBy=function(t,e,n){return sr(t,e,ua(n,2))},Wn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=or(t,e);if(i<n&&Ho(t[i],e))return i}return-1},Wn.sortedLastIndex=function(t,e){return or(t,e,!0)},Wn.sortedLastIndexBy=function(t,e,n){return sr(t,e,ua(n,2),!0)},Wn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=or(t,e,!0)-1;if(Ho(t[n],e))return n}return-1},Wn.startCase=Qs,Wn.startsWith=function(t,e,n){return t=Ss(t),n=null==n?0:li(_s(n),0,t.length),e=cr(e),t.slice(n,n+e.length)==e},Wn.subtract=$l,Wn.sum=function(t){return t&&t.length?Ke(t,ll):0},Wn.sumBy=function(t,e){return t&&t.length?Ke(t,ua(e,2)):0},Wn.template=function(e,n,i){var r=Wn.templateSettings;i&&ya(e,n,i)&&(n=t),e=Ss(e),n=js({},n,r,Qr);var a,o,s=js({},n.imports,r.imports,Qr),l=Es(s),u=Ye(s,l),c=0,f=n.interpolate||bt,d="__p += '",h=Dt((n.escape||bt).source+"|"+f.source+"|"+(f===Q?ht:bt).source+"|"+(n.evaluate||bt).source+"|$","g"),p="//# sourceURL="+(Et.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++re+"]")+"\n";e.replace(h,(function(t,n,i,r,s,l){return i||(i=r),d+=e.slice(c,l).replace(wt,an),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),d+="';\n";var v=Et.call(n,"variable")&&n.variable;if(v){if(ft.test(v))throw new xt("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(M,""):d).replace(H,"$1").replace(V,"$1;"),d="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=il((function(){return kt(l,p+"return "+d).apply(t,u)}));if(m.source=d,es(m))throw m;return m},Wn.times=function(t,e){if((t=_s(t))<1||t>f)return[];var n=h,i=yn(t,h);e=ua(e),t-=h;for(var r=Je(i,e);++n<t;)e(n);return r},Wn.toFinite=Cs,Wn.toInteger=_s,Wn.toLength=ys,Wn.toLower=function(t){return Ss(t).toLowerCase()},Wn.toNumber=bs,Wn.toSafeInteger=function(t){return t?li(_s(t),-9007199254740991,f):0===t?t:0},Wn.toString=Ss,Wn.toUpper=function(t){return Ss(t).toUpperCase()},Wn.trim=function(e,n,i){if((e=Ss(e))&&(i||n===t))return Ge(e);if(!e||!(n=cr(n)))return e;var r=dn(e),a=dn(n);return wr(r,Qe(r,a),tn(r,a)+1).join("")},Wn.trimEnd=function(e,n,i){if((e=Ss(e))&&(i||n===t))return e.slice(0,hn(e)+1);if(!e||!(n=cr(n)))return e;var r=dn(e);return wr(r,0,tn(r,dn(n))+1).join("")},Wn.trimStart=function(e,n,i){if((e=Ss(e))&&(i||n===t))return e.replace(at,"");if(!e||!(n=cr(n)))return e;var r=dn(e);return wr(r,Qe(r,dn(n))).join("")},Wn.truncate=function(e,n){var i=30,r="...";if(as(n)){var a="separator"in n?n.separator:a;i="length"in n?_s(n.length):i,r="omission"in n?cr(n.omission):r}var o=(e=Ss(e)).length;if(on(e)){var s=dn(e);o=s.length}if(i>=o)return e;var l=i-fn(r);if(l<1)return r;var u=s?wr(s,0,l).join(""):e.slice(0,l);if(a===t)return u+r;if(s&&(l+=u.length-l),cs(a)){if(e.slice(l).search(a)){var c,f=u;for(a.global||(a=Dt(a.source,Ss(pt.exec(a))+"g")),a.lastIndex=0;c=a.exec(f);)var d=c.index;u=u.slice(0,d===t?l:d)}}else if(e.indexOf(cr(a),l)!=l){var h=u.lastIndexOf(a);h>-1&&(u=u.slice(0,h))}return u+r},Wn.unescape=function(t){return(t=Ss(t))&&G.test(t)?t.replace(K,pn):t},Wn.uniqueId=function(t){var e=++Nt;return Ss(t)+e},Wn.upperCase=tl,Wn.upperFirst=el,Wn.each=So,Wn.eachRight=xo,Wn.first=Za,dl(Wn,(wl={},bi(Wn,(function(t,e){Et.call(Wn.prototype,e)||(wl[e]=t)})),wl),{chain:!1}),Wn.VERSION="4.17.21",je(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Wn[t].placeholder=Wn})),je(["drop","take"],(function(e,n){Hn.prototype[e]=function(i){i=i===t?1:_n(_s(i),0);var r=this.__filtered__&&!n?new Hn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(i,r.__takeCount__):r.__views__.push({size:yn(i,h),type:e+(r.__dir__<0?"Right":"")}),r},Hn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),je(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;Hn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ua(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),je(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Hn.prototype[t]=function(){return this[n](1).value()[0]}})),je(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Hn.prototype[t]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(ll)},Hn.prototype.find=function(t){return this.filter(t).head()},Hn.prototype.findLast=function(t){return this.reverse().find(t)},Hn.prototype.invokeMap=Yi((function(t,e){return"function"==typeof t?new Hn(this):this.map((function(n){return zi(n,t,e)}))})),Hn.prototype.reject=function(t){return this.filter(Uo(ua(t)))},Hn.prototype.slice=function(e,n){e=_s(e);var i=this;return i.__filtered__&&(e>0||n<0)?new Hn(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),n!==t&&(i=(n=_s(n))<0?i.dropRight(-n):i.take(n-e)),i)},Hn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Hn.prototype.toArray=function(){return this.take(h)},bi(Hn.prototype,(function(e,n){var i=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),a=Wn[r?"take"+("last"==n?"Right":""):n],o=r||/^find/.test(n);a&&(Wn.prototype[n]=function(){var n=this.__wrapped__,s=r?[1]:arguments,l=n instanceof Hn,u=s[0],c=l||Go(n),f=function(t){var e=a.apply(Wn,Re([t],s));return r&&d?e[0]:e};c&&i&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,h=!!this.__actions__.length,p=o&&!d,v=l&&!h;if(!o&&c){n=v?n:new Hn(this);var m=e.apply(n,s);return m.__actions__.push({func:Co,args:[f],thisArg:t}),new Mn(m,d)}return p&&v?e.apply(this,s):(m=this.thru(f),p?r?m.value()[0]:m.value():m)})})),je(["pop","push","shift","sort","splice","unshift"],(function(t){var e=zt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Wn.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(Go(r)?r:[],t)}return this[n]((function(n){return e.apply(Go(n)?n:[],t)}))}})),bi(Hn.prototype,(function(t,e){var n=Wn[e];if(n){var i=n.name+"";Et.call(An,i)||(An[i]=[]),An[i].push({name:e,func:n})}})),An[Wr(t,2).name]=[{name:"wrapper",func:t}],Hn.prototype.clone=function(){var t=new Hn(this.__wrapped__);return t.__actions__=Lr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Lr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Lr(this.__views__),t},Hn.prototype.reverse=function(){if(this.__filtered__){var t=new Hn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Hn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Go(t),i=e<0,r=n?t.length:0,a=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=yn(e,t+o);break;case"takeRight":t=_n(t,e-o)}}return{start:t,end:e}}(0,r,this.__views__),o=a.start,s=a.end,l=s-o,u=i?s:o-1,c=this.__iteratees__,f=c.length,d=0,h=yn(l,this.__takeCount__);if(!n||!i&&r==l&&h==l)return vr(t,this.__actions__);var p=[];t:for(;l--&&d<h;){for(var v=-1,m=t[u+=e];++v<f;){var g=c[v],C=g.iteratee,_=g.type,y=C(m);if(2==_)m=y;else if(!y){if(1==_)continue t;break t}}p[d++]=m}return p},Wn.prototype.at=_o,Wn.prototype.chain=function(){return go(this)},Wn.prototype.commit=function(){return new Mn(this.value(),this.__chain__)},Wn.prototype.next=function(){this.__values__===t&&(this.__values__=gs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?t:this.__values__[this.__index__++]}},Wn.prototype.plant=function(e){for(var n,i=this;i instanceof qn;){var r=qa(i);r.__index__=0,r.__values__=t,n?a.__wrapped__=r:n=r;var a=r;i=i.__wrapped__}return a.__wrapped__=e,n},Wn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Hn){var n=e;return this.__actions__.length&&(n=new Hn(this)),(n=n.reverse()).__actions__.push({func:Co,args:[ro],thisArg:t}),new Mn(n,this.__chain__)}return this.thru(ro)},Wn.prototype.toJSON=Wn.prototype.valueOf=Wn.prototype.value=function(){return vr(this.__wrapped__,this.__actions__)},Wn.prototype.first=Wn.prototype.head,ee&&(Wn.prototype[ee]=function(){return this}),Wn}();pe?((pe.exports=vn)._=vn,he._=vn):de._=vn}.call(o);const x={name:"FileSelector",props:{multiple:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},acceptExtensions:{type:String,default:""},maxFileSize:{type:Number,default:NaN},height:{type:Number,default:NaN},validateFn:{type:Function,default:()=>!0}},data:()=>({isDragEnter:!1}),methods:{handleFilesChange(t){this.preprocessFiles(t.target.files)},handleDrop(t){this.isDragEnter=!1,this.preprocessFiles(t.dataTransfer.files)},checkFileExtensions(t){const e=[...new Set(this.acceptExtensions.toLowerCase().split(",").filter(Boolean))];return-1===Array.from(t).findIndex((t=>{const n=`.${t.name.toLowerCase().split(".").pop()}`;return!e.includes(n)}))},checkFileSize(t){if(Number.isNaN(this.maxFileSize))return!0;return-1===Array.from(t).findIndex((t=>t.size>this.maxFileSize))},validate(t){return!this.multiple&&t.length>1?"MULTIFILES_ERROR":this.checkFileExtensions(t)?this.checkFileSize(t)?this.validateFn(t):"FILE_SIZE_ERROR":"EXTENSION_ERROR"},preprocessFiles(t){const e=this.validate(t);this.$emit("validated",e,t),!0===e&&this.$emit("changed",t),this.$refs.fsFileInput.value=""}}},k={};var j=c(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fs-file-selector",class:{"fs-drag-enter":t.isDragEnter}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"fs-loader"},[t._t("loader",(function(){return[t._v(" Loading... ")]}))],2),n("div",{ref:"fsDroppable",staticClass:"fs-droppable",style:{height:t.height+"px"},on:{dragenter:function(e){e.stopPropagation(),e.preventDefault(),t.isDragEnter=!0},dragover:function(t){return t.stopPropagation(),t.preventDefault(),function(){}.apply(null,arguments)},dragleave:function(e){e.stopPropagation(),e.preventDefault(),t.isDragEnter=!1},drop:function(e){return e.stopPropagation(),e.preventDefault(),t.handleDrop.apply(null,arguments)}}},[n("input",{ref:"fsFileInput",attrs:{type:"file",tabindex:"-1",multiple:t.multiple,accept:t.acceptExtensions},on:{change:t.handleFilesChange}}),t._t("top"),n("div",{staticClass:"fs-btn-select",attrs:{href:"#"},on:{click:function(e){return t.$refs.fsFileInput.click()}}},[t._t("default",(function(){return[t._v("Select")]}))],2),t._t("bottom")],2)])}),[],!1,O,"28a6f273",null,null);function O(t){for(let e in k)this[e]=k[e]}var D=s({name:"AddDatasetsPanel",components:{FileSelector:function(){return j.exports}()},props:{fileSystem:{type:Object,required:!0},subfolder:{type:String,required:!0},vizConfiguration:{type:Object}},data:()=>({validDataTypes:["CSV","TSV","TAB","TXT","DBF","GZ","DAT"],validRegex:/\.(CSV|TSV|TAB|TXT|DBF|DAT)(\.GZ)?$/,fileChoice:"",filesInFolder:[],isLoading:!1}),computed:{fileApi(){return new h(this.fileSystem)}},async mounted(){const{files:t}=await this.fileApi.getDirectory(this.subfolder);this.filesInFolder=t.filter((t=>this.validRegex.test(t.toLocaleUpperCase()))).sort()},watch:{fileChoice(){console.warn("*** File Chosen!"),this.fileChoiceChanged(this.fileChoice)}},methods:{clickedClose(){this.$emit("update",{})},async fileChoiceChanged(t){if(!t)return;this.isLoading=!0;const e=await this.fetchDataset(t);let n=t;const i=this.validRegex.exec(t.toLocaleUpperCase());i&&i[0]&&(n=t.substring(0,t.length-i[0].length));const r={key:n,dataTable:e,filename:t};this.$emit("update",{dataset:r}),this.isLoading=!1},handleFilesValidated(t,e){console.log("Validated result",t)},async handleFilesChanged(t){this.isLoading=!0;const e=Array.from(t);for(const n of e){let t=await this.loadDataUrl(n);const e=t.buffer||t,i=await this.processBuffer(n.name,e);let r=n.name;const a=this.validRegex.exec(r.toLocaleUpperCase());a&&a[0]&&(r=r.substring(0,r.length-a[0].length));const o={key:r,dataTable:i,filename:n};this.$emit("update",{dataset:o})}this.isLoading=!1},processBuffer:async(t,e)=>new Promise(((n,i)=>{const r=new p;try{r.postMessage({config:{dataset:t},buffer:e},[e]),r.onmessage=t=>{r.terminate(),n(t.data)}}catch(a){r.terminate(),i(a)}})),loadDataUrl:async t=>await new Promise((e=>{const n=new FileReader;n.readAsArrayBuffer(t),n.onload=t=>{const n=t.target.result,i=u(n);e(i)}})),async fetchDataset(t){return new Promise(((e,n)=>{const i=new p;try{i.postMessage({fileSystemConfig:this.fileSystem,subfolder:this.subfolder,files:this.filesInFolder,config:{dataset:t}}),i.onmessage=t=>{i.terminate(),e(t.data)}}catch(r){i.terminate(),n(r)}}))}}});const $={};var L=c(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"datasets-panel"},[t.isLoading?n("div",{staticClass:"loading-panel"},[t._m(0)]):t._e(),n("h3",{staticClass:"button-close",on:{click:t.clickedClose}},[n("i",{staticClass:"fa fa-sm fa-times"})]),n("h3",{staticClass:"header-line"},[t._v("Add Data")]),n("div",{staticClass:"widgets"},[n("div",{staticClass:"widget"},[n("b",[t._v("Choose a dataset from files in this folder:")]),n("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:t.fileChoice,callback:function(e){t.fileChoice=e},expression:"fileChoice"}},[n("option",{attrs:{value:"",label:"Select file..."}}),t._l(t.filesInFolder,(function(t){return n("option",{attrs:{label:t},domProps:{value:t}})}))],2)],1)]),n("br"),n("div",{staticClass:"drop-zone"},[n("b",[t._v("Or Drag and Drop any dataset file:")]),n("file-selector",{attrs:{"accept-extensions":t.validDataTypes.map((function(t){return`.${t}`})).join(","),multiple:!0,"is-loading":t.isLoading},on:{validated:t.handleFilesValidated,changed:t.handleFilesChanged}},[t._v("or "),n("b",[n("a",[t._v("browse your files")])]),n("div",{staticClass:"section-top",attrs:{slot:"top"},slot:"top"},[n("br"),n("p",[t._v("Drop files into this area.")]),n("p",[t._v("No size limit, but large datasets could crash your browser :-)")]),n("br"),n("p",[t._v("Supported file types: "),n("b",[t._v(t._s(t.validDataTypes.join(", ")))])])]),n("div",{staticClass:"section-bottom",attrs:{slot:"loader"},slot:"loader"},[n("p",[t._v("Processing files"),n("br")]),n("p",[t._v("please wait...")])])]),n("br"),t._m(1)],1)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"thing"},[n("div",{staticClass:"spinner-box"},[n("p",[t._v(" ")])]),n("h3",[t._v("LOADING...")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"center"},[e("input",{staticStyle:{display:"none"},attrs:{name:"dataBrowser",id:"dataBrowser",type:"file"}})])}],!1,z,"65ccef0a",null,null);function z(t){for(let e in $)this[e]=$[e]}var A=function(){return L.exports}();const R=Object.assign({},v,m);var I,F;(F=I||(I={}))[F.categorical=0]="categorical",F[F.diverging=1]="diverging",F[F.sequential=2]="sequential";var E=s({name:"ColorsConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>{const t=[{ramp:"Viridis",style:2,reverse:!0},{ramp:"Plasma",style:2,reverse:!0},{ramp:"Blues",style:2},{ramp:"Purples",style:2},{ramp:"Oranges",style:2},{ramp:"PRGn",style:1,reverse:!0},{ramp:"RdBu",style:1,reverse:!0},{ramp:"Tableau10",style:0},{ramp:"Paired",style:0}];return{colorChoices:t,globalState:f.state,steps:"9",flip:!1,dataColumn:"",selectedColor:t[0],selectedSingleColor:"",datasetLabels:[],isFirstDataset:!0}},computed:{simpleColors(){return this.buildColors({ramp:"Tableau10",style:0},10)}},mounted(){this.selectedSingleColor=this.simpleColors[0],this.datasetLabels=Object.keys(this.vizConfiguration.datasets),this.datasetsAreLoaded()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},flip(){this.emitColorSpecification()},steps(){this.emitColorSpecification()},dataColumn(){this.emitColorSpecification()},"global.isDarkMode"(){this.emitColorSpecification()}},methods:{vizConfigChanged(){var t;const e=null==(t=this.vizConfiguration.display)?void 0:t.color;if(null==e?void 0:e.columnName){const t=`${e.dataset}/${e.columnName}`;this.dataColumn=t,this.datasetLabels=[...this.datasetLabels]}},datasetsAreLoaded(){const t=Object.keys(this.datasets);if(this.datasetLabels=t,!this.isFirstDataset)return;t.length&&(this.isFirstDataset=!1);const{dataset:e,columnName:n,colorRamp:i}=this.vizConfiguration.display.color;if(e&&n)this.dataColumn=`${e}/${n}`,i&&(this.selectedColor=this.colorChoices.find((t=>t.ramp.toLowerCase()===i.ramp.toLowerCase()))||this.colorChoices[0],this.flip=!!i.reverse,i.steps&&(this.steps=""+i.steps));else if(t.length){const e=Object.keys(this.datasets[t[0]])[1];console.log(e),e&&(this.dataColumn=`${t[0]}/${e}`)}},emitColorSpecification(){if(!this.dataColumn)return;const t=this.dataColumn.indexOf("/");if(-1===t)return void this.clickedSingleColor(this.selectedSingleColor);const e=this.dataColumn.substring(0,t),n=this.dataColumn.substring(t+1),i=this.buildColors(this.selectedColor,parseInt(this.steps)),r=parseInt(this.steps),a={dataset:e,columnName:n,fixedColors:i,colorRamp:{ramp:this.selectedColor.ramp,style:this.selectedColor.style,reverse:this.flip,steps:r}};setTimeout((()=>this.$emit("update",{color:a})),50)},clickedSingleColor(t){this.selectedSingleColor=t;const e={fixedColors:[this.selectedSingleColor],dataset:"",columnName:""};setTimeout((()=>this.$emit("update",{color:e})),50)},datasetChoices(){return this.datasetLabels.filter((t=>"csvBase"!==t))},columnsInDataset(t){const e=this.datasets[t];if(!e)return[];return Object.keys(e).filter((t=>e[t].type!==d.LOOKUP))},pickColor(t){this.selectedColor=t,this.emitColorSpecification()},buildColors(t,e){let n=[...this.ramp(t,e||parseInt(this.steps))],i=!!t.reverse;return this.flip&&(i=!i),i&&(n=n.reverse()),2===t.style&&this.globalState.isDarkMode&&(n=n.reverse()),n},ramp(t,e){let n;if(0===t.style){return R[`scheme${t.ramp}`].slice(0,e)}if(R[`scheme${t.ramp}`]&&R[`scheme${t.ramp}`][e])n=R[`scheme${t.ramp}`][e];else try{const i=R[`interpolate${t.ramp}`];n=[];for(let t=0;t<e;++t)n.push(R.rgb(i(t/(e-1))).hex())}catch(i){return this.ramp(t,e-1)}return n}}});const N={};var P=c(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"color-ramp-picker"},[n("div",{staticClass:"widgets"},[n("div",{staticClass:"widget"},[n("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:t.dataColumn,callback:function(e){t.dataColumn=e},expression:"dataColumn"}},[n("option",{attrs:{label:"Single color",value:""}}),t._l(t.datasetChoices(),(function(e){return n("optgroup",{key:e,attrs:{label:e}},t._l(t.columnsInDataset(e),(function(t){return n("option",{attrs:{label:t},domProps:{value:`${e}/${t}`}})})),0)}))],2)],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.dataColumn,expression:"!dataColumn"}],staticClass:"colorbar single"},t._l(t.simpleColors,(function(e){return n("div",{key:e,staticClass:"single-color",class:{active:t.selectedSingleColor==e},style:{backgroundColor:`${e}`},on:{click:function(n){return t.clickedSingleColor(e)}}})})),0),n("div",{directives:[{name:"show",rawName:"v-show",value:t.dataColumn,expression:"dataColumn"}],staticClass:"more"},[n("div",{staticClass:"widgets"},[n("div",{staticClass:"widget"},[n("p",[t._v("Steps")]),n("b-input",{attrs:{placeholder:"Number",type:"number",min:"2",max:"15"},model:{value:t.steps,callback:function(e){t.steps=e},expression:"steps"}})],1),n("div",{staticClass:"widget"},[n("p",[t._v("Reverse")]),n("b-checkbox",{staticClass:"hello",model:{value:t.flip,callback:function(e){t.flip=e},expression:"flip"}})],1)]),t._l(t.colorChoices,(function(e){return n("div",{key:e.ramp,staticClass:"color-ramp",class:{active:e===t.selectedColor},on:{click:function(n){return t.pickColor(e)}}},[n("div",{staticClass:"colorbar"},t._l(t.buildColors(e),(function(e,i){return n("div",{key:i,staticClass:"swatch",style:{backgroundColor:`${e}`}},[n("p",[t._v(" ")])])})),0)])}))],2)])}),[],!1,T,"44a26884",null,null);function T(t){for(let e in N)this[e]=N[e]}var U=function(){return P.exports}(),W=s({name:"WidthConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:t=>({dataColumn:"",xscaleFactor:"100",selectedTransform:"none",datasetLabels:[],debounceHandleWidthChanged:_(t.emitWidthSpecification,500)}),mounted(){this.datasetsAreLoaded()},computed:{datasetChoices(){return this.datasetLabels.filter((t=>"csvBase"!==t))}},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},xscaleFactor(){this.debounceHandleWidthChanged()},dataColumn(){this.emitWidthSpecification()}},methods:{vizConfigChanged(){var t;const e=null==(t=this.vizConfiguration.display)?void 0:t.width;if(null==e?void 0:e.columnName){const t=`${e.dataset}/${e.columnName}`;this.dataColumn=t,this.datasetLabels=[...this.datasetLabels]}},datasetsAreLoaded(){const t=Object.keys(this.datasets),{dataset:e,columnName:n,scaleFactor:i}=this.vizConfiguration.display.width;if(e&&n)this.dataColumn=`${e}/${n}`,i&&(this.xscaleFactor=""+i);else if(t.length){const e=Object.keys(this.datasets[t[0]])[1];e&&(this.dataColumn=`${t[0]}/${e}`)}this.datasetLabels=t},emitWidthSpecification(){const t=this.dataColumn.indexOf("/");if(-1===t)return void this.clickedSingle();const e={dataset:this.dataColumn.substring(0,t),columnName:this.dataColumn.substring(t+1),scaleFactor:parseFloat(this.xscaleFactor)};setTimeout((()=>this.$emit("update",{width:e})),50)},clickedSingle(){const t={dataset:"",columnName:"",scaleFactor:parseFloat(this.xscaleFactor)};setTimeout((()=>this.$emit("update",{width:t})),50)},numericColumnsInDataset(t){const e=this.datasets[t];if(!e)return[];return Object.keys(e).filter((t=>e[t].type!==d.LOOKUP))}}});const B={};var q=c(W,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"width-panel"},[n("div",{staticClass:"widgets"},[n("div",{staticClass:"widget"},[n("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:t.dataColumn,callback:function(e){t.dataColumn=e},expression:"dataColumn"}},[n("option",{attrs:{label:"None",value:""}}),t._l(t.datasetChoices,(function(e){return n("optgroup",{key:e,attrs:{label:e}},t._l(t.numericColumnsInDataset(e),(function(t){return n("option",{attrs:{label:t},domProps:{value:`${e}/${t}`}})})),0)}))],2)],1)]),n("div",{staticClass:"widgets"},[n("div",{staticClass:"widget"},[n("p",[t._v("Scaling")]),n("b-field",[n("b-input",{attrs:{disabled:!t.dataColumn,placeholder:"1.0"},model:{value:t.xscaleFactor,callback:function(e){t.xscaleFactor=e},expression:"xscaleFactor"}})],1)],1)])])}),[],!1,M,"30894cab",null,null);function M(t){for(let e in B)this[e]=B[e]}var H=function(){return q.exports}();const V=[{ramp:"Viridis",style:g.sequential,reverse:!0},{ramp:"Plasma",style:g.sequential,reverse:!0},{ramp:"Blues",style:g.sequential},{ramp:"Greens",style:g.sequential},{ramp:"Purples",style:g.sequential},{ramp:"Oranges",style:g.sequential},{ramp:"RdBu",style:g.diverging,reverse:!0},{ramp:"RdYlBu",style:g.sequential},{ramp:"PRGn",style:g.diverging,reverse:!0},{ramp:"Tableau10",style:g.categorical},{ramp:"Paired",style:g.categorical}];var K=s({name:"LineColorsConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},computed:{simpleColors(){return this.buildColors({ramp:"Tableau10",style:g.categorical},10)},colorChoices:()=>V,datasetChoices(){return this.datasetLabels.filter((t=>"csvBase"!==t)).reverse()}},data:()=>({globalState:f.state,dataColumn:"",datasetLabels:[],diffDatasets:[],diffRelative:!1,diffUISelection:"",diffChoices:[],flip:!1,isCurrentlyDiffMode:!1,join:"",normalSelection:"",selectedColor:{},selectedSingleColor:"",steps:"9",useHardCodedColors:!1}),mounted(){var t,e;this.selectedSingleColor=this.simpleColors[0],this.selectedColor=this.colorChoices[0],this.datasetLabels=Object.keys(this.vizConfiguration.datasets),this.datasetsAreLoaded(),(null==(e=null==(t=this.vizConfiguration.display)?void 0:t.lineColor)?void 0:e.fixedColors)&&(this.useHardCodedColors=!0),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},diffUISelection(){this.diffSelectionChanged()},dataColumn(){this.emitColorSpecification()},join(){this.emitColorSpecification()},diffDatasets(){this.emitColorSpecification()},flip(){this.emitColorSpecification()},"globalState.isDarkMode"(){this.emitColorSpecification()},normalSelection(){this.emitColorSpecification()},selectedColor(){this.emitColorSpecification()},steps(){this.emitColorSpecification()},diffRelative(){this.emitColorSpecification()}},methods:{vizConfigChanged(){var t;const e=null==(t=this.vizConfiguration.display)?void 0:t.lineColor;if(this.setupDiffMode(e),null==e?void 0:e.columnName){const t=this.diffDatasets.length?`${this.diffDatasets[0]}/${e.columnName}`:`${e.dataset}/${e.columnName}`;if(this.dataColumn=t,this.datasetLabels=[...this.datasetLabels],(null==e?void 0:e.normalize)&&(this.normalSelection=e.normalize),(null==e?void 0:e.join)&&(this.join=e.join),e.colorRamp){let t=this.colorChoices.find((t=>t.ramp==e.colorRamp.ramp))||this.colorChoices[0];this.selectedColor=t,this.steps=e.colorRamp.steps,this.flip=!!e.colorRamp.reverse}}else(null==e?void 0:e.fixedColors)&&this.clickedSingleColor(e.fixedColors[0])},setupDiffMode(t){if(!(null==t?void 0:t.diff))return;let e=[];if(t.diff.indexOf(" - ")>-1)e=t.diff.split(" - ").map((t=>t.trim()));else if(e=t.diff.split("-").map((t=>t.trim())),e.length>2)throw Error('Ambiguous diff, use " - " to separate terms');this.diffDatasets=e,this.diffRelative=!!t.relative,this.diffUISelection=`${e[0]} - ${e[1]}`},datasetsAreLoaded(){const t=Object.keys(this.datasets);this.datasetLabels=t,this.updateDiffLabels()},updateDiffLabels(){const t=[];if(t.push(["No",""]),this.datasetLabels.length<=1)return;const e=this.datasetLabels.slice(1);let n=e.flatMap(((t,n)=>e.slice(n+1).map((e=>t+" - "+e))));n.forEach((e=>t.push([e,e]))),e.reverse(),n=e.flatMap(((t,n)=>e.slice(n+1).map((e=>t+" - "+e)))),n.forEach((e=>t.push([e,e]))),this.diffChoices=t},diffSelectionChanged(){if(this.diffUISelection){const t=this.diffUISelection.split(" - ");this.diffDatasets=t}else this.diffDatasets=[],this.diffRelative=!1;this.isCurrentlyDiffMode=!!this.diffUISelection},emitColorSpecification(){var t,e,n,i,r,a,o,s;if(!this.dataColumn)return;if("@"===this.dataColumn)return this.normalSelection="",this.selectedSingleColor||(this.selectedSingleColor=this.simpleColors[0]),void this.clickedSingleColor(this.selectedSingleColor);const l=this.dataColumn.indexOf("/"),u=this.dataColumn.substring(0,l),c=this.dataColumn.substring(l+1),f=parseInt(this.steps),d=this.useHardCodedColors?null==(e=null==(t=this.vizConfiguration.display)?void 0:t.lineColor)?void 0:e.fixedColors.slice():this.buildColors(this.selectedColor,f);this.useHardCodedColors=!1;const h={dataset:u,columnName:c,join:this.join,fixedColors:d,normalize:this.normalSelection,colorRamp:{ramp:this.selectedColor.ramp,style:this.selectedColor.style,reverse:this.flip,steps:f}};this.diffDatasets.length&&(h.diffDatasets=this.diffDatasets),this.diffRelative&&(h.relative=!0),(null==(r=null==(i=null==(n=this.vizConfiguration.display)?void 0:n.lineColor)?void 0:i.colorRamp)?void 0:r.breakpoints)&&(h.colorRamp.breakpoints=null==(s=null==(o=null==(a=this.vizConfiguration.display)?void 0:a.lineColor)?void 0:o.colorRamp)?void 0:s.breakpoints),setTimeout((()=>this.$emit("update",{lineColor:h})),50)},clickedSingleColor(t){this.selectedSingleColor=t;const e={fixedColors:[this.selectedSingleColor],dataset:"",columnName:"",normalize:""};setTimeout((()=>this.$emit("update",{lineColor:e})),50)},columnsInDataset(t){const e=this.datasets[t];if(!e)return[];return Object.keys(e).filter((t=>e[t].type!==d.LOOKUP))},pickColor(t){this.selectedColor=t,this.emitColorSpecification()},buildColors(t,e){let n=[...C(t,e||parseInt(this.steps))],i=!!t.reverse;return this.flip&&(i=!i),i&&(n=n.reverse()),t.style===g.sequential&&this.globalState.isDarkMode&&(n=n.reverse()),n}}});const J={};var G=c(K,(function(){var t,e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"color-ramp-picker"},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[e._v("Display")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.dataColumn,callback:function(t){e.dataColumn=t},expression:"dataColumn"}},[i("option",{attrs:{label:"Single color",value:"@"}}),e._l(e.datasetChoices,(function(t){return i("optgroup",{key:t,attrs:{label:t}},e._l(e.columnsInDataset(t),(function(e){return i("option",{key:`${t}/${e}`,attrs:{label:e},domProps:{value:`${t}/${e}`}})})),0)}))],2)],1)]),e.datasetChoices.length>1&&e.dataColumn&&e.dataColumn.length>1?i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[e._v("Join by")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.join,callback:function(t){e.join=t},expression:"join"}},[i("option",{attrs:{label:"None",value:""}}),i("option",{attrs:{label:"Row count",value:"@count"}}),i("optgroup",{attrs:{label:"Join by..."}},e._l(e.columnsInDataset((null===(t=e.dataColumn)||void 0===t?void 0:t.slice(0,e.dataColumn.indexOf("/")))||[]),(function(t){return i("option",{attrs:{label:t},domProps:{value:t}})})),0)])],1)]):e._e(),e.dataColumn&&e.dataColumn.length>1?i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[e._v("Normalize by")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.normalSelection,callback:function(t){e.normalSelection=t},expression:"normalSelection"}},[i("option",{attrs:{label:"None",value:""}}),e._l(e.datasetChoices,(function(t){return i("optgroup",{key:t,attrs:{label:t}},e._l(e.columnsInDataset(t),(function(e){return i("option",{key:`${t}/${e}`,attrs:{label:e},domProps:{value:`${t}:${e}`}})})),0)}))],2)],1)]):e._e(),i("div",{staticClass:"more",attrs:{title:e.diffChoices.length<2?"Add two datasets to enable comparisons":""}},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget",staticStyle:{flex:"3"}},[i("p",{staticClass:"tight"},[e._v("Compare datasets")]),i("b-select",{staticClass:"selector",attrs:{disabled:!e.dataColumn||e.diffChoices.length<2,expanded:""},model:{value:e.diffUISelection,callback:function(t){e.diffUISelection=t},expression:"diffUISelection"}},e._l(e.diffChoices,(function(t){return i("option",{attrs:{label:t[0]},domProps:{value:t[1]}})})),0)],1),i("div",{staticClass:"widget"},[i("p",[e._v("%Diff")]),i("b-checkbox",{staticClass:"hello",attrs:{disabled:!e.diffUISelection||!e.dataColumn||e.diffChoices.length<2},model:{value:e.diffRelative,callback:function(t){e.diffRelative=t},expression:"diffRelative"}})],1)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:"@"==e.dataColumn,expression:"dataColumn=='@'"}],staticClass:"colorbar single"},e._l(e.simpleColors,(function(t){return i("div",{key:t,staticClass:"single-color",class:{active:e.selectedSingleColor==t},style:{backgroundColor:`${t}`},on:{click:function(n){return e.clickedSingleColor(t)}}})})),0),i("div",{directives:[{name:"show",rawName:"v-show",value:e.dataColumn&&e.dataColumn.length>1,expression:"dataColumn && dataColumn.length > 1"}],staticClass:"more"},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget",staticStyle:{flex:"3"}},[i("p",[e._v("Steps")]),i("b-input",{attrs:{placeholder:"Number",type:"number",min:"2",max:"15"},model:{value:e.steps,callback:function(t){e.steps=t},expression:"steps"}})],1),i("div",{staticClass:"widget"},[i("p",[e._v("Flip")]),i("b-checkbox",{staticClass:"hello",model:{value:e.flip,callback:function(t){e.flip=t},expression:"flip"}})],1)]),e._l(e.colorChoices,(function(t){return i("div",{key:t.ramp,staticClass:"color-ramp",class:{active:t===e.selectedColor},on:{click:function(n){return e.pickColor(t)}}},[i("div",{staticClass:"colorbar"},e._l(e.buildColors(t),(function(t,n){return i("div",{key:n,staticClass:"swatch",style:{backgroundColor:`${t}`}},[i("p",[e._v(" ")])])})),0)])}))],2)])}),[],!1,Z,"4bfd1627",null,null);function Z(t){for(let e in J)this[e]=J[e]}var Y=function(){return G.exports}();const X=[{ramp:"Viridis",style:g.sequential,reverse:!0},{ramp:"Plasma",style:g.sequential,reverse:!0},{ramp:"Blues",style:g.sequential},{ramp:"Greens",style:g.sequential},{ramp:"Purples",style:g.sequential},{ramp:"Oranges",style:g.sequential},{ramp:"RdBu",style:g.diverging,reverse:!0},{ramp:"PRGn",style:g.diverging,reverse:!0},{ramp:"Tableau10",style:g.categorical},{ramp:"Paired",style:g.categorical}];var Q=s({name:"FillColorsConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},computed:{simpleColors(){return this.buildColors({ramp:"Tableau10",style:g.categorical},10)},colorChoices:()=>X,datasetChoices(){return this.datasetLabels.filter((t=>"csvBase"!==t)).reverse()}},data:()=>({globalState:f.state,dataColumn:"",datasetLabels:[],diffDatasets:[],diffRelative:!1,diffUISelection:"",diffChoices:[],flip:!1,isCurrentlyDiffMode:!1,join:"",normalSelection:"",selectedColor:{},selectedSingleColor:"",steps:"9",useHardCodedColors:!1}),mounted(){var t,e;this.selectedSingleColor=this.simpleColors[0],this.selectedColor=this.colorChoices[0],this.datasetLabels=Object.keys(this.vizConfiguration.datasets),this.datasetsAreLoaded(),(null==(e=null==(t=this.vizConfiguration.display)?void 0:t.fill)?void 0:e.fixedColors)&&(this.useHardCodedColors=!0),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},diffUISelection(){this.diffSelectionChanged()},dataColumn(){this.emitColorSpecification()},join(){this.emitColorSpecification()},diffDatasets(){this.emitColorSpecification()},flip(){this.emitColorSpecification()},"globalState.isDarkMode"(){this.emitColorSpecification()},normalSelection(){this.emitColorSpecification()},selectedColor(){this.emitColorSpecification()},steps(){this.emitColorSpecification()},diffRelative(){this.emitColorSpecification()}},methods:{vizConfigChanged(){var t;const e=null==(t=this.vizConfiguration.display)?void 0:t.fill;if(this.setupDiffMode(e),null==e?void 0:e.columnName){const t=this.diffDatasets.length?`${this.diffDatasets[0]}/${e.columnName}`:`${e.dataset}/${e.columnName}`;if(this.dataColumn=t,this.datasetLabels=[...this.datasetLabels],(null==e?void 0:e.normalize)&&(this.normalSelection=e.normalize),(null==e?void 0:e.join)&&(this.join=e.join),e.colorRamp){let t=this.colorChoices.find((t=>t.ramp==e.colorRamp.ramp))||this.colorChoices[0];this.selectedColor=t,this.steps=e.colorRamp.steps,this.flip=!!e.colorRamp.reverse}}else(null==e?void 0:e.fixedColors)&&this.clickedSingleColor(e.fixedColors[0])},setupDiffMode(t){if(!(null==t?void 0:t.diff))return;let e=[];if(t.diff.indexOf(" - ")>-1)e=t.diff.split(" - ").map((t=>t.trim()));else if(e=t.diff.split("-").map((t=>t.trim())),e.length>2)throw Error('Ambiguous diff, use " - " to separate terms');this.diffDatasets=e,this.diffRelative=!!t.relative,this.diffUISelection=`${e[0]} - ${e[1]}`},datasetsAreLoaded(){const t=Object.keys(this.datasets);this.datasetLabels=t,this.updateDiffLabels()},updateDiffLabels(){const t=[];if(t.push(["No",""]),this.datasetLabels.length<=1)return;const e=this.datasetLabels.slice(1);let n=e.flatMap(((t,n)=>e.slice(n+1).map((e=>t+" - "+e))));n.forEach((e=>t.push([e,e]))),e.reverse(),n=e.flatMap(((t,n)=>e.slice(n+1).map((e=>t+" - "+e)))),n.forEach((e=>t.push([e,e]))),this.diffChoices=t},diffSelectionChanged(){if(this.diffUISelection){const t=this.diffUISelection.split(" - ");this.diffDatasets=t}else this.diffDatasets=[],this.diffRelative=!1;this.isCurrentlyDiffMode=!!this.diffUISelection},emitColorSpecification(){var t,e,n,i,r,a,o,s;if(!this.dataColumn)return;if("@"===this.dataColumn)return this.normalSelection="",this.selectedSingleColor||(this.selectedSingleColor=this.simpleColors[0]),void this.clickedSingleColor(this.selectedSingleColor);const l=this.dataColumn.indexOf("/"),u=this.dataColumn.substring(0,l),c=this.dataColumn.substring(l+1),f=parseInt(this.steps),d=this.useHardCodedColors?null==(e=null==(t=this.vizConfiguration.display)?void 0:t.fill)?void 0:e.fixedColors.slice():this.buildColors(this.selectedColor,f);this.useHardCodedColors=!1;const h={dataset:u,columnName:c,join:this.join,fixedColors:d,normalize:this.normalSelection,colorRamp:{ramp:this.selectedColor.ramp,style:this.selectedColor.style,reverse:this.flip,steps:f}};this.diffDatasets.length&&(h.diffDatasets=this.diffDatasets),this.diffRelative&&(h.relative=!0),(null==(r=null==(i=null==(n=this.vizConfiguration.display)?void 0:n.fill)?void 0:i.colorRamp)?void 0:r.breakpoints)&&(h.colorRamp.breakpoints=null==(s=null==(o=null==(a=this.vizConfiguration.display)?void 0:a.fill)?void 0:o.colorRamp)?void 0:s.breakpoints),setTimeout((()=>this.$emit("update",{fill:h})),50)},clickedSingleColor(t){this.selectedSingleColor=t;const e={fixedColors:[this.selectedSingleColor],dataset:"",columnName:"",normalize:""};setTimeout((()=>this.$emit("update",{fill:e})),25)},columnsInDataset(t){const e=this.datasets[t];if(!e)return[];return Object.keys(e).filter((t=>e[t].type!==d.LOOKUP))},pickColor(t){this.selectedColor=t,this.emitColorSpecification()},buildColors(t,e){let n=[...C(t,e||parseInt(this.steps))],i=!!t.reverse;return this.flip&&(i=!i),i&&(n=n.reverse()),t.style===g.sequential&&this.globalState.isDarkMode&&(n=n.reverse()),n}}});const tt={};var et=c(Q,(function(){var t,e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"color-ramp-picker"},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[e._v("Display")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.dataColumn,callback:function(t){e.dataColumn=t},expression:"dataColumn"}},[i("option",{attrs:{label:"Single color",value:"@"}}),e._l(e.datasetChoices,(function(t){return i("optgroup",{key:t,attrs:{label:t}},e._l(e.columnsInDataset(t),(function(e){return i("option",{key:`${t}/${e}`,attrs:{label:e},domProps:{value:`${t}/${e}`}})})),0)}))],2)],1)]),e.datasetChoices.length>1?i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[e._v("Join by")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.join,callback:function(t){e.join=t},expression:"join"}},[i("option",{attrs:{label:"None",value:""}}),i("option",{attrs:{label:"Row count",value:"@count"}}),i("optgroup",{attrs:{label:"Join by..."}},e._l(e.columnsInDataset((null===(t=e.dataColumn)||void 0===t?void 0:t.slice(0,e.dataColumn.indexOf("/")))||[]),(function(t){return i("option",{attrs:{label:t},domProps:{value:t}})})),0)])],1)]):e._e(),e.dataColumn&&e.dataColumn.length>1?i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[e._v("Normalize by")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.normalSelection,callback:function(t){e.normalSelection=t},expression:"normalSelection"}},[i("option",{attrs:{label:"None",value:""}}),e._l(e.datasetChoices,(function(t){return i("optgroup",{key:t,attrs:{label:t}},e._l(e.columnsInDataset(t),(function(e){return i("option",{key:`${t}/${e}`,attrs:{label:e},domProps:{value:`${t}:${e}`}})})),0)}))],2)],1)]):e._e(),i("div",{staticClass:"more",attrs:{title:e.diffChoices.length<2?"Add two datasets to enable comparisons":""}},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget",staticStyle:{flex:"3"}},[i("p",{staticClass:"tight"},[e._v("Compare datasets")]),i("b-select",{staticClass:"selector",attrs:{disabled:!e.dataColumn||e.diffChoices.length<2,expanded:""},model:{value:e.diffUISelection,callback:function(t){e.diffUISelection=t},expression:"diffUISelection"}},e._l(e.diffChoices,(function(t){return i("option",{attrs:{label:t[0]},domProps:{value:t[1]}})})),0)],1),i("div",{staticClass:"widget"},[i("p",[e._v("%Diff")]),i("b-checkbox",{staticClass:"hello",attrs:{disabled:!e.diffUISelection||!e.dataColumn||e.diffChoices.length<2},model:{value:e.diffRelative,callback:function(t){e.diffRelative=t},expression:"diffRelative"}})],1)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:"@"==e.dataColumn,expression:"dataColumn=='@'"}],staticClass:"colorbar single"},e._l(e.simpleColors,(function(t){return i("div",{key:t,staticClass:"single-color",class:{active:e.selectedSingleColor==t},style:{backgroundColor:`${t}`},on:{click:function(n){return e.clickedSingleColor(t)}}})})),0),i("div",{directives:[{name:"show",rawName:"v-show",value:e.dataColumn&&e.dataColumn.length>1,expression:"dataColumn && dataColumn.length > 1"}],staticClass:"more"},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget",staticStyle:{flex:"3"}},[i("p",[e._v("Steps")]),i("b-input",{attrs:{placeholder:"Number",type:"number",min:"2",max:"15"},model:{value:e.steps,callback:function(t){e.steps=t},expression:"steps"}})],1),i("div",{staticClass:"widget"},[i("p",[e._v("Flip")]),i("b-checkbox",{staticClass:"hello",model:{value:e.flip,callback:function(t){e.flip=t},expression:"flip"}})],1)]),e._l(e.colorChoices,(function(t){return i("div",{key:t.ramp,staticClass:"color-ramp",class:{active:t===e.selectedColor},on:{click:function(n){return e.pickColor(t)}}},[i("div",{staticClass:"colorbar"},e._l(e.buildColors(t),(function(t,n){return i("div",{key:n,staticClass:"swatch",style:{backgroundColor:`${t}`}},[i("p",[e._v(" ")])])})),0)])}))],2)])}),[],!1,nt,"7e7fa278",null,null);function nt(t){for(let e in tt)this[e]=tt[e]}var it=function(){return et.exports}(),rt=s({name:"FillHeightConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>{const t=["none","sqrt","pow5"];return{transforms:t,dataColumn:"",join:"",normalSelection:"",scaleFactor:"1",selectedTransform:t[0],datasetLabels:[],debounceHandleScale:{}}},mounted(){this.datasetLabels=Object.keys(this.vizConfiguration.datasets),this.debounceHandleScale=_.debounce(this.handleScaleChanged,500),this.datasetsAreLoaded(),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},join(){this.emitSpecification()},scaleFactor(){this.debounceHandleScale()},dataColumn(){this.emitSpecification()},normalSelection(){this.emitSpecification()}},computed:{datasetChoices(){return this.datasetLabels.filter((t=>"csvBase"!==t)).reverse()}},methods:{vizConfigChanged(){var t;const e=null==(t=this.vizConfiguration.display)?void 0:t.fillHeight;(null==e?void 0:e.columnName)&&(this.dataColumn=`${e.dataset}/${e.columnName}`,this.datasetLabels=[...this.datasetLabels],this.scaleFactor=e.scaleFactor,this.join=e.join,(null==e?void 0:e.normalize)&&(this.normalSelection=e.normalize))},datasetsAreLoaded(){const t=Object.keys(this.datasets);this.datasetLabels=t},handleScaleChanged(){this.emitSpecification()},emitSpecification(){if(!this.dataColumn)return;if("^"===this.dataColumn){this.normalSelection="";const t={dataset:"",columnName:"",join:this.join,normalize:this.normalSelection,scaleFactor:parseFloat(this.scaleFactor)};return void setTimeout((()=>this.$emit("update",{fillHeight:t})),25)}const t=this.dataColumn.indexOf("/"),e={dataset:this.dataColumn.substring(0,t),columnName:this.dataColumn.substring(t+1),join:this.join,normalize:this.normalSelection,scaleFactor:parseFloat(this.scaleFactor)};setTimeout((()=>this.$emit("update",{fillHeight:e})),25)},columnsInDataset(t){const e=this.datasets[t];if(!e)return[];return Object.keys(e).filter((t=>e[t].type!==d.LOOKUP))},numericColumnsInDataset(t){const e=this.datasets[t];if(!e)return[];return Object.keys(e).filter((t=>e[t].type!==d.LOOKUP))}}});const at={};var ot=c(rt,(function(){var t,e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"height-panel"},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[e._v("Display")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.dataColumn,callback:function(t){e.dataColumn=t},expression:"dataColumn"}},[i("option",{attrs:{label:"None",value:"^"}}),e._l(e.datasetChoices,(function(t){return i("optgroup",{key:t,attrs:{label:t}},e._l(e.numericColumnsInDataset(t),(function(e){return i("option",{key:`${t}/${e}`,attrs:{label:e},domProps:{value:`${t}/${e}`}})})),0)}))],2)],1)]),e.datasetChoices.length>1?i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[e._v("Join by")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.join,callback:function(t){e.join=t},expression:"join"}},[i("option",{attrs:{label:"None",value:""}}),i("option",{attrs:{label:"Row count",value:"@count"}}),i("optgroup",{attrs:{label:"Join by..."}},e._l(e.columnsInDataset((null===(t=e.dataColumn)||void 0===t?void 0:t.slice(0,e.dataColumn.indexOf("/")))||[]),(function(t){return i("option",{key:t,attrs:{label:t},domProps:{value:t}})})),0)])],1)]):e._e(),e.dataColumn&&e.dataColumn.length>1?i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[e._v("Normalize by")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.normalSelection,callback:function(t){e.normalSelection=t},expression:"normalSelection"}},[i("option",{attrs:{label:"None",value:""}}),e._l(e.datasetChoices,(function(t){return i("optgroup",{key:t,attrs:{label:t}},e._l(e.numericColumnsInDataset(t),(function(e){return i("option",{key:`${t}/${e}`,attrs:{label:e},domProps:{value:`${t}:${e}`}})})),0)}))],2)],1)]):e._e(),i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",[e._v("Scaling")]),i("b-field",[i("b-input",{attrs:{disabled:!e.dataColumn,placeholder:"1.0"},model:{value:e.scaleFactor,callback:function(t){e.scaleFactor=t},expression:"scaleFactor"}})],1)],1)])])}),[],!1,st,"3d153334",null,null);function st(t){for(let e in at)this[e]=at[e]}var lt=function(){return ot.exports}(),ut=s({name:"LineWidthsConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>({dataColumn:"",scaleFactor:"1",join:"",selectedTransform:"none",datasetLabels:[],diffDatasets:[],diffRelative:!1,diffUISelection:"",diffChoices:[],isCurrentlyDiffMode:!1,debounceHandleScaleChanged:{}}),mounted(){this.debounceHandleScaleChanged=_(this.handleScaleChanged,500),this.datasetsAreLoaded(),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},dataColumn(){this.emitSpecification()},diffDatasets(){this.emitSpecification()},diffRelative(){this.emitSpecification()},datasets(){this.datasetsAreLoaded()},diffUISelection(){this.diffSelectionChanged()},scaleFactor(){this.debounceHandleScaleChanged()},join(){this.emitSpecification()}},computed:{datasetChoices(){return this.datasetLabels.filter((t=>"csvBase"!==t)).reverse()}},methods:{vizConfigChanged(){var t,e;const n=null==(t=this.vizConfiguration.display)?void 0:t.lineWidth;this.setupDiffMode(n),(null==n?void 0:n.columnName)?(this.dataColumn=this.diffDatasets.length?`${this.diffDatasets[0]}/${n.columnName}`:`${n.dataset}/${n.columnName}`,this.datasetLabels=[...this.datasetLabels],this.scaleFactor=null!=(e=n.scaleFactor)?e:"1",this.join=n.join):/^@\d$/.test(null==n?void 0:n.dataset)&&(this.dataColumn=n.dataset)},setupDiffMode(t){if(!(null==t?void 0:t.diff))return;let e=[];if(t.diff.indexOf(" - ")>-1)e=t.diff.split(" - ").map((t=>t.trim()));else if(e=t.diff.split("-").map((t=>t.trim())),e.length>2)throw Error('Ambiguous diff, use " - " to separate terms');this.diffDatasets=e,this.diffRelative=!!t.relative,this.diffUISelection=`${e[0]} - ${e[1]}`},datasetsAreLoaded(){const t=Object.keys(this.datasets);this.datasetLabels=t,this.updateDiffLabels()},updateDiffLabels(){const t=[];if(t.push(["No",""]),this.datasetLabels.length<=1)return;const e=this.datasetLabels.slice(1);let n=e.flatMap(((t,n)=>e.slice(n+1).map((e=>t+" - "+e))));n.forEach((e=>t.push([e,e]))),e.reverse(),n=e.flatMap(((t,n)=>e.slice(n+1).map((e=>t+" - "+e)))),n.forEach((e=>t.push([e,e]))),this.diffChoices=t},diffSelectionChanged(){if(this.diffUISelection){const t=this.diffUISelection.split(" - ");this.diffDatasets=t}else this.diffDatasets=[],this.diffRelative=!1;this.isCurrentlyDiffMode=!!this.diffUISelection},handleScaleChanged(){this.emitSpecification()},emitSpecification(){if(!this.dataColumn)return;const t=this.dataColumn.indexOf("/");if(-1===t)return void this.clickedSingle();const e={dataset:this.dataColumn.substring(0,t),columnName:this.dataColumn.substring(t+1),join:this.join,scaleFactor:parseFloat(this.scaleFactor)};this.diffDatasets.length&&(e.diffDatasets=this.diffDatasets),this.diffRelative&&(e.relative=!0),setTimeout((()=>this.$emit("update",{lineWidth:e})),50)},clickedSingle(){const t={dataset:"",columnName:"",scaleFactor:parseFloat(this.scaleFactor)};/^@\d$/.test(this.dataColumn)&&(t.dataset=this.dataColumn),setTimeout((()=>this.$emit("update",{lineWidth:t})),20)},columnsInDataset(t){const e=this.datasets[t];if(!e)return[];return Object.keys(e).filter((t=>e[t].type!==d.LOOKUP))},numericColumnsInDataset(t){const e=this.datasets[t];if(!e)return[];return Object.keys(e).filter((t=>e[t].type!==d.LOOKUP))}}});const ct={};var ft=c(ut,(function(){var t,e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"width-panel"},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[e._v("Display")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.dataColumn,callback:function(t){e.dataColumn=t},expression:"dataColumn"}},[i("option",{attrs:{label:"None",value:"@0"}}),i("option",{attrs:{label:"1px",value:"@1"}}),i("option",{attrs:{label:"2px",value:"@2"}}),i("option",{attrs:{label:"3px",value:"@3"}}),i("option",{attrs:{label:"5px",value:"@5"}}),i("option",{attrs:{label:"8px",value:"@8"}}),e._l(e.datasetChoices,(function(t){return i("optgroup",{key:t,attrs:{label:t}},e._l(e.numericColumnsInDataset(t),(function(e){return i("option",{key:`${t}/${e}`,attrs:{label:e},domProps:{value:`${t}/${e}`}})})),0)}))],2)],1)]),e.datasetChoices.length>1&&e.dataColumn&&e.dataColumn.length>2?i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[e._v("Join by")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.join,callback:function(t){e.join=t},expression:"join"}},[i("option",{attrs:{label:"None",value:""}}),i("option",{attrs:{label:"Row count",value:"@count"}}),i("optgroup",{attrs:{label:"Join by..."}},e._l(e.columnsInDataset((null===(t=e.dataColumn)||void 0===t?void 0:t.slice(0,e.dataColumn.indexOf("/")))||[]),(function(t){return i("option",{key:t,attrs:{label:t},domProps:{value:t}})})),0)])],1)]):e._e(),e.dataColumn&&e.dataColumn.length>2?i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",[e._v("Scaling")]),i("b-field",[i("b-input",{attrs:{disabled:!e.dataColumn,placeholder:"1.0"},model:{value:e.scaleFactor,callback:function(t){e.scaleFactor=t},expression:"scaleFactor"}})],1)],1)]):e._e(),i("div",{staticClass:"more",attrs:{title:e.diffChoices.length<2?"Add two datasets to enable comparisons":""}},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget",staticStyle:{flex:"3"}},[i("p",{staticClass:"tight"},[e._v("Compare datasets")]),i("b-select",{staticClass:"selector",attrs:{disabled:!e.dataColumn||e.diffChoices.length<2,expanded:""},model:{value:e.diffUISelection,callback:function(t){e.diffUISelection=t},expression:"diffUISelection"}},e._l(e.diffChoices,(function(t){return i("option",{attrs:{label:t[0]},domProps:{value:t[1]}})})),0)],1)])])])}),[],!1,dt,"1a7d7c5e",null,null);function dt(t){for(let e in ct)this[e]=ct[e]}var ht=function(){return ft.exports}(),pt=s({name:"CircleRadiusConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>{const t=["none","sqrt","pow5"];return{transforms:t,dataColumn:"",scaleFactor:"100",selectedTransform:t[0],datasetLabels:[],join:""}},mounted(){this.datasetsAreLoaded(),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},scaleFactor(){this.emitWidthSpecification()},dataColumn(){this.emitWidthSpecification()},join(){this.emitWidthSpecification()}},computed:{datasetChoices(){return this.datasetLabels.filter((t=>"csvBase"!==t)).reverse()}},methods:{vizConfigChanged(){var t,e;const n=null==(t=this.vizConfiguration.display)?void 0:t.radius;if(null==n?void 0:n.columnName){const t=`${n.dataset}/${n.columnName}`;this.dataColumn=t,this.datasetLabels=[...this.datasetLabels],this.scaleFactor=n.scaleFactor,this.join=null!=(e=n.join)?e:""}},datasetsAreLoaded(){const t=Object.keys(this.datasets);this.datasetLabels=t},emitWidthSpecification(){if(!this.dataColumn)return;if("@"==this.dataColumn){const t={columnName:"",scaleFactor:parseFloat(this.scaleFactor),join:this.join};return void setTimeout((()=>this.$emit("update",{radius:t})),50)}const t=this.dataColumn.indexOf("/"),e={dataset:this.dataColumn.substring(0,t),columnName:this.dataColumn.substring(t+1),scaleFactor:parseFloat(this.scaleFactor),join:this.join};setTimeout((()=>this.$emit("update",{radius:e})),50)},columnsInDataset(t){const e=this.datasets[t];if(!e)return[];return Object.keys(e).filter((t=>e[t].type!==d.LOOKUP))},numericColumnsInDataset(t){const e=this.datasets[t];if(!e)return[];return Object.keys(e).filter((t=>e[t].type!==d.LOOKUP))}}});const vt={};var mt=c(pt,(function(){var t,e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"width-panel"},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[e._v("Display")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.dataColumn,callback:function(t){e.dataColumn=t},expression:"dataColumn"}},[i("option",{attrs:{label:"None",value:"@"}}),e._l(e.datasetChoices,(function(t){return i("optgroup",{key:t,attrs:{label:t}},e._l(e.numericColumnsInDataset(t),(function(e){return i("option",{attrs:{label:e},domProps:{value:`${t}/${e}`}})})),0)}))],2)],1)]),e.datasetChoices.length>1?i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[e._v("Join by")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:e.join,callback:function(t){e.join=t},expression:"join"}},[i("option",{attrs:{label:"None",value:""}}),i("option",{attrs:{label:"Row count",value:"@count"}}),i("optgroup",{attrs:{label:"Join by..."}},e._l(e.columnsInDataset((null===(t=e.dataColumn)||void 0===t?void 0:t.slice(0,e.dataColumn.indexOf("/")))||[]),(function(t){return i("option",{key:t,attrs:{label:t},domProps:{value:t}})})),0)])],1)]):e._e(),i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",[e._v("Scaling")]),i("b-field",[i("b-input",{attrs:{disabled:!e.dataColumn,placeholder:"1.0"},model:{value:e.scaleFactor,callback:function(t){e.scaleFactor=t},expression:"scaleFactor"}})],1)],1)])])}),[],!1,gt,"2f0ecc4c",null,null);function gt(t){for(let e in vt)this[e]=vt[e]}var Ct=function(){return mt.exports}(),_t=s({props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>{const t=["Categories","==","!=","<=",">=","<",">"];return{OPERATORS:t,filters:{},addDataColumn:null,addOperator:t[0],addValue:"",datasetLabels:[]}},mounted(){this.datasetsAreLoaded(),this.vizConfigChanged()},watch:{filters(){this.emitSpecification()},vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()}},computed:{filterIds(){return Object.keys(this.filters)},datasetChoices(){return this.datasetLabels.filter((t=>"XcsvBase"!==t)).reverse()}},methods:{eraseFields(){this.addDataColumn=null,this.addOperator=this.OPERATORS[0],this.addValue=""},clickedCancel(){this.eraseFields()},clickedAddFilter(){let[t,e]=this.addDataColumn?this.addDataColumn.split("@"):["",""];this.datasetLabels.indexOf(t)<1&&(t="shapes"),this.addOperator===this.OPERATORS[0]&&(this.addValue="");const n={dataset:t,column:e,operator:this.addOperator,value:this.addValue};this.filters[`${t}.${e}`]=n,this.filters=Object.assign({},this.filters),this.eraseFields()},clickedRemoveFilter(t){delete this.filters[t],this.filters=Object.assign({},this.filters)},vizConfigChanged(){if(this.filters={},!this.vizConfiguration.filters)return;let t=JSON.parse(JSON.stringify(this.vizConfiguration.filters));if(Array.isArray(t)){const e={};t.forEach((t=>Object.assign(e,t))),t=e}for(const e of Object.keys(t)){const[n,i]=e.split(".");if(null==i){this.$store.commit("error",`Filter key is not "dataset.column": ${e}`);continue}const r={dataset:n,column:i,operator:"",value:t[e]};r.value===this.OPERATORS[0]&&(r.column=r.column.substring(0,r.column.length-1),r.operator=this.OPERATORS[0]),i.endsWith("!")&&(r.column=r.column.substring(0,r.column.length-1),r.operator="!=");for(const t of["<=",">=","<",">"])if("string"==typeof r.value&&r.value.startsWith(t)){r.value=r.value.substring(t.length).trim(),r.operator=t;break}this.filters[`${r.dataset}.${r.column}`]=r}this.datasetLabels=[...this.datasetLabels]},datasetsAreLoaded(){const t=Object.keys(this.datasets);this.datasetLabels=t},emitSpecification(){const t={};for(const e of Object.keys(this.filters)){const n=Object.assign({},this.filters[e]);let i=`${n.dataset}.${n.column}`;"!="===n.operator&&(i+="!"),n.operator===this.OPERATORS[0]&&(n.value="@categorical"),(n.operator.startsWith("<")||n.operator.startsWith(">"))&&(n.value=`${n.operator} ${n.value}`),t[i]=n.value}setTimeout((()=>this.$emit("update",{filters:t})),25)},numericColumnsInDataset(t){const e=this.datasets[t];if(!e)return[];return Object.keys(e).filter((t=>e[t].type!==d.LOOKUP))}}});const yt={};var bt=c(_t,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"width-panel"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.filterIds.length,expression:"filterIds.length"}],staticClass:"widgets"},[n("div",{staticClass:"widget"},[n("h4",[t._v("Active Filters")]),n("div",{staticClass:"filter-items"},t._l(t.filterIds,(function(e){return n("div",{key:e,staticClass:"active-filter filter-details"},[n("p",{staticClass:"stretch"},[n("b",[t._v(t._s(t.filters[e].dataset)+": ")]),t.filters[e].operator==t.OPERATORS[0]?n("span",[t._v("by ")]):t._e(),t._v(t._s(`${t.filters[e].column}`)),t.filters[e].operator!==t.OPERATORS[0]?n("span",[t._v(" "+t._s(`${t.filters[e].operator} ${t.filters[e].value}`))]):t._e()]),n("div",{staticClass:"span close-button",on:{click:function(n){return t.clickedRemoveFilter(e)}}},[t._v("×")])])})),0)])]),n("div",{staticClass:"widgets"},[n("div",{staticClass:"widget boop"},[n("h4",[t._v("Add New Filter")]),n("b-select",{staticClass:"tight selector",attrs:{expanded:"",placeholder:"Select..."},model:{value:t.addDataColumn,callback:function(e){t.addDataColumn=e},expression:"addDataColumn"}},t._l(t.datasetChoices,(function(e){return n("optgroup",{key:e,attrs:{label:e}},t._l(t.numericColumnsInDataset(e),(function(t){return n("option",{attrs:{label:t},domProps:{value:`${e}@${t}`}})})),0)})),0),t.addDataColumn?n("div",{staticClass:"filter-details2"},[n("b-select",{staticClass:"operator",attrs:{expanded:""},model:{value:t.addOperator,callback:function(e){t.addOperator=e},expression:"addOperator"}},t._l(t.OPERATORS,(function(t){return n("option",{attrs:{label:t},domProps:{value:t}})})),0),t.addOperator!==t.OPERATORS[0]?n("b-field",[n("b-input",{attrs:{placeholder:"1.0"},model:{value:t.addValue,callback:function(e){t.addValue=e},expression:"addValue"}})],1):t._e()],1):t._e(),t.addDataColumn?n("div",{staticClass:"button-bar"},[n("button",{staticClass:"button add-button is-small is-inverted",on:{click:t.clickedCancel}},[t._v("Cancel")]),t.addDataColumn?n("button",{staticClass:"button add-button is-small is-primary",attrs:{disabled:t.addOperator!==t.OPERATORS[0]&&""===t.addValue},on:{click:t.clickedAddFilter}},[t._v("  Add  ")]):t._e()]):t._e()],1)])])}),[],!1,wt,"704b81ff",null,null);function wt(t){for(let e in yt)this[e]=yt[e]}var St=s({name:"VizConfigurator",components:{AddDatasetsPanel:A,CircleRadiusPanel:Ct,ColorPanel:U,WidthPanel:H,FillColorPanel:it,FillHeightPanel:lt,LegendBox:y,LineColorPanel:Y,LineWidthPanel:ht,FiltersPanel:function(){return bt.exports}()},props:{vizDetails:{type:Object,required:!0},datasets:{type:Object,required:!0},fileSystem:{type:Object,required:!0},subfolder:{type:String,required:!0},yamlConfig:{type:String},legendStore:{type:Object,required:!0},filterDefinitions:{type:Object,required:!0},sections:{type:Array},embedded:Boolean},data:()=>({showPanels:!1,showLegend:!1,activeSection:"",showAddDatasets:!1,selectedExportAction:"",layer:{general:{type:"links",dataset:"network.geojson",columns:{}},display:{lineColor:{},color:{},lineWidth:{},radius:{},fill:{},label:{},fillHeight:{}}}}),mounted(){this.activeSection=this.sections?this.sections[0]:"color",this.embedded&&(this.showLegend=!0)},computed:{vizConfiguration(){return{datasets:this.vizDetails.datasets,display:this.vizDetails.display,filters:this.vizDetails.filters}},fidgetSections(){return Object.keys(this.layer.display)}},methods:{getSections(){return this.sections?this.sections.map((t=>({component:S.exports.startCase(t.replaceAll("-"," ")).replaceAll(" ","")+"Panel",name:t.replaceAll("-"," ")}))):[{component:"ColorPanel",name:"color"},{component:"WidthPanel",name:"width"}]},clickedShowHide(){this.showPanels=!this.showPanels},clickedLegendShowHide(){this.showLegend=!this.showLegend},clickedSection(t){t===this.activeSection?this.activeSection="":this.activeSection=t},async handleConfigChanged(t){this.showAddDatasets=!1,await this.$nextTick(),this.$emit("update",t)},clickedAddData(){this.showAddDatasets=!0},async clickedExport(){await this.$nextTick(),"yaml"==this.selectedExportAction?this.exportYaml():"png"==this.selectedExportAction&&this.$emit("screenshot"),this.selectedExportAction=""},exportYaml(){var t,e,n,i,r,o,s,u,c,f,d;let h="viz-viztype-config.yaml";const p=(null==(t=this.yamlConfig)?void 0:t.toLocaleLowerCase())||"";(p.endsWith("yaml")||p.endsWith("yml"))&&(h=this.yamlConfig||"viz-viztype-config.yaml"),p.endsWith("shp")&&(h=`viz-map-${p}.yaml`);const v=prompt("Export filename:",h);if(!v)return;const m={title:this.vizDetails.title,description:this.vizDetails.description,zoom:Math.round(10*this.$store.state.viewState.zoom)/10,pitch:Math.round(this.$store.state.viewState.pitch),bearing:Math.round(this.$store.state.viewState.bearing),center:[Math.round(100*this.$store.state.viewState.center[0])/100,Math.round(100*this.$store.state.viewState.center[1])/100],network:this.vizDetails.network||this.vizDetails.geojsonFile,projection:this.vizDetails.projection,showDifferences:this.vizDetails.showDifferences,sampleRate:this.vizDetails.sampleRate,shapes:(null==(e=this.vizDetails.shapes)?void 0:e.file)||this.vizDetails.shapes,datasets:a({},this.vizDetails.datasets),display:a({},this.vizDetails.display),filters:{}};"object"==typeof this.vizDetails.shapes&&this.vizDetails.shapes.join&&(m.shapes={file:m.shapes,join:this.vizDetails.shapes.join}),this.$store.state.viewState.bearing||delete m.bearing,this.$store.state.viewState.pitch||delete m.pitch;const g="string"==typeof m.shapes?null==(n=null==m?void 0:m.shapes)?void 0:n.substring(1+m.shapes.lastIndexOf("/")):null==(r=null==(i=null==m?void 0:m.shapes)?void 0:i.file)?void 0:r.substring(1+m.shapes.file.lastIndexOf("/")||0);m.datasets[g]&&delete m.datasets[g];for(const a of Object.keys(m))m[a]||delete m[a];m.display.color&&(null==(s=null==(o=m.display.color)?void 0:o.colorRamp)||delete s.style,null==(u=m.display.color)||delete u.fixedColors),m.display.fill&&(m.display.fill.colorRamp?(null==(c=m.display.fill.colorRamp)||delete c.style,delete m.display.fill.fixedColors,m.display.fill.colorRamp.reverse||delete m.display.fill.colorRamp.reverse):(delete m.display.fill.filters,delete m.display.fill.dataset,delete m.display.fill.columnName)),m.display.lineColor&&(console.log(555,m.display.lineColor),m.display.lineColor.fixedColors&&""===m.display.lineColor.fixedColors[0]?m.display.lineColor=!1:m.display.lineColor.colorRamp?(null==(f=m.display.lineColor.colorRamp)||delete f.style,delete m.display.lineColor.fixedColors,m.display.lineColor.colorRamp.reverse||delete m.display.lineColor.colorRamp.reverse):(delete m.display.lineColor.dataset,delete m.display.lineColor.columnName));for(const a of["fill","lineColor","lineWidth"]){const t=m.display[a];if(t&&(t.normalize||delete t.normalize,t.relative||delete t.relative,t.diffDatasets)){t.diff=`${t.diffDatasets[0]} - ${t.diffDatasets[1]}`,delete t.dataset,delete t.diffDatasets;const e={diff:t.diff,columnName:t.columnName};t.relative&&(e.relative=!0),m.display[a]=Object.assign(e,t)}}if(m.datasets)for(const[a,l]of Object.entries(m.datasets))"object"==typeof l.file&&(m.datasets[a].file=(null==(d=l.file)?void 0:d.name)||l.file||a),"object"==typeof l&&(delete m.datasets[a].join,1==Object.keys(m.datasets[a]).length&&m.datasets[a].file&&(m.datasets[a]=m.datasets[a].file));for(const a of Object.entries(m.display))!1!==a[1]&&(Object.keys(a[1]).length||delete m.display[a[0]]);Object.keys(this.filterDefinitions).length?m.filters=Object.assign({},this.filterDefinitions):delete m.filters;const C=l.stringify(m,{indent:4,simpleKeys:!0});var _=document.createElement("a");_.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(C)),_.setAttribute("download",v),_.style.display="none",document.body.appendChild(_),_.click(),document.body.removeChild(_)}}});const xt={};var kt=c(St,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"viz-configurator"},[n("div",{staticClass:"map-actions"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!t.embedded,expression:"!embedded"}],staticClass:"button draw-button is-tiny",class:{"is-showing":t.showPanels},attrs:{title:"Config"},on:{click:t.clickedShowHide}},[n("i",{staticClass:"fa fa-sliders-h settings-icon"})]),n("button",{staticClass:"button draw-button is-tiny",class:{"is-showing":t.showLegend},attrs:{title:"Legend"},on:{click:t.clickedLegendShowHide}},[n("i",{staticClass:"fa fa-info settings-icon"})])]),n("div",{staticClass:"right-panels"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showPanels&&!t.showAddDatasets,expression:"showPanels && !showAddDatasets"}],staticClass:"configuration-panels"},[n("div",{staticClass:"section-panel"},[n("div",{staticClass:"actions"},[n("b-dropdown",{attrs:{"aria-role":"list",position:"is-bottom-left","close-on-click":!0},on:{change:t.clickedExport},scopedSlots:t._u([{key:"trigger",fn:function(e){return e.active,[n("b-button",{staticClass:"is-small is-white export-button"},[n("i",{staticClass:"fa fa-sm fa-share"}),t._v(" Export")])]}}]),model:{value:t.selectedExportAction,callback:function(e){t.selectedExportAction=e},expression:"selectedExportAction"}},[n("b-dropdown-item",{attrs:{value:"yaml","aria-role":"listitem"}},[t._v("Save YAML config")]),n("b-dropdown-item",{attrs:{value:"png","aria-role":"listitem"}},[t._v("Take screenshot")])],1),n("b-button",{staticClass:"is-small is-white export-button",on:{click:t.clickedAddData}},[n("i",{staticClass:"fa fa-sm fa-plus"}),t._v(" Add Data")])],1)]),t._l(t.getSections(),(function(e){return n("div",{key:e.name,staticClass:"section-panel"},[n("h1",{class:{h1active:e.name===t.activeSection},on:{click:function(n){return t.clickedSection(e.name)}}},[t._v(t._s(e.name))]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.name===t.activeSection,expression:"section.name===activeSection"}],staticClass:"symbology-panel",class:{active:e.name===t.activeSection}},[e.component?n(e.component,{tag:"component",attrs:{vizConfiguration:t.vizConfiguration,datasets:t.datasets},on:{update:t.handleConfigChanged}}):n("p",[t._v("To be added")])],1)])}))],2),n("div",{staticClass:"legend-area"},[n("legend-box",{directives:[{name:"show",rawName:"v-show",value:t.showLegend,expression:"showLegend"}],staticClass:"legend-panel",attrs:{legendStore:t.legendStore}})],1)]),t.showAddDatasets?n("add-datasets-panel",{attrs:{vizConfiguration:t.vizConfiguration,fileSystem:t.fileSystem,subfolder:t.subfolder},on:{update:t.handleConfigChanged}}):t._e()],1)}),[],!1,jt,"ef1acc78",null,null);function jt(t){for(let e in xt)this[e]=xt[e]}var Ot=function(){return kt.exports}();export{Ot as V};
//# sourceMappingURL=VizConfigurator.a07eac42.js.map
