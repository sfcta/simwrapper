{"version":3,"file":"timer.8d793420.js","sources":["../../node_modules/d3-dispatch/src/dispatch.js","../../node_modules/d3-timer/src/timer.js"],"sourcesContent":["var noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n"],"names":["noop","value","dispatch","t","i","n","arguments","length","_","test","Error","Dispatch","this","parseTypenames","typenames","types","trim","split","map","name","indexOf","slice","hasOwnProperty","type","get","c","set","callback","concat","push","prototype","constructor","on","typename","T","copy","call","that","args","Array","apply","taskHead","taskTail","frame","timeout","interval","clockLast","clockNow","clockSkew","clock","performance","now","Date","setFrame","window","requestAnimationFrame","bind","f","setTimeout","clearNow","Timer","_call","_time","_next","timer","delay","time","restart","wake","e","timerFlush","t0","t2","t1","Infinity","sleep","nap","poke","now2","clearTimeout","clearInterval","setInterval","TypeError","stop"],"mappings":"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"}