var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,a=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,s=(e,t,r)=>(a(e,"symbol"!=typeof t?t+"":t,r),r);import{j as i,h as o,R as c,d as u,r as l}from"./vendor.e9c367ae.js";import{d as p}from"./index.e02ae17f.js";import{r as f}from"./index.a906c0e7.js";import{b as d}from"./index.3d2ad359.js";import{c as h}from"./index.0d83a8f9.js";import{d as b,b as m,p as y}from"./index.991028d3.js";import{n as v,g,M as k,R as x,C as w,L as A}from"./index.2deacc07.js";import{C as T}from"./CollapsiblePanel.58a8eae6.js";import{P as S,a as O,I as j,b as P}from"./PathTraceLayer.8ed3807c.js";import{Z as E}from"./ZoomButtons.e860a156.js";import{H as _}from"./HTTPFileSystem.e57ad358.js";import{W as C,I as L}from"./moving-icons-vehicles-layer.02757695.js";import{D as M}from"./DashboardDataManager.e0d06cdd.js";import{W as F}from"./GzipFetcher.worker.4da801f6.js";import{a as R}from"./util.b5d45f97.js";import{D as B,S as I}from"./deckgl.61194435.js";import{A as D}from"./arc-layer.bf091b3d.js";import{A as Y,L as N}from"./layer.b20bd88e.js";import"./index.01e94811.js";import"./index.84f8ccb6.js";import"./icon-manager.2c4c9b5c.js";import"./line-layer.600fa289.js";import"./RoadNetworkLoader.worker.30fe4a65.js";import"./index.5877f313.js";import"./extends.f4cf4404.js";var q,U={},z={exports:{}};(q=z).exports=function(e){return e&&e.__esModule?e:{default:e}},q.exports.__esModule=!0,q.exports.default=q.exports;var $={exports:{}},G={exports:{}},V={exports:{}};!function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports}(V),function(e){var t=V.exports;e.exports=function(e){if(Array.isArray(e))return t(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(G);var H={exports:{}};!function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(H);var W={exports:{}};!function(e){var t=V.exports;e.exports=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}(W);var J={exports:{}};!function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}(J),function(e){var t=G.exports,r=H.exports,n=W.exports,a=J.exports;e.exports=function(e){return t(e)||r(e)||n(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports}($);var Z={exports:{}},K={exports:{}};!function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(K),function(e){var t=K.exports.default;function r(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
e.exports=r=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var n={},a=Object.prototype,s=a.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(E){l=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var a,s,i,o,c=t&&t.prototype instanceof h?t:h,u=Object.create(c.prototype),l=new O(n||[]);return u._invoke=(a=e,s=r,i=l,o="suspendedStart",function(e,t){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===e)throw t;return{value:void 0,done:!0}}for(i.method=e,i.arg=t;;){var r=i.delegate;if(r){var n=A(r,i);if(n){if(n===d)continue;return n}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===o)throw o="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o="executing";var c=f(a,s,i);if("normal"===c.type){if(o=i.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(o="completed",i.method="throw",i.arg=c.arg)}}),u}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(E){return{type:"throw",arg:E}}}n.wrap=p;var d={};function h(){}function b(){}function m(){}var y={};l(y,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(j([])));g&&g!==a&&s.call(g,o)&&(y=g);var k=m.prototype=h.prototype=Object.create(y);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,r){function n(a,i,o,c){var u=f(e[a],e,i);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==t(p)&&s.call(p,"__await")?r.resolve(p.__await).then((function(e){n("next",e,o,c)}),(function(e){n("throw",e,o,c)})):r.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,c)}))}c(u.arg)}var a;this._invoke=function(e,t){function s(){return new r((function(r,a){n(e,t,r,a)}))}return a=a?a.then(s,s):s()}}function A(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function j(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(s.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:P}}function P(){return{value:void 0,done:!0}}return b.prototype=m,l(k,"constructor",m),l(m,"constructor",b),b.displayName=l(m,u,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},n.awrap=function(e){return{__await:e}},x(w.prototype),l(w.prototype,c,(function(){return this})),n.AsyncIterator=w,n.async=function(e,t,r,a,s){void 0===s&&(s=Promise);var i=new w(p(e,t,r,a),s);return n.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(k),l(k,u,"Generator"),l(k,o,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},n.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var o=s.call(a,"catchLoc"),c=s.call(a,"finallyLoc");if(o&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(Z);var X=Z.exports(),Q=X;try{regeneratorRuntime=X}catch(Lt){"object"==typeof globalThis?globalThis.regeneratorRuntime=X:Function("r","regeneratorRuntime = r")(X)}var ee={},te={exports:{}};!function(e){function t(e,t,r,n,a,s,i){try{var o=e[s](i),c=o.value}catch(u){return void r(u)}o.done?t(c):Promise.resolve(c).then(n,a)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(a,s){var i=e.apply(r,n);function o(e){t(i,a,s,o,c,"next",e)}function c(e){t(i,a,s,o,c,"throw",e)}o(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports}(te);var re={},ne={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getCallback=function(){if(a)return a;if("undefined"==typeof window)return o();var e=[],t=function(t){e.push(t)};return function(){function t(){var r=Date.now();setTimeout((function(){return function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100;requestAnimationFrame(t);for(var a,s={timeRemaining:function(){return 14-(Date.now()-n)}};0<e.length&&1<s.timeRemaining();){a=e.pop();try{a(s)}catch(r){console.error(r)}}}(r)}))}requestAnimationFrame(t)}(),a=t,t},e.getNodeCallback=o;var t=!1;if("undefined"!=typeof navigator&&"ReactNative"===navigator.product)try{if(!t&&i&&!i.requestIdleCallback){t=!0;var r=[];i.requestIdleCallback=function(e){r.push(e)},function(){function e(){var t=Date.now();setImmediate((function(){return function(){for(var n,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,s={timeRemaining:function(){return 15-(Date.now()-a)}};0<r.length&&1<s.timeRemaining();){n=r.pop();try{n(s)}catch(t){console.error(t)}}requestAnimationFrame(e)}(t)}))}requestAnimationFrame(e)}()}}catch(u){}try{if(!t&&"undefined"!=typeof window&&!window.requestIdleCallback){t=!0;var n=[];window.requestIdleCallback=function(e){n.push(e)},function(){function e(){var t=Date.now();setTimeout((function(){return function(){for(var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,a={timeRemaining:function(){return 14-(Date.now()-r)}};0<n.length&&1<a.timeRemaining();){var s=n.pop();try{s(a)}catch(t){console.error(t)}}requestAnimationFrame(e)}(t)}))}requestAnimationFrame(e)}()}}catch(u){console.error(u)}var a=null;var s=[];function o(){if(a)return a;var e=function(e){s.push(e)};return setTimeout(c),a=e,e}function c(){for(var e=Date.now(),t={timeRemaining:function(){return 20-(Date.now()-e)}};0<s.length&&1<t.timeRemaining();){var r=s.pop();try{r(t)}catch(n){console.error(n)}}s.length?setImmediate(c):setTimeout(c,50)}}(ne),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.useInternalEngine=function(n){e.request=r=n?(0,t.getCallback)():r},e.request=void 0;var t=ne,r="undefined"==typeof window?(0,t.getNodeCallback)():window.requestIdleCallback;e.request=r}(re),function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.run=i,e.default=void 0;var r=t(Q),n=t(te.exports),a=re,s=1.75;function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,i=2<arguments.length?arguments[2]:void 0,o=!1,c=null,u=new Promise((function(u,l){function p(){return f.apply(this,arguments)}function f(){return(f=(0,n.default)(r.default.mark((function e(n){var c,f,v,g;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,y=!0,clearTimeout(b),!o){e.next=8;break}return h.return(),e.abrupt("return");case 8:c=Math.max(s,t),e.prev=9;case 10:if(!(n.timeRemaining()>c)){e.next=29;break}return e.t0=h,e.next=14,m;case 14:if(e.t1=e.sent,f=e.t0.next.call(e.t0,e.t1),v=f.value,g=f.done,m=void 0,!g){e.next=22;break}return u(v),e.abrupt("return");case 22:if(!0!==v){e.next=26;break}return e.abrupt("break",29);case 26:"number"==typeof v?(c=+v,isNaN(c)&&(c=s)):v&&v.then&&(m=v);case 27:e.next=10;break;case 29:e.next=36;break;case 31:return e.prev=31,e.t2=e.catch(9),console.error(e.t2),l(e.t2),e.abrupt("return");case 36:(0,a.request)(p),i&&(b=setTimeout(d,i));case 38:return e.prev=38,y=!1,e.finish(38);case 41:case"end":return e.stop()}}),e,null,[[2,,38,41],[9,31]])})))).apply(this,arguments)}function d(){var e=Date.now();p({timeout:!0,timeRemaining:function(){return 12.5-(Date.now()-e)}})}c=u;var h=e.next?e:e();(0,a.request)(p);var b=0,m=void 0,y=!1}));return u.terminate=function(e){o=!0,c&&c(e)},u}var o=i;e.default=o}(ee);var ae,se={};ae=se,Object.defineProperty(ae,"__esModule",{value:!0}),ae.call=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return e.apply(this,[].concat(n,r))}},function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.yielding=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:16,r=0;if(e._yielding)return e;var a=n.default.mark((function(){var a,s=arguments;return n.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a=e.apply(void 0,s))||!a.then){n.next=5;break}return n.next=4,a;case 4:a=n.sent;case 5:if(r++%t!=0){n.next=8;break}return void(n.next=8);case 8:return n.abrupt("return",a);case 9:case"end":return n.stop()}}),a)}));return a._yielding=!0,a},e.wrapAsPromise=function(e){var t=function(){return(0,a.default)(e.apply(void 0,arguments))};return t.with=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return s.call.apply(void 0,[t].concat(r))},t},e.curryRight=function e(t,n,a){return t.length>n.length?function(){for(var s=arguments.length,i=Array(s),o=0;o<s;o++)i[o]=arguments[o];return e.call(this,t,[].concat(i,(0,r.default)(n)),a)}:a.apply(this,n)};var r=t($.exports),n=t(Q),a=t(ee),s=se}(U);var ie=o(Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}))),oe={},ce={},ue={};!function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.wrapAsPromiseAndYieldFn=function(e){var t=function(t,a){for(var s=arguments.length,i=Array(2<s?s-2:0),o=2;o<s;o++)i[o-2]=arguments[o];return(0,n.default)(e.apply(void 0,[t,(0,r.yielding)(a)].concat(i)))};return t.with=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return a.call.apply(void 0,[t].concat(r))},t};var r=U,n=t(ee),a=se}(ue);var le={},pe={},fe={};!function(e){var t=(0,z.exports)(K.exports);Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=function(e){return"object"===(0,t.default)(e)&&!Array.isArray(e)}}(fe);var de={},he={exports:{}};!function(e){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports}(he),function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.exitWith=function(e){var t;return t={},(0,r.default)(t,n,!0),(0,r.default)(t,"value",e),t},e.doReturn=void 0;var r=t(he.exports),n=Symbol("return");e.doReturn=n}(de),function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=i;var r=t(Q),n=fe,a=de,s=r.default.mark(i);function i(e,t,i){var o,c,u,l,p,f;return r.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!(0,n.isObject)(e)){s.next=16;break}o=!i,s.t0=r.default.keys(e);case 3:if((s.t1=s.t0()).done){s.next=14;break}if(c=s.t1.value,o||(o=c===i),!o){s.next=12;break}if(!Object.prototype.hasOwnProperty.call(e,c)){s.next=12;break}return s.delegateYield(t(e[c],c,e),"t2",9);case 9:if(!(u=s.t2)||!u[a.doReturn]){s.next=12;break}return s.abrupt("return",u.value);case 12:s.next=3;break;case 14:s.next=25;break;case 16:l=i||0,p=e.length;case 17:if(!(l<p)){s.next=25;break}return s.delegateYield(t(e[l],l,e),"t3",19);case 19:if(!(f=s.t3)||!f[a.doReturn]){s.next=22;break}return s.abrupt("return",f.value);case 22:l++,s.next=17;break;case 25:case"end":return s.stop()}}),s)}}(pe),function(e){var t=Q,r=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.every=o;var n=r(Q),a=pe,s=de,i=t.mark(o);function o(e,t){var r;return n.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=!0,i.delegateYield((0,a.forEach)(e,n.default.mark((function a(i,o){return n.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(t(i,o,e),"t0",1);case 1:if(n.t0){n.next=4;break}return r=!1,n.abrupt("return",(0,s.exitWith)(!1));case 4:case"end":return n.stop()}}),a)}))),"t0",2);case 2:return i.abrupt("return",r);case 3:case"end":return i.stop()}}),i)}}(le),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.everyAsync=void 0;var t=(0,ue.wrapAsPromiseAndYieldFn)(le.every);e.everyAsync=t}(ce);var be={},me={};!function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.Base64StringGenerator=void 0;var r=t(Q),n=String.fromCharCode,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s={compressToUTF16:r.default.mark((function e(t){var a,s,i,o,c;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],c=0,e.delegateYield(this.compress(t),"t0",2);case 2:t=e.t0,s=0;case 4:if(!(s<t.length)){e.next=61;break}if(0!=(511&s)){e.next=8;break}return void(e.next=8);case 8:i=t.charCodeAt(s),e.t1=c++,e.next=0===e.t1?12:1===e.t1?15:2===e.t1?18:3===e.t1?21:4===e.t1?24:5===e.t1?27:6===e.t1?30:7===e.t1?33:8===e.t1?36:9===e.t1?39:10===e.t1?42:11===e.t1?45:12===e.t1?48:13===e.t1?51:14===e.t1?54:57;break;case 12:return a.push(n(32+(i>>1))),o=(1&i)<<14,e.abrupt("break",58);case 15:return a.push(n(o+(i>>2)+32)),o=(3&i)<<13,e.abrupt("break",58);case 18:return a.push(n(o+(i>>3)+32)),o=(7&i)<<12,e.abrupt("break",58);case 21:return a.push(n(o+(i>>4)+32)),o=(15&i)<<11,e.abrupt("break",58);case 24:return a.push(n(o+(i>>5)+32)),o=(31&i)<<10,e.abrupt("break",58);case 27:return a.push(n(o+(i>>6)+32)),o=(63&i)<<9,e.abrupt("break",58);case 30:return a.push(n(o+(i>>7)+32)),o=(127&i)<<8,e.abrupt("break",58);case 33:return a.push(n(o+(i>>8)+32)),o=(255&i)<<7,e.abrupt("break",58);case 36:return a.push(n(o+(i>>9)+32)),o=(511&i)<<6,e.abrupt("break",58);case 39:return a.push(n(o+(i>>10)+32)),o=(1023&i)<<5,e.abrupt("break",58);case 42:return a.push(n(o+(i>>11)+32)),o=(2047&i)<<4,e.abrupt("break",58);case 45:return a.push(n(o+(i>>12)+32)),o=(4095&i)<<3,e.abrupt("break",58);case 48:return a.push(n(o+(i>>13)+32)),o=(8191&i)<<2,e.abrupt("break",58);case 51:return a.push(n(o+(i>>14)+32)),o=(16383&i)<<1,e.abrupt("break",58);case 54:return a.push(n(o+(i>>15)+32,32+(32767&i))),c=0,e.abrupt("break",58);case 57:return e.abrupt("break",58);case 58:s++,e.next=4;break;case 61:return a.push(n(o+32)),e.abrupt("return",a.join(""));case 63:case"end":return e.stop()}}),e,this)})),decompressFromUTF16:r.default.mark((function e(t){var a,s,i,o,c;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],o=0,c=0;case 1:if(!(c<t.length)){e.next=60;break}if(0!==(c&&511)){e.next=5;break}return void(e.next=5);case 5:i=t.charCodeAt(c)-32,e.t0=o++,e.next=0===e.t0?9:1===e.t0?11:2===e.t0?14:3===e.t0?17:4===e.t0?20:5===e.t0?23:6===e.t0?26:7===e.t0?29:8===e.t0?32:9===e.t0?35:10===e.t0?38:11===e.t0?41:12===e.t0?44:13===e.t0?47:14===e.t0?50:15===e.t0?53:56;break;case 9:return s=i<<1,e.abrupt("break",57);case 11:return a.push(n(s|i>>14)),s=(16383&i)<<2,e.abrupt("break",57);case 14:return a.push(n(s|i>>13)),s=(8191&i)<<3,e.abrupt("break",57);case 17:return a.push(n(s|i>>12)),s=(4095&i)<<4,e.abrupt("break",57);case 20:return a.push(n(s|i>>11)),s=(2047&i)<<5,e.abrupt("break",57);case 23:return a.push(n(s|i>>10)),s=(1023&i)<<6,e.abrupt("break",57);case 26:return a.push(n(s|i>>9)),s=(511&i)<<7,e.abrupt("break",57);case 29:return a.push(n(s|i>>8)),s=(255&i)<<8,e.abrupt("break",57);case 32:return a.push(n(s|i>>7)),s=(127&i)<<9,e.abrupt("break",57);case 35:return a.push(n(s|i>>6)),s=(63&i)<<10,e.abrupt("break",57);case 38:return a.push(n(s|i>>5)),s=(31&i)<<11,e.abrupt("break",57);case 41:return a.push(n(s|i>>4)),s=(15&i)<<12,e.abrupt("break",57);case 44:return a.push(n(s|i>>3)),s=(7&i)<<13,e.abrupt("break",57);case 47:return a.push(n(s|i>>2)),s=(3&i)<<14,e.abrupt("break",57);case 50:return a.push(n(s|i>>1)),s=(1&i)<<15,e.abrupt("break",57);case 53:return a.push(n(s|i)),o=0,e.abrupt("break",57);case 56:return e.abrupt("break",57);case 57:c++,e.next=1;break;case 60:return e.delegateYield(this.decompress(a.join("")),"t1",61);case 61:return e.abrupt("return",e.t1);case 62:case"end":return e.stop()}}),e,this)})),decompress:r.default.mark((function e(t){var n,s,i,o,c,u,l,p,f,d,h;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],f=1,d=t.charCodeAt(0)>>8,h=0;case 4:if(!(f<2*t.length&&(f<2*t.length-1||0===d))){e.next=21;break}if(0!=(511&h++)){e.next=8;break}return void(e.next=8);case 8:f%2==0?(s=t.charCodeAt(f/2)>>8,i=255&t.charCodeAt(f/2),o=f/2+1<t.length?t.charCodeAt(f/2+1)>>8:NaN):(s=255&t.charCodeAt((f-1)/2),(f+1)/2<t.length?(i=t.charCodeAt((f+1)/2)>>8,o=255&t.charCodeAt((f+1)/2)):i=o=NaN),f+=3,c=s>>2,u=(3&s)<<4|i>>4,l=(15&i)<<2|o>>6,p=63&o,isNaN(i)||f===2*t.length+1&&d?l=p=64:(isNaN(o)||f===2*t.length&&d)&&(p=64),n.push(a.charAt(c)),n.push(a.charAt(u)),n.push(a.charAt(l)),n.push(a.charAt(p)),e.next=4;break;case 21:return e.abrupt("return",n.join(""));case 22:case"end":return e.stop()}}),e)})),compress:r.default.mark((function e(t){var s,i,o,c,u,l,p,f,d,h,b,m;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=[],i=1,b=0,m=!1,t=t.replace(/[^A-Za-z0-9+/=]/g,"");case 2:if(!(b<t.length)){e.next=17;break}if(0!==(b&&1023)){e.next=6;break}return void(e.next=6);case 6:p=a.indexOf(t.charAt(b++)),f=a.indexOf(t.charAt(b++)),d=a.indexOf(t.charAt(b++)),h=a.indexOf(t.charAt(b++)),c=p<<2|f>>4,u=(15&f)<<4|d>>2,l=(3&d)<<6|h,i%2==0?(o=c<<8,m=!0,64!==d&&(s.push(n(o|u)),m=!1),64!==h&&(o=l<<8,m=!0)):(s.push(n(o|c)),m=!1,64!==d&&(o=u<<8,m=!0),64!==h&&(s.push(n(o|l)),m=!1)),i+=3,e.next=2;break;case 17:return void(e.next=19);case 19:return m?(s.push(n(o)),s=s.join(""),s=n(256|s.charCodeAt(0))+s.substring(1)):s=s.join(""),e.abrupt("return",s);case 21:case"end":return e.stop()}}),e)}))};e.Base64StringGenerator=s}(me);var ye={};!function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.LZStringGenerator=void 0;var r=t(Q),n=15,a=function(){function e(e,t){if(!i[e]){i[e]={};for(var r=0;r<e.length;r++)i[e][e.charAt(r)]=r}return i[e][t]}var t=String.fromCharCode,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={},o={compressToBase64:r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return","");case 2:return e.delegateYield(o._compress(t,6,(function(e){return a.charAt(e)})),"t0",3);case 3:n=e.t0,e.t1=n.length%4,e.next=0===e.t1?7:1===e.t1?8:2===e.t1?9:3===e.t1?10:7;break;case 7:return e.abrupt("return",n);case 8:return e.abrupt("return",n+"===");case 9:return e.abrupt("return",n+"==");case 10:return e.abrupt("return",n+"=");case 11:case"end":return e.stop()}}),e)})),decompressFromBase64:r.default.mark((function t(n){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==n){t.next=2;break}return t.abrupt("return","");case 2:if(""!==n){t.next=4;break}return t.abrupt("return",null);case 4:return t.delegateYield(o._decompress(n.length,32,(function(t){return e(a,n.charAt(t))})),"t0",5);case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}}),t)})),compressToUTF16:r.default.mark((function e(n){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n){e.next=2;break}return e.abrupt("return","");case 2:return e.delegateYield(o._compress(n,15,(function(e){return t(e+32)})),"t0",3);case 3:return e.t1=e.t0,e.abrupt("return",e.t1+" ");case 5:case"end":return e.stop()}}),e)})),decompressFromUTF16:r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return","");case 2:if(""!==t){e.next=4;break}return e.abrupt("return",null);case 4:return e.delegateYield(o._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32})),"t0",5);case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})),compressToUint8Array:r.default.mark((function e(t){var a,s,i,c,u;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(o.compress(t),"t0",1);case 1:return a=e.t0,s=new Uint8Array(2*a.length),void(e.next=5);case 5:i=0,c=a.length;case 6:if(!(i<c)){e.next=16;break}if(0!=(i&n)){e.next=10;break}return void(e.next=10);case 10:u=a.charCodeAt(i),s[2*i]=u>>>8,s[2*i+1]=u%256;case 13:i++,e.next=6;break;case 16:return e.abrupt("return",s);case 17:case"end":return e.stop()}}),e)})),decompressFromUint8Array:r.default.mark((function e(t){var a,s,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=5;break}return e.delegateYield(o.decompress(t),"t0",2);case 2:return e.abrupt("return",e.t0);case 5:a=Array(t.length/2),s=0,i=a.length;case 7:if(!(s<i)){e.next=15;break}if(0!=(s&n)){e.next=11;break}return void(e.next=11);case 11:a[s]=256*t[2*s]+t[2*s+1];case 12:s++,e.next=7;break;case 15:return void(e.next=17);case 17:return e.delegateYield(o.decompress(a.join("")),"t1",18);case 18:return e.abrupt("return",e.t1);case 19:case"end":return e.stop()}}),e)})),compressToEncodedURIComponent:r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return","");case 2:return e.delegateYield(o._compress(t,6,(function(e){return s.charAt(e)})),"t0",3);case 3:return e.abrupt("return",e.t0);case 4:case"end":return e.stop()}}),e)})),decompressFromEncodedURIComponent:r.default.mark((function t(n){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==n){t.next=2;break}return t.abrupt("return","");case 2:if(""!==n){t.next=4;break}return t.abrupt("return",null);case 4:return n=n.replace(/ /g,"+"),t.delegateYield(o._decompress(n.length,32,(function(t){return e(s,n.charAt(t))})),"t0",6);case 6:return t.abrupt("return",t.t0);case 7:case"end":return t.stop()}}),t)})),compress:r.default.mark((function e(n){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(o._compress(n,16,(function(e){return t(e)})),"t0",1);case 1:return e.abrupt("return",e.t0);case 2:case"end":return e.stop()}}),e)})),_compress:r.default.mark((function e(t,a,s){var i,o,c,u,l,p,f,d,h,b,m,y,v,g;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return","");case 2:c={},u={},l="",p="",f="",d=2,h=3,b=2,m=[],y=0,v=0,g=0;case 4:if(!(g<t.length)){e.next=44;break}if(0!=(g&n)){e.next=8;break}return void(e.next=8);case 8:if(l=t.charAt(g),Object.prototype.hasOwnProperty.call(c,l)||(c[l]=h++,u[l]=!0),p=f+l,!Object.prototype.hasOwnProperty.call(c,p)){e.next=15;break}f=p,e.next=41;break;case 15:if(!Object.prototype.hasOwnProperty.call(u,f)){e.next=35;break}if(!(256>f.charCodeAt(0))){e.next=24;break}for(i=0;i<b;i++)y<<=1,v===a-1?(v=0,m.push(s(y)),y=0):v++;return o=f.charCodeAt(0),void(e.next=21);case 21:for(i=0;8>i;i++)y=y<<1|1&o,v===a-1?(v=0,m.push(s(y)),y=0):v++,o>>=1;e.next=30;break;case 24:for(o=1,i=0;i<b;i++)y=y<<1|o,v===a-1?(v=0,m.push(s(y)),y=0):v++,o=0;return o=f.charCodeAt(0),void(e.next=29);case 29:for(i=0;16>i;i++)y=y<<1|1&o,v===a-1?(v=0,m.push(s(y)),y=0):v++,o>>=1;case 30:0===--d&&(d=Math.pow(2,b),b++),delete u[f],e.next=37;break;case 35:for(o=c[f],i=0;i<b;i++)y=y<<1|1&o,v===a-1?(v=0,m.push(s(y)),y=0):v++,o>>=1;case 37:0===--d&&(d=Math.pow(2,b),b++),c[p]=h++,f=l+"";case 41:g+=1,e.next=4;break;case 44:if(""===f){e.next=71;break}if(!Object.prototype.hasOwnProperty.call(u,f)){e.next=67;break}if(!(256>f.charCodeAt(0))){e.next=54;break}for(i=0;i<b;i++)y<<=1,v===a-1?(v=0,m.push(s(y)),y=0):v++;return o=f.charCodeAt(0),void(e.next=51);case 51:for(i=0;8>i;i++)y=y<<1|1&o,v===a-1?(v=0,m.push(s(y)),y=0):v++,o>>=1;e.next=62;break;case 54:return o=1,void(e.next=57);case 57:for(i=0;i<b;i++)y=y<<1|o,v===a-1?(v=0,m.push(s(y)),y=0):v++,o=0;return o=f.charCodeAt(0),void(e.next=61);case 61:for(i=0;16>i;i++)y=y<<1|1&o,v===a-1?(v=0,m.push(s(y)),y=0):v++,o>>=1;case 62:0===--d&&(d=Math.pow(2,b),b++),delete u[f],e.next=69;break;case 67:for(o=c[f],i=0;i<b;i++)y=y<<1|1&o,v===a-1?(v=0,m.push(s(y)),y=0):v++,o>>=1;case 69:0===--d&&(d=Math.pow(2,b),b++);case 71:return o=2,void(e.next=74);case 74:for(i=0;i<b;i++)y=y<<1|1&o,v===a-1?(v=0,m.push(s(y)),y=0):v++,o>>=1;return void(e.next=77);case 77:if(y<<=1,v!==a-1){e.next=84;break}return m.push(s(y)),e.abrupt("break",87);case 84:v++;case 85:e.next=77;break;case 87:return e.next=89,!0;case 89:return e.abrupt("return",m.join(""));case 90:case"end":return e.stop()}}),e)})),decompress:r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return","");case 2:if(""!==t){e.next=4;break}return e.abrupt("return",null);case 4:return e.delegateYield(o._decompress(t.length,32768,(function(e){return t.charCodeAt(e)})),"t0",5);case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})),_decompress:r.default.mark((function e(a,s,i){var o,c,u,l,p,f,d,h,b,m,y,v,g,k,x;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=[],c=4,u=4,l=3,p="",f=[],k={val:i(0),position:s,index:1},d=0;3>d;d+=1)o[d]=d;for(b=0,y=Math.pow(2,2),v=1;v!==y;)m=k.val&k.position,k.position>>=1,0===k.position&&(k.position=s,k.val=i(k.index++)),b|=(0<m?1:0)*v,v<<=1;e.t0=b,e.next=0===e.t0?9:1===e.t0?15:2===e.t0?21:22;break;case 9:for(b=0,y=Math.pow(2,8),v=1;v!==y;)m=k.val&k.position,k.position>>=1,0===k.position&&(k.position=s,k.val=i(k.index++)),b|=(0<m?1:0)*v,v<<=1;return g=t(b),e.abrupt("break",23);case 15:for(b=0,y=Math.pow(2,16),v=1;v!==y;)m=k.val&k.position,k.position>>=1,0===k.position&&(k.position=s,k.val=i(k.index++)),b|=(0<m?1:0)*v,v<<=1;return g=t(b),e.abrupt("break",23);case 21:return e.abrupt("return","");case 22:return e.abrupt("break",23);case 23:o[3]=g,h=g,f.push(g),x=0;case 27:if(0!=(x++&n)){e.next=31;break}return void(e.next=31);case 31:if(!(k.index>a)){e.next=33;break}return e.abrupt("return","");case 33:b=0,y=Math.pow(2,l),v=1;case 36:if(v===y){e.next=47;break}if(0!=(x++&n)){e.next=40;break}return void(e.next=40);case 40:m=k.val&k.position,k.position>>=1,0===k.position&&(k.position=s,k.val=i(k.index++)),b|=(0<m?1:0)*v,v<<=1,e.next=36;break;case 47:e.t1=g=b,e.next=0===e.t1?50:1===e.t1?68:2===e.t1?86:87;break;case 50:b=0,y=Math.pow(2,8),v=1;case 53:if(v===y){e.next=64;break}if(0!=(x++&n)){e.next=57;break}return void(e.next=57);case 57:m=k.val&k.position,k.position>>=1,0===k.position&&(k.position=s,k.val=i(k.index++)),b|=(0<m?1:0)*v,v<<=1,e.next=53;break;case 64:return o[u++]=t(b),g=u-1,c--,e.abrupt("break",88);case 68:b=0,y=Math.pow(2,16),v=1;case 71:if(v===y){e.next=82;break}if(0!=(x++&n)){e.next=75;break}return void(e.next=75);case 75:m=k.val&k.position,k.position>>=1,0===k.position&&(k.position=s,k.val=i(k.index++)),b|=(0<m?1:0)*v,v<<=1,e.next=71;break;case 82:return o[u++]=t(b),g=u-1,c--,e.abrupt("break",88);case 86:return e.abrupt("return",f.join(""));case 87:return e.abrupt("break",88);case 88:if(0===c&&(c=Math.pow(2,l),l++),!o[g]){e.next=93;break}p=o[g],e.next=98;break;case 93:if(g!==u){e.next=97;break}p=h+h.charAt(0),e.next=98;break;case 97:return e.abrupt("return",null);case 98:f.push(p),o[u++]=h+p.charAt(0),c--,h=p,0===c&&(c=Math.pow(2,l),l++),e.next=27;break;case 105:case"end":return e.stop()}}),e)}))};return o}();e.LZStringGenerator=a}(ye),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.base64Decompress=e.base64decompressFromUTF16Async=e.decompressAsync=e.decompressFromEncodedURIComponentAsync=e.decompressFromUint8ArrayAsync=e.decompressFromUTF16Async=e.decompressFromBase64Async=e.base64Compress=e.base64CompressToUTF16Async=e.compressAsync=e.compressToEncodedURIComponentAsync=e.compressToUint8ArrayAsync=e.compressToUTF16Async=e.compressToBase64Async=void 0;var t=U,r=me,n=ye,a=(0,t.wrapAsPromise)(n.LZStringGenerator.compressToBase64);e.compressToBase64Async=a;var s=(0,t.wrapAsPromise)(n.LZStringGenerator.compressToUTF16);e.compressToUTF16Async=s;var i=(0,t.wrapAsPromise)(n.LZStringGenerator.compressToUint8Array);e.compressToUint8ArrayAsync=i;var o=(0,t.wrapAsPromise)(n.LZStringGenerator.compressToEncodedURIComponent);e.compressToEncodedURIComponentAsync=o;var c=(0,t.wrapAsPromise)(n.LZStringGenerator.compress);e.compressAsync=c;var u=(0,t.wrapAsPromise)(r.Base64StringGenerator.compressToUTF16);e.base64CompressToUTF16Async=u;var l=(0,t.wrapAsPromise)(r.Base64StringGenerator.compress);e.base64Compress=l;var p=(0,t.wrapAsPromise)(n.LZStringGenerator.decompressFromBase64);e.decompressFromBase64Async=p;var f=(0,t.wrapAsPromise)(n.LZStringGenerator.decompressFromUTF16);e.decompressFromUTF16Async=f;var d=(0,t.wrapAsPromise)(n.LZStringGenerator.decompressFromUint8Array);e.decompressFromUint8ArrayAsync=d;var h=(0,t.wrapAsPromise)(n.LZStringGenerator.decompressFromURIComponent);e.decompressFromEncodedURIComponentAsync=h;var b=(0,t.wrapAsPromise)(n.LZStringGenerator.decompress);e.decompressAsync=b;var m=(0,t.wrapAsPromise)(r.Base64StringGenerator.decompressFromUTF16);e.base64decompressFromUTF16Async=m;var y=(0,t.wrapAsPromise)(r.Base64StringGenerator.decompress);e.base64Decompress=y}(be);var ve={},ge={},ke={exports:{}};!function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}(ke);var xe={exports:{}};!function(e){function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}(xe);var we={},Ae={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TokenType=void 0;e.TokenType={LeftBrace:"{",RightBrace:"}",LeftBracket:"l",RightBracket:"r",Comma:"c",Colon:"n",Null:"0",Boolean:"t",Number:"n",String:"s"}}(Ae);var Te={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.yielder=function(){return!!(100<t++)&&(t=0,!0)};var t=0}(Te),function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.Tokenizer=void 0;var r=t(Q),n=t(ke.exports),a=t(xe.exports),s=Ae,i=Te,o=[10,13,32],c="init",u="null",l="boolean_true",p="boolean_false",f="number",d="string",h="escape",b={"[":s.TokenType.LeftBracket,"]":s.TokenType.RightBracket,"{":s.TokenType.LeftBrace,"}":s.TokenType.RightBrace,":":s.TokenType.Colon,",":s.TokenType.Comma},m={"[":c,"]":c,"{":c,"}":c,":":c,",":c,n:u,t:l,f:p,0:f,1:f,2:f,3:f,4:f,5:f,6:f,7:f,8:f,9:f,"-":f,'"':d},y=function(){function e(){(0,n.default)(this,e),this.state=c,this.pos=0,this.sourceCode="",this.tokens=[],this.curToken=""}return(0,a.default)(e,[{key:"tokenizeArray",value:r.default.mark((function e(t){var n,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.sourceCode=t,this.type="uint8",n=t.length;case 3:if(!(this.pos<n)){e.next=28;break}if(0!=(15&this.pos)||!(0,i.yielder)()){e.next=7;break}return void(e.next=7);case 7:a=this.readCharacter(),e.t0=this.state,e.next=e.t0===c?11:e.t0===u?13:e.t0===l?15:e.t0===p?17:e.t0===f?19:e.t0===d?21:e.t0===h?23:25;break;case 11:return this.initToken(a),e.abrupt("break",26);case 13:return this.handleTokenNull(a),e.abrupt("break",26);case 15:return this.handleTokenTrue(a),e.abrupt("break",26);case 17:return this.handleTokenFalse(a),e.abrupt("break",26);case 19:return this.handleTokenNumber(a),e.abrupt("break",26);case 21:return this.handleTokenString(a),e.abrupt("break",26);case 23:return this.handleTokenStringEscape(a),e.abrupt("break",26);case 25:throw new Error("finite state machine get an unexpected state: ".concat(this.state));case 26:e.next=3;break;case 28:return e.abrupt("return",this.tokens);case 29:case"end":return e.stop()}}),e,this)}))},{key:"tokenize",value:r.default.mark((function e(t){var n,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof Uint8Array)){e.next=3;break}return e.delegateYield(this.tokenizeArray(t),"t0",2);case 2:return e.abrupt("return",e.t0);case 3:this.type="char",this.sourceCode=t,n=t.length;case 6:if(!(this.pos<n)){e.next=31;break}if(0!=(7&this.pos)||!(0,i.yielder)()){e.next=10;break}return void(e.next=10);case 10:a=this.read(),e.t1=this.state,e.next=e.t1===c?14:e.t1===u?16:e.t1===l?18:e.t1===p?20:e.t1===f?22:e.t1===d?24:e.t1===h?26:28;break;case 14:return this.initToken(a),e.abrupt("break",29);case 16:return this.handleTokenNull(a),e.abrupt("break",29);case 18:return this.handleTokenTrue(a),e.abrupt("break",29);case 20:return this.handleTokenFalse(a),e.abrupt("break",29);case 22:return this.handleTokenNumber(a),e.abrupt("break",29);case 24:return this.handleTokenString(a),e.abrupt("break",29);case 26:return this.handleTokenStringEscape(a),e.abrupt("break",29);case 28:throw new Error("finite state machine get an unexpected state: ".concat(this.state));case 29:e.next=6;break;case 31:return e.abrupt("return",this.tokens);case 32:case"end":return e.stop()}}),e,this)}))},{key:"read",value:function(){var e;do{e=this.sourceCode[this.pos++]}while(e&&32>e.charCodeAt(0));return e}},{key:"readCharacter",value:function(){var e=this.sourceCode[this.pos++];switch(e>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:return String.fromCharCode(e);case 12:case 13:return String.fromCharCode((31&e)<<6|63&this.sourceCode[this.pos++]);case 14:return String.fromCharCode((15&e)<<12|(63&this.sourceCode[this.pos++])<<6|63&this.sourceCode[this.pos++]);default:throw new Error("Bad encoding")}}},{key:"peek",value:function(){var e=this.pos;if("char"===this.type){for(;this.sourceCode[e]&&32>this.sourceCode[e].charCodeAt(0);)e++;return this.sourceCode[e]}for(var t=function(){var t=r[e++];switch(t>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:return String.fromCharCode(t);case 12:case 13:return String.fromCharCode((31&t)<<6|63&r[e++]);case 14:return String.fromCharCode((15&t)<<12|(63&r[e++])<<6|63&r[e++]);default:throw new Error("Bad encoding")}},r=this.sourceCode,n=t();32>n.charCodeAt(0)&&e<r.length;)n=t();return 0===n.charCodeAt(0)?void 0:n}},{key:"initToken",value:function(e){for(;e&&32>=e.charCodeAt(0);)e=this.sourceCode[this.pos++];var t=b[e];if(!t&&!o.includes(e.charCodeAt(0)))throw new Error("state INIT, unexpected token ".concat(e));for(this.tokens.push({text:e,type:t});" "===this.peek();)this.pos++;var r=this.peek();if(void 0!==r&&(this.state=m[r],!this.state))throw new Error("Unexpected character [".concat(t,":").concat(r.charCodeAt(0),"] '").concat(e,"' @ ").concat(this.pos," - ").concat(this.sourceCode.slice(Math.max(0,this.pos-16),this.pos+16)))}},{key:"handleTokenNull",value:function(e){switch(e){case"n":case"u":this.curToken+=e;break;case"l":if(this.curToken+=e,"null"===this.curToken){var t={text:this.curToken,type:s.TokenType.Null};this.tokens.push(t),this.curToken="",this.state=c}else if("nul"!==this.curToken)throw new Error("state NULL, unexpected token ".concat(e));break;default:throw new Error("state NULL, unexpected token ".concat(e))}}},{key:"handleTokenTrue",value:function(e){switch(e){case"t":case"r":case"u":this.curToken+=e;break;case"e":if("tru"!==this.curToken)throw new Error("state TRUE, unexpected token ".concat(e));this.curToken+=e;var t={text:this.curToken,type:s.TokenType.Boolean};this.tokens.push(t),this.curToken="",this.state=c;break;default:throw new Error("state TRUE, unexpected token ".concat(e))}}},{key:"handleTokenFalse",value:function(e){switch(e){case"f":case"a":case"l":case"s":this.curToken+=e;break;case"e":this.curToken+=e;var t={text:this.curToken,type:s.TokenType.Boolean};this.tokens.push(t),this.curToken="",this.state=c;break;default:throw new Error("state FALSE, unexpected token ".concat(e))}}},{key:"handleTokenNumber",value:function(e){switch(e){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(this.curToken+=e,!/[0-9]|\.|-/.test(this.peek())){var t={text:this.curToken,type:s.TokenType.Number};this.tokens.push(t),this.curToken="",this.state=c}break;case"-":case".":this.curToken+=e;break;default:throw new Error("state NUMBER, unexpected token ".concat(e))}}},{key:"handleTokenStringEscape",value:function(e){return"u"===e?(this.curToken+=JSON.parse('"\\u'.concat(this.read()).concat(this.read()).concat(this.read()).concat(this.read(),'"')),void(this.state=d)):(this.curToken+=JSON.parse('"\\'.concat(e,'"')),void(this.state=d))}},{key:"handleTokenString",value:function(e){switch(e){case"\\":this.state=h;break;case'"':if(""===this.curToken)this.curToken=e;else{this.curToken+=e;var t={text:this.curToken,type:s.TokenType.String};this.tokens.push(t),this.curToken="",this.state=c}break;default:this.curToken+=e}}}]),e}();e.Tokenizer=y}(we);var Se={},Oe={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ExprType=void 0;e.ExprType={Json:"j",Array:"a",Object:"o",Prop:"p",Value:"v"}}(Oe),function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.AST=e.ASTNode=void 0;var r=t(Q),n=t(ke.exports),a=t(xe.exports),s=Ae,i=Oe,o=Te,c=function(){function e(t,r){(0,n.default)(this,e),this.type=r,this.tokens=t,this.childNodeList=[]}return(0,a.default)(e,[{key:"addChild",value:function(e){this.childNodeList.push(e)}}]),e}();e.ASTNode=c;var u=function(){function e(t){(0,n.default)(this,e),this.tokens=t}return(0,a.default)(e,[{key:"buildTree",value:r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.handleExprJson(this.tokens),"t0",1);case 1:return e.abrupt("return",e.t0);case 2:case"end":return e.stop()}}),e,this)}))},{key:"handleExprJson",value:r.default.mark((function e(t){var n,a,u,l;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,o.yielder)()){e.next=3;break}return void(e.next=3);case 3:if(n=new c(t,i.ExprType.Json),(a=t[0]).type!==s.TokenType.LeftBracket){e.next=11;break}return e.delegateYield(this.handleExprArray(t),"t0",7);case 7:u=e.t0,n.addChild(u),e.next=18;break;case 11:if(a.type!==s.TokenType.LeftBrace){e.next=17;break}return e.delegateYield(this.handleExprObject(t),"t1",13);case 13:l=e.t1,n.addChild(l),e.next=18;break;case 17:throw new Error("[json expression error] unexpected token ".concat(a.text));case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,this)}))},{key:"handleExprArray",value:r.default.mark((function e(t){var n,a,u,l,p,f,d,h,b;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==t.length||t[0].type!==s.TokenType.LeftBracket||t[1].type!==s.TokenType.RightBracket){e.next=2;break}return e.abrupt("return",new c(t,i.ExprType.Array));case 2:n=new c(t,i.ExprType.Array),a=[],u=0,l=0,p=1,f=t.length-1;case 7:if(!(p<f)){e.next=40;break}if(!(0,o.yielder)()){e.next=11;break}return void(e.next=11);case 11:if((d=t[p]).type!==s.TokenType.Comma||0!==u||0!==l){e.next=24;break}if(1!==a.length){e.next=17;break}e.t0=this.handleExprValueDirect(a),e.next=19;break;case 17:return e.delegateYield(this.handleExprValue(a),"t1",18);case 18:e.t0=e.t1;case 19:h=e.t0,a=[],n.addChild(h),e.next=37;break;case 24:e.t2=d.type,e.next=e.t2===s.TokenType.RightBrace?27:e.t2===s.TokenType.RightBracket?29:e.t2===s.TokenType.LeftBrace?31:e.t2===s.TokenType.LeftBracket?33:35;break;case 27:return u--,e.abrupt("break",36);case 29:return l--,e.abrupt("break",36);case 31:return u++,e.abrupt("break",36);case 33:return l++,e.abrupt("break",36);case 35:return e.abrupt("break",36);case 36:a.push(d);case 37:p++,e.next=7;break;case 40:if(1!==a.length){e.next=44;break}e.t3=this.handleExprValueDirect(a),e.next=46;break;case 44:return e.delegateYield(this.handleExprValue(a),"t4",45);case 45:e.t3=e.t4;case 46:return b=e.t3,n.addChild(b),e.abrupt("return",n);case 49:case"end":return e.stop()}}),e,this)}))},{key:"handleExprObject",value:r.default.mark((function e(t){var n,a,u,l,p,f,d,h,b,m,y,v;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==t.length||t[0].type!==s.TokenType.LeftBrace||t[1].type!==s.TokenType.RightBrace){e.next=2;break}return e.abrupt("return",new c(t,i.ExprType.Object));case 2:n=new c(t,i.ExprType.Object),u=[],l=[],p=0,f=0,d="prop",h=1,b=t.length-1;case 9:if(!(h<b)){e.next=58;break}if(!(0,o.yielder)()){e.next=13;break}return void(e.next=13);case 13:if((m=t[h]).type!==s.TokenType.Colon||"prop"!==d){e.next=21;break}return e.delegateYield(this.handleExprProp(u),"t0",16);case 16:a=e.t0,u=[],d="value",e.next=55;break;case 21:if(m.type!==s.TokenType.Comma||"prop"!==d||0!==p||0!==f){e.next=34;break}if(1!==l.length){e.next=26;break}e.t1=this.handleExprValueDirect(l),e.next=28;break;case 26:return e.delegateYield(this.handleExprValue(l),"t2",27);case 27:e.t1=e.t2;case 28:y=e.t1,l=[],a.addChild(y),n.addChild(a),e.next=55;break;case 34:e.t3=d,e.next="prop"===e.t3?37:"value"===e.t3?39:54;break;case 37:return u.push(m),e.abrupt("break",55);case 39:e.t4=m.type,e.next=e.t4===s.TokenType.RightBrace?42:e.t4===s.TokenType.RightBracket?44:e.t4===s.TokenType.LeftBrace?46:e.t4===s.TokenType.LeftBracket?48:50;break;case 42:return p--,e.abrupt("break",51);case 44:return f--,e.abrupt("break",51);case 46:return p++,e.abrupt("break",51);case 48:return f++,e.abrupt("break",51);case 50:return e.abrupt("break",51);case 51:return l.push(m),0===p&&0===f&&(d="prop"),e.abrupt("break",55);case 54:throw new Error("[object expression error] unexpected state");case 55:h++,e.next=9;break;case 58:if(1!==l.length){e.next=62;break}e.t5=this.handleExprValueDirect(l),e.next=64;break;case 62:return e.delegateYield(this.handleExprValue(l),"t6",63);case 63:e.t5=e.t6;case 64:return v=e.t5,a.addChild(v),n.addChild(a),e.abrupt("return",n);case 68:case"end":return e.stop()}}),e,this)}))},{key:"handleExprProp",value:r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,o.yielder)()){e.next=3;break}return void(e.next=3);case 3:return(n=new c(t,i.ExprType.Prop)).propName=t[0].text.slice(1,-1),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))},{key:"handleExprValueDirect",value:function(e){var t=new c(e,i.ExprType.Value),r=e[0].type;switch(r){case s.TokenType.Null:case s.TokenType.Boolean:case s.TokenType.Number:case s.TokenType.String:t.value=new c(e,r);break;default:throw new Error("[value expression error] unknown single token type")}return t}},{key:"handleExprValue",value:r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,o.yielder)()){e.next=3;break}return void(e.next=3);case 3:return n=new c(t,i.ExprType.Value),e.delegateYield(this.handleExprJson(t),"t0",5);case 5:return n.value=e.t0,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))}]),e}();e.AST=u}(Se),function(e){var t=Q,r=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.parse=b,e.ASTParser=void 0;var n=r(Q),a=r(ke.exports),s=r(xe.exports),i=we,o=Se,c=Oe,u=Ae,l=Te,p=t.mark(b);function f(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return e.done,e},e:function(e){s=!0,e},f:function e(){try{e||null==r.return||r.return()}finally{if(s)throw undefined}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var h=function(){function e(t){(0,a.default)(this,e),this.ast=t}return(0,s.default)(e,[{key:"getJson",value:n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.handleValue(this.ast),"t0",1);case 1:return e.abrupt("return",e.t0);case 2:case"end":return e.stop()}}),e,this)}))},{key:"handleJson",value:n.default.mark((function e(t){var r,a,s,i,o,u,l,p;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type===c.ExprType.Json){e.next=2;break}throw new Error("[parse AST error] unexpected node type, expect Json");case 2:if((a=t.childNodeList[0]).type!==c.ExprType.Array){e.next=26;break}r=[],s=f(a.childNodeList),e.prev=6,s.s();case 8:if((i=s.n()).done){e.next=16;break}return o=i.value,e.t0=r,e.delegateYield(this.handleValue(o.value),"t1",12);case 12:e.t2=e.t1,e.t0.push.call(e.t0,e.t2);case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t3=e.catch(6),s.e(e.t3);case 21:return e.prev=21,s.f(),e.finish(21);case 24:e.next=48;break;case 26:if(a.type!==c.ExprType.Object){e.next=47;break}r={},u=f(a.childNodeList),e.prev=29,u.s();case 31:if((l=u.n()).done){e.next=37;break}return p=l.value,e.delegateYield(this.handleValue(p.childNodeList[0].value),"t4",34);case 34:r[p.propName]=e.t4;case 35:e.next=31;break;case 37:e.next=42;break;case 39:e.prev=39,e.t5=e.catch(29),u.e(e.t5);case 42:return e.prev=42,u.f(),e.finish(42);case 45:e.next=48;break;case 47:throw new Error("[parse AST error] unexpected second node type");case 48:return e.abrupt("return",r);case 49:case"end":return e.stop()}}),e,this,[[6,18,21,24],[29,39,42,45]])}))},{key:"handleValue",value:n.default.mark((function e(t){var r,a;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,l.yielder)()){e.next=3;break}return void(e.next=3);case 3:e.t0=t.type,e.next=e.t0===u.TokenType.Null?6:e.t0===u.TokenType.Boolean?7:e.t0===u.TokenType.Number?9:e.t0===u.TokenType.String?11:e.t0===c.ExprType.Json?12:14;break;case 6:return e.abrupt("return",null);case 7:return r=t.tokens[0].text,e.abrupt("return","true"===r);case 9:return a=+t.tokens[0].text,e.abrupt("return",a);case 11:return e.abrupt("return",t.tokens[0].text.slice(1,-1));case 12:return e.delegateYield(this.handleJson(t),"t1",13);case 13:return e.abrupt("return",e.t1);case 14:throw new Error("[parse AST error] unexpected node type, expect a valid Value node");case 15:case"end":return e.stop()}}),e,this)}))}]),e}();function b(e){var t,r,a,s,c;return n.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=new i.Tokenizer,n.delegateYield(t.tokenize(e),"t0",2);case 2:return r=n.t0,a=new o.AST(r),n.delegateYield(a.buildTree(),"t1",5);case 5:return s=n.t1,c=new h(s),n.delegateYield(c.getJson(),"t2",8);case 8:return n.abrupt("return",n.t2);case 9:case"end":return n.stop()}}),p)}e.ASTParser=h}(ge);var je={};!function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.stringify=m;var r,n,a,s=t(K.exports),i=t(Q),o=i.default.mark(h),c=i.default.mark(b),u=i.default.mark(m),l=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,p=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f=0;function d(){return!!(256<++f)&&(f=0,!0)}function h(e){var t,r,n,s,c;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:t=['"'],r=0,n=e.length;case 2:if(!(r<n)){i.next=11;break}if(0!=(7&r)||!d()){i.next=6;break}return void(i.next=6);case 6:'"'===(s=e[r])||l.test(s)?"string"==typeof(c=a[s])?t.push(c):t.push("\\u"+("0000"+s.charCodeAt(0).toString(16)).slice(-4)):!p.test(s)&&t.push(s);case 8:r++,i.next=2;break;case 11:return t.push('"'),i.abrupt("return",t.join(""));case 13:case"end":return i.stop()}}),o)}function b(e,t,a){var o,u,l,p,f,m,y,v;return i.default.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(o=a.rep,!d()){c.next=4;break}return void(c.next=4);case 4:m=r,(v=t[e])&&"object"===(0,s.default)(v)&&"function"==typeof v.toJSON&&(v=v.toJSON(e)),"function"==typeof o&&(v=o.call(t,e,v)),c.t0=(0,s.default)(v),c.next="string"===c.t0?11:"number"===c.t0?13:"boolean"===c.t0||"null"===c.t0?14:15;break;case 11:return c.delegateYield(h(v),"t1",12);case 12:return c.abrupt("return",c.t1);case 13:return c.abrupt("return",isFinite(v)?v+"":"null");case 14:return c.abrupt("return",v+"");case 15:if(v){c.next=17;break}return c.abrupt("return","null");case 17:if(r+=n,y=[],"[object Array]"!==Object.prototype.toString.apply(v)){c.next=34;break}f=v.length,p="[",u=0;case 23:if(!(u<f)){c.next=33;break}return c.t2=p,c.delegateYield(b(u,v,a)||"null","t3",26);case 26:c.t4=c.t3,c.t5=c.t2+c.t4,c.t6=u===f-1?"":",",p=c.t5+c.t6;case 30:u+=1,c.next=23;break;case 33:return c.abrupt("return",p+"]");case 34:c.t7=i.default.keys(v);case 35:if((c.t8=c.t7()).done){c.next=51;break}if(l=c.t8.value,!Object.prototype.hasOwnProperty.call(v,l)){c.next=49;break}return c.delegateYield(b(l,v,a),"t9",39);case 39:if(!(p=c.t9)){c.next=49;break}return c.t10=y,c.delegateYield(h(l),"t11",43);case 43:c.t12=c.t11,c.t13=r?": ":":",c.t14=c.t12+c.t13,c.t15=p,c.t16=c.t14+c.t15,c.t10.push.call(c.t10,c.t16);case 49:c.next=35;break;case 51:return p=0===y.length?"{}":r?"{\n"+r+y.join(",\n"+r)+"\n"+m+"}":"{"+y.join(",")+"}",r=m,c.abrupt("return",p);case 54:case"end":return c.stop()}}),c)}function m(e,t){return i.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r="",n="",!t||"function"==typeof t||"object"===(0,s.default)(t)&&"number"==typeof t.length){a.next=4;break}throw new Error("JSON.stringify");case 4:return a.delegateYield(b("",{"":e},{rep:t}),"t0",5);case 5:return a.abrupt("return",a.t0);case 6:case"end":return a.stop()}}),u)}a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}}(je),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseAsync=e.stringifyAsync=void 0;var t=U,r=ge,n=(0,t.wrapAsPromise)(je.stringify);e.stringifyAsync=n;var a=(0,t.wrapAsPromise)(r.parse);e.parseAsync=a}(ve);var Pe={},Ee={};!function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.sort=A;var r=t(ke.exports),n=t(xe.exports),a=t(he.exports),s=t(Q),i=s.default.mark(f),o=s.default.mark(h),c=s.default.mark(b),u=s.default.mark(g),l=s.default.mark(k),p=s.default.mark(A);function f(e,t,r){var n,a,o,c,u,l,p,f=arguments;return s.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:n=3<f.length&&void 0!==f[3]?f[3]:0,a=4<f.length&&void 0!==f[4]?f[4]:0,o=7&r,c=(-8&r)+n,u=n,l=a;case 6:if(!(u<c)){s.next=21;break}if(e[u]=t[l],e[u+1]=t[l+1],e[u+2]=t[l+2],e[u+3]=t[l+3],e[u+4]=t[l+4],e[u+5]=t[l+5],e[u+6]=t[l+6],e[u+7]=t[l+7],!v()){s.next=18;break}return void(s.next=18);case 18:u+=8,l+=8,s.next=6;break;case 21:for(p=o+u;u<p;u++,l++)e[u]=t[l];case 23:case"end":return s.stop()}}),i)}function d(e){for(var t=0;e>=32;)t|=1&e,e>>=1;return e+t}function h(e,t,r,n){var a;return s.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if((a=t+1)!==r){s.next=3;break}return s.abrupt("return",1);case 3:if(!(0>n(e[a++],e[t]))){s.next=14;break}case 4:if(!(a<r&&0>n(e[a],e[a-1]))){s.next=11;break}if(0!=(127&++a)){s.next=9;break}return void(s.next=9);case 9:s.next=4;break;case 11:return s.delegateYield(b(e,t,a),"t0",12);case 12:s.next=21;break;case 14:if(!(a<r&&0<=n(e[a],e[a-1]))){s.next=21;break}if(0!=(127&++a)){s.next=19;break}return void(s.next=19);case 19:s.next=14;break;case 21:return s.abrupt("return",a-t);case 22:case"end":return s.stop()}}),o)}function b(e,t,r){var n;return s.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r--;case 1:if(!(t<r)){a.next=10;break}if(n=e[t],e[t++]=e[r],e[r--]=n,0!=(127&r)){a.next=8;break}return void(a.next=8);case 8:a.next=1;break;case 10:case"end":return a.stop()}}),c)}function m(e,t,r,n,a){for(n===t&&n++;n<r;n++){for(var s=e[n],i=t,o=n;i<o;){var c=i+o>>>1;0>a(s,e[c])?o=c:i=c+1}var u=n-i;switch(u){case 3:e[i+3]=e[i+2];case 2:e[i+2]=e[i+1];case 1:e[i+1]=e[i];break;default:for(;0<u;)e[i+u]=e[i+u-1],u--}e[i]=s}}var y=0;function v(){return 0==(127&y++)}function g(e,t,r,n,a,i){var o,c,l,p,f;return s.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return void(s.next=2);case 2:if(o=0,c=0,l=1,!(0<i(e,t[r+a]))){s.next=21;break}c=n-a;case 7:if(!(l<c&&0<i(e,t[r+a+l]))){s.next=16;break}if(!v()){s.next=11;break}return void(s.next=11);case 11:o=l,0>=(l=1+(l<<1))&&(l=c),s.next=7;break;case 16:l>c&&(l=c),o+=a,l+=a,s.next=35;break;case 21:c=a+1;case 22:if(!(l<c&&0>=i(e,t[r+a-l]))){s.next=31;break}if(!v()){s.next=26;break}return void(s.next=26);case 26:o=l,0>=(l=1+(l<<1))&&(l=c),s.next=22;break;case 31:l>c&&(l=c),p=o,o=a-l,l=a-p;case 35:o++;case 36:if(!(o<l)){s.next=44;break}if(f=o+(l-o>>>1),!v()){s.next=41;break}return void(s.next=41);case 41:0<i(e,t[r+f])?o=f+1:l=f,s.next=36;break;case 44:return s.abrupt("return",l);case 45:case"end":return s.stop()}}),u)}function k(e,t,r,n,a,i){var o,c,u,p,f;return s.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return void(s.next=2);case 2:if(o=0,c=0,u=1,!(0>i(e,t[r+a]))){s.next=22;break}c=a+1;case 7:if(!(u<c&&0>i(e,t[r+a-u]))){s.next=16;break}if(!v()){s.next=11;break}return void(s.next=11);case 11:o=u,0>=(u=1+(u<<1))&&(u=c),s.next=7;break;case 16:u>c&&(u=c),p=o,o=a-u,u=a-p,s.next=35;break;case 22:c=n-a;case 23:if(!(u<c&&0<=i(e,t[r+a+u]))){s.next=32;break}if(!v()){s.next=27;break}return void(s.next=27);case 27:o=u,0>=(u=1+(u<<1))&&(u=c),s.next=23;break;case 32:u>c&&(u=c),o+=a,u+=a;case 35:o++;case 36:if(!(o<u)){s.next=44;break}if(f=o+(u-o>>>1),!v()){s.next=41;break}return void(s.next=41);case 41:0>i(e,t[r+f])?u=f:o=f+1,s.next=36;break;case 44:return s.abrupt("return",u);case 45:case"end":return s.stop()}}),l)}var x=function(){function e(t,n){(0,r.default)(this,e),(0,a.default)(this,"array",null),(0,a.default)(this,"compare",null),(0,a.default)(this,"minGallop",7),(0,a.default)(this,"length",0),(0,a.default)(this,"tmpStorageLength",256),(0,a.default)(this,"stackLength",0),(0,a.default)(this,"runStart",null),(0,a.default)(this,"runLength",null),(0,a.default)(this,"stackSize",0),this.array=t,this.compare=n,this.length=t.length,this.length<512&&(this.tmpStorageLength=this.length>>>1),this.tmp=Array(this.tmpStorageLength),this.stackLength=120>this.length?5:1542>this.length?10:119151>this.length?19:40,this.runStart=Array(this.stackLength),this.runLength=Array(this.stackLength)}return(0,n.default)(e,[{key:"pushRun",value:function(e,t){this.runStart[this.stackSize]=e,this.runLength[this.stackSize]=t,this.stackSize+=1}},{key:"mergeRuns",value:s.default.mark((function e(){var t;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(1<this.stackSize)){e.next=11;break}if(!(1<=(t=this.stackSize-2)&&this.runLength[t-1]<=this.runLength[t]+this.runLength[t+1]||2<=t&&this.runLength[t-2]<=this.runLength[t]+this.runLength[t-1])){e.next=6;break}this.runLength[t-1]<this.runLength[t+1]&&t--,e.next=8;break;case 6:if(!(this.runLength[t]>this.runLength[t+1])){e.next=8;break}return e.abrupt("break",11);case 8:return e.delegateYield(this.mergeAt(t),"t0",9);case 9:e.next=0;break;case 11:case"end":return e.stop()}}),e,this)}))},{key:"forceMergeRuns",value:s.default.mark((function e(){var t;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(1<this.stackSize)){e.next=6;break}return 0<(t=this.stackSize-2)&&this.runLength[t-1]<this.runLength[t+1]&&t--,e.delegateYield(this.mergeAt(t),"t0",4);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e,this)}))},{key:"mergeAt",value:s.default.mark((function e(t){var r,n,a,i,o,c,u;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void(e.next=2);case 2:return r=this.compare,n=this.array,a=this.runStart[t],i=this.runLength[t],o=this.runStart[t+1],c=this.runLength[t+1],this.runLength[t]=i+c,t===this.stackSize-3&&(this.runStart[t+1]=this.runStart[t+2],this.runLength[t+1]=this.runLength[t+2]),this.stackSize--,e.delegateYield(k(n[o],n,a,i,0,r),"t0",12);case 12:if(u=e.t0,a+=u,0!==(i-=u)){e.next=17;break}return e.abrupt("return");case 17:return e.delegateYield(g(n[a+i-1],n,o,c,c-1,r),"t1",18);case 18:if(0!==(c=e.t1)){e.next=21;break}return e.abrupt("return");case 21:if(!(i<=c)){e.next=25;break}return e.delegateYield(this.mergeLow(a,i,o,c),"t2",23);case 23:e.next=26;break;case 25:return e.delegateYield(this.mergeHigh(a,i,o,c),"t3",26);case 26:case"end":return e.stop()}}),e,this)}))},{key:"mergeLow",value:s.default.mark((function e(t,r,n,a){var i,o,c,u,l,p,d,h,b,m;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.compare,o=this.array,c=this.tmp,e.delegateYield(f(c,o,r,0,t),"t0",4);case 4:if(u=0,l=n,p=t,o[p++]=o[l++],0!=--a){e.next=11;break}return e.delegateYield(f(o,c,r,p,u),"t1",10);case 10:return e.abrupt("return");case 11:if(1!==r){e.next=15;break}return e.delegateYield(f(o,o,a,p,l),"t2",13);case 13:return o[p+a]=c[u],e.abrupt("return");case 15:d=this.minGallop;case 16:h=0,b=0,m=!1;case 20:if(!v()){e.next=23;break}return void(e.next=23);case 23:if(!(0>i(o[l],c[u]))){e.next=32;break}if(o[p++]=o[l++],b++,h=0,0!=--a){e.next=30;break}return m=!0,e.abrupt("break",39);case 30:e.next=38;break;case 32:if(o[p++]=c[u++],h++,b=0,1!=--r){e.next=38;break}return m=!0,e.abrupt("break",39);case 38:if((h|b)<d){e.next=20;break}case 39:if(!m){e.next=41;break}return e.abrupt("break",80);case 41:if(!v()){e.next=44;break}return void(e.next=44);case 44:return e.delegateYield(k(o[l],c,u,r,0,i),"t3",45);case 45:if(0===(h=e.t3)){e.next=54;break}return e.delegateYield(f(o,c,h,p,u),"t4",48);case 48:if(p+=h,u+=h,!(1>=(r-=h))){e.next=54;break}return m=!0,e.abrupt("break",74);case 54:if(o[p++]=o[l++],0!=--a){e.next=58;break}return m=!0,e.abrupt("break",74);case 58:return e.delegateYield(g(c[u],o,l,a,0,i),"t5",59);case 59:if(0===(b=e.t5)){e.next=68;break}return e.delegateYield(f(o,o,b,p,l),"t6",62);case 62:if(p+=b,l+=b,0!==(a-=b)){e.next=68;break}return m=!0,e.abrupt("break",74);case 68:if(o[p++]=c[u++],1!=--r){e.next=72;break}return m=!0,e.abrupt("break",74);case 72:d--;case 73:if(h>=7||b>=7){e.next=41;break}case 74:if(!m){e.next=76;break}return e.abrupt("break",80);case 76:0>d&&(d=0),d+=2,e.next=16;break;case 80:if(this.minGallop=d,1>d&&(this.minGallop=1),1!==r){e.next=87;break}return e.delegateYield(f(o,o,a,p,l),"t7",84);case 84:o[p+a]=c[u],e.next=92;break;case 87:if(0!==r){e.next=91;break}throw new Error("mergeLow preconditions were not respected");case 91:return e.delegateYield(f(o,c,r,p,u),"t8",92);case 92:case"end":return e.stop()}}),e,this)}))},{key:"mergeHigh",value:s.default.mark((function e(t,r,n,a){var i,o,c,u,l,p,d,h,b,m,y,x,w;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.compare,o=this.array,c=this.tmp,u=0,e.delegateYield(f(c,o,a,0,n),"t0",5);case 5:if(l=t+r-1,p=a-1,d=n+a-1,h=0,b=0,o[d--]=o[l--],0!=--r){e.next=15;break}return h=d-(a-1),e.delegateYield(f(o,c,a,h,0),"t1",14);case 14:return e.abrupt("return");case 15:if(1!==a){e.next=31;break}b=(d-=r)+1,h=(l-=r)+1,u=r-1;case 21:if(!(0<=u)){e.next=29;break}if(!v()){e.next=25;break}return void(e.next=25);case 25:o[b+u]=o[h+u];case 26:u--,e.next=21;break;case 29:return o[d]=c[p],e.abrupt("return");case 31:m=this.minGallop;case 32:y=0,x=0,w=!1;case 36:if(!v()){e.next=39;break}return void(e.next=39);case 39:if(!(0>i(c[p],o[l]))){e.next=48;break}if(o[d--]=o[l--],y++,x=0,0!=--r){e.next=46;break}return w=!0,e.abrupt("break",55);case 46:e.next=54;break;case 48:if(o[d--]=c[p--],x++,y=0,1!=--a){e.next=54;break}return w=!0,e.abrupt("break",55);case 54:if((y|x)<m){e.next=36;break}case 55:if(!w){e.next=57;break}return e.abrupt("break",109);case 57:return e.t2=r,e.delegateYield(k(c[p],o,t,r,r-1,i),"t3",59);case 59:if(e.t4=e.t3,0===(y=e.t2-e.t4)){e.next=79;break}r-=y,b=(d-=y)+1,h=(l-=y)+1,u=y-1;case 68:if(!(0<=u)){e.next=76;break}if(!v()){e.next=72;break}return void(e.next=72);case 72:o[b+u]=o[h+u];case 73:u--,e.next=68;break;case 76:if(0!==r){e.next=79;break}return w=!0,e.abrupt("break",103);case 79:if(o[d--]=c[p--],1!=--a){e.next=83;break}return w=!0,e.abrupt("break",103);case 83:return e.t5=a,e.delegateYield(g(o[l],c,0,a,a-1,i),"t6",85);case 85:if(e.t7=e.t6,0===(x=e.t5-e.t7)){e.next=97;break}return a-=x,b=(d-=x)+1,h=(p-=x)+1,e.delegateYield(f(o,c,x,b,h),"t8",94);case 94:if(!(1>=a)){e.next=97;break}return w=!0,e.abrupt("break",103);case 97:if(o[d--]=o[l--],0!=--r){e.next=101;break}return w=!0,e.abrupt("break",103);case 101:m--;case 102:if(y>=7||x>=7){e.next=57;break}case 103:if(!w){e.next=105;break}return e.abrupt("break",109);case 105:0>m&&(m=0),m+=2,e.next=32;break;case 109:if(this.minGallop=m,1>m&&(this.minGallop=1),1!==a){e.next=128;break}b=(d-=r)+1,h=(l-=r)+1,u=r-1;case 117:if(!(0<=u)){e.next=125;break}if(!v()){e.next=121;break}return void(e.next=121);case 121:o[b+u]=o[h+u];case 122:u--,e.next=117;break;case 125:o[d]=c[p],e.next=134;break;case 128:if(0!==a){e.next=132;break}throw new Error("mergeHigh preconditions were not respected");case 132:return h=d-(a-1),e.delegateYield(f(o,c,a,h,0),"t9",134);case 134:case"end":return e.stop()}}),e,this)}))}]),e}();function w(e,t){return e===t?0:e>t?1:-1}function A(e,t,r,n){var a,i,o,c,u,l;return s.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(Array.isArray(e)){s.next=2;break}throw new TypeError("Can only sort arrays");case 2:if(t?"function"==typeof t?1===t.length&&(a=t,t=function(e,t){var r=a(e),n=a(t);return r===n?0:n>r?-1:1}):(n=r,r=t,t=w):t=w,r||(r=0),n||(n=e.length),!(2>(i=n-r))){s.next=8;break}return s.abrupt("return",e);case 8:if(o=0,!(i<32)){s.next=16;break}return s.delegateYield(h(e,r,n,t),"t0",11);case 11:return o=s.t0,m(e,r,n,r+o,t),void(s.next=15);case 15:return s.abrupt("return",e);case 16:c=new x(e,t),u=d(i);case 18:return s.delegateYield(h(e,r,n,t),"t1",19);case 19:if(!((o=s.t1)<u)){s.next=27;break}return(l=i)>u&&(l=u),m(e,r,r+l,r+o,t),void(s.next=26);case 26:o=l;case 27:return c.pushRun(r,o),s.delegateYield(c.mergeRuns(),"t2",29);case 29:i-=o,r+=o;case 31:if(0!==i){s.next=18;break}case 32:return s.delegateYield(c.forceMergeRuns(),"t3",33);case 33:return s.abrupt("return",e);case 34:case"end":return s.stop()}}),p)}}(Ee),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sortAsync=void 0;var t=(0,U.wrapAsPromise)(Ee.sort);e.sortAsync=t}(Pe);var _e={},Ce={};!function(e){var t=Q,r=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.find=o;var n=r(Q),a=pe,s=de,i=t.mark(o);function o(e,t,r){var o;return n.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=void 0,i.delegateYield((0,a.forEach)(e,n.default.mark((function r(a,i){return n.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(t(a,i,e),"t0",1);case 1:if(!r.t0){r.next=5;break}return o=a,r.abrupt("return",(0,s.exitWith)(a));case 5:case"end":return r.stop()}}),r)})),r),"t0",2);case 2:return i.abrupt("return",o);case 3:case"end":return i.stop()}}),i)}}(Ce),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.findAsync=void 0;var t=(0,ue.wrapAsPromiseAndYieldFn)(Ce.find);e.findAsync=t}(_e);var Le={},Me={};!function(e){var t=Q,r=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.findIndex=o;var n=r(Q),a=pe,s=de,i=t.mark(o);function o(e,t,r){var o;return n.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=-1,i.delegateYield((0,a.forEach)(e,n.default.mark((function r(a,i){return n.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(t(a,i,e),"t0",1);case 1:if(!r.t0){r.next=5;break}return o=i,r.abrupt("return",(0,s.exitWith)(i));case 5:case"end":return r.stop()}}),r)})),r),"t0",2);case 2:return i.abrupt("return",o);case 3:case"end":return i.stop()}}),i)}}(Me),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.findIndexAsync=void 0;var t=(0,ue.wrapAsPromiseAndYieldFn)(Me.findIndex);e.findIndexAsync=t}(Le);var Fe={},Re={};!function(e){var t=Q,r=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.map=o;var n=r(Q),a=fe,s=pe,i=t.mark(o);function o(e,t){var r;return n.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=(0,a.isObject)(e)?{}:[],i.delegateYield((0,s.forEach)(e,n.default.mark((function a(s,i){return n.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(t(s,i,e),"t0",1);case 1:r[i]=n.t0;case 2:case"end":return n.stop()}}),a)}))),"t0",2);case 2:return i.abrupt("return",r);case 3:case"end":return i.stop()}}),i)}}(Re),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mapAsync=void 0;var t=(0,ue.wrapAsPromiseAndYieldFn)(Re.map);e.mapAsync=t}(Fe);var Be={},Ie={};!function(e){var t=Q,r=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.filter=o;var n=r(Q),a=fe,s=pe,i=t.mark(o);function o(e,t){var r,o;return n.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(0,a.isObject)(e)){i.next=6;break}return r={},i.delegateYield((0,s.forEach)(e,n.default.mark((function e(a,s,i){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t(a,s,i),"t0",1);case 1:if(!e.t0){e.next=3;break}r[s]=a;case 3:case"end":return e.stop()}}),e)}))),"t0",3);case 3:return i.abrupt("return",r);case 6:return o=[],i.delegateYield((0,s.forEach)(e,n.default.mark((function e(r,a,s){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t(r,a,s),"t0",1);case 1:if(!e.t0){e.next=3;break}o.push(r);case 3:case"end":return e.stop()}}),e)}))),"t1",8);case 8:return i.abrupt("return",o);case 9:case"end":return i.stop()}}),i)}}(Ie),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.filterAsync=void 0;var t=(0,ue.wrapAsPromiseAndYieldFn)(Ie.filter);e.filterAsync=t}(Be);var De={},Ye={};!function(e){var t=Q,r=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.reduce=i;var n=r(Q),a=pe,s=t.mark(i);function i(e,t,r){var i,o;return n.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return i=void 0===r?e[0]:r,o=!0,s.delegateYield((0,a.forEach)(e,n.default.mark((function a(s,c){return n.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!o||r){n.next=5;break}i=s,o=!1,n.next=7;break;case 5:return n.delegateYield(t(i,s,c,e),"t0",6);case 6:i=n.t0;case 7:case"end":return n.stop()}}),a)}))),"t0",3);case 3:return s.abrupt("return",i);case 4:case"end":return s.stop()}}),s)}}(Ye),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reduceAsync=void 0;var t=(0,ue.wrapAsPromiseAndYieldFn)(Ye.reduce);e.reduceAsync=t}(De);var Ne={},qe={};!function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.append=i;var r=t(Q),n=pe,a=U,s=r.default.mark(i);function i(e,t){var i;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=e.length,r.next=3,!0;case 3:return e.length+=t.length,void(r.next=6);case 6:return r.delegateYield((0,n.forEach)(t,(0,a.yielding)((function(t,r){return e[r+i]=t}))),"t0",7);case 7:return r.abrupt("return",e);case 8:case"end":return r.stop()}}),s)}}(qe),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.appendAsync=void 0;var t=(0,U.wrapAsPromise)(qe.append);e.appendAsync=t}(Ne);var Ue={},ze={};!function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.concat=i;var r=t(Q),n=pe,a=U,s=r.default.mark(i);function i(e,t){var i,o;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,!0;case 2:return i=Array(e.length+t.length),void(r.next=5);case 5:return o=e.length,r.delegateYield((0,n.forEach)(e,(0,a.yielding)((function(e,t){return i[t]=e}))),"t0",7);case 7:return r.delegateYield((0,n.forEach)(t,(0,a.yielding)((function(e,t){return i[t+o]=e}))),"t1",8);case 8:return r.abrupt("return",i);case 9:case"end":return r.stop()}}),s)}}(ze),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.concatAsync=void 0;var t=(0,U.wrapAsPromise)(ze.concat);e.concatAsync=t}(Ue);var $e={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.forEachAsync=void 0;var t=(0,ue.wrapAsPromiseAndYieldFn)(pe.forEach);e.forEachAsync=t}($e);var Ge={},Ve={};!function(e){var t=Q,r=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.some=o;var n=r(Q),a=pe,s=de,i=t.mark(o);function o(e,t){var r;return n.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=!1,i.delegateYield((0,a.forEach)(e,n.default.mark((function a(i,o){return n.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(t(i,o,e),"t0",1);case 1:if(!n.t0){n.next=4;break}return r=!0,n.abrupt("return",(0,s.exitWith)(!0));case 4:case"end":return n.stop()}}),a)}))),"t0",2);case 2:return i.abrupt("return",r);case 3:case"end":return i.stop()}}),i)}}(Ve),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.someAsync=void 0;var t=(0,ue.wrapAsPromiseAndYieldFn)(Ve.some);e.someAsync=t}(Ge);var He={},We={};!function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.includes=a;var r=t(Q),n=r.default.mark(a);function a(e,t){var a,s;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=0,s=e.length;case 1:if(!(a<s)){r.next=10;break}if(e[a]!==t){r.next=4;break}return r.abrupt("return",!0);case 4:if(0!=(63&a)){r.next=7;break}return void(r.next=7);case 7:a++,r.next=1;break;case 10:return r.abrupt("return",!1);case 11:case"end":return r.stop()}}),n)}}(We),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.includesAsync=void 0;var t=(0,ue.wrapAsPromiseAndYieldFn)(We.includes);e.includesAsync=t}(He);var Je={},Ze={};!function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.indexOf=a;var r=t(Q),n=r.default.mark(a);function a(e,t){var a,s;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=0,s=e.length;case 1:if(!(a<s)){r.next=10;break}if(e[a]!==t){r.next=4;break}return r.abrupt("return",a);case 4:if(0!=(63&a)){r.next=7;break}return void(r.next=7);case 7:a++,r.next=1;break;case 10:return r.abrupt("return",-1);case 11:case"end":return r.stop()}}),n)}}(Ze),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.indexOfAsync=void 0;var t=(0,ue.wrapAsPromiseAndYieldFn)(Ze.indexOf);e.indexOfAsync=t}(Je);var Ke={},Xe={};!function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.lastIndexOf=a;var r=t(Q),n=r.default.mark(a);function a(e,t){var a;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=e.length-1;case 1:if(!(0<=a)){r.next=10;break}if(e[a]!==t){r.next=4;break}return r.abrupt("return",a);case 4:if(0!=(63&a)){r.next=7;break}return void(r.next=7);case 7:a--,r.next=1;break;case 10:return r.abrupt("return",-1);case 11:case"end":return r.stop()}}),n)}}(Xe),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.lastIndexOfAsync=void 0;var t=(0,ue.wrapAsPromiseAndYieldFn)(Xe.lastIndexOf);e.lastIndexOfAsync=t}(Ke);var Qe={},et={};!function(e){var t=Q,r=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.keyBy=i;var n=r(Q),a=pe,s=t.mark(i);function i(e,t){var r;return n.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return r={},s.delegateYield((0,a.forEach)(e,n.default.mark((function a(s,i){var o;return n.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(t(s,i,e),"t0",1);case 1:o=n.t0,r[o]=s;case 3:case"end":return n.stop()}}),a)}))),"t0",2);case 2:return s.abrupt("return",r);case 3:case"end":return s.stop()}}),s)}}(et),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.keyByAsync=void 0;var t=(0,ue.wrapAsPromiseAndYieldFn)(et.keyBy);e.keyByAsync=t}(Qe);var tt={},rt={};!function(e){var t=Q,r=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.groupBy=o;var n=r(Q),a=t.mark(o);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return e.done,e},e:function(e){s=!0,e},f:function e(){try{e||null==r.return||r.return()}finally{if(s)throw undefined}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){var r,i,o,c,u,l;return n.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r={},i=0,o=s(e),n.prev=3,o.s();case 5:if((c=o.n()).done){n.next=13;break}return u=c.value,n.delegateYield(t(u,i++,e),"t0",8);case 8:l=n.t0,(r[l]=r[l]||[]).push(u);case 11:n.next=5;break;case 13:n.next=18;break;case 15:n.prev=15,n.t1=n.catch(3),o.e(n.t1);case 18:return n.prev=18,o.f(),n.finish(18);case 21:return n.abrupt("return",r);case 22:case"end":return n.stop()}}),a,null,[[3,15,18,21]])}}(rt),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.groupByAsync=void 0;var t=(0,ue.wrapAsPromiseAndYieldFn)(rt.groupBy);e.groupByAsync=t}(tt);var nt={},at={};!function(e){var t=Q,r=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueBy=o;var n=r(Q),a=t.mark(o);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return e.done,e},e:function(e){s=!0,e},f:function e(){try{e||null==r.return||r.return()}finally{if(s)throw undefined}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){var r,i,o,c,u,l,p;return n.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=new Set,i=[],o=0,c=s(e),n.prev=4,c.s();case 6:if((u=c.n()).done){n.next=17;break}if(l=u.value,!t){n.next=14;break}return n.delegateYield(t(l,o++,e),"t0",10);case 10:p=n.t0,r.has(p)||(i.push(l),r.add(p)),n.next=15;break;case 14:r.has(l)||(i.push(l),r.add(l));case 15:n.next=6;break;case 17:n.next=22;break;case 19:n.prev=19,n.t1=n.catch(4),c.e(n.t1);case 22:return n.prev=22,c.f(),n.finish(22);case 25:return n.abrupt("return",i);case 26:case"end":return n.stop()}}),a,null,[[4,19,22,25]])}}(at),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueByAsync=void 0;var t=(0,ue.wrapAsPromiseAndYieldFn)(at.uniqueBy);e.uniqueByAsync=t}(nt),function(e){var t={sortAsync:!0,findAsync:!0,findIndexAsync:!0,mapAsync:!0,filterAsync:!0,reduceAsync:!0,appendAsync:!0,concatAsync:!0,forEachAsync:!0,someAsync:!0,includesAsync:!0,indexOfAsync:!0,lastIndexOfAsync:!0,keyByAsync:!0,groupByAsync:!0,uniqueByAsync:!0},r=ce,n=be,a=ve;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"sortAsync",{enumerable:!0,get:function(){return s.sortAsync}}),Object.defineProperty(e,"findAsync",{enumerable:!0,get:function(){return i.findAsync}}),Object.defineProperty(e,"findIndexAsync",{enumerable:!0,get:function(){return o.findIndexAsync}}),Object.defineProperty(e,"mapAsync",{enumerable:!0,get:function(){return c.mapAsync}}),Object.defineProperty(e,"filterAsync",{enumerable:!0,get:function(){return u.filterAsync}}),Object.defineProperty(e,"reduceAsync",{enumerable:!0,get:function(){return l.reduceAsync}}),Object.defineProperty(e,"appendAsync",{enumerable:!0,get:function(){return p.appendAsync}}),Object.defineProperty(e,"concatAsync",{enumerable:!0,get:function(){return f.concatAsync}}),Object.defineProperty(e,"forEachAsync",{enumerable:!0,get:function(){return d.forEachAsync}}),Object.defineProperty(e,"someAsync",{enumerable:!0,get:function(){return h.someAsync}}),Object.defineProperty(e,"includesAsync",{enumerable:!0,get:function(){return b.includesAsync}}),Object.defineProperty(e,"indexOfAsync",{enumerable:!0,get:function(){return m.indexOfAsync}}),Object.defineProperty(e,"lastIndexOfAsync",{enumerable:!0,get:function(){return y.lastIndexOfAsync}}),Object.defineProperty(e,"keyByAsync",{enumerable:!0,get:function(){return v.keyByAsync}}),Object.defineProperty(e,"groupByAsync",{enumerable:!0,get:function(){return g.groupByAsync}}),Object.defineProperty(e,"uniqueByAsync",{enumerable:!0,get:function(){return k.uniqueByAsync}}),Object.keys(r).forEach((function(n){"default"===n||"__esModule"===n||Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===r[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[n]}})})),Object.keys(n).forEach((function(r){"default"===r||"__esModule"===r||Object.prototype.hasOwnProperty.call(t,r)||r in e&&e[r]===n[r]||Object.defineProperty(e,r,{enumerable:!0,get:function(){return n[r]}})})),Object.keys(a).forEach((function(r){"default"===r||"__esModule"===r||Object.prototype.hasOwnProperty.call(t,r)||r in e&&e[r]===a[r]||Object.defineProperty(e,r,{enumerable:!0,get:function(){return a[r]}})}));var s=Pe,i=_e,o=Le,c=Fe,u=Be,l=De,p=Ne,f=Ue,d=$e,h=Ge,b=He,m=Je,y=Ke,v=Qe,g=tt,k=nt}(oe);var st={};!function(e){function t(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,s=function(){};return{s:s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return e.done,e},e:function(e){i=!0,e},f:function e(){try{e||null==n.return||n.return()}finally{if(i)throw undefined}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.update=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if("undefined"==typeof window)throw new Error("Requires a browser to run");var a=!1,i=null,o=new Promise((function(t,n){i=t;var o=e.next?e:e.apply(void 0,r);s((function e(){if(a)o.return();else{try{var r=o.next(),i=r.value;if(r.done)return void t(i)}catch(c){return void n(c)}s(e)}}))}));return o.terminate=function(e){a=!0,i&&i(e)},o};var n=!1,a=[];function s(e){if("undefined"==typeof window)throw new Error("Cannot run without a browser");0!==a.length||n||(n=!0,requestAnimationFrame(i)),a.push(e),1e4<a.length&&(a=a.slice(-9e3))}function i(){var e=a;e.length?requestAnimationFrame(i):n=!1,a=[];var r,s=t(e);try{for(s.s();!(r=s.n()).done;){(0,r.value)()}}catch(o){s.e(o)}finally{s.f()}}}(st);var it={};!function(e){var t=(0,z.exports)(ee);Object.defineProperty(e,"__esModule",{value:!0}),e.singleton=function(e,r){var n=null,a=[],s=function(){return n&&(a.forEach((function(e){return e.terminate()})),a=[],n.terminate(r)),n=s._promise=(0,t.default)(e.apply(void 0,arguments))};return s.join=function(e){return a.push(e),e},s}}(it);var ot={};!function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.pipe=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return o=(0,n.default)(r.default.mark((function e(n){var i,o,c,u,l;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n,o=s(t.flat(1/0)),e.prev=2,o.s();case 4:if((c=o.n()).done){e.next=25;break}if(u=c.value){e.next=8;break}return e.abrupt("continue",23);case 8:if(!(l=u.call(this,i))){e.next=23;break}if(!l.next){e.next=16;break}return e.next=13,(0,a.default)(l);case 13:i=e.sent,e.next=23;break;case 16:if(!l.then){e.next=22;break}return e.next=19,l;case 19:i=e.sent,e.next=23;break;case 22:i=l;case 23:e.next=4;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(2),o.e(e.t0);case 30:return e.prev=30,o.f(),e.finish(30);case 33:return e.abrupt("return",i);case 34:case"end":return e.stop()}}),e,this,[[2,27,30,33]])}))),function(){return o.apply(this,arguments)};var o};var r=t(Q),n=t(te.exports),a=t(ee);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return e.done,e},e:function(e){s=!0,e},f:function e(){try{e||null==r.return||r.return()}finally{if(s)throw undefined}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}}(ot);var ct={};!function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.compose=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return i=(0,n.default)(r.default.mark((function e(n){var s,i,o,c,u;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=n,i=t.flat(1/0),o=i.length-1;case 3:if(!(0<=o)){e.next=25;break}if(c=i[o]){e.next=7;break}return e.abrupt("continue",22);case 7:if(!(u=c.call(this,s))){e.next=22;break}if(!u.next){e.next=15;break}return e.next=12,(0,a.default)(u);case 12:s=e.sent,e.next=22;break;case 15:if(!u.then){e.next=21;break}return e.next=18,u;case 18:s=e.sent,e.next=22;break;case 21:s=u;case 22:o--,e.next=3;break;case 25:return e.abrupt("return",s);case 26:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)};var i};var r=t(Q),n=t(te.exports),a=t(ee)}(ct);var ut={};!function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.tap=function(e){return t=(0,n.default)(r.default.mark((function t(n){var s;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(s=e.call(this,n))){t.next=10;break}if(!s.next){t.next=7;break}return t.next=5,(0,a.default)(s);case 5:t.next=10;break;case 7:if(!s.then){t.next=10;break}return t.next=10,s;case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)};var t};var r=t(Q),n=t(te.exports),a=t(ee)}(ut);var lt={};!function(e){var t=(0,z.exports)(ee);Object.defineProperty(e,"__esModule",{value:!0}),e.branch=function(e){return function(r){var n=e.call(this,r);return n&&(n.next?(0,t.default)(n).catch(console.error):n.then&&n.catch(console.error)),r}}}(lt);var pt={};!function(e){var t=z.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.repeat=function(e,t){return s=(0,n.default)(r.default.mark((function n(s){var i,o;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=s,o=0;case 2:if(!(o<t)){r.next=17;break}if(!(i=e.call(this,i)).next){r.next=10;break}return r.next=7,(0,a.default)(i);case 7:i=r.sent,r.next=14;break;case 10:if(!i.then){r.next=14;break}return r.next=13,i;case 13:i=r.sent;case 14:o++,r.next=2;break;case 17:return r.abrupt("return",i);case 18:case"end":return r.stop()}}),n,this)}))),function(){return s.apply(this,arguments)};var s};var r=t(Q),n=t(te.exports),a=t(ee)}(pt),function(e){var t={compress:!0,decompress:!0,stringify:!0,parse:!0,sort:!0,parseAsync:!0,stringifyAsync:!0,wrapAsPromiseAndYieldFn:!0,everyAsync:!0,base64Decompress:!0,base64decompressFromUTF16Async:!0,decompressAsync:!0,decompressFromEncodedURIComponentAsync:!0,decompressFromUint8ArrayAsync:!0,decompressFromUTF16Async:!0,decompressFromBase64Async:!0,base64Compress:!0,base64CompressToUTF16Async:!0,compressAsync:!0,compressToEncodedURIComponentAsync:!0,compressToUint8ArrayAsync:!0,compressToUTF16Async:!0,compressToBase64Async:!0,isObject:!0,forEach:!0,filter:!0,reduce:!0,concat:!0,append:!0,map:!0,find:!0,findIndex:!0,some:!0,every:!0,includes:!0,indexOf:!0,lastIndexOf:!0,keyBy:!0,groupBy:!0,uniqueBy:!0,sortAsync:!0,findAsync:!0,findIndexAsync:!0,mapAsync:!0,filterAsync:!0,reduceAsync:!0,appendAsync:!0,concatAsync:!0,forEachAsync:!0,someAsync:!0,includesAsync:!0,indexOfAsync:!0,lastIndexOfAsync:!0,keyByAsync:!0,groupByAsync:!0,uniqueByAsync:!0,useInternalEngine:!0,update:!0,run:!0,singleton:!0,call:!0,pipe:!0,compose:!0,tap:!0,branch:!0,repeat:!0},r=U,n=ie,a=oe,s=me;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return o.parse}}),Object.defineProperty(e,"sort",{enumerable:!0,get:function(){return u.sort}}),Object.defineProperty(e,"parseAsync",{enumerable:!0,get:function(){return p.parseAsync}}),Object.defineProperty(e,"stringifyAsync",{enumerable:!0,get:function(){return p.stringifyAsync}}),Object.defineProperty(e,"wrapAsPromiseAndYieldFn",{enumerable:!0,get:function(){return f.wrapAsPromiseAndYieldFn}}),Object.defineProperty(e,"everyAsync",{enumerable:!0,get:function(){return d.everyAsync}}),Object.defineProperty(e,"base64Decompress",{enumerable:!0,get:function(){return h.base64Decompress}}),Object.defineProperty(e,"base64decompressFromUTF16Async",{enumerable:!0,get:function(){return h.base64decompressFromUTF16Async}}),Object.defineProperty(e,"decompressAsync",{enumerable:!0,get:function(){return h.decompressAsync}}),Object.defineProperty(e,"decompressFromEncodedURIComponentAsync",{enumerable:!0,get:function(){return h.decompressFromEncodedURIComponentAsync}}),Object.defineProperty(e,"decompressFromUint8ArrayAsync",{enumerable:!0,get:function(){return h.decompressFromUint8ArrayAsync}}),Object.defineProperty(e,"decompressFromUTF16Async",{enumerable:!0,get:function(){return h.decompressFromUTF16Async}}),Object.defineProperty(e,"decompressFromBase64Async",{enumerable:!0,get:function(){return h.decompressFromBase64Async}}),Object.defineProperty(e,"base64Compress",{enumerable:!0,get:function(){return h.base64Compress}}),Object.defineProperty(e,"base64CompressToUTF16Async",{enumerable:!0,get:function(){return h.base64CompressToUTF16Async}}),Object.defineProperty(e,"compressAsync",{enumerable:!0,get:function(){return h.compressAsync}}),Object.defineProperty(e,"compressToEncodedURIComponentAsync",{enumerable:!0,get:function(){return h.compressToEncodedURIComponentAsync}}),Object.defineProperty(e,"compressToUint8ArrayAsync",{enumerable:!0,get:function(){return h.compressToUint8ArrayAsync}}),Object.defineProperty(e,"compressToUTF16Async",{enumerable:!0,get:function(){return h.compressToUTF16Async}}),Object.defineProperty(e,"compressToBase64Async",{enumerable:!0,get:function(){return h.compressToBase64Async}}),Object.defineProperty(e,"isObject",{enumerable:!0,get:function(){return b.isObject}}),Object.defineProperty(e,"forEach",{enumerable:!0,get:function(){return m.forEach}}),Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return y.filter}}),Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return v.reduce}}),Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return g.concat}}),Object.defineProperty(e,"append",{enumerable:!0,get:function(){return k.append}}),Object.defineProperty(e,"map",{enumerable:!0,get:function(){return x.map}}),Object.defineProperty(e,"find",{enumerable:!0,get:function(){return w.find}}),Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return A.findIndex}}),Object.defineProperty(e,"some",{enumerable:!0,get:function(){return T.some}}),Object.defineProperty(e,"every",{enumerable:!0,get:function(){return S.every}}),Object.defineProperty(e,"includes",{enumerable:!0,get:function(){return O.includes}}),Object.defineProperty(e,"indexOf",{enumerable:!0,get:function(){return j.indexOf}}),Object.defineProperty(e,"lastIndexOf",{enumerable:!0,get:function(){return P.lastIndexOf}}),Object.defineProperty(e,"keyBy",{enumerable:!0,get:function(){return E.keyBy}}),Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return _.groupBy}}),Object.defineProperty(e,"uniqueBy",{enumerable:!0,get:function(){return C.uniqueBy}}),Object.defineProperty(e,"sortAsync",{enumerable:!0,get:function(){return L.sortAsync}}),Object.defineProperty(e,"findAsync",{enumerable:!0,get:function(){return M.findAsync}}),Object.defineProperty(e,"findIndexAsync",{enumerable:!0,get:function(){return F.findIndexAsync}}),Object.defineProperty(e,"mapAsync",{enumerable:!0,get:function(){return R.mapAsync}}),Object.defineProperty(e,"filterAsync",{enumerable:!0,get:function(){return B.filterAsync}}),Object.defineProperty(e,"reduceAsync",{enumerable:!0,get:function(){return I.reduceAsync}}),Object.defineProperty(e,"appendAsync",{enumerable:!0,get:function(){return D.appendAsync}}),Object.defineProperty(e,"concatAsync",{enumerable:!0,get:function(){return Y.concatAsync}}),Object.defineProperty(e,"forEachAsync",{enumerable:!0,get:function(){return N.forEachAsync}}),Object.defineProperty(e,"someAsync",{enumerable:!0,get:function(){return q.someAsync}}),Object.defineProperty(e,"includesAsync",{enumerable:!0,get:function(){return z.includesAsync}}),Object.defineProperty(e,"indexOfAsync",{enumerable:!0,get:function(){return $.indexOfAsync}}),Object.defineProperty(e,"lastIndexOfAsync",{enumerable:!0,get:function(){return G.lastIndexOfAsync}}),Object.defineProperty(e,"keyByAsync",{enumerable:!0,get:function(){return V.keyByAsync}}),Object.defineProperty(e,"groupByAsync",{enumerable:!0,get:function(){return H.groupByAsync}}),Object.defineProperty(e,"uniqueByAsync",{enumerable:!0,get:function(){return W.uniqueByAsync}}),Object.defineProperty(e,"useInternalEngine",{enumerable:!0,get:function(){return J.useInternalEngine}}),Object.defineProperty(e,"update",{enumerable:!0,get:function(){return Z.update}}),Object.defineProperty(e,"run",{enumerable:!0,get:function(){return K.run}}),Object.defineProperty(e,"singleton",{enumerable:!0,get:function(){return X.singleton}}),Object.defineProperty(e,"call",{enumerable:!0,get:function(){return Q.call}}),Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return te.pipe}}),Object.defineProperty(e,"compose",{enumerable:!0,get:function(){return ne.compose}}),Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return ae.tap}}),Object.defineProperty(e,"branch",{enumerable:!0,get:function(){return he.branch}}),Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return ke.repeat}}),e.decompress=e.compress=void 0;var i=je,o=ge,c=ye;Object.keys(c).forEach((function(r){"default"===r||"__esModule"===r||Object.prototype.hasOwnProperty.call(t,r)||r in e&&e[r]===c[r]||Object.defineProperty(e,r,{enumerable:!0,get:function(){return c[r]}})}));var u=Ee,l=de;Object.keys(l).forEach((function(r){"default"===r||"__esModule"===r||Object.prototype.hasOwnProperty.call(t,r)||r in e&&e[r]===l[r]||Object.defineProperty(e,r,{enumerable:!0,get:function(){return l[r]}})})),Object.keys(r).forEach((function(n){"default"===n||"__esModule"===n||Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===r[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[n]}})})),Object.keys(n).forEach((function(r){"default"===r||"__esModule"===r||Object.prototype.hasOwnProperty.call(t,r)||r in e&&e[r]===n[r]||Object.defineProperty(e,r,{enumerable:!0,get:function(){return n[r]}})})),Object.keys(a).forEach((function(r){"default"===r||"__esModule"===r||Object.prototype.hasOwnProperty.call(t,r)||r in e&&e[r]===a[r]||Object.defineProperty(e,r,{enumerable:!0,get:function(){return a[r]}})})),Object.keys(s).forEach((function(r){"default"===r||"__esModule"===r||Object.prototype.hasOwnProperty.call(t,r)||r in e&&e[r]===s[r]||Object.defineProperty(e,r,{enumerable:!0,get:function(){return s[r]}})}));var p=ve,f=ue,d=ce,h=be,b=fe,m=pe,y=Ie,v=Ye,g=ze,k=qe,x=Re,w=Ce,A=Me,T=Ve,S=le,O=We,j=Ze,P=Xe,E=et,_=rt,C=at,L=Pe,M=_e,F=Le,R=Fe,B=Be,I=De,D=Ne,Y=Ue,N=$e,q=Ge,z=He,$=Je,G=Ke,V=Qe,H=tt,W=nt,J=re,Z=st,K=ee,X=it,Q=se,te=ot,ne=ct,ae=ut,he=lt,ke=pt,xe=c.LZStringGenerator.compress;e.compress=xe;var we=c.LZStringGenerator.decompress;e.decompress=we}(b);var ft=u({name:"XmasSettingsPanel",i18n:{messages:{en:{requests:"DRT&nbsp;Requests",passengers:"Passengers",search:"Search",showhide:"Show/Hide",vehicles:"DRT Vehicles",routes:"Routes",speed:"Speed",backgroundTraffic:"All Traffic"},de:{requests:"DRT&nbsp;Anfragen",passengers:"Passagiere",search:"Suche",showhide:"Ein-/Ausblenden",vehicles:"DRT Fahrzeuge",routes:"Routen",speed:"Geschwindigkeit",backgroundTraffic:"Alle Fahrzeuge"}}},components:{ToggleButton:p.exports.ToggleButton},props:{items:{type:Object,required:!0}}});const dt={};var ht=v(ft,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"settings-panel-content"},[r("h4",[e._v(e._s(e.$t("showhide")))]),r("div",{staticClass:"items"},e._l(Object.keys(e.items),(function(t){return r("div",{key:t,staticClass:"row"},[r("toggle-button",{staticClass:"toggle",attrs:{width:40,value:e.items[t],labels:!1,color:{checked:"#4b7cc4",unchecked:"#222"}},on:{change:function(r){return e.$emit("click",t)}}}),r("label",{domProps:{innerHTML:e._s(e.$t(t))}})],1)})),0)])}),[],!1,bt,"7d83036b",null,null);function bt(e){for(let t in dt)this[t]=dt[t]}var mt=function(){return ht.exports}();class yt{constructor(e){s(this,"fileApi"),s(this,"linkIdLookup",{}),s(this,"network"),s(this,"eventWorker"),s(this,"eventLayers",[]),s(this,"range",[1/0,-1/0]),s(this,"timeRange",[1/0,-1/0]),s(this,"$emit",(()=>{})),s(this,"boundBox",[]),s(this,"params"),this.params=((e,s)=>{for(var i in s||(s={}))r.call(s,i)&&a(e,i,s[i]);if(t)for(var i of t(s))n.call(s,i)&&a(e,i,s[i]);return e})({},e),this.fileApi=new _(e.fileSystem),e.$emit&&(this.$emit=e.$emit),e.boundBox&&(this.boundBox=e.boundBox)}async loadFiles(){const{network:e,linkIdLookup:t}=await this.loadNetwork();this.network=e,this.linkIdLookup=t;try{let e=`${this.params.subfolder}/${this.params.vizDetails.events}`;return await this.streamEventFile(e)}catch(r){throw console.error(r),Error(""+r)}return[]}async loadNetwork(){let e=this.params.vizDetails.events.replace("events.xml","network.xml");const t=await this.params.dataManager.getRoadNetwork(e,this.params.subfolder,Object.assign({projection:"25833"},this.params.vizDetails)),r={};return t.linkIds.forEach(((e,t)=>{r[`${e}`]=t})),{network:t,linkIdLookup:r}}streamEventFile(e){return new Promise(((t,r)=>{const n=(e,r)=>{console.log("FINAL time",this.timeRange),this.$emit("finished"),this.eventWorker.terminate(),console.log("DONE: layers",this.eventLayers.length),console.log("ALL DONE",{totalRows:e,data:r.range,time:this.timeRange}),this.range=r.range,t(this.eventLayers)};this.$emit("status","Loading file...");let a=0;this.range=[1/0,-1/0],this.timeRange=[1/0,-1/0],this.eventWorker&&this.eventWorker.terminate(),this.eventLayers=[],this.eventWorker=new C;const s=Intl.NumberFormat();this.eventWorker.onmessage=async e=>{const t=e.data;if(t.status)this.$emit("status",t.status);else{if(t.error)throw Error(t.error);if(t.finished)return void n(a,t);{const e=t.events;console.log(e.length),a+=e.length,this.$emit("status","Loading "+s.format(a)+" events..."),this.timeRange=[Math.min(this.timeRange[0],e[0].time),Math.max(this.timeRange[1],e[e.length-1].time)],this.timeRange=[Math.min(this.timeRange[0],t.vehicleTrips[0].t0),Math.max(this.timeRange[1],t.vehicleTrips[t.vehicleTrips.length-1].t1)];let r=t.vehicleTrips;if(console.log("ROIGINAL LENGHT",r.length),this.boundBox.length){const e=this.network.source,n=this.network.dest;r=t.vehicleTrips.filter((t=>{const r=2*this.linkIdLookup[t.link];return e[r]>this.boundBox[0][0]&&e[r]<this.boundBox[1][0]&&e[r+1]>this.boundBox[0][1]&&e[r+1]<this.boundBox[1][1]&&n[r]>this.boundBox[0][0]&&n[r]<this.boundBox[1][0]&&n[r+1]>this.boundBox[0][1]&&n[r+1]<this.boundBox[1][1]})),console.log("FILTERED LENGTH:",r.length)}const n=r.length,i={locO:new Float32Array(2*n).fill(NaN),locD:new Float32Array(2*n).fill(NaN),t0:new Float32Array(n).fill(NaN),t1:new Float32Array(n).fill(NaN)};for(let t=0;t<n;t++){const e=r[t],a=2*this.linkIdLookup[e.link];i.locO[2*t+0]=this.network.source[0+a],i.locO[2*t+1]=this.network.source[1+a],i.locD[2*t+0]=this.network.dest[0+a],i.locD[2*t+1]=this.network.dest[1+a],0==t?(i.locO[2*t+0]=.5*(i.locO[2*t+0]+i.locD[2*t+0]),i.locO[2*t+1]=.5*(i.locO[2*t+1]+i.locD[2*t+1])):t==n-1&&(i.locD[2*t+0]=.5*(i.locO[2*t+0]+i.locD[2*t+0]),i.locD[2*t+1]=.5*(i.locO[2*t+1]+i.locD[2*t+1])),i.t0[t]=e.t0,i.t1[t]=e.t1}this.eventLayers.push({vehicles:i})}}},this.eventWorker.postMessage({filePath:e,fileSystem:this.params.fileSystem,projection:this.params.vizDetails.projection,boundBox:this.boundBox})}))}}class vt extends D{getShaders(){const e=super.getShaders();return e.inject={"vs:#decl":"        attribute float timeStart;\n        attribute float timeEnd;\n        uniform float currentTime;\n        uniform float searchFlag;\n        varying float vTime;\n      ","vs:#main-start":"        if (searchFlag == 1.0) {\n          vTime = 999.0;\n        } else if (timeEnd == -1.0 || timeStart > currentTime || timeEnd < currentTime ) {\n          vTime = -1.0;\n          return;\n        } else {\n          float nearBeginning = currentTime - timeStart;\n          float nearEnd = timeEnd - currentTime;\n          vTime = min(nearBeginning, nearEnd);\n        }\n      ","fs:#decl":"        uniform float currentTime;\n        uniform float searchFlag;\n        varying float vTime;\n      ","fs:#main-start":"      if (searchFlag == 0.0 && vTime == -1.0 ) discard;\n      ","fs:DECKGL_FILTER_COLOR":"        if (vTime <= 10.0) color.a *= (vTime / 10.0);\n      "},e}initializeState(e){super.initializeState(e);this.getAttributeManager().addInstanced({timeStart:{size:1,accessor:"getTimeStart"},timeEnd:{size:1,accessor:"getTimeEnd"}})}draw(e){const{currentTime:t}=this.props;e.uniforms=Object.assign({},e.uniforms,{currentTime:t}),super.draw(e)}}vt.layerName="DrtRequestArcLayer",vt.defaultProps={currentTime:{type:"number",value:0,min:0},getTimeStart:{type:"accessor",value:null},getTimeEnd:{type:"accessor",value:null},searchFlag:{type:"number",value:0}};const gt={marker:{x:0,y:0,width:128,height:128,mask:!0},info:{x:128,y:0,width:128,height:128,mask:!0},vehicle:{x:128,y:128,width:128,height:128,mask:!0},diamond:{x:0,y:128,width:128,height:128,mask:!1}},kt={vehicleColor:[200,130,250],trailColor0:[235,235,25],trailColor1:[23,184,190],effects:[new N({ambientLight:new Y({color:[255,255,255],intensity:1}),pointLight:new S({color:[255,255,255],intensity:2,position:[-74.05,40.7,8e3]})})]},xt=0,wt=1,At=2,Tt=3,St=4,Ot=6;const jt=u({name:"XmasVehicleAnimation",i18n:{messages:{en:{requests:"DRT Requests",passengers:"Passengers",search:"Search",showhide:"Show/Hide",vehicles:"Vehicles",routes:"Routes",speed:"Speed"},de:{requests:"DRT Anfragen",passengers:"Passagiere",search:"Suche",showhide:"Ein-/Ausblenden",vehicles:"DRT Fahrzeuge",routes:"DRT Routen",speed:"Geschwindigkeit"}}},components:{CollapsiblePanel:T,SettingsPanel:mt,LegendColors:function(e){const t={display:"flex"},r={boxSizing:"border-box",float:"left",marginRight:"0.5rem"},n=e.items.map((n=>c.createElement("li",{key:n.value+n.value[0],style:e.mobile?r:t},n.label&&c.createElement("div",{style:{margin:"0 0.5rem 0.0rem 0",fontWeight:"bold"}},n.label),c.createElement("div",{style:{width:e.mobile?"3rem":"100%",height:"3px",marginTop:"0.5rem",backgroundColor:`rgb(${n.color})`}}))));return c.createElement("div",null,c.createElement("h4",{style:{textAlign:"left",fontWeight:"bold",margin:"1rem 0 0.25rem 0",fontSize:"0.8rem"}},e.title),c.createElement("p",null,e.description),c.createElement("ul",{style:{listStyle:"none",padding:0,margin:0}},n))},TripViz:function(e){const{simulationTime:t,paths:r,traces:n,drtRequests:a,settingsShowLayers:s,center:i,dark:o,vehicleLookup:u,searchEnabled:p,onClick:f,viewId:d,trafficLayers:h}=e,b=kt,[m,y]=l.exports.useState(i?{center:[16,42],longitude:i[0],latitude:i[1],pitch:0,bearing:0,zoom:10}:Object.assign({},g.state.viewState));x[d]=()=>{y(g.state.viewState)};const[v,w]=l.exports.useState({}),A=[];return s.backgroundTraffic&&h.forEach(((e,r)=>{const n=e.vehicles.t0[0]>t||e.vehicles.t1[e.vehicles.t1.length-1]<t;A.push(new L({data:{length:e.vehicles.t0.length,attributes:{getTimeStart:{value:e.vehicles.t0,size:1},getTimeEnd:{value:e.vehicles.t1,size:1},getPathStart:{value:e.vehicles.locO,size:2},getPathEnd:{value:e.vehicles.locD,size:2}}},id:"vehicles"+r,getColor:[255,32,32],iconMoving:"vehicle",iconStill:"diamond",getSize:20,opacity:1,currentTime:t,shadowEnabled:!0,iconAtlas:"/icon-atlas.png",iconMapping:gt,sizeScale:1,billboard:!1,pickable:!0,depthTest:!0,autoHighlight:!1,highlightColor:[255,0,255],parameters:{depthTest:!1},visible:!n}))})),s.routes&&A.push(new O({id:"Routen",data:n,currentTime:t,getSourcePosition:e=>e.p0,getTargetPosition:e=>e.p1,getTimeStart:e=>e.t0,getTimeEnd:e=>e.t1,getColor:t=>e.colors[t.occ],getWidth:3,opacity:.8,widthMinPixels:1,rounded:!1,shadowEnabled:!1,searchFlag:p?1:0,pickable:!0,autoHighlight:!0,highlightColor:[255,0,255],onHover:w})),s.vehicles&&A.push(new j({id:"Vehicles",data:r,getPathStart:e=>e.p0,getPathEnd:e=>e.p1,getTimeStart:e=>e.t0,getTimeEnd:e=>e.t1,getIcon:e=>"vehicle",getColor:t=>e.colors[t.occ],iconMoving:"vehicle",iconStill:"diamond",getSize:128,opacity:1,currentTime:t,shadowEnabled:!1,noAlloc:!0,iconAtlas:"/simwrapper/icon-atlas.png",iconMapping:gt,sizeScale:.5,billboard:!1,pickable:!0,depthTest:!0,autoHighlight:!1,highlightColor:[255,0,255],onHover:w,parameters:{depthTest:!1}})),s.requests&&A.push(new vt({id:"DRT Requests",data:a,currentTime:t,getSourcePosition:e=>[e[wt],e[At]],getTargetPosition:e=>[e[Tt],e[St]],getTimeStart:e=>e[xt],getTimeEnd:e=>e[Ot],getSourceColor:[0,255,64],getTargetColor:[0,255,64],getWidth:2,opacity:.5,searchFlag:p?1:0})),c.createElement(B,{layers:A,effects:b.effects,pickingRadius:5,viewState:m,controller:!0,getCursor:()=>"pointer",onClick:function(){console.log(v),v.object?f(v.object.v):f(null)},onViewStateChange:e=>{g.commit("setMapCamera",e.viewState)}},c.createElement(I,{mapStyle:g.getters.mapStyle,mapboxApiAccessToken:k}),function({hoverInfo:e}){const{object:t,x:r,y:n}=e;if(!t)return null;const a=u[t.v];return c.createElement("div",{className:"tooltip",style:{fontSize:"0.8rem",backgroundColor:"#ddddeedd",borderLeft:"6px solid green",boxShadow:"2.5px 2px 4px rgba(0,0,0,0.25)",color:"#223",padding:"1rem 1rem",position:"absolute",left:r+40,top:n-30}},c.createElement("big",null,c.createElement("b",null,a)),c.createElement("div",null,"Passagiere: ",t.occ," "))}({hoverInfo:v}))},PlaybackControls:P,ToggleButton:p.exports.ToggleButton,ZoomButtons:E},props:{root:{type:String,required:!0},subfolder:{type:String,required:!0},yamlConfig:String,config:Object,thumbnail:Boolean},computed:{fileApi(){return new _(this.fileSystem,g)},fileSystem(){const e=this.$store.state.svnProjects.filter((e=>e.slug===this.root));if(0===e.length)throw console.log("no such project"),Error;return e[0]},urlThumbnail(){return this.thumbnailUrl},textColor(){return this.myState.colorScheme===w.DarkMode?{text:"white",bg:"#181518aa"}:{text:"#3498db",bg:"#eeeef480"}}},data:()=>{const e={0:[140,140,160],1:[20,224,224],2:[240,240,40],3:[240,110,30]};return{viewId:Math.floor(1e12*Math.random()),COLOR_OCCUPANCY:e,SETTINGS:{vehicles:!0,backgroundTraffic:!0,routes:!0,requests:!0},legendItems:Object.keys(e).map((t=>({type:A.line,color:e[t],value:t,label:t}))),legendRequests:[{type:A.line,color:[255,0,255],value:0,label:""}],vizDetails:{network:"",drtTrips:"",projection:"",title:"",description:"",thumbnail:"",center:[13.45,52.5],zoom:12,bearing:0,pitch:20,mapIsIndependent:!1,events:"",eventBlobs:[],theme:""},myState:{statusMessage:"",clock:"00:00",colorScheme:w.DarkMode,isRunning:!1,isShowingHelp:!1,subfolder:"",yamlConfig:"",thumbnail:!1,data:[]},timeStart:0,timeEnd:86400,traces:h([]),traceStart:null,traceEnd:null,traceVehicle:null,paths:h([]),pathStart:null,pathEnd:null,pathVehicle:null,requests:h([]),requestStart:null,requestEnd:null,requestVehicle:null,simulationTime:21600,timeElapsedSinceLastFrame:0,searchTerm:"",searchEnabled:!1,globalState:g.state,isDarkMode:g.state.colorScheme===w.DarkMode,isLoaded:!1,showHelp:!1,speedStops:[-10,-5,-2,-1,-.5,-.25,0,.25,.5,1,2,5,10],speed:1,trafficLayers:[],legendBits:[],isEmbedded:!1,thumbnailUrl:"url('assets/thumbnail.jpg') no-repeat;",vehicleLookup:[],vehicleLookupString:{},isPausedDueToHiding:!1}},watch:{"$store.state.viewState"(){this.vizDetails.mapIsIndependent||x[this.viewId]&&x[this.viewId]()},async"globalState.authAttempts"(){console.log("AUTH CHANGED - Reload"),this.yamlConfig||this.buildRouteFromUrl(),await this.getVizDetails()},"globalState.colorScheme"(){this.isDarkMode=this.globalState.colorScheme===w.DarkMode,this.updateLegendColors()},searchTerm(){var e,t,r,n,a,s,i,o;const c=this.vehicleLookupString[this.searchTerm];c>-1?(console.log("vehicle",c),null==(e=this.pathVehicle)||e.filterExact(c),null==(t=this.traceVehicle)||t.filterExact(c),null==(r=this.requestVehicle)||r.filterExact(c),null==(n=this.requestStart)||n.filterAll(),null==(a=this.requestEnd)||a.filterAll(),this.searchEnabled=!0):(console.log("nope"),null==(s=this.pathVehicle)||s.filterAll(),null==(i=this.traceVehicle)||i.filterAll(),null==(o=this.requestVehicle)||o.filterAll(),this.searchEnabled=!1),this.updateDatasetFilters()}},async mounted(){if(g.commit("setFullScreen",!this.thumbnail),this.myState.thumbnail=this.thumbnail,this.myState.yamlConfig=this.yamlConfig||"",this.myState.subfolder=this.subfolder,this.setEmbeddedMode(),await this.getVizDetails(),this.thumbnail)return;this.showHelp=!1,this.updateLegendColors(),this.setWallClock(),this.myState.statusMessage="/ Dateien laden...",console.log("loading files");const{trips:e,drtRequests:t}=await this.loadFiles();console.log("parsing vehicle motion"),this.myState.statusMessage=`${this.$t("vehicles")}...`,this.paths=await this.parseVehicles(e),this.pathStart=this.paths.dimension((e=>e.t0)),this.pathEnd=this.paths.dimension((e=>e.t1)),this.pathVehicle=this.paths.dimension((e=>e.v)),console.log("Routes..."),this.myState.statusMessage=`${this.$t("routes")}...`,this.traces=await this.parseRouteTraces(e),this.traceStart=this.traces.dimension((e=>e.t0)),this.traceEnd=this.traces.dimension((e=>e.t1)),this.traceVehicle=this.traces.dimension((e=>e.v)),console.log("Requests..."),this.myState.statusMessage=`${this.$t("requests")}...`,this.requests=await this.parseDrtRequests(t),this.requestStart=this.requests.dimension((e=>e[0])),this.requestEnd=this.requests.dimension((e=>e[6])),this.requestVehicle=this.requests.dimension((e=>e[5])),this.loadBackgroundTraffic(),console.log("GO!"),this.myState.statusMessage="",document.addEventListener("visibilitychange",this.handleVisibilityChange,!1),this.myState.isRunning=!0,this.timeElapsedSinceLastFrame=Date.now(),this.animate()},beforeDestroy(){document.removeEventListener("visibilityChange",this.handleVisibilityChange),g.commit("setFullScreen",!1),this.$store.commit("setFullScreen",!1),this.myState.isRunning=!1},methods:{handleClick(e){if(null===e)return void(this.searchTerm="");const t=this.vehicleLookup[e];console.log(t),this.searchTerm===t?this.searchTerm="":this.searchTerm=t},updateLegendColors(){},setWallClock(){const e=Math.floor(this.simulationTime/3600),t=Math.floor(this.simulationTime/60)%60;this.myState.clock=`${e<10?"0":""}${e}${t<10?":0":":"}${t}`},setTime(e){var t,r,n;this.simulationTime=e,this.setWallClock(),this.traceStart&&this.pathStart&&this.requestStart&&(this.pathStart.filter([0,this.simulationTime]),null==(t=this.pathEnd)||t.filter([this.simulationTime,1/0]),this.searchEnabled||(this.traceStart.filter([0,this.simulationTime]),null==(r=this.traceEnd)||r.filter([this.simulationTime,1/0]),this.requestStart.filter([0,this.simulationTime]),null==(n=this.requestEnd)||n.filter([this.simulationTime,1/0]))),this.$options.paths=this.paths.allFiltered(),this.$options.traces=this.traces.allFiltered(),this.$options.drtRequests=this.requests.allFiltered()},toggleSimulation(){console.log("CLICK !!!"),this.myState.isRunning=!this.myState.isRunning,this.timeElapsedSinceLastFrame=Date.now(),this.myState.isRunning&&0===this.speed&&(this.speed=1),this.myState.isRunning&&this.animate()},async loadBackgroundTraffic(){if(this.vizDetails.eventBlobs)for(const e of this.vizDetails.eventBlobs){const t=await this.loadBackgroundChunk(e);this.trafficLayers.push(t)}else if(this.vizDetails.events){const e=new yt({fileSystem:this.fileSystem,dataManager:new M(this.root,this.subfolder),vizDetails:this.vizDetails,subfolder:this.subfolder}),t=await e.loadFiles();this.trafficLayers=t,this.exportJSON(t)}},async loadBackgroundChunk(e){return new Promise(((t,r)=>{console.log("load chunk:",e);const n=new F;n.onmessage=e=>{const r=new Float32Array(e.data.buffer).length/6,n={vehicles:{locO:new Float32Array(e.data.buffer,0,2*r),locD:new Float32Array(e.data.buffer,4*r*2,2*r),t0:new Float32Array(e.data.buffer,4*r*4,r),t1:new Float32Array(e.data.buffer,4*r*5,r)}};t(n)},n.postMessage({filePath:this.myState.subfolder+"/"+e,fileSystem:this.fileSystem})}))},exportJSON(e){for(const t of e){const e=new Blob([t.vehicles.locO,t.vehicles.locD,t.vehicles.t0,t.vehicles.t1],{type:"octet/stream"}),r=URL.createObjectURL(e);let n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download","events.blob"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}},setEmbeddedMode(){"embed"in this.$route.query&&(console.log("EMBEDDED MODE"),this.isEmbedded=!0,this.$store.commit("setShowLeftBar",!1),this.$store.commit("setFullWidth",!0))},async handleSettingChange(e){console.log(e),this.SETTINGS[e]=!this.SETTINGS[e],this.updateDatasetFilters(),this.simulationTime+=1},buildRouteFromUrl(){const e=this.$route.params;if(!e.project||!e.pathMatch)return void console.log("I CANT EVEN: NO PROJECT/PARHMATCH");const t=1+e.pathMatch.lastIndexOf("/"),r=e.pathMatch.substring(0,t),n=e.pathMatch.substring(t);this.myState.subfolder=r,this.myState.yamlConfig=n},async getVizDetails(){console.log("GETVIZ");try{const e=this.myState.yamlConfig.indexOf("/")>-1?this.myState.yamlConfig:this.myState.subfolder+"/"+this.myState.yamlConfig,t=await this.fileApi.getFileText(e);this.vizDetails=d.parse(t)}catch(t){console.log("failed");const e=t;this.fileSystem.needPassword&&401===e.status&&g.commit("requestLogin",this.fileSystem.slug)}this.vizDetails.theme&&this.$store.commit("setTheme",this.vizDetails.theme),this.vizDetails.center&&this.$store.commit("setMapCamera",{longitude:this.vizDetails.center[0],latitude:this.vizDetails.center[1],zoom:this.vizDetails.zoom||11,pitch:this.vizDetails.pitch||20,bearing:this.vizDetails.bearing||0,jump:!0});const e=this.vizDetails.title?this.vizDetails.title:"Agent Animation";this.$emit("title",e),this.buildThumbnail(),this.isLoaded=!0},async buildThumbnail(){if(this.thumbnail&&this.vizDetails.thumbnail)try{const e=await this.fileApi.getFileBlob(this.myState.subfolder+"/"+this.vizDetails.thumbnail),t=await f.arraybuffer(e),r=R(t);r&&(this.thumbnailUrl=`center / cover no-repeat url(data:image/png;base64,${r})`)}catch(e){console.error(e)}},async parseDrtRequests(e){if(this.vehicleLookup.length)for(const r of e)try{r[5]=this.vehicleLookupString[r[5]]}catch(t){}return h(e)},async parseVehicles(e){const t=[];let r=-1;return await b.forEachAsync(e,(e=>{const n=e.path,a=e.timestamps,s=e.passengers;r++,this.vehicleLookup[r]=e.id,this.vehicleLookupString[e.id]=r;for(let i=0;i<e.path.length-1;i++)t.push({t0:a[i],t1:a[i+1],p0:n[i],p1:n[i+1],v:r,occ:s[i]})})),h(t)},updateDatasetFilters(){var e,t,r,n,a;this.traceStart&&this.pathStart&&this.requestStart&&(this.SETTINGS.routes&&(this.searchEnabled?(this.traceStart.filterAll(),null==(e=this.traceEnd)||e.filterAll()):(this.traceStart.filter([0,this.simulationTime]),null==(t=this.traceEnd)||t.filter([this.simulationTime,1/0])),this.$options.traces=this.traces.allFiltered()),this.SETTINGS.vehicles&&(this.pathStart.filter([0,this.simulationTime]),null==(r=this.pathEnd)||r.filter([this.simulationTime,1/0]),this.$options.paths=this.paths.allFiltered()),this.SETTINGS.requests&&(this.searchEnabled?(this.requestStart.filterAll(),null==(n=this.requestEnd)||n.filterAll()):(this.requestStart.filter([0,this.simulationTime]),null==(a=this.requestEnd)||a.filter([this.simulationTime,1/0])),this.$options.drtRequests=this.requests.allFiltered()))},animate(){if(this.myState.isRunning){const e=Date.now()-this.timeElapsedSinceLastFrame;this.timeElapsedSinceLastFrame+=e,this.simulationTime+=e*this.speed*.05,this.updateDatasetFilters(),this.setWallClock(),window.requestAnimationFrame(this.animate)}},handleVisibilityChange(){this.isPausedDueToHiding&&!document.hidden?(console.log("unpausing"),this.isPausedDueToHiding=!1,this.toggleSimulation()):this.myState.isRunning&&document.hidden&&(console.log("pausing"),this.isPausedDueToHiding=!0,this.toggleSimulation())},async parseRouteTraces(e){let t=-1;const r=[];return await b.forEachAsync(e,(e=>{t++;let n=e.timestamps[0],a=e.timestamps[0],s=[];for(let i=1;i<e.path.length;i++)a=e.timestamps[i],e.path[i][0]===e.path[i-1][0]&&e.path[i][1]===e.path[i-1][1]?(s.forEach((t=>{t.t1=e.timestamps[i-1]})),r.push(...s),s=[],n=a):s.push({t0:n,p0:e.path[i-1],p1:e.path[i],v:t,occ:e.passengers[i-1]});s.forEach((e=>{e.t1=a})),r.push(...s)})),h(r)},async loadFiles(){if(!this.fileApi)return{trips:[],drtRequests:{}};let e=[],t=[];try{if(this.vizDetails.drtTrips.endsWith("json")){const r=await this.fileApi.getFileJson(this.myState.subfolder+"/"+this.vizDetails.drtTrips);e=r.trips,t=r.drtRequests}else if(this.vizDetails.drtTrips.endsWith("gz")){const r=await this.fileApi.getFileBlob(this.myState.subfolder+"/"+this.vizDetails.drtTrips),n=r?await m(r):null;let a=await b.run(y.inflateAsync(n,{to:"string"}));const s=JSON.parse(a);e=s.trips,t=s.drtRequests}}catch(r){console.error(r),this.myState.statusMessage=""+r}return{trips:e,drtRequests:t}},toggleLoaded(e){this.isLoaded=e},rotateColors(){this.myState.colorScheme=this.myState.colorScheme===w.DarkMode?w.LightMode:w.DarkMode,localStorage.setItem("plugin/agent-animation/colorscheme",this.myState.colorScheme)}}});const Pt={};var Et=v(jt,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"gl-app",class:{"hide-thumbnail":!e.thumbnail},style:{background:e.urlThumbnail},attrs:{oncontextmenu:"return false"}},[e.thumbnail?e._e():r("trip-viz",{staticClass:"anim",attrs:{center:e.vizDetails.center,colors:e.COLOR_OCCUPANCY,drtRequests:e.$options.drtRequests,dark:e.globalState.isDarkMode,paths:e.$options.paths,settingsShowLayers:e.SETTINGS,searchEnabled:e.searchEnabled,simulationTime:e.simulationTime,traces:e.$options.traces,vehicleLookup:e.vehicleLookup,viewId:e.viewId,onClick:e.handleClick,trafficLayers:e.trafficLayers}}),e.thumbnail?e._e():r("zoom-buttons"),r("div",{staticClass:"bottom-controls-mobile"},[r("div",{staticClass:"big clock"},[r("p",[e._v(e._s(e.myState.clock))])]),e.legendItems.length?r("legend-colors",{staticClass:"legend-block",attrs:{mobile:!0,title:`${e.$t("passengers")}:`,items:e.legendItems}}):e._e(),r("settings-panel",{staticClass:"settings-area",attrs:{items:e.SETTINGS},on:{click:e.handleSettingChange}})],1),e.isLoaded&&!e.thumbnail?r("div",{staticClass:"right-side"},[r("collapsible-panel",{attrs:{direction:"right"}},[r("div",{staticClass:"big clock"},[r("p",[e._v(e._s(e.myState.clock))])]),r("div",{staticClass:"panel-items"},[e.legendItems.length?r("legend-colors",{staticClass:"legend-block",attrs:{title:`${e.$t("passengers")}:`,items:e.legendItems}}):e._e(),r("legend-colors",{staticClass:"legend-block",attrs:{title:`${e.$t("requests")}:`,items:e.legendRequests,mobile:!1}}),r("settings-panel",{staticClass:"settings-area",attrs:{items:e.SETTINGS},on:{click:e.handleSettingChange}}),r("div",{staticClass:"speed-block"},[r("p",{staticClass:"speed-label"},[e._v(e._s(e.$t("speed"))+":"),r("br"),e._v(e._s(e.speed)+"x")]),r("b-slider",{staticClass:"speed-slider",attrs:{min:e.speedStops[0],max:e.speedStops[e.speedStops.length-1],duration:0,dotSize:20,tooltip:!0,"tooltip-placement":"bottom","tooltip-formatter":function(e){return e+"x"}},model:{value:e.speed,callback:function(t){e.speed=t},expression:"speed"}},[e._l(e.speedStops,(function(e){return[r("b-slider-tick",{key:e,attrs:{value:e}})]}))],2)],1)],1)])],1):e._e(),!e.thumbnail&&e.isLoaded?r("playback-controls",{staticClass:"bottom-area",attrs:{timeStart:e.timeStart,timeEnd:e.timeEnd,isRunning:e.myState.isRunning,currentTime:e.simulationTime},on:{click:e.toggleSimulation,time:e.setTime}}):e._e()],1)}),[],!1,_t,"9e127374",null,null);function _t(e){for(let t in Pt)this[t]=Pt[t]}var Ct=function(){return Et.exports}();export{Ct as default};
//# sourceMappingURL=VehicleAnimation.7eafac45.js.map
