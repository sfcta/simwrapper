import{d as e}from"./vendor.e9c367ae.js";import{r as t}from"./index.a906c0e7.js";import{P as i}from"./papaparse.min.963a9bc8.js";import{g as s,S as a,n as r}from"./index.2deacc07.js";import{H as n}from"./HTTPFileSystem.e57ad358.js";import{a as o}from"./util.b5d45f97.js";var l=e({name:"OverviewPanel",components:{},props:{fileSystemConfig:{type:Object,required:!0},subfolder:{type:String,required:!0},files:{type:Array,required:!0},config:{type:Object,required:!0},cardTitle:{type:String,required:!1},cardId:String,datamanager:{type:Object,required:!0}},data:()=>({globalState:s.state,id:"tiles-"+Math.floor(1e12*Math.random()),dataSet:{},YAMLrequirementsOverview:{dataset:""},colors:["#F08080","#FFB6C1","#FFDAB9","#FFECB3","#B0E0E6","#98FB98","#FFD700","#FFA07A","#E0FFFF","#FFDAB9","#FFC0CB","#FFA500","#FF8C00","#FF7F50","#FFE4B5","#ADD8E6","#90EE90","#FFD700","#FFC0CB","#FFA500"],colorsD3:["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"],localTileIcons:["departure_board","directions_car","emoji_transportation","local_taxi","subway","directions_bike","directions_subway","ev_station","local_gas_station","motorcycle","train","directions_boat","electric_car","group","local_parking","person","transportation","directions_bus","electric_rickshaw","groups","local_shipping","route","two_wheeler"],testImage:"",base64Images:[],imagesAreLoaded:!1,tileNameIndex:0,tileValueIndex:1,tileImageIndex:2}),computed:{fileApi(){return new n(this.fileSystemConfig,s)}},async mounted(){this.dataSet=await this.loadFile(),this.validateDataSet(),await this.loadImages(),this.$emit("isLoaded")},methods:{forceRerender(){this.imagesAreLoaded=!1,this.$nextTick((()=>{this.imagesAreLoaded=!0}))},async loadImages(){this.imagesAreLoaded=!1;for(let i=0;i<this.dataSet.data.length;i++){const s=this.dataSet.data[i];if(this.checkIfItIsACustomIcon(s[this.tileImageIndex]))try{const e=await this.fileApi.getFileBlob(this.subfolder+"/"+this.config.dataset+"/../"+s[this.tileImageIndex].trim()),a=await t.arraybuffer(e),r=o(a);r&&(this.base64Images[i]=`center / cover no-repeat url(data:image/png;base64,${r})`)}catch(e){e instanceof Response&&this.$store.commit("setStatus",{type:a.WARNING,msg:e.statusText,desc:`The file ${s[this.tileImageIndex]} was not found in this path ${this.subfolder+"/"+this.config.dataset+"/../"+s[this.tileImageIndex]}.`})}this.forceRerender()}this.imagesAreLoaded=!0},async loadFile(){const e=await this.fileApi.getFileText(this.subfolder+"/"+this.config.dataset);return i.parse(e,{comments:"#",delimitersToGuess:[";","\t",","," "],dynamicTyping:!0,header:!1,skipEmptyLines:!0})},validateYAML(){for(const e in this.YAMLrequirementsOverview)e in this.config==!1&&this.$store.commit("setStatus",{type:a.ERROR,msg:`YAML file missing required key: ${e}`,desc:"Check this.YAMLrequirementsXY for required keys"})},validateDataSet(){},checkIfIconIsInAssetsFolder(e){return this.localTileIcons.includes(e.trim())},checkIfItIsACustomIcon(e){if(null!=e)return!!(e.includes(".png")||e.includes(".jpg")||e.includes(".svg")||e.includes(".jpeg"))}}});const c={};var d=r(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"content"},[e.imagesAreLoaded?i("div",{staticClass:"tiles-container"},e._l(this.dataSet.data,(function(t,s){return i("div",{staticClass:"tile",style:{"background-color":e.colors[s%e.colors.length]}},[i("p",{staticClass:"tile-title"},[e._v(e._s(t[e.tileNameIndex]))]),i("p",{staticClass:"tile-value"},[e._v(e._s(t[e.tileValueIndex]))]),null!=t[e.tileImageIndex]&&e.checkIfItIsACustomIcon(t[e.tileImageIndex])?i("div",{staticClass:"tile-image",style:{background:e.base64Images[s],"background-size":"contain"}}):null!=t[e.tileImageIndex]&&e.checkIfIconIsInAssetsFolder(t[e.tileImageIndex])?i("img",{staticClass:"tile-image",style:{background:""},attrs:{src:"/src/assets/tile-icons/"+t[e.tileImageIndex].trim()+".svg"}}):null!=t[e.tileImageIndex]?i("font-awesome-icon",{staticClass:"tile-image",style:{background:"",color:"black"},attrs:{icon:t[e.tileImageIndex].trim(),size:"2xl"}}):e._e()],1)})),0):e._e()])}),[],!1,m,"f5334ca2",null,null);function m(e){for(let t in c)this[t]=c[t]}var g=function(){return d.exports}();export{g as default};
//# sourceMappingURL=tile.9e378f15.js.map
